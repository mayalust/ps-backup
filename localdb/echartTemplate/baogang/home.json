{
  "version": "V_2",
  "groups": [
    {
      "id": "0",
      "label": "服务中心",
      "path": "index",
      "layout": {
        "type": "column",
        "children": [
          {
            "label": "控制板1",
            "type": "block",
            "source": "BLOCK",
            "style": {
              "padding": "0px",
              "margin": "0px",
              "border": "0",
              "box-shadow": "0px 0px 0px 0px rgba(0,0,0,0)",
              "background-color": "rgba(250,250,250,0)",
              "height": "calc(100vh - 100px)",
              "overflow-y": "auto",
              "overflow-x": "hidden"
            },
            "advance": {
              "expression": {}
            },
            "children": [
              {
                "type": "column",
                "col": 12,
                "children": [
                  {
                    "type": "row",
                    "source": "ROW",
                    "parameters": {
                      "alignment": "bootstrap"
                    },
                    "style": {},
                    "children": [
                      {
                        "type": "column",
                        "children": [
                          {
                            "label": "组态视图",
                            "type": "topo",
                            "source": "TOPO",
                            "advance": {
                              "variable": "",
                              "expression": "expression = {\n  \"on\" : {\n    \"init\" : function(event){\n      var target = event.target;\n      var lngsstart = 72; var lngswidth = 65;\n      var latsstart = 13.5; var latswidth = 40;\n      var lngs = [lngsstart, lngsstart + lngswidth];\n      var lats = [latsstart, latsstart + latswidth];\n      var rootScope = target.getRootScope();\n      target.render();\n      target.on(\"$loadCiKpiComplete\", function(cells){\n        target.getDomainAreaLineTree_alertStatus(function(domaintree){\n          var domains = domaintree.children.sort(function(a,b){\n            var y1 = a.$attr(\"values/latitude\");\n            var y2 = b.$attr(\"values/latitude\");\n            return y2 - y1;\n          });\n          var WIDTH = 1200, HEIGHT = 700;\n          var ci = domains.map(function(elem){\n            return elem.id;\n          });\n          var kpi = [999999, 3014];\n          target.getKpiValueCi(ci, kpi, function(valuelist){\n            var create3Dbar = function(domain){\n              var name = domain.label;\n              var lng = domain.values.longitude;\n              var lat = domain.values.latitude;\n              var deviceAll = domain.description;\n              if(deviceAll == \" \") {\n                  deviceAll = 0;\n              }\n              target.create3Dbar(name, function(ins){\n                  var find = valuelist.find(function(value){\n                      return value.nodeId == domain.id && value.kpiCode == 999999;\n                  }) || {};\n                  var deviceNum = valuelist.find(function(value){\n                      return value.nodeId == domain.id && value.kpiCode == 3014;\n                  }) || {};\n                  // 
                            },
                            "style": {
                              "font-size": "12px",
                              "background-repeat": "no-repeat",
                              "margin-top": "10%"
                            },
                            "viewId": 546900339506066,
                            "parameters": {}
                          }
                        ],
                        "col": 7
                      },
                      {
                        "type": "column",
                        "children": [
                          {
                            "label": "控制板1",
                            "type": "block",
                            "source": "BLOCK",
                            "style": {
                              "margin": "5px 10px 10px 10px",
                              "padding": "10px",
                              "height": "260px"
                            },
                            "advance": {
                              "expression": "{}"
                            },
                            "children": [
                              {
                                "type": "column",
                                "col": 12,
                                "children": [
                                  {
                                    "label": "文字",
                                    "type": "text",
                                    "source": "TEXT",
                                    "help": "http://localhost/app-free-style/index.html#/help/index%7Ctext/%5B%220%22,%7B%7D%5D",
                                    "data": {
                                      "applied": false,
                                      "multipleCi": false,
                                      "multipleKpi": false,
                                      "resource": [],
                                      "modelType": 300,
                                      "resfilltype": "parameter",
                                      "series": {
                                        "manual": "新建文字",
                                        "bind": "(function (source){\n  var formatter=function(elem){\n    return elem.value\n   }\n  return source.ci.getSeries(formatter);\n})"
                                      },
                                      "modelDisable": true
                                    },
                                    "style": {
                                      "margin": "5px",
                                      "padding": "0",
                                      "font-size": "12px",
                                      "font-weight": "bold",
                                      "color": "rgb(255, 255, 255)"
                                    },
                                    "advance": {
                                      "getfunction": "kpiDataService.getValueList",
                                      "category": "ci",
                                      "condition": [
                                        "kpi",
                                        "{object:kpiQueryModel}"
                                      ],
                                      "expression": "expression = {\n    on : {\n        init : function(event){\n            var target = event.target;\n            target.setText(\"状态总览 \");\n        }\n    }\n}"
                                    },
                                    "parameters": {}
                                  },
                                  {
                                    "label": "重复单元",
                                    "type": "repeater",
                                    "source": "REPEATER",
                                    "parameters": {
                                      "col": 6
                                    },
                                    "advance": {
                                      "getListTable": "allprojects",
                                      "expression": "expression = {\n  on : {\n    init : function(event){\n      var target = event.target;\n      target.getDomainAreaLineTree(function(domaintree){\n          
                                    },
                                    "children": [
                                      {
                                        "type": "column",
                                        "col": [
                                          2,
                                          0
                                        ],
                                        "children": [
                                          {
                                            "label": "控件组",
                                            "type": "ctrlgroup",
                                            "source": "CTRLGROUP",
                                            "advance": {
                                              "expression": "expression = {\n  on : {\n    repeat : function(event){\n      var target = event.target;\n      var global = event.global;\n      var label = target.$repeatData.province;\n      var description = target.$repeatData.description || 0;\n      var ctrlGroups = [[{\n          type : \"jquery\",\n          render : function(){\n              var wrap = $(\"<div></div>\");\n              wrap.css(\"height\", \"70px\");\n              wrap.css(\"border\", \"1px solid rgba(250,250,250,.3)\");\n              wrap.css(\"background-color\", \"rgba(0,100,250,.1)\");\n              var title = $(\"<div></div>\");\n              title.text(label);\n              title.css(\"font-size\", \"12px\");\n              title.css(\"color\", \"#fff\");\n              title.css(\"position\", \"absolute\");\n              title.css(\"top\", \"12px\");\n              title.css(\"left\", \"15px\");\n              title.css(\"font-weight\", \"bold\");\n              var sub = $(\"<div></div>\");\n              sub.text(\"重要台数\");\n              sub.css(\"position\", \"absolute\");\n              sub.css(\"top\", \"30px\");\n              sub.css(\"left\", \"15px\");\n              sub.css(\"color\", \"#aaa\");\n              sub.css(\"font-size\", \"10px\");\n              var number = $(\"<div></div>\");\n              number.text(description);\n              number.css(\"position\", \"absolute\");\n              number.css(\"top\", \"45px\");\n              number.css(\"left\", \"15px\");\n              number.css(\"font-size\", \"14px\");\n              number.css(\"font-weight\", \"bold\");\n              wrap.append(title);\n              wrap.append(sub);\n              wrap.append(number);\n              return wrap;\n          }\n        }]];\n      target.render(ctrlGroups);\n    }\n  }\n}"
                                            },
                                            "style": {
                                              "margin": "5px",
                                              "font-size": "12px"
                                            },
                                            "help": "../pdf/ctrlgroup.pdf",
                                            "parameters": {
                                              "cgroupstyle": "table"
                                            }
                                          },
                                          {
                                            "type": "row",
                                            "source": "ROW",
                                            "parameters": {
                                              "alignment": "bootstrap"
                                            },
                                            "style": {},
                                            "children": [
                                              {
                                                "type": "column",
                                                "children": [
                                                  {
                                                    "label": "控件组",
                                                    "type": "ctrlgroup",
                                                    "source": "CTRLGROUP",
                                                    "advance": {
                                                      "expression": "expression = {\n  on : {\n    repeat : function(event){\n      \n   \n      var target = event.target;\n    \n     \n      var colors = [target.getAlertColor(1), target.getAlertColor(2), target.getAlertColor(3)];\n      var global = event.global;\n      var ctrlGroups = [];\n      var createTr = function(index, element){   \n      \n        return [{\n          type : \"jquery\",\n          render : function(){ \n              var wrap = $(\"<div></div>\");\n              var title = $(\"<div></div>\");\n              var bar = $(\"<div></div>\");\n              wrap.css(\"height\", \"25px\");\n              wrap.css(\"width\", \"40px\");\n              wrap.css(\"margin\", \"auto\");\n              bar.css(\"width\", \"10px\");\n              bar.css(\"height\", \"25px\");\n              bar.css(\"background-color\", colors[index]);\n              bar.css(\"position\", \"absolute\");\n              wrap.css(\"position\", \"relative\");\n              bar.css(\"left\", \"25px\");\n              wrap.append(bar);\n              title.css(\"text-align\", \"right\");\n              title.css(\"color\", \"#a0a0a0\");\n              title.css(\"margin-right\", \"15px\");\n              title.css(\"position\", \"absolute\");\n              title.css(\"font-size\", \"12px\");\n              title.text(element.name);\n              var value = $(\"<div id=\"+target.$repeatData.id+\" severity=\"+severity+\"  value=\"+element.value+\"></div>\");\n              value.css(\"color\", \"#fff\");\n              value.css(\"position\", \"absolute\");\n              value.css(\"font-size\", \"12px\");\n              value.css(\"text-align\", \"right\");\n              value.css(\"font-weight\", \"bold\");\n              value.css(\"top\", \"12px\");\n              var severity = \"\";\n              if(element.name==\"警告\"){ \n                  value.attr(\"severity\",3)\n                  value.css(\"cursor\",\"pointer\");\n              }else if(element.name==\"注意\"){\n                  value.attr(\"severity\",2)\n                  value.css(\"cursor\",\"pointer\");\n              }\n             \n              value.text(element.value);\n              // 点击警告、注意 传入所在的域和告警级别。查出所在的设备\n              value.click(function(e){  \n                     var position = {\n                         clientX:e.clientX,\n                         clientY:e.clientY,\n                         screenWidth:$(\"body\").width(),\n                         screenHeight:$(\"body\").height()\n                     }\n                     var params= {\n                         \"nodeId\":$(e.target).attr(\"id\")-0,\n                         \"severity\":$(e.target).attr(\"severity\"),\n                     };\n                     if($(e.target).attr(\"severity\")!=\"undefined\"){\n                         if($(e.target).attr(\"value\")!=0){\n                             target.getAlertDeviceList(params,function(tc){\n                                target.createCurrentStatusByItem(tc,position);  \n                             })\n                         }else{\n                             target.growl(\"没有告警设备\",\"warning\")\n                         } \n                     }\n                    \n              })\n              wrap.append(title);\n              wrap.append(value);\n              return wrap;\n          }\n        }]\n      }\n      for(var i = target.$repeatData.data.length - 1; i >= 0; i--){\n         ctrlGroups.push(createTr(i, target.$repeatData.data[i]));\n      }\n      event.target.render(ctrlGroups);\n    }\n  }\n}"
                                                    },
                                                    "style": {
                                                      "margin": "5px",
                                                      "font-size": "12px"
                                                    },
                                                    "help": "../pdf/ctrlgroup.pdf",
                                                    "parameters": {
                                                      "cgroupstyle": "table"
                                                    }
                                                  }
                                                ],
                                                "col": 6
                                              },
                                              {
                                                "type": "column",
                                                "children": [
                                                  {
                                                    "label": "SVG视图",
                                                    "type": "svgchart",
                                                    "source": "SVGCHART",
                                                    "advance": {
                                                      "expression": "expression = {\n  \"on\" : {\n    \"init\" : function(event){\n        var  target = event.target;\n        var repeatData = target.$repeatData;\n        var barOption = {\n          title: {\n            text: 'svgChart入门示例'\n          },\n          grid : {\n              top : \"5%\",\n              left : \"10%\",\n              height : \"90%\"\n          },\n          legend: {\n            data: ['销量']\n          },\n          xAxis: {\n            show : false\n          },\n          yAxis: {\n              show : false\n          },\n          series: [{\n            stack : \"总量\",\n            name: '销量1',\n            type: '3dbar',\n            itemStyle : {\n                normal : {\n                    color : \"#00bc79\"\n                }\n            },\n            data: [repeatData.data[0].value]\n          },{\n            stack : \"总量\",\n            name: '销量2',\n            type: '3dbar',\n            itemStyle : {\n                normal : {\n                    color : \"#efd709\"\n                }\n            },\n            data: [repeatData.data[1].value]\n          },{\n            stack : \"总量\",\n            name: '销量3',\n            type: '3dbar',\n            itemStyle : {\n                normal : {\n                    color : \"#ee6b1c\"\n                }\n            },\n            data: [repeatData.data[2].value]\n          }]\n        };\n        target.render(barOption);\n     }\n  }\n}"
                                                    },
                                                    "style": {
                                                      "margin": "0px",
                                                      "font-size": "12px",
                                                      "height": "125px"
                                                    },
                                                    "parameters": {}
                                                  }
                                                ],
                                                "col": 6
                                              }
                                            ],
                                            "advance": {
                                              "expression": "{\n\t\"on\" : {\n    \"click\" : function(event){\n      var ticketNo = event.data.values.ticketNo;\n      event.tools.location.href='../../app-oc/index.html#/workOrderTimeLine/'+ ticketNo;\n     }\n  },  \n  \"format\" : [\n    {\n      \"name\": \"工单号\",\n      \"value\": \"{item:ticketNo}\",\n      \"type\": \"text\"\n    },\n    {\n      \"name\": \"内容\",\n      \"value\": \"{item:message}\",\n      \"type\": \"text\"\n    },\n    {\n      \"name\": \"紧急度\",\n      \"value\": \"{item:priorityCode}\",\n      \"type\": \"priority\"\n    }\n  ]\n}"
                                            }
                                          }
                                        ]
                                      }
                                    ],
                                    "style": {},
                                    "url": "images/map/map1.png"
                                  }
                                ]
                              }
                            ],
                            "parameters": {},
                            "url": "images/map/map1.png"
                          },
                          {
                            "label": "控制板1",
                            "type": "block",
                            "source": "BLOCK",
                            "style": {
                              "margin": "10px",
                              "padding": "10px",
                              "height": "260px"
                            },
                            "advance": {
                              "expression": "{}"
                            },
                            "children": [
                              {
                                "type": "column",
                                "col": 12,
                                "children": [
                                  {
                                    "label": "文字",
                                    "type": "text",
                                    "source": "TEXT",
                                    "help": "http://localhost/app-free-style/index.html#/help/index%7Ctext/%5B%220%22,%7B%7D%5D",
                                    "style": {
                                      "margin": "auto",
                                      "padding": "5px",
                                      "font-size": "12px",
                                      "font-weight": "bold",
                                      "text-align": "left",
                                      "color": "rgb(255, 255, 255)"
                                    },
                                    "advance": {
                                      "expression": "expression = {\n    on : {\n        init : function(event){\n            var target = event.target;\n            target.setText(\"诊断绩效统计（当月内）\")\n        }\n    }\n}"
                                    },
                                    "data": {
                                      "kpi": [],
                                      "modelType": 300,
                                      "resfilltype": "parameter",
                                      "resource": [],
                                      "modelDisable": true
                                    },
                                    "parameters": {}
                                  },
                                  {
                                    "label": "控件组",
                                    "type": "ctrlgroup",
                                    "source": "CTRLGROUP",
                                    "advance": {
                                      "expression": "expression = {\n    bootstrap : true,\n  on : {\n    init : function(event){\n      var target = event.target;\n      var global = event.global;\n       var filter = {\"layer\":2,\"modelId\":300,\"domains\":\"/0/515445641576227/\"};\n      target.getDomainsByFilter(filter,function(returnData){\n          var baseName = [];\n          var mountain = [];\n          \n            //for(var i = returnData.length-1; i >= 0; i--) {\n          \n            for(var i = 0; i < returnData.length;i++) {\n                baseName.push(returnData[i].name)\n                mountain.push(returnData[i].id)\n            }\n            // 
                                    },
                                    "style": {
                                      "font-size": "12px"
                                    },
                                    "help": "../pdf/ctrlgroup.pdf",
                                    "parameters": {
                                      "cgroupstyle": "table"
                                    }
                                  }
                                ]
                              }
                            ],
                            "url": "images/map/map1.png",
                            "parameters": {}
                          },
                          {
                            "label": "控制板1",
                            "type": "block",
                            "source": "BLOCK",
                            "style": {
                              "margin": "10px",
                              "padding": "10px",
                              "height": "280px"
                            },
                            "advance": {
                              "expression": {}
                            },
                            "children": [
                              {
                                "type": "column",
                                "col": 12,
                                "children": [
                                  {
                                    "label": "文字",
                                    "type": "text",
                                    "source": "TEXT",
                                    "help": "http://localhost/app-free-style/index.html#/help/index%7Ctext/%5B%220%22,%7B%7D%5D",
                                    "style": {
                                      "margin": "auto",
                                      "padding": "5px",
                                      "font-size": "12px",
                                      "font-weight": "bold",
                                      "text-align": "left",
                                      "color": "rgb(255, 255, 255)"
                                    },
                                    "advance": {
                                      "expression": "expression = {\n    on : {\n        init : function(event){\n            var target = event.target;\n            target.setText(\"检修实绩统计（当月内）\")\n        }\n    }\n}"
                                    },
                                    "data": {
                                      "modelType": 300,
                                      "resfilltype": "parameter",
                                      "modelDisable": true
                                    },
                                    "url": "images/map/map1.png",
                                    "parameters": {}
                                  },
                                  {
                                    "label": "高级视图",
                                    "type": "advanceEchart",
                                    "source": "ADVANCEECHART",
                                    "parameters": {
                                      "theme": "default"
                                    },
                                    "advance": {
                                      "expression": "express = {\n  on : {\n    init : function(event){\n        var target = event.target;\n        var global = event.global;\n        var filter = {\"layer\":2,\"modelId\":300,\"domains\":\"/0/515445641576227/\"};\n       \n        target.getDomainsByFilter(filter,function(returnData){\n            var baseName = [];\n            var mountain = [];\n            //for(var i = 0; i < returnData.length;i++) {\n            for(var i = returnData.length-1; i >= 0;i--) {\n                baseName.push(returnData[i].name)\n                mountain.push(returnData[i].id)\n            }\n            var params = [\"kpi\",{\"isRealTimeData\":true,\"includeInstance\":true,\n            \"nodeIds\":mountain,\"kpiCodes\":[6101]}];\n            target.postService(\"kpiDataFlexService\",\"getKpiValueList\",params,function(returnData){\n            var projectData = [];\n            for(var j = 0; j < returnData.data.length; j++) {\n                if(returnData.data[j].instance == 'state,all') {\n                     projectData.push(returnData.data[j].value)\n                 }\n            }\n            \n            var option = {\n            tooltip : {\n                trigger: 'axis',\n                axisPointer : {            // 坐标轴指示器，坐标轴触发有效\n                type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'\n            }\n             },\n            legend: {\n                data: ['状态维修项目数'],\n                top : \"2%\",\n                right: \"2%\"\n            },\n            grid: {\n                left: '5%',\n                right: '4%',\n                bottom: '3%',\n                height : '80%',\n                containLabel: true\n            },\n            xAxis:  {\n                type: 'value'\n            },\n             yAxis: {\n                type: 'category',\n                data: baseName,\n                axisLabel : {\n                    margin : 30,\n                    color : \"#72b3d7\",\n                    fontWeight : \"bold\"\n                }\n            },\n            series: [\n            {\n            name: '状态维修项目数',\n            type: 'bar',\n            stack: '总量',\n            label: {\n                normal: {\n                    show: true,\n                    position: 'insideRight',\n                    textBorderColor:'0'\n                }\n            },\n             itemStyle: {\n                normal: {\n                    color:target.linearGradient(\n                        0, 0, 1, 0,\n                        [\n                            {offset: 0, color: '#fed154'},\n                            {offset: 1, color: '#ffa823'}\n                        ]\n                    )\n                },\n               \n            },\n            data: projectData\n            }\n       \n        ]\n    };\n            event.target.render(option);\n             \n            })\n    },{\n            \"isRealTimeData\" : true,\n            \"includeInstance\": true\n        })\n     \n      \n   \n    }\n  }\n}"
                                    },
                                    "style": {
                                      "width": "100%",
                                      "height": "240px"
                                    },
                                    "url": "images/map/map1.png"
                                  }
                                ]
                              }
                            ]
                          }
                        ],
                        "col": 5
                      }
                    ],
                    "advance": {
                      "expression": "{\n\t\"on\" : {\n    \"click\" : function(event){\n      var ticketNo = event.data.values.ticketNo;\n      event.tools.location.href='../../app-oc/index.html#/workOrderTimeLine/'+ ticketNo;\n     }\n  },  \n  \"format\" : [\n    {\n      \"name\": \"工单号\",\n      \"value\": \"{item:ticketNo}\",\n      \"type\": \"text\"\n    },\n    {\n      \"name\": \"内容\",\n      \"value\": \"{item:message}\",\n      \"type\": \"text\"\n    },\n    {\n      \"name\": \"紧急度\",\n      \"value\": \"{item:priorityCode}\",\n      \"type\": \"priority\"\n    }\n  ]\n}"
                    }
                  }
                ]
              }
            ],
            "url": "images/map/map1.png"
          }
        ],
        "col": 12
      },
      "$$hashKey": "object:1834"
    },
    {
      "label": "产线",
      "path": "production",
      "layout": {
        "type": "column",
        "children": [
          {
            "label": "控制板1",
            "type": "block",
            "source": "BLOCK",
            "style": {
              "padding": "0px",
              "margin": "0px",
              "border": "0",
              "box-shadow": "0px 0px 0px 0px rgba(0,0,0,0)",
              "background-color": "rgba(250,250,250,0)",
              "height": "calc(100vh - 100px)",
              "overflow-y": "auto",
              "overflow-x": "hidden"
            },
            "advance": {
              "expression": {}
            },
            "children": [
              {
                "type": "column",
                "col": 12,
                "children": [
                  {
                    "label": "控制板1",
                    "type": "block",
                    "source": "BLOCK",
                    "style": {
                      "padding": "10px",
                      "margin": "5px",
                      "border": "0",
                      "box-shadow": "0px 0px 0px 0px rgba(0,0,0,0)",
                      "background-color": "rgba(250,250,250,0)"
                    },
                    "children": [
                      {
                        "type": "column",
                        "col": 12,
                        "children": [
                          {
                            "type": "row",
                            "source": "ROW",
                            "parameters": {
                              "alignment": "bootstrap"
                            },
                            "style": {},
                            "children": [
                              {
                                "type": "column",
                                "children": [
                                  {
                                    "label": "数结构导航",
                                    "type": "navitree",
                                    "source": "NAVITREE",
                                    "advance": {
                                      "expression": ""
                                    },
                                    "style": {}
                                  }
                                ],
                                "col": 8
                              },
                              {
                                "type": "column",
                                "children": [
                                  {
                                    "label": "控件组",
                                    "type": "ctrlgroup",
                                    "source": "CTRLGROUP",
                                    "advance": {
                                      "expression": "expression = {\n  on : {\n    init : function(event){\n      var target = event.target;\n      var global = event.global;\n      var ctrlGroups = [\n       [{\n          type : \"clock\",\n          icon : \"glyphicon glyphicon-search\",\n          value : function(time){\n              return \"当前时间 ： \" + time\n          },\n          btnclass : \"btn btn-primary\",\n          class : \"col-md-12\",\n          style : {\n              \"float\" : \"right\",\n              \"font-weight\" : \"bold\"\n          }\n        }]\n      ];\n      event.target.render(ctrlGroups);\n    }\n  }\n}"
                                    },
                                    "style": {
                                      "margin": "5px",
                                      "font-size": "14px",
                                      "font-weight": "bold"
                                    },
                                    "help": "../pdf/ctrlgroup.pdf",
                                    "url": "images/map/map1.png",
                                    "parameters": {
                                      "cgroupstyle": "table"
                                    }
                                  }
                                ],
                                "col": 4
                              }
                            ],
                            "advance": {
                              "expression": "expression = {\n  \"on\" : {\n    \"init\" : function(event){\n      var target = event.target;\n      var role = target.getValue(\"global/ROLE\");\n      if(role != 4){\n          target.setDimension([0,0]);\n      }\n    }\n  }\n};"
                            }
                          },
                          {
                            "label": "控制板1",
                            "type": "block",
                            "source": "BLOCK",
                            "style": {
                              "padding": "8px",
                              "margin": "5px  5px  10px 5px"
                            },
                            "advance": {
                              "expression": {}
                            },
                            "children": [
                              {
                                "type": "column",
                                "col": 12,
                                "children": [
                                  {
                                    "label": "文字",
                                    "type": "text",
                                    "source": "TEXT",
                                    "help": "http://localhost/app-free-style/index.html#/help/index%7Ctext/%5B%220%22,%7B%7D%5D",
                                    "data": {
                                      "applied": false,
                                      "multipleCi": false,
                                      "multipleKpi": false,
                                      "resource": [],
                                      "modelType": 300,
                                      "resfilltype": "parameter",
                                      "series": {
                                        "manual": "新建文字",
                                        "bind": "(function (source){\n  var formatter=function(elem){\n    return elem.value\n   }\n  return source.ci.getSeries(formatter);\n})"
                                      },
                                      "modelDisable": true
                                    },
                                    "style": {
                                      "margin": "5px",
                                      "padding": "0",
                                      "font-size": "14px",
                                      "font-weight": "bold"
                                    },
                                    "advance": {
                                      "getfunction": "kpiDataService.getValueList",
                                      "category": "ci",
                                      "condition": [
                                        "kpi",
                                        "{object:kpiQueryModel}"
                                      ],
                                      "expression": "expression = {\n    on : {\n        init : function(event){\n            \n            var target = event.target;\n            \n            \n            var workObj = target.getParameter(\"id\");\n     \n\n    \n        target.getDomainAreaLineTree(function(domaintree){\n        var find = domaintree.find(function(node){\n            return node.id == workObj\n        });\n        if(find){\n            var  label = find.label;\n        }\n            target.setText(label)\n            \n            \n    })       \n            \n            \n            \n            \n            \n           \n           \n        }\n    }\n}"
                                    },
                                    "parameters": {}
                                  },
                                  {
                                    "label": "组态视图",
                                    "type": "topo",
                                    "source": "TOPO",
                                    "advance": {
                                      "variable": "",
                                      "expression": "expression = {\n  \"on\": {\n    \"init\": function(event) {\n      var target = event.target;\n      var id = target.getParameter(\"id\");\n      var main = target.getParameter(\"main\");\n      var initcount = 0;\n      target.getDomainAreaLineTree_alertStatus(function(domaintree) {\n        var find = domaintree.find(function(node) {\n          return node.id == id;\n        });\n        if(find) {\n          var children = (function(c){\n              if(!c) return [];\n              return c.filter(function(e){\n                  e.values.hide != true;\n              })\n          })(find.getChildren());\n          var children = find.getChildren();\n          var viewId = find.$attr(\"view/viewId\");\n          //把initcount设置为增量，表示只获得一次所有孩子的设备\n          if(initcount == 0) {\n            initcount++;\n            target.trigger(\"loadDevicesFromProjectIds\", children);\n\n            target.getViewById(viewId, function(view) {\n              var content = view.content;\n              var json = JSON.parse(content);\n              target.render(json);\n              target.on(\"$loadCiKpiComplete\", function(cells) {\n                for(var i in cells) {\n                  cells[i].attr(\"circle/opacity\", 0);\n                  cells[i].attr(\"text/opacity\", 0);\n                  cells[i].attr(\"rect/opacity\", 0);\n                }\n                var createAlarm = function(index, node) {\n                  var cell = cells.find(function(cell) {\n                    var text = cell.attr(\"text/text\");\n                    // 
                                    },
                                    "style": {
                                      "margin": "5px",
                                      "font-size": "12px",
                                      "background-repeat": "no-repeat"
                                    },
                                    "viewId": 469973748826064,
                                    "parameters": {}
                                  }
                                ]
                              }
                            ],
                            "parameters": {}
                          },
                          {
                            "label": "控件组",
                            "type": "ctrlgroup",
                            "source": "CTRLGROUP",
                            "advance": {
                              "expression": "expression = {\n  on: {\n    init: function (event) {\n      var target = event.target;\n      var global = event.global;\n    //   var task1 = target.getPopupData();\n    //   target.setValue(\"queryObj\", task1);\n    //   var currStatus = \"\";\n      var task1 = {val:1}\n    //   target.setValue(\"queryObj\", task1);\n      var currStatus = \"today\";\n      var render = function(){\n      var ctrlGroups = [\n        [\n        {\n          type: \"button\",\n          value:\"切换\",\n          btnclass:currStatus==\"today\"?\"btn btn-primary\":\"btn btn-default\",\n          btnStyle:{\n              \"width\":\"50px\",\n              \"height\":\"50px\",\n              \"border\":\"#10a4fb solid 1px\",\n              \"position\":\"absolute\",\n              \"right\":\"0px\",\n              \"z-index\":9999\n          },\n          on: {\n            click: function (elem) {debugger\n                if(currStatus == \"today\"){\n                  currStatus = \"\";\n                  target.trigger(\"queryTabelList11\", task1);\n                  task1.val = 2;\n                }else if(currStatus == \"\"){\n                  currStatus = \"today\";\n                  target.trigger(\"queryTabelList11\", task1);\n                  task1.val = 1;\n                }\n                \n                // task1.values.close = \"down\";\n            //   target.trigger(\"queryTabelList11\", task1);\n              render();\n            }\n          }\n        }\n        ]\n        \n      ];\n      event.target.render(ctrlGroups);\n      }\n      render()\n    }\n  }\n}\n\n\n"
                            },
                            "style": {
                              "margin": "5px",
                              "font-size": "12px"
                            },
                            "help": "../pdf/ctrlgroup.pdf",
                            "url": "images/map/map1.png",
                            "parameters": {
                              "cgroupstyle": "table"
                            }
                          },
                          {
                            "type": "row",
                            "source": "ROW",
                            "advance": {
                              "expression": "expression = {\n  \"on\" : {\n    \"init\" : function(event){\n      var target = event.target;\n      //target.setDimension([6,6]);\n    }\n  }\n};"
                            },
                            "parameters": {
                              "alignment": "bootstrap"
                            },
                            "style": {},
                            "children": [
                              {
                                "type": "column",
                                "children": [],
                                "col": 11
                              },
                              {
                                "type": "column",
                                "children": [],
                                "col": 1
                              }
                            ]
                          },
                          {
                            "label": "控制板1",
                            "type": "block",
                            "source": "BLOCK",
                            "style": {
                              "padding": "5px",
                              "margin": "5px"
                            },
                            "advance": {
                              "expression": "expression = {\n  on: {\n    init: function (event) {\n      var target = event.target;\n      var global = event.global;\n    //   target.setInvisible(false);\n    //   target.setInvisible(false);\n      target.on(\"queryTabelList11\",function(args){debugger\n         
                            },
                            "children": [
                              {
                                "type": "column",
                                "col": 12,
                                "children": [
                                  {
                                    "type": "row",
                                    "source": "ROW",
                                    "advance": {
                                      "expression": "expression = {\n  \"on\" : {\n    \"init\" : function(event){\n      var target = event.target;\n      //target.setDimension([6,6]);\n    }\n  }\n};"
                                    },
                                    "parameters": {
                                      "alignment": "bootstrap"
                                    },
                                    "style": {},
                                    "children": [
                                      {
                                        "type": "column",
                                        "children": [
                                          {
                                            "label": "控制板1",
                                            "type": "block",
                                            "source": "BLOCK",
                                            "style": {
                                              "padding": "5px",
                                              "margin": "5px  5px 0px 5px",
                                              "overflow-y": "scroll",
                                              "height": "390px"
                                            },
                                            "advance": {
                                              "expression": "{}"
                                            },
                                            "children": [
                                              {
                                                "type": "column",
                                                "col": 12,
                                                "children": [
                                                  {
                                                    "type": "row",
                                                    "source": "ROW",
                                                    "advance": {
                                                      "expression": "expression = {\n  \"on\" : {\n    \"init\" : function(event){\n      var target = event.target;\n      //target.setDimension([6,6]);\n    }\n  }\n};"
                                                    },
                                                    "parameters": {
                                                      "alignment": "bootstrap"
                                                    },
                                                    "style": {},
                                                    "children": [
                                                      {
                                                        "type": "column",
                                                        "children": [],
                                                        "col": 5
                                                      },
                                                      {
                                                        "type": "column",
                                                        "children": [],
                                                        "col": 3
                                                      },
                                                      {
                                                        "type": "column",
                                                        "children": [],
                                                        "col": 4
                                                      }
                                                    ]
                                                  },
                                                  {
                                                    "label": "文字",
                                                    "type": "text",
                                                    "source": "TEXT",
                                                    "help": "http://localhost/app-free-style/index.html#/help/index%7Ctext/%5B%220%22,%7B%7D%5D",
                                                    "data": {
                                                      "applied": false,
                                                      "multipleCi": false,
                                                      "multipleKpi": false,
                                                      "resource": [],
                                                      "modelType": 300,
                                                      "resfilltype": "parameter",
                                                      "series": {
                                                        "manual": "新建文字",
                                                        "bind": "(function (source){\n  var formatter=function(elem){\n    return elem.value\n   }\n  return source.ci.getSeries(formatter);\n})"
                                                      },
                                                      "modelDisable": true
                                                    },
                                                    "style": {
                                                      "padding": "5px",
                                                      "font-size": "14px",
                                                      "font-weight": "bold",
                                                      "margin": "5px",
                                                      "color": "rgb(255, 255, 255)"
                                                    },
                                                    "advance": {
                                                      "getfunction": "kpiDataService.getValueList",
                                                      "category": "ci",
                                                      "condition": [
                                                        "kpi",
                                                        "{object:kpiQueryModel}"
                                                      ],
                                                      "expression": "expression = {\n    on : {\n        init : function(event){\n            var target = event.target;\n            target.setText(\"诊断绩效统计（当月内）\")\n        }\n    }\n}"
                                                    },
                                                    "parameters": {},
                                                    "url": "images/map/map1.png"
                                                  },
                                                  {
                                                    "label": "控件组",
                                                    "type": "ctrlgroup",
                                                    "source": "CTRLGROUP",
                                                    "advance": {
                                                      "expression": "expression = {\n  bootstrap : true,\n  on : {\n    init : function(event){\n      var target = event.target;\n      var global = event.global;\n      var workObj = target.getParameter(\"id\");\n      // 
                                                    },
                                                    "style": {
                                                      "font-size": "12px"
                                                    },
                                                    "help": "../pdf/ctrlgroup.pdf",
                                                    "parameters": {
                                                      "cgroupstyle": "table"
                                                    },
                                                    "url": "images/map/map1.png"
                                                  }
                                                ]
                                              }
                                            ],
                                            "parameters": {},
                                            "url": "images/map/map1.png"
                                          }
                                        ],
                                        "col": 6
                                      },
                                      {
                                        "type": "column",
                                        "children": [
                                          {
                                            "label": "控制板1",
                                            "type": "block",
                                            "source": "BLOCK",
                                            "style": {
                                              "padding": "5px",
                                              "margin": "5px  5px 0px 5px",
                                              "min-height": "390px"
                                            },
                                            "advance": {
                                              "expression": {}
                                            },
                                            "children": [
                                              {
                                                "type": "column",
                                                "col": 12,
                                                "children": [
                                                  {
                                                    "label": "文字",
                                                    "type": "text",
                                                    "source": "TEXT",
                                                    "help": "http://localhost/app-free-style/index.html#/help/index%7Ctext/%5B%220%22,%7B%7D%5D",
                                                    "data": {
                                                      "applied": false,
                                                      "multipleCi": false,
                                                      "multipleKpi": false,
                                                      "resource": [],
                                                      "modelType": 300,
                                                      "resfilltype": "parameter",
                                                      "series": {
                                                        "manual": "新建文字",
                                                        "bind": "(function (source){\n  var formatter=function(elem){\n    return elem.value\n   }\n  return source.ci.getSeries(formatter);\n})"
                                                      },
                                                      "modelDisable": true
                                                    },
                                                    "style": {
                                                      "padding": "5px",
                                                      "font-size": "14px",
                                                      "font-weight": "bold",
                                                      "margin": "5px",
                                                      "color": "rgb(255, 255, 255)"
                                                    },
                                                    "advance": {
                                                      "getfunction": "kpiDataService.getValueList",
                                                      "category": "ci",
                                                      "condition": [
                                                        "kpi",
                                                        "{object:kpiQueryModel}"
                                                      ],
                                                      "expression": "expression = {\n    on : {\n        init : function(event){\n            var target = event.target;\n            target.setText(\"异常事件分布（当月内）\")\n        }\n    }\n}"
                                                    },
                                                    "parameters": {},
                                                    "url": "images/map/map1.png"
                                                  },
                                                  {
                                                    "label": "高级视图",
                                                    "type": "advanceEchart",
                                                    "source": "ADVANCEECHART",
                                                    "parameters": {
                                                      "theme": "default"
                                                    },
                                                    "advance": {
                                                      "expression": "express = {\n  on : {\n    init : function(event){\n        var target = event.target;\n        var global = event.global;\n        var workObj = target.getParameter(\"id\");\n        //\"524031514586065\"\n        target.postService(\"dictionaryService\",\"/getAllDicts\",[],function (returnData) {\n           \n            var specialtyProps = []\n            for(var i = 0; i < returnData.data.length;i++) {\n                if(returnData.data[i].dictCode == 'specialtyProps') {\n                    specialtyProps.push({value:returnData.data[i].valueCode,label:returnData.data[i].label})\n                }\n            }\n            //  
                                                    },
                                                    "style": {
                                                      "margin": "auto",
                                                      "width": "100%",
                                                      "height": "320px"
                                                    },
                                                    "url": "images/map/map1.png"
                                                  }
                                                ]
                                              }
                                            ],
                                            "url": "images/map/map1.png",
                                            "parameters": {}
                                          }
                                        ],
                                        "col": 3
                                      },
                                      {
                                        "type": "column",
                                        "children": [
                                          {
                                            "label": "控制板1",
                                            "type": "block",
                                            "source": "BLOCK",
                                            "style": {
                                              "padding": "5px",
                                              "margin": "5px  5px 0px 5px",
                                              "min-height": "390px"
                                            },
                                            "advance": {
                                              "expression": "{}"
                                            },
                                            "children": [
                                              {
                                                "type": "column",
                                                "col": 12,
                                                "children": [
                                                  {
                                                    "label": "文字",
                                                    "type": "text",
                                                    "source": "TEXT",
                                                    "help": "http://localhost/app-free-style/index.html#/help/index%7Ctext/%5B%220%22,%7B%7D%5D",
                                                    "data": {
                                                      "applied": false,
                                                      "multipleCi": false,
                                                      "multipleKpi": false,
                                                      "resource": [],
                                                      "modelType": 300,
                                                      "resfilltype": "parameter",
                                                      "series": {
                                                        "manual": "新建文字",
                                                        "bind": "(function (source){\n  var formatter=function(elem){\n    return elem.value\n   }\n  return source.ci.getSeries(formatter);\n})"
                                                      },
                                                      "modelDisable": true
                                                    },
                                                    "style": {
                                                      "padding": "5px",
                                                      "font-size": "14px",
                                                      "font-weight": "bold",
                                                      "margin": "5px",
                                                      "color": "rgb(255, 255, 255)"
                                                    },
                                                    "advance": {
                                                      "getfunction": "kpiDataService.getValueList",
                                                      "category": "ci",
                                                      "condition": [
                                                        "kpi",
                                                        "{object:kpiQueryModel}"
                                                      ],
                                                      "expression": "expression = {\n    on : {\n        init : function(event){\n            var target = event.target;\n            target.setText(\"检修实绩（当月内）\")\n        }\n    }\n}"
                                                    },
                                                    "parameters": {},
                                                    "url": "images/map/map1.png"
                                                  },
                                                  {
                                                    "label": "高级视图",
                                                    "type": "advanceEchart",
                                                    "source": "ADVANCEECHART",
                                                    "parameters": {
                                                      "theme": "default"
                                                    },
                                                    "advance": {
                                                      "expression": "express = {\n  on : {\n    init : function(event){\n      var target = event.target;\n      var global = event.global;\n      var workObj = target.getParameter(\"id\");\n      //var label = target.getParameter(\"label\");\n     \n\n    \n    target.getDomainAreaLineTree(function(domaintree){\n    var find = domaintree.find(function(node){\n        return node.id == workObj\n    });\n    if(find){\n            var  label = find.label;\n            var params = [\"kpi\",{\"isRealTimeData\":true,\"includeInstance\":true,\n        \"nodeIds\":[workObj],\"kpiCodes\":[6101]}];\n      target.postService(\"kpiDataFlexService\",\"getKpiValueList\",params,function (returnData) {\n        var data = returnData.data;\n        var unfinished;\n        var finished;\n        for(var i = 0; i < data.length; i++) {\n          if(data[i].instance == \"state,0\") {\n            unfinished = data[i].value\n          }else if(data[i].instance == \"state,1\") {\n            finished = data[i].value\n          }\n        }\n        if(!unfinished) {\n          unfinished = 0;\n        }\n        if(!finished) {\n          finished = 0;\n        }\n         
                                                    },
                                                    "style": {
                                                      "margin": "auto",
                                                      "width": "100%",
                                                      "height": "320px"
                                                    },
                                                    "url": "images/map/map1.png"
                                                  }
                                                ]
                                              }
                                            ],
                                            "parameters": {},
                                            "url": "images/map/map1.png"
                                          }
                                        ],
                                        "col": 3
                                      }
                                    ]
                                  },
                                  {
                                    "label": "文字",
                                    "type": "text",
                                    "source": "TEXT",
                                    "help": "http://localhost/app-free-style/index.html#/help/index%7Ctext/%5B%220%22,%7B%7D%5D",
                                    "style": {
                                      "margin": "5px",
                                      "padding": "0",
                                      "font-size": "12px",
                                      "font-weight": "bold"
                                    },
                                    "advance": {
                                      "expression": "expression = {\n    on : {\n        init : function(event){\n            var target = event.target;\n            target.setText(\"新建文字22\")\n        }\n    }\n}"
                                    },
                                    "data": {
                                      "modelType": 300,
                                      "resfilltype": "parameter",
                                      "modelDisable": true
                                    },
                                    "parameters": {},
                                    "url": "images/map/map1.png"
                                  }
                                ]
                              }
                            ],
                            "url": "images/map/map1.png",
                            "parameters": {}
                          },
                          {
                            "label": "控制板1",
                            "type": "block",
                            "source": "BLOCK",
                            "style": {
                              "padding": "5px",
                              "margin": "5px"
                            },
                            "advance": {
                              "expression": "expression = {\n  on: {\n    init: function (event) {\n      var target = event.target;\n      var global = event.global;\n    //   target.setInvisible(false);\n    //   target.setInvisible(false);\n      target.on(\"queryTabelList11\",function(args){debugger\n         
                            },
                            "children": [
                              {
                                "type": "column",
                                "col": 12,
                                "children": [
                                  {
                                    "type": "row",
                                    "source": "ROW",
                                    "advance": {
                                      "expression": "expression = {\n  \"on\" : {\n    \"init\" : function(event){\n      var target = event.target;\n      //target.setDimension([6,6]);\n    }\n  }\n};"
                                    },
                                    "parameters": {
                                      "alignment": "bootstrap"
                                    },
                                    "style": {},
                                    "children": [
                                      {
                                        "type": "column",
                                        "children": [
                                          {
                                            "label": "控制板1",
                                            "type": "block",
                                            "source": "BLOCK",
                                            "style": {
                                              "padding": "5px",
                                              "height": "390px",
                                              "margin": "5px  5px  0px  5px"
                                            },
                                            "advance": {
                                              "expression": "{}"
                                            },
                                            "children": [
                                              {
                                                "type": "column",
                                                "col": 12,
                                                "children": [
                                                  {
                                                    "label": "文字",
                                                    "type": "text",
                                                    "source": "TEXT",
                                                    "help": "http://localhost/app-free-style/index.html#/help/index%7Ctext/%5B%220%22,%7B%7D%5D",
                                                    "data": {
                                                      "applied": false,
                                                      "multipleCi": false,
                                                      "multipleKpi": false,
                                                      "resource": [],
                                                      "modelType": 300,
                                                      "resfilltype": "parameter",
                                                      "series": {
                                                        "manual": "新建文字",
                                                        "bind": "(function (source){\n  var formatter=function(elem){\n    return elem.value\n   }\n  return source.ci.getSeries(formatter);\n})"
                                                      },
                                                      "modelDisable": true
                                                    },
                                                    "style": {
                                                      "padding": "5px",
                                                      "font-size": "14px",
                                                      "font-weight": "bold",
                                                      "margin": "5px",
                                                      "color": "rgb(255, 255, 255)"
                                                    },
                                                    "advance": {
                                                      "getfunction": "kpiDataService.getValueList",
                                                      "category": "ci",
                                                      "condition": [
                                                        "kpi",
                                                        "{object:kpiQueryModel}"
                                                      ],
                                                      "expression": "expression = {\n    on : {\n        init : function(event){\n            var target = event.target;\n            target.setText(\"设备状态总览\")\n        }\n    }\n}"
                                                    },
                                                    "parameters": {},
                                                    "url": "images/map/map1.png"
                                                  },
                                                  {
                                                    "label": "重复单元",
                                                    "type": "repeater",
                                                    "source": "REPEATER",
                                                    "parameters": {
                                                      "col": 1
                                                    },
                                                    "advance": {
                                                      "getListTable": "allprojects",
                                                      "expression": "expression = {\n  on : {\n    init : function(event){\n      var target = event.target;\n\n      var id = target.getParameter(\"id\") ;\n      \n      \n      \n    target.getDomainAreaLineTree(function(domaintree){\n        var find = domaintree.find(function(node){\n            return node.id == id\n        });\n        if(find){\n            var  label = find.label;\n            var description = find.description; \n            var domains = [];\n            domains.push(label);\n            var params = [\"kpi\",{\"isRealTimeData\":true,\"includeInstance\":true,\n            \"nodeIds\":[id],\"kpiCodes\":[6100]}];\n            target.postService(\"kpiDataFlexService\",\"getKpiValueList\",params,function(returnData){\n                var kpiNames = ['正常','注意','警告','监测台数','重要台数','数据采集点'];\n                var data = returnData.data;\n                   }\n}"
                                                    },
                                                    "children": [
                                                      {
                                                        "type": "column",
                                                        "col": [
                                                          12,
                                                          0
                                                        ],
                                                        "children": [
                                                          {
                                                            "type": "row",
                                                            "source": "ROW",
                                                            "parameters": {
                                                              "alignment": "bootstrap"
                                                            },
                                                            "style": {},
                                                            "children": [
                                                              {
                                                                "type": "column",
                                                                "children": [
                                                                  {
                                                                    "label": "控件组",
                                                                    "type": "ctrlgroup",
                                                                    "source": "CTRLGROUP",
                                                                    "advance": {
                                                                      "expression": "expression = {\n  on : {\n    repeat : function(event){\n      var target = event.target;\n      var colors = [target.getAlertColor(1), target.getAlertColor(2), target.getAlertColor(3)];\n      var global = event.global;\n      var ctrlGroups = [];\n      var createTr = function(index, element){\n        return [{\n          type : \"jquery\",\n          render : function(){\n              var wrap = $(\"<div></div>\");\n              var title = $(\"<div></div>\");\n              var bar = $(\"<div></div>\");\n              wrap.css(\"height\", \"40px\");\n              //wrap.css(\"height\", \"35px\");\n              wrap.css(\"width\", \"40px\");\n              wrap.css(\"margin\", \"auto\");\n              bar.css(\"width\", \"10px\");\n              //bar.css(\"height\", \"25px\");\n              bar.css(\"height\", \"40px\");\n              bar.css(\"background-color\", colors[index]);\n              bar.css(\"position\", \"absolute\");\n              wrap.css(\"position\", \"relative\");\n              bar.css(\"left\", \"25px\");\n              wrap.append(bar);\n              title.css(\"text-align\", \"right\");\n              title.css(\"color\", \"#a0a0a0\");\n              title.css(\"margin-right\", \"15px\");\n              title.css(\"position\", \"absolute\");\n              title.css(\"font-size\", \"12px\");\n              title.text(element.name);\n              var value = $(\"<div></div>\");\n              value.css(\"color\", \"#fff\");\n              value.css(\"position\", \"absolute\");\n              value.css(\"font-size\", \"12px\");\n              value.css(\"text-align\", \"right\");\n              value.css(\"font-weight\", \"bold\");\n              value.text(element.value);\n              value.css(\"top\", \"12px\");\n              wrap.append(title);\n              wrap.append(value);\n              return wrap;\n          }\n        }]\n      }\n      for(var i = target.$repeatData.data.length - 1; i >= 0; i--){\n         ctrlGroups.push(createTr(i, target.$repeatData.data[i]));\n      }\n      event.target.render(ctrlGroups);\n    }\n  }\n}"
                                                                    },
                                                                    "style": {
                                                                      "margin": "5px",
                                                                      "font-size": "12px"
                                                                    },
                                                                    "help": "../pdf/ctrlgroup.pdf",
                                                                    "parameters": {
                                                                      "cgroupstyle": "table"
                                                                    }
                                                                  }
                                                                ],
                                                                "col": 6
                                                              },
                                                              {
                                                                "type": "column",
                                                                "children": [
                                                                  {
                                                                    "label": "SVG视图",
                                                                    "type": "svgchart",
                                                                    "source": "SVGCHART",
                                                                    "advance": {
                                                                      "expression": "expression = {\n  \"on\" : {\n    \"init\" : function(event){\n        var  target = event.target;\n        var repeatData = target.$repeatData;\n        var barOption = {\n          title: {\n            text: 'svgChart入门示例'\n          },\n          grid : {\n              top : \"5%\",\n              left : \"10%\",\n              height : \"90%\"\n          },\n          legend: {\n            data: ['销量']\n          },\n          xAxis: {\n            show : false,\n            data: [\"衬衫\", \"羊毛衫\", \"雪纺衫\", \"裤子\", \"高跟鞋\", \"袜子\"]\n          },\n          yAxis: {\n              show : false\n          },\n          series: [{\n            stack : \"总量\",\n            name: '销量1',\n            type: '3dbar',\n            data: [repeatData.data[0].value]\n          },{\n              stack : \"总量\",\n            name: '销量2',\n            type: '3dbar',\n            data: [repeatData.data[1].value]\n          },{\n              stack : \"总量\",\n            name: '销量3',\n            type: '3dbar',\n            data: [repeatData.data[2].value]\n          }]\n        };\n        target.render(barOption);\n     }\n  }\n}"
                                                                    },
                                                                    "style": {
                                                                      "margin": "0px",
                                                                      "font-size": "12px",
                                                                      "height": "320px"
                                                                    },
                                                                    "parameters": {}
                                                                  }
                                                                ],
                                                                "col": 6
                                                              }
                                                            ],
                                                            "advance": {
                                                              "expression": "{\n\t\"on\" : {\n    \"click\" : function(event){\n      var ticketNo = event.data.values.ticketNo;\n      event.tools.location.href='../../app-oc/index.html#/workOrderTimeLine/'+ ticketNo;\n     }\n  },  \n  \"format\" : [\n    {\n      \"name\": \"工单号\",\n      \"value\": \"{item:ticketNo}\",\n      \"type\": \"text\"\n    },\n    {\n      \"name\": \"内容\",\n      \"value\": \"{item:message}\",\n      \"type\": \"text\"\n    },\n    {\n      \"name\": \"紧急度\",\n      \"value\": \"{item:priorityCode}\",\n      \"type\": \"priority\"\n    }\n  ]\n}"
                                                            }
                                                          }
                                                        ]
                                                      }
                                                    ],
                                                    "style": {},
                                                    "url": "images/map/map1.png"
                                                  }
                                                ]
                                              }
                                            ],
                                            "parameters": {},
                                            "url": "images/map/map1.png"
                                          }
                                        ],
                                        "col": 2
                                      },
                                      {
                                        "type": "column",
                                        "children": [
                                          {
                                            "label": "控制板1",
                                            "type": "block",
                                            "source": "BLOCK",
                                            "style": {
                                              "padding": "5px",
                                              "height": "390px",
                                              "margin": "5px  5px  0px  5px"
                                            },
                                            "advance": {
                                              "expression": "{}"
                                            },
                                            "children": [
                                              {
                                                "type": "column",
                                                "col": 12,
                                                "children": [
                                                  {
                                                    "label": "文字",
                                                    "type": "text",
                                                    "source": "TEXT",
                                                    "help": "http://localhost/app-free-style/index.html#/help/index%7Ctext/%5B%220%22,%7B%7D%5D",
                                                    "data": {
                                                      "applied": false,
                                                      "multipleCi": false,
                                                      "multipleKpi": false,
                                                      "resource": [],
                                                      "modelType": 300,
                                                      "resfilltype": "parameter",
                                                      "series": {
                                                        "manual": "新建文字",
                                                        "bind": "(function (source){\n  var formatter=function(elem){\n    return elem.value\n   }\n  return source.ci.getSeries(formatter);\n})"
                                                      },
                                                      "modelDisable": true
                                                    },
                                                    "style": {
                                                      "padding": "5px",
                                                      "font-size": "14px",
                                                      "font-weight": "bold",
                                                      "margin": "5px",
                                                      "color": "rgb(255, 255, 255)"
                                                    },
                                                    "advance": {
                                                      "getfunction": "kpiDataService.getValueList",
                                                      "category": "ci",
                                                      "condition": [
                                                        "kpi",
                                                        "{object:kpiQueryModel}"
                                                      ],
                                                      "expression": "expression = {\n    on : {\n        init : function(event){\n            var target = event.target;\n            target.setText(\"在线测点状态总览\")\n        }\n    }\n}"
                                                    },
                                                    "parameters": {},
                                                    "url": "images/map/map1.png"
                                                  },
                                                  {
                                                    "label": "重复单元",
                                                    "type": "repeater",
                                                    "source": "REPEATER",
                                                    "parameters": {
                                                      "col": 6
                                                    },
                                                    "advance": {
                                                      "getListTable": "allprojects",
                                                      "expression": "expression = {\n  on : {\n    init : function(event){\n      var target = event.target;\n\n      var id = target.getParameter(\"id\") ;\n      \n      \n      \n    target.getDomainAreaLineTree(function(domaintree){\n        var find = domaintree.find(function(node){\n            return node.id == id\n        });\n        if(find){\n            var  label = find.label;\n            var description = find.description; \n            var domains = [];\n            domains.push(label);\n            var params = [\"kpi\",{\"isRealTimeData\":true,\"includeInstance\":true,\n            \"nodeIds\":[id],\"kpiCodes\":[6100]}];\n            target.postService(\"kpiDataFlexService\",\"getKpiValueList\",params,function(returnData){\n                var kpiNames = ['正常','注意','警告'];\n                var data = returnData.data;\n                    }\n  }\n}"
                                                    },
                                                    "children": [
                                                      {
                                                        "type": "column",
                                                        "col": [
                                                          2,
                                                          0
                                                        ],
                                                        "children": [
                                                          {
                                                            "type": "row",
                                                            "source": "ROW",
                                                            "parameters": {
                                                              "alignment": "bootstrap"
                                                            },
                                                            "style": {},
                                                            "children": [
                                                              {
                                                                "type": "column",
                                                                "children": [
                                                                  {
                                                                    "label": "控件组",
                                                                    "type": "ctrlgroup",
                                                                    "source": "CTRLGROUP",
                                                                    "advance": {
                                                                      "expression": "expression = {\n  on : {\n    repeat : function(event){\n      var target = event.target;\n    \n      var colors = [target.getAlertColor(1), target.getAlertColor(2), target.getAlertColor(3)];\n      var global = event.global;\n      var ctrlGroups = [];\n      var createTr = function(index, element){\n        return [{\n          type : \"jquery\",\n          render : function(){\n              var wrap = $(\"<div></div>\");\n              var title = $(\"<div></div>\");\n              var bar = $(\"<div></div>\");\n              wrap.css(\"height\", \"40px\");\n              wrap.css(\"width\", \"40px\");\n              wrap.css(\"margin\", \"auto\");\n              bar.css(\"width\", \"10px\");\n              bar.css(\"height\", \"40px\");\n              bar.css(\"background-color\", colors[index]);\n              bar.css(\"position\", \"absolute\");\n              wrap.css(\"position\", \"relative\");\n              bar.css(\"left\", \"50px\");\n              wrap.append(bar);\n              title.css(\"text-align\", \"right\");\n              title.css(\"color\", \"#a0a0a0\");\n              title.css(\"margin-right\", \"-50px\");\n              title.css(\"position\", \"absolute\");\n              title.css(\"font-size\", \"12px\");\n              title.text(element.name);\n              var value = $(\"<div></div>\");\n              value.css(\"color\", \"#fff\");\n              value.css(\"position\", \"absolute\");\n              value.css(\"font-size\", \"12px\");\n              value.css(\"text-align\", \"right\");\n              value.css(\"font-weight\", \"bold\");\n              value.text(element.value);\n              value.css(\"top\", \"12px\");\n              wrap.append(title);\n              wrap.append(value);\n              return wrap;\n          }\n        }]\n      };\n          
                                                                    },
                                                                    "style": {
                                                                      "margin": "5px",
                                                                      "font-size": "12px"
                                                                    },
                                                                    "help": "../pdf/ctrlgroup.pdf",
                                                                    "parameters": {
                                                                      "cgroupstyle": "table"
                                                                    }
                                                                  }
                                                                ],
                                                                "col": 6
                                                              },
                                                              {
                                                                "type": "column",
                                                                "children": [
                                                                  {
                                                                    "label": "SVG视图",
                                                                    "type": "svgchart",
                                                                    "source": "SVGCHART",
                                                                    "advance": {
                                                                      "expression": "expression = {\n  \"on\" : {\n    \"init\" : function(event){\n        var  target = event.target;\n        var repeatData = target.$repeatData;\n        var barOption = {\n          title: {\n            text: 'svgChart入门示例'\n          },\n        //   grid : {\n        //       top : \"5%\",\n        //       left : \"10%\",\n        //       height : \"90%\"\n        //   },\n        //   legend: {\n        //     data: ['销量']\n        //   },\n        //   xAxis: {\n        //     show : false,\n        //     data: [\"衬衫\", \"羊毛衫\", \"雪纺衫\", \"裤子\", \"高跟鞋\", \"袜子\"]\n        //   },\n        //   yAxis: {\n        //       show : false\n        //   },\n          series: [{\n            stack : \"总量\",\n            name: '销量1',\n            type: '3dbar',\n            data: [repeatData.data[0].value]\n          },{\n              stack : \"总量\",\n            name: '销量2',\n            type: '3dbar',\n            data: [repeatData.data[1].value]\n          },{\n              stack : \"总量\",\n            name: '销量3',\n            type: '3dbar',\n            data: [repeatData.data[2].value]\n          }]\n        };\n        target.render(barOption);\n     }\n  }\n}"
                                                                    },
                                                                    "style": {
                                                                      "margin": "0px",
                                                                      "font-size": "12px",
                                                                      "height": "150px"
                                                                    },
                                                                    "parameters": {}
                                                                  }
                                                                ],
                                                                "col": 6
                                                              }
                                                            ],
                                                            "advance": {
                                                              "expression": "{\n\t\"on\" : {\n    \"click\" : function(event){\n      var ticketNo = event.data.values.ticketNo;\n      event.tools.location.href='../../app-oc/index.html#/workOrderTimeLine/'+ ticketNo;\n     }\n  },  \n//   \"format\" : [\n//     {\n//       \"name\": \"工单号\",\n//       \"value\": \"{item:ticketNo}\",\n//       \"type\": \"text\"\n//     },\n//     {\n//       \"name\": \"内容\",\n//       \"value\": \"{item:message}\",\n//       \"type\": \"text\"\n//     },\n//     {\n//       \"name\": \"紧急度\",\n//       \"value\": \"{item:priorityCode}\",\n//       \"type\": \"priority\"\n//     }\n//   ]\n}"
                                                            }
                                                          }
                                                        ]
                                                      }
                                                    ],
                                                    "style": {
                                                      "margin-left": "10px"
                                                    },
                                                    "url": "images/map/map1.png"
                                                  }
                                                ]
                                              }
                                            ],
                                            "parameters": {},
                                            "url": "images/map/map1.png"
                                          }
                                        ],
                                        "col": 10
                                      }
                                    ]
                                  },
                                  {
                                    "label": "文字",
                                    "type": "text",
                                    "source": "TEXT",
                                    "help": "http://localhost/app-free-style/index.html#/help/index%7Ctext/%5B%220%22,%7B%7D%5D",
                                    "style": {
                                      "margin": "5px",
                                      "padding": "0",
                                      "font-size": "12px",
                                      "font-weight": "bold"
                                    },
                                    "advance": {
                                      "expression": "expression = {\n    on : {\n        init : function(event){\n            var target = event.target;\n            target.setText(\"新建文字11\")\n        }\n    }\n}"
                                    },
                                    "data": {
                                      "modelType": 300,
                                      "resfilltype": "parameter",
                                      "modelDisable": true
                                    },
                                    "parameters": {},
                                    "url": "images/map/map1.png"
                                  }
                                ]
                              }
                            ],
                            "url": "images/map/map1.png"
                          },
                          {
                            "type": "row",
                            "source": "ROW",
                            "parameters": {
                              "alignment": "bootstrap"
                            },
                            "style": {},
                            "children": [
                              {
                                "type": "column",
                                "children": [
                                  {
                                    "label": "控制板1",
                                    "type": "block",
                                    "source": "BLOCK",
                                    "style": {
                                      "padding": "5px",
                                      "height": "390px",
                                      "margin": "5px  5px  0px  5px"
                                    },
                                    "advance": {
                                      "expression": "{}"
                                    },
                                    "children": [
                                      {
                                        "type": "column",
                                        "col": 12,
                                        "children": [
                                          {
                                            "label": "文字",
                                            "type": "text",
                                            "source": "TEXT",
                                            "help": "http://localhost/app-free-style/index.html#/help/index%7Ctext/%5B%220%22,%7B%7D%5D",
                                            "data": {
                                              "applied": false,
                                              "multipleCi": false,
                                              "multipleKpi": false,
                                              "resource": [],
                                              "modelType": 300,
                                              "resfilltype": "parameter",
                                              "series": {
                                                "manual": "新建文字",
                                                "bind": "(function (source){\n  var formatter=function(elem){\n    return elem.value\n   }\n  return source.ci.getSeries(formatter);\n})"
                                              },
                                              "modelDisable": true
                                            },
                                            "style": {
                                              "padding": "5px",
                                              "font-size": "14px",
                                              "font-weight": "bold",
                                              "margin": "5px",
                                              "color": "rgb(255, 255, 255)"
                                            },
                                            "advance": {
                                              "getfunction": "kpiDataService.getValueList",
                                              "category": "ci",
                                              "condition": [
                                                "kpi",
                                                "{object:kpiQueryModel}"
                                              ],
                                              "expression": "expression = {\n    on : {\n        init : function(event){\n            var target = event.target;\n            target.setText(\"设备状态总览\")\n        }\n    }\n}"
                                            },
                                            "parameters": {},
                                            "url": "images/map/map1.png"
                                          },
                                          {
                                            "label": "重复单元",
                                            "type": "repeater",
                                            "source": "REPEATER",
                                            "parameters": {
                                              "col": 1
                                            },
                                            "advance": {
                                              "getListTable": "allprojects",
                                              "expression": "expression = {\n  on : {\n    init : function(event){\n      var target = event.target;\n\n      var id = target.getParameter(\"id\") ;\n      \n      \n      \n    target.getDomainAreaLineTree(function(domaintree){\n        var find = domaintree.find(function(node){\n            return node.id == id\n        });\n        if(find){\n            var  label = find.label;\n            var description = find.description; \n            var domains = [];\n            domains.push(label);\n            var params = [\"kpi\",{\"isRealTimeData\":true,\"includeInstance\":true,\n            \"nodeIds\":[id],\"kpiCodes\":[6100]}];\n            target.postService(\"kpiDataFlexService\",\"getKpiValueList\",params,function(returnData){\n                var kpiNames = ['正常','注意','警告','监测台数','重要台数','数据采集点'];\n                var data = returnData.data;\n                 
                                            },
                                            "children": [
                                              {
                                                "type": "column",
                                                "col": [
                                                  12,
                                                  0
                                                ],
                                                "children": [
                                                  {
                                                    "type": "row",
                                                    "source": "ROW",
                                                    "parameters": {
                                                      "alignment": "bootstrap"
                                                    },
                                                    "style": {},
                                                    "children": [
                                                      {
                                                        "type": "column",
                                                        "children": [
                                                          {
                                                            "label": "控件组",
                                                            "type": "ctrlgroup",
                                                            "source": "CTRLGROUP",
                                                            "advance": {
                                                              "expression": "expression = {\n  on : {\n    repeat : function(event){\n      var target = event.target;\n      var colors = [target.getAlertColor(1), target.getAlertColor(2), target.getAlertColor(3)];\n      var global = event.global;\n      var ctrlGroups = [];\n      var createTr = function(index, element){\n        return [{\n          type : \"jquery\",\n          render : function(){\n              var wrap = $(\"<div></div>\");\n              var title = $(\"<div></div>\");\n              var bar = $(\"<div></div>\");\n              wrap.css(\"height\", \"40px\");\n              //wrap.css(\"height\", \"35px\");\n              wrap.css(\"width\", \"40px\");\n              wrap.css(\"margin\", \"auto\");\n              bar.css(\"width\", \"10px\");\n              //bar.css(\"height\", \"25px\");\n              bar.css(\"height\", \"40px\");\n              bar.css(\"background-color\", colors[index]);\n              bar.css(\"position\", \"absolute\");\n              wrap.css(\"position\", \"relative\");\n              bar.css(\"left\", \"25px\");\n              wrap.append(bar);\n              title.css(\"text-align\", \"right\");\n              title.css(\"color\", \"#a0a0a0\");\n              title.css(\"margin-right\", \"15px\");\n              title.css(\"position\", \"absolute\");\n              title.css(\"font-size\", \"12px\");\n              title.text(element.name);\n              var value = $(\"<div></div>\");\n              value.css(\"color\", \"#fff\");\n              value.css(\"position\", \"absolute\");\n              value.css(\"font-size\", \"12px\");\n              value.css(\"text-align\", \"right\");\n              value.css(\"font-weight\", \"bold\");\n              value.text(element.value);\n              value.css(\"top\", \"12px\");\n              wrap.append(title);\n              wrap.append(value);\n              return wrap;\n          }\n        }]\n      }\n      for(var i = target.$repeatData.data.length - 1; i >= 0; i--){\n         ctrlGroups.push(createTr(i, target.$repeatData.data[i]));\n      }\n      event.target.render(ctrlGroups);\n    }\n  }\n}"
                                                            },
                                                            "style": {
                                                              "margin": "5px",
                                                              "font-size": "12px"
                                                            },
                                                            "help": "../pdf/ctrlgroup.pdf",
                                                            "parameters": {
                                                              "cgroupstyle": "table"
                                                            }
                                                          }
                                                        ],
                                                        "col": 6
                                                      },
                                                      {
                                                        "type": "column",
                                                        "children": [
                                                          {
                                                            "label": "SVG视图",
                                                            "type": "svgchart",
                                                            "source": "SVGCHART",
                                                            "advance": {
                                                              "expression": "expression = {\n  \"on\" : {\n    \"init\" : function(event){\n        var  target = event.target;\n        var repeatData = target.$repeatData;\n        var barOption = {\n          title: {\n            text: 'svgChart入门示例'\n          },\n          grid : {\n              top : \"5%\",\n              left : \"10%\",\n              height : \"90%\"\n          },\n          legend: {\n            data: ['销量']\n          },\n          xAxis: {\n            show : false,\n            data: [\"衬衫\", \"羊毛衫\", \"雪纺衫\", \"裤子\", \"高跟鞋\", \"袜子\"]\n          },\n          yAxis: {\n              show : false\n          },\n          series: [{\n            stack : \"总量\",\n            name: '销量1',\n            type: '3dbar',\n            data: [repeatData.data[0].value]\n          },{\n              stack : \"总量\",\n            name: '销量2',\n            type: '3dbar',\n            data: [repeatData.data[1].value]\n          },{\n              stack : \"总量\",\n            name: '销量3',\n            type: '3dbar',\n            data: [repeatData.data[2].value]\n          }]\n        };\n        target.render(barOption);\n     }\n  }\n}"
                                                            },
                                                            "style": {
                                                              "margin": "0px",
                                                              "font-size": "12px",
                                                              "height": "320px"
                                                            },
                                                            "parameters": {}
                                                          }
                                                        ],
                                                        "col": 6
                                                      }
                                                    ],
                                                    "advance": {
                                                      "expression": "{\n\t\"on\" : {\n    \"click\" : function(event){\n      var ticketNo = event.data.values.ticketNo;\n      event.tools.location.href='../../app-oc/index.html#/workOrderTimeLine/'+ ticketNo;\n     }\n  },  \n  \"format\" : [\n    {\n      \"name\": \"工单号\",\n      \"value\": \"{item:ticketNo}\",\n      \"type\": \"text\"\n    },\n    {\n      \"name\": \"内容\",\n      \"value\": \"{item:message}\",\n      \"type\": \"text\"\n    },\n    {\n      \"name\": \"紧急度\",\n      \"value\": \"{item:priorityCode}\",\n      \"type\": \"priority\"\n    }\n  ]\n}"
                                                    }
                                                  }
                                                ]
                                              }
                                            ],
                                            "style": {},
                                            "url": "images/map/map1.png"
                                          }
                                        ]
                                      }
                                    ],
                                    "parameters": {},
                                    "url": "images/map/map1.png"
                                  }
                                ],
                                "col": 2
                              },
                              {
                                "type": "column",
                                "children": [
                                  {
                                    "label": "控制板1",
                                    "type": "block",
                                    "source": "BLOCK",
                                    "style": {
                                      "padding": "5px",
                                      "margin": "5px  5px 0px 5px",
                                      "overflow-y": "scroll",
                                      "height": "390px"
                                    },
                                    "advance": {
                                      "expression": "{}"
                                    },
                                    "children": [
                                      {
                                        "type": "column",
                                        "col": 12,
                                        "children": [
                                          {
                                            "type": "row",
                                            "source": "ROW",
                                            "advance": {
                                              "expression": "expression = {\n  \"on\" : {\n    \"init\" : function(event){\n      var target = event.target;\n      //target.setDimension([6,6]);\n    }\n  }\n};"
                                            },
                                            "parameters": {
                                              "alignment": "bootstrap"
                                            },
                                            "style": {},
                                            "children": [
                                              {
                                                "type": "column",
                                                "children": [],
                                                "col": 5
                                              },
                                              {
                                                "type": "column",
                                                "children": [],
                                                "col": 3
                                              },
                                              {
                                                "type": "column",
                                                "children": [],
                                                "col": 4
                                              }
                                            ]
                                          },
                                          {
                                            "label": "文字",
                                            "type": "text",
                                            "source": "TEXT",
                                            "help": "http://localhost/app-free-style/index.html#/help/index%7Ctext/%5B%220%22,%7B%7D%5D",
                                            "data": {
                                              "applied": false,
                                              "multipleCi": false,
                                              "multipleKpi": false,
                                              "resource": [],
                                              "modelType": 300,
                                              "resfilltype": "parameter",
                                              "series": {
                                                "manual": "新建文字",
                                                "bind": "(function (source){\n  var formatter=function(elem){\n    return elem.value\n   }\n  return source.ci.getSeries(formatter);\n})"
                                              },
                                              "modelDisable": true
                                            },
                                            "style": {
                                              "padding": "5px",
                                              "font-size": "14px",
                                              "font-weight": "bold",
                                              "margin": "5px",
                                              "color": "rgb(255, 255, 255)"
                                            },
                                            "advance": {
                                              "getfunction": "kpiDataService.getValueList",
                                              "category": "ci",
                                              "condition": [
                                                "kpi",
                                                "{object:kpiQueryModel}"
                                              ],
                                              "expression": "expression = {\n    on : {\n        init : function(event){\n            var target = event.target;\n            target.setText(\"诊断绩效统计（当月内）\")\n        }\n    }\n}"
                                            },
                                            "parameters": {},
                                            "url": "images/map/map1.png"
                                          },
                                          {
                                            "label": "控件组",
                                            "type": "ctrlgroup",
                                            "source": "CTRLGROUP",
                                            "advance": {
                                              "expression": "expression = {\n  bootstrap : true,\n  on : {\n    init : function(event){\n      var target = event.target;\n      var global = event.global;\n      var workObj = target.getParameter(\"id\");\n      // 
                                            },
                                            "style": {
                                              "font-size": "12px"
                                            },
                                            "help": "../pdf/ctrlgroup.pdf",
                                            "parameters": {
                                              "cgroupstyle": "table"
                                            },
                                            "url": "images/map/map1.png"
                                          }
                                        ]
                                      }
                                    ],
                                    "parameters": {}
                                  }
                                ],
                                "col": 4
                              },
                              {
                                "type": "column",
                                "children": [
                                  {
                                    "label": "控制板1",
                                    "type": "block",
                                    "source": "BLOCK",
                                    "style": {
                                      "padding": "5px",
                                      "margin": "5px  5px 0px 5px",
                                      "min-height": "390px"
                                    },
                                    "advance": {
                                      "expression": {}
                                    },
                                    "children": [
                                      {
                                        "type": "column",
                                        "col": 12,
                                        "children": [
                                          {
                                            "label": "文字",
                                            "type": "text",
                                            "source": "TEXT",
                                            "help": "http://localhost/app-free-style/index.html#/help/index%7Ctext/%5B%220%22,%7B%7D%5D",
                                            "data": {
                                              "applied": false,
                                              "multipleCi": false,
                                              "multipleKpi": false,
                                              "resource": [],
                                              "modelType": 300,
                                              "resfilltype": "parameter",
                                              "series": {
                                                "manual": "新建文字",
                                                "bind": "(function (source){\n  var formatter=function(elem){\n    return elem.value\n   }\n  return source.ci.getSeries(formatter);\n})"
                                              },
                                              "modelDisable": true
                                            },
                                            "style": {
                                              "padding": "5px",
                                              "font-size": "14px",
                                              "font-weight": "bold",
                                              "margin": "5px",
                                              "color": "rgb(255, 255, 255)"
                                            },
                                            "advance": {
                                              "getfunction": "kpiDataService.getValueList",
                                              "category": "ci",
                                              "condition": [
                                                "kpi",
                                                "{object:kpiQueryModel}"
                                              ],
                                              "expression": "expression = {\n    on : {\n        init : function(event){\n            var target = event.target;\n            target.setText(\"异常事件分布（当月内）\")\n        }\n    }\n}"
                                            },
                                            "parameters": {},
                                            "url": "images/map/map1.png"
                                          },
                                          {
                                            "label": "高级视图",
                                            "type": "advanceEchart",
                                            "source": "ADVANCEECHART",
                                            "parameters": {
                                              "theme": "default"
                                            },
                                            "advance": {
                                              "expression": "express = {\n  on : {\n    init : function(event){\n        var target = event.target;\n        var global = event.global;\n        var workObj = target.getParameter(\"id\");\n        //\"524031514586065\"\n        target.postService(\"dictionaryService\",\"/getAllDicts\",[],function (returnData) {\n           \n            var specialtyProps = []\n            for(var i = 0; i < returnData.data.length;i++) {\n                if(returnData.data[i].dictCode == 'specialtyProps') {\n                    specialtyProps.push({value:returnData.data[i].valueCode,label:returnData.data[i].label})\n                }\n            }\n            //  
                                            },
                                            "style": {
                                              "margin": "auto",
                                              "width": "100%",
                                              "height": "320px"
                                            },
                                            "url": "images/map/map1.png"
                                          }
                                        ]
                                      }
                                    ],
                                    "url": "images/map/map1.png",
                                    "parameters": {}
                                  }
                                ],
                                "col": 3
                              },
                              {
                                "type": "column",
                                "children": [
                                  {
                                    "label": "控制板1",
                                    "type": "block",
                                    "source": "BLOCK",
                                    "style": {
                                      "padding": "5px",
                                      "margin": "5px  5px 0px 5px",
                                      "min-height": "390px"
                                    },
                                    "advance": {
                                      "expression": "{}"
                                    },
                                    "children": [
                                      {
                                        "type": "column",
                                        "col": 12,
                                        "children": [
                                          {
                                            "label": "文字",
                                            "type": "text",
                                            "source": "TEXT",
                                            "help": "http://localhost/app-free-style/index.html#/help/index%7Ctext/%5B%220%22,%7B%7D%5D",
                                            "data": {
                                              "applied": false,
                                              "multipleCi": false,
                                              "multipleKpi": false,
                                              "resource": [],
                                              "modelType": 300,
                                              "resfilltype": "parameter",
                                              "series": {
                                                "manual": "新建文字",
                                                "bind": "(function (source){\n  var formatter=function(elem){\n    return elem.value\n   }\n  return source.ci.getSeries(formatter);\n})"
                                              },
                                              "modelDisable": true
                                            },
                                            "style": {
                                              "padding": "5px",
                                              "font-size": "14px",
                                              "font-weight": "bold",
                                              "margin": "5px",
                                              "color": "rgb(255, 255, 255)"
                                            },
                                            "advance": {
                                              "getfunction": "kpiDataService.getValueList",
                                              "category": "ci",
                                              "condition": [
                                                "kpi",
                                                "{object:kpiQueryModel}"
                                              ],
                                              "expression": "expression = {\n    on : {\n        init : function(event){\n            var target = event.target;\n            target.setText(\"检修实绩（当月内）\")\n        }\n    }\n}"
                                            },
                                            "parameters": {},
                                            "url": "images/map/map1.png"
                                          },
                                          {
                                            "label": "高级视图",
                                            "type": "advanceEchart",
                                            "source": "ADVANCEECHART",
                                            "parameters": {
                                              "theme": "default"
                                            },
                                            "advance": {
                                              "expression": "express = {\n  on : {\n    init : function(event){\n      var target = event.target;\n      var global = event.global;\n      var workObj = target.getParameter(\"id\");\n      //var label = target.getParameter(\"label\");\n     \n\n    \n    target.getDomainAreaLineTree(function(domaintree){\n    var find = domaintree.find(function(node){\n        return node.id == workObj\n    });\n    if(find){\n            var  label = find.label;\n            var params = [\"kpi\",{\"isRealTimeData\":true,\"includeInstance\":true,\n        \"nodeIds\":[workObj],\"kpiCodes\":[6101]}];\n      target.postService(\"kpiDataFlexService\",\"getKpiValueList\",params,function (returnData) {\n        var data = returnData.data;\n        var unfinished;\n        var finished;\n        for(var i = 0; i < data.length; i++) {\n          if(data[i].instance == \"state,0\") {\n            unfinished = data[i].value\n          }else if(data[i].instance == \"state,1\") {\n            finished = data[i].value\n          }\n        }\n        if(!unfinished) {\n          unfinished = 0;\n        }\n        if(!finished) {\n          finished = 0;\n        }\n         n    }\n  }\n}"
                                            },
                                            "style": {
                                              "margin": "auto",
                                              "width": "100%",
                                              "height": "320px"
                                            },
                                            "url": "images/map/map1.png"
                                          }
                                        ]
                                      }
                                    ],
                                    "parameters": {}
                                  }
                                ],
                                "col": 3
                              }
                            ],
                            "advance": {
                              "expression": "{\n\t\"on\" : {\n    \"click\" : function(event){\n      var ticketNo = event.data.values.ticketNo;\n      event.tools.location.href='../../app-oc/index.html#/workOrderTimeLine/'+ ticketNo;\n     }\n  },  \n  \"format\" : [\n    {\n      \"name\": \"工单号\",\n      \"value\": \"{item:ticketNo}\",\n      \"type\": \"text\"\n    },\n    {\n      \"name\": \"内容\",\n      \"value\": \"{item:message}\",\n      \"type\": \"text\"\n    },\n    {\n      \"name\": \"紧急度\",\n      \"value\": \"{item:priorityCode}\",\n      \"type\": \"priority\"\n    }\n  ]\n}"
                            }
                          }
                        ]
                      }
                    ],
                    "advance": {
                      "expression": "{}"
                    },
                    "parameters": {},
                    "url": "images/map/map1.png"
                  }
                ]
              }
            ]
          }
        ],
        "col": 12
      },
      "id": "1",
      "$$hashKey": "object:1852"
    },
    {
      "label": "厂区",
      "path": "navigate",
      "layout": {
        "type": "column",
        "children": [
          {
            "label": "控制板1",
            "type": "block",
            "source": "BLOCK",
            "style": {
              "padding": "0px",
              "margin": "0px",
              "border": "0",
              "box-shadow": "0px 0px 0px 0px rgba(0,0,0,0)",
              "background-color": "rgba(250,250,250,0)",
              "overflow-y": "auto",
              "overflow-x": "hidden"
            },
            "advance": {
              "expression": {}
            },
            "children": [
              {
                "type": "column",
                "col": 12,
                "children": [
                  {
                    "label": "控制板1",
                    "type": "block",
                    "source": "BLOCK",
                    "style": {
                      "padding": "10px",
                      "margin": "5px",
                      "border": "0",
                      "box-shadow": "0px 0px 0px 0px rgba(0,0,0,0)",
                      "background-color": "rgba(250,250,250,0)"
                    },
                    "advance": {
                      "expression": {}
                    },
                    "children": [
                      {
                        "type": "column",
                        "col": 12,
                        "children": [
                          {
                            "type": "row",
                            "source": "ROW",
                            "parameters": {
                              "alignment": "bootstrap"
                            },
                            "style": {},
                            "children": [
                              {
                                "type": "column",
                                "children": [
                                  {
                                    "label": "数结构导航",
                                    "type": "navitree",
                                    "source": "NAVITREE",
                                    "advance": {
                                      "expression": ""
                                    }
                                  }
                                ],
                                "col": 8
                              },
                              {
                                "type": "column",
                                "children": [
                                  {
                                    "label": "控件组",
                                    "type": "ctrlgroup",
                                    "source": "CTRLGROUP",
                                    "advance": {
                                      "expression": "expression = {\n  on : {\n    init : function(event){\n      var target = event.target;\n      var global = event.global;\n      var ctrlGroups = [\n       [{\n          type : \"clock\",\n          icon : \"glyphicon glyphicon-search\",\n          value : function(time){\n              return \"当前时间 ： \" + time\n          },\n          btnclass : \"btn btn-primary\",\n          class : \"col-md-12\",\n          style : {\n              \"float\" : \"right\",\n              \"font-weight\" : \"bold\"\n          }\n        }]\n      ];\n      event.target.render(ctrlGroups);\n    }\n  }\n}"
                                    },
                                    "style": {
                                      "margin": "5px",
                                      "font-size": "14px",
                                      "font-weight": "bold"
                                    },
                                    "help": "../pdf/ctrlgroup.pdf",
                                    "url": "images/map/map1.png",
                                    "parameters": {
                                      "cgroupstyle": "table"
                                    }
                                  }
                                ],
                                "col": 4
                              }
                            ],
                            "advance": {
                              "expression": "expression = {\n  \"on\" : {\n    \"init\" : function(event){\n      var target = event.target;\n      var role = target.getValue(\"global/ROLE\");\n      if(role != 4){\n          target.setDimension([0,0]);\n      }\n    }\n  }\n};"
                            }
                          },
                          {
                            "type": "row",
                            "source": "ROW",
                            "parameters": {
                              "alignment": "bootstrap"
                            },
                            "style": {},
                            "children": [
                              {
                                "type": "column",
                                "children": [
                                  {
                                    "label": "组态视图",
                                    "type": "topo",
                                    "source": "TOPO",
                                    "advance": {
                                      "variable": "",
                                      "expression": "expression = {\n  \"on\" : {\n    \"init\" : function(event){\n      var target = event.target;\n      var id = target.getParameter(\"id\") || target.getValue(\"device/id\");\n      var main = target.getParameter(\"main\");\n      target.getDomainAreaLineTree_alertStatus(function(domaintree){\n        var find = domaintree.find(function(node){\n          return node.id == id;\n        });\n        if(find){\n          var children = find.getChildren()\n          var viewId = find.$attr(\"view/viewId\");\n          target.getViewById(viewId, function(view){\n            var content = view.content;\n            var json = JSON.parse(content);\n            target.render(json);\n            target.on(\"$loadCiKpiComplete\", function(cells){\n              for(var i in cells){\n                cells[i].attr(\"circle/opacity\", 0);\n                cells[i].attr(\"text/opacity\", 0);\n              }\n              var createMarker = function(index, node){\n                var position;\n                var cell = cells.find(function(cell){\n                    var text = cell.attr(\"text/text\");\n                    // 
                                    },
                                    "style": {
                                      "font-size": "12px",
                                      "background-repeat": "no-repeat",
                                      "margin-bottom": "20px"
                                    },
                                    "viewId": 469973748826065,
                                    "parameters": {},
                                    "url": "images/map/map1.png"
                                  }
                                ],
                                "col": 8
                              },
                              {
                                "type": "column",
                                "children": [
                                  {
                                    "label": "控制板1",
                                    "type": "block",
                                    "source": "BLOCK",
                                    "style": {
                                      "margin": "0 5px 5px 5px",
                                      "padding": "10px",
                                      "height": "260px"
                                    },
                                    "advance": {
                                      "expression": "{}"
                                    },
                                    "children": [
                                      {
                                        "type": "column",
                                        "col": 12,
                                        "children": [
                                          {
                                            "label": "文字",
                                            "type": "text",
                                            "source": "TEXT",
                                            "help": "http://localhost/app-free-style/index.html#/help/index%7Ctext/%5B%220%22,%7B%7D%5D",
                                            "data": {
                                              "applied": false,
                                              "multipleCi": false,
                                              "multipleKpi": false,
                                              "resource": [],
                                              "modelType": 300,
                                              "resfilltype": "parameter",
                                              "series": {
                                                "manual": "新建文字",
                                                "bind": "(function (source){\n  var formatter=function(elem){\n    return elem.value\n   }\n  return source.ci.getSeries(formatter);\n})"
                                              },
                                              "modelDisable": true
                                            },
                                            "style": {
                                              "margin": "5px",
                                              "padding": "0",
                                              "font-size": "12px",
                                              "font-weight": "bold",
                                              "color": "rgb(255, 255, 255)"
                                            },
                                            "advance": {
                                              "getfunction": "kpiDataService.getValueList",
                                              "category": "ci",
                                              "condition": [
                                                "kpi",
                                                "{object:kpiQueryModel}"
                                              ],
                                              "expression": "expression = {\n    on : {\n        init : function(event){\n            var target = event.target;\n            target.setText(\"状态总览 \");\n        }\n    }\n}"
                                            },
                                            "parameters": {}
                                          },
                                          {
                                            "label": "重复单元",
                                            "type": "repeater",
                                            "source": "REPEATER",
                                            "parameters": {
                                              "col": 4
                                            },
                                            "advance": {
                                              "getListTable": "allprojects",
                                              "expression": "expression = {\n  on : {\n    init : function(event){\n      var target = event.target;\n      \n      \n      \n      var id = target.getParameter(\"id\") || target.getValue(\"device/id\");\n      var main = target.getParameter(\"main\");\n      target.getDomainAreaLineTree(function(domaintree){\n        var find = domaintree.find(function(node){\n          return node.id == id;\n        });\n        if(find){\n        var domains = find.getChildren();\n        var mountain = domains.map(function(elem){\n          return elem.id;\n        });\n        var params = [\"kpi\",{\"isRealTimeData\":true,\"includeInstance\":true,\n          \"nodeIds\":mountain,\"kpiCodes\":[6100]}];\n        target.postService(\"kpiDataFlexService\",\"getKpiValueList\",params,function(returnData){\n            var kpiNames = ['正常','注意','警告','监测台数'];\n            var kpiIds = ['severity,4', 'severity,3', 'severity,2','description']\n            var data = returnData.data;\n             
                                            },
                                            "children": [
                                              {
                                                "type": "column",
                                                "col": [
                                                  3,
                                                  0
                                                ],
                                                "children": [
                                                  {
                                                    "label": "控件组",
                                                    "type": "ctrlgroup",
                                                    "source": "CTRLGROUP",
                                                    "advance": {
                                                      "expression": "expression = {\n  on : {\n    repeat : function(event){\n      var target = event.target;\n      var global = event.global;\n      var label = target.$repeatData.province;\n      var description = target.$repeatData.description || 0;\n      var ctrlGroups = [[{\n          type : \"jquery\",\n          render : function(){\n              var wrap = $(\"<div></div>\");\n              wrap.css(\"height\", \"70px\");\n              wrap.css(\"border\", \"1px solid rgba(250,250,250,.3)\");\n              wrap.css(\"background-color\", \"rgba(0,100,250,.1)\");\n              var title = $(\"<div></div>\");\n              title.text(label);\n              title.css(\"font-size\", \"12px\");\n              title.css(\"color\", \"#fff\");\n              title.css(\"position\", \"absolute\");\n              title.css(\"top\", \"12px\");\n              title.css(\"left\", \"15px\");\n              title.css(\"font-weight\", \"bold\");\n              var sub = $(\"<div></div>\");\n              sub.text(\"重要台数\");\n              sub.css(\"position\", \"absolute\");\n              sub.css(\"top\", \"30px\");\n              sub.css(\"left\", \"15px\");\n              sub.css(\"color\", \"#aaa\");\n              sub.css(\"font-size\", \"10px\");\n              var number = $(\"<div></div>\");\n              number.text(description);\n              number.css(\"position\", \"absolute\");\n              number.css(\"top\", \"45px\");\n              number.css(\"left\", \"15px\");\n              number.css(\"font-size\", \"14px\");\n              number.css(\"font-weight\", \"bold\");\n              wrap.append(title);\n              wrap.append(sub);\n              wrap.append(number);\n              return wrap;\n          }\n        }]];\n      target.render(ctrlGroups);\n    }\n  }\n}"
                                                    },
                                                    "style": {
                                                      "margin": "5px",
                                                      "font-size": "12px"
                                                    },
                                                    "help": "../pdf/ctrlgroup.pdf",
                                                    "parameters": {
                                                      "cgroupstyle": "table"
                                                    }
                                                  },
                                                  {
                                                    "type": "row",
                                                    "source": "ROW",
                                                    "parameters": {
                                                      "alignment": "bootstrap"
                                                    },
                                                    "style": {},
                                                    "children": [
                                                      {
                                                        "type": "column",
                                                        "children": [
                                                          {
                                                            "label": "控件组",
                                                            "type": "ctrlgroup",
                                                            "source": "CTRLGROUP",
                                                            "advance": {
                                                              "expression": "expression = {\n  on : {\n    repeat : function(event){\n      var target = event.target;\n      var colors = [target.getAlertColor(1), target.getAlertColor(2), target.getAlertColor(3)];\n      var global = event.global;\n      var ctrlGroups = [];\n      var createTr = function(index, element){\n        return [{\n          type : \"jquery\",\n          render : function(){\n              var wrap = $(\"<div></div>\");\n              var title = $(\"<div></div>\");\n              var bar = $(\"<div></div>\");\n              wrap.css(\"height\", \"25px\");\n              wrap.css(\"width\", \"40px\");\n              wrap.css(\"margin\", \"auto\");\n              bar.css(\"width\", \"10px\");\n              bar.css(\"height\", \"25px\");\n              bar.css(\"background-color\", colors[index]);\n              bar.css(\"position\", \"absolute\");\n              wrap.css(\"position\", \"relative\");\n              bar.css(\"left\", \"25px\");\n              wrap.append(bar);\n              title.css(\"text-align\", \"right\");\n              title.css(\"color\", \"#a0a0a0\");\n              title.css(\"margin-right\", \"15px\");\n              title.css(\"position\", \"absolute\");\n              title.css(\"font-size\", \"12px\");\n              title.text(element.name);\n              var value = $(\"<div></div>\");\n              value.css(\"color\", \"#fff\");\n              value.css(\"position\", \"absolute\");\n              value.css(\"font-size\", \"12px\");\n              value.css(\"text-align\", \"right\");\n              value.css(\"font-weight\", \"bold\");\n              value.text(element.value);\n              value.css(\"top\", \"12px\");\n              wrap.append(title);\n              wrap.append(value);\n              return wrap;\n          }\n        }]\n      }\n      for(var i = target.$repeatData.data.length - 1; i >= 0; i--){\n         ctrlGroups.push(createTr(i, target.$repeatData.data[i]));\n      }\n      event.target.render(ctrlGroups);\n    }\n  }\n}"
                                                            },
                                                            "style": {
                                                              "margin": "5px",
                                                              "font-size": "12px"
                                                            },
                                                            "help": "../pdf/ctrlgroup.pdf",
                                                            "parameters": {
                                                              "cgroupstyle": "table"
                                                            }
                                                          }
                                                        ],
                                                        "col": 6
                                                      },
                                                      {
                                                        "type": "column",
                                                        "children": [
                                                          {
                                                            "label": "SVG视图",
                                                            "type": "svgchart",
                                                            "source": "SVGCHART",
                                                            "advance": {
                                                              "expression": "expression = {\n  \"on\" : {\n    \"init\" : function(event){\n        var  target = event.target;\n        var repeatData = target.$repeatData;\n        var barOption = {\n          title: {\n            text: 'svgChart入门示例'\n          },\n          grid : {\n              top : \"5%\",\n              left : \"10%\",\n              height : \"86%\"\n          },\n          legend: {\n            data: ['销量']\n          },\n          xAxis: {\n            show : false,\n            data: [\"衬衫\", \"羊毛衫\", \"雪纺衫\", \"裤子\", \"高跟鞋\", \"袜子\"]\n          },\n          yAxis: {\n              show : false\n          },\n          series: [{\n            stack : \"总量\",\n            name: '销量1',\n            type: '3dbar',\n            data: [repeatData.data[0].value]\n          },{\n              stack : \"总量\",\n            name: '销量2',\n            type: '3dbar',\n            data: [repeatData.data[1].value]\n          },{\n              stack : \"总量\",\n            name: '销量3',\n            type: '3dbar',\n            data: [repeatData.data[2].value]\n          }]\n        };\n        target.render(barOption);\n     }\n  }\n}"
                                                            },
                                                            "style": {
                                                              "margin": "0px",
                                                              "font-size": "12px",
                                                              "height": "135px"
                                                            },
                                                            "parameters": {}
                                                          }
                                                        ],
                                                        "col": 6
                                                      }
                                                    ],
                                                    "advance": {
                                                      "expression": "{\n\t\"on\" : {\n    \"click\" : function(event){\n      var ticketNo = event.data.values.ticketNo;\n      event.tools.location.href='../../app-oc/index.html#/workOrderTimeLine/'+ ticketNo;\n     }\n  },  \n  \"format\" : [\n    {\n      \"name\": \"工单号\",\n      \"value\": \"{item:ticketNo}\",\n      \"type\": \"text\"\n    },\n    {\n      \"name\": \"内容\",\n      \"value\": \"{item:message}\",\n      \"type\": \"text\"\n    },\n    {\n      \"name\": \"紧急度\",\n      \"value\": \"{item:priorityCode}\",\n      \"type\": \"priority\"\n    }\n  ]\n}"
                                                    }
                                                  }
                                                ]
                                              }
                                            ],
                                            "style": {},
                                            "url": "images/map/map1.png"
                                          }
                                        ]
                                      }
                                    ],
                                    "parameters": {},
                                    "url": "images/map/map1.png"
                                  },
                                  {
                                    "label": "控制板1",
                                    "type": "block",
                                    "source": "BLOCK",
                                    "style": {
                                      "padding": "5px",
                                      "margin": "5px",
                                      "height": "260px"
                                    },
                                    "advance": {
                                      "expression": {}
                                    },
                                    "children": [
                                      {
                                        "type": "column",
                                        "col": 12,
                                        "children": [
                                          {
                                            "label": "文字",
                                            "type": "text",
                                            "source": "TEXT",
                                            "help": "http://localhost/app-free-style/index.html#/help/index%7Ctext/%5B%220%22,%7B%7D%5D",
                                            "style": {
                                              "margin": "auto",
                                              "padding": "5px",
                                              "font-size": "12px",
                                              "font-weight": "bold",
                                              "text-align": "left",
                                              "color": "rgb(255, 255, 255)"
                                            },
                                            "advance": {
                                              "expression": "expression = {\n    on : {\n        init : function(event){\n            var target = event.target;\n            target.setText(\"诊断绩效统计（当月内）\")\n        }\n    }\n}"
                                            },
                                            "data": {
                                              "modelType": 300,
                                              "resfilltype": "parameter",
                                              "modelDisable": true
                                            },
                                            "url": "images/map/map1.png"
                                          },
                                          {
                                            "label": "控件组",
                                            "type": "ctrlgroup",
                                            "source": "CTRLGROUP",
                                            "advance": {
                                              "expression": "expression = {\n  bootstrap : true,\n  on : {\n    init : function(event){\n      var target = event.target;\n      var global = event.global;\n      var workObj = target.getParameter(\"id\");\n      // 
                                            },
                                            "style": {
                                              "font-size": "12px"
                                            },
                                            "help": "../pdf/ctrlgroup.pdf",
                                            "parameters": {
                                              "cgroupstyle": "table"
                                            },
                                            "url": "images/map/map1.png"
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "label": "控制板1",
                                    "type": "block",
                                    "source": "BLOCK",
                                    "style": {
                                      "padding": "5px",
                                      "margin": "5px",
                                      "height": "268px"
                                    },
                                    "advance": {
                                      "expression": {}
                                    },
                                    "children": [
                                      {
                                        "type": "column",
                                        "col": 12,
                                        "children": [
                                          {
                                            "label": "文字",
                                            "type": "text",
                                            "source": "TEXT",
                                            "help": "http://localhost/app-free-style/index.html#/help/index%7Ctext/%5B%220%22,%7B%7D%5D",
                                            "style": {
                                              "font-size": "12px",
                                              "font-weight": "bold",
                                              "text-align": "left",
                                              "padding": "5px",
                                              "color": "rgb(255, 255, 255)"
                                            },
                                            "advance": {
                                              "expression": "expression = {\n    on : {\n        init : function(event){\n            var target = event.target;\n            target.setText(\"检修实绩统计（当月内）\")\n        }\n    }\n}"
                                            },
                                            "data": {
                                              "modelType": 300,
                                              "resfilltype": "parameter",
                                              "modelDisable": true
                                            },
                                            "url": "images/map/map1.png",
                                            "parameters": {}
                                          },
                                          {
                                            "label": "高级视图",
                                            "type": "advanceEchart",
                                            "source": "ADVANCEECHART",
                                            "parameters": {
                                              "theme": "default"
                                            },
                                            "advance": {
                                              "expression": "express = {\n  on : {\n    init : function(event){\n      var target = event.target;\n      var global = event.global;\n      var workObj = target.getParameter(\"id\");\n       // 
                                            },
                                            "style": {
                                              "height": "248px"
                                            },
                                            "url": "images/map/map1.png"
                                          }
                                        ]
                                      }
                                    ],
                                    "parameters": {}
                                  }
                                ],
                                "col": 4
                              }
                            ],
                            "advance": {
                              "expression": "{\n\t\"on\" : {\n    \"click\" : function(event){\n      var ticketNo = event.data.values.ticketNo;\n      event.tools.location.href='../../app-oc/index.html#/workOrderTimeLine/'+ ticketNo;\n     }\n  },  \n  \"format\" : [\n    {\n      \"name\": \"工单号\",\n      \"value\": \"{item:ticketNo}\",\n      \"type\": \"text\"\n    },\n    {\n      \"name\": \"内容\",\n      \"value\": \"{item:message}\",\n      \"type\": \"text\"\n    },\n    {\n      \"name\": \"紧急度\",\n      \"value\": \"{item:priorityCode}\",\n      \"type\": \"priority\"\n    }\n  ]\n}"
                            }
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ],
        "col": 12
      },
      "id": "2",
      "$$hashKey": "object:1862"
    },
    {
      "label": "小设备信息",
      "path": "device",
      "layout": {
        "type": "column",
        "children": [
          {
            "label": "控制板1",
            "type": "block",
            "source": "BLOCK",
            "style": {
              "padding": "8px",
              "margin": "5px"
            },
            "advance": {
              "expression": "expression = {\n    on : {\n        init : function(event){\n            var target = event.target;\n        }\n    }\n}"
            },
            "children": [
              {
                "type": "column",
                "col": 12,
                "children": [
                  {
                    "type": "row",
                    "source": "ROW",
                    "parameters": {
                      "alignment": "bootstrap"
                    },
                    "style": {},
                    "children": [
                      {
                        "type": "column",
                        "children": [
                          {
                            "label": "数结构导航",
                            "type": "navitree",
                            "source": "NAVITREE",
                            "advance": {
                              "expression": ""
                            },
                            "parameters": {},
                            "style": {}
                          }
                        ],
                        "col": 8
                      },
                      {
                        "type": "column",
                        "children": [
                          {
                            "label": "控件组",
                            "type": "ctrlgroup",
                            "source": "CTRLGROUP",
                            "advance": {
                              "expression": "expression = {\n  on : {\n    init : function(event){\n      var target = event.target;\n      var global = event.global;\n      var ctrlGroups = [\n       [{\n          type : \"clock\",\n          icon : \"glyphicon glyphicon-search\",\n          value : function(time){\n              return \"当前时间 ： \" + time\n          },\n          btnclass : \"btn btn-primary\",\n          class : \"col-md-12\",\n          style : {\n              \"float\" : \"right\",\n              \"font-weight\" : \"bold\"\n          }\n        }]\n      ];\n      event.target.render(ctrlGroups);\n    }\n  }\n}"
                            },
                            "style": {
                              "margin": "5px",
                              "font-size": "14px",
                              "font-weight": "bold"
                            },
                            "help": "../pdf/ctrlgroup.pdf",
                            "url": "images/map/map1.png",
                            "parameters": {
                              "cgroupstyle": "table"
                            }
                          }
                        ],
                        "col": 4
                      }
                    ],
                    "advance": {
                      "expression": "expression = {\n  \"on\" : {\n    \"init\" : function(event){\n      var target = event.target;\n      var role = target.getValue(\"global/ROLE\");\n      if(role != 4){\n          target.setDimension([0,0]);\n      }\n    }\n  }\n};"
                    }
                  },
                  {
                    "type": "row",
                    "source": "ROW",
                    "parameters": {
                      "alignment": "bootstrap"
                    },
                    "style": {},
                    "children": [
                      {
                        "type": "column",
                        "children": [
                          {
                            "label": "控制板1",
                            "type": "block",
                            "source": "BLOCK",
                            "style": {
                              "padding": "5px",
                              "overflow": "hidden",
                              "background-color": "#04131e",
                              "border": "0",
                              "height": "calc( 100vh - 165px)"
                            },
                            "advance": {
                              "expression": "expression = {\n    on : {\n        init : function(event){\n            \n        }\n    }\n}"
                            },
                            "children": [
                              {
                                "type": "column",
                                "col": 12,
                                "children": [
                                  {
                                    "label": "控件组",
                                    "type": "ctrlgroup",
                                    "source": "CTRLGROUP",
                                    "advance": {
                                      "expression": "expression = {\n  on : {\n    init : function(event){\n      var target = event.target;\n      var global = event.global;\n      var inp = \"\"\n      var render = function(){\n          var ctrlGroups = [\n           [{\n               type : \"input\",\n               value : inp,\n               class : \"col-md-6\",\n               on : {\n                change : function(elem){\n                  inp = elem.value;\n                }\n              }\n           },{\n              type : \"button\",\n              value : \"搜索\",\n              icon : \"glyphicon glyphicon-search\",\n              btnclass : \"btn btn-primary\",\n              class : \"col-md-5\",\n              on : {\n                click : function(elem){\n                     
                                    },
                                    "style": {
                                      "margin": "5px",
                                      "font-size": "12px"
                                    },
                                    "help": "../pdf/ctrlgroup.pdf",
                                    "parameters": {
                                      "cgroupstyle": "table"
                                    }
                                  },
                                  {
                                    "label": "控制板1",
                                    "type": "block",
                                    "source": "BLOCK",
                                    "style": {
                                      "padding": "0px",
                                      "margin": "0px",
                                      "border": "0",
                                      "box-shadow": "0px 0px 0px 0px rgba(0,0,0,0)",
                                      "background-color": "rgba(250,250,250,0)",
                                      "height": "calc(100vh - 205px)",
                                      "overflow-y": "auto"
                                    },
                                    "advance": {
                                      "expression": "{}"
                                    },
                                    "children": [
                                      {
                                        "type": "column",
                                        "col": 12,
                                        "children": [
                                          {
                                            "label": "数结构目录",
                                            "type": "treemenu",
                                            "source": "TREEMENU",
                                            "advance": {
                                              "expression": "var expression = {\n  on : {\n    init : function(event){\n      var target = event.target;\n      var role = target.getValue(\"global/ROLE\");\n       var treeDataMap;\n      if(role == 4){\n        var models = {}\n        var id = target.getParameter(\"id\");\n        target.getDomainAreaLineTree_alertStatus(function(domaintree){\n          domaintree.traverse(function(node){\n            var layer = node.level;\n            node.showfold = true;\n            node.searchable = true;\n            node.folderStyle = 1;\n            node.showDescription = false;\n            node.triggerEvent = \"none\";\n            node.$on(\"statusChanged\", function(nd){\n              var find = treeDataMap.find(function(nd){\n                return nd.id == node.id;\n              })\n              find.updateNode(node);\n            })\n            node.on = {\n              click : function(node){\n                var path = node.$location;\n                target.navigateTo(\"index\", {\n                  main : [0, path],\n                  id : node.id\n                }, \"self\");\n              }\n            }\n          });\n          treeDataMap = target.render(domaintree);\n          target.on(\"searchtree\", function(str){\n            treeDataMap.search(function(node){\n              return node.label.indexOf(str) != -1;\n            })\n          });\n          treeDataMap.hideRootNode();\n          /**\n           var resource = target.getValue(\"global/resource\");\n           if(!resource){\n          treeDataMap.traverse(function(node){\n            if(!resource && node.category == \"Device\"){\n              resource = node;\n            }\n          });\n          target.setValue(\"global/resource\", resource);\n        };\n           setTimeout(function(){\n            target.setParameter(\"id\", resource.id);\n            target.trigger(\"pathChange\", \"device\");\n        });\n           target.on(\"treeSelect\", function(id){\n            var find = treeDataMap.find(function(node){\n                return node.id == id;\n            }) || {};\n            if(find.setHighlight){\n                find.setHighlight(true);\n            };\n        })*/\n          treeDataMap.traverse(function(node){\n            if(node.level > 2){\n              var find = node.find(function(nd){\n                return nd.id == id;\n              });\n              if(find){\n                find.setHighlight(true);\n                if(typeof node.open == \"function\"){\n                  node.open();\n                };\n              } else {\n                if(typeof node.close == \"function\"){\n                  node.close();\n                };\n              }\n            } else {\n              if(typeof node.open == \"function\"){\n                node.open();\n              };\n            }\n            if(node.id == id){\n              if(node.setHighlight){\n                node.setHighlight(true);\n              };\n            }\n          });\n        })\n      }\n    }\n  }\n}"
                                            },
                                            "style": {
                                              "padding": "5px",
                                              "min-height": "100px"
                                            },
                                            "parameters": {}
                                          }
                                        ]
                                      }
                                    ],
                                    "parameters": {}
                                  }
                                ]
                              }
                            ],
                            "url": "images/map/map1.png",
                            "parameters": {}
                          }
                        ],
                        "col": 2
                      },
                      {
                        "type": "column",
                        "children": [
                          {
                            "label": "控制板1",
                            "type": "block",
                            "source": "BLOCK",
                            "style": {
                              "padding": "5px",
                              "margin": "10px",
                              "border": "0",
                              "box-shadow": "0px 0px 0px 0px rgba(0,0,0,0)",
                              "background-color": "rgba(250,250,250,0)",
                              "height": "calc(100vh - 180px)",
                              "overflow-y": "auto",
                              "overflow-x": "hidden"
                            },
                            "advance": {
                              "expression": "{}"
                            },
                            "children": [
                              {
                                "type": "column",
                                "col": 12,
                                "children": [
                                  {
                                    "label": "控制板1",
                                    "type": "block",
                                    "source": "BLOCK",
                                    "style": {
                                      "padding": "5px",
                                      "margin": "5px"
                                    },
                                    "advance": {
                                      "expression": {}
                                    },
                                    "children": [
                                      {
                                        "type": "column",
                                        "col": 12,
                                        "children": [
                                          {
                                            "type": "row",
                                            "source": "ROW",
                                            "parameters": {
                                              "alignment": "bootstrap"
                                            },
                                            "style": {},
                                            "children": [
                                              {
                                                "type": "column",
                                                "children": [
                                                  {
                                                    "label": "组态视图",
                                                    "type": "topo",
                                                    "source": "TOPO",
                                                    "advance": {
                                                      "variable": "",
                                                      "expression": "expression = {\n  \"on\": {\n    \"init\": function(event, complete, df) {\n      var target = event.target;\n      var id = target.getParameter(\"id\");\n      var main = target.getParameter(\"main\");\n      target.$on(\"$renderGraphComplete\", function(cells) {\n         
                                                    },
                                                    "style": {
                                                      "margin": "5px",
                                                      "font-size": "12px",
                                                      "background-repeat": "no-repeat"
                                                    },
                                                    "viewId": 546900339506067,
                                                    "url": "images/map/map1.png",
                                                    "parameters": {}
                                                  }
                                                ],
                                                "col": 8
                                              },
                                              {
                                                "type": "column",
                                                "children": [
                                                  {
                                                    "label": "控制板1",
                                                    "type": "block",
                                                    "source": "BLOCK",
                                                    "style": {
                                                      "padding": "5px",
                                                      "margin": "5px"
                                                    },
                                                    "advance": {
                                                      "expression": {}
                                                    },
                                                    "children": [
                                                      {
                                                        "type": "column",
                                                        "col": 12,
                                                        "children": [
                                                          {
                                                            "label": "文字",
                                                            "type": "text",
                                                            "source": "TEXT",
                                                            "help": "http://localhost/app-free-style/index.html#/help/index%7Ctext/%5B%220%22,%7B%7D%5D",
                                                            "data": {
                                                              "applied": false,
                                                              "multipleCi": false,
                                                              "multipleKpi": false,
                                                              "resource": [],
                                                              "modelType": 300,
                                                              "resfilltype": "parameter",
                                                              "series": {
                                                                "manual": "新建文字",
                                                                "bind": "(function (source){\n  var formatter=function(elem){\n    return elem.value\n   }\n  return source.ci.getSeries(formatter);\n})"
                                                              },
                                                              "modelDisable": true
                                                            },
                                                            "style": {
                                                              "margin": "5px",
                                                              "padding": "0",
                                                              "font-size": "16px",
                                                              "font-weight": "normal",
                                                              "text-align": "left",
                                                              "color": "rgb(255, 255, 255)",
                                                              "border-bottom": "1px solid #666",
                                                              "line-height": "30px"
                                                            },
                                                            "advance": {
                                                              "getfunction": "kpiDataService.getValueList",
                                                              "category": "ci",
                                                              "condition": [
                                                                "kpi",
                                                                "{object:kpiQueryModel}"
                                                              ],
                                                              "expression": "expression = {\n    on : {\n        init : function(event){\n            var target = event.target;\n            target.setText(\"工艺参数\")\n        }\n    }\n}"
                                                            },
                                                            "url": "images/map/map1.png"
                                                          },
                                                          {
                                                            "label": "控制板1",
                                                            "type": "block",
                                                            "source": "BLOCK",
                                                            "style": {
                                                              "padding": "0px",
                                                              "margin": "0px",
                                                              "border": "0",
                                                              "box-shadow": "0px 0px 0px 0px rgba(0,0,0,0)",
                                                              "background-color": "rgba(250,250,250,0)",
                                                              "height": "500px",
                                                              "overflow-y": "auto"
                                                            },
                                                            "advance": {
                                                              "expression": {}
                                                            },
                                                            "children": [
                                                              {
                                                                "type": "column",
                                                                "col": 12,
                                                                "children": [
                                                                  {
                                                                    "label": "控件组",
                                                                    "type": "ctrlgroup",
                                                                    "source": "CTRLGROUP",
                                                                    "advance": {
                                                                      "expression": "expression = {\n  on : {\n    init : function(event){\n      var target = event.target;\n      var global = event.global;\n      var id = target.getParameter(\"id\");\n      var units = {};\n      debugger     //工艺参数\n      target.getDomainAreaLineTree_alertStatus(function(domaintree){\n        var find = domaintree.find(function(node){\n          return node.id == id;\n        });\n        var modelId = [find.modelId]\n        var accessConfigValues = find.physicalConfig.accessConfigs;\n\n        \n        target.getAttrsByModelId(modelId, function (attrs) {\n          var MeasurePointLocate = attrs.find(function (elem) {\n              return elem.name == \"MeasurePointLocate\";\n            }) || {};\n          var sourceValue = eval(MeasurePointLocate.sourceValue)|| \"\";\n          var sourceValueArr = [];\n          for (var i in sourceValue) {\n            for (var j in sourceValue[i]) {\n              for(var k in sourceValue[i][j]){\n                var ins = sourceValue[i][j][k];\n                ins.configValues = accessConfigValues.find(function(accessConfigValue){\n                  return ins.name == accessConfigValue.instance;\n                })\n                sourceValueArr.push(ins);\n                //multiSelectValues.push(ins);\n              }\n            }\n          };\n          var whole = sourceValueArr.find(function(elem){\n            var regExp = /\\s*整体\\s*/g;\n            return regExp.test(elem.label);\n          });\n          var options = accessConfigValues.filter(function(elem){ \n            return elem.instance == whole.name;\n          });\n          var ci = [find.id];\n          var kpi = options.map(function(elem){\n            return elem.dataItemId;\n          });\n          \n          //获取模板\n           target.getKpisByModelId(modelId,function(subData) {\n            \n                      \n          \n          var getValueList = function(valueList){\n              \n            options = options.map(function(option){\n              var find = valueList.find(function(elem){\n                return elem.kpiCode == option.dataItemId;\n              });\n\n              if(find){\n                option.value = find.value;\n                option.time = target.dateHandler(find.arisingTime).getDateString(\"yy/MM/dd hh:mm:ss\")\n              } else {\n                option.value = option.value || \"-\";\n                option.time = option.time || \"-\";\n              }\n              return option;\n            });\n            //拼接单位\n            var kpiCodes = [];\n            for(var i =0; i < options.length; i++) {\n              if(!units[options[i].dataItemId]){\n                kpiCodes.push(options[i].dataItemId)\n              };\n            };\n            if(kpiCodes.length > 0) {\n              target.postService(\"resourceUIService\", \"getKpisByKpiIds\", [kpiCodes], callback);\n            } else {\n              callback({data : []});\n            }\n            function callback(returnData){\n              for(var i = 0; i < returnData.data.length;i++) {\n                units[returnData.data[i].id] = returnData.data[i];\n              }\n              for(var z = 0; z < options.length; z++) {\n                var u = units[options[z].dataItemId];\n                if(u){\n                  options[z].unit = u;\n                };\n              };\n              var render = function () {\n                var ctrlGroups = [[{\n                  type : \"label\",\n                  value : \"名称\",\n                  composory : \"none\",\n                  style : {\n                    //\"white-space\" : \"normal\"\n                    \"white-space\" : \"pre-wrap\",\n                    \"borderBottom\":\"1px solid #666666\",\n                    \"height\":\"41px\",\n                \n                  },\n                  class : \"col-xs-4\"\n                },{\n                  type : \"label\",\n                  composory : \"none\",\n                  //value : option.value != \"-\" ? target.toFix(option.value, 2) : \"-\",\n                  value: \"数值\",\n                  class : \"col-xs-4\",\n                  style : {\n                    \"white-space\" : \"pre-wrap\",\n                    \"borderBottom\":\"1px solid #666666\",\n                    \"height\":\"41px\",\n                    \"backgroudColor\":\"red\"\n                  }\n                },{\n                  type : \"label\",\n                  value : \"更新时间\",\n                  composory : \"none\",\n                  class : \"col-xs-4\",\n                  style : {\n                    \"white-space\" : \"pre-wrap\",\n                    \"paddingLeft\" : \"12px\",\n                    \"borderBottom\":\"1px solid #666666\",\n                    \"height\":\"41px\",\n                  }\n                }]];\n                var addData = function(option){\n                    //  
                                                                    },
                                                                    "style": {
                                                                      "margin": "5px",
                                                                      "font-size": "12px"
                                                                    },
                                                                    "help": "../pdf/ctrlgroup.pdf",
                                                                    "parameters": {
                                                                      "cgroupstyle": "table"
                                                                    }
                                                                  }
                                                                ]
                                                              }
                                                            ],
                                                            "url": "images/map/map1.png"
                                                          }
                                                        ]
                                                      }
                                                    ]
                                                  }
                                                ],
                                                "col": 4
                                              }
                                            ],
                                            "url": "images/map/map1.png",
                                            "advance": {
                                              "expression": "{\n\t\"on\" : {\n    \"click\" : function(event){\n      var ticketNo = event.data.values.ticketNo;\n      event.tools.location.href='../../app-oc/index.html#/workOrderTimeLine/'+ ticketNo;\n     }\n  },  \n  \"format\" : [\n    {\n      \"name\": \"工单号\",\n      \"value\": \"{item:ticketNo}\",\n      \"type\": \"text\"\n    },\n    {\n      \"name\": \"内容\",\n      \"value\": \"{item:message}\",\n      \"type\": \"text\"\n    },\n    {\n      \"name\": \"紧急度\",\n      \"value\": \"{item:priorityCode}\",\n      \"type\": \"priority\"\n    }\n  ]\n}"
                                            }
                                          },
                                          {
                                            "type": "row",
                                            "source": "ROW",
                                            "parameters": {
                                              "alignment": "bootstrap"
                                            },
                                            "style": {},
                                            "children": [
                                              {
                                                "type": "column",
                                                "children": [
                                                  {
                                                    "label": "控制板1",
                                                    "type": "block",
                                                    "source": "BLOCK",
                                                    "style": {
                                                      "padding": "5px",
                                                      "margin": "5px"
                                                    },
                                                    "advance": {
                                                      "expression": {}
                                                    },
                                                    "children": [
                                                      {
                                                        "type": "column",
                                                        "col": 12,
                                                        "children": [
                                                          {
                                                            "label": "文字",
                                                            "type": "text",
                                                            "source": "TEXT",
                                                            "help": "http://localhost/app-free-style/index.html#/help/index%7Ctext/%5B%220%22,%7B%7D%5D",
                                                            "data": {
                                                              "applied": false,
                                                              "multipleCi": false,
                                                              "multipleKpi": false,
                                                              "resource": [],
                                                              "modelType": 300,
                                                              "resfilltype": "parameter",
                                                              "series": {
                                                                "manual": "新建文字",
                                                                "bind": "(function (source){\n  var formatter=function(elem){\n    return elem.value\n   }\n  return source.ci.getSeries(formatter);\n})"
                                                              },
                                                              "modelDisable": true
                                                            },
                                                            "style": {
                                                              "margin": "5px",
                                                              "padding": "0",
                                                              "font-size": "14px",
                                                              "font-weight": "bold",
                                                              "text-align": "left",
                                                              "color": "rgb(255, 255, 255)"
                                                            },
                                                            "advance": {
                                                              "getfunction": "kpiDataService.getValueList",
                                                              "category": "ci",
                                                              "condition": [
                                                                "kpi",
                                                                "{object:kpiQueryModel}"
                                                              ],
                                                              "expression": "expression = {\n    on : {\n        init : function(event){\n            var target = event.target;\n            target.setText(\"报警通知\")\n        }\n    }\n}"
                                                            },
                                                            "parameters": {},
                                                            "url": "images/map/map1.png"
                                                          },
                                                          {
                                                            "label": "控制板1",
                                                            "type": "block",
                                                            "source": "BLOCK",
                                                            "style": {
                                                              "margin": "5px",
                                                              "padding": "10px",
                                                              "height": "285px",
                                                              "overflow-y": "auto",
                                                              "overflow-x": "hidden",
                                                              "border": "0"
                                                            },
                                                            "advance": {
                                                              "expression": {}
                                                            },
                                                            "children": [
                                                              {
                                                                "type": "column",
                                                                "col": 12,
                                                                "children": [
                                                                  {
                                                                    "label": "高级列表",
                                                                    "type": "dataTableAdvance",
                                                                    "source": "DATATABLEADVANCE",
                                                                    "parameters": {
                                                                      "col": 1,
                                                                      "pageSize": 5,
                                                                      "listbottom": "none"
                                                                    },
                                                                    "advance": {
                                                                      "expression": "expression = {\n  \"theme\" : \"dark\",\n  \"on\" : {\n    \"init\" : function(event){\n      var target = event.target;\n      var deviceId = target.getParameter('id')\n\n      var queryParams = {\n        \"domain\":\"\",\n        \"nodeType\":\"\",\n        \"pageSize\":1000,\n        \"severities\":\"1,2,3,4\",\n        \"states\":\"0,5,10,20\",\n        \"nodeIds\":deviceId\n      };\n      var queryParams4Page = {\n        \"start\": 0,\n        \"length\": \"\",\n        \"sort\": \"createTime\",\n        \"sortType\": \"desc\",\n        \"statCount\": true,\n        \"total\": 0\n      };\n      var params = [queryParams,queryParams4Page]\n\n      target.postService(\"alertQueryFlexService\",\"getAlertByPage\",params,function (returnData) {\n          target.trigger(\"detaiPageloaded\", \"alert\");\n        var alertsDevice = [];\n        var alerts = returnData.data.data;\n        for(var i = 0; i < alerts.length; i++ ) {\n          if(alerts[i].state == 0 || alerts[i].state == 5 || alerts[i].state == 10) {\n            alertsDevice.push(alerts[i])\n          }\n        };\n        target.setValue(\"device/alerts\",alertsDevice.map(function(alert){\n          alert.label = alert.devName + \"(\" + alert.message + \")\";\n          alert.valueStr = target.getAlertWord(alert.severity);\n          alert.status = alert.severity;\n          return alert;\n        }));\n        target.render({\n          data : alertsDevice,\n          on : {\n            rowClick : function(event){\n              //target.navigateTo('production', {});\n            }\n          },\n          format : [\n            {\n              \"name\": \"报警来源\",\n              \"value\": \"appName\",\n              \"type\": \"text\",\n              //\"width\" : 300\n              \"format\":function (elem) {\n                if(elem == 1){\n                  return \"在线预警\";\n                }else if(elem == 2){\n                  return \"智能诊断\";\n                }else if(elem == 3){\n                  return \"大数据分析\";\n                } else {\n                  return \"离线诊断\";\n                }\n              }\n            }, {\n              \"name\": \"报警消息\",\n              \"value\": \"message\",\n              \"type\": \"text\",\n            },{\n              \"name\": \"报警级别\",\n              \"type\":\"priority\",\n              \"value\" : \"severity\",\n              \"format\":function (elem) {\n                if(elem == 2){\n                  return \"注意\";\n                }else if(elem == 3){\n                  return \"异常\";\n                }else if(elem == 4){\n                  return \"警告\";\n                } else {\n                  return \"正常\";\n                }\n              }\n            },{\n              \"name\": \"报警时间\",\n              \"value\": \"firstArisingTime\",\n              \"type\": \"date\"\n            },{\n              \"name\":\"操作\",\n              \"type\" : \"buttonGroup\",\n              \"content\" : [{\n                type : \"button\",\n                label : \"过程跟踪\",\n                icon : \"glyphicon glyphicon-cog\",\n                btnclass : \"btn btn-primary\",\n                on : {\n                  click : function(elem){\n                    event.target.postService(\"ticketTaskService\", \"getDealTicketListByPage\", [{\"attrs\": {\"origId\": elem.row.alertId}},\n                      {\"start\": 0, \"length\": 10}], function (dt) {\n                      if (dt.data.data.length>0) {\n                        target.navigateToTracker(dt.data.data[0].ticketNo);\n                      }else{\n                        target.growl(\"告警未转工单\",\"warning\")\n                      }\n                    })\n                  }\n                }\n              }]\n            }\n          ]\n        });\n      })\n    }\n  }\n}"
                                                                    },
                                                                    "style": {
                                                                      "margin": "5px",
                                                                      "font-size": "12px"
                                                                    },
                                                                    "url": "images/map/map1.png"
                                                                  }
                                                                ]
                                                              }
                                                            ],
                                                            "url": "images/map/map1.png",
                                                            "parameters": {}
                                                          }
                                                        ]
                                                      }
                                                    ]
                                                  }
                                                ],
                                                "col": 8
                                              },
                                              {
                                                "type": "column",
                                                "children": [
                                                  {
                                                    "label": "控制板1",
                                                    "type": "block",
                                                    "source": "BLOCK",
                                                    "style": {
                                                      "padding": "5px",
                                                      "margin": "5px"
                                                    },
                                                    "advance": {
                                                      "expression": {}
                                                    },
                                                    "children": [
                                                      {
                                                        "type": "column",
                                                        "col": 12,
                                                        "children": [
                                                          {
                                                            "label": "文字",
                                                            "type": "text",
                                                            "source": "TEXT",
                                                            "help": "http://localhost/app-free-style/index.html#/help/index%7Ctext/%5B%220%22,%7B%7D%5D",
                                                            "data": {
                                                              "applied": false,
                                                              "multipleCi": false,
                                                              "multipleKpi": false,
                                                              "resource": [],
                                                              "modelType": 300,
                                                              "resfilltype": "parameter",
                                                              "series": {
                                                                "manual": "新建文字",
                                                                "bind": "(function (source){\n  var formatter=function(elem){\n    return elem.value\n   }\n  return source.ci.getSeries(formatter);\n})"
                                                              },
                                                              "modelDisable": true
                                                            },
                                                            "style": {
                                                              "margin": "5px",
                                                              "padding": "0",
                                                              "font-size": "14px",
                                                              "font-weight": "bold",
                                                              "text-align": "left",
                                                              "color": "rgb(255, 255, 255)"
                                                            },
                                                            "advance": {
                                                              "getfunction": "kpiDataService.getValueList",
                                                              "category": "ci",
                                                              "condition": [
                                                                "kpi",
                                                                "{object:kpiQueryModel}"
                                                              ],
                                                              "expression": "expression = {\n    on : {\n        init : function(event){\n            var target = event.target;\n            target.setText(\"离线诊断\")\n        }\n    }\n}"
                                                            },
                                                            "parameters": {},
                                                            "url": "images/map/map1.png"
                                                          },
                                                          {
                                                            "label": "控制板1",
                                                            "type": "block",
                                                            "source": "BLOCK",
                                                            "style": {
                                                              "margin": "5px",
                                                              "padding": "10px",
                                                              "height": "285px",
                                                              "overflow-y": "auto",
                                                              "border": "0"
                                                            },
                                                            "advance": {
                                                              "expression": {}
                                                            },
                                                            "children": [
                                                              {
                                                                "type": "column",
                                                                "col": 12,
                                                                "children": [
                                                                  {
                                                                    "label": "高级列表",
                                                                    "type": "dataTableAdvance",
                                                                    "source": "DATATABLEADVANCE",
                                                                    "parameters": {
                                                                      "col": 1,
                                                                      "pageSize": 5,
                                                                      "listbottom": "none"
                                                                    },
                                                                    "advance": {
                                                                      "expression": "expression = {\n  \"theme\": \"dark\",\n  \"on\": {\n    \"init\": function (event) {\n      var target = event.target;\n      var id = target.getParameter('id')\n\n\n      target.getDomainAreaLineTree(function (domaintree) {\n        var find = domaintree.find(function (node) {\n          return node.id == id\n        });\n        if (find) {\n          var deviceCode = find.externalDevId;\n          // 
                                                                    },
                                                                    "style": {
                                                                      "margin": "5px",
                                                                      "font-size": "12px"
                                                                    },
                                                                    "url": "images/map/map1.png"
                                                                  }
                                                                ]
                                                              }
                                                            ],
                                                            "url": "images/map/map1.png",
                                                            "parameters": {}
                                                          }
                                                        ]
                                                      }
                                                    ],
                                                    "url": "images/map/map1.png"
                                                  }
                                                ],
                                                "col": 4
                                              }
                                            ],
                                            "url": "images/map/map1.png",
                                            "advance": {
                                              "expression": "{\n\t\"on\" : {\n    \"click\" : function(event){\n      var ticketNo = event.data.values.ticketNo;\n      event.tools.location.href='../../app-oc/index.html#/workOrderTimeLine/'+ ticketNo;\n     }\n  },  \n  \"format\" : [\n    {\n      \"name\": \"工单号\",\n      \"value\": \"{item:ticketNo}\",\n      \"type\": \"text\"\n    },\n    {\n      \"name\": \"内容\",\n      \"value\": \"{item:message}\",\n      \"type\": \"text\"\n    },\n    {\n      \"name\": \"紧急度\",\n      \"value\": \"{item:priorityCode}\",\n      \"type\": \"priority\"\n    }\n  ]\n}"
                                            }
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              }
                            ],
                            "parameters": {}
                          }
                        ],
                        "col": 10
                      }
                    ],
                    "advance": {
                      "expression": "expression = {\n  \"on\" : {\n    \"init\" : function(event){\n      var target = event.target;\n      var role = target.getValue(\"global/ROLE\");\n      if(role != 4){\n          target.setDimension([0,12]);\n      }\n    }\n  }\n};"
                    }
                  }
                ]
              }
            ],
            "parameters": {}
          }
        ],
        "col": 12
      },
      "id": "3",
      "$$hashKey": "object:1918"
    },
    {
      "label": "厂区二层",
      "path": "factory",
      "layout": {
        "type": "column",
        "children": [
          {
            "label": "控制板1",
            "type": "block",
            "source": "BLOCK",
            "style": {
              "padding": "0px",
              "margin": "0px",
              "border": "0",
              "box-shadow": "0px 0px 0px 0px rgba(0,0,0,0)",
              "background-color": "rgba(250,250,250,0)",
              "height": "calc(100vh - 50px)",
              "overflow-y": "auto",
              "overflow-x": "hidden"
            },
            "advance": {
              "expression": {}
            },
            "children": [
              {
                "type": "column",
                "col": 12,
                "children": [
                  {
                    "label": "控制板1",
                    "type": "block",
                    "source": "BLOCK",
                    "style": {
                      "padding": "10px",
                      "margin": "5px",
                      "border": "0",
                      "box-shadow": "0px 0px 0px 0px rgba(0,0,0,0)",
                      "background-color": "rgba(250,250,250,0)"
                    },
                    "advance": {
                      "expression": {}
                    },
                    "children": [
                      {
                        "type": "column",
                        "col": 12,
                        "children": [
                          {
                            "type": "row",
                            "source": "ROW",
                            "parameters": {
                              "alignment": "bootstrap"
                            },
                            "style": {},
                            "children": [
                              {
                                "type": "column",
                                "children": [
                                  {
                                    "label": "数结构导航",
                                    "type": "navitree",
                                    "source": "NAVITREE",
                                    "advance": {
                                      "expression": ""
                                    },
                                    "style": {}
                                  }
                                ],
                                "col": 8
                              },
                              {
                                "type": "column",
                                "children": [
                                  {
                                    "label": "控件组",
                                    "type": "ctrlgroup",
                                    "source": "CTRLGROUP",
                                    "advance": {
                                      "expression": "expression = {\n  on : {\n    init : function(event){\n      var target = event.target;\n      var global = event.global;\n      var ctrlGroups = [\n       [{\n          type : \"clock\",\n          icon : \"glyphicon glyphicon-search\",\n          value : function(time){\n              return \"当前时间 ： \" + time\n          },\n          btnclass : \"btn btn-primary\",\n          class : \"col-md-12\",\n          style : {\n              \"float\" : \"right\",\n              \"font-weight\" : \"bold\"\n          }\n        }]\n      ];\n      event.target.render(ctrlGroups);\n    }\n  }\n}"
                                    },
                                    "style": {
                                      "margin": "5px",
                                      "font-size": "14px",
                                      "font-weight": "bold"
                                    },
                                    "help": "../pdf/ctrlgroup.pdf",
                                    "url": "images/map/map1.png",
                                    "parameters": {
                                      "cgroupstyle": "table"
                                    }
                                  }
                                ],
                                "col": 4
                              }
                            ],
                            "advance": {
                              "expression": "expression = {\n  \"on\" : {\n    \"init\" : function(event){\n      var target = event.target;\n      var role = target.getValue(\"global/ROLE\");\n      if(role != 4){\n          target.setDimension([0,0]);\n      }\n    }\n  }\n};"
                            }
                          },
                          {
                            "type": "row",
                            "source": "ROW",
                            "parameters": {
                              "alignment": "bootstrap"
                            },
                            "style": {},
                            "children": [
                              {
                                "type": "column",
                                "children": [
                                  {
                                    "label": "组态视图",
                                    "type": "topo",
                                    "source": "TOPO",
                                    "advance": {
                                      "variable": "",
                                      "expression": "expression = {\n  \"on\" : {\n    \"init\" : function(event){\n      var target = event.target;\n      var id = target.getParameter(\"id\");\n      var main = target.getParameter(\"main\");\n      target.getDomainAreaLineTree_alertStatus(function(domaintree){\n        var find = domaintree.find(function(node){\n          return node.id == id;\n        });\n        if(find){ debugger;\n          var children = find.getChildren();\n          var viewId = find.$attr(\"view/viewId\");\n          target.getViewById(viewId, function(view){\n            var content = view.content;\n            var json = JSON.parse(content);\n            target.render(json);\n            target.on(\"$loadCiKpiComplete\", function(cells){ \n              for(var i in cells){\n                cells[i].attr(\"circle/opacity\", 0);\n                cells[i].attr(\"text/opacity\", 0);\n              };\n              var list = cells.filter(function(el){\n                  return el.attributes.type == \"basic.Circle\";\n              })\n              \n              var createMarker = function(index, node){    \n                var cell = cells.find(function(cell){\n                    var text = cell.attr(\"text/text\");\n                    return node.label==text\n                }) || cells[index] || {};\n                var position;\n                \n                if(cell){\n                  position = cell.attributes.position;\n                   
                                    },
                                    "style": {
                                      "font-size": "12px",
                                      "background-repeat": "no-repeat"
                                    },
                                    "viewId": 469973748826065,
                                    "parameters": {}
                                  },
                                  {
                                    "label": "控制板1",
                                    "type": "block",
                                    "source": "BLOCK",
                                    "style": {
                                      "height": "276px"
                                    },
                                    "advance": {
                                      "expression": {}
                                    },
                                    "children": [
                                      {
                                        "type": "column",
                                        "col": 12,
                                        "children": [
                                          {
                                            "label": "文字",
                                            "type": "text",
                                            "source": "TEXT",
                                            "help": "http://localhost/app-free-style/index.html#/help/index%7Ctext/%5B%220%22,%7B%7D%5D",
                                            "style": {
                                              "padding": "0",
                                              "font-size": "12px",
                                              "font-weight": "bold",
                                              "color": "rgb(255, 255, 255)"
                                            },
                                            "advance": {
                                              "expression": "expression = {\n    on : {\n        init : function(event){\n            var target = event.target;\n            target.setText(\"检修实绩(当月内)\")\n        }\n    }\n}"
                                            },
                                            "data": {
                                              "modelType": 300,
                                              "resfilltype": "parameter",
                                              "modelDisable": true
                                            },
                                            "parameters": {}
                                          },
                                          {
                                            "type": "row",
                                            "source": "ROW",
                                            "parameters": {
                                              "alignment": "bootstrap"
                                            },
                                            "style": {},
                                            "children": [
                                              {
                                                "type": "column",
                                                "children": [
                                                  {
                                                    "label": "高级视图",
                                                    "type": "advanceEchart",
                                                    "source": "ADVANCEECHART",
                                                    "parameters": {
                                                      "theme": "default"
                                                    },
                                                    "advance": {
                                                      "expression": "express = {\n  on : {\n    init : function(event){\n      var target = event.target;\n      var global = event.global;\n      var workObj = target.getParameter(\"id\");\n      var filter = {\"layer\":1,\"modelId\":301,\"domains\":workObj};\n      target.getDomainsByFilter(filter,function(returnData){\n        var factoryName = [];\n        var factory = [];\n        for(var i = 0; i < returnData.length;i++) {\n          factoryName.push(returnData[i].label)\n          factory.push(returnData[i].id)\n        }\n         
                                                    },
                                                    "style": {
                                                      "margin": "auto",
                                                      "width": "100%",
                                                      "height": "250px"
                                                    },
                                                    "url": "images/map/map1.png"
                                                  }
                                                ],
                                                "col": 4
                                              },
                                              {
                                                "type": "column",
                                                "children": [
                                                  {
                                                    "label": "高级视图",
                                                    "type": "advanceEchart",
                                                    "source": "ADVANCEECHART",
                                                    "parameters": {
                                                      "theme": "default"
                                                    },
                                                    "advance": {
                                                      "expression": "express = {\n  on : {\n    init : function(event){\n      var target = event.target;\n      var global = event.global;\n\n\n\n      var workObj = target.getParameter(\"id\");\n      //515445641576272\n\n      var filter = {\"layer\":1,\"modelId\":301,\"domains\":workObj};\n\n      target.getDomainsByFilter(filter,function(returnData){\n        var factoryName = [];\n        var factory = [];\n        for(var i = 0; i < returnData.length;i++) {\n          factoryName.push(returnData[i].label)\n          factory.push(returnData[i].id)\n        }\n        // 
                                                    },
                                                    "style": {
                                                      "margin": "auto",
                                                      "width": "100%",
                                                      "height": "250px"
                                                    },
                                                    "url": "images/map/map1.png"
                                                  }
                                                ],
                                                "col": 4
                                              },
                                              {
                                                "type": "column",
                                                "children": [
                                                  {
                                                    "label": "高级视图",
                                                    "type": "advanceEchart",
                                                    "source": "ADVANCEECHART",
                                                    "parameters": {
                                                      "theme": "default"
                                                    },
                                                    "advance": {
                                                      "expression": "express = {\n  on : {\n    init : function(event){\n      var target = event.target;\n      var global = event.global;\n      \n      \n      \n        var workObj = target.getParameter(\"id\");\n        //515445641576272\n       \n        var filter = {\"layer\":1,\"modelId\":301,\"domains\":workObj};\n       \n        target.getDomainsByFilter(filter,function(returnData){\n            var factoryName = [];\n            var factory = [];\n            for(var i = 0; i < returnData.length;i++) {\n                factoryName.push(returnData[i].label)\n                factory.push(returnData[i].id)\n            }\n             
                                                    },
                                                    "style": {
                                                      "width": "100%",
                                                      "height": "250px"
                                                    },
                                                    "url": "images/map/map1.png"
                                                  }
                                                ],
                                                "col": 4
                                              }
                                            ],
                                            "advance": {
                                              "expression": "{\n\t\"on\" : {\n    \"click\" : function(event){\n      var ticketNo = event.data.values.ticketNo;\n      event.tools.location.href='../../app-oc/index.html#/workOrderTimeLine/'+ ticketNo;\n     }\n  },  \n  \"format\" : [\n    {\n      \"name\": \"工单号\",\n      \"value\": \"{item:ticketNo}\",\n      \"type\": \"text\"\n    },\n    {\n      \"name\": \"内容\",\n      \"value\": \"{item:message}\",\n      \"type\": \"text\"\n    },\n    {\n      \"name\": \"紧急度\",\n      \"value\": \"{item:priorityCode}\",\n      \"type\": \"priority\"\n    }\n  ]\n}"
                                            }
                                          }
                                        ]
                                      }
                                    ],
                                    "parameters": {}
                                  }
                                ],
                                "col": 8
                              },
                              {
                                "type": "column",
                                "children": [
                                  {
                                    "label": "控制板1",
                                    "type": "block",
                                    "source": "BLOCK",
                                    "style": {
                                      "margin": "3px 5px 5px 5px",
                                      "padding": "10px",
                                      "height": "290px"
                                    },
                                    "advance": {
                                      "expression": "{}"
                                    },
                                    "children": [
                                      {
                                        "type": "column",
                                        "col": 12,
                                        "children": [
                                          {
                                            "label": "文字",
                                            "type": "text",
                                            "source": "TEXT",
                                            "help": "http://localhost/app-free-style/index.html#/help/index%7Ctext/%5B%220%22,%7B%7D%5D",
                                            "data": {
                                              "applied": false,
                                              "multipleCi": false,
                                              "multipleKpi": false,
                                              "resource": [],
                                              "modelType": 300,
                                              "resfilltype": "parameter",
                                              "series": {
                                                "manual": "新建文字",
                                                "bind": "(function (source){\n  var formatter=function(elem){\n    return elem.value\n   }\n  return source.ci.getSeries(formatter);\n})"
                                              },
                                              "modelDisable": true
                                            },
                                            "style": {
                                              "margin": "10px  5px 5px 5px",
                                              "padding": "0",
                                              "font-size": "12px",
                                              "font-weight": "bold",
                                              "color": "rgb(255, 255, 255)"
                                            },
                                            "advance": {
                                              "getfunction": "kpiDataService.getValueList",
                                              "category": "ci",
                                              "condition": [
                                                "kpi",
                                                "{object:kpiQueryModel}"
                                              ],
                                              "expression": "expression = {\n    on : {\n        init : function(event){\n            var target = event.target;\n            target.setText(\"状态总览 \");\n        }\n    }\n}"
                                            },
                                            "parameters": {}
                                          },
                                          {
                                            "label": "重复单元",
                                            "type": "repeater",
                                            "source": "REPEATER",
                                            "parameters": {
                                              "col": 3
                                            },
                                            "advance": {
                                              "getListTable": "allprojects",
                                              "expression": "expression = {\n  on : {\n    init : function(event){\n      var target = event.target;\n      \n      \n      \n      var id = target.getParameter(\"id\") || target.getValue(\"device/id\");\n      var main = target.getParameter(\"main\");\n      target.getDomainAreaLineTree(function(domaintree){\n        var find = domaintree.find(function(node){\n          return node.id == id;\n        });\n        if(find){\n        var domains = find.getChildren();\n        var mountain = domains.map(function(elem){\n          return elem.id;\n        });\n        var params = [\"kpi\",{\"isRealTimeData\":true,\"includeInstance\":true,\n          \"nodeIds\":mountain,\"kpiCodes\":[6100]}];\n        target.postService(\"kpiDataFlexService\",\"getKpiValueList\",params,function(returnData){\n            var kpiNames = ['正常','注意','警告','监测台数'];\n            var data = returnData.data;\n             \n}"
                                            },
                                            "children": [
                                              {
                                                "type": "column",
                                                "col": [
                                                  4,
                                                  0
                                                ],
                                                "children": [
                                                  {
                                                    "label": "控件组",
                                                    "type": "ctrlgroup",
                                                    "source": "CTRLGROUP",
                                                    "advance": {
                                                      "expression": "expression = {\n  on : {\n    repeat : function(event){\n      var target = event.target;\n      var global = event.global;\n      var label = target.$repeatData.province;\n      var description = target.$repeatData.description || 0;\n      var ctrlGroups = [[{\n          type : \"jquery\",\n          render : function(){\n              var wrap = $(\"<div></div>\");\n              wrap.css(\"height\", \"70px\");\n              wrap.css(\"border\", \"1px solid rgba(250,250,250,.3)\");\n              wrap.css(\"background-color\", \"rgba(0,100,250,.1)\");\n              var title = $(\"<div></div>\");\n              title.text(label);\n              title.css(\"font-size\", \"12px\");\n              title.css(\"color\", \"#fff\");\n              title.css(\"position\", \"absolute\");\n              title.css(\"top\", \"12px\");\n              title.css(\"left\", \"15px\");\n              title.css(\"font-weight\", \"bold\");\n              var sub = $(\"<div></div>\");\n              sub.text(\"重要台数\");\n              sub.css(\"position\", \"absolute\");\n              sub.css(\"top\", \"30px\");\n              sub.css(\"left\", \"15px\");\n              sub.css(\"color\", \"#aaa\");\n              sub.css(\"font-size\", \"10px\");\n              var number = $(\"<div></div>\");\n              number.text(description);\n              number.css(\"position\", \"absolute\");\n              number.css(\"top\", \"45px\");\n              number.css(\"left\", \"15px\");\n              number.css(\"font-size\", \"14px\");\n              number.css(\"font-weight\", \"bold\");\n              wrap.append(title);\n              wrap.append(sub);\n              wrap.append(number);\n              return wrap;\n          }\n        }]];\n      target.render(ctrlGroups);\n    }\n  }\n}"
                                                    },
                                                    "style": {
                                                      "margin": "5px",
                                                      "font-size": "12px"
                                                    },
                                                    "help": "../pdf/ctrlgroup.pdf",
                                                    "parameters": {
                                                      "cgroupstyle": "table"
                                                    }
                                                  },
                                                  {
                                                    "type": "row",
                                                    "source": "ROW",
                                                    "parameters": {
                                                      "alignment": "bootstrap"
                                                    },
                                                    "style": {},
                                                    "children": [
                                                      {
                                                        "type": "column",
                                                        "children": [
                                                          {
                                                            "label": "控件组",
                                                            "type": "ctrlgroup",
                                                            "source": "CTRLGROUP",
                                                            "advance": {
                                                              "expression": "expression = {\n  on : {\n    repeat : function(event){\n      var target = event.target;\n      var global = event.global;\n      var colors = [target.getAlertColor(1), target.getAlertColor(2), target.getAlertColor(3)];\n      var ctrlGroups = [];\n      var createTr = function(index, element){\n        return [{\n          type : \"jquery\",\n          render : function(){\n              var wrap = $(\"<div></div>\");\n              var title = $(\"<div></div>\");\n              var bar = $(\"<div></div>\");\n              wrap.css(\"height\", \"25px\");\n              wrap.css(\"width\", \"40px\");\n              wrap.css(\"margin\", \"auto\");\n              bar.css(\"width\", \"10px\");\n              bar.css(\"height\", \"25px\");\n              bar.css(\"background-color\", colors[index]);\n              bar.css(\"position\", \"absolute\");\n              wrap.css(\"position\", \"relative\");\n              bar.css(\"left\", \"25px\");\n              wrap.append(bar);\n              title.css(\"text-align\", \"right\");\n              title.css(\"color\", \"#a0a0a0\");\n              title.css(\"margin-right\", \"15px\");\n              title.css(\"position\", \"absolute\");\n              title.css(\"font-size\", \"12px\");\n              title.text(element.name);\n              var value = $(\"<div></div>\");\n              value.css(\"color\", \"#fff\");\n              value.css(\"position\", \"absolute\");\n              value.css(\"font-size\", \"12px\");\n              value.css(\"text-align\", \"right\");\n              value.css(\"font-weight\", \"bold\");\n              value.text(element.value);\n              value.css(\"top\", \"12px\");\n              wrap.append(title);\n              wrap.append(value);\n              return wrap;\n          }\n        }]\n      }\n      for(var i = target.$repeatData.data.length - 1; i >= 0; i--){\n         ctrlGroups.push(createTr(i, target.$repeatData.data[i]));\n      }\n      event.target.render(ctrlGroups);\n    }\n  }\n}"
                                                            },
                                                            "style": {
                                                              "margin": "5px",
                                                              "font-size": "12px"
                                                            },
                                                            "help": "../pdf/ctrlgroup.pdf",
                                                            "parameters": {
                                                              "cgroupstyle": "table"
                                                            }
                                                          }
                                                        ],
                                                        "col": 6
                                                      },
                                                      {
                                                        "type": "column",
                                                        "children": [
                                                          {
                                                            "label": "SVG视图",
                                                            "type": "svgchart",
                                                            "source": "SVGCHART",
                                                            "advance": {
                                                              "expression": "expression = {\n  \"on\" : {\n    \"init\" : function(event){\n        var  target = event.target;\n        var repeatData = target.$repeatData;\n        var barOption = {\n          title: {\n            text: 'svgChart入门示例'\n          },\n          grid : {\n              top : \"5%\",\n              left : \"10%\",\n              height : \"90%\"\n          },\n          legend: {\n            data: ['销量']\n          },\n          xAxis: {\n            show : false,\n            data: [\"衬衫\", \"羊毛衫\", \"雪纺衫\", \"裤子\", \"高跟鞋\", \"袜子\"]\n          },\n          yAxis: {\n              show : false\n          },\n          series: [{\n            stack : \"总量\",\n            name: '销量1',\n            type: '3dbar',\n            data: [repeatData.data[0].value]\n          },{\n              stack : \"总量\",\n            name: '销量2',\n            type: '3dbar',\n            data: [repeatData.data[1].value]\n          },{\n              stack : \"总量\",\n            name: '销量3',\n            type: '3dbar',\n            data: [repeatData.data[2].value]\n          }]\n        };\n        target.render(barOption);\n     }\n  }\n}"
                                                            },
                                                            "style": {
                                                              "margin": "0px",
                                                              "font-size": "12px",
                                                              "height": "150px"
                                                            },
                                                            "parameters": {}
                                                          }
                                                        ],
                                                        "col": 6
                                                      }
                                                    ],
                                                    "url": "images/map/map1.png",
                                                    "advance": {
                                                      "expression": "{\n\t\"on\" : {\n    \"click\" : function(event){\n      var ticketNo = event.data.values.ticketNo;\n      event.tools.location.href='../../app-oc/index.html#/workOrderTimeLine/'+ ticketNo;\n     }\n  },  \n  \"format\" : [\n    {\n      \"name\": \"工单号\",\n      \"value\": \"{item:ticketNo}\",\n      \"type\": \"text\"\n    },\n    {\n      \"name\": \"内容\",\n      \"value\": \"{item:message}\",\n      \"type\": \"text\"\n    },\n    {\n      \"name\": \"紧急度\",\n      \"value\": \"{item:priorityCode}\",\n      \"type\": \"priority\"\n    }\n  ]\n}"
                                                    }
                                                  }
                                                ]
                                              }
                                            ],
                                            "style": {},
                                            "url": "images/map/map1.png"
                                          }
                                        ]
                                      }
                                    ],
                                    "parameters": {},
                                    "url": "images/map/map1.png"
                                  },
                                  {
                                    "label": "控制板1",
                                    "type": "block",
                                    "source": "BLOCK",
                                    "style": {
                                      "margin": "5px 5px 5px 5px",
                                      "padding": "10px",
                                      "height": "160px"
                                    },
                                    "advance": {
                                      "expression": {}
                                    },
                                    "children": [
                                      {
                                        "type": "column",
                                        "col": 12,
                                        "children": [
                                          {
                                            "label": "文字",
                                            "type": "text",
                                            "source": "TEXT",
                                            "help": "http://localhost/app-free-style/index.html#/help/index%7Ctext/%5B%220%22,%7B%7D%5D",
                                            "style": {
                                              "padding": "5px",
                                              "font-size": "12px",
                                              "font-weight": "bold",
                                              "text-align": "left",
                                              "color": "rgb(255, 255, 255)"
                                            },
                                            "advance": {
                                              "expression": "expression = {\n    on : {\n        init : function(event){\n            var target = event.target;\n            target.setText(\"诊断绩效统计（当月内）\")\n        }\n    }\n}"
                                            },
                                            "data": {
                                              "modelType": 300,
                                              "resfilltype": "parameter",
                                              "modelDisable": true
                                            },
                                            "url": "images/map/map1.png"
                                          },
                                          {
                                            "label": "控件组",
                                            "type": "ctrlgroup",
                                            "source": "CTRLGROUP",
                                            "advance": {
                                              "expression": "expression = {\n    bootstrap : true,\n  on : {\n    init : function(event){\n      var target = event.target;\n      var global = event.global;\n      var workObj = target.getParameter(\"id\");\n       \n      var filter = {\"layer\":1,\"modelId\":301,\"domains\":workObj};\n       \n      target.getDomainsByFilter(filter,function(returnData){\n          var baseName = [];\n          var mountain = [];\n            for(var i = 0; i < returnData.length;i++) {\n                baseName.push(returnData[i].name)\n                mountain.push(returnData[i].id)\n            }\n            var params = [\"kpi\",{\"isRealTimeData\":true,\"includeInstance\":true,\n            \"nodeIds\":mountain,\"kpiCodes\":[6106]}];\n            target.postService(\"kpiDataFlexService\",\"getKpiValueList\",params,function(returnData){\n                console.info( returnData.data)\n                var data = returnData.data;\n                var synthesize = [];\n                var capacity = [];\n                var big = [];\n                for(var j = 0; j < mountain.length; j++) {\n                    for(var i = 0; i < data.length; i++) {\n                        // \n\n    }\n  }\n}"
                                            },
                                            "style": {
                                              "font-size": "12px"
                                            },
                                            "help": "../pdf/ctrlgroup.pdf",
                                            "parameters": {
                                              "cgroupstyle": "table"
                                            },
                                            "url": "images/map/map1.png"
                                          }
                                        ]
                                      }
                                    ],
                                    "url": "images/map/map1.png"
                                  },
                                  {
                                    "label": "控制板1",
                                    "type": "block",
                                    "source": "BLOCK",
                                    "style": {
                                      "margin": "8px 7px 7px 5px",
                                      "height": "330px"
                                    },
                                    "advance": {
                                      "expression": {}
                                    },
                                    "children": [
                                      {
                                        "type": "column",
                                        "col": 12,
                                        "children": [
                                          {
                                            "label": "文字",
                                            "type": "text",
                                            "source": "TEXT",
                                            "help": "http://localhost/app-free-style/index.html#/help/index%7Ctext/%5B%220%22,%7B%7D%5D",
                                            "style": {
                                              "padding": "5px",
                                              "font-size": "12px",
                                              "font-weight": "bold",
                                              "text-align": "left",
                                              "color": "rgb(255, 255, 255)"
                                            },
                                            "advance": {
                                              "expression": "expression = {\n    on : {\n        init : function(event){\n            var target = event.target;\n            target.setText(\"异常预报分类（当月内）\")\n        }\n    }\n}"
                                            },
                                            "data": {
                                              "modelType": 300,
                                              "resfilltype": "parameter",
                                              "modelDisable": true
                                            },
                                            "url": "images/map/map1.png"
                                          },
                                          {
                                            "label": "SVG视图",
                                            "type": "svgchart",
                                            "source": "SVGCHART",
                                            "advance": {
                                              "expression": "expression = {\n  \"on\" : {\n    \"init\" : function(event){\n      var  target = event.target;\n      \n      \n       var workObj = target.getParameter(\"id\");\n        //515445641576272\n        // 
                                            },
                                            "style": {
                                              "font-size": "12px",
                                              "height": "280px"
                                            },
                                            "parameters": {},
                                            "url": "images/map/map1.png"
                                          }
                                        ]
                                      }
                                    ],
                                    "parameters": {}
                                  }
                                ],
                                "col": 4
                              }
                            ],
                            "advance": {
                              "expression": "{\n\t\"on\" : {\n    \"click\" : function(event){\n      var ticketNo = event.data.values.ticketNo;\n      event.tools.location.href='../../app-oc/index.html#/workOrderTimeLine/'+ ticketNo;\n     }\n  },  \n  \"format\" : [\n    {\n      \"name\": \"工单号\",\n      \"value\": \"{item:ticketNo}\",\n      \"type\": \"text\"\n    },\n    {\n      \"name\": \"内容\",\n      \"value\": \"{item:message}\",\n      \"type\": \"text\"\n    },\n    {\n      \"name\": \"紧急度\",\n      \"value\": \"{item:priorityCode}\",\n      \"type\": \"priority\"\n    }\n  ]\n}"
                            }
                          }
                        ]
                      }
                    ],
                    "url": "images/map/map1.png"
                  }
                ]
              }
            ]
          }
        ],
        "col": 12
      },
      "id": "4",
      "$$hashKey": "object:1364"
    },
    {
      "label": "虚拟大设备(层流和粗轧)",
      "path": "virtual",
      "layout": {
        "type": "column",
        "children": [
          {
            "label": "控制板1",
            "type": "block",
            "source": "BLOCK",
            "style": {
              "padding": "10px",
              "margin": "5px",
              "border": "0",
              "box-shadow": "0px 0px 0px 0px rgba(0,0,0,0)",
              "background-color": "rgba(250,250,250,0)"
            },
            "advance": {
              "expression": "expression = {\n    on : {\n        init : function(event){\n            var target = event.target;\n        }\n    }\n}"
            },
            "children": [
              {
                "type": "column",
                "col": 12,
                "children": [
                  {
                    "type": "row",
                    "source": "ROW",
                    "parameters": {
                      "alignment": "bootstrap"
                    },
                    "style": {},
                    "children": [
                      {
                        "type": "column",
                        "children": [
                          {
                            "label": "数结构导航",
                            "type": "navitree",
                            "source": "NAVITREE",
                            "advance": {
                              "expression": ""
                            }
                          }
                        ],
                        "col": 8
                      },
                      {
                        "type": "column",
                        "children": [
                          {
                            "label": "控件组",
                            "type": "ctrlgroup",
                            "source": "CTRLGROUP",
                            "advance": {
                              "expression": "expression = {\n  on : {\n    init : function(event){\n      var target = event.target;\n      var global = event.global;\n      var ctrlGroups = [\n       [{\n          type : \"clock\",\n          icon : \"glyphicon glyphicon-search\",\n          value : function(time){\n              return \"当前时间 ： \" + time\n          },\n          btnclass : \"btn btn-primary\",\n          class : \"col-md-12\",\n          style : {\n              \"float\" : \"right\",\n              \"font-weight\" : \"bold\"\n          }\n        }]\n      ];\n      event.target.render(ctrlGroups);\n    }\n  }\n}"
                            },
                            "style": {
                              "margin": "5px",
                              "font-size": "14px",
                              "font-weight": "bold"
                            },
                            "help": "../pdf/ctrlgroup.pdf",
                            "url": "images/map/map1.png",
                            "parameters": {
                              "cgroupstyle": "table"
                            }
                          }
                        ],
                        "col": 4
                      }
                    ],
                    "advance": {
                      "expression": "expression = {\n  \"on\" : {\n    \"init\" : function(event){\n      var target = event.target;\n      var role = target.getValue(\"global/ROLE\");\n      if(role != 4){\n          target.setDimension([0,0]);\n      }\n    }\n  }\n};"
                    }
                  },
                  {
                    "label": "控制板1",
                    "type": "block",
                    "source": "BLOCK",
                    "style": {
                      "padding": "0px",
                      "margin": "0px",
                      "border": "0",
                      "box-shadow": "0px 0px 0px 0px rgba(0,0,0,0)",
                      "background-color": "rgba(250,250,250,0)"
                    },
                    "children": [
                      {
                        "type": "column",
                        "col": 12,
                        "children": [
                          {
                            "type": "row",
                            "source": "ROW",
                            "parameters": {
                              "alignment": "bootstrap"
                            },
                            "style": {},
                            "children": [
                              {
                                "type": "column",
                                "children": [
                                  {
                                    "label": "控制板1",
                                    "type": "block",
                                    "source": "BLOCK",
                                    "style": {
                                      "padding": "5px",
                                      "overflow": "hidden",
                                      "background-color": "#04131e",
                                      "border": "0",
                                      "height": "calc( 100vh - 160px)"
                                    },
                                    "advance": {
                                      "expression": "expression = {\n  \"on\" : {\n    \"init\" : function(event){\n      var target = event.target;\n    }\n  }\n};"
                                    },
                                    "children": [
                                      {
                                        "type": "column",
                                        "col": 12,
                                        "children": [
                                          {
                                            "label": "控件组",
                                            "type": "ctrlgroup",
                                            "source": "CTRLGROUP",
                                            "advance": {
                                              "expression": "expression = {\n  on : {\n    init : function(event){\n      var target = event.target;\n      var global = event.global;\n      var inp = \"\"\n      var render = function(){\n          var ctrlGroups = [\n           [{\n               type : \"input\",\n               value : inp,\n               class : \"col-md-6\",\n               on : {\n                change : function(elem){\n                  inp = elem.value;\n                }\n              }\n           },{\n              type : \"button\",\n              value : \"搜索\",\n              icon : \"glyphicon glyphicon-search\",\n              btnclass : \"btn btn-primary\",\n              class : \"col-md-5\",\n              on : {\n                click : function(elem){\n                     
                                            },
                                            "style": {
                                              "margin": "5px",
                                              "font-size": "12px"
                                            },
                                            "help": "../pdf/ctrlgroup.pdf",
                                            "parameters": {
                                              "cgroupstyle": "table"
                                            }
                                          },
                                          {
                                            "label": "控制板1",
                                            "type": "block",
                                            "source": "BLOCK",
                                            "style": {
                                              "padding": "0px",
                                              "margin": "0px",
                                              "border": "0",
                                              "box-shadow": "0px 0px 0px 0px rgba(0,0,0,0)",
                                              "background-color": "rgba(250,250,250,0)",
                                              "height": "calc(100vh - 205px)",
                                              "overflow-y": "auto"
                                            },
                                            "advance": {
                                              "expression": {}
                                            },
                                            "children": [
                                              {
                                                "type": "column",
                                                "col": 12,
                                                "children": [
                                                  {
                                                    "label": "数结构目录",
                                                    "type": "treemenu",
                                                    "source": "TREEMENU",
                                                    "advance": {
                                                      "expression": "var expression = {\n  on : {\n    init : function(event){\n      var models = {}\n      var target = event.target;\n      var treeDataMap;\n       var id = target.getParameter(\"id\");\n      target.getDomainAreaLineTree_alertStatus(function(domaintree){\n        domaintree.traverse(function(node){\n          var layer = node.level;\n          node.showfold = true;\n          node.searchable = true;\n          node.folderStyle = 1;\n          node.showDescription = false;\n          node.triggerEvent = \"none\";\n          node.$on(\"statusChanged\", function(nd){\n              var find = treeDataMap.find(function(nd){\n                  return nd.id == node.id;\n              })\n              find.updateNode(node);\n          })\n          node.on = {\n              click : function(node){\n                var path = node.$location;\n                target.navigateTo(\"index\", {\n                  main : [0, path],\n                  id : node.id\n                }, \"self\");\n              }\n            }\n        });\n        treeDataMap = target.render(domaintree);\n        target.on(\"searchtree\", function(str){\n          treeDataMap.search(function(node){\n              return node.label.indexOf(str) != -1;\n          })\n        });\n        treeDataMap.hideRootNode();\n        /**\n        var resource = target.getValue(\"global/resource\");\n        if(!resource){\n          treeDataMap.traverse(function(node){\n            if(!resource && node.category == \"Device\"){\n              resource = node;\n            }\n          });\n          target.setValue(\"global/resource\", resource);\n        };\n        setTimeout(function(){\n            target.setParameter(\"id\", resource.id);\n            target.trigger(\"pathChange\", \"device\");\n        });\n        target.on(\"treeSelect\", function(id){\n            var find = treeDataMap.find(function(node){\n                return node.id == id;\n            }) || {};\n            if(find.setHighlight){\n                find.setHighlight(true);\n            };\n        })*/\n        treeDataMap.traverse(function(node){\n          if(node.level > 2){\n              var find = node.find(function(nd){\n                  return nd.id == id;\n              });\n            if(find){\n                find.setHighlight(true);\n              if(typeof node.open == \"function\"){\n                node.open();\n              };\n            } else {\n              if(typeof node.close == \"function\"){\n                node.close();\n              };\n            }\n          } else {\n            if(typeof node.open == \"function\"){\n              node.open();\n            };\n          }\n          if(node.id == id){\n            if(node.setHighlight){\n              node.setHighlight(true);\n            };\n          }\n        });\n      })\n    }\n  }\n}"
                                                    },
                                                    "style": {
                                                      "padding": "5px",
                                                      "min-height": "100px"
                                                    },
                                                    "parameters": {}
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ],
                                    "url": "images/map/map1.png",
                                    "parameters": {}
                                  }
                                ],
                                "col": 3
                              },
                              {
                                "type": "column",
                                "children": [
                                  {
                                    "label": "控制板1",
                                    "type": "block",
                                    "source": "BLOCK",
                                    "style": {
                                      "padding": "0px",
                                      "margin": "0px",
                                      "border": "0",
                                      "box-shadow": "0px 0px 0px 0px rgba(0,0,0,0)",
                                      "background-color": "rgba(250,250,250,0)",
                                      "height": "calc(100vh - 180px)",
                                      "overflow-y": "auto",
                                      "overflow-x": "hidden"
                                    },
                                    "advance": {
                                      "expression": "{}"
                                    },
                                    "children": [
                                      {
                                        "type": "column",
                                        "col": 12,
                                        "children": [
                                          {
                                            "label": "控制板1",
                                            "type": "block",
                                            "source": "BLOCK",
                                            "style": {
                                              "padding": "5px",
                                              "margin": "5px"
                                            },
                                            "advance": {
                                              "expression": {}
                                            },
                                            "children": [
                                              {
                                                "type": "column",
                                                "col": 12,
                                                "children": [
                                                  {
                                                    "type": "row",
                                                    "source": "ROW",
                                                    "parameters": {
                                                      "alignment": "bootstrap"
                                                    },
                                                    "style": {},
                                                    "children": [
                                                      {
                                                        "type": "column",
                                                        "children": [
                                                          {
                                                            "label": "组态视图",
                                                            "type": "topo",
                                                            "source": "TOPO",
                                                            "advance": {
                                                              "variable": "",
                                                              "expression": "expression = {\n  \"on\" : {\n    \"init\" : function(event){\n      var target = event.target;\n      var id = target.getParameter(\"id\");\n      target.getDomainAreaLineTree_alertStatus(function(domaintree){\n        var find = domaintree.find(function(node){\n          return node.id == id;\n        });\n        if(find){\n          var children = find.getChildren();\n          var viewId = find.$attr(\"view/viewId\");\n          target.getViewById(viewId, function(view){\n            var content = view.content;\n            var json = JSON.parse(content);\n            target.render(json);\n            target.$on(\"$loadCiKpiComplete\", function(cells){\n              //var position = {x:550,y:0};\n              var position = {x:250,y:0};\n              var is = target.createCurrentStatus(find.label, position, find.status);\n              find.$on(\"statusChanged\", function(nd){\n                     is.setAlarmStatus(find.status)\n                  });\n              for(var i in cells){\n                cells[i].attr(\"circle/opacity\", 0);\n                cells[i].attr(\"text/opacity\", 0);\n                cells[i].attr(\"rect/opacity\", 0);\n              }\n              var createAlarm = function(index, node){\n                var cell = cells[index] || {};\n                var position;\n                if(cell){\n                  position = cell.position();\n                } else {\n                  position = {\n                    x : Math.floor(100 + Math.random() * 300),\n                    y : Math.floor(100 + Math.random() * 200)\n                  }\n                }\n                target.createAlarm(node.label, function(ins){\n                  ins.setPos(position);\n                  ins.setAlarmStatus(node.status);\n                  node.$on(\"statusChanged\", function(nd){\n                     ins.setAlarmStatus(node.status);\n                  });\n                  ins.on(\"click\", function(event){\n                       target.createSystemPopupByLocalPath(\"page8\", {\n                         width : \"400px\",\n                         title: node.label,\n                        },node.id);\n                  })\n                });\n              };\n              for(var i in children){\n                createAlarm(i, children[i])\n              }\n            });\n          });\n        }\n\n      });\n    }\n  }\n}"
                                                            },
                                                            "style": {
                                                              "margin": "5px",
                                                              "font-size": "12px",
                                                              "background-repeat": "no-repeat"
                                                            },
                                                            "viewId": 469973748826064,
                                                            "parameters": {},
                                                            "url": "images/map/map1.png"
                                                          }
                                                        ],
                                                        "col": 7
                                                      },
                                                      {
                                                        "type": "column",
                                                        "children": [
                                                          {
                                                            "label": "控制板1",
                                                            "type": "block",
                                                            "source": "BLOCK",
                                                            "style": {
                                                              "margin": "5px",
                                                              "padding": "10px"
                                                            },
                                                            "advance": {
                                                              "expression": {}
                                                            },
                                                            "children": [
                                                              {
                                                                "type": "column",
                                                                "col": 12,
                                                                "children": [
                                                                  {
                                                                    "label": "文字",
                                                                    "type": "text",
                                                                    "source": "TEXT",
                                                                    "help": "http://localhost/app-free-style/index.html#/help/index%7Ctext/%5B%220%22,%7B%7D%5D",
                                                                    "data": {
                                                                      "applied": false,
                                                                      "multipleCi": false,
                                                                      "multipleKpi": false,
                                                                      "resource": [],
                                                                      "modelType": 300,
                                                                      "resfilltype": "parameter",
                                                                      "series": {
                                                                        "manual": "新建文字",
                                                                        "bind": "(function (source){\n  var formatter=function(elem){\n    return elem.value\n   }\n  return source.ci.getSeries(formatter);\n})"
                                                                      },
                                                                      "modelDisable": true
                                                                    },
                                                                    "style": {
                                                                      "margin": "5px",
                                                                      "padding": "0",
                                                                      "font-size": "14px",
                                                                      "font-weight": "bold",
                                                                      "text-align": "left",
                                                                      "color": "rgb(255, 255, 255)"
                                                                    },
                                                                    "advance": {
                                                                      "getfunction": "kpiDataService.getValueList",
                                                                      "category": "ci",
                                                                      "condition": [
                                                                        "kpi",
                                                                        "{object:kpiQueryModel}"
                                                                      ],
                                                                      "expression": "expression = {\n    on : {\n        init : function(event){\n            var target = event.target;\n            target.setText(\"设备状态\")\n        }\n    }\n}"
                                                                    },
                                                                    "parameters": {}
                                                                  },
                                                                  {
                                                                    "label": "控制板1",
                                                                    "type": "block",
                                                                    "source": "BLOCK",
                                                                    "style": {
                                                                      "padding": "0px",
                                                                      "margin": "0px",
                                                                      "border": "0",
                                                                      "box-shadow": "0px 0px 0px 0px rgba(0,0,0,0)",
                                                                      "background-color": "rgba(250,250,250,0)",
                                                                      "height": "555px",
                                                                      "overflow-y": "auto"
                                                                    },
                                                                    "advance": {
                                                                      "expression": {}
                                                                    },
                                                                    "children": [
                                                                      {
                                                                        "type": "column",
                                                                        "col": 12,
                                                                        "children": [
                                                                          {
                                                                            "label": "高级列表",
                                                                            "type": "dataTableAdvance",
                                                                            "source": "DATATABLEADVANCE",
                                                                            "parameters": {
                                                                              "col": 1,
                                                                              "pageSize": 5,
                                                                              "listbottom": "pageOnly"
                                                                            },
                                                                            "advance": {
                                                                              "expression": "expression = {\n  \"on\" : {\n    \"init\" : function(event){\n      var target = event.target;\n      var nodeId = target.getParameter(\"id\");\n      var main = target.getParameter(\"main\");\n      target.getDomainAreaLineTree(function(tree){\n        var find = tree.find(function(node){\n          return node.id == nodeId;\n        });\n        if(find){\n          var children = find.children;\n          var ci = children.map(function(elem){\n            return elem.id;\n          });\n          target.render({\n            pageSize : 1000,\n            data : children,\n            on : {\n              rowClick : function(event){\n                var data = event.row;\n                var find = children.find(function(elem){\n                    return elem.id == data.id;\n                });\n                find.click();\n              }\n            },\n            \"format\" : [\n              {\n                \"name\": \"设备名称\",\n                \"value\": \"label\",\n                \"type\": \"text\"\n              },{\n                \"name\": \"状态\",\n                \"value\": \"status\",\n                \"type\": \"jquery\",\n                \"render\" : function(elem){\n                  var wrap = $(\"<div></div>\");\n                  var circle = $(\"<div></div>\");\n                  //var text = $(\"<div></div>\");\n                  var t = $(\"<div></div>\");\n                  var el = tree.find(function(nd){\n                      return nd.id == elem.id;\n                  })\n                  circle.css(\"width\", \"20px\");\n                  circle.css(\"margin-right\", \"5px\");\n                  circle.css(\"height\", \"20px\");\n                  circle.css(\"border-radius\", \"50%\");\n                  circle.css(\"display\", \"inline-block\");\n                  circle.attr(\"id\", \"circle_\" + elem.id);\n                  circle.css(\"background-color\", target.getAlertColor(elem.status));\n                //   text.css(\"position\", \"relative\");\n                //   text.attr(\"id\", \"text_\" + elem.id);\n                //   text.css(\"display\", \"inline-block\");\n                //   text.css(\"color\", target.getAlertColor(elem.status));\n                //   text.css(\"font-weight\", \"bold\");\n                //   t.attr(\"id\", \"t_\" + elem.id);\n                //   t.text(target.getAlertWord(elem.status));\n                  //text.append(t);\n                  t.css(\"position\", \"absolute\");\n                  t.css(\"top\", \"-20px\");\n                  wrap.append(circle);\n                  //wrap.append(text);\n                  //text.css(\"line-height\", \"20px\");\n                  el.$on(\"statusChanged\", function statusChanged(node){\n                      var circle = $(\"#circle_\" + node.id);\n                    //   var text = $(\"#text_\" + node.id);\n                    //   var text = $(\"#t_\" + node.id);\n                    //   debugger;\n                      circle.css(\"background-color\", target.getAlertColor(node.status));\n                      //text.css(\"color\", target.getAlertColor(node.status));\n                      t.css(\"color\", target.getAlertColor(node.status));\n                      t.text(target.getAlertWord(node.status));\n                  })\n                  return wrap;\n                }\n              },\n            ]\n          })\n        }\n      });\n    }\n  }\n}"
                                                                            },
                                                                            "style": {
                                                                              "margin": "5px",
                                                                              "font-size": "12px"
                                                                            }
                                                                          }
                                                                        ]
                                                                      }
                                                                    ],
                                                                    "parameters": {}
                                                                  }
                                                                ]
                                                              }
                                                            ],
                                                            "url": "images/map/map1.png"
                                                          }
                                                        ],
                                                        "col": 5
                                                      }
                                                    ],
                                                    "url": "images/map/map1.png",
                                                    "advance": {
                                                      "expression": "{\n\t\"on\" : {\n    \"click\" : function(event){\n      var ticketNo = event.data.values.ticketNo;\n      event.tools.location.href='../../app-oc/index.html#/workOrderTimeLine/'+ ticketNo;\n     }\n  },  \n  \"format\" : [\n    {\n      \"name\": \"工单号\",\n      \"value\": \"{item:ticketNo}\",\n      \"type\": \"text\"\n    },\n    {\n      \"name\": \"内容\",\n      \"value\": \"{item:message}\",\n      \"type\": \"text\"\n    },\n    {\n      \"name\": \"紧急度\",\n      \"value\": \"{item:priorityCode}\",\n      \"type\": \"priority\"\n    }\n  ]\n}"
                                                    }
                                                  }
                                                ]
                                              }
                                            ]
                                          },
                                          {
                                            "label": "控制板1",
                                            "type": "block",
                                            "source": "BLOCK",
                                            "style": {
                                              "background-color": "",
                                              "margin": "5px",
                                              "padding": "10px"
                                            },
                                            "advance": {
                                              "expression": {}
                                            },
                                            "children": [
                                              {
                                                "type": "column",
                                                "col": 12,
                                                "children": [
                                                  {
                                                    "label": "文字",
                                                    "type": "text",
                                                    "source": "TEXT",
                                                    "help": "http://localhost/app-free-style/index.html#/help/index%7Ctext/%5B%220%22,%7B%7D%5D",
                                                    "data": {
                                                      "applied": false,
                                                      "multipleCi": false,
                                                      "multipleKpi": false,
                                                      "resource": [],
                                                      "modelType": 300,
                                                      "resfilltype": "parameter",
                                                      "series": {
                                                        "manual": "新建文字",
                                                        "bind": "(function (source){\n  var formatter=function(elem){\n    return elem.value\n   }\n  return source.ci.getSeries(formatter);\n})"
                                                      },
                                                      "modelDisable": true
                                                    },
                                                    "style": {
                                                      "margin": "auto",
                                                      "padding": "0",
                                                      "font-size": "16px",
                                                      "font-weight": "bold",
                                                      "text-align": "left",
                                                      "color": "rgb(255, 255, 255)"
                                                    },
                                                    "advance": {
                                                      "getfunction": "kpiDataService.getValueList",
                                                      "category": "ci",
                                                      "condition": [
                                                        "kpi",
                                                        "{object:kpiQueryModel}"
                                                      ],
                                                      "expression": "expression = {\n    on : {\n        init : function(event){\n            var target = event.target;\n            target.setText(\"报警通知\")\n        }\n    }\n}"
                                                    },
                                                    "parameters": {},
                                                    "echart": {},
                                                    "url": "images/map/map1.png"
                                                  },
                                                  {
                                                    "label": "控制板1",
                                                    "type": "block",
                                                    "source": "BLOCK",
                                                    "style": {
                                                      "padding": "5px",
                                                      "margin": "5px",
                                                      "height": "225px",
                                                      "border": "0",
                                                      "overflow-y": "auto"
                                                    },
                                                    "advance": {
                                                      "expression": {}
                                                    },
                                                    "children": [
                                                      {
                                                        "type": "column",
                                                        "col": 12,
                                                        "children": [
                                                          {
                                                            "label": "高级列表",
                                                            "type": "dataTableAdvance",
                                                            "source": "DATATABLEADVANCE",
                                                            "parameters": {
                                                              "col": 1,
                                                              "pageSize": 5,
                                                              "listbottom": "none"
                                                            },
                                                            "advance": {
                                                              "expression": "expression = {\n  \"theme\" : \"dark\",\n  \"on\" : {\n    \"init\" : function(event){\n      var target = event.target;\n      var projectModel;\n      var projectAttr;\n      var render = function(){\n          var projectId = target.getParameter(\"id\");\n          target.getResourceById(projectId, function(resource){\n              target.queryFromDb({\n                  domain : resource.domains\n              }, function(alerts){\n                 
                                                            },
                                                            "style": {
                                                              "margin": "5px",
                                                              "font-size": "12px"
                                                            },
                                                            "url": "images/map/map1.png"
                                                          }
                                                        ]
                                                      }
                                                    ]
                                                  }
                                                ]
                                              }
                                            ],
                                            "url": "images/map/map1.png",
                                            "parameters": {}
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ],
                                "col": 9
                              }
                            ],
                            "advance": {
                              "expression": "expression = {\n  \"on\" : {\n    \"init\" : function(event){\n      var target = event.target;\n      var role = target.getValue(\"global/ROLE\");\n      if(role != 4){\n          target.setDimension([0,12]);\n      }\n    }\n  }\n};"
                            }
                          }
                        ]
                      }
                    ],
                    "advance": {
                      "expression": {}
                    },
                    "url": "images/map/map1.png"
                  }
                ]
              }
            ],
            "url": "images/map/map1.png",
            "parameters": {}
          }
        ],
        "col": 12,
        "alertParams": {}
      },
      "id": "5",
      "$$hashKey": "object:1810"
    },
    {
      "label": "设备总览",
      "path": "devicegroup",
      "layout": {
        "type": "column",
        "children": [
          {
            "label": "控制板1",
            "type": "block",
            "source": "BLOCK",
            "style": {
              "padding": "10px",
              "margin": "5px",
              "border": "0",
              "box-shadow": "0px 0px 0px 0px rgba(0,0,0,0)",
              "background-color": "rgba(250,250,250,0)"
            },
            "advance": {
              "expression": {}
            },
            "children": [
              {
                "type": "column",
                "col": 12,
                "children": [
                  {
                    "type": "row",
                    "source": "ROW",
                    "parameters": {
                      "alignment": "bootstrap"
                    },
                    "style": {},
                    "children": [
                      {
                        "type": "column",
                        "children": [
                          {
                            "label": "数结构导航",
                            "type": "navitree",
                            "source": "NAVITREE",
                            "advance": {
                              "expression": ""
                            }
                          }
                        ],
                        "col": 8
                      },
                      {
                        "type": "column",
                        "children": [
                          {
                            "label": "控件组",
                            "type": "ctrlgroup",
                            "source": "CTRLGROUP",
                            "advance": {
                              "expression": "expression = {\n  on : {\n    init : function(event){\n      var target = event.target;\n      var global = event.global;\n      var ctrlGroups = [\n       [{\n          type : \"clock\",\n          icon : \"glyphicon glyphicon-search\",\n          value : function(time){\n              return \"当前时间 ： \" + time\n          },\n          btnclass : \"btn btn-primary\",\n          class : \"col-md-12\",\n          style : {\n              \"float\" : \"right\",\n              \"font-weight\" : \"bold\"\n          }\n        }]\n      ];\n      event.target.render(ctrlGroups);\n    }\n  }\n}"
                            },
                            "style": {
                              "margin": "5px",
                              "font-size": "14px",
                              "font-weight": "bold"
                            },
                            "help": "../pdf/ctrlgroup.pdf",
                            "url": "images/map/map1.png",
                            "parameters": {
                              "cgroupstyle": "table"
                            }
                          }
                        ],
                        "col": 4
                      }
                    ],
                    "advance": {
                      "expression": "expression = {\n  \"on\" : {\n    \"init\" : function(event){\n      var target = event.target;\n      var role = target.getValue(\"global/ROLE\");\n      if(role != 4){\n          target.setDimension([0,0]);\n      }\n    }\n  }\n};"
                    }
                  },
                  {
                    "type": "row",
                    "source": "ROW",
                    "parameters": {
                      "alignment": "bootstrap"
                    },
                    "style": {},
                    "children": [
                      {
                        "type": "column",
                        "children": [
                          {
                            "label": "控制板1",
                            "type": "block",
                            "source": "BLOCK",
                            "style": {
                              "padding": "5px",
                              "overflow": "hidden",
                              "background-color": "#04131e",
                              "border": "0",
                              "height": "calc( 100vh - 170px)"
                            },
                            "advance": {
                              "expression": "expression = {\n    on : {\n        init : function(event){\n            var target = event.target;\n        }\n    }\n}"
                            },
                            "children": [
                              {
                                "type": "column",
                                "col": 12,
                                "children": [
                                  {
                                    "label": "控件组",
                                    "type": "ctrlgroup",
                                    "source": "CTRLGROUP",
                                    "advance": {
                                      "expression": "expression = {\n  on : {\n    init : function(event){\n      var target = event.target;\n      var global = event.global;\n      var inp = \"\"\n      var render = function(){\n          var ctrlGroups = [\n           [{\n               type : \"input\",\n               value : inp,\n               class : \"col-md-6\",\n               on : {\n                change : function(elem){\n                  inp = elem.value;\n                }\n              }\n           },{\n              type : \"button\",\n              value : \"搜索\",\n              icon : \"glyphicon glyphicon-search\",\n              btnclass : \"btn btn-primary\",\n              class : \"col-md-5\",\n              on : {\n                click : function(elem){\n                     
                                    },
                                    "style": {
                                      "margin": "5px",
                                      "font-size": "12px"
                                    },
                                    "help": "../pdf/ctrlgroup.pdf",
                                    "parameters": {
                                      "cgroupstyle": "table"
                                    }
                                  },
                                  {
                                    "label": "控制板1",
                                    "type": "block",
                                    "source": "BLOCK",
                                    "style": {
                                      "padding": "0px",
                                      "margin": "0px",
                                      "border": "0",
                                      "box-shadow": "0px 0px 0px 0px rgba(0,0,0,0)",
                                      "background-color": "rgba(250,250,250,0)",
                                      "height": "calc(100vh - 205px)",
                                      "overflow-y": "auto"
                                    },
                                    "advance": {
                                      "expression": {}
                                    },
                                    "children": [
                                      {
                                        "type": "column",
                                        "col": 12,
                                        "children": [
                                          {
                                            "label": "数结构目录",
                                            "type": "treemenu",
                                            "source": "TREEMENU",
                                            "advance": {
                                              "expression": "var expression = {\n  on : {\n    init : function(event){\n      var models = {}\n      var target = event.target;\n      var treeDataMap;\n       var id = target.getParameter(\"id\");\n      target.getDomainAreaLineTree_alertStatus(function(domaintree){\n        domaintree.traverse(function(node){\n          var layer = node.level;\n          node.showfold = true;\n          node.searchable = true;\n          node.folderStyle = 1;\n          node.showDescription = false;\n          node.triggerEvent = \"none\";\n          node.$on(\"statusChanged\", function(nd){\n              var find = treeDataMap.find(function(nd){\n                  return nd.id == node.id;\n              })\n              find.updateNode(node);\n          })\n          node.on = {\n              click : function(node){\n                var path = node.$location;\n                target.navigateTo(\"index\", {\n                  main : [0, path],\n                  id : node.id\n                }, \"self\");\n              }\n            }\n        });\n        treeDataMap = target.render(domaintree);\n        target.on(\"searchtree\", function(str){\n          treeDataMap.search(function(node){\n              return node.label.indexOf(str) != -1;\n          })\n        });\n        treeDataMap.hideRootNode();\n        /**\n        var resource = target.getValue(\"global/resource\");\n        if(!resource){\n          treeDataMap.traverse(function(node){\n            if(!resource && node.category == \"Device\"){\n              resource = node;\n            }\n          });\n          target.setValue(\"global/resource\", resource);\n        };\n        setTimeout(function(){\n            target.setParameter(\"id\", resource.id);\n            target.trigger(\"pathChange\", \"device\");\n        });\n        target.on(\"treeSelect\", function(id){\n            var find = treeDataMap.find(function(node){\n                return node.id == id;\n            }) || {};\n            if(find.setHighlight){\n                find.setHighlight(true);\n            };\n        })*/\n        treeDataMap.traverse(function(node){\n          if(node.level > 2){\n              var find = node.find(function(nd){\n                  return nd.id == id;\n              });\n            if(find){\n                find.setHighlight(true);\n              if(typeof node.open == \"function\"){\n                node.open();\n              };\n            } else {\n              if(typeof node.close == \"function\"){\n                node.close();\n              };\n            }\n          } else {\n            if(typeof node.open == \"function\"){\n              node.open();\n            };\n          }\n          if(node.id == id){\n            if(node.setHighlight){\n              node.setHighlight(true);\n            };\n          }\n        });\n      })\n    }\n  }\n}"
                                            },
                                            "style": {
                                              "padding": "5px",
                                              "min-height": "100px"
                                            },
                                            "parameters": {}
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              }
                            ],
                            "url": "images/map/map1.png",
                            "parameters": {}
                          }
                        ],
                        "col": 2
                      },
                      {
                        "type": "column",
                        "children": [
                          {
                            "label": "控制板1",
                            "type": "block",
                            "source": "BLOCK",
                            "style": {
                              "padding": "0px",
                              "margin": "0px",
                              "border": "0",
                              "box-shadow": "0px 0px 0px 0px rgba(0,0,0,0)",
                              "background-color": "rgba(250,250,250,0)",
                              "height": "calc(100vh - 180px)",
                              "overflow-y": "auto",
                              "overflow-x": "hidden"
                            },
                            "advance": {
                              "expression": {}
                            },
                            "children": [
                              {
                                "type": "column",
                                "col": 12,
                                "children": [
                                  {
                                    "label": "控制板1",
                                    "type": "block",
                                    "source": "BLOCK",
                                    "style": {
                                      "padding": "10px",
                                      "margin": "5px",
                                      "border": "0",
                                      "box-shadow": "0px 0px 0px 0px rgba(0,0,0,0)",
                                      "background-color": "rgba(250,250,250,0)"
                                    },
                                    "children": [
                                      {
                                        "type": "column",
                                        "col": 12,
                                        "children": [
                                          {
                                            "label": "控制板1",
                                            "type": "block",
                                            "source": "BLOCK",
                                            "style": {
                                              "padding": "5px",
                                              "margin": "5px"
                                            },
                                            "advance": {
                                              "expression": {}
                                            },
                                            "children": [
                                              {
                                                "type": "column",
                                                "col": 12,
                                                "children": [
                                                  {
                                                    "type": "row",
                                                    "source": "ROW",
                                                    "parameters": {
                                                      "alignment": "bootstrap"
                                                    },
                                                    "style": {},
                                                    "children": [
                                                      {
                                                        "type": "column",
                                                        "children": [
                                                          {
                                                            "label": "组态视图",
                                                            "type": "topo",
                                                            "source": "TOPO",
                                                            "advance": {
                                                              "variable": "",
                                                              "expression": "expression = {\n  \"on\": {\n    \"init\": function(event) {\n      var target = event.target;\n      var id = target.getParameter(\"id\");\n      target.getDomainAreaLineTree_alertStatus(function(domaintree) {\n        var find = domaintree.find(function(node) {\n          return node.id == id;\n        });\n        if(find) {\n          var children = find.getChildren();\n          var viewId = find.$attr(\"view/viewId\");\n          target.getViewById(viewId, function(view) {\n            var content = view.content;\n            var json = JSON.parse(content);\n            target.render(json);\n            target.on(\"$loadCiKpiComplete\", function(cells) {\n              \n              var position = {\n                x: 250,\n                y: 0\n              };\n              //创建的是组态视图中间的告警栏\n              var is = target.createCurrentStatus(find.label, position, find.status);\n              find.$on(\"statusChanged\", function(nd) {\n                is.setAlarmStatus(find.status)\n              });\n              for(var i in cells) {\n                cells[i].attr(\"circle/opacity\", 0);\n                cells[i].attr(\"text/opacity\", 0);\n                cells[i].attr(\"rect/opacity\", 0);\n                cells[i].attr(\".connection/stroke\", \"#1f8fd8\");\n                cells[i].attr(\".connection/stroke-width\", 2);\n                cells[i].attr(\".marker-target/visibility\", \"hidden\");\n              }\n              \n              var createAlarm = function(index, node) {\n                var cell = cells.find(function(c) {\n                  return c.attr(\"text/text\") == node.label;\n                });\n                var position;\n                if(cell) {\n\n                  position = cell.position();\n\n                  target.createAlarm(node.label, function(ins) {\n                    ins.setPos(position);\n                    ins.setAlarmStatus(node.status);\n                    node.$on(\"statusChanged\", function(nd) {\n                      ins.setAlarmStatus(node.status);\n                    });\n\n                    ins.on(\"textClick\", function(event) {\n\n                      var find = children.find(function(elem) {\n                        return elem.id == node.id;\n                      });\n                      find.click();\n\n                    })\n\n                    ins.on(\"click\", function(event) {\n                      target.createCurrentStatusByItem(node.id, position);\n                      return;\n                      // target.createSystemPopupByLocalPath(\"page8\", {\n                      //          width : \"400px\",\n                      //          title: node.label,\n                      //         },node.id);\n\n                    })\n                  });\n                } else {\n                  position = {\n                    x: Math.floor(100 + Math.random() * 300),\n                    y: Math.floor(100 + Math.random() * 200)\n                  }\n                };\n              };\n              for(var i in children) {\n                createAlarm(i, children[i])\n              }\n            });\n          });\n        }\n\n      });\n    }\n  }\n}"
                                                            },
                                                            "style": {
                                                              "font-size": "12px",
                                                              "background-repeat": "no-repeat"
                                                            },
                                                            "viewId": 469973748826064,
                                                            "parameters": {},
                                                            "url": "images/map/map1.png"
                                                          }
                                                        ],
                                                        "col": 7
                                                      },
                                                      {
                                                        "type": "column",
                                                        "children": [
                                                          {
                                                            "label": "控制板1",
                                                            "type": "block",
                                                            "source": "BLOCK",
                                                            "style": {
                                                              "margin": "5px",
                                                              "padding": "10px",
                                                              "height": "600px",
                                                              "overflow-y": "scroll"
                                                            },
                                                            "advance": {
                                                              "expression": {}
                                                            },
                                                            "children": [
                                                              {
                                                                "type": "column",
                                                                "col": 12,
                                                                "children": [
                                                                  {
                                                                    "label": "文字",
                                                                    "type": "text",
                                                                    "source": "TEXT",
                                                                    "help": "http://localhost/app-free-style/index.html#/help/index%7Ctext/%5B%220%22,%7B%7D%5D",
                                                                    "data": {
                                                                      "applied": false,
                                                                      "multipleCi": false,
                                                                      "multipleKpi": false,
                                                                      "resource": [],
                                                                      "modelType": 300,
                                                                      "resfilltype": "parameter",
                                                                      "series": {
                                                                        "manual": "新建文字",
                                                                        "bind": "(function (source){\n  var formatter=function(elem){\n    return elem.value\n   }\n  return source.ci.getSeries(formatter);\n})"
                                                                      },
                                                                      "modelDisable": true
                                                                    },
                                                                    "style": {
                                                                      "margin": "5px",
                                                                      "padding": "0",
                                                                      "font-size": "14px",
                                                                      "font-weight": "bold",
                                                                      "text-align": "left",
                                                                      "color": "rgb(255, 255, 255)"
                                                                    },
                                                                    "advance": {
                                                                      "getfunction": "kpiDataService.getValueList",
                                                                      "category": "ci",
                                                                      "condition": [
                                                                        "kpi",
                                                                        "{object:kpiQueryModel}"
                                                                      ],
                                                                      "expression": "expression = {\n    on : {\n        init : function(event){\n            var target = event.target;\n            target.setText(\"设备状态\")\n        }\n    }\n}"
                                                                    },
                                                                    "parameters": {}
                                                                  },
                                                                  {
                                                                    "label": "高级列表",
                                                                    "type": "dataTableAdvance",
                                                                    "source": "DATATABLEADVANCE",
                                                                    "parameters": {
                                                                      "col": 1,
                                                                      "pageSize": 5,
                                                                      "listbottom": "none"
                                                                    },
                                                                    "advance": {
                                                                      "expression": "expression = {\n  \"on\" : {\n    \"init\" : function(event){\n      var target = event.target;\n      var nodeId = target.getParameter(\"id\");\n      var main = target.getParameter(\"main\");\n      target.getDomainAreaLineTree(function(tree){\n        var find = tree.find(function(node){\n          return node.id == nodeId;\n        });\n        if(find){\n          var children = find.children;\n          // n  }\n}"
                                                                    },
                                                                    "style": {
                                                                      "margin": "5px",
                                                                      "font-size": "12px"
                                                                    },
                                                                    "url": "images/map/map1.png"
                                                                  }
                                                                ]
                                                              }
                                                            ],
                                                            "url": "images/map/map1.png",
                                                            "parameters": {}
                                                          }
                                                        ],
                                                        "col": 5
                                                      }
                                                    ],
                                                    "url": "images/map/map1.png",
                                                    "advance": {
                                                      "expression": "{\n\t\"on\" : {\n    \"click\" : function(event){\n      var ticketNo = event.data.values.ticketNo;\n      event.tools.location.href='../../app-oc/index.html#/workOrderTimeLine/'+ ticketNo;\n     }\n  },  \n  \"format\" : [\n    {\n      \"name\": \"工单号\",\n      \"value\": \"{item:ticketNo}\",\n      \"type\": \"text\"\n    },\n    {\n      \"name\": \"内容\",\n      \"value\": \"{item:message}\",\n      \"type\": \"text\"\n    },\n    {\n      \"name\": \"紧急度\",\n      \"value\": \"{item:priorityCode}\",\n      \"type\": \"priority\"\n    }\n  ]\n}"
                                                    }
                                                  }
                                                ]
                                              }
                                            ]
                                          },
                                          {
                                            "label": "控制板1",
                                            "type": "block",
                                            "source": "BLOCK",
                                            "style": {
                                              "background-color": "",
                                              "margin": "5px",
                                              "padding": "10px"
                                            },
                                            "advance": {
                                              "expression": {}
                                            },
                                            "children": [
                                              {
                                                "type": "column",
                                                "col": 12,
                                                "children": [
                                                  {
                                                    "label": "文字",
                                                    "type": "text",
                                                    "source": "TEXT",
                                                    "help": "http://localhost/app-free-style/index.html#/help/index%7Ctext/%5B%220%22,%7B%7D%5D",
                                                    "data": {
                                                      "applied": false,
                                                      "multipleCi": false,
                                                      "multipleKpi": false,
                                                      "resource": [],
                                                      "modelType": 300,
                                                      "resfilltype": "parameter",
                                                      "series": {
                                                        "manual": "新建文字",
                                                        "bind": "(function (source){\n  var formatter=function(elem){\n    return elem.value\n   }\n  return source.ci.getSeries(formatter);\n})"
                                                      },
                                                      "modelDisable": true
                                                    },
                                                    "style": {
                                                      "margin": "auto",
                                                      "padding": "0",
                                                      "font-size": "16px",
                                                      "font-weight": "bold",
                                                      "text-align": "left",
                                                      "color": "rgb(255, 255, 255)"
                                                    },
                                                    "advance": {
                                                      "getfunction": "kpiDataService.getValueList",
                                                      "category": "ci",
                                                      "condition": [
                                                        "kpi",
                                                        "{object:kpiQueryModel}"
                                                      ],
                                                      "expression": "expression = {\n    on : {\n        init : function(event){\n            var target = event.target;\n            target.setText(\"报警通知\")\n        }\n    }\n}"
                                                    },
                                                    "parameters": {},
                                                    "echart": {},
                                                    "url": "images/map/map1.png"
                                                  },
                                                  {
                                                    "label": "控制板1",
                                                    "type": "block",
                                                    "source": "BLOCK",
                                                    "style": {
                                                      "padding": "5px",
                                                      "margin": "5px",
                                                      "border": "0",
                                                      "height": "225px",
                                                      "overflow-y": "scroll"
                                                    },
                                                    "advance": {
                                                      "expression": {}
                                                    },
                                                    "children": [
                                                      {
                                                        "type": "column",
                                                        "col": 12,
                                                        "children": [
                                                          {
                                                            "label": "高级列表",
                                                            "type": "dataTableAdvance",
                                                            "source": "DATATABLEADVANCE",
                                                            "parameters": {
                                                              "col": 1,
                                                              "pageSize": 5,
                                                              "listbottom": "none"
                                                            },
                                                            "advance": {
                                                              "expression": "expression = {\n  \"theme\" : \"dark\",\n  \"on\" : {\n    \"init\" : function(event){\n      var target = event.target;\n      var projectModel;\n      var projectAttr;\n      var render = function(){\n        var projectId = target.getParameter(\"id\");\n        target.getResourceById(projectId, function(resource){\n          target.queryFromDb({\n            domain : resource.domains\n          }, function(alerts){\n            var alertsDevice = [];\n            for(var i = 0; i < alerts.length; i++ ) {\n              if(alerts[i].state == 0 || alerts[i].state == 5 || alerts[i].state == 10) {\n                  if(alerts[i].severity != -1) {\n                      alertsDevice.push(alerts[i]) \n                  }\n               \n              }\n            }\n            target.setValue(\"device/alerts\",alertsDevice.map(function(alert){\n              alert.label = alert.devName + \"(\" + alert.message + \")\";\n              alert.valueStr = target.getAlertWord(alert.severity);\n              alert.status = alert.severity;\n              return alert;\n            }));\n            target.render({\n              data : alertsDevice,\n              format : [\n                {\n                  \"name\": \"设备名称\",\n                  \"value\": \"devName\",\n                  \"type\": \"text\",\n                  //\"width\" : 300\n                },  {\n                \"name\": \"报警来源\",\n                 \"value\": \"appName\",\n                \"type\": \"text\",\n                //\"width\" : 300\n                \"format\":function (elem) {\n                    if(elem == 1){\n                    return \"在线预警\";\n                    }else if(elem == 2){\n                      return \"智能诊断\";\n                    }else if(elem == 3){\n                    return \"大数据分析\";\n                    } else {\n                    return \"离线诊断\";\n                    }\n              }\n            }, {\n                  \"name\": \"报警消息\",\n                  \"value\": \"message\",\n                  \"type\": \"text\",\n                  \"style\":{\n                     \"white-space\" : \"pre-wrap\"\n                  }\n                },{\n                  \"name\": \"报警级别\",\n                  \"type\":\"priority\",\n                  \"value\" : \"severity\",\n                  \"format\":function (elem) {\n                     
                                                            },
                                                            "style": {
                                                              "margin": "5px",
                                                              "font-size": "12px"
                                                            },
                                                            "url": "images/map/map1.png"
                                                          }
                                                        ]
                                                      }
                                                    ],
                                                    "parameters": {}
                                                  }
                                                ]
                                              }
                                            ],
                                            "url": "images/map/map1.png",
                                            "parameters": {}
                                          }
                                        ]
                                      }
                                    ],
                                    "advance": {
                                      "expression": {}
                                    },
                                    "url": "images/map/map1.png"
                                  }
                                ]
                              }
                            ],
                            "parameters": {}
                          }
                        ],
                        "col": 10
                      }
                    ],
                    "advance": {
                      "expression": "expression = {\n  \"on\" : {\n    \"init\" : function(event){\n      var target = event.target;\n      var role = target.getValue(\"global/ROLE\");\n      if(role != 4){\n          target.setDimension([0,12]);\n      }\n    }\n  }\n};"
                    }
                  }
                ]
              }
            ],
            "url": "images/map/map1.png",
            "parameters": {}
          }
        ],
        "col": 12,
        "alertParams": {}
      },
      "id": "6",
      "$$hashKey": "object:1904"
    },
    {
      "label": "电机",
      "path": "motor",
      "layout": {
        "type": "column",
        "children": [
          {
            "label": "控制板1",
            "type": "block",
            "source": "BLOCK",
            "style": {
              "padding": "8px",
              "margin": "5px"
            },
            "advance": {
              "expression": {}
            },
            "children": [
              {
                "type": "column",
                "col": 12,
                "children": [
                  {
                    "type": "row",
                    "source": "ROW",
                    "parameters": {
                      "alignment": "bootstrap"
                    },
                    "style": {},
                    "children": [
                      {
                        "type": "column",
                        "children": [
                          {
                            "label": "数结构导航",
                            "type": "navitree",
                            "source": "NAVITREE",
                            "advance": {
                              "expression": ""
                            }
                          }
                        ],
                        "col": 8
                      },
                      {
                        "type": "column",
                        "children": [
                          {
                            "label": "控件组",
                            "type": "ctrlgroup",
                            "source": "CTRLGROUP",
                            "advance": {
                              "expression": "expression = {\n  on : {\n    init : function(event){\n      var target = event.target;\n      var global = event.global;\n      var ctrlGroups = [\n       [{\n          type : \"clock\",\n          icon : \"glyphicon glyphicon-search\",\n          value : function(time){\n              return \"当前时间 ： \" + time\n          },\n          btnclass : \"btn btn-primary\",\n          class : \"col-md-12\",\n          style : {\n              \"float\" : \"right\",\n              \"font-weight\" : \"bold\"\n          }\n        }]\n      ];\n      event.target.render(ctrlGroups);\n    }\n  }\n}"
                            },
                            "style": {
                              "margin": "5px",
                              "font-size": "14px",
                              "font-weight": "bold"
                            },
                            "help": "../pdf/ctrlgroup.pdf",
                            "url": "images/map/map1.png",
                            "parameters": {
                              "cgroupstyle": "table"
                            }
                          }
                        ],
                        "col": 4
                      }
                    ],
                    "advance": {
                      "expression": "expression = {\n  \"on\" : {\n    \"init\" : function(event){\n      var target = event.target;\n      var role = target.getValue(\"global/ROLE\");\n      if(role != 4){\n          target.setDimension([0,0]);\n      }\n    }\n  }\n};"
                    }
                  },
                  {
                    "type": "row",
                    "source": "ROW",
                    "parameters": {
                      "alignment": "bootstrap"
                    },
                    "style": {},
                    "children": [
                      {
                        "type": "column",
                        "children": [
                          {
                            "label": "控制板1",
                            "type": "block",
                            "source": "BLOCK",
                            "style": {
                              "padding": "5px",
                              "overflow": "hidden",
                              "background-color": "#04131e",
                              "border": "0",
                              "height": "calc( 100vh - 160px)"
                            },
                            "advance": {
                              "expression": "{}"
                            },
                            "children": [
                              {
                                "type": "column",
                                "col": 12,
                                "children": [
                                  {
                                    "label": "控件组",
                                    "type": "ctrlgroup",
                                    "source": "CTRLGROUP",
                                    "advance": {
                                      "expression": "expression = {\n  on : {\n    init : function(event){\n      var target = event.target;\n      var global = event.global;\n      var inp = \"\"\n      var render = function(){\n          var ctrlGroups = [\n           [{\n               type : \"input\",\n               value : inp,\n               class : \"col-md-6\",\n               on : {\n                change : function(elem){\n                  inp = elem.value;\n                }\n              }\n           },{\n              type : \"button\",\n              value : \"搜索\",\n              icon : \"glyphicon glyphicon-search\",\n              btnclass : \"btn btn-primary\",\n              class : \"col-md-5\",\n              on : {\n                click : function(elem){\n                     
                                    },
                                    "style": {
                                      "margin": "5px",
                                      "font-size": "12px"
                                    },
                                    "help": "../pdf/ctrlgroup.pdf",
                                    "parameters": {
                                      "cgroupstyle": "table"
                                    }
                                  },
                                  {
                                    "label": "控制板1",
                                    "type": "block",
                                    "source": "BLOCK",
                                    "style": {
                                      "padding": "0px",
                                      "margin": "0px",
                                      "border": "0",
                                      "box-shadow": "0px 0px 0px 0px rgba(0,0,0,0)",
                                      "background-color": "rgba(250,250,250,0)",
                                      "height": "calc(100vh - 205px)",
                                      "overflow-y": "auto"
                                    },
                                    "advance": {
                                      "expression": {}
                                    },
                                    "children": [
                                      {
                                        "type": "column",
                                        "col": 12,
                                        "children": [
                                          {
                                            "label": "数结构目录",
                                            "type": "treemenu",
                                            "source": "TREEMENU",
                                            "advance": {
                                              "expression": "var expression = {\n  on : {\n    init : function(event){\n      var models = {}\n      var target = event.target;\n      var treeDataMap;\n       var id = target.getParameter(\"id\");\n      target.getDomainAreaLineTree_alertStatus(function(domaintree){\n        domaintree.traverse(function(node){\n          var layer = node.level;\n          node.showfold = true;\n          node.searchable = true;\n          node.folderStyle = 1;\n          node.showDescription = false;\n          node.triggerEvent = \"none\";\n          node.$on(\"statusChanged\", function(nd){\n              var find = treeDataMap.find(function(nd){\n                  return nd.id == node.id;\n              })\n              find.updateNode(node);\n          })\n          node.on = {\n              click : function(node){\n                var path = node.$location;\n                target.navigateTo(\"index\", {\n                  main : [0, path],\n                  id : node.id\n                }, \"self\");\n              }\n            }\n        });\n        treeDataMap = target.render(domaintree);\n        target.on(\"searchtree\", function(str){\n          treeDataMap.search(function(node){\n              return node.label.indexOf(str) != -1;\n          })\n        });\n        treeDataMap.hideRootNode();\n        /**\n        var resource = target.getValue(\"global/resource\");\n        if(!resource){\n          treeDataMap.traverse(function(node){\n            if(!resource && node.category == \"Device\"){\n              resource = node;\n            }\n          });\n          target.setValue(\"global/resource\", resource);\n        };\n        setTimeout(function(){\n            target.setParameter(\"id\", resource.id);\n            target.trigger(\"pathChange\", \"device\");\n        });\n        target.on(\"treeSelect\", function(id){\n            var find = treeDataMap.find(function(node){\n                return node.id == id;\n            }) || {};\n            if(find.setHighlight){\n                find.setHighlight(true);\n            };\n        })*/\n        treeDataMap.traverse(function(node){\n          if(node.level > 2){\n              var find = node.find(function(nd){\n                  return nd.id == id;\n              });\n            if(find){\n                find.setHighlight(true);\n              if(typeof node.open == \"function\"){\n                node.open();\n              };\n            } else {\n              if(typeof node.close == \"function\"){\n                node.close();\n              };\n            }\n          } else {\n            if(typeof node.open == \"function\"){\n              node.open();\n            };\n          }\n          if(node.id == id){\n            if(node.setHighlight){\n              node.setHighlight(true);\n            };\n          }\n        });\n      })\n    }\n  }\n}"
                                            },
                                            "style": {
                                              "padding": "5px",
                                              "min-height": "100px"
                                            },
                                            "parameters": {}
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              }
                            ],
                            "url": "images/map/map1.png",
                            "parameters": {}
                          }
                        ],
                        "col": 3
                      },
                      {
                        "type": "column",
                        "children": [
                          {
                            "label": "控制板1",
                            "type": "block",
                            "source": "BLOCK",
                            "style": {
                              "padding": "0px",
                              "margin": "0px",
                              "border": "0",
                              "box-shadow": "0px 0px 0px 0px rgba(0,0,0,0)",
                              "background-color": "rgba(250,250,250,0)",
                              "height": "calc(100vh - 180px)",
                              "overflow-y": "auto",
                              "overflow-x": "hidden"
                            },
                            "advance": {
                              "expression": {}
                            },
                            "children": [
                              {
                                "type": "column",
                                "col": 12,
                                "children": [
                                  {
                                    "label": "控制板1",
                                    "type": "block",
                                    "source": "BLOCK",
                                    "style": {
                                      "padding": "0px",
                                      "margin": "0px",
                                      "box-shadow": "0px 0px 0px 0px rgba(0,0,0,0)",
                                      "background-color": "rgba(250,250,250,0)",
                                      "border": "0"
                                    },
                                    "children": [
                                      {
                                        "type": "column",
                                        "col": 12,
                                        "children": [
                                          {
                                            "label": "控制板1",
                                            "type": "block",
                                            "source": "BLOCK",
                                            "style": {
                                              "padding": "5px",
                                              "margin": "5px"
                                            },
                                            "advance": {
                                              "expression": {}
                                            },
                                            "children": [
                                              {
                                                "type": "column",
                                                "col": 12,
                                                "children": [
                                                  {
                                                    "type": "row",
                                                    "source": "ROW",
                                                    "parameters": {
                                                      "alignment": "bootstrap"
                                                    },
                                                    "style": {},
                                                    "children": [
                                                      {
                                                        "type": "column",
                                                        "children": [
                                                          {
                                                            "label": "控制板1",
                                                            "type": "block",
                                                            "source": "BLOCK",
                                                            "style": {
                                                              "padding": "5px",
                                                              "margin": "5px",
                                                              "border": "0px"
                                                            },
                                                            "advance": {
                                                              "expression": {}
                                                            },
                                                            "children": [
                                                              {
                                                                "type": "column",
                                                                "col": 12,
                                                                "children": [
                                                                  {
                                                                    "label": "组态视图",
                                                                    "type": "topo",
                                                                    "source": "TOPO",
                                                                    "advance": {
                                                                      "variable": "",
                                                                      "expression": "expression = {\n  \"on\" : {\n    \"init\" : function(event){\n      var target = event.target;\n      var id = target.getParameter(\"id\");\n      target.getDomainAreaLineTree_alertStatus(function(domaintree){\n        var find = domaintree.find(function(node){\n          return node.id == id;\n        });\n        if(find){\n          var children = find.getChildren();\n          debugger;\n          var viewId = find.$attr(\"view/viewId\");\n          if(!viewId){\n              viewId = find.$attr(\"_view/viewId\");\n          }\n          target.getViewById(viewId, function(view){\n            var content = view.content;\n            var json = JSON.parse(content);\n            target.render(json);\n            target.on(\"$loadCiKpiComplete\", function(cells){\n                var position = {x:90,y:0};\n                 var is = target.createCurrentStatus(find.label, position, find.status);\n                find.$on(\"statusChanged\", function(nd){\n                     is.setAlarmStatus(find.status)\n                  });\n              for(var i in cells){\n                cells[i].attr(\"circle/opacity\", 0);\n                cells[i].attr(\"text/opacity\", 0);\n                cells[i].attr(\"rect/opacity\", 0);\n              }\n              var createAlarm = function(index, node){\n                var cell = cells[index] || {};\n                var position;\n                if(cell){\n                  position = cell.position();\n                } else {\n                  position = {\n                    x : Math.floor(100 + Math.random() * 300),\n                    y : Math.floor(100 + Math.random() * 200)\n                  }\n                }\n                target.createAlarm(node.label, function(ins){\n                  ins.setPos(position);\n                  ins.on(\"click\", function(event){\n                       target.createSystemPopupByLocalPath(\"page8\", {\n                         width : \"400px\",\n                         title: node.label,\n                        },node.id);\n                  })\n                });\n              };\n              for(var i in children){\n                createAlarm(i, children[i])\n              }\n            });\n          });\n        }\n      });\n    }\n  }\n}"
                                                                    },
                                                                    "style": {
                                                                      "margin": "5px",
                                                                      "font-size": "12px",
                                                                      "background-repeat": "no-repeat"
                                                                    },
                                                                    "viewId": 469973748826064,
                                                                    "parameters": {},
                                                                    "url": "images/map/map1.png"
                                                                  }
                                                                ]
                                                              }
                                                            ]
                                                          }
                                                        ],
                                                        "col": 4
                                                      },
                                                      {
                                                        "type": "column",
                                                        "children": [
                                                          {
                                                            "label": "控制板1",
                                                            "type": "block",
                                                            "source": "BLOCK",
                                                            "style": {
                                                              "padding": "5px",
                                                              "margin": "5px",
                                                              "border": "0",
                                                              "border-left": "1px solid #25729D",
                                                              "height": "450px"
                                                            },
                                                            "advance": {
                                                              "expression": {}
                                                            },
                                                            "children": [
                                                              {
                                                                "type": "column",
                                                                "col": 12,
                                                                "children": [
                                                                  {
                                                                    "label": "文字",
                                                                    "type": "text",
                                                                    "source": "TEXT",
                                                                    "help": "http://localhost/app-free-style/index.html#/help/index%7Ctext/%5B%220%22,%7B%7D%5D",
                                                                    "style": {
                                                                      "margin": "5px",
                                                                      "padding": "0",
                                                                      "font-size": "15px",
                                                                      "font-weight": "bold",
                                                                      "color": "rgb(255, 255, 255)"
                                                                    },
                                                                    "advance": {
                                                                      "expression": "expression = {\n    on : {\n        init : function(event){\n            var target = event.target;\n            target.setText(\"电机电流趋势\")\n        }\n    }\n}"
                                                                    },
                                                                    "data": {
                                                                      "modelType": 300,
                                                                      "resfilltype": "parameter",
                                                                      "modelDisable": true
                                                                    },
                                                                    "parameters": {}
                                                                  },
                                                                  {
                                                                    "label": "高级视图",
                                                                    "type": "advanceEchart",
                                                                    "source": "ADVANCEECHART",
                                                                    "parameters": {
                                                                      "theme": "default"
                                                                    },
                                                                    "advance": {
                                                                      "expression": "expression = {\n  \"theme\" : \"dark\",\n  \"on\" : {\n    \"init\" : function(event){\n      var target = event.target;\n      var global = event.global;\n      var deviceId = target.getParameter('id');\n      var series = [];\n      var time = [];\n      var minDate;\n      var ins;\n      if (!deviceId) return;\n      target.getDevicesByCondition({'resourceId':deviceId},function (returnData) {\n        //  
                                                                    },
                                                                    "style": {
                                                                      "width": "100%",
                                                                      "height": "400px"
                                                                    },
                                                                    "url": "images/map/map1.png"
                                                                  }
                                                                ]
                                                              }
                                                            ],
                                                            "parameters": {}
                                                          }
                                                        ],
                                                        "col": 8
                                                      }
                                                    ],
                                                    "url": "images/map/map1.png",
                                                    "advance": {
                                                      "expression": "{\n\t\"on\" : {\n    \"click\" : function(event){\n      var ticketNo = event.data.values.ticketNo;\n      event.tools.location.href='../../app-oc/index.html#/workOrderTimeLine/'+ ticketNo;\n     }\n  },  \n  \"format\" : [\n    {\n      \"name\": \"工单号\",\n      \"value\": \"{item:ticketNo}\",\n      \"type\": \"text\"\n    },\n    {\n      \"name\": \"内容\",\n      \"value\": \"{item:message}\",\n      \"type\": \"text\"\n    },\n    {\n      \"name\": \"紧急度\",\n      \"value\": \"{item:priorityCode}\",\n      \"type\": \"priority\"\n    }\n  ]\n}"
                                                    }
                                                  }
                                                ]
                                              }
                                            ]
                                          },
                                          {
                                            "type": "row",
                                            "source": "ROW",
                                            "parameters": {
                                              "alignment": "bootstrap"
                                            },
                                            "style": {},
                                            "children": [
                                              {
                                                "type": "column",
                                                "children": [
                                                  {
                                                    "label": "控制板1",
                                                    "type": "block",
                                                    "source": "BLOCK",
                                                    "style": {
                                                      "margin": "5px"
                                                    },
                                                    "advance": {
                                                      "expression": {}
                                                    },
                                                    "children": [
                                                      {
                                                        "type": "column",
                                                        "col": 12,
                                                        "children": [
                                                          {
                                                            "label": "文字",
                                                            "type": "text",
                                                            "source": "TEXT",
                                                            "help": "http://localhost/app-free-style/index.html#/help/index%7Ctext/%5B%220%22,%7B%7D%5D",
                                                            "data": {
                                                              "applied": false,
                                                              "multipleCi": false,
                                                              "multipleKpi": false,
                                                              "resource": [],
                                                              "modelType": 300,
                                                              "resfilltype": "parameter",
                                                              "series": {
                                                                "manual": "新建文字",
                                                                "bind": "(function (source){\n  var formatter=function(elem){\n    return elem.value\n   }\n  return source.ci.getSeries(formatter);\n})"
                                                              },
                                                              "modelDisable": true
                                                            },
                                                            "style": {
                                                              "margin": "5px",
                                                              "padding": "0",
                                                              "font-size": "14px",
                                                              "font-weight": "bold",
                                                              "line-height": "30px",
                                                              "text-align": "left",
                                                              "color": "rgb(238, 238, 238)"
                                                            },
                                                            "advance": {
                                                              "getfunction": "kpiDataService.getValueList",
                                                              "category": "ci",
                                                              "condition": [
                                                                "kpi",
                                                                "{object:kpiQueryModel}"
                                                              ],
                                                              "expression": "expression = {\n    on : {\n        init : function(event){\n            var target = event.target;\n            target.setText(\"报警通知\");\n        }\n    }\n}"
                                                            },
                                                            "parameters": {},
                                                            "url": "images/map/map1.png"
                                                          },
                                                          {
                                                            "label": "高级列表",
                                                            "type": "dataTableAdvance",
                                                            "source": "DATATABLEADVANCE",
                                                            "parameters": {
                                                              "col": 1,
                                                              "pageSize": 10,
                                                              "listbottom": "standard"
                                                            },
                                                            "advance": {
                                                              "expression": "expression = {\n  \"theme\" : \"dark\",\n  \"on\" : {\n    \"init\" : function(event){\n      var target = event.target;\n      var deviceId = target.getParameter('id')\n      var queryParams = {\n        \"domain\":\"\",\n        \"nodeType\":\"\",\n        \"pageSize\":1000,\n        \"severities\":\"1,2,3,4\",\n        \"states\":\"0,5,10,20\",\n        \"nodeIds\":deviceId\n      };\n      var queryParams4Page = {\n        \"start\": 0,\n        \"length\": \"\",\n        \"sort\": \"createTime\",\n        \"sortType\": \"desc\",\n        \"statCount\": true,\n        \"total\": 0\n      };\n      var params = [queryParams,queryParams4Page]\n      target.postService(\"alertQueryFlexService\",\"getAlertByPage\",params,function (returnData) {\n        var alertsDevice = [];\n        var alerts = returnData.data.data;\n        for(var i = 0; i < alerts.length; i++ ) {\n          if(alerts[i].state == 0 || alerts[i].state == 5 || alerts[i].state == 10) {\n            alertsDevice.push(alerts[i])\n          }\n        }\n        target.render({\n          data : alertsDevice,\n          on : {\n            rowClick : function(event){\n              //target.navigateTo('production', {});\n            }\n          },\n          format : [\n            //   {\n            //     \"name\": \"设备名称\",\n            //     \"value\": \"devName\",\n            //     \"type\": \"text\",\n            //     //\"width\" : 300\n            //   },\n            {\n              \"name\": \"报警来源\",\n              \"value\": \"appName\",\n              \"type\": \"text\",\n              \"format\":function (elem) {\n                if(elem == \"1\") {\n                  return \"采集系统\"\n                }else if(elem == \"2\") {\n                  return \"智能诊断\"\n                }else if(elem == \"3\") {\n                  return \"大数据分析\"\n                }else if(elem == \"4\") {\n                  return \"离线诊断\"\n                }\n              }\n            },\n            {\n              \"name\": \"报警消息\",\n              \"value\": \"message\",\n              \"type\": \"text\"\n            },{\n              \"name\": \"报警级别\",\n              \"type\":\"priority\",\n              \"value\" : \"severity\",\n              \"format\":function (elem) {\n                 
                                                            },
                                                            "style": {
                                                              "margin": "5px",
                                                              "font-size": "12px"
                                                            },
                                                            "url": "images/map/map1.png"
                                                          }
                                                        ]
                                                      }
                                                    ],
                                                    "parameters": {}
                                                  }
                                                ],
                                                "col": 7
                                              },
                                              {
                                                "type": "column",
                                                "children": [
                                                  {
                                                    "label": "控制板1",
                                                    "type": "block",
                                                    "source": "BLOCK",
                                                    "style": {
                                                      "margin": "5px"
                                                    },
                                                    "advance": {
                                                      "expression": {}
                                                    },
                                                    "children": [
                                                      {
                                                        "type": "column",
                                                        "col": 12,
                                                        "children": [
                                                          {
                                                            "label": "文字",
                                                            "type": "text",
                                                            "source": "TEXT",
                                                            "help": "http://localhost/app-free-style/index.html#/help/index%7Ctext/%5B%220%22,%7B%7D%5D",
                                                            "data": {
                                                              "applied": false,
                                                              "multipleCi": false,
                                                              "multipleKpi": false,
                                                              "resource": [],
                                                              "modelType": 300,
                                                              "resfilltype": "parameter",
                                                              "series": {
                                                                "manual": "新建文字",
                                                                "bind": "(function (source){\n  var formatter=function(elem){\n    return elem.value\n   }\n  return source.ci.getSeries(formatter);\n})"
                                                              },
                                                              "modelDisable": true
                                                            },
                                                            "style": {
                                                              "margin": "5px",
                                                              "padding": "0",
                                                              "font-size": "14px",
                                                              "font-weight": "bold",
                                                              "line-height": "30px",
                                                              "text-align": "left",
                                                              "color": "rgb(238, 238, 238)"
                                                            },
                                                            "advance": {
                                                              "getfunction": "kpiDataService.getValueList",
                                                              "category": "ci",
                                                              "condition": [
                                                                "kpi",
                                                                "{object:kpiQueryModel}"
                                                              ],
                                                              "expression": "expression = {\n    on : {\n        init : function(event){\n            var target = event.target;\n            target.setText(\"离线诊断\");\n        }\n    }\n}"
                                                            },
                                                            "parameters": {},
                                                            "url": "images/map/map1.png"
                                                          },
                                                          {
                                                            "label": "高级列表",
                                                            "type": "dataTableAdvance",
                                                            "source": "DATATABLEADVANCE",
                                                            "parameters": {
                                                              "col": 1,
                                                              "pageSize": 10,
                                                              "listbottom": "none"
                                                            },
                                                            "advance": {
                                                              "expression": "expression = {\n  \"theme\" : \"dark\",\n  \"on\" : {\n    \"init\" : function(event){\n      var target = event.target;\n      var id = target.getParameter('id')\n      \n      \n    target.getDomainAreaLineTree(function(domaintree){\n    var find = domaintree.find(function(node){\n        return node.id == id\n    });\n    if(find){\n        var deviceCode = find.externalDevId;\n        // \n  }\n}"
                                                            },
                                                            "style": {
                                                              "margin": "5px",
                                                              "font-size": "12px"
                                                            },
                                                            "url": "images/map/map1.png"
                                                          }
                                                        ]
                                                      }
                                                    ]
                                                  }
                                                ],
                                                "col": 5
                                              }
                                            ],
                                            "url": "images/map/map1.png",
                                            "advance": {
                                              "expression": "{\n\t\"on\" : {\n    \"click\" : function(event){\n      var ticketNo = event.data.values.ticketNo;\n      event.tools.location.href='../../app-oc/index.html#/workOrderTimeLine/'+ ticketNo;\n     }\n  },  \n  \"format\" : [\n    {\n      \"name\": \"工单号\",\n      \"value\": \"{item:ticketNo}\",\n      \"type\": \"text\"\n    },\n    {\n      \"name\": \"内容\",\n      \"value\": \"{item:message}\",\n      \"type\": \"text\"\n    },\n    {\n      \"name\": \"紧急度\",\n      \"value\": \"{item:priorityCode}\",\n      \"type\": \"priority\"\n    }\n  ]\n}"
                                            }
                                          }
                                        ]
                                      }
                                    ],
                                    "advance": {
                                      "expression": {}
                                    },
                                    "url": "images/map/map1.png",
                                    "parameters": {}
                                  }
                                ]
                              }
                            ],
                            "parameters": {}
                          }
                        ],
                        "col": 9
                      }
                    ],
                    "advance": {
                      "expression": "expression = {\n  \"on\" : {\n    \"init\" : function(event){\n      var target = event.target;\n      var role = target.getValue(\"global/ROLE\");\n      if(role != 4){\n          target.setDimension([0,12]);\n      }\n    }\n  }\n};"
                    }
                  }
                ]
              }
            ],
            "url": "images/map/map1.png",
            "parameters": {}
          }
        ],
        "col": 12
      },
      "id": "7",
      "$$hashKey": "object:2323"
    },
    {
      "label": "分析诊断",
      "path": "analysis",
      "layout": {
        "type": "column",
        "children": [
          {
            "label": "高级视图",
            "type": "advanceEchart",
            "source": "ADVANCEECHART",
            "advance": {
              "expression": "express = {\n  on: {\n    init: function (event) {\n      var target = event.target;\n      var global = event.global;\n      var color = \"#ffe400\";\n      var LENGTH = 50;\n      var pdata = target.getPopupData();\n      var resource = pdata.resource;\n      var sensor = pdata.sensor || {};\n      var kpiName;\n      var endTime = target.dateHandler();\n      var startTime = endTime.clone();\n      startTime.addDay(-2);\n      endTime = endTime.getUTCDateString();\n      startTime = startTime.getUTCDateString();\n      // 渲染echart图\n      var renderEchart = function (ci, kpi) {\n        // 扩展参数\n        target.showLoading();\n        target.hideNoData();\n        var extension = {\n          includeInstance : true,\n          queryInstances : sensor.instance,\n          isRealTimeData : false,\n          startTime:startTime,\n          endTime:endTime\n        };\n        var xAxis = [];\n        target.getKpiValueList(ci, kpi, 0, function (returnData) {\n          if(returnData.length > 0){\n            target.hideLoading();\n            var xAxisData = [];\n            target.setValue(\"global/sensor\", {\n              kpiId : returnData[0].kpiCode,\n              instance : returnData[0].instance\n            });\n            target.setValue(\"global/dt\", returnData[0]);\n            target.setValue(\"global/time\", target.dateHandler(returnData[0].arisingTime));\n            var seriesData = [];\n            var minDate = target.dateHandler(returnData[0].arisingTime).getTime();\n            if (returnData) {\n              for (var i in kpi) {\n                var item = {\n                  name: kpiName,\n                  data: returnData.map(function (elem) {\n                    var arisingTime = target.dateHandler(elem.arisingTime).getTime();\n                    return [arisingTime - minDate, elem.value];\n                  })\n                }\n                seriesData.push(item);\n              }\n            }\n            var option = {\n              title: {\n                textStyle: {color: \"#fff\"}\n              },\n              tooltip : {\n                trigger: 'axis',\n                axisPointer: {\n                  type: 'cross',\n                  label: {\n                    backgroundColor: '#6a7985'\n                  }\n                }\n              },\n              legend: {\n                data: seriesData.map(function (elem) {\n                  return elem.name;\n                })\n              },\n              grid : {\n                top : \"5%\",\n                height : \"70%\"\n              },\n              xAxis: {\n                boundaryGap: false,\n                type: 'value',\n                max : \"dataMax\",\n                axisLabel : {\n                    formatter : function(item){\n                        return target.dateHandler(minDate + item).getDateString(\"yy/MM/dd,hh:mm:ss\");\n                    }\n                }\n              },\n              yAxis: {\n                type: 'value'\n              },\n              toolbox: {\n                feature: {\n                  dataZoom: {},\n                  restore: {},\n                  saveAsImage:{\n                    type:\"png\",\n                    name:\"振动分析图\",\n                    backgroundColor:\"#0b2232\"\n                  },\n                },\n                iconStyle:{\n                  normal:{\n                    borderColor:\"#fff\"\n                  },\n                  emphasis:{\n                    borderColor:\"#e6e2e2\"\n                  }\n                }\n              },\n              series: seriesData.map(function (elem) {\n                elem.type = \"line\";\n                elem.symbolSize = 8;\n                elem.data = elem.data;\n                return elem;\n              })\n            };\n            var ins = target.render(option);\n          } else {\n            target.showNoData();\n          }\n        }, extension)\n      }\n      target.off(\"drawDiagnoseFeatureEchart1\");\n      target.on(\"drawDiagnoseFeatureEchart1\", function (condition) {\n        startTime = condition.dateRangeTime[0].getUTCDateString();\n        endTime = condition.dateRangeTime[1].getUTCDateString();\n        var ci = [resource.id];\n        var kpi = [];\n        if(condition.kpi.dataItemId){\n          kpi.push(condition.kpi.dataItemId);\n          kpiName = condition.kpi.label;\n        }\n        renderEchart(ci, kpi);\n      });\n      renderEchart([resource.id], [sensor.id]);\n    }\n  }\n};"
            },
            "style": {
              "margin": "auto",
              "width": "100%",
              "height": "500px"
            },
            "parameters": {
              "theme": "macarons"
            },
            "url": "images/map/map1.png"
          }
        ],
        "col": 12
      },
      "id": "8",
      "$$hashKey": "object:2714"
    },
    {
      "label": "分析诊断复制",
      "path": "page9",
      "layout": {
        "type": "column",
        "children": [
          {
            "label": "TAB标签",
            "type": "tab",
            "source": "TAB",
            "style": {
              "padding": "5px",
              "min-height": "100px"
            },
            "children": [
              {
                "tabName": "特征趋势",
                "tabId": "0",
                "default": true,
                "display": "block",
                "type": "tabItem",
                "children": [
                  {
                    "label": "控制板1",
                    "type": "block",
                    "source": "BLOCK",
                    "style": {
                      "padding": "10px",
                      "margin": "5px",
                      "border": "0",
                      "box-shadow": "0px 0px 0px 0px rgba(0,0,0,0)",
                      "background-color": "rgba(250,250,250,0)"
                    },
                    "advance": {
                      "expression": {}
                    },
                    "children": [
                      {
                        "type": "column",
                        "col": 12,
                        "children": [
                          {
                            "label": "控件组",
                            "type": "ctrlgroup",
                            "source": "CTRLGROUP",
                            "advance": {
                              "expression": "expression = {\n    width : \"auto\",\n  on: {\n    init: function (event) {\n      var target = event.target;\n      var global = event.global;\n      var dItem,kpi;\n      var pdata = target.getPopupData();\n      var resource = pdata.resource;\n      var sensor = pdata.sensor || {};\n      //var time = target.getValue(\"global/time\");\n      var subaccessConfigValues;\n      var startDate = target.dateHandler(\"2017/11/23,08:13:26\");\n      var endDate = target.dateHandler();\n      var dateRangeTime = [startDate, endDate];\n      var all = [];\n      debugger;\n      var success = function () {\n        if(!resource){\n          target.navigateTo(\"index\", {\n            main : 2,\n            sub : 0\n          },\"self\");\n        };\n        var ci = [resource.id]; // 设备 526443915616079\n        var modelId = [resource.modelId] // 获取modelId\n        target.getKpiTypeByFilter({\n          hasSingnal : true\n        }, function(kpis){\n            var CONDITIONA = function(value){\n                 n  }\n}"
                            },
                            "style": {
                              "margin": "5px",
                              "font-size": "12px"
                            },
                            "help": "../pdf/ctrlgroup.pdf",
                            "url": "images/map/map1.png",
                            "parameters": {
                              "cgroupstyle": "table"
                            }
                          }
                        ]
                      }
                    ],
                    "url": "images/map/map1.png"
                  },
                  {
                    "label": "高级视图",
                    "type": "advanceEchart",
                    "source": "ADVANCEECHART",
                    "advance": {
                      "expression": "express = {\n  on: {\n    init: function (event) {\n      var target = event.target;\n      var global = event.global;\n      var color = \"#ffe400\";\n      var LENGTH = 50;\n      var pdata = target.getPopupData();\n      var resource = pdata.resource;\n      var sensor = pdata.sensor || {};\n      var kpiName;\n      var endTime = target.dateHandler().getUTCDateString();\n      var startTime = target.dateHandler(\"2017/11/23,08:13:26\").getUTCDateString();\n      // 渲染echart图\n      debugger;\n      var renderEchart = function (ci, kpi) {\n        // 扩展参数\n        debugger;\n        target.showLoading();\n        target.hideNoData();\n        var extension = {\n          hasSingnal : true,\n          isRealTimeData : false,\n          startTime:startTime,\n          endTime:endTime\n        };\n        var xAxis = [];\n        target.getKpiValueList(ci, kpi, 0, function (returnData) {\n          debugger;\n          if(returnData.length > 0){\n            target.hideLoading();\n            var xAxisData = [];\n            target.setValue(\"global/sensor\", {\n              kpiId : returnData[0].kpiCode,\n              instance : returnData[0].instance\n            });\n            target.setValue(\"global/dt\", returnData[0]);\n            target.setValue(\"global/time\", target.dateHandler(returnData[0].arisingTime));\n            returnData.forEach(function (ele) {\n              xAxisData.push(target.dateHandler(ele.arisingTime).getDateString(\"yy/MM/dd,hh:mm:ss\"));\n            });\n            var seriesData = []\n            if (returnData) {\n              for (var i in kpi) {\n                var item = {\n                  name: kpiName,\n                  data: returnData.map(function (elem) {\n                    return elem.value;\n                  })\n                }\n                seriesData.push(item);\n              }\n            }\n            var option = {\n              title: {\n                textStyle: {color: \"#fff\"}\n              },\n              tooltip: {\n                triggerOn: 'none',\n                position: function (pt, param) {\n                  var dataIndex = param[0].dataIndex;\n                  var dt = returnData[dataIndex];\n                  target.setValue(\"global/sensor\", {\n                    kpiId : dt.kpiCode,\n                    instance : dt.instance\n                  });\n                  target.setValue(\"global/dt\", dt);\n                  target.setValue(\"global/time\", target.dateHandler(dt.arisingTime));\n                }\n              },\n              legend: {\n                data: seriesData.map(function (elem) {\n                  return elem.name;\n                })\n              },\n              grid : {\n                top : \"5%\",\n                height : \"70%\"\n              },\n              xAxis: {\n                boundaryGap: false,\n                type: 'category',\n                data: xAxisData,\n                axisPointer: {\n                  value: xAxisData[0],\n                  snap: false,\n                  lineStyle: {\n                    color: '#126296',\n                    opacity: 0.5,\n                    width: 2\n                  },\n                  label: {\n                    show: true,\n                    backgroundColor: '#126296'\n                  },\n                  handle: {\n                    shadowBlur : 0,\n                    shadowColor : \"#fff\",\n                    show: true,\n                    color: '#126296'\n                  }\n                },\n              },\n              yAxis: {\n                type: 'value'\n              },\n              toolbox: {\n                      feature: {\n                          dataZoom: {},\n                          restore: {},\n                          saveAsImage:{\n                              type:\"png\",\n                              name:\"分析诊断图\",\n                              backgroundColor:\"#0b2232\"\n                          },\n                      },\n                      iconStyle:{\n                          normal:{\n                              borderColor:\"#fff\"\n                          },\n                          emphasis:{\n                              borderColor:\"#e6e2e2\"\n                          }\n                      }\n              },\n              dataZoom: [{\n                show: false,\n                realtime: true,\n                start: 0,\n                end: 10,\n              }],\n              series: seriesData.map(function (elem) {\n                elem.type = \"line\";\n                elem.symbolSize = 8;\n                elem.data = elem.data;\n                return elem;\n              })\n            };\n            var ins = target.render(option);\n          } else {\n            target.showNoData();\n          }\n        }, extension)\n      }\n      target.off(\"drawDiagnoseFeatureEchart1\");\n      target.on(\"drawDiagnoseFeatureEchart1\", function (condition) {\n        startTime = condition.dateRangeTime[0].getUTCDateString();\n        endTime = condition.dateRangeTime[1].getUTCDateString();\n        var ci = [resource.id];\n        var kpi = [];\n        if(condition.kpi.dataItemId){\n          kpi.push(condition.kpi.dataItemId);\n          kpiName = condition.kpi.label;\n        }\n        renderEchart(ci, kpi);\n      });\n      renderEchart([resource.id], [sensor.id]);\n    }\n  }\n};"
                    },
                    "style": {
                      "margin": "auto",
                      "width": "100%",
                      "height": "500px"
                    },
                    "parameters": {
                      "theme": "macarons"
                    },
                    "url": "images/map/map1.png"
                  }
                ]
              },
              {
                "tabName": "时域分析",
                "tabId": "1",
                "type": "tabItem",
                "display": "none",
                "children": [
                  {
                    "label": "控制板1",
                    "type": "block",
                    "source": "BLOCK",
                    "style": {
                      "padding": "10px",
                      "margin": "5px",
                      "border": "0",
                      "box-shadow": "0px 0px 0px 0px rgba(0,0,0,0)",
                      "background-color": "rgba(250,250,250,0)"
                    },
                    "children": [
                      {
                        "type": "column",
                        "col": 12,
                        "children": [
                          {
                            "label": "控件组",
                            "type": "ctrlgroup",
                            "source": "CTRLGROUP",
                            "advance": {
                              "expression": "expression = {\n  width : \"auto\",\n  on : {\n    init : function(event){\n      var target = event.target;\n      var global = event.global;\n      target.setValue(\"type\", 0);\n      target.setValue(\"x0\", undefined);\n      target.setValue(\"x1\", undefined);\n      var render = function(){\n          var x0 = target.getValue(\"x0\") || 0;\n          var y0 = target.getValue(\"y0\") || 0;\n          var x1 = target.getValue(\"x1\") || 0;\n          var y1 = target.getValue(\"y1\") || 0;\n          var ctrlGroups = [\n           [{\n               type : \"jquery\",\n               render : function(){\n                   var div = $(\"<div></div>\");\n                   div.width(25);\n                   div.height(10);\n                   div.css(\"background-color\", \"blue\");\n                   return div;\n               }\n           },{\n              type : \"label\",\n              value : \"X\",\n              style : {\n                  \"width\" : \"10px\",\n                  \"padding\" : \"3px\"\n              }\n            },{\n              type : \"label\",\n              value : parseFloat(x0).toFixed(4),\n              style : {\n                  \"width\" : \"50px\",\n                  \"padding\" : \"3px 10px\",\n                  \"background-color\" : \"rgba(0,0,0,.1)\"\n              }\n            },{\n              type : \"label\",\n              value : \"Y\",\n              style : {\n                  \"padding\" : \"3px\"\n              }\n            },{\n              type : \"label\",\n              value : parseFloat(y0).toFixed(4),\n              style : {\n                  \"width\" : \"50px\",\n                  \"padding\" : \"3px 10px\",\n                  \"background-color\" : \"rgba(0,0,0,.1)\"\n              }\n            },{\n               type : \"jquery\",\n               render : function(){\n                   var div = $(\"<div></div>\");\n                   div.width(25);\n                   div.height(10);\n                   div.css(\"margin-left\", \"50px\");\n                   div.css(\"background-color\", \"red\");\n                   return div;\n               }\n           },{\n              type : \"label\",\n              value : \"X\",\n              style : {\n                  \"padding\" : \"3px\"\n              }\n            },{\n              type : \"label\",\n              value : parseFloat(x1).toFixed(4),\n              style : {\n                  \"width\" : \"50px\",\n                  \"padding\" : \"3px 10px\",\n                  \"background-color\" : \"rgba(0,0,0,.1)\"\n              }\n            },{\n              type : \"label\",\n              value : \"Y\",\n              style : {\n                  \"padding\" : \"3px\"\n              }\n            },{\n              type : \"label\",\n              value : parseFloat(y1).toFixed(4),\n              style : {\n                  \"width\" : \"50px\",\n                  \"padding\" : \"3px 10px\",\n                  \"background-color\" : \"rgba(0,0,0,.1)\"\n              }\n            },{\n              type : \"label\",\n              value : \"△X\",\n              style : {\n                  \"margin-left\" : \"50px\",\n                  \"padding\" : \"3px\"\n              }\n            },{\n              type : \"label\",\n              value : (x1-x0).toFixed(4),\n              style : {\n                  \"width\" : \"50px\",\n                  \"padding\" : \"3px 10px\",\n                  \"background-color\" : \"rgba(0,0,0,.1)\"\n              }\n            },{\n              type : \"label\",\n              value : \"△Y\",\n              style : {\n                  \"padding\" : \"3px\"\n              }\n            },{\n              type : \"label\",\n              value : (y1-y0).toFixed(4),\n              style : {\n                  \"width\" : \"50px\",\n                  \"padding\" : \"3px 10px\",\n                  \"background-color\" : \"rgba(0,0,0,.1)\",\n                  \"margin-right\" : \"50px\"\n              }\n            }]\n          ];\n          target.render(ctrlGroups);\n      }\n      target.on(\"handleChange\", function(){\n          render();\n      })\n      render();\n    }\n  }\n}"
                            },
                            "style": {
                              "margin": "5px",
                              "font-size": "12px"
                            },
                            "help": "../pdf/ctrlgroup.pdf",
                            "parameters": {
                              "cgroupstyle": "table"
                            }
                          },
                          {
                            "label": "高级视图",
                            "type": "advanceEchart",
                            "source": "ADVANCEECHART",
                            "advance": {
                              "expression": "express = {\n  on: {\n    init: function (event) {\n      var target = event.target;\n      var global = event.global;\n      var pdata = target.getPopupData();\n      var resource = pdata.resource;\n      var sensor = pdata.sensor || {};\n      var ci = [resource.id];\n      var kpi = [sensor.id];\n      var time = target.getValue(\"global/time\");\n      var renderROWEchart = function (ci, kpi, time) {\n          time = time || target.dateHandler();\n        var params = {\n            time:0,\n            kpiCodes:kpi,\n            isRealTimeData:false,\n            nodeIds:ci,\n            startTime:time.getUTCDateString(),\n            endTime:time.getUTCDateString(),\n            transformerType:\"ROW\",\n        }\n        target.showLoading();\n        target.hideNoData();\n         event.target.postService(\"kpiDataFlexService\", \"getKpiValueList\", [\"kpi\",params], function(returnData){\n             target.hideLoading();\n             debugger;\n          if (returnData.data.length > 0) {\n            var data = eval(returnData.data[0].value);\n            var dataList = data[0];\n            var valueList = data[1];\n            // 
                            },
                            "style": {
                              "margin": "auto",
                              "width": "100%",
                              "height": "500px"
                            },
                            "url": "images/map/map1.png",
                            "parameters": {
                              "theme": "dark"
                            }
                          }
                        ]
                      }
                    ],
                    "advance": {
                      "expression": {}
                    },
                    "url": "images/map/map1.png"
                  }
                ]
              },
              {
                "tabName": "频域分析",
                "tabId": "2",
                "type": "tabItem",
                "display": "none",
                "children": [
                  {
                    "label": "控制板1",
                    "type": "block",
                    "source": "BLOCK",
                    "style": {
                      "padding": "10px",
                      "margin": "5px",
                      "border": "0",
                      "box-shadow": "0px 0px 0px 0px rgba(0,0,0,0)",
                      "background-color": "rgba(250,250,250,0)"
                    },
                    "children": [
                      {
                        "type": "column",
                        "col": 12,
                        "children": [
                          {
                            "label": "控件组",
                            "type": "ctrlgroup",
                            "source": "CTRLGROUP",
                            "advance": {
                              "expression": "expression = {\n    width : \"auto\",\n  on : {\n    init : function(event){\n      var target = event.target;\n      var global = event.global;\n      target.setValue(\"type\", 0);\n      target.setValue(\"x0\", undefined);\n      target.setValue(\"x1\", undefined);\n      var render = function(){\n          var x0 = target.getValue(\"x0\") || 0;\n          var y0 = target.getValue(\"y0\") || 0;\n          var x1 = target.getValue(\"x1\") || 0;\n          var y1 = target.getValue(\"y1\") || 0;\n          var type = target.getValue(\"type\") || 0;\n          var feature = target.getValue(\"type\") || 0;\n          var ctrlGroups = [\n           [{\n               type : \"jquery\",\n               style : {\n                  \"width\" : \"30px\"\n              },\n               render : function(){\n                   var div = $(\"<div></div>\");\n                   div.width(25);\n                   div.height(10);\n                   div.css(\"background-color\", \"blue\");\n                   return div;\n               }\n           },{\n              type : \"label\",\n              value : \"X\",\n              style : {\n                  \"width\" : \"10px\",\n                  \"padding\" : \"3px\"\n              }\n            },{\n              type : \"label\",\n              value : target.toFix(x0, 4),\n              style : {\n                  \"width\" : \"60px\",\n                  \"background-color\" : \"rgba(0,0,0,.1)\"\n              }\n            },{\n              type : \"label\",\n              value : \"Y\",\n              style : {\n                  \"padding\" : \"3px\"\n              }\n            },{\n              type : \"label\",\n              value : target.toFix(y0, 4),\n              style : {\n                  \"width\" : \"60px\",\n                  \"background-color\" : \"rgba(0,0,0,.1)\"\n              }\n            },{\n               type : \"jquery\",\n               style : {\n                  \"width\" : \"30px\"\n              },\n               render : function(){\n                   var div = $(\"<div></div>\");\n                   div.width(25);\n                   div.height(10);\n                   div.css(\"background-color\", \"red\");\n                   return div;\n               }\n           },{\n              type : \"label\",\n              value : \"X\",\n              style : {\n                  \"width\" : \"10px\",\n                  \"padding\" : \"3px\"\n              }\n            },{\n              type : \"label\",\n              value : target.toFix(x1, 4) || \"0.0000\",\n              style : {\n                  \"width\" : \"50px\",\n                  \"padding\" : \"3px 10px\",\n                  \"background-color\" : \"rgba(0,0,0,.1)\"\n              }\n            },{\n              type : \"label\",\n              value : \"Y\",\n              style : {\n                  \"width\" : \"10px\",\n                  \"padding\" : \"3px\"\n              }\n            },{\n              type : \"label\",\n              value : target.toFix(y1, 4),\n              style : {\n                  \"width\" : \"50px\",\n                  \"background-color\" : \"rgba(0,0,0,.1)\"\n              }\n            },{\n              type : \"label\",\n              value : \"△X\",\n              style : {\n                  \"padding\" : \"3px\"\n              }\n            },{\n              type : \"label\",\n              value : target.toFix(x1-x0, 4),\n              style : {\n                  \"width\" : \"50px\",\n                  \"background-color\" : \"rgba(0,0,0,.1)\"\n              }\n            },{\n              type : \"label\",\n              value : \"△Y\",\n              style : {\n                  \"padding\" : \"3px\"\n              }\n            },{\n              type : \"label\",\n              value : target.toFix(y1-y0, 4),\n              style : {\n                  \"width\" : \"50px\",\n                  \"background-color\" : \"rgba(0,0,0,.1)\",\n                  \"margin-right\" : \"50px\"\n              }\n            },{\n              type : \"buttonGroup\",\n              style : {\n                  \"width\" : \"250px\"\n              },\n              content : [/**{\n                type : \"button\",\n                value : \"显示谱峰\",\n                icon : \"glyphicon glyphicon-indent-right\",\n                btnclass : type == 3 ? \"btn btn-primary\" : \"btn btn-default\",\n                on : {\n                  click : function(elem){\n                      if(target.getValue(\"type\") != 3){\n                          target.setValue(\"type\", 3);\n                      } else {\n                          target.setValue(\"type\", 0);\n                      };\n                      target.trigger(\"renderChart\");\n                      render();\n                  }\n                }\n              },*/{\n                type : \"button\",\n                value : \"倍频\",\n                icon : \"glyphicon glyphicon-indent-right\",\n                btnclass : type == 1 ? \"btn btn-primary\" : \"btn btn-default\",\n                on : {\n                  click : function(elem){\n                      if(target.getValue(\"type\") != 1){\n                          target.setValue(\"type\", 1);\n                      } else {\n                          target.setValue(\"type\", 0);\n                      };\n                      target.trigger(\"renderChart\");\n                      render();\n                  }\n                }\n              },{\n                type : \"button\",\n                value : \"边带\" + ((type == 2) ? \"(\" + target.toFix(x1-x0, 4) + \")\" : \"\"),\n                icon : \"glyphicon glyphicon-list\",\n                btnclass : type == 2 ? \"btn btn-primary\" : \"btn btn-default\",\n                on : {\n                  click : function(elem){\n                      if(target.getValue(\"type\") != 2){\n                          target.setValue(\"type\", 2);\n                      } else {\n                          target.setValue(\"type\", 0);\n                      };\n                      target.trigger(\"renderChart\");\n                      render();\n                  }\n                }\n              }]\n            }]\n          ];\n          target.render(ctrlGroups);\n      }\n      target.on(\"handleChange\", function(){\n          render();\n      })\n      render();\n    }\n  }\n}"
                            },
                            "style": {
                              "margin": "5px",
                              "font-size": "12px"
                            },
                            "help": "../pdf/ctrlgroup.pdf",
                            "parameters": {
                              "cgroupstyle": "table"
                            }
                          },
                          {
                            "label": "高级视图",
                            "type": "advanceEchart",
                            "source": "ADVANCEECHART",
                            "advance": {
                              "expression": "express = {\n  on: {\n    init: function (event) {\n      var target = event.target;\n      var global = event.global;\n      var color = \"#ff3a3a\";\n      var kpi;\n      var LENGTH = 50;\n      var pdata = target.getPopupData();\n      var resource = pdata.resource;\n      var sensor = pdata.sensor || {};\n      var ci = [resource.id];\n      var kpi = [sensor.id];\n      var time = target.getValue(\"global/time\");\n      var renderFFTEchart = function (ci, kpi, time) {\n        time = time || target.dateHandler();\n        var params = {\n          time:0,\n          kpiCodes:kpi,\n          isRealTimeData:false,\n          nodeIds:ci,\n          startTime:time.getUTCDateString(),\n          endTime:time.getUTCDateString(),\n          transformerType:\"FFT\"\n        }\n        target.showLoading();\n        target.hideNoData();\n        var x0_inx = 0;\n        var x1_inx = 180;\n        event.target.postService(\"kpiDataFlexService\", \"getKpiValueList\", [\"kpi\",params], function(returnData){\n          target.hideLoading();\n          if (returnData.data.length > 0) {\n            var data = eval(returnData.data[0].value);\n            var dataList = data[0];\n            var valueList = data[1];\n            var render = function (init, sub) {\n              var type = target.getValue(\"type\") || 0;\n              var x0 = dataList[x0_inx];\n              var x1 = dataList[x1_inx];\n              if (type == 0) {\n                var markLine = undefined;\n                var markPoint = undefined;\n              } else if (type == 1) {\n                var markLine = {\n                  animation: false,\n                  symbol: 'none',\n                  silent: false,\n                  lineStyle: {\n                    normal: {\n                      width: 1,\n                      color: \"#2285d3\",\n                      type: 'solid'\n                    }\n                  },\n                  label: {\n                    normal: {\n                      show: true,\n                      position: 'end',\n                      formatter: function (elem) {\n                        return target.toFix(elem.value, 1) + \"Hz\";\n                      }\n                    }\n                  },\n                  data: (function () {\n                    var rs = [];\n                    for (i = 0; i < 10; i++) {\n                      var item = {\n                        xAxis: dataList[x0_inx * (i + 1)] + ''\n                      };\n                      rs.push(item)\n                    };\n                    return rs;\n                  })()\n                }\n                var markPoint = {\n                  symbol: \"circle\",\n                  symbolSize: 8,\n                  animation: false,\n                  silent: false,\n                  label: {\n                    normal: {\n                      show: false\n                    }\n                  },\n                  itemStyle: {\n                    normal: {\n                      color: \"#fff\",\n                      borderColor: \"#2285d3\"\n                    }\n                  },\n                  data: (function () {\n                    var rs = [];\n                    for (i = 0; i < 10; i++) {\n                      var yData = data[x0_inx * (i + 2)];\n                      if (yData) {\n                        var item = {\n                          xAxis: x0_inx * (i + 2) + '',\n                          yAxis: yData[1]\n                        };\n                        rs.push(item)\n                      }\n                    }\n                    return rs;\n                  })()\n                }\n              } else if (type == 2) {\n                var markLine = {\n                  animation: false,\n                  symbol: 'none',\n                  silent: false,\n                  lineStyle: {\n                    normal: {\n                      color: \"#ff3a3a\",\n                      type: 'solid'\n                    }\n                  },\n                  label: {\n                    normal: {\n                      show: true,\n                      position: 'end',\n                      formatter: function (elem) {\n                         
                            },
                            "style": {
                              "margin": "auto",
                              "width": "100%",
                              "height": "500px"
                            },
                            "url": "images/map/map1.png",
                            "parameters": {
                              "theme": "dark"
                            }
                          }
                        ]
                      }
                    ],
                    "advance": {
                      "expression": "{}"
                    },
                    "url": "images/map/map1.png"
                  }
                ]
              }
            ]
          }
        ],
        "col": 12
      },
      "id": "9",
      "$$hashKey": "object:943"
    }
  ],
  "setting": "{\n  \"showNavi\": false,\n  \"theme\": \"steel\",\n  \"style\": {\n    \"padding\": \"15px\"\n  }\n}"
}