define({width:"auto",on:{init:function init(event){var target=event.target,global=event.global,dItem,kpi;target.$getCurrentResource(function(resource){var sensor=target.getValue("global/sensor")||{},subaccessConfigValues,deviceId;resource&&(deviceId=resource.id);var endDate=target.getEndDate(),startDate=target.getStartDate(),alertInstance=target.getParameter("alertInstance"),dateRangeTime=[startDate,endDate],all=target.getValue("global/hasSingnal")||[],success=function success(){var ci=[resource.id],modelId=[resource.modelId];target.getKpiTypeByFilter({hasSingnal:!0},function(kpis){var CONDITIONA=function(t){return dItem&&t.instance==dItem.name&&kpis.some(function(e){return e.id==t.dataItemId})},CONDITIONB=function(e){return e.instance==dItem.name},accessConfigValues=resource.physicalConfig?resource.physicalConfig.accessConfigs:"";condition=CONDITIONA,accessConfigValues&&target.getAttrsByResourceId(resource.id,function(attrs){var MeasurePointLocate=attrs.MeasurePointLocate,triggerEvent=function(){target.trigger("drawDiagnoseFeatureEchart1",{ins:dItem,kpi:kpi,dateRangeTime:dateRangeTime}),target.setValue("featureEchart",{ins:dItem,kpi:kpi,dateRangeTime:dateRangeTime})},sourceValue=eval(MeasurePointLocate)||"",sourceValueArr=[];for(var i in sourceValue)for(var j in sourceValue[i])for(var k in sourceValue[i][j])sourceValueArr.push(sourceValue[i][j][k]);sourceValueArr=sourceValueArr.filter(function(e){return e.name.length<4}),dItem=sourceValueArr.find(function(e){return alertInstance?alertInstance==e.name:sensor.instance==e.name})||sourceValueArr[0],subaccessConfigValues=accessConfigValues.filter(condition),kpi=subaccessConfigValues.find(function(e){return e.dataItemId==(sensor.kpiId||sensor.id)})||subaccessConfigValues[0],kpi=kpi||{},triggerEvent();var render=function t(){target.setValue("global/hasSingnal",all);var e=[[{type:"label",value:"测点",style:{width:"40px",textAlign:"center"}},{type:"select",value:dItem.name,class:"col-md-2",on:{change:function(e){dItem=e.value,subaccessConfigValues=accessConfigValues.filter(condition),kpi=subaccessConfigValues[0]||{},triggerEvent(),t()}},options:sourceValueArr,format:{id:"name",label:"label"}},{type:"label",value:"参数",style:{width:"40px",textAlign:"center"}},{type:"select",value:kpi.kpiId,class:"col-md-2",on:{change:function(e){kpi=e.value,triggerEvent()}},options:subaccessConfigValues,format:{id:"kpiId",label:"kpiName"}},{type:"checkboxlist",value:all,style:{width:"80px",textAlign:"center"},options:[{id:0,label:"全部"}],on:{change:function(e){all=e.value.map(function(e){return e.id}),condition=(e.value.length,CONDITIONB),-1==(subaccessConfigValues=accessConfigValues.filter(condition)).indexOf(kpi)&&(kpi||subaccessConfigValues[0]),t(),triggerEvent()}}},{id:1,icon:"none",value:startDate,type:"dateTimePicker",style:{width:"200px"},on:{change:function(e){startDate=target.dateHandler(e.value.getUTCDateString),dateRangeTime[0]=startDate,triggerEvent()}}},{type:"label",value:"至",style:{textAlign:"center",width:"30px"}},{id:2,icon:"none",value:endDate,type:"dateTimePicker",style:{width:"200px"},on:{change:function(e){endDate=target.dateHandler(e.value.getUTCDateString),dateRangeTime[1]=endDate,triggerEvent()}}},{type:"button",class:"col-md-1",btnclass:"btn btn-primary",value:"设备信息",btnStyle:{width:"100%"},on:{click:function(e){target.setValue("device",deviceId),target.createPopupByViewIdPath(29454243456e4,"page1",{width:"600px",title:"设备信息"})}}},{type:"button",class:"col-md-1",btnclass:"btn btn-primary",value:"信号分析",btnStyle:{width:"100%"},on:{click:function(e){target.trigger("analysisShakeNavigateTo",2)}}},{type:"button",class:"col-md-1",btnclass:"btn btn-primary",value:"求助知识库",btnStyle:{width:"100%"},on:{click:function(e){target.createSystemPopupByViewId("174283678280002",{width:"80%",top:"140px",title:"知识库"},["",deviceId])}}}]];target.render(e)};render()})})};resource&&success(),target.off("tree_resourceChange.shaking"),target.on("tree_resourceChange.shaking",function(e){success()})})}}});
//# sourceMappingURL=../../../map/solution/customview/shakingAnalysis/shakingAnalysisItem.js.map
