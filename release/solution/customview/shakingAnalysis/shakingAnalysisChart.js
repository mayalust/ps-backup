define({on:{init:function(e){var s,i,d=e.target,a=(e.global,d.getEndDate()),t=d.getStartDate(),r=a.getUTCDateString(),o=t.getUTCDateString();d.$getCurrentResource(function(n){var a=function(e){o=e.dateRangeTime[0].getUTCDateString(),r=e.dateRangeTime[1].getUTCDateString();var a=[n.id],t=[];e.kpi.dataItemId&&(t.push(e.kpi.dataItemId),s=e.kpi.label,i=e.kpi.instance),d.setValue("featureEchart",null),function(e,l,a){var t=d.getValue("global/hasSingnal")||[];if(d.showLoading(),d.hideNoData(),0<e.length&&0<l.length&&a){var n={isRealTimeData:!1,startTime:o,endTime:r,includeInstance:!0,queryInstances:a};t.length<1&&(n.hasSingnal=!0),d.getKpiValueList(e,l,0,function(i){if(0<i.length){d.hideLoading();var t=[];d.setValue("global/sensor",{kpiId:i[0].kpiCode,instance:i[0].instance}),d.setValue("echarts/data",i),d.setValue("global/dt",i[0]),d.setValue("global/time",d.dateHandler(i[0].arisingTime));var n=d.dateHandler(i[i.length-1].arisingTime);i.forEach(function(e){var a=d.dateHandler(e.arisingTime);n.minus(a),t.push(a.getDateString("yy/MM/dd,hh:mm:ss"))});var e=[];if(i)for(var a in l){var r={name:s,data:i.map(function(e){return e.value})};e.push(r)}var o={title:{textStyle:{color:"#fff"}},tooltip:{triggerOn:"none",position:function(e,a){var t=a[0].dataIndex,n=i[t];d.setValue("global/sensor",{kpiId:n.kpiCode,instance:n.instance}),d.setValue("global/dt",n),d.setValue("global/time",d.dateHandler(n.arisingTime))}},legend:{data:e.map(function(e){return e.name})},grid:{top:"5%",height:"70%"},toolbox:{feature:{dataZoom:{},restore:{},saveAsImage:{type:"png",name:"振动分析-特征趋势图",backgroundColor:"#0b2232"}},iconStyle:{normal:{borderColor:"#fff"},emphasis:{borderColor:"#e6e2e2"}}},xAxis:{boundaryGap:!1,type:"category",data:t,axisPointer:{value:t[0],snap:!1,lineStyle:{color:"#126296",opacity:.5,width:2},label:{show:!0,backgroundColor:"#126296"},handle:{shadowBlur:0,shadowColor:"#fff",show:!0,color:"#126296"}}},yAxis:{type:"value",max:function(e){return(1.2*e.max).toFixed(3)}},series:e.map(function(e){return e.type="line",e.symbolSize=8,e.data=e.data,e})};d.render(o)}else d.showNoData()},n)}else d.showNoData()}(a,t,i)},e=d.getValue("featureEchart");e&&a(e),d.off("drawDiagnoseFeatureEchart1"),d.on("drawDiagnoseFeatureEchart1",function(e){a(e)})})},dblclick:function(e){var a=e.target,t=a.getValue("echarts/data");if(t&&t[e.ui.dataIndex]){var n=t[e.ui.dataIndex];a.setValue("global/sensor",{kpiId:n.kpiCode,instance:n.instance}),a.setValue("global/dt",n),a.setValue("global/time",a.dateHandler(n.arisingTime)),a.trigger("analysisShakeNavigateTo",2)}}}});
//# sourceMappingURL=../../../map/solution/customview/shakingAnalysis/shakingAnalysisChart.js.map
