function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}define({on:{init:function init(event){var target=event.target,global=event.global,color="#ffe400",kpi,LENGTH=50;target.$getCurrentResource(function(resource){var sensor=target.getValue("global/sensor")||{},time=target.getValue("global/time")||0,ci=[resource.id],renderFFTEchart=function renderFFTEchart(ci,kpi,time){time=time||target.dateHandler();var params={time:0,kpiCodes:kpi||[],includeInstance:!!sensor,queryInstances:sensor?sensor.instance:null,isRealTimeData:!1,nodeIds:ci||[],startTime:time.getUTCDateString(),endTime:time.getUTCDateString(),transformerType:"FFT"};target.showLoading(),target.hideNoData(),event.target.postService("kpiDataFlexService","getKpiValueList",["kpi",params],function(returnData){if(target.hideLoading(),0<returnData.data.length){var data=eval(returnData.data[0].value),valueList=data[0].map(function(e,t){return[e,data[1][t]]}),render=function a(r,e){var n=target.getValue("type")||0,o=target.getValue("x0")||0,s=target.getValue("x1")||180;if(0==n)var t=void 0,l=void 0;else if(1==n)t={animation:!1,symbol:"none",silent:!1,lineStyle:{normal:{width:1,color:"#436fff",type:"solid"}},label:{normal:{show:!0,position:"end",formatter:function(e){var t=e.data.value-0;return("number"==typeof t&&t==t?t.toFixed(2):"-")+"Hz"}}},data:function(){var e=[];for(i=0;i<10;i++){var t={xAxis:o*(i+2)+""};e.push(t)}return e}()},l={symbol:"circle",symbolSize:8,animation:!1,silent:!1,label:{normal:{show:!1}},itemStyle:{normal:{color:"#fff",borderColor:"blue"}},data:function(){var e=[];for(i=0;i<10;i++){var t=data[o/1*(i+2)];if(t){var a={xAxis:o*(i+2)+"",yAxis:t[1]};e.push(a)}}return e}()};else if(2==n)t={animation:!1,symbol:"none",silent:!1,lineStyle:{normal:{color:"red",type:"solid"}},label:{normal:{show:!0,position:"end",formatter:function(e){var t=e.data.value-0;return("number"==typeof t&&t==t?t.toFixed(2):"-")+"Hz"}}},data:function(){for(var e=[],t=-5;t<7;t++)e.push({xAxis:parseFloat(s)+t*(parseFloat(o)-parseFloat(s))});return e}()},l={symbol:"circle",symbolSize:8,snap:!0,animation:!1,silent:!1,label:{normal:{show:!1}},itemStyle:{normal:{color:"#fff",borderColor:"red"}},data:function(){for(var e=[],t=-5;t<5;t++)e.push({xAxis:parseInt(s)+t*(parseInt(o)-parseInt(s)),yAxis:valueList[parseInt(s)+t*(parseInt(o)-parseInt(s))]});return e}()};else if(3==n)t={animation:!1,symbol:"none",silent:!1,lineStyle:{normal:{color:"red",type:"solid"}},label:{normal:{show:!0,position:"end",formatter:function(e){var t=e.data.value-0;return("number"==typeof t&&t==t?t.toFixed(2):"-")+"Hz"}}},data:function(){var e,t,a,r=[];for(e=0;e<valueList.length;e++){for(t=r.push(valueList[e]);0<--t;)r[t][1]>r[t-1][1]&&(a=r[t],r[t]=r[t-1],r[t-1]=a);10<r.length&&r.pop()}return r.map(function(e){return{xAxis:e[0]}})}()},l={symbol:"circle",symbolSize:8,snap:!0,animation:!1,silent:!1,label:{normal:{show:!1}},itemStyle:{normal:{color:"#fff",borderColor:"red"}},data:function(){for(var e=[],t=-5;t<5;t++)e.push({xAxis:parseInt(s)+t*(parseInt(o)-parseInt(s)),yAxis:valueList[parseInt(s)+t*(parseInt(o)-parseInt(s))]});return e}()};var u={grid:[{top:"10%",width:"90%",left:"5%",height:"65%"},{top:"10%",width:"90%",left:"5%",height:"65%"}],tooltip:{alwaysShowContent:!0,triggerOn:"none"},toolbox:{feature:{dataZoom:{yAxisIndex:!1},restore:{},saveAsImage:{type:"png",name:"振动分析-时域分析图",backgroundColor:"#0b2232"}},iconStyle:{normal:{borderColor:"#fff"},emphasis:{borderColor:"#e6e2e2"}}},xAxis:[{type:"value",axisPointer:{label:{show:!0,formatter:function(e){e.seriesData[0]&&(target.setValue("x0",e.value),target.setValue("y0",e.seriesData[0].data[1]),target.trigger("handleChange1"),1==n&&(0==r&&a(),r=!1));var t=e.value-0;return"number"==typeof t&&t==t?t.toFixed(2):null},backgroundColor:"#666"},lineStyle:{color:"blue",width:2},handle:{show:!0,size:30,margin:40},value:o,snap:!1}},{axisPointer:_defineProperty({snap:!0,label:{formatter:function(e){e.seriesData[0]&&(target.setValue("x1",e.value),target.setValue("y1",e.seriesData[0].data[1]),target.trigger("handleChange1"),2==n&&(0==r&&a(),r=!1));var t=e.value-0;return"number"==typeof t&&t==t?t.toFixed(2):null},backgroundColor:"#666"},lineStyle:{color:"red",width:2},handle:{show:!0,size:30,margin:40},value:s},"snap",!1),gridIndex:1}],yAxis:[{splitLine:{show:!0}},{splitLine:{show:!1},gridIndex:1}],dataZoom:[{show:!0,realtime:!0,start:0,end:100,xAxisIndex:[0,1]}],series:[{type:"line",showSymbol:!1,data:valueList,markLine:t,markPoint:l},{type:"line",showSymbol:!1,lineStyle:{normal:{opacity:0}},data:valueList,xAxisIndex:1,yAxisIndex:1}]};target.render(u)};render()}else target.showNoData()})};resource?target.getAttrsByModelId(resource.modelId,function(attrs){var getArr=function(e){var t=[];for(var a in e)for(var r in e[a])for(var n in e[a][r])t.push(e[a][r][n]);return t},sourceValue=(sourceValue=attrs.find(function(e){return"MeasurePointLocate"==e.name}),sourceValue=sourceValue?eval(sourceValue.sourceValue):null,getArr(sourceValue)),dItem=sourceValue.find(function(e){return!!sensor&&sensor.instance==e.name})||sourceValue[0],accessConfigValues=resource.physicalConfig.accessConfigs,subaccessConfigValues=accessConfigValues.filter(function(e){return e.instance==dItem.name}),kpi=subaccessConfigValues.find(function(e){return!!sensor&&e.dataItemId==sensor.kpiId})||subaccessConfigValues[0];!kpi&&console.warn("kpi is "+Object.prototype.call(kpi)),renderFFTEchart(ci,[kpi.dataItemId],time)}):renderFFTEchart()})}}});
//# sourceMappingURL=../../map/solution/customview/FFTEchart.js.map
