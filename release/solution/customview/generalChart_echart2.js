define({on:{init:function(e){var o,l,u=e.target,d=(e.global,u.getValue("global/resource")),g=u.getValue("global/kpi"),a=u.getValue("global/alertTime");a?(a=u.dateHandler(a),l=a.clone(),o=a.clone(),l.addHour(-2),o.addHour(1)):(o=u.dateHandler(),(l=o.clone()).addHour(-2)),l=l.getUTCDateString(),o=o.getUTCDateString();var s=function i(){s=function(){},u.showLoading(),u.hideNoData(),u.getKpiTypeByFilter({hasSingnal:!1},function(e){var a=u.getParameter("id"),t=a?[a]:[d.id],r={includeInstance:!0,queryInstances:"00",isRealTimeData:!1};l&&(r.startTime=l),o&&(r.endTime=o);var n=g&&g.map(function(e){return e.dataItemId})||[];u.getKpiValueList(t,n,null,function(e){if(u.hideLoading(),0<e.length){var d=e.reduce(function(e,a){var t=u.dateHandler(a.arisingTime);return e?t.before(e)?t:e:t},null),a=(e.reduce(function(e,a){var t=u.dateHandler(a.arisingTime);return e?t.after(e)?t:e:t},null),g.map(function(r){return{name:r.kpiName,type:"line",symbolSize:0,data:e.filter(function(e){var a=e.kpiCode,t=e.instance;return r.dataItemId==a&&r.instance==t}).sort(function(e,a){var t=new Date(e.arisingTime);return new Date(a.arisingTime).getTime()-t.getTime()}).map(function(e){var a=new Date(e.arisingTime),t=u.dateHandler(a);u.dateHandler("2017/01/01");return[t.minus(d),e.value]})}})),t={animation:!1,title:{textStyle:{color:"#fff"}},grid:{containLabel:"true",left:"23px",right:"50px"},tooltip:{trigger:"axis",formatter:function(e,a,t){for(var r="",n=0;n<e.length;n++){var i=e[n].value[0],o=e[n].value[1],l=e[n].marker,u=e[n].seriesIndex;r+=l+d.clone().addTimeStamp(i).getDateString("MM/dd,hh:mm:ss")+"<br>",r+=g[u].kpiName+":"+o+"<br>"}return r}},legend:{data:g.map(function(e){return e.kpiName})},toolbox:{feature:{dataZoom:{},restore:{},saveAsImage:{type:"png",name:"综合趋势-工艺参数图",backgroundColor:"#0b2232"}},iconStyle:{normal:{borderColor:"#fff"},emphasis:{borderColor:"#fff"}}},xAxis:{boundaryGap:!1,type:"value",axisLabel:{formatter:function(e){return d.clone().addTimeStamp(e).getDateString("MM/dd,hh:mm:ss")}}},yAxis:{type:"value"},series:a};u.render(t)}else u.showNoData();s=i},r)})};u.off("multiSelectValues2.generalChart2"),u.on("multiSelectValues2.generalChart2",function(e){g=e,d&&g&&s()}),u.off("tree_resourceChange.generalChart2"),u.on("tree_resourceChange.generalChart2",function(e){d=e.resource}),u.off("drawDiagnoseFeatureEchart2.generalChart2"),u.on("drawDiagnoseFeatureEchart2.generalChart2",function(e){l=e[0].getUTCDateString(),o=e[1].getUTCDateString(),d&&g&&s()})}}});
//# sourceMappingURL=../../map/solution/customview/generalChart_echart2.js.map
