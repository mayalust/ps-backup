{"version":3,"sources":["app-oc/js/directives/maintenance-dom.js"],"names":["define","directives","BootstrapDialog","datatables","initDirective","$timeout","$compile","$filter","growl","restrict","controller","$scope","$element","$attrs","table","domMain","$on","event","args","destroy","empty","DataTable","dom","data","length","$","ProudSmart","datatable","footerdom","language","select","order","columns","selectCol","title","visible","baseConfig","customerConfig","display","projectConfig","optionCol3","columnDefs","targets","orderable","render","type","full","processTypeDic","name","customersDic","customerName","projectsDic","projectName","devicesListDic","label","enterpriseListDic","userName","str","menuitems","taskStatus","id","nextExecutioner","rowCallback","nRow","aData","iDataIndex","selected","addClass","removeClass","on","e","stopPropagation","target","checked","rows","tableRows","i","nodes","row","invalidate","draw","deselect","selectedHandler","tr","this","closest","count","attr","prop","selectedDelete","selectedCount","show","closable","message","buttons","cssClass","action","dialogRef","selArr","rowData","push","doAction","close","warning","selectedStatus","status","successCount","errorCount","managedStatus","doActiveHanddler","node","cells","success","preventDefault","addMain","statusSave","res","isEdit","tds","parents","children","checkPass","each","val","jqob","txt","html","cell","flg","isDel","remove","optionCol1","undefined","rootModelDic","location","href","$parse","link","scope","element","attrs","require","calendar","tmp","init","selectData","fullCalendar","header","left","center","right","height","buttonText","today","month","week","day","timeFormat","monthNames","dayNamesShort","editable","events","droppable","dayClick","date","allDay","jsEvent","view","newData","_d","Format","checkDate","executioner","d","selectArray","maxValue","timeArr","hourselect","minuteselect","secondselect","selectList","dataStr","Date","currentDate","endDate","startDate","parse","replace","nextExecutionTime","update","window","history","back","$watch","ngModel","n","o","s","fullData","$evalAsync","j","obj","newDate","operationStatus","b"],"mappings":"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","file":"app-oc/js/directives/maintenance-dom.js","sourcesContent":["define(['directives/directives', 'bootstrap-dialog', 'datatables.net', 'datatables.net-bs', 'datatables.net-select'], function (directives, BootstrapDialog, datatables) {\n  'use strict';\n\n  directives.initDirective('maintenanceTaskDom', ['$timeout', '$compile', '$filter', 'growl', function ($timeout, $compile, $filter, growl) {\n    return {\n      restrict: 'A',\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        var domMain = $element;\n        var table;\n        var isEditing = false;\n        var itemAttrs;\n        $scope.$on(\"MAINTENANCE\", function (event, args) {\n          if (table) {\n            table.destroy();\n            domMain.empty();\n          }\n\n          isEditing = false;\n          table = domMain.DataTable({\n            dom: args.data && args.data.length > 0 ? $.ProudSmart.datatable.footerdom : '',\n            language: $.ProudSmart.datatable.language,\n            data: args.data,\n            select: $.ProudSmart.datatable.select,\n            order: [[11, \"desc\"]],\n            columns: [$.ProudSmart.datatable.selectCol, {\n              data: \"name\",\n              title: \"计划名称\"\n            }, {\n              data: \"ticketCategoryId\",\n              title: \"维保类型\"\n            }, {\n              data: \"customerId\",\n              visible: $scope.baseConfig.customerConfig.display,\n              title: \"客户\"\n            }, {\n              data: \"projectId\",\n              title: \"项目\",\n              visible: $scope.baseConfig.projectConfig.display\n            }, {\n              data: \"deviceId\",\n              title: \"维保设备\"\n            }, {\n              data: \"nextExecutionTime\",\n              title: \"下次执行时间\"\n            }, {\n              data: \"nextExecutioner\",\n              title: \"下次执行人\"\n            }, {\n              data: \"operationStatus\",\n              title: \"运行状态\"\n            }, {\n              data: \"taskStatus\",\n              title: \"计划状态\"\n            }, $.ProudSmart.datatable.optionCol3, {\n              data: \"createTime\",\n              title: \"\",\n              visible: false\n            }],\n            columnDefs: [{\n              \"targets\": 0,\n              orderable: false,\n              \"render\": function render(data, type, full) {\n                // 返回自定义内容\n                if (type == \"display\") {\n                  if (data) {\n                    return '<input class=\"itemCheckBox\" checked type=\"checkbox\">';\n                  } else {\n                    return '<input class=\"itemCheckBox\" type=\"checkbox\">';\n                  }\n                }\n\n                return \"\";\n              }\n            }, {\n              \"targets\": 2,\n              \"data\": \"ticketCategoryId\",\n              \"render\": function render(data, type, full) {\n                if ($scope.processTypeDic && $scope.processTypeDic[data]) {\n                  return $scope.processTypeDic[data].name;\n                }\n\n                return \"\";\n              }\n            }, {\n              \"targets\": 3,\n              \"data\": \"customerId\",\n              \"render\": function render(data, type, full) {\n                // 返回自定义内容\n                if ($scope.customersDic && $scope.customersDic[data]) {\n                  return $scope.customersDic[data].customerName;\n                }\n\n                return \"\";\n              }\n            }, {\n              \"targets\": 4,\n              \"data\": \"projectId\",\n              \"render\": function render(data, type, full) {\n                // 返回自定义内容\n                if ($scope.projectsDic && $scope.projectsDic[data]) {\n                  return $scope.projectsDic[data].projectName;\n                }\n\n                return \"\";\n              }\n            }, {\n              \"targets\": 5,\n              \"data\": \"deviceId\",\n              \"render\": function render(data, type, full) {\n                // 返回自定义内容\n                if ($scope.devicesListDic && $scope.devicesListDic[data]) {\n                  return $scope.devicesListDic[data].label;\n                }\n\n                return \"\";\n              }\n            }, {\n              \"targets\": 6,\n              \"data\": \"nextExecutionTime\",\n              \"render\": function render(data, type, full) {\n                // 返回自定义内容\n                var str = $filter('date')(data, 'yyyy-MM-dd');\n                return str;\n              }\n            }, {\n              \"targets\": 7,\n              \"data\": \"executioner\",\n              \"render\": function render(data, type, full) {\n                if ($scope.enterpriseListDic && $scope.enterpriseListDic[data]) {\n                  return $scope.enterpriseListDic[data].userName;\n                }\n\n                return \"\";\n              }\n            }, {\n              \"targets\": 8,\n              \"data\": \"operationStatus\",\n              \"render\": function render(data, type, full) {\n                var str = '';\n\n                if (data == 0) {\n                  str += '未到期';\n                } else if (data == 1) {\n                  str += '待分配';\n                } else if (data == 2) {\n                  str += '已分配';\n                } else if (data == 3) {\n                  str += '待执行';\n                } else if (data == 4) {\n                  str += '已完成';\n                }\n\n                return str;\n              }\n            }, {\n              \"targets\": 9,\n              \"data\": \"taskStatus\",\n              \"render\": function render(data, type, full) {\n                var str = '';\n\n                if (data == 0) {\n                  str += '启用';\n                } else if (data == 1) {\n                  str += '停用';\n                }\n\n                return str;\n              }\n            }, {\n              targets: 10,\n              data: \"option\",\n              render: function render(data, type, full) {\n                // 返回自定义内容\n                var str = \"<div class='btn-group btn-group-sm'>\";\n\n                if ($scope.menuitems['A05_S47']) {\n                  str += \"<button id='edit-btn'  class='btn btn-primary' ><i class='fa fa-edit hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 编辑</span></button>\";\n                }\n\n                if (full.taskStatus == 1) {\n                  if ($scope.menuitems['A06_S47']) {\n                    str += \"<button id='del-btn'   class='btn btn-default' ><i class='fa fa-trash hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 删除</span></button>\";\n                  }\n                } else {\n                  if ($scope.menuitems['A06_S47']) {\n                    str += \"<button  disabled class='btn btn-default' ><i class='fa fa-trash hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 删除</span></button>\";\n                  }\n                }\n\n                if ($scope.menuitems['A04_S47'] || $scope.menuitems['A03_S47'] || $scope.menuitems['A01_S47']) {\n                  str += \"<button type='button' class='btn btn-default dropdown-toggle' data-toggle='dropdown'> 更多<span class='caret'></span></button>\";\n                }\n\n                str += \"<ul class='dropdown-menu' role='menu'>\";\n\n                if ($scope.menuitems['A01_S47']) {\n                  str += \"<li><a role='button' href='#/calendarData/\" + full.id + \"/\" + full.nextExecutioner + \"' id='design-btn'>指派</a></li>\";\n                }\n\n                if (full.taskStatus == 0) {\n                  if ($scope.menuitems['A04_S47']) {\n                    str += \"<li><a role='button'  id='disable-btn'>停用</a></li>\";\n                  }\n                } else if (full.taskStatus == 1) {\n                  if ($scope.menuitems['A03_S47']) {\n                    str += \"<li><a role='button'  id='disable-btn'>启用</a></li>\";\n                  }\n                }\n\n                str += \"</ul></div>\";\n                return str;\n              }\n            }],\n            rowCallback: function rowCallback(nRow, aData, iDataIndex) {\n              if (aData.selected) {\n                $(nRow).addClass(\"selected\");\n              } else {\n                $(nRow).removeClass(\"selected\");\n              }\n\n              $compile(nRow)($scope);\n            }\n          });\n        });\n        domMain.on('change', '#allselect-btn', function (e) {\n          e.stopPropagation();\n\n          if (e.target.checked) {\n            table.rows().select();\n            var tableRows = table.rows({\n              selected: true\n            });\n\n            for (var i = 0; i < tableRows.nodes().length; i++) {\n              var row = table.row(tableRows.nodes()[i]);\n              row.data().selected = true;\n            }\n\n            ;\n            table.rows().invalidate().draw(false);\n          } else {\n            var tableRows = table.rows({\n              selected: true\n            });\n\n            for (var i = 0; i < tableRows.nodes().length; i++) {\n              var row = table.row(tableRows.nodes()[i]);\n              row.data().selected = false;\n            }\n\n            ;\n            table.rows().deselect();\n            table.rows().invalidate().draw(false);\n          }\n\n          $scope.selectedHandler();\n        });\n        domMain.on('change', '.itemCheckBox', function (e) {\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n\n          if (e.target.checked) {\n            row.data().selected = true;\n          } else {\n            row.data().selected = false;\n          }\n\n          var tableRows = table.rows({\n            selected: true\n          });\n\n          if (tableRows.count() != table.rows()[0].length) {\n            $('#allselect-btn').attr('checked', false);\n            $('#allselect-btn').prop('checked', false);\n          } else if (tableRows.count() == table.rows()[0].length) {\n            $('#allselect-btn').attr('checked', true);\n            $('#allselect-btn').prop('checked', true);\n          }\n\n          $scope.selectedHandler();\n        }); //批量删除\n\n        $scope.selectedDelete = function () {\n          var tableRows = table.rows({\n            selected: true\n          });\n          var selectedCount = tableRows.count();\n          var nodes = tableRows.nodes();\n\n          if (selectedCount == 0) {\n            growl.warning(\"当前没有选中\", {});\n            return;\n          }\n\n          BootstrapDialog.show({\n            title: '提示',\n            closable: false,\n            //size:BootstrapDialog.SIZE_WIDE,\n            message: '确认删除这 ' + selectedCount + ' 条记录吗？',\n            buttons: [{\n              label: '确定',\n              cssClass: 'btn-success',\n              action: function action(dialogRef) {\n                var selArr = [];\n\n                for (var i = 0; i < nodes.length; i++) {\n                  var row = table.row(nodes[i]);\n                  var rowData = row.data();\n                  selArr.push(rowData.id);\n                }\n\n                ;\n\n                if (selArr.length == nodes.length) {\n                  $scope.doAction(\"delete2\", selArr);\n                }\n\n                dialogRef.close();\n              }\n            }, {\n              label: '取消',\n              action: function action(dialogRef) {\n                dialogRef.close();\n              }\n            }]\n          });\n        }; //批量停用启用\n\n\n        $scope.selectedStatus = function (status) {\n          var tableRows = table.rows({\n            selected: true\n          });\n          var selectedCount = tableRows.count();\n          var nodes = tableRows.nodes();\n\n          if (selectedCount == 0) {\n            growl.warning(\"当前没有选中\", {});\n            return;\n          }\n\n          BootstrapDialog.show({\n            title: '提示',\n            closable: false,\n            //size:BootstrapDialog.SIZE_WIDE,\n            message: '确认您所选择的 ' + selectedCount + ' 条记录吗？',\n            buttons: [{\n              label: '确定',\n              cssClass: 'btn-success',\n              action: function action(dialogRef) {\n                var successCount = 0;\n                var errorCount = 0;\n\n                for (var i = 0; i < nodes.length; i++) {\n                  var row = table.row(nodes[i]);\n                  var rowData = row.data();\n\n                  if (rowData.managedStatus == 'deactive') {\n                    $scope.doActiveHanddler(rowData, function (status, node) {\n                      if (status) {\n                        table.row(node).data().managedStatus = \"active\";\n                        table.row(node).cells().invalidate().draw(false);\n                        successCount++;\n                      } else {\n                        errorCount++;\n                      }\n\n                      if (selectedCount == successCount + errorCount) {\n                        table.rows().deselect();\n                        growl.success(\"成功启用设备\" + successCount + \"台,失败\" + errorCount + \"台\", {});\n                      }\n                    }, nodes[i]);\n                  }\n                }\n\n                ;\n                dialogRef.close();\n              }\n            }, {\n              label: '取消',\n              action: function action(dialogRef) {\n                dialogRef.close();\n              }\n            }]\n          });\n        };\n\n        domMain.on('click', '#edit-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          $scope.addMain(row.data());\n        });\n        domMain.on('click', '#disable-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          var d = row.data();\n\n          if (d.taskStatus == 0) {\n            $scope.statusSave([row.data().id], 1, function (res) {\n              if (res) {\n                row.data().taskStatus = 1;\n                row.cells().invalidate().draw(false);\n              }\n            });\n          } else {\n            $scope.statusSave([row.data().id], 0, function (res) {\n              if (res) {\n                row.data().taskStatus = 0;\n                row.cells().invalidate().draw(false);\n              }\n            });\n          }\n        });\n        domMain.on('click', '#save-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          var rowData = row.data();\n\n          if (rowData.isEdit == 2 || rowData.isEdit == 3) {\n            var tds = $(this).parents(\"tr\").children();\n            var checkPass = true;\n            $.each(tds, function (i, val) {\n              var jqob = $(val);\n\n              if (i == 0) {\n                if (jqob.children(\"input\").length > 0) {\n                  var txt = jqob.children(\"input\").val();\n\n                  if (!txt) {\n                    growl.warning(\"视图名称不能空\");\n                    checkPass = false;\n                    return false;\n                  }\n                }\n              }\n\n              if (i == 0 || i == 1) {\n                var txt = jqob.children(\"input\").val();\n                jqob.html(txt);\n                table.cell(jqob).data(txt); //修改DataTables对象的数据\n              }\n            });\n          }\n\n          if (checkPass) {\n            $scope.doAction(\"view-save\", rowData, function (flg) {\n              if (flg) {\n                isEditing = false;\n                row.data().isEdit = 0;\n                row.cells().invalidate();\n              }\n            });\n          }\n        });\n        domMain.on('click', '#cancel-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          var rowData = row.data();\n          isEditing = false;\n          row.data().isEdit = 0;\n          row.cells().invalidate();\n        });\n        domMain.on('click', '#del-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          row.data().isDel = true;\n          var rowData = row.data();\n          $scope.doAction(\"delete\", rowData, function (flg) {\n            if (flg) row.remove().draw(false);\n          });\n        });\n      }]\n    };\n  }]);\n  directives.initDirective('maintenanceRecordDom', ['$timeout', '$compile', '$filter', 'growl', function ($timeout, $compile, $filter, growl) {\n    return {\n      restrict: 'A',\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        var domMain = $element;\n        var table;\n        var isEditing = false;\n        var itemAttrs;\n        $scope.$on(\"RECORD\", function (event, args) {\n          if (table) {\n            table.destroy();\n            domMain.empty();\n          }\n\n          isEditing = false;\n          table = domMain.DataTable({\n            dom: args.data && args.data.length > 0 ? $.ProudSmart.datatable.footerdom : '',\n            language: $.ProudSmart.datatable.language,\n            data: args.data,\n            order: [[8, \"desc\"]],\n            columns: [{\n              data: \"taskName\",\n              title: \"任务名称\"\n            }, {\n              data: \"type\",\n              title: \"维保类型\"\n            }, {\n              data: \"serverType\",\n              title: \"服务类别\"\n            }, {\n              data: \"modelName\",\n              title: \"设备模板\"\n            }, {\n              data: \"deviceId\",\n              title: \"设备名称\"\n            }, {\n              data: \"maintenanceTime\",\n              title: \"维保时间\"\n            }, {\n              data: \"executioner\",\n              title: \"执行人\"\n            }, $.ProudSmart.datatable.optionCol1, {\n              data: \"createTime\",\n              title: \"\",\n              visible: false\n            }],\n            columnDefs: [{\n              targets: 1,\n              data: \"type\",\n              render: function render(data, type, full) {\n                if ($scope.processTypeDic && $scope.processTypeDic[data]) {\n                  return $scope.processTypeDic[data].name;\n                }\n\n                return \"\";\n              }\n            }, {\n              targets: 2,\n              data: \"serverType\",\n              render: function render(data, type, full) {\n                var str = \"\";\n\n                if (data == \"0\") {\n                  str = \"保内\";\n                } else if (data == \"1\") {\n                  str = \"保外\";\n                }\n\n                return str;\n              }\n            }, {\n              targets: 3,\n              data: \"modelName\",\n              render: function render(data, type, full) {\n                var str = \"\";\n\n                if ($scope.rootModelDic[data] != undefined) {\n                  if (data != \"\" && data != undefined) {\n                    str = $scope.rootModelDic[data].label;\n                  }\n                }\n\n                return data;\n              }\n            }, {\n              targets: 4,\n              data: \"deviceId\",\n              render: function render(data, type, full) {\n                if ($scope.devicesListDic && $scope.devicesListDic[data]) {\n                  return $scope.devicesListDic[data].label;\n                }\n\n                return \"\";\n              }\n            }, {\n              targets: 5,\n              data: \"maintenanceTime\",\n              render: function render(data, type, full) {\n                return $filter('date')(data, 'yyyy-MM-dd');\n              }\n            }, {\n              targets: 6,\n              data: \"executioner\",\n              render: function render(data, type, full) {\n                if ($scope.enterpriseListDic && $scope.enterpriseListDic[data]) {\n                  return $scope.enterpriseListDic[data].userName;\n                }\n\n                return \"\";\n              }\n            }, {\n              targets: 7,\n              data: \"option\",\n              render: function render(data, type, full) {\n                // 返回自定义内容\n                var str = \"<div class='btn-group btn-group-sm'>\";\n\n                if ($scope.menuitems['A01_S48']) {\n                  str += \"<button id='look-btn'  class='btn btn-primary' ><i class='fa fa-edit hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 查看</span></button>\";\n                }\n\n                return str;\n              }\n            }]\n          });\n        });\n        domMain.on('click', '#look-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          row.data().isDel = true;\n          var rowData = row.data(); // location.href = '../app-oc/index.html#/orderdetail/' + rowData.ticketNo + '/task/message';\n\n          location.href = '../app-oc/index.html#/conditionDetail/' + rowData.id + '';\n        });\n      }]\n    };\n  }]);\n  directives.initDirective('calendarData', [\"$timeout\", \"$parse\", 'growl', function ($timeout, $parse, growl) {\n    return {\n      restrict: 'A',\n      link: function link(scope, element, attrs) {\n        require(['fullcalendar'], function (calendar) {\n          var value = attrs['value'];\n          var tmp = 1;\n\n          var init = function init(selectData) {\n            element.fullCalendar({\n              header: {\n                left: 'prev,next today',\n                center: 'title',\n                right: 'month,agendaWeek,agendaDay'\n              },\n              height: \"auto\",\n              buttonText: {\n                today: '今天',\n                month: '月',\n                week: '周',\n                day: '天'\n              },\n              timeFormat: 'H:mm:ss',\n              monthNames: [\"一月\", \"二月\", \"三月\", \"四月\", \"五月\", \"六月\", \"七月\", \"八月\", \"九月\", \"十月\", \"十一月\", \"十二月\"],\n              dayNamesShort: ['日', '一', '二', '三', '四', '五', '六'],\n              editable: true,\n              events: selectData,\n              droppable: true,\n              // this allows things to be dropped onto the calendar !!!\n              //日程点击：添加日程\n              dayClick: function dayClick(date, allDay, jsEvent, view) {\n                // var startTime= (new Date(date._d)).getTime();\n                // var time= (new Date()).getTime();\n                var newData = date._d.Format(\"yyyy-MM-dd\");\n\n                var ckTime = checkDate(newData);\n\n                if (ckTime == false) {\n                  growl.warning(\"您选择的时间小于当前时间\", {});\n                  return;\n                }\n\n                if (scope.executioner == '' || scope.executioner == null) {\n                  growl.warning(\"请选择任务执行人\", {});\n                  return;\n                }\n\n                var d = date._d.Format(\"yyyy-MM-dd\");\n\n                var selectArray = function selectArray(maxValue) {\n                  var timeArr = '';\n\n                  for (var i = 0; i < maxValue; i++) {\n                    timeArr += '<option value=\"' + i + '\">' + i + '</option>';\n                  }\n\n                  return timeArr;\n                };\n\n                var dataCheck = function dataCheck(endDate, startDate) {\n                  var date1 = new Date(Date.parse(startDate.replace(\"-\", \"/\")));\n                  var date2 = new Date(Date.parse(endDate.replace(\"-\", \"/\")));\n                  return date1 < date2;\n                };\n\n                var hourselect = selectArray(24);\n                var minuteselect = selectArray(60);\n                var secondselect = selectArray(60);\n                BootstrapDialog.show({\n                  title: '提示',\n                  closable: false,\n                  //size:BootstrapDialog.SIZE_WIDE,\n                  message: '确认要选择' + d + ' <select id=\"hourselect\">' + hourselect + '</select>:<select id=\"minuteselect\">' + minuteselect + '</select>:<select id=\"secondselect\">' + secondselect + '</select>执行吗？',\n                  buttons: [{\n                    label: '确定',\n                    cssClass: 'btn-success',\n                    action: function action(dialogRef) {\n                      if (scope.selectList.length > 0) {\n                        var data = scope.selectList;\n                        var dataStr = d + ' ' + $('#hourselect').val() + ':' + $('#minuteselect').val() + ':' + $('#secondselect').val() + '';\n                        var newData = new Date(dataStr).Format(\"yyyy-MM-dd hh:mm:ss\");\n                        var currentDate = new Date().Format(\"yyyy-MM-dd hh:mm:ss\");\n                        var ckTime = dataCheck(newData, currentDate);\n\n                        if (ckTime == false) {\n                          growl.warning(\"您选择的时间小于当前时间\", {});\n                          return;\n                        }\n\n                        data[0].nextExecutionTime = new Date(dataStr);\n                        data[0].nextExecutioner = scope.executioner;\n                        scope.update(data, function (res) {\n                          if (res) {\n                            growl.success(\"保存成功\", {});\n                            window.history.back();\n                          }\n                        });\n                      }\n\n                      dialogRef.close();\n                    }\n                  }, {\n                    label: '取消',\n                    action: function action(dialogRef) {\n                      dialogRef.close();\n                    }\n                  }]\n                });\n              }\n            });\n          };\n\n          scope.$watch(attrs.ngModel, function (n, o, s) {\n            var fullData = [];\n            tmp++;\n\n            if (n.length > 0) {\n              scope.$evalAsync(function () {\n                for (var j in n) {\n                  var obj = {};\n                  obj[\"title\"] = n[j].name;\n\n                  if (n[j].nextExecutionTime) {\n                    var newDate = new Date(n[j].nextExecutionTime);\n                    obj[\"start\"] = newDate.Format(\"yyyy-MM-dd hh:mm:ss\");\n                  }\n\n                  if (n[j].operationStatus == 0) {\n                    //未到期\n                    obj[\"backgroundColor\"] = \"#3c8dbc\";\n                    obj[\"borderColor\"] = \"#3c8dbc\";\n                  } else if (n[j].operationStatus == 1) {\n                    //待分配\n                    obj[\"backgroundColor\"] = \"#f39c12\";\n                    obj[\"borderColor\"] = \"#f39c12\";\n                  } else if (n[j].operationStatus == 2) {\n                    //已分配\n                    obj[\"backgroundColor\"] = \"#00c0ef\";\n                    obj[\"borderColor\"] = \"#00c0ef\";\n                  } else if (n[j].operationStatus == 3) {\n                    //待执行\n                    obj[\"backgroundColor\"] = \"#dd4b39\";\n                    obj[\"borderColor\"] = \"#dd4b39\";\n                  }\n                  /* else if (n[j].operationStatus == 4) {//已完成\n                     obj[\"backgroundColor\"] = \"#00a65a\";\n                     obj[\"borderColor\"] = \"#00a65a\";\n                   }*/\n\n\n                  if (n[j].operationStatus != 4) {\n                    fullData.push(obj);\n                  }\n                }\n\n                if (tmp == 2) {\n                  init(fullData);\n                } else {\n                  element.fullCalendar('removeEvents');\n\n                  for (var b in fullData) {\n                    element.fullCalendar('renderEvent', fullData[b], true);\n                  }\n\n                  element.fullCalendar('unselect');\n                }\n              });\n            } else {\n              if (tmp == 2) {\n                init(fullData);\n              } else {\n                element.fullCalendar('removeEvents');\n              }\n              /* var obj = {};\n               obj[\"title\"] = \"测试333\";\n               var newDate = new Date();\n               obj[\"start\"] = newDate.Format(\"yyyy-MM-dd\");\n               fullData.push(obj);\n               element.fullCalendar('renderEvent', {\n               id: \"88888888\",\n               title: \"999999\",\n               start: newDate\n               }, true);\n               element.fullCalendar('unselect');*/\n\n            }\n          });\n        });\n      }\n    };\n  }]);\n});"],"sourceRoot":"/source/"}