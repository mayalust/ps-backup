{"version":3,"sources":["app-oc/js/directives/calendar-dom.js"],"names":["define","directives","initDirective","$timeout","restrict","controller","$scope","$element","$attrs","ini_events","ele","each","eventObject","title","$","trim","this","text","data","draggable","zIndex","revert","revertDuration","$on","event","args","domMain","date","Date","d","getDate","m","getMonth","y","getFullYear","fullCalendar","header","left","center","right","buttonText","today","month","week","day","events","start","backgroundColor","borderColor","end","allDay","url","editable","droppable","drop","originalEventObject","copiedEventObject","extend","css","is","remove","currColor","click","e","preventDefault","background-color","border-color","val","length","color","addClass","html","prepend","launchExample"],"mappings":"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","file":"app-oc/js/directives/calendar-dom.js","sourcesContent":["define(['directives/directives'], function (directives) {\n  'use strict';\n\n  directives.initDirective('calendarDiv', ['$timeout', function ($timeout) {\n    return {\n      restrict: 'AE',\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        function ini_events(ele) {\n          ele.each(function () {\n            // create an Event Object (http://arshaw.com/fullcalendar/docs/event_data/Event_Object/)\n            // it doesn't need to have a start or end\n            var eventObject = {\n              title: $.trim($(this).text()) // use the element's text as the event title\n\n            }; // store the Event Object in the DOM element so we can get to it later\n\n            $(this).data('eventObject', eventObject); // make the event draggable using jQuery UI\n\n            $(this).draggable({\n              zIndex: 1070,\n              revert: true,\n              // will cause the event to go back to its\n              revertDuration: 0 //  original position after the drag\n\n            });\n          });\n        }\n\n        ini_events($('#external-events div.external-event'));\n\n        var launchExample = function launchExample() {\n          var domMain = $element;\n          /* initialize the calendar\n           -----------------------------------------------------------------*/\n          //Date for the calendar events (dummy data)\n\n          var date = new Date();\n          var d = date.getDate(),\n              m = date.getMonth(),\n              y = date.getFullYear();\n          domMain.fullCalendar({\n            header: {\n              left: 'prev,next today',\n              center: 'title',\n              right: 'month,agendaWeek,agendaDay'\n            },\n            buttonText: {\n              today: 'today',\n              month: 'month',\n              week: 'week',\n              day: 'day'\n            },\n            //Random default events\n            events: [{\n              title: '办公会议',\n              start: new Date(y, m, 1),\n              backgroundColor: \"#f56954\",\n              //red\n              borderColor: \"#f56954\" //red\n\n            }, {\n              title: '新设备上线测试',\n              start: new Date(y, m, d - 5),\n              end: new Date(y, m, d - 2),\n              backgroundColor: \"#f39c12\",\n              //yellow\n              borderColor: \"#f39c12\" //yellow\n\n            }, {\n              title: '会议',\n              start: new Date(y, m, d, 10, 30),\n              allDay: false,\n              backgroundColor: \"#0073b7\",\n              //Blue\n              borderColor: \"#0073b7\" //Blue\n\n            }, {\n              title: '巡检',\n              start: new Date(y, m, d, 12, 0),\n              end: new Date(y, m, d, 14, 0),\n              allDay: false,\n              backgroundColor: \"#00c0ef\",\n              //Info (aqua)\n              borderColor: \"#00c0ef\" //Info (aqua)\n\n            }, {\n              title: '下线',\n              start: new Date(y, m, d + 1, 19, 0),\n              end: new Date(y, m, d + 1, 22, 30),\n              allDay: false,\n              backgroundColor: \"#00a65a\",\n              //Success (green)\n              borderColor: \"#00a65a\" //Success (green)\n\n            }, {\n              title: '查看Dashboard',\n              start: new Date(y, m, 28),\n              end: new Date(y, m, 29),\n              url: '#/dashboard2',\n              backgroundColor: \"#3c8dbc\",\n              //Primary (light-blue)\n              borderColor: \"#3c8dbc\" //Primary (light-blue)\n\n            }],\n            editable: true,\n            droppable: true,\n            // this allows things to be dropped onto the calendar !!!\n            drop: function drop(date, allDay) {\n              // this function is called when something is dropped\n              // retrieve the dropped element's stored Event Object\n              var originalEventObject = $(this).data('eventObject'); // we need to copy it, so that multiple events don't have a reference to the same object\n\n              var copiedEventObject = $.extend({}, originalEventObject); // assign it the date that was reported\n\n              copiedEventObject.start = date;\n              copiedEventObject.allDay = allDay;\n              copiedEventObject.backgroundColor = $(this).css(\"background-color\");\n              copiedEventObject.borderColor = $(this).css(\"border-color\"); // render the event on the calendar\n              // the last `true` argument determines if the event \"sticks\" (http://arshaw.com/fullcalendar/docs/event_rendering/renderEvent/)\n\n              domMain.fullCalendar('renderEvent', copiedEventObject, true); // is the \"remove after drop\" checkbox checked?\n\n              if ($('#drop-remove').is(':checked')) {\n                // if so, remove the element from the \"Draggable Events\" list\n                $(this).remove();\n              }\n            }\n          });\n          /* ADDING EVENTS */\n\n          var currColor = \"#3c8dbc\"; //Red by default\n          //Color chooser button\n\n          var colorChooser = $(\"#color-chooser-btn\");\n          $(\"#color-chooser > li > a\").click(function (e) {\n            e.preventDefault(); //Save color\n\n            currColor = $(this).css(\"color\"); //Add color effect to button\n\n            $('#add-new-event').css({\n              \"background-color\": currColor,\n              \"border-color\": currColor\n            });\n          });\n          $(\"#add-new-event\").click(function (e) {\n            e.preventDefault(); //Get value and make sure it is not null\n\n            var val = $(\"#new-event\").val();\n\n            if (val.length == 0) {\n              return;\n            } //Create events\n\n\n            var event = $(\"<div />\");\n            event.css({\n              \"background-color\": currColor,\n              \"border-color\": currColor,\n              \"color\": \"#fff\"\n            }).addClass(\"external-event\");\n            event.html(val);\n            $('#external-events').prepend(event); //Add draggable funtionality\n\n            ini_events(event); //Remove event from text input\n\n            $(\"#new-event\").val(\"\");\n          });\n        };\n\n        $scope.$on('CalendarStatusInit', function (event, args) {\n          launchExample();\n        });\n      }]\n    };\n  }]);\n});"],"sourceRoot":"/source/"}