{"version":3,"sources":["app-oc/js/directives/enterprise-dom.js"],"names":["define","directives","BootstrapDialog","datatables","jszip","initDirective","$timeout","ngDialog","$compile","$filter","growl","restrict","controller","$scope","$element","$attrs","table","domMain","window","JSZip","$on","Event","ENTERPRISEINIT","event","args","destroy","empty","columns","data","title","visible","$","ProudSmart","datatable","optionCol3","DataTable","dom","footerdom","language","select","processing","serverSide","ordering","aaSorting","ajax","pipeline","columnDefs","targets","render","type","full","escape","item","industryType","industryList","i","valueCode","province","city","county","periodList","dialog","list","id","str","rowCallback","nRow","aData","iDataIndex","drawCallback","settings","this","api","length","arrLength","push","fn","dataTable","Buttons","buttons","extend","text","exportOptions","container","appendTo","hide","on","e","preventDefault","tr","closest","row","provinceClick","cityClick","input","open","template","className","scope","doAction","returnObj","code","remove","draw","rowData","location","href","trim","stopPropagation","target","checked","rows","invalidate","tableRows","selected","nodes","children","prop","deselect","selectedCount","count","$apply","attr","selectedDelete","successCount","errorCount","enterpriseIdAry","ifGo","each","warning","selectCol","ifShowEnter","option","order","orderable","ary","enterpriseList","filter","name","useMomentFormat","energyConsumeNodeName","userLoginUIService","Date","Format","split","statisticsType","quarter","statisticsQuarter","forEach","severityStr","user","userType","commitStatus","success","failObjTotal","failObj","successObjTotal","successObj","ifEnterprise","EnterprisesDic","label","splice","lastCompleteStatus"],"mappings":"AAAAA,OAAO,CAAC,wBAAyB,mBAAoB,iBAAkB,QAAS,oBAAqB,wBAAyB,4BAA6B,4BAA6B,SAAUC,EAAYC,EAAiBC,EAAYC,GACzO,aAEAH,EAAWI,cAAc,sBAAuB,CAAC,WAAY,WAAY,WAAY,UAAW,QAAS,SAAUC,EAAUC,EAAUC,EAAUC,EAASC,GACxJ,MAAO,CACLC,SAAU,IACVC,WAAY,CAAC,SAAU,WAAY,SAAU,SAAUC,EAAQC,EAAUC,GACvE,IACIC,EADAC,EAAUH,EAGdI,OAAOC,MAAQf,EACfS,EAAOO,IAAIC,MAAMC,eAAiB,QAAS,SAAUC,EAAOC,GACtDR,IACFA,EAAMS,UACNR,EAAQS,SAGV,IAAIC,EAAU,CACd,CACEC,KAAM,OACNC,MAAO,QACN,CACDD,KAAM,eACNC,MAAO,QACN,CACDD,KAAM,UACNC,MAAO,QACN,CACDD,KAAM,iBACNC,MAAO,UACN,CACDD,KAAM,aACNC,MAAO,GACPC,SAAS,GACRC,EAAEC,WAAWC,UAAUC,YAC1BlB,EAAQC,EAAQkB,UAAU,CACxBC,IAAK,uCAAyCL,EAAEC,WAAWC,UAAUI,UACrEC,SAAUP,EAAEC,WAAWC,UAAUK,SACjCC,OAAQR,EAAEC,WAAWC,UAAUM,OAC/BC,YAAY,EACZC,YAAY,EACZC,UAAU,EACVC,UAAW,CAAC,CAAC,EAAG,SAChBC,KAAM/B,EAAOgC,WACblB,QAASA,EACTmB,WAAY,CAeZ,CACEC,QAAW,EACXnB,KAAQ,OACRoB,OAAU,SAAgBpB,EAAMqB,EAAMC,GACpC,OAAOC,OAAOvB,KAEf,CACDmB,QAAW,EACXnB,KAAQ,eACRoB,OAAU,SAAgBpB,EAAMqB,EAAMC,GACpC,IAAIE,EAAO,GACPC,EAAexC,EAAOyC,aAE1B,IAAK,IAAIC,KAAKF,EACZ,GAAIA,EAAaE,GAAGC,WAAa5B,EAE/B,OADAwB,EAAOC,EAAaE,GAAG,KAK3B,IAAKH,EACH,MAAO,MAGV,CACDL,QAAW,EACXnB,KAAQ,UACRoB,OAAU,SAAgBpB,EAAMqB,EAAMC,GACpC,OAAIA,EAAKO,UAAYP,EAAKQ,MAAQR,EAAKS,OAC9BT,EAAKS,OACHT,EAAKO,UAAYP,EAAKQ,OAASR,EAAKS,OACtCT,EAAKQ,KAELR,EAAKO,WAGf,CACDV,QAAW,EACXnB,KAAQ,iBACRoB,OAAU,SAAgBpB,EAAMqB,EAAMC,GACpC,IAAIE,EAAO,GACPQ,EAAa/C,EAAOgD,OAAOC,KAAKF,WAEpC,IAAK,IAAIL,KAAKK,EACZ,GAAIA,EAAWL,GAAGQ,IAAMnC,EAAM,CAC5BwB,EAAOQ,EAAWL,GAAG,MACrB,MAIJ,OAAOH,IAER,CACDL,QAAW,EACXnB,KAAQ,SACRoB,OAAU,SAAgBpB,EAAMqB,EAAMC,GACpC,IAAIc,EAAM,uCAUV,OATAA,GAAO,4JACPA,GAAO,yJACPA,GAAO,uIACPA,GAAO,yCACPA,GAAO,uCAAyCd,EAAKa,GAAK,kBAC1DC,GAAO,+BAAiCd,EAAKa,GAAK,kBAClDC,GAAO,qCAAuCd,EAAKa,GAAK,oBACxDC,GAAO,yCAA2Cd,EAAKa,GAAK,oBAC5DC,GAAO,iBAIXC,YAAa,SAAqBC,EAAMC,EAAOC,GAC7C5D,EAAS0D,EAAT1D,CAAeK,IAEjBwD,aAAc,SAAsBC,GAGlC,GAAwB,EAFdC,KAAKC,MAEP5C,OAAO6C,OAAY,CAIzB,IAHA,IACIC,EAAY,GAEPnB,EAAI,EAAGA,EAAI5B,EAAQ8C,OAAS,EAAGlB,IACtCmB,EAAUC,KAAKpB,GAGjB,IAAIxB,EAAE6C,GAAGC,UAAUC,QAAQ9D,EAAO,CAChC+D,QAAS,CAAC,CACRC,OAAQ,QACRnD,MAAO,SACPoD,KAAM,uEACNC,cAAe,CACbvD,QAAS+C,OAIf1D,EAAM+D,UAAUI,YAAYC,SAAS,uCAGrCrD,EAAE,cAAcsD,OAChBtD,EAAE,iCAAiCsD,YAS3CpE,EAAQqE,GAAG,QAAS,YAAa,SAAUC,GACzCA,EAAEC,iBACF,IAAIC,EAAK1D,EAAEwC,MAAMmB,QAAQ,MACrBC,EAAM3E,EAAM2E,IAAIF,GACpB5E,EAAOgD,OAAOtC,MAAMqE,cAAcD,EAAI/D,OAAO6B,UAC7C5C,EAAOgD,OAAOtC,MAAMsE,UAAUF,EAAI/D,OAAO8B,MACzC3B,EAAEiD,OAAOnE,EAAOgD,OAAOiC,MAAOH,EAAI/D,QAClCrB,EAASwF,KAAK,CACZC,SAAU,2CACVC,UAAW,uBACXC,MAAOrF,MAGXI,EAAQqE,GAAG,QAAS,WAAY,SAAUC,GACxCA,EAAEC,iBACF,IAAIC,EAAK1D,EAAEwC,MAAMmB,QAAQ,MACrBC,EAAM3E,EAAM2E,IAAIF,GACpB5E,EAAOsF,SAAS,SAAU,CAACR,EAAI/D,OAAOmC,IAAK,SAAUqC,GAC7B,GAAlBA,EAAUC,MACZV,EAAIW,SAASC,MAAK,OAIxBtF,EAAQqE,GAAG,QAAS,cAAe,SAAUC,GAC3CA,EAAEC,iBACF,IAAIC,EAAK1D,EAAEwC,MAAMmB,QAAQ,MAErBc,EADMxF,EAAM2E,IAAIF,GACF7D,OAClB6E,SAASC,KAAO,4BAA8B3E,EAAE4E,KAAKH,EAAQzC,MAE/D9C,EAAQqE,GAAG,SAAU,iBAAkB,SAAUC,GAG/C,GAFAA,EAAEqB,kBAEErB,EAAEsB,OAAOC,QAAS,CACpB9F,EAAM+F,OAAOxE,SACbvB,EAAM+F,OAAOC,aAAaT,MAAK,GAK/B,IAJA,IAAIU,EAAYjG,EAAM+F,KAAK,CACzBG,UAAU,IAGH3D,EAAI,EAAGA,EAAI0D,EAAUE,QAAQ1C,OAAQlB,IAAK,CACvCvC,EAAM2E,IAAIsB,EAAUE,QAAQ5D,IAClC3B,OAAOsF,UAAW,EACtBnF,EAAEA,EAAEkF,EAAUE,QAAQ5D,IAAI6D,WAAW,IAAIC,KAAK,WAAW,QAKtD,CACLrG,EAAM+F,OAAOC,aAAaT,MAAK,GAK/B,IAJIU,EAAYjG,EAAM+F,KAAK,CACzBG,UAAU,IAGH3D,EAAI,EAAGA,EAAI0D,EAAUE,QAAQ1C,OAAQlB,IAAK,CACvCvC,EAAM2E,IAAIsB,EAAUE,QAAQ5D,IAClC3B,OAAOsF,UAAW,EAIxBlG,EAAM+F,OAAOO,WAGfzG,EAAO0G,cAAgBN,EAAUO,QACjC3G,EAAO4G,WAETxG,EAAQqE,GAAG,SAAU,gBAAiB,SAAUC,GAC9C,IAAIE,EAAK1D,EAAEwC,MAAMmB,QAAQ,MACrBC,EAAM3E,EAAM2E,IAAIF,GAEhBF,EAAEsB,OAAOC,QACXnB,EAAI/D,OAAOsF,UAAW,EAEtBvB,EAAI/D,OAAOsF,UAAW,EAGxB,IAAID,EAAYjG,EAAM+F,KAAK,CACzBG,UAAU,IAGa,GAArBD,EAAUO,SACZzF,EAAE,kBAAkB2F,KAAK,WAAW,GAGtC7G,EAAO0G,cAAgBN,EAAUO,QACjC3G,EAAO4G,WAGT5G,EAAO8G,eAAiB,WACtB,IAAIV,EAAYjG,EAAM+F,KAAK,CACzBG,UAAU,IAERK,EAAgBN,EAAUO,QAC1BL,EAAQF,EAAUE,QAEtB,GAAqB,GAAjBI,EAAJ,CAUA,IALA,IAAIK,EAAe,EACfC,EAAa,EACbC,EAAkB,GAClBC,GAAO,EAEFxE,EAAI,EAAGA,EAAI4D,EAAM1C,OAAQlB,IAAK,CACrC,IACIiD,EADMxF,EAAM2E,IAAIwB,EAAM5D,IACR3B,OAED,EAAb4E,EAAQzC,IACV+D,EAAgBnD,KAAK6B,EAAQzC,IAC7B6D,KAEAC,IAGEN,GAAiBK,EAAeC,IAClCE,GAAO,GAMPA,GACFlH,EAAOsF,SAAS,SAAU2B,EAAiB,SAAU1B,GACnD,GAAsB,GAAlBA,EAAUC,KAAW,CACvB,IAAK,IAAI9C,EAAI,EAAGA,EAAI4D,EAAM1C,OAAQlB,IAAK,CAC3BvC,EAAM2E,IAAIwB,EAAM5D,IACtB+C,SAASC,MAAK,GAGpBxE,EAAE,iBAAiBiG,KAAK,WACtBjG,EAAEwC,MAAMmD,KAAK,WAAW,KAE1B3F,EAAE,kBAAkB2F,KAAK,WAAW,GACpC1G,EAAM+F,OAAOO,mBAvCjB5G,EAAMuH,QAAQ,cAAe,WAgDvChI,EAAWI,cAAc,mBAAoB,CAAC,WAAY,WAAY,WAAY,UAAW,QAAS,SAAUC,EAAUC,EAAUC,EAAUC,EAASC,GACrJ,MAAO,CACLC,SAAU,IACVC,WAAY,CAAC,SAAU,WAAY,SAAU,SAAUC,EAAQC,EAAUC,GACvE,IACIC,EADAC,EAAUH,EAEdI,OAAOC,MAAQf,EACfS,EAAOO,IAAIC,MAAMC,eAAiB,WAAY,SAAUC,EAAOC,GACzDR,IACFA,EAAMS,UACNR,EAAQS,SAGV,IAAIC,EAAU,CAACI,EAAEC,WAAWC,UAAUiG,UAAW,CAC/CtG,KAAM,eACNC,MAAO,OACPC,QAASjB,EAAOsH,aACf,CACDvG,KAAM,OACNC,MAAO,QACN,CACDD,KAAM,OACNC,MAAO,QACN,CACDD,KAAM,OACNC,MAAO,QACN,CACDD,KAAM,aACNC,MAAO,OACPC,SAAS,GACRC,EAAEC,WAAWC,UAAUC,YAC1BlB,EAAQC,EAAQkB,UAAU,CACxBC,IAAK,wCAA0CZ,EAAK4G,QAAmC,GAAzB5G,EAAK4G,OAAO,GAAG3D,OAAc1C,EAAEC,WAAWC,UAAUI,UAAY,IAC9HC,SAAUP,EAAEC,WAAWC,UAAUK,SACjCC,OAAQR,EAAEC,WAAWC,UAAUM,OAC/BX,KAAMJ,EAAK4G,OAAO,GAClBC,MAAO,CAAC,CAAC,EAAG,SACZ1G,QAASA,EACTmB,WAAY,CAAC,CACXC,QAAW,EACXuF,WAAa,EACbtF,OAAU,SAAgBpB,EAAMqB,EAAMC,GAEpC,MAAY,WAARD,EACErB,EACK,uDAEA,+CAIJ,KAER,CACDmB,QAAW,EACXnB,KAAQ,eACRoB,OAAU,SAAgBpB,EAAMqB,EAAMC,GACpC,IAAIqF,EAAM1H,EAAO2H,eAAeC,OAAO,SAAUrF,GAC/C,OAAOA,EAAKW,IAAMnC,IAEpB,OAAO2G,GAAqB,GAAdA,EAAI9D,QAAe8D,EAAI,GAAGG,KAAOH,EAAI,GAAGG,KAAO,MAE9D,CACD3F,QAAW,EACXnB,KAAQ,OACRoB,OAAU,SAAgBpB,EAAMqB,EAAMC,GACpC,OAAOC,OAAOvB,KAEf,CACDmB,QAAW,EACXnB,KAAQ,OACRoB,OAAU,SAAgBpB,EAAMqB,EAAMC,GACpC,OAAOC,OAAOvB,KAEf,CACDmB,QAAW,EACXnB,KAAQ,OACRoB,OAAU,SAAgBpB,EAAMqB,EAAMC,GACpC,OAAOtB,GAAc,MAMtB,CACDmB,QAAW,EACXnB,KAAQ,SACRoB,OAAU,SAAgBpB,EAAMqB,EAAMC,GACpC,IAAIc,EAAM,uCAOV,OANAA,GAAO,4JACPA,GAAO,yJACPA,GAAO,uIACPA,GAAO,yCACPA,GAAO,wCAA0Cd,EAAKa,GAAK,kBAC3DC,GAAO,iBAIXC,YAAa,SAAqBC,EAAMC,EAAOC,GAC7C5D,EAAS0D,EAAT1D,CAAeK,MAKnB,IAFA,IAAI6D,EAAY,GAEPnB,EAAI,EAAGA,EAAI5B,EAAQ8C,OAAS,EAAGlB,IACtCmB,EAAUC,KAAKpB,GAGb/B,EAAK4G,QAAmC,GAAzB5G,EAAK4G,OAAO,GAAG3D,SAChC,IAAI1C,EAAE6C,GAAGC,UAAUC,QAAQ9D,EAAO,CAChC+D,QAAS,CAAC,CACRC,OAAQ,QACRnD,MAAO,SACPoD,KAAM,uEACNC,cAAe,CACbvD,QAAS+C,OAIf1D,EAAM+D,UAAUI,YAAYC,SAAS,qCAOzCnE,EAAQqE,GAAG,QAAS,YAAa,SAAUC,GACzCA,EAAEC,iBACF,IAAIC,EAAK1D,EAAEwC,MAAMmB,QAAQ,MACrBC,EAAM3E,EAAM2E,IAAIF,GACpB1D,EAAEiD,OAAOnE,EAAOgD,OAAOiC,MAAOH,EAAI/D,QAClCrB,EAASwF,KAAK,CACZC,SAAU,6CACVC,UAAW,uBACXC,MAAOrF,MAGXI,EAAQqE,GAAG,QAAS,WAAY,SAAUC,GACxCA,EAAEC,iBACF,IAAIC,EAAK1D,EAAEwC,MAAMmB,QAAQ,MACrBC,EAAM3E,EAAM2E,IAAIF,GACpB5E,EAAOsF,SAAS,SAAU,CAACR,EAAI/D,OAAOmC,IAAK,SAAUqC,GAC7B,GAAlBA,EAAUC,MACZV,EAAIW,SAASC,MAAK,OAIxBtF,EAAQqE,GAAG,SAAU,iBAAkB,SAAUC,GAG/C,GAFAA,EAAEqB,kBAEErB,EAAEsB,OAAOC,QAAS,CACpB9F,EAAM+F,OAAOxE,SACb,IAAI0E,EAAYjG,EAAM+F,KAAK,CACzBG,UAAU,IAEZrG,EAAO0G,cAAgBN,EAAUO,QACjC3G,EAAO4G,SAEP,IAAK,IAAIlE,EAAI,EAAGA,EAAI0D,EAAUE,QAAQ1C,OAAQlB,IAAK,CACvCvC,EAAM2E,IAAIsB,EAAUE,QAAQ5D,IAClC3B,OAAOsF,UAAW,EAIxBlG,EAAM+F,OAAOC,aAAaT,MAAK,OAC1B,CAKL,IAJIU,EAAYjG,EAAM+F,KAAK,CACzBG,UAAU,IAGH3D,EAAI,EAAGA,EAAI0D,EAAUE,QAAQ1C,OAAQlB,IAAK,CACvCvC,EAAM2E,IAAIsB,EAAUE,QAAQ5D,IAClC3B,OAAOsF,UAAW,EAIxBlG,EAAM+F,OAAOO,WACbzG,EAAO0G,cAAgB,EACvB1G,EAAO4G,SACPzG,EAAM+F,OAAOC,aAAaT,MAAK,MAGnCtF,EAAQqE,GAAG,SAAU,gBAAiB,SAAUC,GAC9C,IAAIE,EAAK1D,EAAEwC,MAAMmB,QAAQ,MACrBC,EAAM3E,EAAM2E,IAAIF,GAEhBF,EAAEsB,OAAOC,QACXnB,EAAI/D,OAAOsF,UAAW,EAEtBvB,EAAI/D,OAAOsF,UAAW,EAGxB,IAAID,EAAYjG,EAAM+F,KAAK,CACzBG,UAAU,IAGa,GAArBD,EAAUO,SACZzF,EAAE,kBAAkB2F,KAAK,WAAW,GAGtC7G,EAAO0G,cAAgBN,EAAUO,QACjC3G,EAAO4G,WAGT5G,EAAO8G,eAAiB,WACtB,IAAIV,EAAYjG,EAAM+F,KAAK,CACzBG,UAAU,IAERK,EAAgBN,EAAUO,QAC1BL,EAAQF,EAAUE,QAEtB,GAAqB,GAAjBI,EAAJ,CAUA,IALA,IAAIK,EAAe,EACfC,EAAa,EACbC,EAAkB,GAClBC,GAAO,EAEFxE,EAAI,EAAGA,EAAI4D,EAAM1C,OAAQlB,IAAK,CACrC,IACIiD,EADMxF,EAAM2E,IAAIwB,EAAM5D,IACR3B,OAED,EAAb4E,EAAQzC,IACV+D,EAAgBnD,KAAK6B,EAAQzC,IAC7B6D,KAEAC,IAGEN,GAAiBK,EAAeC,IAClCE,GAAO,GAMPA,GACFlH,EAAOsF,SAAS,SAAU2B,EAAiB,SAAU1B,GACnD,GAAsB,GAAlBA,EAAUC,KAAW,CACvB,IAAK,IAAI9C,EAAI,EAAGA,EAAI4D,EAAM1C,OAAQlB,IAAK,CAC3BvC,EAAM2E,IAAIwB,EAAM5D,IACtB+C,SAASC,MAAK,GAGpBxE,EAAE,iBAAiBiG,KAAK,WACtBjG,EAAEwC,MAAMmD,KAAK,WAAW,KAE1B3F,EAAE,kBAAkB2F,KAAK,WAAW,GACpC1G,EAAM+F,OAAOO,gBACHlB,IACVrE,EAAE,iBAAiBiG,KAAK,WACtBjG,EAAEwC,MAAMmD,KAAK,WAAW,KAE1B3F,EAAE,kBAAkB2F,KAAK,WAAW,GACpC1G,EAAM+F,OAAOO,mBA7CjB5G,EAAMuH,QAAQ,cAAe,WAsDvChI,EAAWI,cAAc,mBAAoB,CAAC,WAAY,WAAY,WAAY,UAAW,QAAS,SAAUC,EAAUC,EAAUC,EAAUC,EAASC,GACrJ,MAAO,CACLC,SAAU,IACVC,WAAY,CAAC,SAAU,WAAY,SAAU,SAAUC,EAAQC,EAAUC,GACvE,IACIC,EADAC,EAAUH,EAEdI,OAAOC,MAAQf,EACfS,EAAOO,IAAIC,MAAMC,eAAiB,eAAgB,SAAUC,EAAOC,GAC7DR,IACFA,EAAMS,UACNR,EAAQS,SAGV,IAAIC,EAAU,CAACI,EAAEC,WAAWC,UAAUiG,UAAW,CAC/CtG,KAAM,OACNC,MAAO,QACN,CACDD,KAAM,OACNC,MAAO,QACN,CACDD,KAAM,OACNC,MAAO,QACN,CACDD,KAAM,aACNC,MAAO,OACPC,SAAS,GACRC,EAAEC,WAAWC,UAAUC,YAC1BlB,EAAQC,EAAQkB,UAAU,CACxBC,IAAK,wCAA0CZ,EAAK4G,QAAmC,GAAzB5G,EAAK4G,OAAO,GAAG3D,OAAc1C,EAAEC,WAAWC,UAAUI,UAAY,IAC9HC,SAAUP,EAAEC,WAAWC,UAAUK,SACjCC,OAAQR,EAAEC,WAAWC,UAAUM,OAC/BX,KAAMJ,EAAK4G,OAAO,GAClBC,MAAO,CAAC,CAAC,EAAG,SACZ1G,QAASA,EACTmB,WAAY,CAAC,CACXC,QAAW,EACXuF,WAAa,EACbtF,OAAU,SAAgBpB,EAAMqB,EAAMC,GAEpC,MAAY,WAARD,EACErB,EACK,uDAEA,+CAIJ,KAER,CACDmB,QAAW,EACXnB,KAAQ,OACRoB,OAAU,SAAgBpB,EAAMqB,EAAMC,GACpC,OAAOC,OAAOvB,KAEf,CACDmB,QAAW,EACXnB,KAAQ,OACRoB,OAAU,SAAgBpB,EAAMqB,EAAMC,GACpC,OAAOC,OAAOvB,KAEf,CACDmB,QAAW,EACXnB,KAAQ,OACRoB,OAAU,SAAgBpB,EAAMqB,EAAMC,GACpC,OAAOtB,GAAc,MAMtB,CACDmB,QAAW,EACXnB,KAAQ,aACRoB,OAAU,SAAgBpB,EAAMqB,EAAMC,GACpC,IAAIc,EAAM,GAMV,OAJIpC,IACFoC,EAAM2E,gBAAgB/G,EAAM,wBAGvBoC,IAER,CACDjB,QAAW,EACXnB,KAAQ,SACRoB,OAAU,SAAgBpB,EAAMqB,EAAMC,GAKpC,MAHO,4JACA,yJACA,SAAPc,+VAIJC,YAAa,SAAqBC,EAAMC,EAAOC,GAC7C5D,EAAS0D,EAAT1D,CAAeK,MAKnB,IAFA,IAAI6D,EAAY,GAEPnB,EAAI,EAAGA,EAAI5B,EAAQ8C,OAAS,EAAGlB,IACtCmB,EAAUC,KAAKpB,GAGb/B,EAAK4G,QAAmC,GAAzB5G,EAAK4G,OAAO,GAAG3D,SAChC,IAAI1C,EAAE6C,GAAGC,UAAUC,QAAQ9D,EAAO,CAChC+D,QAAS,CAAC,CACRC,OAAQ,QACRnD,MAAO,SACPoD,KAAM,uEACNC,cAAe,CACbvD,QAAS+C,OAIf1D,EAAM+D,UAAUI,YAAYC,SAAS,qCAOzCnE,EAAQqE,GAAG,QAAS,YAAa,SAAUC,GACzCA,EAAEC,iBACF,IAAIC,EAAK1D,EAAEwC,MAAMmB,QAAQ,MACrBC,EAAM3E,EAAM2E,IAAIF,GACpB1D,EAAEiD,OAAOnE,EAAOgD,OAAOiC,MAAOH,EAAI/D,QAClCrB,EAASwF,KAAK,CACZC,SAAU,6CACVC,UAAW,uBACXC,MAAOrF,MAGXI,EAAQqE,GAAG,QAAS,WAAY,SAAUC,GACxCA,EAAEC,iBACF,IAAIC,EAAK1D,EAAEwC,MAAMmB,QAAQ,MACrBC,EAAM3E,EAAM2E,IAAIF,GACpB5E,EAAOsF,SAAS,SAAU,CAACR,EAAI/D,OAAOmC,IAAK,SAAUqC,GAC7B,GAAlBA,EAAUC,MACZV,EAAIW,SAASC,MAAK,OAIxBtF,EAAQqE,GAAG,SAAU,iBAAkB,SAAUC,GAG/C,GAFAA,EAAEqB,kBAEErB,EAAEsB,OAAOC,QAAS,CACpB9F,EAAM+F,OAAOxE,SACb,IAAI0E,EAAYjG,EAAM+F,KAAK,CACzBG,UAAU,IAEZrG,EAAO0G,cAAgBN,EAAUO,QACjC3G,EAAO4G,SAEP,IAAK,IAAIlE,EAAI,EAAGA,EAAI0D,EAAUE,QAAQ1C,OAAQlB,IAAK,CACvCvC,EAAM2E,IAAIsB,EAAUE,QAAQ5D,IAClC3B,OAAOsF,UAAW,EAIxBlG,EAAM+F,OAAOC,aAAaT,MAAK,OAC1B,CAKL,IAJIU,EAAYjG,EAAM+F,KAAK,CACzBG,UAAU,IAGH3D,EAAI,EAAGA,EAAI0D,EAAUE,QAAQ1C,OAAQlB,IAAK,CACvCvC,EAAM2E,IAAIsB,EAAUE,QAAQ5D,IAClC3B,OAAOsF,UAAW,EAIxBlG,EAAM+F,OAAOO,WACbzG,EAAO0G,cAAgB,EACvB1G,EAAO4G,SACPzG,EAAM+F,OAAOC,aAAaT,MAAK,MAGnCtF,EAAQqE,GAAG,SAAU,gBAAiB,SAAUC,GAC9C,IAAIE,EAAK1D,EAAEwC,MAAMmB,QAAQ,MACrBC,EAAM3E,EAAM2E,IAAIF,GAEhBF,EAAEsB,OAAOC,QACXnB,EAAI/D,OAAOsF,UAAW,EAEtBvB,EAAI/D,OAAOsF,UAAW,EAGxB,IAAID,EAAYjG,EAAM+F,KAAK,CACzBG,UAAU,IAGa,GAArBD,EAAUO,SACZzF,EAAE,kBAAkB2F,KAAK,WAAW,GAGtC7G,EAAO0G,cAAgBN,EAAUO,QACjC3G,EAAO4G,WAGT5G,EAAO8G,eAAiB,WACtB,IAAIV,EAAYjG,EAAM+F,KAAK,CACzBG,UAAU,IAERK,EAAgBN,EAAUO,QAC1BL,EAAQF,EAAUE,QAEtB,GAAqB,GAAjBI,EAAJ,CAUA,IALA,IAAIK,EAAe,EACfC,EAAa,EACbC,EAAkB,GAClBC,GAAO,EAEFxE,EAAI,EAAGA,EAAI4D,EAAM1C,OAAQlB,IAAK,CACrC,IACIiD,EADMxF,EAAM2E,IAAIwB,EAAM5D,IACR3B,OAED,EAAb4E,EAAQzC,IACV+D,EAAgBnD,KAAK6B,EAAQzC,IAC7B6D,KAEAC,IAGEN,GAAiBK,EAAeC,IAClCE,GAAO,GAMPA,GACFlH,EAAOsF,SAAS,SAAU2B,EAAiB,SAAU1B,GACnD,GAAsB,GAAlBA,EAAUC,KAAW,CACvB,IAAK,IAAI9C,EAAI,EAAGA,EAAI4D,EAAM1C,OAAQlB,IAAK,CAC3BvC,EAAM2E,IAAIwB,EAAM5D,IACtB+C,SAASC,MAAK,GAGpBxE,EAAE,iBAAiBiG,KAAK,WACtBjG,EAAEwC,MAAMmD,KAAK,WAAW,KAE1B3F,EAAE,kBAAkB2F,KAAK,WAAW,GACpC1G,EAAM+F,OAAOO,gBACHlB,IACVrE,EAAE,iBAAiBiG,KAAK,WACtBjG,EAAEwC,MAAMmD,KAAK,WAAW,KAE1B3F,EAAE,kBAAkB2F,KAAK,WAAW,GACpC1G,EAAM+F,OAAOO,mBA7CjB5G,EAAMuH,QAAQ,cAAe,WAsDvChI,EAAWI,cAAc,wBAAyB,CAAC,WAAY,WAAY,WAAY,UAAW,QAAS,SAAUC,EAAUC,EAAUC,EAAUC,EAASC,GAC1J,MAAO,CACLC,SAAU,IACVC,WAAY,CAAC,SAAU,WAAY,SAAU,SAAUC,EAAQC,EAAUC,GACvE,IACIC,EADAC,EAAUH,EAGdI,OAAOC,MAAQf,EACfS,EAAOO,IAAIC,MAAMC,eAAiB,aAAc,SAAUC,EAAOC,GAC3DR,IACFA,EAAMS,UACNR,EAAQS,SAGV,IAAIC,EAAU,CAACI,EAAEC,WAAWC,UAAUiG,UAAW,CAC/CtG,KAAM,wBACNC,MAAO,QACN,CACDD,KAAM,eACNC,MAAO,YACN,CACDD,KAAM,aACNC,MAAO,GACPC,SAAS,GACRC,EAAEC,WAAWC,UAAUC,YAC1BlB,EAAQC,EAAQkB,UAAU,CACxBC,IAAK,wCAA0CZ,EAAK4G,QAAmC,GAAzB5G,EAAK4G,OAAO,GAAG3D,OAAc1C,EAAEC,WAAWC,UAAUI,UAAY,IAC9HC,SAAUP,EAAEC,WAAWC,UAAUK,SACjCC,OAAQR,EAAEC,WAAWC,UAAUM,OAC/BX,KAAMJ,EAAK4G,OAAO,GAClBC,MAAO,CAAC,CAAC,EAAG,SACZ1G,QAASA,EACTmB,WAAY,CAAC,CACXC,QAAW,EACXuF,WAAa,EACbtF,OAAU,SAAgBpB,EAAMqB,EAAMC,GAEpC,MAAY,WAARD,EACErB,EACK,uDAEA,+CAIJ,KAER,CACDmB,QAAW,EACXnB,KAAQ,wBACRoB,OAAU,SAAgBpB,EAAMqB,EAAMC,GACpC,OAAOA,EAAK0F,sBAAwB1F,EAAK0F,sBAAwB,MAMlE,CACD7F,QAAW,EACXnB,KAAQ,eACRoB,OAAU,SAAgBpB,EAAMqB,EAAMC,GACpC,OAAOtB,IAER,CACDmB,QAAW,EACXnB,KAAQ,SACRoB,OAAU,SAAgBpB,EAAMqB,EAAMC,GASpC,MAPO,4JACA,yJAKA,SAAPc,+VAIJC,YAAa,SAAqBC,EAAMC,EAAOC,GAC7C5D,EAAS0D,EAAT1D,CAAeK,MAKnB,IAFA,IAAI6D,EAAY,GAEPnB,EAAI,EAAGA,EAAI5B,EAAQ8C,OAAS,EAAGlB,IACtCmB,EAAUC,KAAKpB,GAGb/B,EAAK4G,QAAmC,GAAzB5G,EAAK4G,OAAO,GAAG3D,SAChC,IAAI1C,EAAE6C,GAAGC,UAAUC,QAAQ9D,EAAO,CAChC+D,QAAS,CAAC,CACRC,OAAQ,QACRnD,MAAO,WACPoD,KAAM,uEACNC,cAAe,CACbvD,QAAS+C,OAIf1D,EAAM+D,UAAUI,YAAYC,SAAS,qCAOzCnE,EAAQqE,GAAG,QAAS,YAAa,SAAUC,GACzCA,EAAEC,iBACF,IAAIC,EAAK1D,EAAEwC,MAAMmB,QAAQ,MACrBC,EAAM3E,EAAM2E,IAAIF,GACpB1D,EAAEiD,OAAOnE,EAAOgD,OAAOiC,MAAOH,EAAI/D,QAClCrB,EAASwF,KAAK,CACZC,SAAU,kDACVC,UAAW,uBACXC,MAAOrF,MAGXI,EAAQqE,GAAG,QAAS,WAAY,SAAUC,GACxCA,EAAEC,iBACF,IAAIC,EAAK1D,EAAEwC,MAAMmB,QAAQ,MACrBC,EAAM3E,EAAM2E,IAAIF,GACpB5E,EAAOsF,SAAS,SAAU,CAACR,EAAI/D,OAAOmC,IAAK,SAAUqC,GAC7B,GAAlBA,EAAUC,MACZV,EAAIW,SAASC,MAAK,OAIxBtF,EAAQqE,GAAG,SAAU,iBAAkB,SAAUC,GAG/C,GAFAA,EAAEqB,kBAEErB,EAAEsB,OAAOC,QAAS,CACpB9F,EAAM+F,OAAOxE,SACb,IAAI0E,EAAYjG,EAAM+F,KAAK,CACzBG,UAAU,IAEZrG,EAAO0G,cAAgBN,EAAUO,QACjC3G,EAAO4G,SAEP,IAAK,IAAIlE,EAAI,EAAGA,EAAI0D,EAAUE,QAAQ1C,OAAQlB,IAAK,CACvCvC,EAAM2E,IAAIsB,EAAUE,QAAQ5D,IAClC3B,OAAOsF,UAAW,EAIxBlG,EAAM+F,OAAOC,aAAaT,MAAK,OAC1B,CAKL,IAJIU,EAAYjG,EAAM+F,KAAK,CACzBG,UAAU,IAGH3D,EAAI,EAAGA,EAAI0D,EAAUE,QAAQ1C,OAAQlB,IAAK,CACvCvC,EAAM2E,IAAIsB,EAAUE,QAAQ5D,IAClC3B,OAAOsF,UAAW,EAIxBlG,EAAM+F,OAAOO,WACbzG,EAAO0G,cAAgB,EACvB1G,EAAO4G,SACPzG,EAAM+F,OAAOC,aAAaT,MAAK,MAGnCtF,EAAQqE,GAAG,SAAU,gBAAiB,SAAUC,GAC9C,IAAIE,EAAK1D,EAAEwC,MAAMmB,QAAQ,MACrBC,EAAM3E,EAAM2E,IAAIF,GAEhBF,EAAEsB,OAAOC,QACXnB,EAAI/D,OAAOsF,UAAW,EAEtBvB,EAAI/D,OAAOsF,UAAW,EAGxB,IAAID,EAAYjG,EAAM+F,KAAK,CACzBG,UAAU,IAGa,GAArBD,EAAUO,SACZzF,EAAE,kBAAkB2F,KAAK,WAAW,GAGtC7G,EAAO0G,cAAgBN,EAAUO,QACjC3G,EAAO4G,WAGT5G,EAAO8G,eAAiB,WACtB,IAAIV,EAAYjG,EAAM+F,KAAK,CACzBG,UAAU,IAERK,EAAgBN,EAAUO,QAC1BL,EAAQF,EAAUE,QAEtB,GAAqB,GAAjBI,EAAJ,CAUA,IALA,IAAIK,EAAe,EACfC,EAAa,EACbC,EAAkB,GAClBC,GAAO,EAEFxE,EAAI,EAAGA,EAAI4D,EAAM1C,OAAQlB,IAAK,CACrC,IACIiD,EADMxF,EAAM2E,IAAIwB,EAAM5D,IACR3B,OAED,EAAb4E,EAAQzC,IACV+D,EAAgBnD,KAAK6B,EAAQzC,IAC7B6D,KAEAC,IAGEN,GAAiBK,EAAeC,IAClCE,GAAO,GAMPA,GACFlH,EAAOsF,SAAS,SAAU2B,EAAiB,SAAU1B,GACnD,GAAsB,GAAlBA,EAAUC,KAAW,CACvB,IAAK,IAAI9C,EAAI,EAAGA,EAAI4D,EAAM1C,OAAQlB,IAAK,CAC3BvC,EAAM2E,IAAIwB,EAAM5D,IACtB+C,SAASC,MAAK,GAGpBxE,EAAE,iBAAiBiG,KAAK,WACtBjG,EAAEwC,MAAMmD,KAAK,WAAW,KAE1B3F,EAAE,kBAAkB2F,KAAK,WAAW,GACpC1G,EAAM+F,OAAOO,gBACHlB,IACVrE,EAAE,iBAAiBiG,KAAK,WACtBjG,EAAEwC,MAAMmD,KAAK,WAAW,KAE1B3F,EAAE,kBAAkB2F,KAAK,WAAW,GACpC1G,EAAM+F,OAAOO,mBA7CjB5G,EAAMuH,QAAQ,cAAe,WAsDvChI,EAAWI,cAAc,yBAA0B,CAAC,WAAY,WAAY,WAAY,qBAAsB,UAAW,QAAS,SAAUC,EAAUC,EAAUC,EAAUqI,EAAoBpI,EAASC,GACrM,MAAO,CACLC,SAAU,IACVC,WAAY,CAAC,SAAU,WAAY,SAAU,SAAUC,EAAQC,EAAUC,GACvE,IACIC,EADAC,EAAUH,EAGdI,OAAOC,MAAQf,EACfS,EAAOO,IAAIC,MAAMC,eAAiB,WAAY,SAAUC,EAAOC,GACzDR,IACFA,EAAMS,UACNR,EAAQS,SAGV,IAAIC,EAAU,CAACI,EAAEC,WAAWC,UAAUiG,UAAW,CAC/CtG,KAAM,mBACNC,MAAO,QACN,CACDD,KAAM,kBACNC,MAAO,UACN,CACDD,KAAM,kBACNC,MAAO,WACN,CACDD,KAAM,aACNC,MAAO,QACN,CACDD,KAAM,aACNC,MAAO,QACN,CACDD,KAAM,eACNC,MAAO,MACNE,EAAEC,WAAWC,UAAUC,YAC1BlB,EAAQC,EAAQkB,UAAU,CACxBC,IAAK,wCAA0CZ,EAAK4G,QAAmC,GAAzB5G,EAAK4G,OAAO,GAAG3D,OAAc1C,EAAEC,WAAWC,UAAUI,UAAY,IAC9HC,SAAUP,EAAEC,WAAWC,UAAUK,SACjCC,OAAQR,EAAEC,WAAWC,UAAUM,OAC/BX,KAAMJ,EAAK4G,OAAO,GAClBC,MAAO,CAAC,CAAC,EAAG,SACZ1G,QAASA,EACTmB,WAAY,CAAC,CACXC,QAAW,EACXuF,WAAa,EACbtF,OAAU,SAAgBpB,EAAMqB,EAAMC,GAEpC,MAAY,WAARD,EACErB,EACK,uDAEA,+CAIJ,KAER,CACDmB,QAAW,EACXnB,KAAQ,mBACRoB,OAAU,SAAgBpB,EAAMqB,EAAMC,GACpC,IAAIqF,EAAM,IAAIO,KAAKlH,GAAMmH,OAAO,UAAUC,MAAM,KAEhD,GAAoC,QAAhCnI,EAAOgD,OAAOoF,eAChB,OAAOV,EAAI,GAAK,IACX,GAAoC,WAAhC1H,EAAOgD,OAAOoF,eAQlB,MAAoC,SAAhCpI,EAAOgD,OAAOoF,eAChBV,EAAI,GAAK,IAAMA,EAAI,GAAK,IAG5B1H,EAAOgD,OAAOoF,gBAAmBrH,OAAtC,EACS,IAZP,IAAIsH,EAAU,GAMd,OALArI,EAAOgD,OAAOtB,OAAO4G,kBAAkBC,QAAQ,SAAUhG,GACnDA,EAAKW,IAAMwE,EAAI,KACjBW,EAAU9F,EAAK6B,QAGZsD,EAAI,GAAK,KAAOW,IAS1B,CACDnG,QAAW,EACXnB,KAAQ,kBACRoB,OAAU,SAAgBpB,EAAMqB,EAAMC,GACpC,OAAOC,OAAOvB,KAEf,CACDmB,QAAW,EACXnB,KAAQ,kBACRoB,OAAU,SAAgBpB,EAAMqB,EAAMC,GACpC,OAAOC,OAAOvB,KAEf,CACDmB,QAAW,EACXnB,KAAQ,aACRoB,OAAU,SAAgBpB,EAAMqB,EAAMC,GAGpC,OADMzC,EAAQ,OAARA,CAAgBmB,EAAM,yBAG7B,CACDmB,QAAW,EACXnB,KAAQ,aACRoB,OAAU,SAAgBpB,EAAMqB,EAAMC,GAGpC,OADMzC,EAAQ,OAARA,CAAgBmB,EAAM,yBAG7B,CACDmB,QAAW,EACXnB,KAAQ,eACRoB,OAAU,SAAgBpB,EAAMqB,EAAMC,GACpC,IAAImG,EAAc,GAsBlB,MAAO,uBAnBiC,KAApCR,EAAmBS,KAAKC,SAEd,QAAR3H,GACFyH,EAAc,MACD,kBAEbA,EAAc,MACD,iBAGH,OAARzH,GAAyB,QAARA,GACnByH,EAAc,MACD,kBAEbA,EAAc,MACD,kBAI2B,KAAOA,EAAc,YAElE,CACDtG,QAAW,EACXnB,KAAQ,SACRoB,OAAU,SAAgBpB,EAAMqB,EAAMC,GACpC,IAAIc,EAAM,uCAoCV,OAlCwC,KAApC6E,EAAmBS,KAAKC,SAED,QAArBrG,EAAKsG,cACPxF,GAAO,4KACPA,GAAO,yKACPA,GAAO,+HACPA,GAAO,2CAGPA,GAAO,4JACPA,GAAO,yJACPA,GAAO,+HACPA,GAAO,yCACPA,GAAO,oDAIgB,OAArBd,EAAKsG,cAA8C,QAArBtG,EAAKsG,cACrCxF,GAAO,4KACPA,GAAO,yKACPA,GAAO,+HACPA,GAAO,2CAGPA,GAAO,4JACPA,GAAO,yJACPA,GAAO,+HACPA,GAAO,yCACPA,GAAO,oDArBPA,GAAO,mDA0BXA,GAAO,iBAIXC,YAAa,SAAqBC,EAAMC,EAAOC,GAC7C5D,EAAS0D,EAAT1D,CAAeK,MAKnB,IAFA,IAAI6D,EAAY,GAEPnB,EAAI,EAAGA,EAAI5B,EAAQ8C,OAAS,EAAGlB,IACtCmB,EAAUC,KAAKpB,GAGb/B,EAAK4G,QAAmC,GAAzB5G,EAAK4G,OAAO,GAAG3D,SAChC,IAAI1C,EAAE6C,GAAGC,UAAUC,QAAQ9D,EAAO,CAChC+D,QAAS,CAAC,CACRC,OAAQ,QACRnD,MAAO,WACPoD,KAAM,uEACNC,cAAe,CACbvD,QAAS+C,OAIf1D,EAAM+D,UAAUI,YAAYC,SAAS,qCAOzCnE,EAAQqE,GAAG,QAAS,YAAa,SAAUC,GACzCA,EAAEC,iBACF,IAAIC,EAAK1D,EAAEwC,MAAMmB,QAAQ,MACrBC,EAAM3E,EAAM2E,IAAIF,GACpB5E,EAAOsF,SAAS,OAAQR,EAAI/D,OAAQ,SAAUwE,QAIhDnF,EAAQqE,GAAG,QAAS,YAAa,SAAUC,GACzCA,EAAEC,iBACF,IAAIC,EAAK1D,EAAEwC,MAAMmB,QAAQ,MACrBC,EAAM3E,EAAM2E,IAAIF,GACpB5E,EAAOsF,SAAS,OAAQR,EAAI/D,OAAQ,SAAUwE,QAIhDnF,EAAQqE,GAAG,QAAS,WAAY,SAAUC,GACxCA,EAAEC,iBACF,IAAIC,EAAK1D,EAAEwC,MAAMmB,QAAQ,MACrBC,EAAM3E,EAAM2E,IAAIF,GACpB5E,EAAOsF,SAAS,SAAU,CAACR,EAAI/D,OAAOmC,IAAK,SAAUqC,GAC7B,GAAlBA,EAAUC,OACZ3F,EAAM+I,QAAQ,WAAY,IAC1B9D,EAAIW,SAASC,MAAK,QAIxBtF,EAAQqE,GAAG,QAAS,cAAe,SAAUC,GAC3CA,EAAEC,iBACF,IAAIC,EAAK1D,EAAEwC,MAAMmB,QAAQ,MACrBC,EAAM3E,EAAM2E,IAAIF,GACpB5E,EAAOsF,SAAS,SAAUR,EAAI/D,OAAOmC,GAAI,SAAUqC,GAC3B,GAAlBA,EAAUC,OACZV,EAAI/D,OAAO4H,aAAepD,EAAUxE,KAAK4H,aACzCxI,EAAM+F,OAAOC,aAAaT,MAAK,QAIrCtF,EAAQqE,GAAG,SAAU,iBAAkB,SAAUC,GAG/C,GAFAA,EAAEqB,kBAEErB,EAAEsB,OAAOC,QAAS,CACpB9F,EAAM+F,OAAOxE,SACb,IAAI0E,EAAYjG,EAAM+F,KAAK,CACzBG,UAAU,IAEZrG,EAAO0G,cAAgBN,EAAUO,QACjC3G,EAAO4G,SAEP,IAAK,IAAIlE,EAAI,EAAGA,EAAI0D,EAAUE,QAAQ1C,OAAQlB,IAAK,CACvCvC,EAAM2E,IAAIsB,EAAUE,QAAQ5D,IAClC3B,OAAOsF,UAAW,EAIxBlG,EAAM+F,OAAOC,aAAaT,MAAK,OAC1B,CAKL,IAJIU,EAAYjG,EAAM+F,KAAK,CACzBG,UAAU,IAGH3D,EAAI,EAAGA,EAAI0D,EAAUE,QAAQ1C,OAAQlB,IAAK,CACvCvC,EAAM2E,IAAIsB,EAAUE,QAAQ5D,IAClC3B,OAAOsF,UAAW,EAIxBlG,EAAM+F,OAAOO,WACbtG,EAAM+F,OAAOC,aAAaT,MAAK,GAC/B1F,EAAO0G,cAAgB,EACvB1G,EAAO4G,YAGXxG,EAAQqE,GAAG,SAAU,gBAAiB,SAAUC,GAC9C,IAAIE,EAAK1D,EAAEwC,MAAMmB,QAAQ,MACrBC,EAAM3E,EAAM2E,IAAIF,GAEhBF,EAAEsB,OAAOC,QACXnB,EAAI/D,OAAOsF,UAAW,EAEtBvB,EAAI/D,OAAOsF,UAAW,EAGxB,IAAID,EAAYjG,EAAM+F,KAAK,CACzBG,UAAU,IAGa,GAArBD,EAAUO,SACZzF,EAAE,kBAAkB2F,KAAK,WAAW,GAGtC7G,EAAO0G,cAAgBN,EAAUO,QACjC3G,EAAO4G,WAGT5G,EAAO8G,eAAiB,WACtB,IAAIV,EAAYjG,EAAM+F,KAAK,CACzBG,UAAU,IAERK,EAAgBN,EAAUO,QAC1BL,EAAQF,EAAUE,QAEtB,GAAqB,GAAjBI,EAAJ,CAUA,IALA,IAAIK,EAAe,EACfC,EAAa,EACbC,EAAkB,GAClBC,GAAO,EAEFxE,EAAI,EAAGA,EAAI4D,EAAM1C,OAAQlB,IAAK,CACrC,IACIiD,EADMxF,EAAM2E,IAAIwB,EAAM5D,IACR3B,OAED,EAAb4E,EAAQzC,IACV+D,EAAgBnD,KAAK6B,EAAQzC,IAC7B6D,KAEAC,IAGEN,GAAiBK,EAAeC,IAClCE,GAAO,GAMPA,GACFlH,EAAOsF,SAAS,SAAU2B,EAAiB,SAAU1B,GACnD,GAAsB,GAAlBA,EAAUC,KAAW,CACvB,IAAIqD,EAAetD,EAAUxE,KAAK+H,QAAQlF,OACtCmF,EAAkBxD,EAAUxE,KAAKiI,WAAWpF,OAChD/D,EAAM+I,QAAQ,OAASG,EAAkB,OAASF,EAAe,IAAK,IAEtE,IAAK,IAAInG,EAAI,EAAGA,EAAI4D,EAAM1C,OAAQlB,IAAK,CACrC,IAAIoC,EAAM3E,EAAM2E,IAAIwB,EAAM5D,IAE1B,GAA+B,OAA3BoC,EAAI/D,OAAO4H,aACb,MAEA7D,EAAIW,SAASC,MAAK,GAItBxE,EAAE,iBAAiBiG,KAAK,WACtBjG,EAAEwC,MAAMmD,KAAK,WAAW,KAE1B3F,EAAE,kBAAkB2F,KAAK,WAAW,GACpC1G,EAAM+F,OAAOO,gBACHlB,IACVrE,EAAE,iBAAiBiG,KAAK,WACtBjG,EAAEwC,MAAMmD,KAAK,WAAW,KAE1B3F,EAAE,kBAAkB2F,KAAK,WAAW,GACpC1G,EAAM+F,OAAOO,mBAtDjB5G,EAAMuH,QAAQ,cAAe,WA+DvChI,EAAWI,cAAc,mBAAoB,CAAC,WAAY,WAAY,WAAY,qBAAsB,UAAW,QAAS,SAAUC,EAAUC,EAAUC,EAAUqI,EAAoBpI,EAASC,GAC/L,MAAO,CACLC,SAAU,IACVC,WAAY,CAAC,SAAU,WAAY,SAAU,SAAUC,EAAQC,EAAUC,GACvE,IACIC,EADAC,EAAUH,EAGdI,OAAOC,MAAQf,EAEfS,EAAOO,IAAIC,MAAMC,eAAiB,WAAY,SAAUC,EAAOC,GACzDR,IACFA,EAAMS,UACNR,EAAQS,SAIV,IAAIC,EAAU,CAAC,CACbC,KAAM,eACNC,MAAO,OACPC,SAAUjB,EAAOiJ,cAChB,CACDlI,KAAM,eACNC,MAAO,QACN,CACDD,KAAM,uBACNC,MAAO,mBACN,CACDD,KAAM,sBACNC,MAAO,WACN,CACDD,KAAM,uBACNC,MAAO,sBAELiB,EAAa,CAAC,CAChBC,QAAW,EACXC,OAAU,SAAgBpB,EAAMqB,EAAMC,GACpC,IAAIc,EAAM,IAMV,OAJIb,OAAOvB,IAASf,EAAOkJ,eAAenI,KACxCoC,EAAMnD,EAAOkJ,eAAenI,GAAMoI,OAG7BhG,IAER,CACDjB,QAAW,EACXC,OAAU,SAAgBpB,EAAMqB,EAAMC,GACpC,OAAOtB,GAAc,MAEtB,CACDmB,QAAW,EACXC,OAAU,SAAgBpB,EAAMqB,EAAMC,GACpC,OAAOtB,GAAc,MAEtB,CACDmB,QAAW,EACXC,OAAU,SAAgBpB,EAAMqB,EAAMC,GACpC,OAAOtB,EAAOA,EAAO,IAAM,MAE5B,CACDmB,QAAW,EACXC,OAAU,SAAgBpB,EAAMqB,EAAMC,GACpC,OAAOtB,GAAc,OAIpBf,EAAOiJ,cAmBVnI,EAAQsI,OAAO,EAAG,GAClBnH,EAAWmH,OAAO,EAAG,KAnBrBtI,EAAQgD,KAAK5C,EAAEC,WAAWC,UAAUC,YACpCY,EAAW6B,KAAK,CACd5B,QAAW,EACXnB,KAAQ,SACRoB,OAAU,SAAgBpB,EAAMqB,EAAMC,GACpC,IAAIc,EAAM,uCASV,MAP+B,OAA3Bd,EAAKgH,mBACPlG,GAAO,+KAEPA,GAAO,+JAGTA,GAAO,aASbhD,EAAQC,EAAQkB,UAAU,CAExBC,IAAK,wCAA0CZ,EAAK4G,QAAmC,GAAzB5G,EAAK4G,OAAO,GAAG3D,OAAc1C,EAAEC,WAAWC,UAAUI,UAAY,IAC9HC,SAAUP,EAAEC,WAAWC,UAAUK,SACjCV,KAAMJ,EAAK4G,OAAO,GAClBC,MAAO,CAAC,CAAC,EAAG,SACZ1G,QAASA,EACTmB,WAAYA,EACZmB,YAAa,SAAqBC,EAAMC,EAAOC,GAC7C5D,EAAS0D,EAAT1D,CAAeK,MAKnB,IAFA,IAAI6D,EAAY,GAEPnB,EAAI,EAAGA,EAAI5B,EAAQ8C,OAAQlB,IAClCmB,EAAUC,KAAKpB,GAGb/B,EAAK4G,QAAmC,GAAzB5G,EAAK4G,OAAO,GAAG3D,SAChC,IAAI1C,EAAE6C,GAAGC,UAAUC,QAAQ9D,EAAO,CAChC+D,QAAS,CAAC,CACRC,OAAQ,QACRnD,MAAO,SACPoD,KAAM,uEACNC,cAAe,CACbvD,QAAS+C,OAUf1D,EAAM+D,UAAUI,YAAYC,SAAS,mCAGvCnE,EAAQqE,GAAG,QAAS,gBAAiB,SAAUC,GAC7CA,EAAEC,iBACF,IAAIC,EAAK1D,EAAEwC,MAAMmB,QAAQ,MACrBC,EAAM3E,EAAM2E,IAAIF,GACpB5E,EAAOsF,SAAS,WAAYR,EAAI/D,OAAOmC,GAAI,SAAUqC,GAC7B,GAAlBA,EAAUC,OACZ3F,EAAM+I,QAAQ,UAAW,IACzB9D,EAAI/D,OAAOsI,mBAAqB9D,EAAUxE,KAAKsI,mBAC/ClJ,EAAM+F,OAAOC,aAAaT,MAAK,gBAS7CtG,EAAWI,cAAc,oBAAqB,CAAC,WAAY,WAAY,WAAY,qBAAsB,UAAW,QAAS,SAAUC,EAAUC,EAAUC,EAAUqI,EAAoBpI,EAASC,GAChM,MAAO,CACLC,SAAU,IACVC,WAAY,CAAC,SAAU,WAAY,SAAU,SAAUC,EAAQC,EAAUC,GACvE,IACIC,EADAC,EAAUH,EAGdD,EAAOO,IAAIC,MAAMC,eAAiB,YAAa,SAAUC,EAAOC,GAC1DR,IACFA,EAAMS,UACNR,EAAQS,SAIV,IAAIC,EAAU,CAAC,CACbC,KAAM,eACNC,MAAO,OACPC,SAAUjB,EAAOiJ,cAChB,CACDlI,KAAM,iBACNC,MAAO,QACN,CACDD,KAAM,wBACNC,MAAO,mBACNE,EAAEC,WAAWC,UAAUC,YACtBY,EAAa,CAAC,CAChBC,QAAW,EACXC,OAAU,SAAgBpB,EAAMqB,EAAMC,GACpC,IAAIc,EAAM,IAMV,OAJIb,OAAOvB,IAASf,EAAOkJ,eAAenI,KACxCoC,EAAMnD,EAAOkJ,eAAenI,GAAMoI,OAG7BhG,IAER,CACDjB,QAAW,EACXC,OAAU,SAAgBpB,EAAMqB,EAAMC,GACpC,OAAOtB,GAAc,MAEtB,CACDmB,QAAW,EACXC,OAAU,SAAgBpB,EAAMqB,EAAMC,GACpC,OAAOtB,GAAc,MAEtB,CACDmB,QAAW,EACXnB,KAAQ,SACRoB,OAAU,SAAgBpB,EAAMqB,EAAMC,GAIpC,MAFO,0JACA,SAAPc,uMAIJhD,EAAQC,EAAQkB,UAAU,CACxBC,IAAK,wCAA0CZ,EAAK4G,QAAmC,GAAzB5G,EAAK4G,OAAO,GAAG3D,OAAc1C,EAAEC,WAAWC,UAAUI,UAAY,IAC9HC,SAAUP,EAAEC,WAAWC,UAAUK,SACjCV,KAAMJ,EAAK4G,OAAO,GAClBC,MAAO,CAAC,CAAC,EAAG,SACZ1G,QAASA,EACTmB,WAAYA,EACZmB,YAAa,SAAqBC,EAAMC,EAAOC,GAC7C5D,EAAS0D,EAAT1D,CAAeK,MAKnB,IAFA,IAAI6D,EAAY,GAEPnB,EAAI,EAAGA,EAAI5B,EAAQ8C,OAAS,EAAGlB,IACtCmB,EAAUC,KAAKpB,GAGb/B,EAAK4G,QAAmC,GAAzB5G,EAAK4G,OAAO,GAAG3D,SAChC,IAAI1C,EAAE6C,GAAGC,UAAUC,QAAQ9D,EAAO,CAChC+D,QAAS,CAAC,CACRC,OAAQ,QACRnD,MAAO,SACPoD,KAAM,uEACNC,cAAe,CACbvD,QAAS+C,OAIf1D,EAAM+D,UAAUI,YAAYC,SAAS,mCAGvCnE,EAAQqE,GAAG,QAAS,YAAa,SAAUC,GACzCA,EAAEC,iBACF,IAAIC,EAAK1D,EAAEwC,MAAMmB,QAAQ,MACrBC,EAAM3E,EAAM2E,IAAIF,GACpB5E,EAAOsF,SAAS,OAAQR,EAAI/D,OAAQ,SAAUwE,gBASxDnG,EAAWI,cAAc,qBAAsB,CAAC,WAAY,WAAY,WAAY,qBAAsB,UAAW,QAAS,SAAUC,EAAUC,EAAUC,EAAUqI,EAAoBpI,EAASC,GACjM,MAAO,CACLC,SAAU,IACVC,WAAY,CAAC,SAAU,WAAY,SAAU,SAAUC,EAAQC,EAAUC,GACvE,IACIC,EADAC,EAAUH,EAGdI,OAAOC,MAAQf,EAEfS,EAAOO,IAAIC,MAAMC,eAAiB,kBAAmB,SAAUC,EAAOC,GAChER,IACFA,EAAMS,UACNR,EAAQS,SAIV,IAAIC,EAAUH,EAAK4G,OAAO,GACtBtF,EAAatB,EAAK4G,OAAO,GAC7BpH,EAAQC,EAAQkB,UAAU,CAExBC,IAAK,wCAA0CZ,EAAK4G,QAAmC,GAAzB5G,EAAK4G,OAAO,GAAG3D,OAAc1C,EAAEC,WAAWC,UAAUI,UAAY,IAC9HC,SAAUP,EAAEC,WAAWC,UAAUK,SACjCV,KAAMJ,EAAK4G,OAAO,GAClBC,MAAO,CAAC,CAAC,EAAG,SACZ1G,QAASA,EACTmB,WAAYA,EACZmB,YAAa,SAAqBC,EAAMC,EAAOC,GAC7C5D,EAAS0D,EAAT1D,CAAeK,MAKnB,IAFA,IAAI6D,EAAY,GAEPnB,EAAI,EAAGA,EAAI5B,EAAQ8C,OAAQlB,IAClCmB,EAAUC,KAAKpB,GAGb/B,EAAK4G,QAAmC,GAAzB5G,EAAK4G,OAAO,GAAG3D,SAChC,IAAI1C,EAAE6C,GAAGC,UAAUC,QAAQ9D,EAAO,CAChC+D,QAAS,CAAC,CACRC,OAAQ,QACRnD,MAAO,YACPoD,KAAM,uEACNC,cAAe,CACbvD,QAAS+C,OAIf1D,EAAM+D,UAAUI,YAAYC,SAAS,2CAO/CnF,EAAWI,cAAc,uBAAwB,CAAC,WAAY,WAAY,WAAY,qBAAsB,UAAW,QAAS,SAAUC,EAAUC,EAAUC,EAAUqI,EAAoBpI,EAASC,GACnM,MAAO,CACLC,SAAU,IACVC,WAAY,CAAC,SAAU,WAAY,SAAU,SAAUC,EAAQC,EAAUC,GACvE,IACIC,EADAC,EAAUH,EAGdI,OAAOC,MAAQf,EAEfS,EAAOO,IAAIC,MAAMC,eAAiB,oBAAqB,SAAUC,EAAOC,GAClER,IACFA,EAAMS,UACNR,EAAQS,SAIV,IAAIC,EAAUH,EAAK4G,OAAO,GACtBtF,EAAatB,EAAK4G,OAAO,GAC7BpH,EAAQC,EAAQkB,UAAU,CAExBC,IAAK,wCAA0CZ,EAAK4G,QAAmC,GAAzB5G,EAAK4G,OAAO,GAAG3D,OAAc1C,EAAEC,WAAWC,UAAUI,UAAY,IAC9HC,SAAUP,EAAEC,WAAWC,UAAUK,SACjCV,KAAMJ,EAAK4G,OAAO,GAClBC,MAAO,CAAC,CAAC,EAAG,SACZ1G,QAASA,EACTmB,WAAYA,EACZmB,YAAa,SAAqBC,EAAMC,EAAOC,GAC7C5D,EAAS0D,EAAT1D,CAAeK,MAKnB,IAFA,IAAI6D,EAAY,GAEPnB,EAAI,EAAGA,EAAI5B,EAAQ8C,OAAQlB,IAClCmB,EAAUC,KAAKpB,GAGb/B,EAAK4G,QAAmC,GAAzB5G,EAAK4G,OAAO,GAAG3D,SAChC,IAAI1C,EAAE6C,GAAGC,UAAUC,QAAQ9D,EAAO,CAChC+D,QAAS,CAAC,CACRC,OAAQ,QACRnD,MAAO,YACPoD,KAAM,uEACNC,cAAe,CACbvD,QAAS+C,OAIf1D,EAAM+D,UAAUI,YAAYC,SAAS","file":"app-oc/js/directives/enterprise-dom.js","sourcesContent":["define(['directives/directives', 'bootstrap-dialog', 'datatables.net', 'jszip', 'datatables.net-bs', 'datatables.net-select', 'datatables.net-buttons-bs', 'datatables.buttons.html5'], function (directives, BootstrapDialog, datatables, jszip) {\n  'use strict'; //======================================    企业信息    ===========================================\n\n  directives.initDirective('enterpriseInfoTable', ['$timeout', 'ngDialog', '$compile', '$filter', 'growl', function ($timeout, ngDialog, $compile, $filter, growl) {\n    return {\n      restrict: 'A',\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        var domMain = $element;\n        var table;\n        var ifShow = false;\n        window.JSZip = jszip;\n        $scope.$on(Event.ENTERPRISEINIT + \"_info\", function (event, args) {\n          if (table) {\n            table.destroy();\n            domMain.empty();\n          }\n\n          var columns = [// $.ProudSmart.datatable.selectCol,\n          {\n            data: \"name\",\n            title: \"企业名称\"\n          }, {\n            data: \"industryType\",\n            title: \"行业类型\"\n          }, {\n            data: \"address\",\n            title: \"所在区域\"\n          }, {\n            data: \"statisticsType\",\n            title: \"统计周期类型\"\n          }, {\n            data: \"createTime\",\n            title: \"\",\n            visible: false\n          }, $.ProudSmart.datatable.optionCol3];\n          table = domMain.DataTable({\n            dom: '<\"row\"<\"col-sm-6 margin-bottom-10\">>' + $.ProudSmart.datatable.footerdom,\n            language: $.ProudSmart.datatable.language,\n            select: $.ProudSmart.datatable.select,\n            processing: true,\n            serverSide: true,\n            ordering: true,\n            aaSorting: [[4, \"desc\"]],\n            ajax: $scope.pipeline(),\n            columns: columns,\n            columnDefs: [// {\n            //   \"targets\": 0,\n            //   \"orderable\": false,\n            //   \"render\": function(data, type, full) {\n            //     // 返回自定义内容\n            //     if (type == \"display\") {\n            //       if (data) {\n            //         return '<input class=\"itemCheckBox\" checked type=\"checkbox\">';\n            //       } else {\n            //         return '<input class=\"itemCheckBox\" type=\"checkbox\">';\n            //       }\n            //     }\n            //     return \"\";\n            //   }\n            // },\n            {\n              \"targets\": 0,\n              \"data\": \"name\",\n              \"render\": function render(data, type, full) {\n                return escape(data);\n              }\n            }, {\n              \"targets\": 1,\n              \"data\": \"industryType\",\n              \"render\": function render(data, type, full) {\n                var item = \"\";\n                var industryType = $scope.industryList;\n\n                for (var i in industryType) {\n                  if (industryType[i].valueCode == data) {\n                    item = industryType[i]['text'];\n                    return item;\n                  }\n                }\n\n                if (!item) {\n                  return '-';\n                }\n              }\n            }, {\n              \"targets\": 2,\n              \"data\": \"address\",\n              \"render\": function render(data, type, full) {\n                if (full.province && full.city && full.county) {\n                  return full.county;\n                } else if (full.province && full.city && !full.county) {\n                  return full.city;\n                } else {\n                  return full.province;\n                }\n              }\n            }, {\n              \"targets\": 3,\n              \"data\": \"statisticsType\",\n              \"render\": function render(data, type, full) {\n                var item = \"\";\n                var periodList = $scope.dialog.list.periodList;\n\n                for (var i in periodList) {\n                  if (periodList[i].id == data) {\n                    item = periodList[i]['label'];\n                    break;\n                  }\n                }\n\n                return item;\n              }\n            }, {\n              \"targets\": 5,\n              \"data\": \"option\",\n              \"render\": function render(data, type, full) {\n                var str = \"<div class='btn-group btn-group-sm'>\";\n                str += \"<button id='edit-btn' class='btn btn-primary btn-sm' ><i class='fa fa-edit hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 编辑</span></button>\";\n                str += \"<button id='del-btn' class='btn btn-default btn-sm'><i class='fa fa-edit hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'>删除</span></button>\";\n                str += \"<button  type='button' class='btn btn-default btn-sm dropdown-toggle' data-toggle='dropdown'> 更多<span class='caret'></span></button>\";\n                str += \"<ul class='dropdown-menu' role='menu'>\";\n                str += \"<li><a  href='#/energyStructureInfo/\" + full.id + \"'>能耗结构</a></li>\";\n                str += \"<li><a  href='#/productInfo/\" + full.id + \"'>产品结构</a></li>\";\n                str += \"<li><a  href='#/basicBusinessInfo/\" + full.id + \"'>企业基本信息</a></li>\";\n                str += \"<li><a  href='#/EnterpriseOperateInfo/\" + full.id + \"'>企业经营信息</a></li>\";\n                str += \"</ul></div>\";\n                return str;\n              }\n            }],\n            rowCallback: function rowCallback(nRow, aData, iDataIndex) {\n              $compile(nRow)($scope);\n            },\n            drawCallback: function drawCallback(settings) {\n              var api = this.api();\n\n              if (api.data().length > 0) {\n                var footerHtml = \"\";\n                var arrLength = [];\n\n                for (var i = 0; i < columns.length - 1; i++) {\n                  arrLength.push(i);\n                }\n\n                new $.fn.dataTable.Buttons(table, {\n                  buttons: [{\n                    extend: 'excel',\n                    title: '企业信息导出',\n                    text: '<i class=\"fa fa-download\"></i><span class=\"hidden-xs\"> 导出查询结果</span>',\n                    exportOptions: {\n                      columns: arrLength\n                    }\n                  }]\n                });\n                table.buttons().container().appendTo('.dataTables_wrapper .col-sm-6 ');\n                if (footerHtml) $(\".dataTables_wrapper .col-sm-6\").append(footerHtml);\n              } else {\n                $(\".footerdom\").hide();\n                $(\".dataTables_wrapper .col-sm-6\").hide();\n              }\n            }\n          });\n        });\n        /**\n         * 监听表格初始化后，添加按钮\n         */\n\n        domMain.on('click', '#edit-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          $scope.dialog.event.provinceClick(row.data().province);\n          $scope.dialog.event.cityClick(row.data().city);\n          $.extend($scope.dialog.input, row.data());\n          ngDialog.open({\n            template: '../partials/dialogue/enterprise_dia.html',\n            className: 'ngdialog-theme-plain',\n            scope: $scope\n          });\n        });\n        domMain.on('click', '#del-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          $scope.doAction('delete', [row.data().id], function (returnObj) {\n            if (returnObj.code == 0) {\n              row.remove().draw(false);\n            }\n          });\n        });\n        domMain.on('click', '#inform-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          var rowData = row.data();\n          location.href = \"index.html#/alertInforms/\" + $.trim(rowData.id);\n        });\n        domMain.on('change', '#allselect-btn', function (e) {\n          e.stopPropagation();\n\n          if (e.target.checked) {\n            table.rows().select();\n            table.rows().invalidate().draw(false);\n            var tableRows = table.rows({\n              selected: true\n            });\n\n            for (var i = 0; i < tableRows.nodes().length; i++) {\n              var row = table.row(tableRows.nodes()[i]);\n              row.data().selected = true;\n              $($(tableRows.nodes()[i]).children()[0]).prop(\"checked\", true); // $($(tableRows.nodes()[i]).children()[0]).prop(\"checked\", true);\n              // $(tableRows.nodes()[i].children[0]).prop(\"checked\", true);\n            }\n\n            ;\n          } else {\n            table.rows().invalidate().draw(false);\n            var tableRows = table.rows({\n              selected: true\n            });\n\n            for (var i = 0; i < tableRows.nodes().length; i++) {\n              var row = table.row(tableRows.nodes()[i]);\n              row.data().selected = false;\n            }\n\n            ;\n            table.rows().deselect();\n          }\n\n          $scope.selectedCount = tableRows.count();\n          $scope.$apply();\n        });\n        domMain.on('change', '.itemCheckBox', function (e) {\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n\n          if (e.target.checked) {\n            row.data().selected = true;\n          } else {\n            row.data().selected = false;\n          }\n\n          var tableRows = table.rows({\n            selected: true\n          });\n\n          if (tableRows.count() == 0) {\n            $('#allselect-btn').attr(\"checked\", false);\n          }\n\n          $scope.selectedCount = tableRows.count();\n          $scope.$apply();\n        }); //多项删除\n\n        $scope.selectedDelete = function () {\n          var tableRows = table.rows({\n            selected: true\n          });\n          var selectedCount = tableRows.count();\n          var nodes = tableRows.nodes();\n\n          if (selectedCount == 0) {\n            growl.warning(\"当前没有选中的企业信息\", {});\n            return;\n          }\n\n          var successCount = 0;\n          var errorCount = 0;\n          var enterpriseIdAry = [];\n          var ifGo = false;\n\n          for (var i = 0; i < nodes.length; i++) {\n            var row = table.row(nodes[i]);\n            var rowData = row.data();\n\n            if (rowData.id > 0) {\n              enterpriseIdAry.push(rowData.id);\n              successCount++;\n            } else {\n              errorCount++;\n            }\n\n            if (selectedCount == successCount + errorCount) {\n              ifGo = true; // growl.success(\"成功确认\" + successCount + \"个,失败\" + errorCount + \"个\", {});\n            }\n          }\n\n          ;\n\n          if (ifGo) {\n            $scope.doAction(\"delete\", enterpriseIdAry, function (returnObj) {\n              if (returnObj.code == 0) {\n                for (var i = 0; i < nodes.length; i++) {\n                  var row = table.row(nodes[i]);\n                  row.remove().draw(false);\n                }\n\n                $(\".itemCheckBox\").each(function () {\n                  $(this).attr(\"checked\", false);\n                });\n                $(\"#allselect-btn\").attr(\"checked\", false);\n                table.rows().deselect();\n              }\n            });\n          }\n        };\n      }]\n    };\n  }]); //======================================    产品信息    ===========================================\n\n  directives.initDirective('productInfoTable', ['$timeout', 'ngDialog', '$compile', '$filter', 'growl', function ($timeout, ngDialog, $compile, $filter, growl) {\n    return {\n      restrict: 'A',\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        var domMain = $element;\n        var table;\n        window.JSZip = jszip;\n        $scope.$on(Event.ENTERPRISEINIT + \"_product\", function (event, args) {\n          if (table) {\n            table.destroy();\n            domMain.empty();\n          }\n\n          var columns = [$.ProudSmart.datatable.selectCol, {\n            data: \"enterpriseId\",\n            title: \"企业名称\",\n            visible: $scope.ifShowEnter\n          }, {\n            data: \"name\",\n            title: \"产品名称\"\n          }, {\n            data: \"desc\",\n            title: \"产品描述\"\n          }, {\n            data: \"unit\",\n            title: \"产品单位\"\n          }, {\n            data: \"createTime\",\n            title: \"创建时间\",\n            visible: false\n          }, $.ProudSmart.datatable.optionCol3];\n          table = domMain.DataTable({\n            dom: '<\"row\"<\"col-sm-6 margin-bottom-10\">>' + (args.option && args.option[0].length >= 1 ? $.ProudSmart.datatable.footerdom : ''),\n            language: $.ProudSmart.datatable.language,\n            select: $.ProudSmart.datatable.select,\n            data: args.option[0],\n            order: [[4, \"desc\"]],\n            columns: columns,\n            columnDefs: [{\n              \"targets\": 0,\n              \"orderable\": false,\n              \"render\": function render(data, type, full) {\n                // 返回自定义内容\n                if (type == \"display\") {\n                  if (data) {\n                    return '<input class=\"itemCheckBox\" checked type=\"checkbox\">';\n                  } else {\n                    return '<input class=\"itemCheckBox\" type=\"checkbox\">';\n                  }\n                }\n\n                return \"\";\n              }\n            }, {\n              \"targets\": 1,\n              \"data\": \"enterpriseId\",\n              \"render\": function render(data, type, full) {\n                var ary = $scope.enterpriseList.filter(function (item) {\n                  return item.id == data;\n                });\n                return ary && ary.length >= 1 && ary[0].name ? ary[0].name : '-';\n              }\n            }, {\n              \"targets\": 2,\n              \"data\": \"name\",\n              \"render\": function render(data, type, full) {\n                return escape(data);\n              }\n            }, {\n              \"targets\": 3,\n              \"data\": \"desc\",\n              \"render\": function render(data, type, full) {\n                return escape(data);\n              }\n            }, {\n              \"targets\": 4,\n              \"data\": \"unit\",\n              \"render\": function render(data, type, full) {\n                return data ? data : '无'; // if (data && $scope.unitDics[data]) {\n                //   return $scope.unitDics[data];\n                // } else {\n                //   return escape(data);\n                // }\n              }\n            }, {\n              \"targets\": 6,\n              \"data\": \"option\",\n              \"render\": function render(data, type, full) {\n                var str = \"<div class='btn-group btn-group-sm'>\";\n                str += \"<button id='edit-btn' class='btn btn-primary btn-sm' ><i class='fa fa-edit hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 编辑</span></button>\";\n                str += \"<button id='del-btn' class='btn btn-default btn-sm'><i class='fa fa-edit hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'>删除</span></button>\";\n                str += \"<button  type='button' class='btn btn-default btn-sm dropdown-toggle' data-toggle='dropdown'> 更多<span class='caret'></span></button>\";\n                str += \"<ul class='dropdown-menu' role='menu'>\";\n                str += \"<li><a  href='#/productStructureInfo/\" + full.id + \"'>工艺流程</a></li>\";\n                str += \"</ul></div>\";\n                return str;\n              }\n            }],\n            rowCallback: function rowCallback(nRow, aData, iDataIndex) {\n              $compile(nRow)($scope);\n            }\n          });\n          var arrLength = [];\n\n          for (var i = 1; i < columns.length - 1; i++) {\n            arrLength.push(i);\n          }\n\n          if (args.option && args.option[0].length >= 1) {\n            new $.fn.dataTable.Buttons(table, {\n              buttons: [{\n                extend: 'excel',\n                title: '产品结构导出',\n                text: '<i class=\"fa fa-download\"></i><span class=\"hidden-xs\"> 导出查询结果</span>',\n                exportOptions: {\n                  columns: arrLength\n                }\n              }]\n            });\n            table.buttons().container().appendTo('.dataTables_wrapper .col-sm-6 ');\n          }\n        });\n        /**\n         * 监听表格初始化后，添加按钮\n         */\n\n        domMain.on('click', '#edit-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          $.extend($scope.dialog.input, row.data());\n          ngDialog.open({\n            template: '../partials/dialogue/product_info_dia.html',\n            className: 'ngdialog-theme-plain',\n            scope: $scope\n          });\n        });\n        domMain.on('click', '#del-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          $scope.doAction('delete', [row.data().id], function (returnObj) {\n            if (returnObj.code == 0) {\n              row.remove().draw(false);\n            }\n          });\n        });\n        domMain.on('change', '#allselect-btn', function (e) {\n          e.stopPropagation();\n\n          if (e.target.checked) {\n            table.rows().select();\n            var tableRows = table.rows({\n              selected: true\n            });\n            $scope.selectedCount = tableRows.count();\n            $scope.$apply();\n\n            for (var i = 0; i < tableRows.nodes().length; i++) {\n              var row = table.row(tableRows.nodes()[i]);\n              row.data().selected = true;\n            }\n\n            ;\n            table.rows().invalidate().draw(false);\n          } else {\n            var tableRows = table.rows({\n              selected: true\n            });\n\n            for (var i = 0; i < tableRows.nodes().length; i++) {\n              var row = table.row(tableRows.nodes()[i]);\n              row.data().selected = false;\n            }\n\n            ;\n            table.rows().deselect();\n            $scope.selectedCount = 0;\n            $scope.$apply();\n            table.rows().invalidate().draw(false);\n          }\n        });\n        domMain.on('change', '.itemCheckBox', function (e) {\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n\n          if (e.target.checked) {\n            row.data().selected = true;\n          } else {\n            row.data().selected = false;\n          }\n\n          var tableRows = table.rows({\n            selected: true\n          });\n\n          if (tableRows.count() == 0) {\n            $('#allselect-btn').attr(\"checked\", false);\n          }\n\n          $scope.selectedCount = tableRows.count();\n          $scope.$apply();\n        }); //多项删除\n\n        $scope.selectedDelete = function () {\n          var tableRows = table.rows({\n            selected: true\n          });\n          var selectedCount = tableRows.count();\n          var nodes = tableRows.nodes();\n\n          if (selectedCount == 0) {\n            growl.warning(\"当前没有选中的产品信息\", {});\n            return;\n          }\n\n          var successCount = 0;\n          var errorCount = 0;\n          var enterpriseIdAry = [];\n          var ifGo = false;\n\n          for (var i = 0; i < nodes.length; i++) {\n            var row = table.row(nodes[i]);\n            var rowData = row.data();\n\n            if (rowData.id > 0) {\n              enterpriseIdAry.push(rowData.id);\n              successCount++;\n            } else {\n              errorCount++;\n            }\n\n            if (selectedCount == successCount + errorCount) {\n              ifGo = true; // growl.success(\"成功确认\" + successCount + \"个,失败\" + errorCount + \"个\", {});\n            }\n          }\n\n          ;\n\n          if (ifGo) {\n            $scope.doAction(\"delete\", enterpriseIdAry, function (returnObj) {\n              if (returnObj.code == 0) {\n                for (var i = 0; i < nodes.length; i++) {\n                  var row = table.row(nodes[i]);\n                  row.remove().draw(false);\n                }\n\n                $(\".itemCheckBox\").each(function () {\n                  $(this).attr(\"checked\", false);\n                });\n                $(\"#allselect-btn\").attr(\"checked\", false);\n                table.rows().deselect();\n              } else if (!returnObj) {\n                $(\".itemCheckBox\").each(function () {\n                  $(this).attr(\"checked\", false);\n                });\n                $(\"#allselect-btn\").attr(\"checked\", false);\n                table.rows().deselect();\n              }\n            });\n          }\n        };\n      }]\n    };\n  }]); //自己产品中使用\n\n  directives.initDirective('productListTable', ['$timeout', 'ngDialog', '$compile', '$filter', 'growl', function ($timeout, ngDialog, $compile, $filter, growl) {\n    return {\n      restrict: 'A',\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        var domMain = $element;\n        var table;\n        window.JSZip = jszip;\n        $scope.$on(Event.ENTERPRISEINIT + \"_productList\", function (event, args) {\n          if (table) {\n            table.destroy();\n            domMain.empty();\n          }\n\n          var columns = [$.ProudSmart.datatable.selectCol, {\n            data: \"name\",\n            title: \"产品名称\"\n          }, {\n            data: \"desc\",\n            title: \"产品描述\"\n          }, {\n            data: \"unit\",\n            title: \"产品单位\"\n          }, {\n            data: \"createTime\",\n            title: \"创建时间\",\n            visible: false\n          }, $.ProudSmart.datatable.optionCol3];\n          table = domMain.DataTable({\n            dom: '<\"row\"<\"col-sm-6 margin-bottom-10\">>' + (args.option && args.option[0].length >= 1 ? $.ProudSmart.datatable.footerdom : ''),\n            language: $.ProudSmart.datatable.language,\n            select: $.ProudSmart.datatable.select,\n            data: args.option[0],\n            order: [[4, \"desc\"]],\n            columns: columns,\n            columnDefs: [{\n              \"targets\": 0,\n              \"orderable\": false,\n              \"render\": function render(data, type, full) {\n                // 返回自定义内容\n                if (type == \"display\") {\n                  if (data) {\n                    return '<input class=\"itemCheckBox\" checked type=\"checkbox\">';\n                  } else {\n                    return '<input class=\"itemCheckBox\" type=\"checkbox\">';\n                  }\n                }\n\n                return \"\";\n              }\n            }, {\n              \"targets\": 1,\n              \"data\": \"name\",\n              \"render\": function render(data, type, full) {\n                return escape(data);\n              }\n            }, {\n              \"targets\": 2,\n              \"data\": \"desc\",\n              \"render\": function render(data, type, full) {\n                return escape(data);\n              }\n            }, {\n              \"targets\": 3,\n              \"data\": \"unit\",\n              \"render\": function render(data, type, full) {\n                return data ? data : '无'; // if (data && $scope.unitDics[data]) {\n                //   return $scope.unitDics[data];\n                // } else {\n                //   return escape(data);\n                // }\n              }\n            }, {\n              \"targets\": 4,\n              \"data\": \"createTime\",\n              \"render\": function render(data, type, full) {\n                var str = \"\";\n\n                if (data) {\n                  str = useMomentFormat(data, \"yyyy-MM-dd hh:mm:ss\");\n                }\n\n                return str;\n              }\n            }, {\n              \"targets\": 5,\n              \"data\": \"option\",\n              \"render\": function render(data, type, full) {\n                var str = \"<div class='btn-group btn-group-sm'>\";\n                str += \"<button id='edit-btn' class='btn btn-primary btn-sm' ><i class='fa fa-edit hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 编辑</span></button>\";\n                str += \"<button id='del-btn' class='btn btn-default btn-sm'><i class='fa fa-edit hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'>删除</span></button>\";\n                str += \"</div>\";\n                return str;\n              }\n            }],\n            rowCallback: function rowCallback(nRow, aData, iDataIndex) {\n              $compile(nRow)($scope);\n            }\n          });\n          var arrLength = [];\n\n          for (var i = 1; i < columns.length - 1; i++) {\n            arrLength.push(i);\n          }\n\n          if (args.option && args.option[0].length >= 1) {\n            new $.fn.dataTable.Buttons(table, {\n              buttons: [{\n                extend: 'excel',\n                title: '产品结构导出',\n                text: '<i class=\"fa fa-download\"></i><span class=\"hidden-xs\"> 导出查询结果</span>',\n                exportOptions: {\n                  columns: arrLength\n                }\n              }]\n            });\n            table.buttons().container().appendTo('.dataTables_wrapper .col-sm-6 ');\n          }\n        });\n        /**\n         * 监听表格初始化后，添加按钮\n         */\n\n        domMain.on('click', '#edit-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          $.extend($scope.dialog.input, row.data());\n          ngDialog.open({\n            template: '../partials/dialogue/product_info_dia.html',\n            className: 'ngdialog-theme-plain',\n            scope: $scope\n          });\n        });\n        domMain.on('click', '#del-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          $scope.doAction('delete', [row.data().id], function (returnObj) {\n            if (returnObj.code == 0) {\n              row.remove().draw(false);\n            }\n          });\n        });\n        domMain.on('change', '#allselect-btn', function (e) {\n          e.stopPropagation();\n\n          if (e.target.checked) {\n            table.rows().select();\n            var tableRows = table.rows({\n              selected: true\n            });\n            $scope.selectedCount = tableRows.count();\n            $scope.$apply();\n\n            for (var i = 0; i < tableRows.nodes().length; i++) {\n              var row = table.row(tableRows.nodes()[i]);\n              row.data().selected = true;\n            }\n\n            ;\n            table.rows().invalidate().draw(false);\n          } else {\n            var tableRows = table.rows({\n              selected: true\n            });\n\n            for (var i = 0; i < tableRows.nodes().length; i++) {\n              var row = table.row(tableRows.nodes()[i]);\n              row.data().selected = false;\n            }\n\n            ;\n            table.rows().deselect();\n            $scope.selectedCount = 0;\n            $scope.$apply();\n            table.rows().invalidate().draw(false);\n          }\n        });\n        domMain.on('change', '.itemCheckBox', function (e) {\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n\n          if (e.target.checked) {\n            row.data().selected = true;\n          } else {\n            row.data().selected = false;\n          }\n\n          var tableRows = table.rows({\n            selected: true\n          });\n\n          if (tableRows.count() == 0) {\n            $('#allselect-btn').attr(\"checked\", false);\n          }\n\n          $scope.selectedCount = tableRows.count();\n          $scope.$apply();\n        }); //多项删除\n\n        $scope.selectedDelete = function () {\n          var tableRows = table.rows({\n            selected: true\n          });\n          var selectedCount = tableRows.count();\n          var nodes = tableRows.nodes();\n\n          if (selectedCount == 0) {\n            growl.warning(\"当前没有选中的产品信息\", {});\n            return;\n          }\n\n          var successCount = 0;\n          var errorCount = 0;\n          var enterpriseIdAry = [];\n          var ifGo = false;\n\n          for (var i = 0; i < nodes.length; i++) {\n            var row = table.row(nodes[i]);\n            var rowData = row.data();\n\n            if (rowData.id > 0) {\n              enterpriseIdAry.push(rowData.id);\n              successCount++;\n            } else {\n              errorCount++;\n            }\n\n            if (selectedCount == successCount + errorCount) {\n              ifGo = true; // growl.success(\"成功确认\" + successCount + \"个,失败\" + errorCount + \"个\", {});\n            }\n          }\n\n          ;\n\n          if (ifGo) {\n            $scope.doAction(\"delete\", enterpriseIdAry, function (returnObj) {\n              if (returnObj.code == 0) {\n                for (var i = 0; i < nodes.length; i++) {\n                  var row = table.row(nodes[i]);\n                  row.remove().draw(false);\n                }\n\n                $(\".itemCheckBox\").each(function () {\n                  $(this).attr(\"checked\", false);\n                });\n                $(\"#allselect-btn\").attr(\"checked\", false);\n                table.rows().deselect();\n              } else if (!returnObj) {\n                $(\".itemCheckBox\").each(function () {\n                  $(this).attr(\"checked\", false);\n                });\n                $(\"#allselect-btn\").attr(\"checked\", false);\n                table.rows().deselect();\n              }\n            });\n          }\n        };\n      }]\n    };\n  }]); //======================================    产品结构设置    ===========================================\n\n  directives.initDirective('productStructrueTable', ['$timeout', 'ngDialog', '$compile', '$filter', 'growl', function ($timeout, ngDialog, $compile, $filter, growl) {\n    return {\n      restrict: 'A',\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        var domMain = $element;\n        var table;\n        var ifShow = false;\n        window.JSZip = jszip;\n        $scope.$on(Event.ENTERPRISEINIT + \"_structrue\", function (event, args) {\n          if (table) {\n            table.destroy();\n            domMain.empty();\n          }\n\n          var columns = [$.ProudSmart.datatable.selectCol, {\n            data: \"energyConsumeNodeName\",\n            title: \"能耗节点\"\n          }, {\n            data: \"occupyPrcent\",\n            title: \"所用时间（分钟）\"\n          }, {\n            data: \"createTime\",\n            title: \"\",\n            visible: false\n          }, $.ProudSmart.datatable.optionCol3];\n          table = domMain.DataTable({\n            dom: '<\"row\"<\"col-sm-6 margin-bottom-10\">>' + (args.option && args.option[0].length >= 1 ? $.ProudSmart.datatable.footerdom : ''),\n            language: $.ProudSmart.datatable.language,\n            select: $.ProudSmart.datatable.select,\n            data: args.option[0],\n            order: [[3, \"desc\"]],\n            columns: columns,\n            columnDefs: [{\n              \"targets\": 0,\n              \"orderable\": false,\n              \"render\": function render(data, type, full) {\n                // 返回自定义内容\n                if (type == \"display\") {\n                  if (data) {\n                    return '<input class=\"itemCheckBox\" checked type=\"checkbox\">';\n                  } else {\n                    return '<input class=\"itemCheckBox\" type=\"checkbox\">';\n                  }\n                }\n\n                return \"\";\n              }\n            }, {\n              \"targets\": 1,\n              \"data\": \"energyConsumeNodeName\",\n              \"render\": function render(data, type, full) {\n                return full.energyConsumeNodeName ? full.energyConsumeNodeName : '无'; // if (data && $scope.energyListDic[data]) {\n                //   return $scope.energyListDic[data].label;\n                // } else {\n                //   return \"无\";\n                // }\n              }\n            }, {\n              \"targets\": 2,\n              \"data\": \"occupyPrcent\",\n              \"render\": function render(data, type, full) {\n                return data;\n              }\n            }, {\n              \"targets\": 4,\n              \"data\": \"option\",\n              \"render\": function render(data, type, full) {\n                var str = \"<div class='btn-group btn-group-sm'>\";\n                str += \"<button id='edit-btn' class='btn btn-primary btn-sm' ><i class='fa fa-edit hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 编辑</span></button>\";\n                str += \"<button id='del-btn' class='btn btn-default btn-sm'><i class='fa fa-edit hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'>删除</span></button>\"; // str += \"<button  type='button' class='btn btn-default btn-sm dropdown-toggle' data-toggle='dropdown'> 更多<span class='caret'></span></button>\";\n                // str += \"<ul class='dropdown-menu' role='menu'>\";\n                // str += \"<li><a  href='#/productStructureInfo/\" + full.id + \"'>结构设置</a></li>\";\n                // str += \"</ul></div>\";\n\n                str += \"</div>\";\n                return str;\n              }\n            }],\n            rowCallback: function rowCallback(nRow, aData, iDataIndex) {\n              $compile(nRow)($scope);\n            }\n          });\n          var arrLength = [];\n\n          for (var i = 0; i < columns.length - 1; i++) {\n            arrLength.push(i);\n          }\n\n          if (args.option && args.option[0].length >= 1) {\n            new $.fn.dataTable.Buttons(table, {\n              buttons: [{\n                extend: 'excel',\n                title: '工艺流程信息导出',\n                text: '<i class=\"fa fa-download\"></i><span class=\"hidden-xs\"> 导出查询结果</span>',\n                exportOptions: {\n                  columns: arrLength\n                }\n              }]\n            });\n            table.buttons().container().appendTo('.dataTables_wrapper .col-sm-6 ');\n          }\n        });\n        /**\n         * 监听表格初始化后，添加按钮\n         */\n\n        domMain.on('click', '#edit-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          $.extend($scope.dialog.input, row.data());\n          ngDialog.open({\n            template: '../partials/dialogue/product_structrue_dia.html',\n            className: 'ngdialog-theme-plain',\n            scope: $scope\n          });\n        });\n        domMain.on('click', '#del-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          $scope.doAction('delete', [row.data().id], function (returnObj) {\n            if (returnObj.code == 0) {\n              row.remove().draw(false);\n            }\n          });\n        });\n        domMain.on('change', '#allselect-btn', function (e) {\n          e.stopPropagation();\n\n          if (e.target.checked) {\n            table.rows().select();\n            var tableRows = table.rows({\n              selected: true\n            });\n            $scope.selectedCount = tableRows.count();\n            $scope.$apply();\n\n            for (var i = 0; i < tableRows.nodes().length; i++) {\n              var row = table.row(tableRows.nodes()[i]);\n              row.data().selected = true;\n            }\n\n            ;\n            table.rows().invalidate().draw(false);\n          } else {\n            var tableRows = table.rows({\n              selected: true\n            });\n\n            for (var i = 0; i < tableRows.nodes().length; i++) {\n              var row = table.row(tableRows.nodes()[i]);\n              row.data().selected = false;\n            }\n\n            ;\n            table.rows().deselect();\n            $scope.selectedCount = 0;\n            $scope.$apply();\n            table.rows().invalidate().draw(false);\n          }\n        });\n        domMain.on('change', '.itemCheckBox', function (e) {\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n\n          if (e.target.checked) {\n            row.data().selected = true;\n          } else {\n            row.data().selected = false;\n          }\n\n          var tableRows = table.rows({\n            selected: true\n          });\n\n          if (tableRows.count() == 0) {\n            $('#allselect-btn').attr(\"checked\", false);\n          }\n\n          $scope.selectedCount = tableRows.count();\n          $scope.$apply();\n        }); //多项删除\n\n        $scope.selectedDelete = function () {\n          var tableRows = table.rows({\n            selected: true\n          });\n          var selectedCount = tableRows.count();\n          var nodes = tableRows.nodes();\n\n          if (selectedCount == 0) {\n            growl.warning(\"当前没有选中的企业信息\", {});\n            return;\n          }\n\n          var successCount = 0;\n          var errorCount = 0;\n          var enterpriseIdAry = [];\n          var ifGo = false;\n\n          for (var i = 0; i < nodes.length; i++) {\n            var row = table.row(nodes[i]);\n            var rowData = row.data();\n\n            if (rowData.id > 0) {\n              enterpriseIdAry.push(rowData.id);\n              successCount++;\n            } else {\n              errorCount++;\n            }\n\n            if (selectedCount == successCount + errorCount) {\n              ifGo = true; // growl.success(\"成功确认\" + successCount + \"个,失败\" + errorCount + \"个\", {});\n            }\n          }\n\n          ;\n\n          if (ifGo) {\n            $scope.doAction(\"delete\", enterpriseIdAry, function (returnObj) {\n              if (returnObj.code == 0) {\n                for (var i = 0; i < nodes.length; i++) {\n                  var row = table.row(nodes[i]);\n                  row.remove().draw(false);\n                }\n\n                $(\".itemCheckBox\").each(function () {\n                  $(this).attr(\"checked\", false);\n                });\n                $(\"#allselect-btn\").attr(\"checked\", false);\n                table.rows().deselect();\n              } else if (!returnObj) {\n                $(\".itemCheckBox\").each(function () {\n                  $(this).attr(\"checked\", false);\n                });\n                $(\"#allselect-btn\").attr(\"checked\", false);\n                table.rows().deselect();\n              }\n            });\n          }\n        };\n      }]\n    };\n  }]); //======================================    企业经营信息    ===========================================\n\n  directives.initDirective('enterpriseOperateTable', ['$timeout', 'ngDialog', '$compile', 'userLoginUIService', '$filter', 'growl', function ($timeout, ngDialog, $compile, userLoginUIService, $filter, growl) {\n    return {\n      restrict: 'A',\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        var domMain = $element;\n        var table;\n        var ifShow = false;\n        window.JSZip = jszip;\n        $scope.$on(Event.ENTERPRISEINIT + \"_operate\", function (event, args) {\n          if (table) {\n            table.destroy();\n            domMain.empty();\n          }\n\n          var columns = [$.ProudSmart.datatable.selectCol, {\n            data: \"statisticsPeriod\",\n            title: \"统计周期\"\n          }, {\n            data: \"productionValue\",\n            title: \"产值（万元）\"\n          }, {\n            data: \"additionalValue\",\n            title: \"附加值（万元）\"\n          }, {\n            data: \"createTime\",\n            title: \"创建时间\"\n          }, {\n            data: \"modifyTime\",\n            title: \"更新时间\"\n          }, {\n            data: \"commitStatus\",\n            title: \"状态\"\n          }, $.ProudSmart.datatable.optionCol3];\n          table = domMain.DataTable({\n            dom: '<\"row\"<\"col-sm-6 margin-bottom-10\">>' + (args.option && args.option[0].length >= 1 ? $.ProudSmart.datatable.footerdom : ''),\n            language: $.ProudSmart.datatable.language,\n            select: $.ProudSmart.datatable.select,\n            data: args.option[0],\n            order: [[4, \"desc\"]],\n            columns: columns,\n            columnDefs: [{\n              \"targets\": 0,\n              \"orderable\": false,\n              \"render\": function render(data, type, full) {\n                // 返回自定义内容\n                if (type == \"display\") {\n                  if (data) {\n                    return '<input class=\"itemCheckBox\" checked type=\"checkbox\">';\n                  } else {\n                    return '<input class=\"itemCheckBox\" type=\"checkbox\">';\n                  }\n                }\n\n                return \"\";\n              }\n            }, {\n              \"targets\": 1,\n              \"data\": \"statisticsPeriod\",\n              \"render\": function render(data, type, full) {\n                var ary = new Date(data).Format(\"yyyy-M\").split('-');\n\n                if ($scope.dialog.statisticsType == 'YEAR') {\n                  return ary[0] + '年';\n                } else if ($scope.dialog.statisticsType == 'QUARTER') {\n                  var quarter = '';\n                  $scope.dialog.select.statisticsQuarter.forEach(function (item) {\n                    if (item.id == ary[1]) {\n                      quarter = item.text;\n                    }\n                  });\n                  return ary[0] + '年 ' + quarter;\n                } else if ($scope.dialog.statisticsType == 'MONTH') {\n                  return ary[0] + '年' + ary[1] + '月';\n                }\n\n                if (!$scope.dialog.statisticsType || !data) {\n                  return \"-\";\n                }\n              }\n            }, {\n              \"targets\": 2,\n              \"data\": \"productionValue\",\n              \"render\": function render(data, type, full) {\n                return escape(data);\n              }\n            }, {\n              \"targets\": 3,\n              \"data\": \"additionalValue\",\n              \"render\": function render(data, type, full) {\n                return escape(data);\n              }\n            }, {\n              \"targets\": 4,\n              \"data\": \"createTime\",\n              \"render\": function render(data, type, full) {\n                var str = '';\n                str = $filter('date')(data, 'yyyy-MM-dd HH:mm:ss');\n                return str;\n              }\n            }, {\n              \"targets\": 5,\n              \"data\": \"modifyTime\",\n              \"render\": function render(data, type, full) {\n                var str = '';\n                str = $filter('date')(data, 'yyyy-MM-dd HH:mm:ss');\n                return str;\n              }\n            }, {\n              \"targets\": 6,\n              \"data\": \"commitStatus\",\n              \"render\": function render(data, type, full) {\n                var severityStr = \"\";\n                var severityBg = \"\";\n\n                if (userLoginUIService.user.userType == 100) {\n                  //政府\n                  if (data == 'pass') {\n                    severityStr = \"已审核\";\n                    severityBg = \"label-success\";\n                  } else {\n                    severityStr = \"未审核\";\n                    severityBg = \"label-default\";\n                  }\n                } else {\n                  if (data == 'yes' || data == 'pass') {\n                    severityStr = \"已提交\";\n                    severityBg = \"label-success\";\n                  } else {\n                    severityStr = \"未提交\";\n                    severityBg = \"label-default\";\n                  }\n                }\n\n                return \"<span class='label \" + severityBg + \"'>\" + severityStr + \"</span>\";\n              }\n            }, {\n              \"targets\": 7,\n              \"data\": \"option\",\n              \"render\": function render(data, type, full) {\n                var str = \"<div class='btn-group btn-group-sm'>\";\n\n                if (userLoginUIService.user.userType == 100) {\n                  //政府\n                  if (full.commitStatus == 'pass') {\n                    str += \"<button id='edit-btn' disabled='true' class='btn btn-primary btn-sm' ><i class='fa fa-edit hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 编辑</span></button>\";\n                    str += \"<button id='del-btn' disabled='true' class='btn btn-default btn-sm'><i class='fa fa-edit hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'>删除</span></button>\";\n                    str += \"<button type='button' class='btn btn-default dropdown-toggle' data-toggle='dropdown'> 更多<span class='caret'></span></button>\";\n                    str += \"<ul class='dropdown-menu' role='menu'>\";\n                    str += \"<li><a role='button' id='view-btn'>查看详情</a></li>\";\n                  } else {\n                    str += \"<button id='edit-btn' class='btn btn-primary btn-sm' ><i class='fa fa-edit hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 编辑</span></button>\";\n                    str += \"<button id='del-btn' class='btn btn-default btn-sm'><i class='fa fa-edit hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'>删除</span></button>\";\n                    str += \"<button type='button' class='btn btn-default dropdown-toggle' data-toggle='dropdown'> 更多<span class='caret'></span></button>\";\n                    str += \"<ul class='dropdown-menu' role='menu'>\";\n                    str += \"<li><a role='button' id='commit-btn'>审核</a></li>\";\n                    str += \"<li><a role='button' id='view-btn'>查看详情</a></li>\";\n                  }\n                } else {\n                  if (full.commitStatus == 'yes' || full.commitStatus == 'pass') {\n                    str += \"<button id='edit-btn' disabled='true' class='btn btn-primary btn-sm' ><i class='fa fa-edit hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 编辑</span></button>\";\n                    str += \"<button id='del-btn' disabled='true' class='btn btn-default btn-sm'><i class='fa fa-edit hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'>删除</span></button>\";\n                    str += \"<button type='button' class='btn btn-default dropdown-toggle' data-toggle='dropdown'> 更多<span class='caret'></span></button>\";\n                    str += \"<ul class='dropdown-menu' role='menu'>\";\n                    str += \"<li><a role='button' id='view-btn'>查看详情</a></li>\";\n                  } else {\n                    str += \"<button id='edit-btn' class='btn btn-primary btn-sm' ><i class='fa fa-edit hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 编辑</span></button>\";\n                    str += \"<button id='del-btn' class='btn btn-default btn-sm'><i class='fa fa-edit hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'>删除</span></button>\";\n                    str += \"<button type='button' class='btn btn-default dropdown-toggle' data-toggle='dropdown'> 更多<span class='caret'></span></button>\";\n                    str += \"<ul class='dropdown-menu' role='menu'>\";\n                    str += \"<li><a role='button' id='commit-btn'>提交</a></li>\";\n                    str += \"<li><a role='button' id='view-btn'>查看详情</a></li>\";\n                  }\n                }\n\n                str += \"</ul></div>\";\n                return str;\n              }\n            }],\n            rowCallback: function rowCallback(nRow, aData, iDataIndex) {\n              $compile(nRow)($scope);\n            }\n          });\n          var arrLength = [];\n\n          for (var i = 0; i < columns.length - 1; i++) {\n            arrLength.push(i);\n          }\n\n          if (args.option && args.option[0].length >= 1) {\n            new $.fn.dataTable.Buttons(table, {\n              buttons: [{\n                extend: 'excel',\n                title: '企业经营信息导出',\n                text: '<i class=\"fa fa-download\"></i><span class=\"hidden-xs\"> 导出查询结果</span>',\n                exportOptions: {\n                  columns: arrLength\n                }\n              }]\n            });\n            table.buttons().container().appendTo('.dataTables_wrapper .col-sm-6 ');\n          }\n        });\n        /**\n         * 监听表格初始化后，添加按钮\n         */\n\n        domMain.on('click', '#edit-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          $scope.doAction('edit', row.data(), function (returnObj) {\n            return;\n          });\n        });\n        domMain.on('click', '#view-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          $scope.doAction('view', row.data(), function (returnObj) {\n            return;\n          });\n        });\n        domMain.on('click', '#del-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          $scope.doAction('delete', [row.data().id], function (returnObj) {\n            if (returnObj.code == 0) {\n              growl.success(\"企业信息删除成功\", {});\n              row.remove().draw(false);\n            }\n          });\n        });\n        domMain.on('click', '#commit-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          $scope.doAction('commit', row.data().id, function (returnObj) {\n            if (returnObj.code == 0) {\n              row.data().commitStatus = returnObj.data.commitStatus;\n              table.rows().invalidate().draw(false);\n            }\n          });\n        });\n        domMain.on('change', '#allselect-btn', function (e) {\n          e.stopPropagation();\n\n          if (e.target.checked) {\n            table.rows().select();\n            var tableRows = table.rows({\n              selected: true\n            });\n            $scope.selectedCount = tableRows.count();\n            $scope.$apply();\n\n            for (var i = 0; i < tableRows.nodes().length; i++) {\n              var row = table.row(tableRows.nodes()[i]);\n              row.data().selected = true;\n            }\n\n            ;\n            table.rows().invalidate().draw(false);\n          } else {\n            var tableRows = table.rows({\n              selected: true\n            });\n\n            for (var i = 0; i < tableRows.nodes().length; i++) {\n              var row = table.row(tableRows.nodes()[i]);\n              row.data().selected = false;\n            }\n\n            ;\n            table.rows().deselect();\n            table.rows().invalidate().draw(false);\n            $scope.selectedCount = 0;\n            $scope.$apply();\n          }\n        });\n        domMain.on('change', '.itemCheckBox', function (e) {\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n\n          if (e.target.checked) {\n            row.data().selected = true;\n          } else {\n            row.data().selected = false;\n          }\n\n          var tableRows = table.rows({\n            selected: true\n          });\n\n          if (tableRows.count() == 0) {\n            $('#allselect-btn').attr(\"checked\", false);\n          }\n\n          $scope.selectedCount = tableRows.count();\n          $scope.$apply();\n        }); //多项删除\n\n        $scope.selectedDelete = function () {\n          var tableRows = table.rows({\n            selected: true\n          });\n          var selectedCount = tableRows.count();\n          var nodes = tableRows.nodes();\n\n          if (selectedCount == 0) {\n            growl.warning(\"当前没有选中的企业信息\", {});\n            return;\n          }\n\n          var successCount = 0;\n          var errorCount = 0;\n          var enterpriseIdAry = [];\n          var ifGo = false;\n\n          for (var i = 0; i < nodes.length; i++) {\n            var row = table.row(nodes[i]);\n            var rowData = row.data();\n\n            if (rowData.id > 0) {\n              enterpriseIdAry.push(rowData.id);\n              successCount++;\n            } else {\n              errorCount++;\n            }\n\n            if (selectedCount == successCount + errorCount) {\n              ifGo = true; // growl.success(\"成功确认\" + successCount + \"个,失败\" + errorCount + \"个\", {});\n            }\n          }\n\n          ;\n\n          if (ifGo) {\n            $scope.doAction(\"delete\", enterpriseIdAry, function (returnObj) {\n              if (returnObj.code == 0) {\n                var failObjTotal = returnObj.data.failObj.length;\n                var successObjTotal = returnObj.data.successObj.length;\n                growl.success(\"成功删除\" + successObjTotal + \"个,失败\" + failObjTotal + \"个\", {});\n\n                for (var i = 0; i < nodes.length; i++) {\n                  var row = table.row(nodes[i]);\n\n                  if (row.data().commitStatus == 'yes') {\n                    break;\n                  } else {\n                    row.remove().draw(false);\n                  }\n                }\n\n                $(\".itemCheckBox\").each(function () {\n                  $(this).attr(\"checked\", false);\n                });\n                $(\"#allselect-btn\").attr(\"checked\", false);\n                table.rows().deselect();\n              } else if (!returnObj) {\n                $(\".itemCheckBox\").each(function () {\n                  $(this).attr(\"checked\", false);\n                });\n                $(\"#allselect-btn\").attr(\"checked\", false);\n                table.rows().deselect();\n              }\n            });\n          }\n        };\n      }]\n    };\n  }]); //======================================   发布管理   ===========================================\n\n  directives.initDirective('publishInfoTable', ['$timeout', 'ngDialog', '$compile', 'userLoginUIService', '$filter', 'growl', function ($timeout, ngDialog, $compile, userLoginUIService, $filter, growl) {\n    return {\n      restrict: 'A',\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        var domMain = $element;\n        var table;\n        var ifShow = false;\n        window.JSZip = jszip; // window.pdfmake = pdfmake;\n\n        $scope.$on(Event.ENTERPRISEINIT + \"_publish\", function (event, args) {\n          if (table) {\n            table.destroy();\n            domMain.empty();\n          }\n\n          ;\n          var columns = [{\n            data: \"enterpriseId\",\n            title: \"企业名称\",\n            visible: !$scope.ifEnterprise\n          }, {\n            data: \"reducePeriod\",\n            title: \"节能周期\"\n          }, {\n            data: \"lastReducePeriodData\",\n            title: \"上周期能耗数据（单位：吨标煤）\"\n          }, {\n            data: \"thisReduceIndicator\",\n            title: \"本周期节能指标\"\n          }, {\n            data: \"thisExpectPeriodData\",\n            title: \"本周期预期能耗数据（单位：吨标煤）\"\n          }];\n          var columnDefs = [{\n            \"targets\": 0,\n            \"render\": function render(data, type, full) {\n              var str = '-';\n\n              if (escape(data) && $scope.EnterprisesDic[data]) {\n                str = $scope.EnterprisesDic[data].label;\n              }\n\n              return str;\n            }\n          }, {\n            \"targets\": 1,\n            \"render\": function render(data, type, full) {\n              return data ? data : '-';\n            }\n          }, {\n            \"targets\": 2,\n            \"render\": function render(data, type, full) {\n              return data ? data : '-';\n            }\n          }, {\n            \"targets\": 3,\n            \"render\": function render(data, type, full) {\n              return data ? data + '%' : '-';\n            }\n          }, {\n            \"targets\": 4,\n            \"render\": function render(data, type, full) {\n              return data ? data : '-';\n            }\n          }];\n\n          if (!$scope.ifEnterprise) {\n            columns.push($.ProudSmart.datatable.optionCol3);\n            columnDefs.push({\n              \"targets\": 5,\n              \"data\": \"option\",\n              \"render\": function render(data, type, full) {\n                var str = \"<div class='btn-group btn-group-sm'>\";\n\n                if (full.lastCompleteStatus == 'yes') {\n                  str += \"<button id='complete-btn' disabled='true' class='btn btn-default btn-sm'><i class='fa fa-edit hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'>已完成</span></button>\";\n                } else {\n                  str += \"<button id='complete-btn' class='btn btn-default btn-sm'><i class='fa fa-edit hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'>未完成</span></button>\";\n                }\n\n                str += \"</div>\";\n                return str;\n              }\n            });\n          } else {\n            columns.splice(5, 1);\n            columnDefs.splice(5, 1);\n          }\n\n          table = domMain.DataTable({\n            // dom: args.option && args.option[0].length >= 1 ? $.ProudSmart.datatable.footerdom : '',\n            dom: '<\"row\"<\"col-sm-6 margin-bottom-10\">>' + (args.option && args.option[0].length >= 1 ? $.ProudSmart.datatable.footerdom : ''),\n            language: $.ProudSmart.datatable.language,\n            data: args.option[0],\n            order: [[0, \"desc\"]],\n            columns: columns,\n            columnDefs: columnDefs,\n            rowCallback: function rowCallback(nRow, aData, iDataIndex) {\n              $compile(nRow)($scope);\n            }\n          });\n          var arrLength = [];\n\n          for (var i = 0; i < columns.length; i++) {\n            arrLength.push(i);\n          }\n\n          if (args.option && args.option[0].length >= 1) {\n            new $.fn.dataTable.Buttons(table, {\n              buttons: [{\n                extend: 'excel',\n                title: '节能指标导出',\n                text: '<i class=\"fa fa-download\"></i><span class=\"hidden-xs\"> 导出查询结果</span>',\n                exportOptions: {\n                  columns: arrLength\n                } //, {\n                //extend: 'pdfFlash',\n                // download: 'open',\n                // title: '打印节能指标',\n                // text: '<i class=\"fa fa-download\"></i><span class=\"hidden-xs\"> 打印节能指标</span>'\n                // }\n\n              }]\n            });\n            table.buttons().container().appendTo('.dataTables_wrapper .col-sm-6 ');\n          }\n\n          domMain.on('click', '#complete-btn', function (e) {\n            e.preventDefault();\n            var tr = $(this).closest('tr');\n            var row = table.row(tr);\n            $scope.doAction('complete', row.data().id, function (returnObj) {\n              if (returnObj.code == 0) {\n                growl.success(\"节能周期已完成\", {});\n                row.data().lastCompleteStatus = returnObj.data.lastCompleteStatus;\n                table.rows().invalidate().draw(false);\n              }\n            });\n          });\n        });\n      }]\n    };\n  }]); //======================================    预测   ===========================================\n\n  directives.initDirective('forecastInfoTable', ['$timeout', 'ngDialog', '$compile', 'userLoginUIService', '$filter', 'growl', function ($timeout, ngDialog, $compile, userLoginUIService, $filter, growl) {\n    return {\n      restrict: 'A',\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        var domMain = $element;\n        var table;\n        var ifShow = false;\n        $scope.$on(Event.ENTERPRISEINIT + \"_forecast\", function (event, args) {\n          if (table) {\n            table.destroy();\n            domMain.empty();\n          }\n\n          ;\n          var columns = [{\n            data: \"enterpriseId\",\n            title: \"企业名称\",\n            visible: !$scope.ifEnterprise\n          }, {\n            data: \"forecastPeriod\",\n            title: \"预测周期\"\n          }, {\n            data: \"allEnergyForecastData\",\n            title: \"综合能耗预测值（单位：吨标煤）\"\n          }, $.ProudSmart.datatable.optionCol3];\n          var columnDefs = [{\n            \"targets\": 0,\n            \"render\": function render(data, type, full) {\n              var str = '-';\n\n              if (escape(data) && $scope.EnterprisesDic[data]) {\n                str = $scope.EnterprisesDic[data].label;\n              }\n\n              return str;\n            }\n          }, {\n            \"targets\": 1,\n            \"render\": function render(data, type, full) {\n              return data ? data : '-';\n            }\n          }, {\n            \"targets\": 2,\n            \"render\": function render(data, type, full) {\n              return data ? data : '-';\n            }\n          }, {\n            \"targets\": 3,\n            \"data\": \"option\",\n            \"render\": function render(data, type, full) {\n              var str = \"<div class='btn-group btn-group-sm'>\";\n              str += \"<button id='view-btn' class='btn btn-default btn-sm'><i class='fa fa-edit hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'>查看</span></button>\";\n              str += \"</div>\";\n              return str;\n            }\n          }];\n          table = domMain.DataTable({\n            dom: '<\"row\"<\"col-sm-6 margin-bottom-10\">>' + (args.option && args.option[0].length >= 1 ? $.ProudSmart.datatable.footerdom : ''),\n            language: $.ProudSmart.datatable.language,\n            data: args.option[0],\n            order: [[0, \"desc\"]],\n            columns: columns,\n            columnDefs: columnDefs,\n            rowCallback: function rowCallback(nRow, aData, iDataIndex) {\n              $compile(nRow)($scope);\n            }\n          });\n          var arrLength = [];\n\n          for (var i = 0; i < columns.length - 1; i++) {\n            arrLength.push(i);\n          }\n\n          if (args.option && args.option[0].length >= 1) {\n            new $.fn.dataTable.Buttons(table, {\n              buttons: [{\n                extend: 'excel',\n                title: '预测结果导出',\n                text: '<i class=\"fa fa-download\"></i><span class=\"hidden-xs\"> 导出查询结果</span>',\n                exportOptions: {\n                  columns: arrLength\n                }\n              }]\n            });\n            table.buttons().container().appendTo('.dataTables_wrapper .col-sm-6 ');\n          }\n\n          domMain.on('click', '#view-btn', function (e) {\n            e.preventDefault();\n            var tr = $(this).closest('tr');\n            var row = table.row(tr);\n            $scope.doAction('view', row.data(), function (returnObj) {\n              return;\n            });\n          });\n        });\n      }]\n    };\n  }]); //======================================   企业间设备潜力点   ===========================================\n\n  directives.initDirective('potentialDataTable', ['$timeout', 'ngDialog', '$compile', 'userLoginUIService', '$filter', 'growl', function ($timeout, ngDialog, $compile, userLoginUIService, $filter, growl) {\n    return {\n      restrict: 'A',\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        var domMain = $element;\n        var table;\n        var ifShow = false;\n        window.JSZip = jszip; // window.pdfmake = pdfmake;\n\n        $scope.$on(Event.ENTERPRISEINIT + \"_potential_data\", function (event, args) {\n          if (table) {\n            table.destroy();\n            domMain.empty();\n          }\n\n          ;\n          var columns = args.option[0];\n          var columnDefs = args.option[1];\n          table = domMain.DataTable({\n            // dom: args.option && args.option[0].length >= 1 ? $.ProudSmart.datatable.footerdom : '',\n            dom: '<\"row\"<\"col-sm-6 margin-bottom-10\">>' + (args.option && args.option[0].length >= 1 ? $.ProudSmart.datatable.footerdom : ''),\n            language: $.ProudSmart.datatable.language,\n            data: args.option[2],\n            order: [[0, \"desc\"]],\n            columns: columns,\n            columnDefs: columnDefs,\n            rowCallback: function rowCallback(nRow, aData, iDataIndex) {\n              $compile(nRow)($scope);\n            }\n          });\n          var arrLength = [];\n\n          for (var i = 0; i < columns.length; i++) {\n            arrLength.push(i);\n          }\n\n          if (args.option && args.option[2].length >= 1) {\n            new $.fn.dataTable.Buttons(table, {\n              buttons: [{\n                extend: 'excel',\n                title: '设备潜力点分析导出',\n                text: '<i class=\"fa fa-download\"></i><span class=\"hidden-xs\"> 导出查询结果</span>',\n                exportOptions: {\n                  columns: arrLength\n                }\n              }]\n            });\n            table.buttons().container().appendTo('.dataTables_wrapper .col-sm-6 ');\n          }\n        });\n      }]\n    };\n  }]); //======================================   企业内设备潜力点   ===========================================\n\n  directives.initDirective('potentialDeviceTable', ['$timeout', 'ngDialog', '$compile', 'userLoginUIService', '$filter', 'growl', function ($timeout, ngDialog, $compile, userLoginUIService, $filter, growl) {\n    return {\n      restrict: 'A',\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        var domMain = $element;\n        var table;\n        var ifShow = false;\n        window.JSZip = jszip; // window.pdfmake = pdfmake;\n\n        $scope.$on(Event.ENTERPRISEINIT + \"_potential_device\", function (event, args) {\n          if (table) {\n            table.destroy();\n            domMain.empty();\n          }\n\n          ;\n          var columns = args.option[0];\n          var columnDefs = args.option[1];\n          table = domMain.DataTable({\n            // dom: args.option && args.option[0].length >= 1 ? $.ProudSmart.datatable.footerdom : '',\n            dom: '<\"row\"<\"col-sm-6 margin-bottom-10\">>' + (args.option && args.option[0].length >= 1 ? $.ProudSmart.datatable.footerdom : ''),\n            language: $.ProudSmart.datatable.language,\n            data: args.option[2],\n            order: [[0, \"desc\"]],\n            columns: columns,\n            columnDefs: columnDefs,\n            rowCallback: function rowCallback(nRow, aData, iDataIndex) {\n              $compile(nRow)($scope);\n            }\n          });\n          var arrLength = [];\n\n          for (var i = 0; i < columns.length; i++) {\n            arrLength.push(i);\n          }\n\n          if (args.option && args.option[2].length >= 1) {\n            new $.fn.dataTable.Buttons(table, {\n              buttons: [{\n                extend: 'excel',\n                title: '设备潜力点分析导出',\n                text: '<i class=\"fa fa-download\"></i><span class=\"hidden-xs\"> 导出查询结果</span>',\n                exportOptions: {\n                  columns: arrLength\n                }\n              }]\n            });\n            table.buttons().container().appendTo('.dataTables_wrapper .col-sm-6 ');\n          }\n        });\n      }]\n    };\n  }]);\n});"],"sourceRoot":"/source/"}