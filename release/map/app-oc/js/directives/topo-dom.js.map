{"version":3,"sources":["app-oc/js/directives/topo-dom.js"],"names":["define","directives","initDirective","$timeout","restrict","controller","$scope","$element","$attrs","$id","style","width","document","body","offsetWidth","topoStr","$on","event","args","option","background","zIndex","global","com","proudsmart","Global","graphUtils","Utils","create","contextBody","height","smallMap","mainControl","historyMessage","prop","nodeDrag","modes","jQuery","modeLength","length","i","countModule","stopEvent","lineCount","lineMap","size","modeCount","modeMap","contextCount","baseTool","contextMap","innerHTML","onclick","modeTool","clear","onkeydown","KeyDown","loadTextXml","launchExample"],"mappings":"AAAAA,OAAO,CAAC,yBAA0B,SAAUC,GAC1C,aAEAA,EAAWC,cAAc,UAAW,SAAUC,GAC5C,MAAO,CACLC,SAAU,KACVC,WAAY,CAAC,SAAU,WAAY,SAAU,SAAUC,EAAQC,EAAUC,GACrDC,IAAI,eACVC,MAAMC,MAAQC,SAASC,KAAKC,YAAc,IAAM,KAC5D,IAEIC,EA6EJT,EAAOU,IAAI,iBAAkB,SAAUC,EAAOC,GAC5CH,EAAUG,EAAKC,OAAO,GAhDJ,WAClBV,IAAI,MAAMC,MAAMU,WAAa,UAC7BX,IAAI,MAAMC,MAAMW,OAAS,IACzB,IAAIC,EAASC,IAAIC,WAAWC,OACxBC,EAAaH,IAAIC,WAAWG,MAAMC,OAAO,CAC3CC,YAAa,cACblB,MAAO,KACPmB,OAAQ,IACRC,SAAU,WACVC,YAAa,cACbC,eAAgB,iBAChBC,KAAM,SAERR,EAAWS,SAAS1B,IAAI,cAAc,EAAM,GAC5CiB,EAAWS,SAAS1B,IAAI,cAAc,EAAM,GAC5CiB,EAAWS,SAAS1B,IAAI,cAAc,EAAM,GAI5C,IAHA,IAAI2B,EAAQC,OAAO,oBACfC,EAAaF,EAAMG,OAEdC,EAAI,EAAGA,EAAIF,EAAYE,IAC9Bd,EAAWS,SAASC,EAAMI,IAS5B,SAASC,IACPC,WAAY,EACZ,IAAIC,EAAYrB,EAAOsB,QAAQC,OAC3BC,EAAYxB,EAAOyB,QAAQF,OAC3BG,EAAe1B,EAAO2B,SAASC,WAAWL,OAC9CpC,IAAI,aAAa0C,UAAY,OAASR,EACtClC,IAAI,aAAa0C,UAAY,OAASL,EACtCrC,IAAI,gBAAgB0C,UAAY,OAASH,EAb3CpC,SAASC,KAAKuC,QAAU,WACjBV,WACHpB,EAAO+B,SAASC,SAcpBb,IACA7B,SAASwC,QAAUX,EACnB7B,SAAS2C,UAAYC,QAGrB9B,EAAW+B,YAAY1C,GAKvB2C","file":"app-oc/js/directives/topo-dom.js","sourcesContent":["define(['directives/directives'], function (directives) {\n  'use strict';\n\n  directives.initDirective('topoDiv', function ($timeout) {\n    return {\n      restrict: 'AE',\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        var mainControl = $id(\"mainControl\");\n        mainControl.style.width = document.body.offsetWidth - 412 + \"px\";\n        var bgImg = \"url(images/bg.gif)\";\n        var backColor = \"#e0ecff\";\n        var topoStr;\n\n        function hOnMouseOver(tagObj, index) {\n          var h1 = $id(\"h1\");\n          var h2 = $id(\"h2\");\n          var h3 = $id(\"h3\");\n          var tab1 = $id(\"tab1\");\n          var tab2 = $id(\"tab2\");\n          var tab3 = $id(\"tab3\");\n\n          var setHClass = function setHClass(obj, colorValue, indexValue) {\n            obj.style.background = colorValue;\n            obj.style.zIndex = indexValue;\n          };\n\n          var setTagClass = function setTagClass(obj, className) {\n            obj.setAttribute(\"class\", className);\n            obj.setAttribute(\"className\", className);\n          };\n\n          setHClass(h1, bgImg, \"1\");\n          setHClass(h2, bgImg, \"1\");\n          setHClass(h3, bgImg, \"1\");\n          setTagClass(tab1, \"htab\");\n          setTagClass(tab2, \"htab\");\n          setTagClass(tab3, \"htab\");\n          setHClass(tagObj, backColor, \"3\");\n          setTagClass($id(\"tab\" + index), \"htabup\");\n        }\n\n        var launchExample = function launchExample() {\n          $id(\"h1\").style.background = \"#e0ecff\";\n          $id(\"h1\").style.zIndex = \"3\";\n          var global = com.proudsmart.Global;\n          var graphUtils = com.proudsmart.Utils.create({\n            contextBody: 'contextBody',\n            width: 1600,\n            height: 1000,\n            smallMap: 'smallMap',\n            mainControl: 'mainControl',\n            historyMessage: 'historyMessage',\n            prop: 'prop'\n          });\n          graphUtils.nodeDrag($id(\"baseLine1\"), true, 1);\n          graphUtils.nodeDrag($id(\"baseLine2\"), true, 2);\n          graphUtils.nodeDrag($id(\"baseLine3\"), true, 3);\n          var modes = jQuery(\"[divType='mode']\");\n          var modeLength = modes.length;\n\n          for (var i = 0; i < modeLength; i++) {\n            graphUtils.nodeDrag(modes[i]);\n          }\n\n          document.body.onclick = function () {\n            if (!stopEvent) {\n              global.modeTool.clear();\n            }\n          };\n\n          function countModule() {\n            stopEvent = false;\n            var lineCount = global.lineMap.size();\n            var modeCount = global.modeMap.size();\n            var contextCount = global.baseTool.contextMap.size();\n            $id(\"lineCount\").innerHTML = \"线总数:\" + lineCount;\n            $id(\"modeCount\").innerHTML = \"模型数:\" + modeCount;\n            $id(\"contextCount\").innerHTML = \"区域数:\" + contextCount;\n          }\n\n          countModule();\n          document.onclick = countModule;\n          document.onkeydown = KeyDown; //\t\t\t\ttopoStr = '<?xml version=\"1.0\"?><modes><mode class=\"module\" contentEditable=\"inherit\" attr_prop_attri1=\"2\" attr_prop_attri2=\"3\" attr_prop_attri3=\"4\" id=\"122\" title=\"完成\" backImgSrc=\"images/end.png\" top=\"817\" left=\"935\" zIndex=\"60\" width=\"104\" height=\"43\"/><mode class=\"module\" contentEditable=\"inherit\" attr_prop_attri1=\"2\" attr_prop_attri2=\"3\" attr_prop_attri3=\"4\" id=\"120\" title=\"会计分录\" backImgSrc=\"images/business.png\" top=\"810\" left=\"648\" zIndex=\"60\" width=\"105\" height=\"56\"/><mode class=\"module\" contentEditable=\"inherit\" attr_prop_attri1=\"2\" attr_prop_attri2=\"3\" attr_prop_attri3=\"4\" id=\"112\" title=\"进帐单\" backImgSrc=\"images/handBus.png\" top=\"810\" left=\"386\" zIndex=\"60\" width=\"105\" height=\"56\"/><mode class=\"module\" contentEditable=\"inherit\" attr_prop_attri1=\"2\" attr_prop_attri2=\"3\" attr_prop_attri3=\"4\" id=\"108\" title=\"进帐单\" backImgSrc=\"images/switch.png\" top=\"685\" left=\"648\" zIndex=\"60\" width=\"105\" height=\"56\"/><mode class=\"module\" contentEditable=\"inherit\" attr_prop_attri1=\"2\" attr_prop_attri2=\"3\" attr_prop_attri3=\"4\" id=\"102\" title=\"进帐单\" backImgSrc=\"images/business.png\" top=\"544\" left=\"472\" zIndex=\"60\" width=\"105\" height=\"56\"/><mode class=\"module\" contentEditable=\"inherit\" attr_prop_attri1=\"2\" attr_prop_attri2=\"3\" attr_prop_attri3=\"4\" id=\"100\" title=\"进帐单\" backImgSrc=\"images/business.png\" top=\"534\" left=\"832\" zIndex=\"60\" width=\"105\" height=\"56\"/><mode class=\"module\" contentEditable=\"inherit\" attr_prop_attri1=\"2\" attr_prop_attri2=\"3\" attr_prop_attri3=\"4\" id=\"96\" title=\"进帐单\" backImgSrc=\"images/switch.png\" top=\"449\" left=\"648\" zIndex=\"60\" width=\"105\" height=\"56\"/><mode class=\"module\" contentEditable=\"inherit\" attr_prop_attri1=\"2\" attr_prop_attri2=\"3\" attr_prop_attri3=\"4\" id=\"84\" title=\"进帐单\" backImgSrc=\"images/business.png\" top=\"330\" left=\"648\" zIndex=\"60\" width=\"105\" height=\"56\"/><mode class=\"module\" contentEditable=\"inherit\" attr_prop_attri1=\"2\" attr_prop_attri2=\"3\" attr_prop_attri3=\"4\" id=\"60\" title=\"开始\" backImgSrc=\"images/start.png\" top=\"205\" left=\"648\" zIndex=\"60\" width=\"105\" height=\"56\"/><line strokeweight=\"1.35\" strokecolor=\"black\" d=\"M 648 478 L 648 477,525 477,525 544\" brokenType=\"2\" contentEditable=\"inherit\" id=\"line37\" style=\"WIDTH: 100px; CURSOR: pointer; POSITION: absolute; HEIGHT: 100px; fill: none; stroke: black; stroke-width: 1.7999999999999998;fill: none; stroke: black; stroke-width: 1.7999999999999998\" marker-end=\"url(#arrow)\" wBaseMode=\"module102\" wIndex=\"2\" xBaseMode=\"module96\" xIndex=\"4\" attr_prop_attri1=\"2\" attr_prop_attri2=\"3\" attr_prop_attri3=\"4\" attr_prop_attri4=\"5\"/><line strokeweight=\"1.35\" strokecolor=\"black\" d=\"m701 263 L 701 330 z\" brokenType=\"1\" contentEditable=\"inherit\" id=\"line34\" style=\"WIDTH: 100px; CURSOR: pointer; POSITION: absolute; HEIGHT: 100px; fill: none; stroke: black; stroke-width: 1.7999999999999998;fill: none; stroke: black; stroke-width: 1.7999999999999998\" marker-end=\"url(#arrow)\" wBaseMode=\"module84\" wIndex=\"2\" xBaseMode=\"module60\" xIndex=\"7\" attr_prop_attri1=\"2\" attr_prop_attri2=\"3\" attr_prop_attri3=\"4\" attr_prop_attri4=\"5\"/><line strokeweight=\"1.35\" strokecolor=\"black\" d=\"m493 839 L 648 839 z\" brokenType=\"1\" contentEditable=\"inherit\" id=\"line32\" style=\"WIDTH: 100px; CURSOR: pointer; POSITION: absolute; HEIGHT: 100px; fill: none; stroke: black; stroke-width: 1.7999999999999998;fill: none; stroke: black; stroke-width: 1.7999999999999998\" marker-end=\"url(#arrow)\" wBaseMode=\"module120\" wIndex=\"4\" xBaseMode=\"module112\" xIndex=\"5\" attr_prop_attri1=\"2\" attr_prop_attri2=\"3\" attr_prop_attri3=\"4\" attr_prop_attri4=\"5\"/><line strokeweight=\"1.35\" strokecolor=\"black\" d=\"M 755 839 L 935 839 z\" brokenType=\"1\" contentEditable=\"inherit\" id=\"line30\" style=\"WIDTH: 100px; CURSOR: pointer; POSITION: absolute; HEIGHT: 100px; fill: none; stroke: black; stroke-width: 1.7999999999999998;fill: none; stroke: black; stroke-width: 1.7999999999999998\" marker-end=\"url(#arrow)\" wBaseMode=\"module122\" wIndex=\"4\" xBaseMode=\"module120\" xIndex=\"5\" attr_prop_attri1=\"2\" attr_prop_attri2=\"3\" attr_prop_attri3=\"4\" attr_prop_attri4=\"5\"/><line strokeweight=\"1.35\" strokecolor=\"black\" d=\"m701 743 L 701 810 z\" brokenType=\"1\" contentEditable=\"inherit\" id=\"line28\" style=\"WIDTH: 100px; CURSOR: pointer; POSITION: absolute; HEIGHT: 100px; fill: none; stroke: black; stroke-width: 1.7999999999999998;fill: none; stroke: black; stroke-width: 1.7999999999999998\" marker-end=\"url(#arrow)\" wBaseMode=\"module120\" wIndex=\"2\" xBaseMode=\"module108\" xIndex=\"7\" attr_prop_attri1=\"2\" attr_prop_attri2=\"3\" attr_prop_attri3=\"4\" attr_prop_attri4=\"5\"/><line strokeweight=\"1.35\" strokecolor=\"black\" d=\"M 648 714 L 439 810 z\" brokenType=\"1\" contentEditable=\"inherit\" id=\"line26\" style=\"WIDTH: 100px; CURSOR: pointer; POSITION: absolute; HEIGHT: 100px; fill: none; stroke: black; stroke-width: 1.7999999999999998;fill: none; stroke: black; stroke-width: 1.7999999999999998\" marker-end=\"url(#arrow)\" wBaseMode=\"module112\" wIndex=\"2\" xBaseMode=\"module108\" xIndex=\"4\" attr_prop_attri1=\"2\" attr_prop_attri2=\"3\" attr_prop_attri3=\"4\" attr_prop_attri4=\"5\"/><line strokeweight=\"1.35\" strokecolor=\"black\" d=\"M 884 589 L 884 619,701 619,701 685\" brokenType=\"2\" contentEditable=\"inherit\" id=\"line24\" style=\"WIDTH: 100px; CURSOR: pointer; POSITION: absolute; HEIGHT: 100px; fill: none; stroke: black; stroke-width: 1.7999999999999998;fill: none; stroke: black; stroke-width: 1.7999999999999998\" marker-end=\"url(#arrow)\" wBaseMode=\"module108\" wIndex=\"2\" xBaseMode=\"module100\" xIndex=\"7\" attr_prop_attri1=\"2\" attr_prop_attri2=\"3\" attr_prop_attri3=\"4\" attr_prop_attri4=\"5\"/><line strokeweight=\"1.35\" strokecolor=\"black\" d=\"M 524 597 L 524 619,701 619,701 685\" brokenType=\"2\" contentEditable=\"inherit\" id=\"line22\" style=\"WIDTH: 100px; CURSOR: pointer; POSITION: absolute; HEIGHT: 100px; fill: none; stroke: black; stroke-width: 1.7999999999999998;fill: none; stroke: black; stroke-width: 1.7999999999999998\" marker-end=\"url(#arrow)\" wBaseMode=\"module108\" wIndex=\"2\" xBaseMode=\"module102\" xIndex=\"7\" attr_prop_attri1=\"2\" attr_prop_attri2=\"3\" attr_prop_attri3=\"4\" attr_prop_attri4=\"5\"/><line strokeweight=\"1.35\" strokecolor=\"black\" d=\"M 755 478 L 755 478,884 478,884 534 z\" brokenType=\"2\" contentEditable=\"inherit\" id=\"line20\" style=\"WIDTH: 100px; CURSOR: pointer; POSITION: absolute; HEIGHT: 100px; fill: none; stroke: black; stroke-width: 1.7999999999999998;fill: none; stroke: black; stroke-width: 1.7999999999999998\" marker-end=\"url(#arrow)\" wBaseMode=\"module100\" wIndex=\"2\" xBaseMode=\"module96\" xIndex=\"5\" attr_prop_attri1=\"2\" attr_prop_attri2=\"3\" attr_prop_attri3=\"4\" attr_prop_attri4=\"5\"/><line strokeweight=\"1.35\" strokecolor=\"black\" d=\"m701 388 L 701 449 z\" brokenType=\"1\" contentEditable=\"inherit\" id=\"line16\" style=\"WIDTH: 100px; CURSOR: pointer; POSITION: absolute; HEIGHT: 100px; fill: none; stroke: black; stroke-width: 1.7999999999999998;fill: none; stroke: black; stroke-width: 1.7999999999999998\" marker-end=\"url(#arrow)\" wBaseMode=\"module96\" wIndex=\"2\" xBaseMode=\"module84\" xIndex=\"7\" attr_prop_attri1=\"2\" attr_prop_attri2=\"3\" attr_prop_attri3=\"4\" attr_prop_attri4=\"5\"/></modes>';\n          //\t\t\t\ttopoStr=topoStr.replace(/[\\r\\n]/ig,'');\n\n          graphUtils.loadTextXml(topoStr);\n        };\n\n        $scope.$on('TopoStatusInit', function (event, args) {\n          topoStr = args.option[0];\n          launchExample();\n        });\n      }]\n    };\n  });\n});"],"sourceRoot":"/source/"}