{"version":3,"sources":["app-oc/js/directives/sparepart-dom.js"],"names":["define","directives","datatables","initDirective","$timeout","$compile","$filter","growl","restrict","controller","$scope","$element","$attrs","table","domMain","isEditing","ifShow","ifClose","format","d","returnStr","isEdit","originalNumber","upperLimit","lowerLimit","desc","i","undefined","$on","Event","SPAREINFOINIT","event","args","destroy","DataTable","dom","option","length","$","ProudSmart","datatable","footerdom","language","data","order","columns","title","optionCol3","visible","columnDefs","targets","render","type","full","editStatus","escape","str","ifRouteParams","menuitems","rowCallback","nRow","aData","iDataIndex","on","e","preventDefault","tr","this","closest","row","rowData","context","cellIndex","child","isShown","hasClass","addClass","show","next","doActionInfo","hide","removeClass","info","warning","cells","invalidate","stopPropagation","tds","parents","children","checkPass","selectRow","upperData","lowerData","oriNumber","each","j","val1","jqob1","has","txt","trim","val","allSpareInfos","cell","name","ipts","parent","find","attrname","attr","parseInt","css","border-width","border-color","flg","draw","searching","newData","SPAREININIT","id","startDate","startval","Date","parse","doActionIns","returnObj","INSPARECLAUSESINIT","optionCol2","spareInfos","$parent","ifSubmitIn","doActionIn","selVal","test","OUTSPARECLAUSESINIT","ifSubmitOut","doActionOut","SPAREOUTINIT","doAction"],"mappings":"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","file":"app-oc/js/directives/sparepart-dom.js","sourcesContent":["define(['directives/directives', 'datatables.net', 'datatables.net-bs'], function (directives, datatables) {\n  'use strict'; //======================================      备件信息   ===========================================\n\n  directives.initDirective('spareInfoTable', ['$timeout', '$compile', '$filter', 'growl', function ($timeout, $compile, $filter, growl) {\n    return {\n      restrict: 'A',\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        var domMain = $element;\n        var table;\n        var isEditing = false;\n        var ifShow = false; //false为关闭，true为点击列表才为true\n\n        var ifClose = false; //初始状态为false可关闭，当点击展开时ifClose为true，只有关闭按钮后才回到初始状态\n        // var editStatus = 3; //为3是为新加状态，为2是编辑状态\n\n        var ifFirst = 0; //默认是0，第一次点击是1，在编辑状态下随意点击是2，isEdit=0时，回到初始值0\n\n        $scope.$on(Event.SPAREINFOINIT, function (event, args) {\n          if (ifShow) {\n            ifShow = false;\n          }\n\n          if (ifClose) {\n            ifClose = false;\n          }\n\n          if (table) {\n            table.destroy();\n          }\n\n          isEditing = false;\n          table = domMain.DataTable({\n            dom: args.option[0] && args.option[0].length > 0 ? $.ProudSmart.datatable.footerdom : '',\n            language: $.ProudSmart.datatable.language,\n            data: args.option[0],\n            order: [[0, \"asc\"]],\n            columns: [{\n              data: \"name\",\n              title: \"备件编号\"\n            }, {\n              data: \"label\",\n              title: \"备件名称\"\n            }, {\n              data: \"model\",\n              title: \"备件型号\"\n            }, {\n              data: \"unit\",\n              title: \"备件单位\"\n            }, {\n              data: \"stockNumber\",\n              title: \"库存数量\"\n            }, $.ProudSmart.datatable.optionCol3, {\n              data: \"id\",\n              title: \"\",\n              visible: false\n            }],\n            columnDefs: [{\n              targets: 0,\n              data: \"name\",\n              render: function render(data, type, full) {\n                //返回自定义名字\n                if (full.isEdit == 2 && $scope.editStatus == 3 && type == \"display\") return \"<input maxlength='20' style='width:100%' autofocus='autofocus' autocomplete='off' placeholder='请输入备件编号' class='form-control input-sm' type='text' value='\" + escape(data) + \"' name = 'name'>\";else {\n                  return escape(data);\n                }\n              }\n            }, {\n              targets: 1,\n              data: \"label\",\n              render: function render(data, type, full) {\n                //返回自定义名字\n                if (full.isEdit == 2 && type == \"display\") return \"<input maxlength='20' style='width:100%' autocomplete='off' placeholder='请输入备件名称' class='form-control input-sm' type='text' value='\" + escape(data) + \"' name = 'label'>\";else {\n                  return escape(data);\n                }\n              }\n            }, {\n              targets: 2,\n              data: \"model\",\n              render: function render(data, type, full) {\n                // 返回自定义内容    \n                if (full.isEdit == 2 && type == \"display\") return \"<input maxlength='200' style='width:100%' autocomplete='off' placeholder='请输入备件型号' class='form-control input-sm' type='text' value='\" + escape(data) + \"'  name = 'model'>\";else {\n                  return escape(data);\n                }\n              }\n            }, {\n              targets: 3,\n              data: \"unit\",\n              render: function render(data, type, full) {\n                // 返回自定义内容  \n                if (full.isEdit == 2 && type == \"display\") return \"<input maxlength='200' style='width:100%' autocomplete='off' placeholder='请输入备件单位' class='form-control input-sm' type='text' value='\" + escape(data) + \"' name = 'unit'>\";else {\n                  return escape(data);\n                }\n              }\n            }, {\n              targets: 4,\n              data: \"stockNumber\",\n              render: function render(data, type, full) {\n                // 返回自定义内容  \n                if (full.isEdit == 2 && type == \"display\") return \"<input maxlength='200' style='width:100%' readonly='readonly' class='form-control input-sm' type='text' value='\" + escape(data) + \"' name = 'stockNumber'>\";else {\n                  return escape(data);\n                }\n              }\n            }, {\n              \"targets\": 5,\n              \"data\": \"option\",\n              \"render\": function render(data, type, full) {\n                // 返回自定义内容\n                var str = '<div class=\"btn-group btn-group-sm\" style=\"width: 160px;\">';\n\n                if (full.isEdit == 2) {\n                  str += '<a id=\"save-btn\" class=\"btn btn-primary btn-sm\"><i class=\"fa fa-save  hidden-lg hidden-md hidden-sm \"></i><span class=\"hidden-xs ng-binding\">保存</span></a>' + '<a id=\"cancel-btn\" class=\"btn btn-default btn-sm\" ><i class=\"fa fa-close hidden-lg hidden-md hidden-sm\"></i><span class=\"hidden-xs ng-binding\">取消</span></a></div>';\n                } else if ($scope.ifRouteParams == 2010) {\n                  str += \"<div class='btn-group table-option-group'>\" + \"<button type='button' class='btn btn-sm' style='cursor:text;'>操作</button>\" + \"<button type='button' class='btn btn-sm dropdown-toggle' style='cursor:text;'>\" + \"<span class='caret'></span>\" + \"<span class='sr-only'>Toggle Dropdown</span>\" + \"</button>\" + \"</div>\";\n                } else {\n                  if ($scope.menuitems['A02_S11']) {\n                    str += \"<button id='edit-btn' class='btn btn-primary btn-sm' ><i class='fa fa-edit hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 编辑</span></button>\";\n                  }\n\n                  if ($scope.menuitems['A03_S11']) {\n                    str += \"<button id='del-btn' class='btn btn-default btn-sm' ><i class='fa fa-trash hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 删除</span></button>\";\n                  }\n\n                  if ($scope.menuitems['A04_S11']) {\n                    str += \"<button id='showStockOrder-btn' class='btn btn-default btn-sm' ><i class='fa fa-trash hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 备件记录</span></button>\";\n                  }\n\n                  str += \"</div>\"; // str = \"<div class='btn-group table-option-group'>\" +\n                  //   \"<button type='button' class='btn btn-default btn-sm'>操作</button>\" +\n                  //   \"<button type='button' class='btn btn-default btn-sm dropdown-toggle' data-toggle='dropdown'>\" +\n                  //   \"<span class='caret'></span>\" +\n                  //   \"<span class='sr-only'>Toggle Dropdown</span>\" +\n                  //   \"</button>\" +\n                  //   \"<ul class='dropdown-menu' role='menu'>\";\n                  // str += \"<li><a href='' id='edit-btn'>编辑</a></li>\";\n                  // str += \"<li><a href='' id='del-btn'>删除</a></li>\";\n                  // str += \"<li><a href='' id='showStockOrder-btn'>备件记录</a></li>\";\n                  // // str += \"<li><a href='' id='spareIn-btn'>入库</a></li>\";\n                  // // str += \"<li><a href='' id='spareOut-btn'>出库</a></li>\";\n                  // str += \"</ul>\";\n                  // str += \"</div>\";\n                }\n\n                return str;\n              }\n            }],\n            rowCallback: function rowCallback(nRow, aData, iDataIndex) {\n              $compile(nRow)($scope);\n            }\n          });\n        });\n\n        function format(d) {\n          var returnStr;\n\n          if (d && d.isEdit == 2) {\n            returnStr = '<table width=\"100%\" class=\"table table-inner\">' + '<tr role=\"row\">' + '<td style=\"width:19%;\">原始数量:</td>' + '<td><input datatype=\"' + d.originalNumber + '\" type=\"number\" autocomplete=\"off\" placeholder=\"请输入1~9999999999的整数\" style=\"width:75%;\" class=\"form-control input-sm\" name=\"originalNumber\" value=\"' + d.originalNumber + '\"></td>' + '</tr>' + '<tr role=\"row\">' + '<td style=\"width:19%;\">数量上限:</td>' + '<td><input datatype=\"' + d.upperLimit + '\" type=\"number\" autocomplete=\"off\" placeholder=\"请输入1~9999999999的整数\" style=\"width:75%;\"  class=\"form-control input-sm\" name=\"upperLimit\" value=\"' + d.upperLimit + '\"></td>' + '</tr>' + '<tr role=\"row\">' + '<td style=\"width:19%;\">数量下限:</td>' + '<td><input datatype=\"' + d.lowerLimit + '\" type=\"number\" autocomplete=\"off\" placeholder=\"请输入小于数量上限的正整数\" style=\"width:75%;\" class=\"form-control input-sm\" name=\"lowerLimit\" value=\"' + d.lowerLimit + '\"></td>' + '</tr>' + '<tr role=\"row\">' + '<td style=\"width:19%;\">备注:</td>' + '<td><input datatype=\"' + d.desc + '\"style=\"width:75%;\" autocomplete=\"off\" placeholder=\"请输入备注\" class=\"form-control input-sm\" name=\"desc\" value=\"' + d.desc + '\"></td>' + '</tr>' + '</table>';\n          } else if (d && d.isEdit == 0) {\n            returnStr = '<table width=\"100%\" class=\"table table-inner\">';\n\n            for (var i in d) {\n              returnStr += '<tr role=\"row\">';\n\n              if (i == 'upperLimit') {\n                returnStr += '<td style=\"width:19%;\">数量上限:</td>';\n                returnStr += '<td>' + d.upperLimit + '</td>';\n              } else if (i == 'lowerLimit') {\n                returnStr += '<td style=\"width:19%;\">数量下限:</td>';\n                returnStr += '<td>' + d.lowerLimit + '</td>';\n              } else if (i == 'desc') {\n                returnStr += '<td style=\"width:19%;\">备注:</td>';\n                returnStr += '<td>' + d.desc + '</td>';\n              }\n\n              returnStr += '</tr>';\n            }\n\n            returnStr += '</table>';\n          } else if (d == \"\" || d == null || d == undefined) {\n            returnStr = '<div class=\"box record-box\">' + '<div class=\"box-body table-responsive\">' + // '<label>备件编号：{{SpareName}}</label>' +\n            '<div class=\"pull-right\">' + '<a id=\"close-table\" class=\"btn btn-default btn-sm\">' + '<i class=\"fa fa-times\"></i><span class=\"hidden-xs\">关闭</span>' + '</a>' + '</div>' + '<table width=\"100%\" class=\"table\" spare-record-table></table>' + '</div>' + '</div>';\n          }\n\n          return returnStr;\n        }\n\n        ;\n        /**\n         * 监听表格初始化后，添加按钮\n         */\n\n        domMain.on('init.dt', function () {// var parentDom = $(\".special-btn\").parent();\n          // parentDom.html('<a ng-click=\"addSpareInfo()\" ng-disabled=\"!selecteditem\" ng-hide=\"ifRouteParams==2010\" class=\"btn btn-default btn-sm\"><i class=\"fa fa-plus\"></i><span class=\"hidden-xs\"> 添加备件</span></a>');\n          // $compile(parentDom)($scope);\n        });\n        domMain.on('click', 'td', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          var rowData = row.data();\n\n          if ($(this).context.cellIndex == 5 && row.data().isEdit == 0) {\n            return;\n          }\n\n          if (rowData) {\n            if (row.child.isShown()) {\n              //之前展开\n              // This row is already open - close it\n              if (row.data().isEdit == 0 && !ifShow) {\n                //如果是展示，直接合上\n                row.child.hide();\n                tr.removeClass('shown');\n              } else if (row.data().isEdit == 0 && ifShow) {\n                // if ($('.record-box').hasClass('shown')) {\n                //   row.child.hide();\n                // }\n                return;\n              } else if (row.data().isEdit == 2) {\n                //如果是编辑，则仍是展开状态\n                if (!tr.hasClass('shown')) {\n                  tr.addClass('shown');\n                  row.child(format(row.data())).show();\n                  $compile(tr.next())($scope);\n                  $scope.doActionInfo('showStockOrder', rowData);\n                }\n              } else if (ifShow) {\n                row.child(format()).show();\n                $compile(tr.next())($scope);\n                $scope.doActionInfo('showStockOrder', rowData);\n              }\n            } else {\n              //之前关闭，则需要展开\n              // Open this row\n              var data = row.data();\n\n              if (row.data().isEdit == 2) {\n                if (!tr.hasClass('shown')) {\n                  row.child(format(rowData)).show();\n                  tr.addClass('shown');\n                }\n              }\n\n              if (ifShow && !ifClose) {\n                row.child(format()).show();\n                $compile(tr.next())($scope);\n                $scope.doActionInfo('showStockOrder', rowData);\n              } else {\n                if ($('.record-box').hasClass('shown')) {\n                  row.child.hide();\n                  return;\n                } else {\n                  row.child(format(data)).show();\n                }\n              }\n            }\n          }\n        });\n        domMain.on('click', '#showStockOrder-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          var rowData = row.data();\n\n          if (ifShow) {\n            growl.info(\"请先关闭之前备件记录再打开\", {});\n            return;\n          }\n\n          if (ifClose) {\n            //之前关闭按钮未关闭，则直接返回，不许再展开\n            return;\n          }\n\n          ifShow = true;\n          ifClose = true;\n          row.child(format()).show();\n          tr.addClass('bg-f5f5f5');\n          tr.next().addClass('bg-f5f5f5');\n          tr.addClass('shown');\n          $('.record-box').addClass('shown');\n          $compile(tr)($scope);\n          $compile(tr.next())($scope);\n          $scope.doActionInfo('showStockOrder', rowData);\n        });\n        domMain.on('click', '#edit-btn', function (e) {\n          e.preventDefault();\n          $scope.editStatus = 2;\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n\n          if (ifShow) {\n            growl.info(\"请先关闭之前备件记录再打开\", {});\n            return;\n          }\n\n          if (!isEditing) {\n            isEditing = true;\n            row.data().isEdit = 2;\n            row.cells().invalidate();\n            $compile(tr)($scope);\n          } else {\n            if (row.data().isEdit == 0) {\n              growl.warning(\"有正编辑的备件信息\", {});\n              return;\n            }\n          }\n        });\n        domMain.on('click', '#save-btn', function (e) {\n          e.stopPropagation();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          var tds = $(this).parents(\"tr\").children();\n          var checkPass = true;\n          var selectRow = null;\n          var upperData = -1; //上限\n\n          var lowerData = -1; //下限\n\n          var oriNumber = -1; //原始值\n\n          var stockNumber = -1; //库存值\n\n          for (var i in row.data()) {\n            if (i == 'isEdit' && row.data()[i] == 2) {\n              selectRow = row.data();\n            }\n          }\n\n          $.each(tds, function (j, val1) {\n            var jqob1 = $(val1); //把input变为字符串\n\n            if (!jqob1.has('button').length && jqob1.has('input').length) {\n              var txt = $.trim(jqob1.children(\"input\").val());\n\n              if (!txt) {\n                //没有值\n                if (j != 4) {\n                  //且不是第四项\n                  $(val1).addClass('danger');\n                  checkPass = false;\n                  return false;\n                }\n              } else {\n                //有值\n                if (j == 0) {\n                  if ($scope.allSpareInfos.length == 0) {\n                    $(val1).removeClass('danger');\n                    table.cell(jqob1).data(txt);\n                  } else {\n                    for (var i in $scope.allSpareInfos) {\n                      if ($scope.allSpareInfos[i].name == txt) {\n                        if ($scope.editStatus == 3) {\n                          growl.warning(\"备件编号需要填写唯一\", {});\n                          $(val1).addClass('danger');\n                          checkPass = false;\n                          return;\n                        }\n                      } else {\n                        $(val1).removeClass('danger');\n                        table.cell(jqob1).data(txt);\n                      }\n                    }\n                  }\n                } else {\n                  $(val1).removeClass('danger');\n                  table.cell(jqob1).data(txt);\n                }\n              }\n            }\n          });\n\n          if (!selectRow) {\n            growl.warning(\"请填写完整备件信息\", {});\n            return;\n          }\n\n          var ipts = tr.parent().find('input');\n          $.each(ipts, function (i, val) {\n            var txt = $(val).val();\n            var attrname = $(val).attr('name');\n\n            if (attrname == \"stockNumber\") {\n              stockNumber = parseInt(txt);\n            } else if (attrname == \"upperLimit\") {\n              if (parseInt(txt) < 0 || txt == \"\") {\n                $(val).css({\n                  \"border-width\": \"3px\",\n                  \"border-color\": \"#f2dede\"\n                });\n                checkPass = false;\n                return;\n              } else {\n                upperData = parseInt(txt);\n                selectRow[attrname] = txt;\n              }\n            } else if (attrname == \"lowerLimit\") {\n              if (parseInt(txt) < 0 || txt == \"\") {\n                $(val).css({\n                  \"border-width\": \"3px\",\n                  \"border-color\": \"#f2dede\"\n                });\n                checkPass = false;\n                return;\n              } else {\n                lowerData = parseInt(txt);\n                selectRow[attrname] = txt;\n\n                if (lowerData > upperData) {\n                  growl.warning(\"请正确输入上下限范围\", {});\n                  checkPass = false;\n                  return;\n                } else if (oriNumber > 9999999999 || lowerData > 9999999999 || upperData > 9999999999) {\n                  growl.warning(\"请输入的数量范围控制在0~9999999999之内\", {});\n                  checkPass = false;\n                  return;\n                } else {\n                  selectRow[attrname] = txt;\n                }\n              }\n            } else if (attrname == \"name\") {\n              if (!txt) {\n                checkPass = false;\n                return;\n              } else {\n                //有值\n                if ($scope.allSpareInfos.length == 0) {\n                  selectRow[attrname] = txt;\n                } else {\n                  for (var i in $scope.allSpareInfos) {\n                    if ($scope.allSpareInfos[i].name == txt) {\n                      //如果值重复\n                      checkPass = false;\n                      return false;\n                    } else {\n                      selectRow[attrname] = txt;\n                    }\n                  }\n                }\n              }\n            } else if (attrname == \"originalNumber\") {\n              if (parseInt(txt) < 0 || txt == \"\" || txt == undefined) {\n                $(val).css({\n                  \"border-width\": \"3px\",\n                  \"border-color\": \"#f2dede\"\n                });\n                checkPass = false;\n                return;\n              } else {\n                oriNumber = parseInt(txt);\n                selectRow[attrname] = txt;\n              }\n            } else {\n              selectRow[attrname] = txt;\n            }\n          });\n\n          if (checkPass && upperData >= oriNumber >= lowerData >= 0) {\n            selectRow.isEdit = 0;\n            $scope.editStatus = 3;\n            isEditing = false;\n            $scope.doActionInfo('savespareInfo', selectRow, function (flg) {\n              if (flg) {\n                //真为成功保存\n                row.cells().invalidate().draw();\n                row.child.hide();\n              } else {\n                //假为保存失败\n                return; // row.remove().draw(false);\n              }\n            });\n          }\n        });\n        domMain.on('click', '#cancel-btn', function (e) {\n          e.stopPropagation();\n          isEditing = false;\n          var row = table.row('.shown');\n\n          if (row.data()) {\n            row.data().isEdit = 0;\n            row.child.hide();\n            row.cells().invalidate();\n            $scope.doActionInfo('cancel', row.data());\n          } else {\n            var tr = $(this).closest('tr');\n            var row = table.row(tr);\n            row.data().isEdit = 0; // row.child.hide();\n            // row.cells().invalidate();\n\n            $scope.doActionInfo('cancel', row.data());\n          }\n        });\n        domMain.on('click', '#del-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          $scope.doActionInfo('deletespareInfo', row.data());\n        });\n        domMain.on('click', '#close-table', function (e) {\n          e.stopPropagation();\n          ifShow = false;\n          ifClose = false;\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          $scope.doActionInfo('cancel', row.data());\n        });\n      }]\n    };\n  }]); //======================================      备件记录   ===========================================\n\n  directives.initDirective('spareRecordTable', ['$timeout', '$compile', '$filter', function ($timeout, $compile, $filter) {\n    return {\n      restrict: 'A',\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        var domMain = $element;\n        var table;\n        var isEditing = false;\n        $scope.$on(Event.SPAREINFOINIT + \"record\", function (event, args) {\n          if (table) {\n            table.destroy();\n          }\n\n          isEditing = false;\n          table = domMain.DataTable({\n            dom: args.option[0] && args.option[0].length > 0 ? $.ProudSmart.datatable.footerdom : '',\n            language: $.ProudSmart.datatable.language,\n            data: args.option[0],\n            searching: false,\n            order: [[0, \"category\"]],\n            columns: [{\n              data: \"category\",\n              title: \"出入库\"\n            }, {\n              data: \"sparePartNumber\",\n              title: \"备件数量\"\n            }, {\n              data: \"name\",\n              title: \"库单编号\"\n            }, {\n              data: \"handlerPerson\",\n              title: \"处理人\"\n            }, {\n              data: \"createTime\",\n              title: \"创建时间\"\n            }],\n            columnDefs: [{\n              targets: 0,\n              data: \"category\",\n              render: function render(data, type, full) {\n                var newData = \"\"; // 返回自定义内容\n\n                if (data == \"InStock\") {\n                  newData = \"入库\";\n                } else if (data == \"OutStock\") {\n                  newData = \"出库\";\n                }\n\n                return newData;\n              }\n            }, {\n              targets: 4,\n              data: \"createTime\",\n              render: function render(data, type, full) {\n                // 返回自定义内容    \n                var str = $filter('date')(data, 'yyyy-MM-dd HH:mm:ss');\n                return str;\n              }\n            }]\n          });\n        });\n      }]\n    };\n  }]); //======================================    备件入库    ===================================================\n\n  directives.initDirective('spareInTable', ['$timeout', '$compile', '$filter', 'growl', function ($timeout, $compile, $filter, growl) {\n    return {\n      restrict: 'A',\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        var domMain = $element;\n        var table;\n        var isEditing = false;\n        var ifShow = false;\n        $scope.$on(Event.SPAREININIT, function (event, args) {\n          if (ifShow) {\n            ifShow = false;\n          }\n\n          if (table) {\n            table.destroy();\n          }\n\n          isEditing = false;\n          var itemAttrs = args.option[1];\n          table = domMain.DataTable({\n            dom: args.option[0] && args.option[0].length > 0 ? $.ProudSmart.datatable.footerdom : '',\n            language: $.ProudSmart.datatable.language,\n            data: args.option[0],\n            order: [[0, \"asc\"]],\n            columns: [{\n              data: \"name\",\n              title: \"库单编号\"\n            }, {\n              data: \"desc\",\n              title: \"库单说明\"\n            }, {\n              data: \"handlerPerson\",\n              title: \"处理人\"\n            }, {\n              data: \"createTime\",\n              title: \"入库时间\"\n            }, $.ProudSmart.datatable.optionCol3, {\n              data: \"id\",\n              title: \"\",\n              visible: false\n            }],\n            columnDefs: [{\n              targets: 0,\n              data: \"name\",\n              render: function render(data, type, full) {\n                var returnDate = ''; // 返回自定义内容    \n\n                if (full.isEdit == 2 && type == \"display\") return \"<input style='width:100%' class='form-control input-sm' autocomplete='off' placeholder='请输入库单编号' name='name' type='text' value='\" + escape(data) + \"'>\";else return escape(data);\n              }\n            }, {\n              targets: 2,\n              data: \"handlerPerson\",\n              render: function render(data, type, full) {\n                var returnProjectDate = ''; // 返回自定义内容    \n\n                if (full.isEdit == 2 && type == \"display\") return \"<input style='width:100%' class='form-control input-sm' autocomplete='off' placeholder='请输入处理人' name='handlerPerson' type='text' value='\" + escape(data) + \"'>\";else return escape(data);\n              }\n            }, {\n              targets: 3,\n              data: \"createTime\",\n              render: function render(data, type, full) {\n                // 返回自定义内容    \n                var str = '';\n                if (full.isEdit > 0) return '<input style=\"width:100%\" type=\"text\" class=\"form-control input-sm\" readonly drops=\"down\"  timepicker=\"true\" value=\"' + $filter(\"date\")(data, \"yyyy-MM-dd HH:mm:ss\") + '\" autocomplete=\"off\"  date-time-picker >';else str = $filter('date')(data, 'yyyy-MM-dd HH:mm:ss');\n                return str;\n              }\n            }, {\n              targets: 1,\n              data: \"desc\",\n              render: function render(data, type, full) {\n                var returnDate = ''; // 返回自定义内容    \n\n                if (full.isEdit == 2 && type == \"display\") return \"<input style='width:100%' class='form-control input-sm' placeholder='请输入库单说明' name='desc' type='text' value='\" + escape(data) + \"'>\";else return escape(data);\n              }\n            }, {\n              \"targets\": 4,\n              \"data\": \"option\",\n              \"render\": function render(data, type, full) {\n                // 返回自定义内容\n                var str = '<div class=\"btn-group btn-group-sm\">';\n\n                if (full.isEdit == 2) {\n                  str += '<a id=\"save-btn\" class=\"btn btn-primary btn-sm\"><i class=\"fa fa-check  hidden-lg hidden-md hidden-sm \"></i><span class=\"hidden-xs ng-binding\">保存</span></a>' + '<a id=\"cancel-btn\" class=\"btn btn-default btn-sm\" ><i class=\"fa fa-close hidden-lg hidden-md hidden-sm\"></i><span class=\"hidden-xs ng-binding\">取消</span></a>';\n                } else if ($scope.ifRouteParams == 2010) {\n                  str += \"<div class='btn-group table-option-group'>\" + \"<button type='button' class='btn btn-sm' style='cursor:text;'>操作</button>\" + \"<button type='button' class='btn btn-sm dropdown-toggle' style='cursor:text;'>\" + \"<span class='caret'></span>\" + \"<span class='sr-only'>Toggle Dropdown</span>\" + \"</button>\";\n                } else {\n                  if ($scope.menuitems['D02_A05_S11']) {\n                    str += \"<button id='edit-btn' class='btn btn-primary btn-sm' ><i class='fa fa-edit hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 编辑</span></button>\";\n                  }\n\n                  if ($scope.menuitems['D03_A05_S11']) {\n                    str += \"<button id='del-btn' class='btn btn-default btn-sm' ><i class='fa fa-trash hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 删除</span></button>\";\n                  }\n\n                  if ($scope.menuitems['D04_A05_S11']) {\n                    str += \"<button type='button' class='btn btn-default dropdown-toggle' data-toggle='dropdown'> 更多<span class='caret'></span></button>\";\n                  }\n\n                  str += \"<ul class='dropdown-menu' role='menu'>\";\n\n                  if ($scope.menuitems['D04_A05_S11']) {\n                    str += \"<li><a role='button'  id='sparelist-btn'>备件条目</a></li>\";\n                  }\n\n                  str += \"</ul>\"; // str = \"<div class='btn-group table-option-group'>\" +\n                  //   \"<button type='button' class='btn btn-default btn-sm'>操作</button>\" +\n                  //   \"<button type='button' class='btn btn-default btn-sm dropdown-toggle' data-toggle='dropdown'>\" +\n                  //   \"<span class='caret'></span>\" +\n                  //   \"<span class='sr-only'>Toggle Dropdown</span>\" +\n                  //   \"</button>\" +\n                  //   \"<ul class='dropdown-menu' role='menu'>\";\n                  // str += \"<li><a href='' id='edit-btn'>编辑</a></li>\";\n                  // str += \"<li><a href='' id='del-btn'>删除</a></li>\";\n                  // str += \"<li><a href='' id='sparelist-btn'>备件条目</a></li>\";\n                  // str += \"</ul>\";\n                  // str += \"</div>\";\n                }\n\n                str += \"</div>\";\n                return str;\n              }\n            }],\n            rowCallback: function rowCallback(nRow, aData, iDataIndex) {\n              $compile(nRow)($scope);\n            }\n          });\n        });\n\n        function format() {\n          var innerString = '<div class=\"box\">' + '<div class=\"box-body table-responsive\">' + '<a ng-click=\"addInSpareClauseItem()\" ng-hide=\"ifSubmitIn==2010\" class=\"btn btn-default btn-sm\"><i class=\"fa fa-plus\"></i><span class=\"hidden-xs\"> 添加条目</span></a>' + '<div class=\"text-center pull-right\">' + '<a class=\"btn btn-default btn-sm\" ng-hide=\"ifSubmitIn==2010\" ng-click=\"submitInCaluses();\">' + '<i class=\"fa fa-save\"><span class=\"hidden-xs\">提交</span></i>' + '</a>' + '<a id=\"close-table\" class=\"btn btn-default btn-sm\">' + '<i class=\"fa fa-times\"></i><span class=\"hidden-xs\">关闭</span>' + '</a>' + '</div>' + '<table width=\"100%\" class=\"table\" inspare-clauses-table></table>' + '</div>' + '</div>';\n          return innerString;\n        }\n        /**\n         * 监听表格初始化后，添加按钮\n         */\n\n\n        domMain.on('init.dt', function () {// var parentDom = $(\".special-btn\").parent();\n          // parentDom.html('<a ng-click=\"addspareIn()\"  ng-disabled=\"!selecteditem\" ng-hide=\"ifRouteParams==2010\" class=\"btn btn-default btn-sm\"><i class=\"fa fa-plus\"></i><span class=\"hidden-xs\"> 添加入库信息</span></a>');\n          // $compile(parentDom)($scope);\n        });\n        domMain.on('click', 'td', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          var rowData = row.data();\n        });\n        domMain.on('click', '#edit-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n\n          if (!isEditing) {\n            isEditing = true;\n            row.data().isEdit = 2;\n            row.cells().invalidate();\n            $compile(tr)($scope);\n          } else {\n            if (row.data().isEdit == 0) {\n              growl.warning(\"有正编辑的入库信息\", {});\n              return;\n            }\n          }\n\n          if (row.data().id == 0) {\n            growl.warning(\"有正编辑的入库信息\", {});\n            return;\n          }\n        });\n        domMain.on('click', '#save-btn', function (e) {\n          e.stopPropagation();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          var startDate = '';\n          var endDate = '';\n          var checkPass = true;\n          var selectRow = null;\n          $.each(tr.children(), function (j, val1) {\n            var jqob1 = $(val1); //把input变为字符串\n\n            if (!jqob1.has('button').length && jqob1.has('input').length) {\n              var txt = $.trim(jqob1.children(\"input\").val());\n              var attrname = $.trim(jqob1.children(\"input\").attr('name'));\n\n              if (txt) {\n                if (j == 1 || j == 2 || j == 0) {\n                  if (txt.length > 30) {\n                    growl.warning(\"请输入少于30个字\", {});\n                    $(val1).addClass('danger');\n                    checkPass = false;\n                    return false;\n                  } else {\n                    $(val1).removeClass('danger');\n                    row.data()[attrname] = txt;\n                  }\n                } else if (j == 3) {\n                  var startval = Date.parse(txt);\n                  startDate = new Date(startval);\n                  row.data()[\"createTime\"] = startDate;\n                  $(val1).removeClass('danger');\n                } else {\n                  $(val1).removeClass('danger');\n                  row.data()[\"createTime\"] = txt;\n                }\n              } else {\n                $(val1).addClass('danger');\n                checkPass = false;\n                return false;\n              }\n            }\n          });\n\n          if (checkPass) {\n            $scope.doActionIns('saveSpareIn', row.data(), function (returnObj) {\n              if (returnObj == false) {\n                row.data().isEdit = 2;\n              } else {\n                row.data().isEdit = 0;\n                row.data().id = returnObj.id;\n                row.cells().invalidate();\n                isEditing = false;\n              }\n            });\n          }\n        });\n        domMain.on('click', '#cancel-btn', function (e) {\n          e.stopPropagation();\n          isEditing = false;\n          var row = table.row('.shown');\n\n          if (row.data()) {\n            row.data()[\"isEdit\"] = 0;\n            row.child.hide();\n            row.cells().invalidate();\n            $scope.doActionIns('cancel', row.data());\n          } else {\n            var tr = $(this).closest('tr');\n            var row = table.row(tr);\n            row.data()[\"isEdit\"] = 0;\n            row.child.hide();\n            $scope.doActionIns('cancel', row.data());\n          }\n        });\n        domMain.on('click', '#del-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          $scope.doActionIns('deleteSpareIn', row.data());\n        });\n        domMain.on('click', '#sparelist-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n\n          if (ifShow) {\n            growl.info(\"请先关闭之前备件条目再打开\", {});\n            return;\n          }\n\n          ifShow = true;\n          row.child(format()).show();\n          tr.addClass('shown');\n          tr.addClass('bg-f5f5f5');\n          tr.next().addClass('bg-f5f5f5');\n          $compile(tr)($scope);\n          $compile(tr.next())($scope);\n          $scope.doActionIns('showSpareList', row.data());\n        });\n        domMain.on('click', '#close-table', function (e) {\n          e.stopPropagation();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          ifShow = false;\n          $scope.doActionIns('cancel', row.data());\n        });\n      }]\n    };\n  }]); //======================================    入库条目信息   =================================================\n\n  directives.initDirective('inspareClausesTable', ['$timeout', '$compile', '$filter', 'growl', function ($timeout, $compile, $filter, growl) {\n    return {\n      restrict: 'A',\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        var domMain = $element;\n        var table;\n        var isEditing = false;\n        $scope.$on(Event.INSPARECLAUSESINIT, function (event, args) {\n          if (table) {\n            table.destroy();\n          }\n\n          isEditing = false;\n          table = domMain.DataTable({\n            dom: args.option[0] && args.option[0].length > 0 ? $.ProudSmart.datatable.footerdom : '',\n            language: $.ProudSmart.datatable.language,\n            data: args.option[0],\n            order: [[0, \"asc\"]],\n            columns: [{\n              data: \"sparePartName\",\n              title: \"备件编号\"\n            }, {\n              data: \"sparePartNumber\",\n              title: \"备件数量\"\n            }, {\n              data: \"desc\",\n              title: \"备注\"\n            }, $.ProudSmart.datatable.optionCol2],\n            columnDefs: [{\n              targets: 0,\n              data: \"sparePartName\",\n              render: function render(data, type, full) {\n                var returnDate = ''; // 返回自定义内容    \n\n                if (full.isEdit == 2 && type == \"display\") {\n                  var str = '<select id=\"sparePartName\" name=\"sparePartName\" style=\"width:100%\" class=\"combobox form-control\">' + '<option value=\"\">请选择备件</option>';\n                  var argData = args.option[0];\n                  var spareInfos = $scope.spareInfos;\n\n                  for (var i = 0; i < spareInfos.length; i++) {\n                    if (spareInfos[i].name == data) {\n                      str += '<option selected=\"true\" value=\"' + spareInfos[i].id + '\">' + spareInfos[i].name + '</option>';\n                    } else {\n                      str += '<option value=\"' + spareInfos[i].id + '\">' + spareInfos[i].name + '</option>';\n                    }\n                  }\n\n                  str += '</select>';\n                  return str;\n                } else {\n                  return escape(data);\n                }\n              }\n            }, {\n              targets: 1,\n              data: \"sparePartNumber\",\n              render: function render(data, type, full) {\n                // 返回自定义内容    \n                if (full.isEdit == 2 && type == \"display\") return \"<input maxlength='20' name='sparePartNumber' autocomplete='off' style='width:100%' placeholder='请输入1~9999999999的整数' class='form-control input-sm' type='number' value='\" + escape(data) + \"'>\";else return escape(data);\n              }\n            }, {\n              targets: 2,\n              data: \"desc\",\n              render: function render(data, type, full) {\n                // 返回自定义内容    \n                if (full.isEdit == 2 && type == \"display\") return \"<input maxlength='20' name='desc' autocomplete='off' style='width:100%' class='form-control input-sm' type='text' placeholder='请输入备注' value='\" + escape(data) + \"'>\";else return escape(data);\n              }\n            }, {\n              \"targets\": 3,\n              \"data\": \"option\",\n              \"render\": function render(data, type, full) {\n                var str = \"<div class='input-group'>\";\n\n                if (full.isEdit == 2) {\n                  str += \"<a id='save-btn'  class='btn btn-default btn-sm' ><i class='fa fa-save hidden-lg hidden-md hidden-sm '></i><span class='hidden-xs'> 保存</span></a>\";\n                  str += \"<a id='cancel-btn' class='btn btn-default btn-sm' ><i class='fa fa-times  hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 取消</span></a>\";\n                } else {\n                  if ($scope.$parent.ifSubmitIn == 2010) {\n                    str += \"<button  class='btn' style='cursor:text;'><i class='fa fa-minus hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'>已提交</span></button>\";\n                  } else {\n                    str += \"<a id='edit-btn' class='btn btn-default btn-sm' ><i class='fa fa-minus hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 修改</span></a>\";\n                    str += \"<a id='delStock-btn' class='btn btn-default btn-sm' ><i class='fa fa-minus hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 删除</span></a>\";\n                  }\n                }\n\n                str += \"</div>\";\n                return str;\n              }\n            }]\n          });\n        });\n        /**\n         * 监听表格初始化后，添加按钮\n         */\n\n        domMain.on('init.dt', function () {// var parentDom = $(\".special-btn\").parent();\n          // parentDom.html('<a ng-click=\"addInSpareClauseItem()\" ng-hide=\"ifSubmitIn==2010\" class=\"btn btn-default btn-sm\"><i class=\"fa fa-plus\"></i><span class=\"hidden-xs\"> 添加条目</span></a>');\n          // $compile(parentDom)($scope);\n        });\n        domMain.on('click', 'td', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          var rowData = row.data();\n        });\n        domMain.on('click', '#cancel-btn', function (e) {\n          e.stopPropagation();\n          isEditing = false;\n          var selectRow = table.row('.shown');\n          $scope.$parent.doActionIn('cancel');\n        });\n        domMain.on('click', '#delStock-btn', function (e) {\n          e.preventDefault();\n          isEditing = false;\n          var selectRow = table.row('.shown');\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          $scope.$parent.doActionIn('deleteStockOrderItem', row.data());\n        });\n        domMain.on('click', '#edit-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n\n          if (!isEditing) {\n            isEditing = true;\n            row.data().isEdit = 2;\n            row.cells().invalidate();\n            $compile(tr)($scope);\n          } else {\n            if (row.data().isEdit == 0) {\n              growl.warning(\"有正编辑的库单条目\", {});\n              return;\n            }\n          }\n\n          if (row.data().id == 0) {\n            growl.warning(\"有正编辑的库单条目\", {});\n            return;\n          }\n        });\n        domMain.on('click', '#save-btn', function (e) {\n          e.stopPropagation();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          var checkPass = true;\n          var selectRow = null;\n          var selVal = $(\"#sparePartName\").val();\n          $.each(tr.children(), function (j, val1) {\n            var jqob1 = $(val1);\n\n            if (j == 0) {\n              if (!selVal) {\n                $(val1).addClass('danger');\n                checkPass = false;\n                return false;\n              } else {\n                $(val1).removeClass('danger');\n                row.data()[\"sparePartId\"] = selVal;\n              }\n            } //把input变为字符串\n\n\n            if (!jqob1.has('button').length && jqob1.has('input').length) {\n              var txt = $.trim(jqob1.children(\"input\").val());\n              var attrname = $.trim(jqob1.children(\"input\").attr('name'));\n\n              if (txt) {\n                if (j == 1) {\n                  var reg = /^[1-9]\\d{0,9}$/;\n\n                  if (!reg.test(txt)) {\n                    $(val1).addClass('danger');\n                    checkPass = false;\n                    growl.warning(\"请输入1~9999999999的整数\", {});\n                    return false;\n                  } else {\n                    $(val1).removeClass('danger');\n                    row.data()[attrname] = txt;\n                  }\n                } else {\n                  $(val1).removeClass('danger');\n                  row.data()[attrname] = txt;\n                }\n              } else {\n                $(val1).addClass('danger');\n                checkPass = false;\n                return false;\n              }\n            }\n          });\n\n          if (checkPass) {\n            row.data().isEdit = 0;\n            isEditing = false;\n            $scope.$parent.doActionIn('saveSpareInCaluses', row.data());\n          }\n        });\n      }]\n    };\n  }]); //======================================    出库条目信息   =================================================\n\n  directives.initDirective('outspareClausesTable', ['$timeout', '$compile', '$filter', 'growl', function ($timeout, $compile, $filter, growl) {\n    return {\n      restrict: 'A',\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        var domMain = $element;\n        var table;\n        var isEditing = false;\n        $scope.$on(Event.OUTSPARECLAUSESINIT, function (event, args) {\n          if (table) {\n            table.destroy();\n          }\n\n          isEditing = false;\n          table = domMain.DataTable({\n            dom: args.option[0] && args.option[0].length > 0 ? $.ProudSmart.datatable.footerdom : '',\n            language: $.ProudSmart.datatable.language,\n            data: args.option[0],\n            order: [[0, \"asc\"]],\n            columns: [{\n              data: \"sparePartName\",\n              title: \"备件编号\"\n            }, {\n              data: \"sparePartNumber\",\n              title: \"备件数量\"\n            }, {\n              data: \"desc\",\n              title: \"备注\"\n            }, $.ProudSmart.datatable.optionCol2],\n            columnDefs: [{\n              targets: 0,\n              data: \"sparePartName\",\n              render: function render(data, type, full) {\n                var returnDate = ''; // 返回自定义内容    \n\n                if (full.isEdit == 2 && type == \"display\") {\n                  var str = '<select id=\"sparePartName\" name=\"sparePartName\" style=\"width:100%\" class=\"combobox form-control\">' + '<option value=\"\">请选择备件</option>';\n                  var argData = args.option[0];\n                  var spareInfos = $scope.spareInfos;\n\n                  for (var i = 0; i < spareInfos.length; i++) {\n                    if (spareInfos[i].name == data) {\n                      str += '<option selected=\"true\" value=\"' + spareInfos[i].id + '\">' + spareInfos[i].name + '</option>';\n                    } else {\n                      str += '<option value=\"' + spareInfos[i].id + '\">' + spareInfos[i].name + '</option>';\n                    }\n                  }\n\n                  str += '</select>';\n                  return str;\n                } else {\n                  return escape(data);\n                }\n              }\n            }, {\n              targets: 1,\n              data: \"sparePartNumber\",\n              render: function render(data, type, full) {\n                // 返回自定义内容    \n                if (full.isEdit == 2 && type == \"display\") return \"<input maxlength='20' name='sparePartNumber' autocomplete='off' placeholder='请输入1~9999999999的整数' style='width:100%' class='form-control input-sm' type='number' value='\" + escape(data) + \"'>\";else return escape(data);\n              }\n            }, {\n              targets: 2,\n              data: \"desc\",\n              render: function render(data, type, full) {\n                // 返回自定义内容    \n                if (full.isEdit == 2 && type == \"display\") return \"<input maxlength='20' name='desc' placeholder='请输入备注' autocomplete='off' style='width:100%' class='form-control input-sm' type='text' value='\" + escape(data) + \"'>\";else return escape(data);\n              }\n            }, {\n              \"targets\": 3,\n              \"data\": \"option\",\n              \"render\": function render(data, type, full) {\n                var str = \"<div class='input-group'>\";\n\n                if (full.isEdit == 2) {\n                  str += \"<a id='save-btn'  class='btn btn-default btn-sm' ><i class='fa fa-save hidden-lg hidden-md hidden-sm '></i><span class='hidden-xs'> 保存</span></a>\";\n                  str += \"<a id='cancel-btn' class='btn btn-default btn-sm' ><i class='fa fa-times  hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 取消</span></a>\";\n                } else {\n                  if ($scope.$parent.ifSubmitOut == 2010) {\n                    str += \"<button  class='btn' style='cursor:text;'><i class='fa fa-minus hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'>已提交</span></button>\";\n                  } else {\n                    str += \"<a id='edit-btn' class='btn btn-default btn-sm' ><i class='fa fa-minus hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'>修改</span></a>\";\n                    str += \"<a id='delStock-btn' class='btn btn-default btn-sm' ><i class='fa fa-minus hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'>删除</span></a>\";\n                  }\n                }\n\n                str += \"</div>\";\n                return str;\n              }\n            }]\n          });\n        });\n        /**s\n         * 监听表格初始化后，添加按钮\n         */\n\n        domMain.on('init.dt', function () {// var parentDom = $(\".special-btn\").parent();\n          // parentDom.html('<a ng-click=\"addOutSpareClauseItem()\" ng-hide=\"ifSubmitOut==2010\" class=\"btn btn-default btn-sm\"><i class=\"fa fa-plus\"></i><span class=\"hidden-xs\"> 添加条目</span></a>');\n          // $compile(parentDom)($scope);\n        });\n        domMain.on('click', 'td', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          var rowData = row.data();\n        });\n        domMain.on('click', '#cancel-btn', function (e) {\n          e.stopPropagation();\n          isEditing = false;\n          var selectRow = table.row('.shown');\n          $scope.$parent.doActionOut('cancel');\n        });\n        domMain.on('click', '#delStock-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          $scope.$parent.doActionOut('deleteStockOrderItem', row.data());\n        });\n        domMain.on('click', '#edit-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n\n          if (!isEditing) {\n            isEditing = true;\n            row.data().isEdit = 2;\n            row.cells().invalidate();\n            $compile(tr)($scope);\n          } else {\n            if (row.data().isEdit == 0) {\n              growl.warning(\"有正编辑的条目信息\", {});\n              return;\n            }\n          }\n\n          if (row.data().id == 0) {\n            growl.warning(\"有正编辑的条目信息\", {});\n            return;\n          }\n        });\n        domMain.on('click', '#save-btn', function (e) {\n          e.stopPropagation();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          var checkPass = true;\n          var selectRow = null;\n          var selVal = $(\"#sparePartName\").val();\n          $.each(tr.children(), function (j, val1) {\n            var jqob1 = $(val1);\n\n            if (j == 0) {\n              if (!selVal) {\n                $(val1).addClass('danger');\n                checkPass = false;\n                return false;\n              } else {\n                $(val1).removeClass('danger');\n                row.data()[\"sparePartId\"] = selVal;\n              }\n            } //把input变为字符串\n\n\n            if (!jqob1.has('button').length && jqob1.has('input').length) {\n              var txt = $.trim(jqob1.children(\"input\").val());\n              var attrname = $.trim(jqob1.children(\"input\").attr('name'));\n\n              if (txt) {\n                if (j == 1) {\n                  var reg = /^[1-9]\\d{0,9}$/;\n\n                  if (!reg.test(txt)) {\n                    $(val1).addClass('danger');\n                    checkPass = false;\n                    growl.warning(\"请输入1~9999999999的整数\", {});\n                    return false;\n                  } else {\n                    $(val1).removeClass('danger');\n                    row.data()[attrname] = txt;\n                  }\n                } else {\n                  $(val1).removeClass('danger');\n                  row.data()[attrname] = txt;\n                }\n              } else {\n                $(val1).addClass('danger');\n                checkPass = false;\n                return false;\n              }\n            }\n          });\n\n          if (checkPass) {\n            row.data().isEdit = 0;\n            isEditing = false;\n            $scope.$parent.doActionOut('saveSpareOutCaluses', row.data());\n          }\n        });\n      }]\n    };\n  }]); //======================================    备件出库    ===================================================\n\n  directives.initDirective('spareOutTable', ['$timeout', '$compile', '$filter', 'growl', function ($timeout, $compile, $filter, growl) {\n    return {\n      restrict: 'A',\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        var domMain = $element;\n        var table;\n        var isEditing = false;\n        var ifShow = false;\n        $scope.$on(Event.SPAREOUTINIT, function (event, args) {\n          if (ifShow) {\n            ifShow = false;\n          }\n\n          if (table) {\n            table.destroy();\n          }\n\n          isEditing = false;\n          table = domMain.DataTable({\n            dom: args.option[0] && args.option[0].length > 0 ? $.ProudSmart.datatable.footerdom : '',\n            language: $.ProudSmart.datatable.language,\n            data: args.option[0],\n            order: [[5, \"asc\"]],\n            columns: [{\n              data: \"name\",\n              title: \"库单编号\"\n            }, {\n              data: \"desc\",\n              title: \"库单说明\"\n            }, {\n              data: \"handlerPerson\",\n              title: \"处理人\"\n            }, {\n              data: \"createTime\",\n              title: \"出库时间\"\n            }, $.ProudSmart.datatable.optionCol3, {\n              data: \"id\",\n              title: \"\",\n              visible: false\n            }],\n            columnDefs: [{\n              targets: 0,\n              data: \"name\",\n              render: function render(data, type, full) {\n                var returnDate = ''; // 返回自定义内容    \n\n                if (full.isEdit == 2 && type == \"display\") return \"<input style='width:100%' class='form-control input-sm' autocomplete='off' placeholder='请输入库单编号' name='name' type='text' value='\" + escape(data) + \"'>\";else return escape(data);\n              }\n            }, {\n              targets: 2,\n              data: \"handlerPerson\",\n              render: function render(data, type, full) {\n                var returnProjectDate = ''; // 返回自定义内容    \n\n                if (full.isEdit == 2 && type == \"display\") return \"<input style='width:100%' class='form-control input-sm' autocomplete='off' placeholder='请输入处理人' name='handlerPerson' type='text' value='\" + escape(data) + \"'>\";else return escape(data);\n              }\n            }, {\n              targets: 3,\n              data: \"createTime\",\n              render: function render(data, type, full) {\n                // 返回自定义内容    \n                var str = '';\n                if (full.isEdit > 0) return '<input style=\"width:100%\" type=\"text\" class=\"form-control input-sm\" readonly drops=\"down\"  timepicker=\"true\" value=\"' + $filter(\"date\")(data, \"yyyy-MM-dd HH:mm:ss\") + '\" autocomplete=\"off\"  date-time-picker >';else str = $filter('date')(data, 'yyyy-MM-dd HH:mm:ss');\n                return str;\n              }\n            }, {\n              targets: 1,\n              data: \"desc\",\n              render: function render(data, type, full) {\n                var returnDate = ''; // 返回自定义内容    \n\n                if (full.isEdit == 2 && type == \"display\") return \"<input style='width:100%' class='form-control input-sm' placeholder='请输入库单说明' name='desc' type='text' value='\" + escape(data) + \"'>\";else return escape(data);\n              }\n            }, {\n              \"targets\": 4,\n              \"data\": \"option\",\n              \"render\": function render(data, type, full) {\n                // 返回自定义内容\n                var str = '<div class=\"btn-group btn-group-sm\">';\n\n                if (full.isEdit == 2) {\n                  str += '<a id=\"save-btn\" class=\"btn btn-primary btn-sm\"><i class=\"fa fa-check  hidden-lg hidden-md hidden-sm \"></i><span class=\"hidden-xs ng-binding\">保存</span></a>' + '<a id=\"cancel-btn\" class=\"btn btn-default btn-sm\" ><i class=\"fa fa-close hidden-lg hidden-md hidden-sm\"></i><span class=\"hidden-xs ng-binding\">取消</span></a>';\n                } else if ($scope.ifRouteParams == 2010) {\n                  str += \"<div class='btn-group table-option-group'>\" + \"<button type='button' class='btn btn-sm' style='cursor:text;'>操作</button>\" + \"<button type='button' class='btn btn-sm dropdown-toggle' style='cursor:text;'>\" + \"<span class='caret'></span>\" + \"<span class='sr-only'>Toggle Dropdown</span>\" + \"</button>\";\n                } else {\n                  if ($scope.menuitems['D02_A06_S11']) {\n                    str += \"<button id='edit-btn' class='btn btn-primary btn-sm' ><i class='fa fa-edit hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 编辑</span></button>\";\n                  }\n\n                  if ($scope.menuitems['D03_A06_S11']) {\n                    str += \"<button id='del-btn' class='btn btn-default btn-sm' ><i class='fa fa-trash hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 删除</span></button>\";\n                  }\n\n                  if ($scope.menuitems['D04_A06_S11']) {\n                    str += \"<button type='button' class='btn btn-default dropdown-toggle' data-toggle='dropdown'> 更多<span class='caret'></span></button>\";\n                  }\n\n                  str += \"<ul class='dropdown-menu' role='menu'>\";\n\n                  if ($scope.menuitems['D04_A06_S11']) {\n                    str += \"<li><a role='button'  id='sparelist-btn'>备件条目</a></li>\";\n                  }\n\n                  str += \"</ul>\"; // str = \"<div class='btn-group table-option-group'>\" +\n                  //   \"<button type='button' class='btn btn-default btn-sm'>操作</button>\" +\n                  //   \"<button type='button' class='btn btn-default btn-sm dropdown-toggle' data-toggle='dropdown'>\" +\n                  //   \"<span class='caret'></span>\" +\n                  //   \"<span class='sr-only'>Toggle Dropdown</span>\" +\n                  //   \"</button>\" +\n                  //   \"<ul class='dropdown-menu' role='menu'>\";\n                  // str += \"<li><a href='' id='edit-btn'>编辑</a></li>\";\n                  // str += \"<li><a href='' id='del-btn'>删除</a></li>\";\n                  // str += \"<li><a href='' id='sparelist-btn'>备件条目</a></li>\";\n                  // str += \"</ul>\";\n                  // str += \"</div>\";\n                }\n\n                return str;\n              }\n            }],\n            rowCallback: function rowCallback(nRow, aData, iDataIndex) {\n              $compile(nRow)($scope);\n            }\n          });\n        });\n        /**\n         * 监听表格初始化后，添加按钮\n         */\n\n        domMain.on('init.dt', function () {// var parentDom = $(\".special-btn\").parent();\n          // parentDom.html('<a ng-click=\"addspareOut()\"  ng-disabled=\"!selecteditem\" ng-hide=\"ifRouteParams==2010\" class=\"btn btn-default btn-sm\"><i class=\"fa fa-plus\"></i><span class=\"hidden-xs\"> 添加出库信息</span></a>');\n          // $compile(parentDom)($scope);\n        });\n        domMain.on('click', 'td', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          var rowData = row.data();\n        });\n        domMain.on('click', '#edit-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n\n          if (!isEditing) {\n            isEditing = true;\n            row.data().isEdit = 2;\n            row.cells().invalidate();\n            $compile(tr)($scope);\n          } else {\n            if (row.data().isEdit == 0) {\n              growl.warning(\"有正编辑的出库信息\", {});\n              return;\n            }\n          }\n\n          if (row.data().id == 0) {\n            growl.warning(\"有正编辑的出库信息\", {});\n            return;\n          }\n        });\n        domMain.on('click', '#save-btn', function (e) {\n          e.stopPropagation();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          var startDate = '';\n          var endDate = '';\n          var checkPass = true;\n          var selectRow = null;\n          $.each(tr.children(), function (j, val1) {\n            var jqob1 = $(val1); //把input变为字符串\n\n            if (!jqob1.has('button').length && jqob1.has('input').length) {\n              var txt = $.trim(jqob1.children(\"input\").val());\n              var attrname = $.trim(jqob1.children(\"input\").attr('name'));\n\n              if (txt) {\n                if (j == 1 || j == 2 || j == 0) {\n                  if (txt.length > 30) {\n                    growl.warning(\"请输入少于30个字\", {});\n                    $(val1).addClass('danger');\n                    checkPass = false;\n                    return false;\n                  } else {\n                    $(val1).removeClass('danger');\n                    row.data()[attrname] = txt;\n                  }\n                } else if (j == 3) {\n                  var startval = Date.parse(txt);\n                  startDate = new Date(startval);\n                  row.data()[\"createTime\"] = startDate;\n                  $(val1).removeClass('danger');\n                } else {\n                  $(val1).removeClass('danger');\n                  row.data()[\"createTime\"] = txt;\n                }\n              } else {\n                $(val1).addClass('danger');\n                checkPass = false;\n                return false;\n              }\n            }\n          });\n\n          if (checkPass) {\n            $scope.doAction('saveSpareOut', row.data(), function (returnObj) {\n              if (returnObj == false) {\n                row.data().isEdit = 2;\n              } else {\n                isEditing = false;\n                row.data().isEdit = 0;\n                row.data().id = returnObj.id;\n                row.cells().invalidate();\n              }\n            });\n          }\n        });\n        domMain.on('click', '#cancel-btn', function (e) {\n          e.stopPropagation();\n          isEditing = false;\n          var row = table.row('.shown');\n\n          if (row.data()) {\n            row.data()[\"isEdit\"] = 0;\n            row.child.hide();\n            row.cells().invalidate();\n            $scope.doAction('cancel', row.data());\n          } else {\n            var tr = $(this).closest('tr');\n            var row = table.row(tr);\n            row.data()[\"isEdit\"] = 0;\n            row.child.hide();\n            row.cells().invalidate();\n            $scope.doAction('cancel', row.data());\n          }\n        });\n        domMain.on('click', '#del-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          $scope.doAction('deleteSpareOut', row.data());\n        });\n        domMain.on('click', '#sparelist-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n\n          if (ifShow) {\n            growl.info(\"请先关闭之前备件条目再打开\", {});\n            return;\n          }\n\n          ifShow = true;\n          var innerString = '<div class=\"box\">' + '<div class=\"box-body table-responsive\">' + '<a ng-click=\"addOutSpareClauseItem()\" ng-hide=\"ifSubmitOut==2010\" class=\"btn btn-default btn-sm\"><i class=\"fa fa-plus\"></i><span class=\"hidden-xs\"> 添加条目</span></a>' + '<div class=\"pull-right\">' + '<a id=\"submit-btn\" class=\"btn btn-default btn-sm\" ng-hide=\"ifSubmitOut==2010\" ng-click=\"submitOutCaluses();\">' + '<i class=\"fa fa-save\"><span class=\"hidden-xs\">提交</span></i>' + '</a>' + '<a id=\"close-table\" class=\"btn btn-default btn-sm\">' + '<i class=\"fa fa-times\"></i><span class=\"hidden-xs\">关闭</span>' + '</a>' + '</div>' + '<table width=\"100%\" class=\"table\" outspare-clauses-table></table>' + '</div>' + '</div>';\n          row.child(innerString).show();\n          tr.addClass('shown');\n          tr.addClass('bg-f5f5f5');\n          tr.next().addClass('bg-f5f5f5');\n          $compile(tr)($scope);\n          $compile(tr.next())($scope);\n          $scope.doAction('showSpareList', row.data());\n        });\n        domMain.on('click', '#close-table', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          ifShow = false;\n          $scope.doAction('cancel', row.data());\n        });\n      }]\n    };\n  }]);\n});"],"sourceRoot":"/source/"}