{"version":3,"sources":["app-oc/js/controllers/user-ctrl.js"],"names":["define","controllers","BootstrapDialog","initController","$scope","ngDialog","userInitService","userLoginUIService","userEnterpriseService","userUIService","growl","userRoleUIService","userFunctionService","userDomainService","marketplaceUIService","userSearch","domainListTree","domainUser","domainListDic","tab","userManager","user","queryDitem","state","initEvent","$","on","e","aname","target","attr","addUserName","$broadcast","Event","USERINFOSINIT","userGridData","CURRENTINFOSINIT","currentGridData","$apply","associateUserList","functionRoleName","functionData","roleId","roleArr","roleName","description","domainID","domainPath","roleID","domainTreeQuery","queryDomainTree","userID","data","getDBdata","dialog","treeUserId","open","template","showClose","controller","bodyClassName","width","scope","closeByDocument","appendClassName","className","dialogFun","role","roleFunction","dialogUser","roleUser","functionGridData","columns","title","orderable","columnDefs","targets","render","type","full","domainGridData","userRoleOdd","userStatus","userInfoId","userRole","i","push","addRole2User","resultObj","code","success","warning","check","addUser2Role","p","userInfo","baseNode","d","baseList","addDomain2User","nodes","fn","zTree","getZTreeObj","getCheckedNodes","functionCode","addFunction2Role","closeDialog","allClick","is","angular","forEach","value","key","manageCheck","isEdit","userAllRoleList","functionOdd","each","this","val","addUser","closeTable","doActiveHanddler","select","callback","status","deleteInitUser","doActivePwd","emailAddress","sendSMSPassword","mobilePhone","sendModifyPassword","doAction","userType","selectDomain","b","userEmalStatus","userEmail","userName","trim","enterpriseUserRegister","returnObj","userTypeLabel","addData","enterpriseIndividualRegister","enterprise","modifyUser","show","closable","message","buttons","label","cssClass","action","dialogRef","close","stripscript","modifyRole","j","addRole","getAssociateRole2User","splice","test1","_initTreeview2","obj","domains","tags","length","belong","disabled","expanded","checked","text","name","queryDomainTreeByUser","newObj","parentID","menu_list","treeData","DOMAININFOSINIT","animate","scrollTop","queryRoleByUser","function","id","pId","parentCode","statusCheck","queryAllFunctionByUser","setting","view","showIcon","enable","simpleData","FUNCTIONINFOSINIT","queryFunction2Role","delectRole","deleteRole","queryEnterpriseUser","queryEnterpriseRole","queryDomainByUser","isAuthenticated","$on","evt","$rootScope","$routeParams","initTreeview","userObj","queryUser","res","domainInit","configUIService","resourceUIService","userTypeAry","configGroupsDic","ProudSmart","datatable","optionCol3","loginin","loginId","location","href","domainHandler","enterpriseDomain","menuitems","baseConfig","extendDomain","getDomainsByFilter","findEnterpriseDomain","menuitemsWatch","$watch","o","n","querAllUserInfo","undefined","configList","getAllConfigs","item","groupName","configGroups","eval","typeCode","solutionUIService","parObj","loginName","password","isDemo","industry","enterpriseObj","contactEmail","province","closingDate","city","provinces","districts","citys","configPwd","emailOnly","newValue","oldValue","pro","getSimpleDistricts","children","proChang","getSolutions","activeedAppDatas","savaEnterprise","newData","Date","Format","checkDate","individualUserRegister","vv","FileUploader","enterId","uploader","url","uploadFileUrl","TEXT","filters","options","queue","onWhenAddingFileFailed","filter","console","info","onAfterAddingFile","fileItem","picPath","getPath","_file","onAfterAddingAll","addedFileItems","onBeforeUploadItem","onProgressItem","progress","onProgressAll","onSuccessItem","response","headers","modifyLogo","onErrorItem","onCancelItem","onCompleteItem","onCompleteAll","isImage","slice","lastIndexOf","indexOf","enterpriseStatus","str","roleEdit","defRole","defaultRole","sel","split","roleList","tmp","applied","enterpriseType","titles","mark","characters","button","icon","rls","elem","map","modifyDefaultRole","enterpriseID","addEnterprise","modifyEnterpriseInfo","adminModifyEnterprise","editEnterprise","enterpriseName","enterpriseUrl","modifyCopyRight","blockClick","stat","modifyEnterpriseStatus","origin","cancel","queryAllEnterprise","enterpriseTypeName","file","window","createObjectURL","URL","webkitURL"],"mappings":"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","file":"app-oc/js/controllers/user-ctrl.js","sourcesContent":["define(['controllers/controllers', 'bootstrap-dialog'], function (controllers, BootstrapDialog) {\n  'use strict';\n\n  controllers.initController('UserListCtrl', ['$scope', 'ngDialog', 'userInitService', 'userLoginUIService', 'userEnterpriseService', 'userUIService', 'growl', 'userRoleUIService', 'userFunctionService', 'userDomainService', 'marketplaceUIService', function ($scope, ngDialog, userInitService, userLoginUIService, userEnterpriseService, userUIService, growl, userRoleUIService, userFunctionService, userDomainService, marketplaceUIService) {\n    $scope.userSearch = {};\n    $scope.domainListTree = [];\n    $scope.domainUser = \"\";\n    $scope.domainListDic = {};\n    $scope.tab = \"user\"; //默认显示用户管理\n\n    $scope.userManager = userLoginUIService.user;\n    $scope.queryDitem = {\n      \"state\": \"\"\n    };\n\n    var initEvent = function initEvent() {\n      $('a[data-toggle=\"tab\"]').on('shown.bs.tab', function (e) {\n        var aname = $(e.target).attr(\"name\");\n\n        if (aname == \"user\") {\n          $scope.addUserName = \"新建用户\";\n          $scope.$broadcast(Event.USERINFOSINIT, $scope.userGridData);\n        } else if (aname == \"role\") {\n          $scope.addUserName = \"新建角色\";\n          $scope.$broadcast(Event.CURRENTINFOSINIT, $scope.currentGridData);\n        }\n\n        $scope.tab = aname;\n        $scope.$apply();\n      });\n    };\n\n    $scope.associateUserList = \"\";\n    $scope.functionRoleName = \"\";\n    $scope.functionData = \"\";\n    $scope.roleId = \"\";\n    $scope.roleArr = {\n      \"roleName\": \"\",\n      \"description\": \"\",\n      \"domainID\": \"\",\n      \"domainPath\": \"\",\n      \"roleID\": \"\" //初始化查询条件的域选择\n\n    };\n\n    var domainTreeQuery = function domainTreeQuery() {\n      userDomainService.queryDomainTree(userLoginUIService.user.userID, function (data) {\n        $scope.domainListTree = data.domainListTree;\n        $scope.domainListDic = data.domainListDic;\n        $scope.getDBdata({});\n      });\n    };\n\n    $scope.dialog = function (userID) {\n      $scope.treeUserId = userID;\n      ngDialog.open({\n        template: 'partials/roleAllot.html',\n        showClose: false,\n        controller: 'RoleAllotCtrl',\n        bodyClassName: \"bg-transparent\",\n        width: \"600px\",\n        scope: $scope,\n        closeByDocument: false,\n        appendClassName: \"ngdialog-updata-bg\",\n        className: 'ngdialog-theme-plain'\n      });\n    };\n\n    $scope.dialogFun = function (role) {\n      $scope.roleFunction = role;\n      $scope.functionRoleName = \"1010\";\n      ngDialog.open({\n        template: 'partials/functionAllot.html',\n        showClose: false,\n        controller: 'FunctionAllotCtrl',\n        width: \"600px\",\n        scope: $scope,\n        closeByDocument: false,\n        appendClassName: \"ngdialog-updata-bg\",\n        className: 'ngdialog-theme-plain'\n      });\n    };\n\n    $scope.dialogUser = function (role) {\n      $scope.roleUser = role;\n      ngDialog.open({\n        template: 'partials/userAllot.html',\n        showClose: false,\n        controller: 'userAllotCtrl',\n        width: \"600px\",\n        scope: $scope,\n        closeByDocument: false,\n        appendClassName: \"ngdialog-updata-bg\",\n        className: 'ngdialog-theme-plain'\n      });\n    };\n\n    $scope.functionGridData = {\n      columns: [{\n        title: \"操作\",\n        orderable: false,\n        data: \"option\"\n      }, {\n        title: \"名称\",\n        data: \"name\"\n      }, {\n        title: \"描述\",\n        data: \"description\"\n      }],\n      columnDefs: [{\n        \"targets\": 0,\n        \"data\": \"option\",\n        \"render\": function render(data, type, full) {\n          // 返回自定义内容\n          return '<i class=\"fa fa-plus-circle\" id=\"circle-1\" style=\"color:#1bb6e1;\"></i>';\n        }\n      }]\n    };\n    $scope.domainGridData = {\n      columns: [{\n        title: \"\",\n        orderable: false,\n        data: \"option\"\n      }, {\n        title: \"名称\",\n        data: \"name\"\n      }, {\n        title: \"描述\",\n        data: \"description\"\n      }],\n      columnDefs: [{\n        \"targets\": 0,\n        \"data\": \"option\",\n        \"render\": function render(data, type, full) {\n          // 返回自定义内容\n          return '<i class=\"fa fa-plus-circle\" id=\"circle-1\" style=\"color:#1bb6e1;\"></i>';\n        }\n      }] //用户管理\n\n    };\n    $scope.userGridData = {}; //角色管理\n\n    $scope.currentGridData = {};\n\n    $scope.userRoleOdd = function () {\n      var userStatus = $scope.functionRoleName;\n\n      if (userStatus == \"001\") {\n        $scope.userInfoId = [];\n        var userRole = $scope.currentGridData.data;\n\n        for (var i in userRole) {\n          if (userRole[i].domainID == 1003) {\n            $scope.userInfoId.push(userRole[i].roleID);\n          }\n        }\n\n        userRoleUIService.addRole2User($scope.roleId, $scope.userInfoId, function (resultObj) {\n          if (resultObj.code == 0) {\n            growl.success(\"角色分配成功\", {});\n            $scope.functionRoleName = \"0\";\n          } else {\n            growl.warning(\"角色分配失败!\", {});\n          }\n        });\n      } else if (userStatus == \"002\") {\n        $scope.userInfoId = [];\n        var userRole = $scope.userGridData.data;\n\n        for (var i in userRole) {\n          if (userRole[i].check == 1001) {\n            $scope.userInfoId.push(userRole[i].userID);\n          }\n        }\n\n        userRoleUIService.addUser2Role($scope.userInfoId, $scope.roleId, function (resultObj) {\n          if (resultObj.code == 0) {\n            growl.success(\"用户分配成功\", {});\n            $scope.functionRoleName = \"\";\n          } else {\n            growl.warning(\"用户分配失败!\", {});\n          }\n        });\n      } else if (userStatus == \"003\") {\n        // var userRoleId = \"\";\n        $scope.userInfo = [];\n\n        for (var p in $scope.domainGridData.baseNode) {\n          if ($scope.domainGridData.baseNode[p]) {\n            for (var d in $scope.domainGridData.baseList) {\n              if (p == $scope.domainGridData.baseList[d].domainID) {\n                $scope.userInfo.push($scope.domainGridData.baseList[d]);\n              }\n            }\n          }\n        }\n\n        userDomainService.addDomain2User($scope.userInfo, $scope.roleId, function (resultObj) {\n          if (resultObj.code == 0) {\n            growl.success(\"域分配成功\", {});\n            $scope.functionRoleName = \"\";\n          } else {\n            growl.warning(\"域分配失败!\", {});\n          }\n        });\n      } else if (userStatus == \"1010\") {\n        $scope.userInfo = [];\n        var treeObj = $.fn.zTree.getZTreeObj(\"roleTree\");\n        var nodes = treeObj.getCheckedNodes(true);\n\n        if (nodes) {\n          for (var p in nodes) {\n            $scope.userInfo.push(nodes[p].functionCode);\n          }\n\n          userFunctionService.addFunction2Role($scope.roleFunction.roleID, $scope.userInfo, function (resultObj) {\n            if (resultObj.code == 0) {\n              growl.success(\"功能分配成功\", {});\n              $scope.functionRoleName = \"\";\n              $scope.closeDialog();\n            } else {\n              growl.warning(\"功能分配失败!\", {});\n              $scope.closeDialog();\n            }\n          });\n        }\n      }\n    }; //这个是有弹出框的保存操作\n\n\n    $scope.allClick = function () {\n      var userStatus = $scope.functionRoleName;\n\n      if (userStatus == \"002\") {\n        if ($(\"input[name='allBox_002']\").is(':checked')) {\n          angular.forEach($scope.associateUserList, function (value, key) {\n            if (value.manageCheck != 2001) {\n              value.isEdit = \"1001\";\n            }\n          });\n        } else {\n          angular.forEach($scope.associateUserList, function (value, key) {\n            if (value.manageCheck != 2001) {\n              value.isEdit = \"\";\n            }\n          });\n        }\n      } else if (userStatus == \"001\") {\n        if ($(\"input[name='allBox_001']\").is(':checked')) {\n          angular.forEach($scope.userAllRoleList, function (value, key) {\n            value.domainID = \"1003\";\n          });\n        } else {\n          angular.forEach($scope.userAllRoleList, function (value, key) {\n            if (value.roleID != 102) {\n              value.domainID = \"\";\n            }\n          });\n        }\n      }\n    }; //给角色添加用户\n\n\n    $scope.functionOdd = function () {\n      var userRoleId = \"\";\n      $scope.userInfo = [];\n      $(\"input[name='allFun']\").each(function () {\n        if ($(this).is(':checked')) {\n          userRoleId += $(this).val() + \",\";\n          $scope.userInfo.push($(this).val());\n        }\n      });\n      userRoleUIService.addUser2Role($scope.userInfo, $scope.roleId, function (resultObj) {\n        if (resultObj.code == 0) {\n          growl.success(\"角色分配成功\", {});\n          $scope.functionRoleName = \"\";\n        } else {\n          growl.warning(\"角色分配失败!\", {});\n        }\n      });\n    }; //添加用户操作\n\n\n    $scope.addUser = function () {\n      ngDialog.open({\n        template: 'addUser',\n        showClose: false,\n        width: \"600px\",\n        scope: $scope,\n        appendClassName: \"ngdialog-updata-bg\",\n        className: 'ngdialog-theme-plain'\n      });\n    };\n\n    $scope.closeTable = function () {\n      $scope.functionRoleName = \"0\";\n    };\n\n    $scope.doActiveHanddler = function (select, callback, status) {\n      userInitService.deleteInitUser(select.userID, function (resultObj) {\n        if (resultObj.code == 0) {\n          if (status == \"del\") {\n            growl.warning(\"删除用户成功!\", {});\n            callback(true);\n          } else {\n            callback(true);\n          }\n        }\n      });\n    };\n\n    $scope.doActivePwd = function (select, callback, status) {\n      if (select.emailAddress == \"\" || select.emailAddress == null) {\n        userUIService.sendSMSPassword(select.mobilePhone, function (resultObj) {\n          if (resultObj.code == 0) {\n            if (status == \"pwd\") {\n              growl.warning(\"重置密码成功,请查收\", {});\n              callback(true);\n            } else {\n              callback(true);\n            }\n          }\n        });\n      } else {\n        userUIService.sendModifyPassword(select.emailAddress, function (resultObj) {\n          if (resultObj.code == 0) {\n            if (status == \"pwd\") {\n              growl.warning(\"重置密码成功,请查收\", {});\n              callback(true);\n            } else {\n              callback(true);\n            }\n          }\n        });\n      }\n    };\n\n    $scope.doAction = function (type, select, callback) {\n      if (type == \"save\") {\n        if (select.userID == null) {\n          if (select.userType == 3 || select.userType == 2) {\n            var selectDomain = \"\";\n\n            for (var b in $scope.domainUser) {\n              if (select.domainPath == $scope.domainUser[b].domainPath) {\n                selectDomain = $scope.domainUser[b];\n                break;\n              }\n            }\n\n            if (select.userEmalStatus == \"email\") {\n              select.emailAddress = select.userEmail;\n              select.mobilePhone = \"\";\n            } else if (select.userEmalStatus == \"phone\") {\n              select.mobilePhone = select.userEmail;\n              select.emailAddress = \"\";\n            }\n\n            select.userName = $.trim(select.userName);\n            userUIService.enterpriseUserRegister(select, $scope.domainListDic[selectDomain.domainID], [], function (returnObj) {\n              if (returnObj.code == 0) {\n                for (var i in $scope.userGridData.data) {\n                  if ($scope.userGridData.data[i].userID == null) {\n                    $scope.userGridData.data[i] = returnObj.data;\n                    if (returnObj.data.userType == 3) $scope.userGridData.data[i].userTypeLabel = \"管理员\";else if (returnObj.data.userType == 2) $scope.userGridData.data[i].userTypeLabel = \"普通用户\";else if (returnObj.data.userType == 4) $scope.userGridData.data[i].userTypeLabel = \"终端用户\";\n                    $scope.userGridData.data[i].isEdit = 0;\n\n                    if ($scope.userGridData.data[i].emailAddress == null || $scope.userGridData.data[i].emailAddress == \"\") {\n                      $scope.userGridData.data[i][\"userEmail\"] = $scope.userGridData.data[i].mobilePhone;\n                    } else {\n                      $scope.userGridData.data[i][\"userEmail\"] = $scope.userGridData.data[i].emailAddress;\n                    }\n\n                    break;\n                  }\n\n                  if ($scope.userGridData.data[i].emailAddress == null || $scope.userGridData.data[i].emailAddress == \"\") {\n                    $scope.userGridData.data[i][\"userEmail\"] = $scope.userGridData.data[i].mobilePhone;\n                  } else {\n                    $scope.userGridData.data[i][\"userEmail\"] = $scope.userGridData.data[i].emailAddress;\n                  }\n                }\n\n                $scope.userGridData.addData = 'marking';\n                callback(returnObj.data);\n                growl.success(\"新增用户成功\", {});\n              } else {\n                callback(false);\n              }\n            });\n          } else if (select.userType == 4) {\n            if (select.userEmalStatus == \"email\") {\n              select.emailAddress = select.userEmail;\n              select.mobilePhone = \"\";\n            } else if (select.userEmalStatus == \"phone\") {\n              select.mobilePhone = select.userEmail;\n              select.emailAddress = \"\";\n            }\n\n            userUIService.enterpriseIndividualRegister(select, userLoginUIService.user.enterprise, function (returnObj) {\n              if (returnObj.code == 0) {\n                for (var i in $scope.userGridData.data) {\n                  if ($scope.userGridData.data[i].userID == null) {\n                    $scope.userGridData.data[i] = returnObj.data;\n                    if (returnObj.data.userType == 2) $scope.userGridData.data[i].userTypeLabel = \"管理员\";else if (returnObj.data.userType == 3) $scope.userGridData.data[i].userTypeLabel = \"普通用户\";else if (returnObj.data.userType == 4) $scope.userGridData.data[i].userTypeLabel = \"终端用户\";\n                    $scope.userGridData.data[i].isEdit = 0;\n\n                    if ($scope.userGridData.data[i].emailAddress == null || $scope.userGridData.data[i].emailAddress == \"\") {\n                      $scope.userGridData.data[i][\"userEmail\"] = $scope.userGridData.data[i].mobilePhone;\n                    } else {\n                      $scope.userGridData.data[i][\"userEmail\"] = $scope.userGridData.data[i].emailAddress;\n                    }\n\n                    break;\n                  }\n                }\n\n                $scope.userGridData.addData = 'marking';\n                growl.success(\"新增用户成功\", {});\n                callback(returnObj.data);\n              } else {\n                callback(false);\n              }\n            });\n          }\n        } else if (select.userID) {\n          select.userName = $.trim(select.userName);\n          userUIService.modifyUser(select, function (resultObj) {\n            if (resultObj.code == 0) {\n              for (var i in $scope.userGridData.data) {\n                if (select.userID == $scope.userGridData.data[i].userID) {\n                  $scope.userGridData.data[i] = resultObj.data; // $scope.userGridData.data[i].userTypeLabel = resultObj.data.userType == 2 ? \"普通用户\" : \"管理员\";\n\n                  if ($scope.userGridData.data[i].userType == 3) $scope.userGridData.data[i].userTypeLabel = \"管理员\";else if ($scope.userGridData.data[i].userType == 2) $scope.userGridData.data[i].userTypeLabel = \"普通用户\";else if ($scope.userGridData.data[i].userType == 4) $scope.userGridData.data[i].userTypeLabel = \"终端用户\";\n                  $scope.userGridData.data[i].isEdit = 0;\n\n                  if ($scope.userGridData.data[i].emailAddress == null || $scope.userGridData.data[i].emailAddress == \"\") {\n                    $scope.userGridData.data[i][\"userEmail\"] = $scope.userGridData.data[i].mobilePhone;\n                  } else {\n                    $scope.userGridData.data[i][\"userEmail\"] = $scope.userGridData.data[i].emailAddress;\n                  }\n\n                  break;\n                }\n              }\n\n              growl.success(\"修改用户成功\", {});\n              callback(true);\n            } else {\n              callback(false);\n            }\n          });\n        }\n      } else if (type == \"delete\") {\n        if (userLoginUIService.user.userID == select.userID) {\n          growl.warning(\"不能操作自己账号!\", {});\n          return;\n        }\n\n        BootstrapDialog.show({\n          title: '提示',\n          closable: false,\n          //size:BootstrapDialog.SIZE_WIDE,\n          message: '确认要删除该用户',\n          buttons: [{\n            label: '确定',\n            cssClass: 'btn-success',\n            action: function action(dialogRef) {\n              $scope.doActiveHanddler(select, callback, \"del\");\n              dialogRef.close();\n            }\n          }, {\n            label: '取消',\n            action: function action(dialogRef) {\n              dialogRef.close();\n            }\n          }]\n        });\n      } else if (type == \"modifyRole\") {\n        $scope.roleArr.roleName = stripscript(select.roleName);\n        $scope.roleArr.description = stripscript(select.description);\n        $scope.roleArr.roleID = select.roleID;\n        userRoleUIService.modifyRole($scope.roleArr, function (data) {\n          if (data.code == 0) {\n            for (var i in $scope.currentGridData.data) {\n              $scope.currentGridData.data[i][\"isEdit\"] = 0;\n              if ($scope.currentGridData.data[i].roleID == select.roleID) $scope.currentGridData.data[i] = data.data;\n            }\n\n            growl.success(\"修改角色成功\", {});\n            callback(true);\n          } else {\n            growl.warning(\"修改角色失败!\", {});\n          }\n        });\n      } else if (type == \"resetPwd\") {\n        if (userLoginUIService.user.userID == select.userID) {\n          growl.warning(\"不能重置自己密码!\", {});\n          return;\n        }\n\n        BootstrapDialog.show({\n          title: '提示',\n          closable: false,\n          //size:BootstrapDialog.SIZE_WIDE,\n          message: '是否要重置该用户密码',\n          buttons: [{\n            label: '确定',\n            cssClass: 'btn-success',\n            action: function action(dialogRef) {\n              $scope.doActivePwd(select, callback, \"pwd\");\n              dialogRef.close();\n            }\n          }, {\n            label: '取消',\n            action: function action(dialogRef) {\n              dialogRef.close();\n            }\n          }]\n        });\n      } else if (type == \"addRole\") {\n        if (select.roleID == null) {\n          for (var j in $scope.currentGridData.data) {\n            if ($scope.currentGridData.data[j].roleID != null && $scope.currentGridData.data[j].roleName == select.roleName) {\n              growl.warning(\"角色名称已存在!\", {});\n              return;\n            }\n          }\n\n          $scope.roleArr.domainID = userLoginUIService.user.domainID;\n          $scope.roleArr.domainPath = userLoginUIService.user.domainPath;\n          $scope.roleArr.roleName = $.trim(select.roleName);\n          $scope.roleArr.description = $.trim(select.description);\n          userRoleUIService.addRole($scope.roleArr, function (data) {\n            if (data.code == 0) {\n              for (var i in $scope.currentGridData.data) {\n                if ($scope.currentGridData.data[i].roleId == null) {\n                  $scope.currentGridData.data[i] = data.data;\n                  break;\n                }\n              }\n\n              growl.success(\"新增角色成功\", {});\n              callback(data.data);\n            } else {\n              callback(false);\n            }\n          });\n        } else {\n          for (var j in $scope.currentGridData.data) {\n            if ($scope.currentGridData.data[j].roleID != select.roleID && $scope.currentGridData.data[j].roleName == select.roleName) {\n              growl.warning(\"角色名称已存在!\", {});\n              return;\n            }\n          }\n\n          $scope.roleArr.roleID = select.roleID;\n          $scope.roleArr.roleName = $.trim(select.roleName);\n          $scope.roleArr.description = $.trim(select.description);\n          userRoleUIService.modifyRole($scope.roleArr, function (data) {\n            if (data.code == 0) {\n              for (var i in $scope.currentGridData.data) {\n                if ($scope.currentGridData.data[i].roleID == select.roleID) $scope.currentGridData.data[i] = data.data;\n              }\n\n              callback(true);\n              growl.success(\"修改角色成功\", {});\n            } else {\n              callback(false);\n            }\n          });\n        }\n      } else if (type == \"allotUserRole\") {\n        //给用户分配角色列表\n        // if (select.roleID != 102) {\n        userRoleUIService.getAssociateRole2User({\n          \"roleID\": select.roleID\n        }, function (data) {\n          if (data.code == 0) {\n            $scope.functionRoleName = \"002\";\n            $scope.roleId = select.roleID;\n\n            for (var i in $scope.userGridData.data) {\n              $scope.userGridData.data[i][\"check\"] = \"\";\n\n              if ($scope.userGridData.data[i].userID == null) {\n                $scope.userGridData.data.splice(i, 1);\n              }\n\n              for (var j in data.data) {\n                if ($scope.userGridData.data[i].userID == data.data[j].userID) {\n                  $scope.userGridData.data[i].check = 1001;\n                }\n              }\n\n              $scope.$broadcast(Event.CURRENTINFOSINIT + \"_userRole\", $scope.userGridData);\n            }\n          }\n        });\n      } else if (type == \"domainUserRole\") {\n        if (userLoginUIService.user.userID == select.userID) {\n          growl.warning(\"不能操作自己账号!\", {});\n          return;\n        }\n\n        $scope.roleId = select.userID;\n        $scope.functionRoleName = \"003\";\n        var test1 = [];\n\n        var _initTreeview2 = function initTreeview(obj, baseNode) {\n          if (obj.domains) {\n            obj.nodes = [];\n\n            for (var i in obj.domains) {\n              obj.nodes.push(_initTreeview2(obj.domains[i], baseNode));\n            }\n\n            obj.tags = [obj.nodes.length];\n          }\n\n          if (obj.belong == 1) {\n            if (obj.domainPath == select.domainPath) {\n              obj.state = {\n                disabled: true,\n                expanded: true,\n                checked: true\n              };\n            } else {\n              obj.state = {\n                expanded: true,\n                checked: true\n              };\n            }\n\n            baseNode[obj.domainID] = true;\n          } else {\n            obj.state = {\n              expanded: true,\n              checked: false\n            };\n            baseNode[obj.domainID] = false;\n          } // obj.text = obj.name;\n\n\n          obj.text = obj.name;\n\n          if (obj.name != \"\") {\n            test1.push(obj);\n          }\n\n          return obj;\n        };\n\n        userDomainService.queryDomainTreeByUser(select.userID, function (data) {\n          if (data.code == 0) {\n            var baseNode = {};\n            var newObj = {\n              parentID: \"\",\n              domainPath: \"\",\n              name: \"\",\n              description: \"\",\n              domains: data.data\n            };\n            $scope.functionData = newObj;\n\n            var menu_list = _initTreeview2(newObj, baseNode);\n\n            $scope.domainGridData.data = newObj.domains;\n            $scope.domainGridData.treeData = menu_list.nodes;\n            $scope.domainGridData.baseNode = baseNode;\n            $scope.domainGridData.baseList = test1;\n            $scope.$broadcast(Event.DOMAININFOSINIT, $scope.domainGridData);\n          }\n        });\n        $(\"html,body\").animate({\n          scrollTop: 1000\n        }, 500);\n      } else if (type == \"roleUserRole\") {\n        if (userLoginUIService.user.userID == select.userID) {\n          growl.warning(\"不能操作自己账号!\", {});\n          return;\n        }\n\n        userRoleUIService.queryRoleByUser(select.userID, function (data) {\n          if (data.code == 0) {\n            $scope.functionRoleName = \"001\";\n            $scope.roleId = select.userID;\n\n            for (var i in $scope.currentGridData.data) {\n              $scope.currentGridData.data[i].domainID = \"\";\n\n              for (var j in data.data) {\n                if ($scope.currentGridData.data[i].roleID == data.data[j].roleID) {\n                  $scope.currentGridData.data[i].domainID = 1003;\n                }\n              } //$scope.userAllRoleList = $scope.currentGridData.data;\n\n\n              $scope.$broadcast(Event.CURRENTINFOSINIT + \"_roleUser\", $scope.currentGridData);\n            }\n\n            $(\"html,body\").animate({\n              scrollTop: 1000\n            }, 500);\n          }\n        });\n      } else if (type == \"funRole\") {\n        // if (select.roleID != 100 && select.roleID != 102) {\n        $scope.roleId = select.roleID;\n        $scope.treeData = [];\n        $scope.functionRoleName = \"1010\";\n\n        var _initTreeview2 = function _initTreeview(obj, baseNode) {\n          if (obj.function) {\n            obj.nodes = [];\n\n            for (var i in obj.function) {\n              obj.nodes.push(_initTreeview2(obj.function[i], baseNode));\n            }\n          }\n\n          obj.id = obj.functionCode;\n          obj.pId = obj.parentCode;\n          obj.open = true;\n\n          if (obj.belong == 1) {\n            obj.checked = true;\n          }\n\n          if (obj.name) {\n            $scope.treeData.push(obj); // $scope.treeDataList.push(obj);\n            //arr.push(obj)\n          }\n\n          return obj;\n        };\n\n        if (userLoginUIService.user.userID != 1 && (select.roleID == 100 || select.roleID == 102 || select.roleID == 1000 || select.roleID == 101 || select.roleID == 103)) {\n          $scope.functionGridData.statusCheck = false; //控制保存按钮显示不显示\n\n          userFunctionService.queryFunction2Role(select.roleID, function (data) {\n            if (data.code == 0 && data.data.length > 0) {\n              var newObj = {\n                parentID: \"\",\n                domainPath: \"\",\n                name: \"\",\n                description: \"\",\n                function: data.data\n              };\n              var baseNode = {};\n\n              var menu_list = _initTreeview2(newObj, baseNode);\n\n              var setting = {\n                view: {\n                  showIcon: false\n                },\n                data: {\n                  simpleData: {\n                    enable: true\n                  }\n                }\n              };\n              $scope.functionGridData.data = $scope.treeData;\n              $scope.functionGridData.setting = setting;\n              $scope.$broadcast(Event.FUNCTIONINFOSINIT + \"_ztree\", $scope.functionGridData);\n              $(\"html,body\").animate({\n                scrollTop: 1000\n              }, 500);\n            }\n          });\n        } else {\n          $scope.functionGridData.statusCheck = true; //控制保存按钮显示不显示\n\n          userFunctionService.queryAllFunctionByUser(userLoginUIService.user.userID, select.roleID, function (data) {\n            if (data.code == 0 && data.data.length > 0) {\n              var newObj = {\n                parentID: \"\",\n                domainPath: \"\",\n                name: \"\",\n                description: \"\",\n                function: data.data\n              };\n              $scope.functionData = newObj;\n              var baseNode = {};\n\n              var menu_list = _initTreeview2(newObj, baseNode);\n\n              var setting = {\n                view: {\n                  showIcon: false\n                },\n                check: {\n                  enable: true\n                },\n                data: {\n                  simpleData: {\n                    enable: true\n                  }\n                }\n              };\n              $scope.functionGridData.data = $scope.treeData;\n              $scope.functionGridData.setting = setting;\n              $scope.$broadcast(Event.FUNCTIONINFOSINIT + \"_ztree\", $scope.functionGridData);\n              $(\"html,body\").animate({\n                scrollTop: 1000\n              }, 500);\n            }\n          });\n        }\n      } else if (type == \"deleteRole\") {\n        if (select.roleID == 102 || select.roleID == 100 || select.roleID == 101 || select.roleID == 2000 || select.roleID == 2001) {\n          growl.warning(\"此角色不能删除!\", {});\n          return;\n        }\n\n        BootstrapDialog.show({\n          title: '提示',\n          closable: false,\n          //size:BootstrapDialog.SIZE_WIDE,\n          message: '确认要删除该角色？',\n          buttons: [{\n            label: '确定',\n            cssClass: 'btn-success',\n            action: function action(dialogRef) {\n              $scope.delectRole = {\n                \"roleID\": select.roleID\n              };\n              userRoleUIService.deleteRole($scope.delectRole, function (data) {\n                if (data.code == 0) {\n                  growl.warning(\"删除角色成功\", {});\n                  $scope.functionRoleName = \"0\";\n                  callback(true);\n                } else {\n                  growl.warning(\"删除角色失败\", {});\n                }\n              });\n              dialogRef.close();\n            }\n          }, {\n            label: '取消',\n            action: function action(dialogRef) {\n              dialogRef.close();\n            }\n          }]\n        });\n      }\n    }; //数据初始化\n\n\n    $scope.getDBdata = function () {\n      //查询用户域\n      // userEnterpriseService.queryEnterpriseDomain(function (returnObj) {\n      //   if (returnObj.code == 0) {\n      //     $scope.enterpriseDomain = returnObj.data;\n      //当前域下用户\n      userEnterpriseService.queryEnterpriseUser(function (resultObj) {\n        if (resultObj.code == 0) {\n          for (var i in resultObj.data) {\n            var obj = resultObj.data[i];\n            obj.isEdit = 0; // obj.userTypeLabel = obj.userType == 2 ? \"普通用户\" : \"管理员\";\n\n            if (obj.userType == 3) obj.userTypeLabel = \"管理员\";else if (obj.userType == 2) obj.userTypeLabel = \"普通用户\";else if (obj.userType == 4) obj.userTypeLabel = \"终端用户\";\n\n            if (obj.emailAddress == null || obj.emailAddress == \"\") {\n              obj[\"userEmail\"] = obj.mobilePhone;\n            } else {\n              obj[\"userEmail\"] = obj.emailAddress;\n            }\n          }\n\n          $scope.userGridData.data = resultObj.data;\n          $scope.$broadcast(Event.USERINFOSINIT, $scope.userGridData);\n        }\n      }); //   }\n      // });\n      //查询企业角色\n\n      userEnterpriseService.queryEnterpriseRole(function (returnObj) {\n        if (returnObj.code == 0) {\n          for (var i in returnObj.data) {\n            if (!returnObj.data[i] || returnObj.data[i] == '' || returnObj.data[i] == null) {\n              returnObj.data.splice(i, 1);\n            }\n          }\n\n          $scope.currentGridData.data = returnObj.data; // $scope.$broadcast(Event.CURRENTINFOSINIT, $scope.currentGridData);\n        }\n      });\n      userDomainService.queryDomainByUser(userLoginUIService.user.userID, function (returnObj) {\n        if (returnObj.code == 0) {\n          $scope.domainUser = returnObj.data;\n        }\n      });\n    }; //判断用户是否存在\n\n\n    if (!userLoginUIService.user.isAuthenticated) {\n      $scope.$on('loginStatusChanged', function (evt, d) {\n        if (userLoginUIService.user.isAuthenticated) {\n          initEvent();\n          domainTreeQuery();\n        }\n      });\n    } else {\n      initEvent();\n      domainTreeQuery();\n    }\n  }]);\n  controllers.initController('FunctionAllotCtrl', ['$scope', '$rootScope', 'ngDialog', '$routeParams', 'userInitService', 'userLoginUIService', 'userEnterpriseService', 'userUIService', 'growl', 'userRoleUIService', 'userFunctionService', 'userDomainService', function ($scope, $rootScope, ngDialog, $routeParams, userInitService, userLoginUIService, userEnterpriseService, userUIService, growl, userRoleUIService, userFunctionService, userDomainService) {\n    $scope.role = $scope.roleFunction;\n    var select = $scope.roleFunction;\n    $scope.treeData = [];\n\n    if ($scope.role) {\n      var initTreeview = function initTreeview(obj, baseNode) {\n        if (obj.function) {\n          obj.nodes = [];\n\n          for (var i in obj.function) {\n            obj.nodes.push(initTreeview(obj.function[i], baseNode));\n          }\n        }\n\n        obj.id = obj.functionCode;\n        obj.pId = obj.parentCode; // obj.open = true;\n\n        if (obj.belong == 1) {\n          obj.checked = true;\n        }\n\n        if (obj.name) {\n          $scope.treeData.push(obj); // $scope.treeDataList.push(obj);\n          //arr.push(obj)\n        }\n\n        return obj;\n      };\n\n      if (userLoginUIService.user.userID != 1 && (select.roleID == 100 || select.roleID == 102 || select.roleID == 1000 || select.roleID == 101 || select.roleID == 103)) {\n        $scope.functionGridData.statusCheck = false; //控制保存按钮显示不显示\n\n        userFunctionService.queryFunction2Role(select.roleID, function (data) {\n          if (data.code == 0 && data.data.length > 0) {\n            var newObj = {\n              parentID: \"\",\n              domainPath: \"\",\n              name: \"\",\n              description: \"\",\n              function: data.data\n            };\n            var baseNode = {};\n            var menu_list = initTreeview(newObj, baseNode);\n            var setting = {\n              view: {\n                showIcon: false\n              },\n              data: {\n                simpleData: {\n                  enable: true\n                }\n              }\n            };\n            $scope.functionGridData.data = $scope.treeData;\n            $scope.functionGridData.setting = setting;\n            $scope.$broadcast(Event.FUNCTIONINFOSINIT + \"_ztree\", $scope.functionGridData);\n          }\n        });\n      } else {\n        $scope.functionGridData.statusCheck = true; //控制保存按钮显示不显示\n\n        userFunctionService.queryAllFunctionByUser(userLoginUIService.user.userID, select.roleID, function (data) {\n          if (data.code == 0 && data.data.length > 0) {\n            var newObj = {\n              parentID: \"\",\n              domainPath: \"\",\n              name: \"\",\n              description: \"\",\n              function: data.data\n            };\n            $scope.functionData = newObj;\n            var baseNode = {};\n            var menu_list = initTreeview(newObj, baseNode);\n            var setting = {\n              view: {\n                showIcon: false\n              },\n              check: {\n                enable: true\n              },\n              data: {\n                simpleData: {\n                  enable: true\n                }\n              }\n            };\n            $scope.functionGridData.data = $scope.treeData;\n            $scope.functionGridData.setting = setting;\n            $scope.$broadcast(Event.FUNCTIONINFOSINIT + \"_ztree\", $scope.functionGridData);\n          }\n        });\n      }\n    }\n  }]);\n  controllers.initController('RoleAllotCtrl', ['$scope', '$rootScope', 'ngDialog', '$routeParams', 'userInitService', 'userLoginUIService', 'userEnterpriseService', 'userUIService', 'growl', 'userRoleUIService', 'userFunctionService', 'userDomainService', 'marketplaceUIService', function ($scope, $rootScope, ngDialog, $routeParams, userInitService, userLoginUIService, userEnterpriseService, userUIService, growl, userRoleUIService, userFunctionService, userDomainService, marketplaceUIService) {\n    var id = $scope.treeUserId;\n    $scope.userObj = {};\n    $scope.domainGridData = {\n      columns: [{\n        title: \"\",\n        orderable: false,\n        data: \"option\"\n      }, {\n        title: \"名称\",\n        data: \"name\"\n      }, {\n        title: \"描述\",\n        data: \"description\"\n      }],\n      columnDefs: [{\n        \"targets\": 0,\n        \"data\": \"option\",\n        \"render\": function render(data, type, full) {\n          // 返回自定义内容\n          return '<i class=\"fa fa-plus-circle\" id=\"circle-1\" style=\"color:#1bb6e1;\"></i>';\n        }\n      }]\n    };\n\n    if (id) {\n      userUIService.queryUser(id, function (res) {\n        if (res.code == 0) {\n          $scope.userObj = res.data;\n          domainInit();\n        }\n      });\n    }\n\n    var domainInit = function domainInit() {\n      if (id) {\n        var test1 = [];\n\n        var initTreeview = function initTreeview(obj, baseNode) {\n          if (obj.domains) {\n            obj.nodes = [];\n\n            for (var i in obj.domains) {\n              obj.nodes.push(initTreeview(obj.domains[i], baseNode));\n            }\n\n            obj.tags = [obj.nodes.length];\n          }\n\n          if (obj.belong == 1) {\n            if (obj.domainPath == $scope.userObj.domainPath) {\n              obj.state = {\n                disabled: true,\n                expanded: true,\n                checked: true\n              };\n            } else {\n              obj.state = {\n                expanded: true,\n                checked: true\n              };\n            }\n\n            baseNode[obj.domainID] = true;\n          } else {\n            obj.state = {\n              expanded: true,\n              checked: false\n            };\n            baseNode[obj.domainID] = false;\n          } // obj.text = obj.name;\n\n\n          obj.text = obj.name;\n\n          if (obj.name != \"\") {\n            test1.push(obj);\n          }\n\n          return obj;\n        };\n\n        userDomainService.queryDomainTreeByUser(id, function (data) {\n          if (data.code == 0) {\n            var baseNode = {};\n            var newObj = {\n              parentID: \"\",\n              domainPath: \"\",\n              name: \"\",\n              description: \"\",\n              domains: data.data\n            };\n            $scope.functionData = newObj;\n            var menu_list = initTreeview(newObj, baseNode);\n            $scope.domainGridData.data = newObj.domains;\n            $scope.domainGridData.treeData = menu_list.nodes;\n            $scope.domainGridData.baseNode = baseNode; // $scope.domainGridData.baseList = test1;\n\n            $scope.$broadcast(Event.DOMAININFOSINIT, $scope.domainGridData);\n          }\n        });\n      }\n    };\n  }]);\n  controllers.initController('userAllotCtrl', ['$scope', '$rootScope', 'ngDialog', '$routeParams', 'userInitService', 'userLoginUIService', 'userEnterpriseService', 'userUIService', 'growl', 'userRoleUIService', 'userFunctionService', 'userDomainService', 'marketplaceUIService', function ($scope, $rootScope, ngDialog, $routeParams, userInitService, userLoginUIService, userEnterpriseService, userUIService, growl, userRoleUIService, userFunctionService, userDomainService, marketplaceUIService) {\n    var select = $scope.roleUser;\n    /* if(select){\r\n       roleUser();\r\n     }*/\n    // var roleUser = function () {\n\n    userRoleUIService.getAssociateRole2User({\n      \"roleID\": select.roleID\n    }, function (data) {\n      if (data.code == 0) {\n        $scope.roleId = select.roleID;\n\n        for (var i in $scope.userGridData.data) {\n          $scope.userGridData.data[i][\"check\"] = \"\";\n\n          if ($scope.userGridData.data[i].userID == null) {\n            $scope.userGridData.data.splice(i, 1);\n          }\n\n          for (var j in data.data) {\n            if ($scope.userGridData.data[i].userID == data.data[j].userID) {\n              $scope.userGridData.data[i].check = 1001;\n            }\n          }\n        }\n\n        $scope.$broadcast(Event.CURRENTINFOSINIT + \"_userRole\", $scope.userGridData);\n      } // }\n\n    });\n  }]);\n  controllers.initController('SuperListCtrl', ['$scope', 'userLoginUIService', 'userEnterpriseService', 'userUIService', 'configUIService', 'growl', 'userRoleUIService', 'userFunctionService', 'userDomainService', 'marketplaceUIService', 'resourceUIService', function ($scope, userLoginUIService, userEnterpriseService, userUIService, configUIService, growl, userRoleUIService, userFunctionService, userDomainService, marketplaceUIService, resourceUIService) {\n    $scope.userTypeAry = {};\n    $scope.configGroupsDic = {}; //用户管理\n\n    $scope.userGridData = {\n      columns: [{\n        title: \"用户类型\",\n        data: \"userTypeLabel\"\n      }, {\n        title: \"用户名称\",\n        data: \"userName\"\n      }, {\n        title: \"登录名\",\n        data: \"loginName\"\n      }, {\n        title: \"登录账户（手机/邮箱）\",\n        data: \"userEmail\"\n      }, {\n        title: \"办公电话\",\n        data: \"officePhone\"\n      }, $.ProudSmart.datatable.optionCol3],\n      columnDefs: [{\n        \"targets\": 5,\n        \"data\": \"option\",\n        \"render\": function render(data, type, full) {\n          // 返回自定义内容\n          return \"<a id='save-btn' class='btn btn-default btn-sm' ><span class='hidden-xs'> 切换登录</span></a>\";\n        }\n      }]\n    };\n\n    $scope.loginin = function (loginId) {\n      userLoginUIService.loginin(loginId, function (returnObj) {\n        if (returnObj.code == 0) {\n          location.href = \"\"; //location.href = location.origin;\n        }\n      });\n    };\n\n    var getDBdata = function getDBdata() {\n      //查询用户域\n      var domainHandler = function domainHandler(returnObj) {\n        if (returnObj.code == 0) {\n          $scope.enterpriseDomain = returnObj.data;\n        }\n      };\n\n      if (!$scope.menuitems[\"isloaded\"]) {\n        var menuitemsWatch = $scope.$watch('menuitems', function (o, n) {\n          if ($scope.menuitems[\"isloaded\"]) {\n            if ($scope.baseConfig.extendDomain) {\n              resourceUIService.getDomainsByFilter({}, domainHandler);\n            } else {\n              userEnterpriseService.findEnterpriseDomain(domainHandler);\n            }\n\n            menuitemsWatch();\n          }\n        }, true);\n      } else if ($scope.baseConfig.extendDomain) {\n        resourceUIService.getDomainsByFilter({}, domainHandler);\n      } else {\n        userEnterpriseService.findEnterpriseDomain(domainHandler);\n      } //当前域下用户\n\n\n      userUIService.querAllUserInfo(function (resultObj) {\n        if (resultObj.code == 0) {\n          for (var i in resultObj.data) {\n            var obj = resultObj.data[i];\n            obj.isEdit = 0;\n\n            if ($scope.userTypeAry && $scope.userTypeAry[obj.userType] != undefined) {\n              obj.userTypeLabel = $scope.userTypeAry[obj.userType].label;\n            } else {\n              if (obj.userType == 3) {\n                obj.userTypeLabel = \"管理员\";\n              } else if (obj.userType == 2) {\n                obj.userTypeLabel = \"普通用户\";\n              } else if (obj.userType == 4) {\n                obj.userTypeLabel = \"终端用户\";\n              } else if (obj.userType == 300) {\n                obj.userTypeLabel = \"企业\";\n              } else if (obj.userType == 301) {\n                obj.userTypeLabel = \"客户\";\n              } else if (obj.userType == 10) {\n                obj.userTypeLabel = \"企业管理员\";\n              } else {\n                obj.userTypeLabel = \"错误\";\n              }\n            }\n\n            if (obj.emailAddress == null || obj.emailAddress == \"\") {\n              obj[\"userEmail\"] = obj.mobilePhone;\n            } else {\n              obj[\"userEmail\"] = obj.emailAddress;\n            }\n\n            if (obj.enterprise) {\n              // for (var l in obj.enterprise) {\n              obj[\"enterpriseName\"] = obj.enterprise.name; // }\n            } else {\n              obj[\"enterpriseName\"] = \"\";\n            }\n          }\n\n          $scope.userGridData.data = resultObj.data;\n          $scope.$broadcast(Event.USERINFOSINIT + \"_super\", $scope.userGridData);\n        }\n      });\n    }; //获取所有的全局配置\n\n\n    var configList = function configList() {\n      configUIService.getAllConfigs(function (returnObj) {\n        if (returnObj.code == 0) {\n          returnObj.data.forEach(function (item) {\n            $scope.configGroupsDic[item.groupName] = item;\n          });\n          $scope.configGroups = returnObj.data;\n\n          if (returnObj.data.length > 0 && $scope.configGroupsDic[\"UserType\"] != undefined && $scope.configGroupsDic[\"UserType\"].value) {\n            var userType = eval(\"(\" + $scope.configGroupsDic[\"UserType\"].value + \")\");\n            userType.forEach(function (user) {\n              $scope.userTypeAry[user.typeCode] = user;\n            });\n          }\n\n          getDBdata();\n        }\n      });\n    }; //判断用户是否存在\n\n\n    if (!userLoginUIService.user.isAuthenticated) {\n      $scope.$on('loginStatusChanged', function (evt, d) {\n        if (userLoginUIService.user.isAuthenticated) {\n          configList();\n        }\n      });\n    } else {\n      configList();\n    }\n  }]);\n  controllers.initController('addEnterpriseCtrl', ['$scope', 'userLoginUIService', 'userEnterpriseService', 'userUIService', 'growl', 'solutionUIService', 'userFunctionService', 'userDomainService', 'resourceUIService', function ($scope, userLoginUIService, userEnterpriseService, userUIService, growl, solutionUIService, userFunctionService, userDomainService, resourceUIService) {\n    $scope.parObj = {\n      \"userName\": \"\",\n      \"loginName\": \"\",\n      \"password\": \"\",\n      \"mobilePhone\": \"\",\n      \"emailAddress\": \"\",\n      \"isDemo\": \"1\",\n      \"industry\": 444774823897601\n    };\n    $scope.enterpriseObj = {\n      \"name\": \"\",\n      \"contactEmail\": \"\",\n      \"province\": \"\",\n      \"closingDate\": \"\",\n      \"city\": \"\"\n    };\n    $scope.provinces = \"\";\n    $scope.districts = \"\";\n    $scope.citys = \"\";\n    $scope.configPwd = \"\";\n    $scope.emailOnly = \"\";\n    $scope.$watch(\"configPwd\", function (newValue, oldValue) {\n      if (newValue != $scope.parObj.password) {\n        $scope.emailOnly = 4;\n      } else {\n        $scope.emailOnly = 0;\n      }\n    });\n    $scope.$watch(\"parObj.password\", function (newValue, oldValue) {\n      $scope.emailOnly = 0;\n    });\n\n    var pro = function pro() {\n      resourceUIService.getSimpleDistricts(function (returnObj) {\n        if (returnObj.code == 0) {\n          $scope.provinces = returnObj.data;\n\n          for (var i in $scope.provinces) {\n            if ($scope.provinces[i].label == $scope.enterpriseObj.province) {\n              if ($scope.enterpriseObj.province == '北京市' || $scope.enterpriseObj.province == '天津市' || $scope.enterpriseObj.province == '上海市' || $scope.enterpriseObj.province == '重庆市') {\n                var pro = $scope.provinces[i].children;\n\n                for (var n in pro) {\n                  if (pro[n].label == $scope.enterpriseObj.province) {\n                    $scope.citys = pro[n].children;\n                  }\n                }\n              } else {\n                $scope.citys = $scope.provinces[i].children;\n              }\n\n              $scope.districts = [];\n            }\n          }\n\n          for (var j in $scope.citys) {\n            if ($scope.citys[j].label == $scope.enterpriseObj.city) {\n              $scope.districts = $scope.citys[j].children;\n            }\n          }\n        }\n      });\n    };\n\n    var init = function init() {\n      pro();\n      solutionUIService.getSolutions(function (returnObj) {\n        if (returnObj.code == 0) {\n          $scope.activeedAppDatas = returnObj.data;\n        }\n      });\n    };\n\n    $scope.proChang = function () {\n      pro();\n    };\n\n    init();\n\n    var saveDB = function saveDB() {\n      userUIService.individualUserRegister($scope.enterpriseObj, $scope.parObj, function (vv) {\n        if (vv.code == 0) {\n          growl.success(\"新建企业账号成功\", {});\n          location.href = \"#/enterpriseMaintain\";\n        }\n      });\n    };\n\n    $scope.savaEnterprise = function () {\n      if ($scope.enterpriseObj.name == \"\" || $scope.enterpriseObj.name == null || typeof $scope.enterpriseObj.name == \"undefined\") {\n        growl.warning(\"企业名称不能为空\", {});\n        return;\n      }\n\n      if ($scope.enterpriseObj.province == \"\" || $scope.enterpriseObj.province == null || typeof $scope.enterpriseObj.province == \"undefined\") {\n        growl.warning(\"企业所在地省份不能为空\", {});\n        return;\n      }\n\n      if ($scope.enterpriseObj.city == \"\" || $scope.enterpriseObj.city == null || typeof $scope.enterpriseObj.city == \"undefined\") {\n        growl.warning(\"企业所在地城市不能为空\", {});\n        return;\n      }\n\n      if ($scope.parObj.userName == \"\" || $scope.parObj.userName == null || typeof $scope.parObj.userName == \"undefined\") {\n        growl.warning(\"申请人姓名不能为空\", {});\n        return;\n      }\n\n      if ($scope.parObj.mobilePhone == \"\" || $scope.parObj.mobilePhone == null || typeof $scope.parObj.mobilePhone == \"undefined\") {\n        growl.warning(\"申请人电话不能为空\", {});\n        return;\n      }\n\n      if ($scope.parObj.emailAddress == \"\" || $scope.parObj.emailAddress == null || typeof $scope.parObj.emailAddress == \"undefined\") {\n        growl.warning(\"申请人邮箱不能为空或者格式不对请检查\", {});\n        return;\n      }\n\n      if ($scope.parObj.industry == \"\" || $scope.parObj.industry == null || typeof $scope.parObj.industry == \"undefined\") {\n        growl.warning(\"应用方案不能为空\", {});\n        return;\n      }\n\n      if ($scope.parObj.loginName == \"\" || $scope.parObj.loginName == null || typeof $scope.parObj.loginName == \"undefined\") {\n        growl.warning(\"登录名不能为空\", {});\n        return;\n      }\n\n      if ($scope.parObj.password == \"\" || $scope.parObj.password == null || typeof $scope.parObj.password == \"undefined\") {\n        growl.warning(\"密码不能为空\", {});\n        return;\n      }\n\n      if ($scope.parObj.password == \"\" || $scope.parObj.password == null || typeof $scope.parObj.password == \"undefined\") {\n        $scope.emailOnly = \"1002\";\n        return;\n      }\n\n      if ($scope.configPwd == \"\" || $scope.configPwd == null || typeof $scope.configPwd == \"undefined\") {\n        $scope.emailOnly = \"1001\";\n        return;\n      }\n\n      if ($scope.configPwd != $scope.parObj.password) {\n        $scope.emailOnly = \"4\";\n        return;\n      }\n\n      var newData = new Date($scope.enterpriseObj.closingDate).Format(\"yyyy-MM-dd\");\n      var ckTime = checkDate(newData);\n\n      if (ckTime == false) {\n        growl.warning(\"您选择的试用结束时间小于当前时间\", {});\n        return;\n      }\n\n      saveDB(); //校验手机号码是否存在\n      //userUIService.checkMobilePhone($scope.parObj.mobilePhone, function(data) {\n      //  if (data.code == 0 && data.data == false) {\n      //    return;\n      //  }\n      //})\n    };\n  }]);\n  controllers.initController('EnterpriseListCtrl', ['$scope', '$routeParams', 'FileUploader', 'ngDialog', 'userLoginUIService', 'userEnterpriseService', 'userUIService', 'growl', 'userRoleUIService', function ($scope, $routeParams, FileUploader, ngDialog, userLoginUIService, userEnterpriseService, userUIService, growl, userRoleUIService) {\n    $scope.enterpriseObj = {};\n    $scope.enterId = \"\";\n    var uploader = $scope.uploader = new FileUploader({\n      url: '' + userUIService.uploadFileUrl + '/api/rest/upload/userUIService/uploadFile'\n    });\n    var TEXT = {\n      \"SUBMIT\": \"确定\",\n      \"CANCEL\": \"取消\"\n    };\n    uploader.filters.push({\n      name: 'customFilter',\n      fn: function fn(item, options) {\n        return this.queue.length < 10;\n      }\n    }); // CALLBACKS\n\n    uploader.onWhenAddingFileFailed = function (item, filter, options) {\n      console.info('onWhenAddingFileFailed', item, filter, options);\n    };\n\n    uploader.onAfterAddingFile = function (fileItem) {\n      var picPath = getPath(fileItem._file);\n      $(\"#imgLook\").attr('src', picPath);\n    };\n\n    uploader.onAfterAddingAll = function (addedFileItems) {\n      console.info('onAfterAddingAll', addedFileItems);\n    };\n\n    uploader.onBeforeUploadItem = function (item) {\n      console.info('onBeforeUploadItem', item);\n    };\n\n    uploader.onProgressItem = function (fileItem, progress) {\n      console.info('onProgressItem', fileItem, progress);\n    };\n\n    uploader.onProgressAll = function (progress) {\n      console.info('onProgressAll', progress);\n    };\n\n    uploader.onSuccessItem = function (fileItem, response, status, headers) {\n      if (response.code == 0) {\n        userEnterpriseService.modifyLogo($scope.enterId, response.data, function (returnObj) {\n          if (returnObj.code == 0) {\n            getDBdata();\n            growl.success(\"上传图片成功\", {});\n          }\n        });\n      }\n    };\n\n    uploader.onErrorItem = function (fileItem, response, status, headers) {\n      console.info('onErrorItem', fileItem, response, status, headers);\n    };\n\n    uploader.onCancelItem = function (fileItem, response, status, headers) {\n      console.info('onCancelItem', fileItem, response, status, headers);\n    };\n\n    uploader.onCompleteItem = function (fileItem, response, status, headers) {\n      console.info('onCompleteItem', fileItem, response, status, headers);\n    };\n\n    uploader.onCompleteAll = function () {\n      console.info('onCompleteAll');\n    };\n\n    var controller = $scope.controller = {\n      isImage: function isImage(item) {\n        var type = '|' + item.type.slice(item.type.lastIndexOf('/') + 1) + '|';\n        return '|jpg|png|jpeg|bmp|gif|'.indexOf(type) !== -1;\n      }\n    }; //用户管理\n\n    $scope.userGridData = {\n      columns: [{\n        title: \"企业ID\",\n        data: \"enterpriseID\"\n      }, {\n        title: \"企业名称\",\n        data: \"name\"\n      }, {\n        title: \"域路径\",\n        data: \"domainPath\"\n      }, {\n        title: \"企业类型\",\n        data: \"enterpriseTypeName\"\n      }, {\n        title: \"logo地址\",\n        data: \"enterpriseLogo\"\n      }, {\n        title: \"状态\",\n        data: \"enterpriseStatus\"\n      }, {\n        title: \"操作\",\n        orderable: false,\n        data: \"option\"\n      }],\n      columnDefs: [{\n        \"targets\": 5,\n        \"data\": \"enterpriseStatus\",\n        \"render\": function render(data, type, full) {\n          var stat = \"\";\n\n          if (full.enterpriseStatus == '0') {\n            stat = '启用';\n          } else {\n            stat = '停用';\n          }\n\n          return stat;\n        }\n      }, {\n        \"targets\": 6,\n        \"data\": \"option\",\n        \"render\": function render(data, type, full) {\n          var str = '';\n          var stat1 = '';\n\n          if (full.enterpriseStatus == '0') {\n            stat1 = '停用';\n          } else {\n            stat1 = '启用';\n          }\n\n          str += \"<div class='btn-group table-option-group' >\" + \"<button type='button' class='btn btn-default btn-sm'>操作</button>\" + \"<button type='button' class='btn btn-default btn-sm dropdown-toggle' data-toggle='dropdown'>\" + \"<span class='caret'></span>\" + \"<span class='sr-only'>Toggle Dropdown</span>\" + \"</button>\" + \"<ul class='dropdown-menu' role='menu'>\" + \"<li><a style='cursor: pointer;' id='file-txt'>上传logo文件</a></li>\" + \"<li><a style='cursor: pointer;' id='block' >\" + stat1 + \"</a></li>\" + \"<li><a style='cursor: pointer;' id='edit-btn'>编辑</a></li>\" + \"<li><a style='cursor: pointer;' id='copy-right-btn'>修改版权</a></li>\" + \"<li><a style='cursor: pointer;' id='role-btn'>角色分配</a></li>\" + \"</ul>\" + \"</div>\";\n          return str;\n        }\n      }]\n    };\n\n    $scope.roleEdit = function (enterprise) {\n      var defRole = enterprise.defaultRole;\n      var role = [];\n\n      if (defRole) {\n        var sel = defRole.split(',');\n\n        for (var i in $scope.roleList) {\n          var tmp = -1;\n\n          for (var j in sel) {\n            if ($scope.roleList[i].roleID == sel[j]) {\n              tmp = j;\n            }\n          }\n\n          if (tmp != -1) {\n            $scope.roleList[i].applied = true;\n          }\n\n          if (enterprise.enterpriseType == 0 && $scope.roleList[i].roleID != 101 && $scope.roleList[i].roleID != 103) {\n            role.push($scope.roleList[i]);\n          } else if (enterprise.enterpriseType == 1 && $scope.roleList[i].roleID != 100 && $scope.roleList[i].roleID != 102) {\n            role.push($scope.roleList[i]);\n          }\n        }\n      } else {\n        for (var i in $scope.roleList) {\n          if (enterprise.enterpriseType == 0 && $scope.roleList[i].roleID != 101 && $scope.roleList[i].roleID != 103) {\n            role.push($scope.roleList[i]);\n          } else if (enterprise.enterpriseType == 1 && $scope.roleList[i].roleID != 100 && $scope.roleList[i].roleID != 102) {\n            role.push($scope.roleList[i]);\n          }\n        }\n      }\n\n      $scope.dialog = {\n        title: \"角色分配\",\n        titles: ['未分配角色', '已分配角色'],\n        mark: \"roleName\",\n        characters: role,\n        button: [{\n          label: TEXT.SUBMIT,\n          icon: \"btn btn-primary\",\n          fn: function fn() {\n            var inx = 0;\n            var rls = $scope.roleList.filter(function (elem) {\n              return elem.applied == true;\n            }).map(function (elem) {\n              return elem.roleID;\n            });\n            userEnterpriseService.modifyDefaultRole(enterprise.enterpriseID, rls, function (res) {\n              if (res.code == 0) {\n                growl.success(\"角色分配成功\", {});\n                ngDialog.close();\n\n                for (var i in $scope.userGridData.data) {\n                  if ($scope.userGridData.data[i].enterpriseID == res.data.enterpriseID) {\n                    if (res.data.enterpriseType == 0) {\n                      res.data[\"enterpriseTypeName\"] = \"A企业\";\n                    } else if (res.data.enterpriseType == 1) {\n                      res.data[\"enterpriseTypeName\"] = \"B企业\";\n                    }\n\n                    $scope.userGridData.data[i] = res.data;\n                    break;\n                  }\n                }\n\n                $scope.$broadcast(Event.USERINFOSINIT + \"_enter\", $scope.userGridData);\n              }\n            });\n          }\n        }, {\n          label: TEXT.CANCEL,\n          icon: \"btn btn-default\",\n          fn: function fn() {\n            ngDialog.close();\n          }\n        }]\n      };\n      ngDialog.open({\n        template: '../partials/dialogue/character_assign_dia.html',\n        className: 'ngdialog-theme-plain',\n        scope: $scope\n      });\n    };\n\n    $scope.addEnterprise = function () {\n      location.href = \"#/addEnterprise\";\n    };\n\n    $scope.modifyEnterpriseInfo = function (obj) {\n      userEnterpriseService.adminModifyEnterprise(obj, function (resultObj) {\n        if (resultObj.code == 0) {\n          growl.success(\"修改企业信息成功\", {});\n          getDBdata();\n        }\n      });\n    };\n\n    $scope.editEnterprise = function (enterpriseName, enterpriseUrl, enterpriseID) {\n      userEnterpriseService.modifyCopyRight(enterpriseName, enterpriseUrl, enterpriseID, function (resultObj) {\n        if (resultObj.code == 0) {\n          growl.success(\"修改企业信息成功\", {});\n          getDBdata();\n        }\n      });\n    };\n\n    $scope.blockClick = function (select) {\n      var stat = '';\n\n      if (select.enterpriseStatus == '0') {\n        stat = '停用';\n      } else {\n        stat = '启用';\n      }\n\n      BootstrapDialog.show({\n        title: '提示',\n        closable: false,\n        message: '是否要' + stat + '该企业',\n        buttons: [{\n          label: '确定',\n          cssClass: 'btn-success',\n          action: function action(dialogRef) {\n            userEnterpriseService.modifyEnterpriseStatus(select.enterpriseID, function (resultObj) {\n              if (resultObj.code == 0) {\n                growl.warning(\"\" + stat + \"企业成功!\", {});\n                getDBdata();\n              }\n            });\n            dialogRef.close();\n          }\n        }, {\n          label: '取消',\n          action: function action(dialogRef) {\n            dialogRef.close();\n          }\n        }]\n      });\n    };\n\n    $scope.loginin = function (loginId) {\n      userLoginUIService.loginin(loginId, function (returnObj) {\n        if (returnObj.code == 0) {\n          location.href = location.origin;\n        }\n      });\n    };\n\n    $scope.cancel = function () {\n      $scope.$broadcast(Event.USERINFOSINIT + \"_enter\", $scope.userGridData);\n    };\n\n    $scope.roleList = [];\n\n    var getDBdata = function getDBdata() {\n      //查询用户域\n      userEnterpriseService.queryAllEnterprise(function (returnObj) {\n        if (returnObj.code == 0) {\n          for (var i in returnObj.data) {\n            returnObj.data[i][\"enterpriseTypeName\"] = \"\";\n            if (returnObj.data[i].enterpriseType == 0) returnObj.data[i].enterpriseTypeName = \"A企业\";else if (returnObj.data[i].enterpriseType == 1) returnObj.data[i].enterpriseTypeName = \"B企业\";\n          }\n\n          $scope.userGridData.data = returnObj.data;\n          $scope.$broadcast(Event.USERINFOSINIT + \"_enter\", $scope.userGridData);\n        }\n      }); //查询用户角色\n\n      userEnterpriseService.queryEnterpriseRole(function (returnObj) {\n        if (returnObj.code == 0) {\n          var newObj = [];\n          returnObj.data.forEach(function (obj) {\n            if (obj.roleID == 100 || obj.roleID == 102) {\n              obj.roleName = obj.roleName + \"A\";\n            } else if (obj.roleID == 101 || obj.roleID == 103) {\n              obj.roleName = obj.roleName + \"B\";\n            }\n\n            newObj.push(obj);\n          });\n          $scope.roleList = newObj;\n        }\n      });\n    }; //判断用户是否存在\n\n\n    if (!userLoginUIService.user.isAuthenticated) {\n      $scope.$on('loginStatusChanged', function (evt, d) {\n        if (userLoginUIService.user.isAuthenticated) {\n          getDBdata();\n        }\n      });\n    } else {\n      getDBdata();\n    }\n\n    var getPath = function getPath(file) {\n      var url = null;\n\n      if (window.createObjectURL != undefined) {\n        // basic\n        url = window.createObjectURL(file);\n      } else if (window.URL != undefined) {\n        // mozilla(firefox)\n        url = window.URL.createObjectURL(file);\n      } else if (window.webkitURL != undefined) {\n        // webkit or chrome\n        url = window.webkitURL.createObjectURL(file);\n      }\n\n      return url;\n    };\n  }]);\n});"],"sourceRoot":"/source/"}