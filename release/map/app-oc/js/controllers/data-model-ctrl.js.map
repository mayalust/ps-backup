{"version":3,"sources":["app-oc/js/controllers/data-model-ctrl.js"],"names":["define","controllers","initController","scope","q","rootScope","$location","$routeParams","timeout","kqiManagerUIService","userRoleUIService","resourceUIService","userLoginUIService","Info","growl","userEnterpriseService","viewFlexService","userDomainService","window","freeboardservice","dialogue","ngDialog","callback","TEXT","targetTypes","id","label","scriptTypes","dataTypes","granularityUnits","domainCalcTypes","getKqiModels","$$","cacheAsyncData","call","event","code","data","getModels","getKqiModelById","dtree","domaintree","nodes","domainInfos","calcRules","editCalcRules","target","allKqiModels","obj","allModels","concat","hours","rs","i","push","weekdays","months","varnamelist","map","elem","name","initResource","initKqiModel","initInputMapping","targetResource","parseInt","undefined","expertDataModelId","inputMapping","modelId","start","kpis","viewContent","variable","varialbes","variables","SECONDS","maxlength","value","$tabInx","right","apply","naviClick","textAfter","type","composory","events","change","filterFormat","DAYS","MINUTES","HOURS","options","WEEKDAYS","textBefore","MONTHS","TIMESELECT","groups","granularChange","granular","values","granularObj","find","regExp","test","dt","runRegExp","cronToTime","schedule","KQINAME","placeholder","error","indexOf","KQIID","kpiId","DESCRIPTION","desc","TIMEOFFSET","timeOffsetPeriod","toString","length","DOMAINPATH","domainPath","sortable","filterable","key","mark","modes","default","TARGETSOURCE","SCRIPTTYPE","scriptType","DATATYPE","dataType","DOMAINCALCTYPE","disabled","TARGETTYPE","GRANULARITYUNIT","granularityUnit","FORCASTMETHOD","forecastMethod","CALCUTYPE","click","EXPERTMODELID","INPUTMAPPING","EXPRESSION","calculable","expertDataModel","JSON","parse","expression","dialog","title","note","message","tabs","inputs","button","icon","disabledFn","some","fn","self","timeToCron","arr","fd","weekOrDay","findVal","repeat","index","item","result","loop","updateKqiCalcRule","k","success","close","newVar","addKqiCalcRule","pushbefore","getKpisByModelId_end","kqiModel","getKpisByModelId","open","template","className","strHeader","strEdit","strDel","optList","menuitems","class","style","margin","jQuery","extend","param","fnlist","remove","width","border-radius","font-size","font-weight","padding","deleteKqiCalcRule","description","source","showSelector","header","columnDefs","editable","edit","format","getKqiCalcRules","queryDomainTree","user","userID"],"mappings":"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","file":"app-oc/js/controllers/data-model-ctrl.js","sourcesContent":["define(['controllers/controllers', 'Array'], function (controllers) {\n  'use strict';\n\n  controllers.initController('dataModelCtrl', ['$scope', '$q', '$rootScope', '$location', '$routeParams', '$timeout', 'kqiManagerUIService', 'userRoleUIService', 'resourceUIService', 'userLoginUIService', 'Info', 'growl', 'userEnterpriseService', 'viewFlexService', 'userDomainService', \"$window\", \"freeboardservice\", 'dialogue', \"ngDialog\", function (scope, q, rootScope, $location, $routeParams, timeout, kqiManagerUIService, userRoleUIService, resourceUIService, userLoginUIService, Info, growl, userEnterpriseService, viewFlexService, userDomainService, window, freeboardservice, dialogue, ngDialog) {\n    /** {\"id\":10075,\"name\":\"客户月新增数888hhh\",\"desc\":\"0\",\"kpiId\":3043,\"schedule\":\"0 18 0 1 * ?\",\"targetType\":\"all\",\"target\":null,\"targetResource\":null,\"expression\":\"var dateList = new (Java.type(\\\"java.util.ArrayList\\\"));\\ndateList.add(core.getMonthStart(1));\\ndateList.add(core.getMonthStart(0));\\nvar values=core.count(\\\"resource\\\",\\\"domains\\\",{\\\"modelId\\\":301,\\\"createTime\\\":dateList});\\ncore.toKpiValues(values,{domainPath:\\\"domains\\\",value:\\\"count\\\"});\",\"scriptType\":\"js\",\"domainPath\":\"/0/141935137496068/\",\"createTime\":\"2017-04-28T09:58:00.394+0000\",\"updateTime\":\"2017-05-05T11:20:45.997+0000\",\"solutionId\":0,\"enable\":true,\"real\":false,\"granularity\":1,\"granularityUnit\":\"MONTH\",\"dataType\":0,\"domainCalcType\":1,\"aggregateType\":null,\"forecastMethod\":null}*/\n    var TEXT = {\n      \"SUBMIT\": \"确定\",\n      \"CANCEL\": \"取消\"\n    };\n    var targetTypes = [{\n      id: \"all\",\n      label: \"全库\"\n    }, {\n      id: \"root\",\n      label: \"企业级\"\n    }, {\n      id: \"domain\",\n      label: \"资源域\"\n    }, {\n      id: \"model\",\n      label: \"模型\"\n    }, {\n      id: \"device\",\n      label: \"设备\"\n    }];\n    var scriptTypes = [{\n      id: \"js\",\n      label: \"js\"\n    }, {\n      id: \"python\",\n      label: \"python\"\n    }, {\n      id: \"groovy\",\n      label: \"groovy\"\n    }, {\n      id: \"spring\",\n      label: \"spring\"\n    }];\n    var dataTypes = [{\n      id: 0,\n      label: \"原始数据\"\n    }, {\n      id: 1,\n      label: \"聚合数据\"\n    }, {\n      id: 2,\n      label: \"预测数据\"\n    }];\n    var granularityUnits = [{\n      id: \"MINUTE\",\n      label: \"每分钟\"\n    }, {\n      id: \"HOUR\",\n      label: \"每小时\"\n    }, {\n      id: \"DAY\",\n      label: \"每天\"\n    }, {\n      id: \"WEEK\",\n      label: \"每周\"\n    }, {\n      id: \"MONTH\",\n      label: \"每月\"\n      /**,{id:\"QUARTER\",label:\"每季度\"}*/\n\n    }, {\n      id: \"YEAR\",\n      label: \"每年\"\n    }];\n    var domainCalcTypes = [{\n      id: 0,\n      label: \"不汇聚\"\n    }, {\n      id: 1,\n      label: \"所有域\"\n    }, {\n      id: 2,\n      label: \"企业域\"\n    }];\n\n    var getKqiCalcRules = function getKqiCalcRules(callback) {\n      $$.cacheAsyncData.call(kqiManagerUIService.getKqiCalcRules, [], function (event) {\n        if (event.code == 0) {\n          callback(event.data);\n        }\n      });\n    };\n\n    var getKpisByModelId = function getKpisByModelId(modelId, callback) {\n      $$.cacheAsyncData.call(resourceUIService.getKpisByModelId, [modelId], function (event) {\n        if (event.code == 0) {\n          callback(event.data);\n        }\n      });\n    };\n\n    var getKqiModels = function getKqiModels(callback) {\n      $$.cacheAsyncData.call(kqiManagerUIService.getKqiModels, [], function (event) {\n        if (event.code == 0) {\n          callback(event.data);\n        }\n      });\n    };\n\n    var getModels = function getModels(callback) {\n      $$.cacheAsyncData.call(resourceUIService.getModels, [], function (event) {\n        if (event.code == 0) {\n          callback(event.data);\n        }\n      });\n    };\n\n    var queryDomainTree = function queryDomainTree(callback) {\n      $$.cacheAsyncData.call(userDomainService.queryDomainTree, [userLoginUIService.user.userID], function (event) {\n        if (event.code == 0) {\n          callback(event.data);\n        }\n      });\n    };\n    /**\n    var addKqiCalcRule = function(param, callback){\n      kqiManagerUIService.addKqiCalcRule(param, function(event){\n        if(event.code == 0){\n          callback(event.data);\n        }\n      });\n    };\n    var updateKqiCalcRule = function(param, callback){\n      kqiManagerUIService.updateKqiCalcRule(param, function(event){\n        if(event.code == 0){\n          callback(event.data);\n        }\n      });\n    };*/\n\n\n    var deleteKqiCalcRule = function deleteKqiCalcRule(param, callback) {\n      var fnlist = [{\n        label: TEXT.SUBMIT,\n        icon: 'btn btn-success',\n        style: {\n          width: '50%',\n          'border-radius': 0,\n          'font-size': '18px',\n          'font-weight': 'bold',\n          'padding': 10\n        },\n        fn: function fn() {\n          ngDialog.close();\n          kqiManagerUIService.deleteKqiCalcRule(param, function (event) {\n            callback(event);\n          });\n        }\n      }, {\n        label: TEXT.CANCEL,\n        icon: 'btn btn-default',\n        style: {\n          width: '50%',\n          'border-radius': 0,\n          'font-size': '18px',\n          'font-weight': 'bold',\n          'padding': 10\n        },\n        fn: function fn() {\n          ngDialog.close();\n        }\n      }];\n      scope.dialog = {\n        title: {\n          label: '提示'\n        },\n        description: {\n          label: '确认要删除此KQI吗？'\n        },\n        fnlist: fnlist\n      };\n      ngDialog.open({\n        template: '../partials/dialogue/common_dia_prompt.html',\n        className: 'ngdialog-theme-plain',\n        scope: scope\n      });\n    };\n\n    var getKqiModelById = function getKqiModelById(id, callback) {\n      $$.cacheAsyncData.call(kqiManagerUIService.getKqiModelById, [id], function (event) {\n        if (event.code == 0) {\n          callback(event.data);\n        }\n      });\n    };\n\n    var init = function init() {\n      getModels(function () {});\n      getKqiModels(function () {});\n      queryDomainTree(function (dtree) {\n        var domaintree = {\n          nodes: dtree,\n          domainInfos: dtree\n        };\n        getKqiCalcRules(function (calcRules) {\n          var editCalcRules = function editCalcRules(target) {\n            getKqiModels(function (allKqiModels) {\n              getModels(function (obj) {\n                var allModels = [{\n                  id: 300,\n                  label: \"管理域\"\n                }, {\n                  id: 301,\n                  label: \"客户\"\n                }, {\n                  id: 302,\n                  label: \"项目\"\n                }].concat(obj);\n\n                var hours = function () {\n                  var rs = [];\n\n                  for (var i = 0; i < 24; i++) {\n                    rs.push({\n                      \"id\": i,\n                      \"label\": i\n                    });\n                  }\n\n                  ;\n                  return rs;\n                }();\n\n                var weekdays = [{\n                  id: 1,\n                  label: \"一\"\n                }, {\n                  id: 2,\n                  label: \"二\"\n                }, {\n                  id: 3,\n                  label: \"三\"\n                }, {\n                  id: 4,\n                  label: \"四\"\n                }, {\n                  id: 5,\n                  label: \"五\"\n                }, {\n                  id: 6,\n                  label: \"六\"\n                }, {\n                  id: 7,\n                  label: \"日\"\n                }];\n                var months = [{\n                  id: 1,\n                  label: \"一\"\n                }, {\n                  id: 2,\n                  label: \"二\"\n                }, {\n                  id: 3,\n                  label: \"三\"\n                }, {\n                  id: 4,\n                  label: \"四\"\n                }, {\n                  id: 5,\n                  label: \"五\"\n                }, {\n                  id: 6,\n                  label: \"六\"\n                }, {\n                  id: 7,\n                  label: \"七\"\n                }, {\n                  id: 8,\n                  label: \"八\"\n                }, {\n                  id: 9,\n                  label: \"九\"\n                }, {\n                  id: 10,\n                  label: \"十\"\n                }, {\n                  id: 11,\n                  label: \"十一\"\n                }, {\n                  id: 12,\n                  label: \"十二\"\n                }];\n                var varnamelist = calcRules.map(function (elem) {\n                  return elem.name;\n                });\n                var initResource = allModels[0].id,\n                    initKqiModel = 0;\n                var initInputMapping = {};\n                var initModel = \"model\";\n                /**\n                if(target){\n                  initModel = target.targetType;\n                } else {\n                  initModel = targetTypes[0].id;\n                };*/\n\n                if (target) {\n                  if (target.targetResource) {\n                    initResource = parseInt(target.targetResource);\n                  } else {\n                    initResource = -1;\n                  }\n                }\n\n                ;\n\n                if (target) {\n                  initKqiModel = target.expertDataModelId != undefined ? target.expertDataModelId : 0;\n                }\n\n                ;\n\n                if (target) {\n                  initInputMapping = target.inputMapping;\n\n                  if (!initInputMapping) {\n                    initInputMapping = {};\n                  }\n\n                  ;\n                }\n\n                ;\n\n                var start = function start(kpis, viewContent) {\n                  var varialbes = {};\n\n                  var loopVariable = function loopVariable(variable) {\n                    varialbes[variable.name] = initInputMapping[variable.name] ? initInputMapping[variable.name] : 0;\n                  };\n\n                  if (viewContent) {\n                    for (var i in viewContent.variables) {\n                      loopVariable(viewContent.variables[i]);\n                    }\n\n                    ;\n                  }\n\n                  ;\n                  scope.$tabInx = 0;\n\n                  scope.naviClick = function (id) {\n                    scope.$tabInx = id;\n                  };\n\n                  var SECONDS = {\n                    \"label\": \"计算时间\",\n                    \"maxlength\": 12,\n                    \"value\": 0,\n                    \"right\": true,\n                    \"data\": \"second\",\n                    \"apply\": false,\n                    \"textAfter\": \"秒\",\n                    \"type\": \"input\",\n                    \"composory\": true,\n                    \"events\": {\n                      \"change\": function change(data) {}\n                    },\n                    filterFormat: {\n                      \"label\": \"label\",\n                      \"value\": \"id\"\n                    }\n                  };\n                  var DAYS = {\n                    \"label\": \"开始计算\",\n                    \"maxlength\": 12,\n                    \"value\": 0,\n                    \"right\": true,\n                    \"data\": \"day\",\n                    \"apply\": false,\n                    \"textAfter\": \"日\",\n                    \"type\": \"input\",\n                    \"composory\": true,\n                    \"events\": {\n                      \"change\": function change(data) {}\n                    },\n                    filterFormat: {\n                      \"label\": \"label\",\n                      \"value\": \"id\"\n                    }\n                  };\n                  var MINUTES = {\n                    \"label\": \"开始计算\",\n                    \"maxlength\": 12,\n                    \"value\": 0,\n                    \"apply\": false,\n                    \"right\": true,\n                    \"data\": \"minute\",\n                    \"textAfter\": \"分\",\n                    \"type\": \"input\",\n                    \"composory\": true,\n                    filterFormat: {\n                      \"label\": \"label\",\n                      \"value\": \"id\"\n                    }\n                  };\n                  var HOURS = {\n                    \"label\": \"开始计算\",\n                    \"maxlength\": 12,\n                    \"value\": 0,\n                    \"apply\": true,\n                    \"right\": true,\n                    \"data\": \"hour\",\n                    \"textAfter\": \"点\",\n                    \"type\": \"select\",\n                    \"composory\": true,\n                    \"events\": {\n                      \"change\": function change(data) {}\n                    },\n                    options: hours,\n                    filterFormat: {\n                      \"label\": \"label\",\n                      \"value\": \"id\"\n                    }\n                  };\n                  var WEEKDAYS = {\n                    \"label\": \"开始计算\",\n                    \"maxlength\": 12,\n                    \"value\": 0,\n                    \"apply\": false,\n                    \"right\": true,\n                    \"data\": \"week\",\n                    \"textBefore\": \"星期\",\n                    \"options\": weekdays,\n                    \"type\": \"select\",\n                    \"composory\": true,\n                    \"events\": {\n                      \"change\": function change(data) {}\n                    },\n                    filterFormat: {\n                      \"label\": \"label\",\n                      \"value\": \"id\"\n                    }\n                  };\n                  var MONTHS = {\n                    \"label\": \"开始计算\",\n                    \"apply\": false,\n                    \"maxlength\": 12,\n                    \"value\": 0,\n                    \"right\": true,\n                    \"data\": \"month\",\n                    \"textAfter\": \"月\",\n                    \"type\": \"select\",\n                    \"options\": months,\n                    \"composory\": true,\n                    \"events\": {\n                      \"change\": function change(data) {}\n                    },\n                    filterFormat: {\n                      \"label\": \"label\",\n                      \"value\": \"id\"\n                    }\n                  };\n                  var TIMESELECT = {\n                    \"label\": \"开始计算\",\n                    \"maxlength\": 12,\n                    \"value\": 0,\n                    \"apply\": true,\n                    \"right\": true,\n                    \"data\": \"schedule\",\n                    \"type\": \"groupSelect\",\n                    \"composory\": true,\n                    \"groups\": [HOURS, MINUTES]\n                  };\n\n                  var granularChange = function granularChange(granular, values) {\n                    if (granular == \"MINUTE\") {\n                      TIMESELECT.apply = true;\n\n                      if (values) {\n                        SECONDS.value = values[0];\n                      } else {\n                        SECONDS.value = 0;\n                      }\n\n                      TIMESELECT.groups = [SECONDS];\n                    } else if (granular == \"HOUR\") {\n                      TIMESELECT.apply = true;\n\n                      if (values) {\n                        SECONDS.value = values[0];\n                        MINUTES.value = values[1];\n                      } else {\n                        SECONDS.value = 0;\n                        MINUTES.value = 0;\n                      }\n\n                      TIMESELECT.groups = [MINUTES, SECONDS];\n                    } else if (granular == \"DAY\") {\n                      TIMESELECT.apply = true;\n\n                      if (values) {\n                        MINUTES.value = values[0];\n                        HOURS.value = values[1];\n                      } else {\n                        MINUTES.value = 0;\n                        HOURS.value = 0;\n                      }\n\n                      TIMESELECT.groups = [HOURS, MINUTES];\n                    } else if (granular == \"WEEK\") {\n                      TIMESELECT.apply = true;\n\n                      if (values) {\n                        HOURS.value = values[0];\n                        WEEKDAYS.value = values[1];\n                      } else {\n                        HOURS.value = 0;\n                        WEEKDAYS.value = 1;\n                      }\n\n                      TIMESELECT.groups = [WEEKDAYS, HOURS];\n                    } else if (granular == \"MONTH\") {\n                      TIMESELECT.apply = true;\n\n                      if (values) {\n                        HOURS.value = values[0];\n                        DAYS.value = values[1];\n                      } else {\n                        HOURS.value = 0;\n                        DAYS.value = 1;\n                      }\n\n                      TIMESELECT.groups = [DAYS, HOURS];\n                    } else if (granular == \"YEAR\") {\n                      TIMESELECT.apply = true;\n\n                      if (values) {\n                        DAYS.value = values[0];\n                        MONTHS.value = values[1];\n                      } else {\n                        DAYS.value = 1;\n                        MONTHS.value = 1;\n                      }\n\n                      TIMESELECT.groups = [MONTHS, DAYS];\n                    }\n                  };\n\n                  var cronToTime = function cronToTime(data) {\n                    var regExps = [{\n                      name: \"MINUTE\",\n                      regExp: /(\\d+)\\ \\*\\ \\*\\ \\*\\ \\*\\ \\?\\ \\*/\n                    }, {\n                      name: \"HOUR\",\n                      regExp: /(\\d+)\\ (\\d+)\\ \\*\\ \\*\\ \\*\\ \\?\\ \\*/\n                    }, {\n                      name: \"DAY\",\n                      regExp: /0\\ (\\d+)\\ (\\d+)\\ \\*\\ \\*\\ \\?\\ \\*/\n                    }, {\n                      name: \"MONTH\",\n                      regExp: /0\\ 0\\ (\\d+)\\ (\\d+)\\ \\*\\ \\?\\ \\*/\n                    }, {\n                      name: \"YEAR\",\n                      regExp: /0\\ 0\\ 0\\ (\\d+)\\ (\\d+)\\ \\?\\ \\*/\n                    }, {\n                      name: \"WEEK\",\n                      regExp: /0\\ 0\\ (\\d+)\\ \\?\\ \\*\\ (\\d+)\\ \\*/\n                    }];\n                    var find = regExps.find(function (elem) {\n                      var regExp = elem.regExp;\n                      var rs = regExp.test(data);\n                      return rs;\n                    });\n\n                    if (find) {\n                      var rs = [];\n\n                      for (var i = 1; i < 3; i++) {\n                        var dt = $$.runRegExp(data, find.regExp, i);\n\n                        if (dt) {\n                          rs.push(parseInt(dt));\n                        }\n                      }\n\n                      ;\n                      return {\n                        granular: find.name,\n                        data: rs\n                      };\n                    } else {\n                      return null;\n                    }\n\n                    ;\n                  };\n\n                  if (target) {\n                    var granularObj = cronToTime(target.schedule);\n\n                    if (granularObj) {\n                      granularChange(granularObj.granular, granularObj.data);\n                    } else {\n                      granularChange(\"DAY\");\n                    }\n                  } else {\n                    granularChange(\"DAY\");\n                  }\n\n                  var KQINAME = {\n                    \"label\": \"KQI名称\",\n                    \"maxlength\": 12,\n                    \"value\": target ? target.name : \"\",\n                    \"right\": target ? true : false,\n                    \"composory\": true,\n                    \"data\": \"name\",\n                    \"placeholder\": \"变量名称\",\n                    \"events\": {\n                      \"change\": function change(data) {\n                        if (data.value == \"\") {\n                          data.error = \"变量名不可为空\";\n                          data.right = false;\n                        } else {\n                          if (varnamelist.indexOf(data.value) != -1) {\n                            data.error = \"变量名已存在\";\n                            data.right = false;\n                          } else {\n                            data.error = undefined;\n                            data.right = true;\n                          }\n                        }\n                      }\n                    },\n                    \"type\": \"input\"\n                  };\n                  var KQIID = {\n                    \"label\": \"目标ID\",\n                    \"maxlength\": 32,\n                    \"value\": target ? target.kpiId : \"\",\n                    \"right\": true,\n                    \"composory\": false,\n                    \"data\": \"kpiId\",\n                    \"placeholder\": \"目标ID\",\n                    \"type\": \"input\"\n                  };\n                  var DESCRIPTION = {\n                    \"label\": \"描述\",\n                    \"maxlength\": 12,\n                    \"value\": target ? target.desc : \"\",\n                    \"right\": true,\n                    \"composory\": false,\n                    \"data\": \"desc\",\n                    \"placeholder\": \"描述\",\n                    \"type\": \"textarea\"\n                  };\n                  var TIMEOFFSET = {\n                    \"label\": \"偏移周期数\",\n                    \"value\": target ? target.timeOffsetPeriod : \"\",\n                    \"right\": true,\n                    \"composory\": false,\n                    \"data\": \"timeOffsetPeriod\",\n                    \"placeholder\": \"偏移周期数\",\n                    \"type\": \"number\",\n                    \"events\": {\n                      \"change\": function change(data) {\n                        if (data.value && data.value.toString().length > 4) {\n                          data.error = \"长度不能大于4位数\";\n                          data.right = false;\n                        } else {\n                          data.error = undefined;\n                          data.right = true;\n                        }\n                      }\n                    }\n                  };\n                  var DOMAINPATH = {\n                    label: \"域路径\",\n                    value: target ? target.domainPath : \"\",\n                    right: target ? true : false,\n                    type: \"tree\",\n                    sortable: true,\n                    filterable: true,\n                    composory: true,\n                    data: \"domainPath\",\n                    key: \"domainPath\",\n                    mark: \"nodes\",\n                    options: domaintree,\n                    modes: {\n                      default: {\n                        type: \"text\"\n                      }\n                    },\n                    \"events\": {\n                      \"change\": function change(data) {\n                        if (data.value == \"\") {\n                          data.error = \"变量名不可为空\";\n                          data.right = false;\n                        } else {\n                          data.error = undefined;\n                          data.right = true;\n                        }\n                      }\n                    }\n                  };\n                  var TARGETSOURCE = {\n                    \"label\": \"资源模版\",\n                    \"maxlength\": 12,\n                    \"value\": initResource,\n                    \"right\": true,\n                    \"data\": \"targetResource\",\n                    \"type\": \"select\",\n                    \"composory\": true,\n                    \"options\": allModels,\n                    \"events\": {\n                      /*   \"change\": function(data) {\n                           var modelId = data.value;\n                           getKpisByModelId(modelId, function(kpis){\n                             var kqiModelId = scope.dialog.tabs[1].inputs[1].value;\n                             scope.dialog.tabs[1].inputs[2].options = kpis;\n                             if(kqiModelId){\n                               getKqiModelById(kqiModelId, function(expertDataModel){\n                                 var varialbes = {};\n                                 var viewContent = JSON.parse(expertDataModel.viewContent);\n                                 var loopVariable = function(variable){\n                                   varialbes[variable.name] = \"\";\n                                 };\n                                 for(var i in viewContent.variables){\n                                   loopVariable(viewContent.variables[i]);\n                                 }\n                                 scope.dialog.tabs[1].inputs[2].value = varialbes;\n                               });\n                             };\n                           })\n                         }*/\n                    }\n                  };\n                  var CRONEXP = {\n                    \"label\": \"调度周期\",\n                    \"maxlength\": 30,\n                    \"apply\": true,\n                    \"value\": target ? target.schedule : \"\",\n                    \"right\": true,\n                    \"composory\": true,\n                    \"data\": \"schedule\",\n                    \"placeholder\": \"例如(0 46 1 * * ?)\",\n                    \"type\": \"cronGen\"\n                  };\n                  var SCRIPTTYPE = {\n                    \"label\": \"脚本类型\",\n                    \"maxlength\": 12,\n                    \"value\": target ? target.scriptType : scriptTypes[0].id,\n                    \"right\": true,\n                    \"apply\": false,\n                    \"data\": \"scriptType\",\n                    \"type\": \"select\",\n                    \"composory\": true,\n                    \"options\": scriptTypes,\n                    \"events\": {\n                      \"change\": function change(data) {\n                        if (data.value.length == 0) {\n                          data.error = \"脚本类型不可为空\";\n                          data.right = false;\n                        } else {\n                          data.error = undefined;\n                          data.right = true;\n                        }\n                      }\n                    }\n                  };\n                  var DATATYPE = {\n                    \"label\": \"目标类型\",\n                    \"maxlength\": 12,\n                    \"value\": target ? target.dataType : dataTypes[0].id,\n                    \"right\": true,\n                    \"data\": \"dataType\",\n                    \"type\": \"select\",\n                    \"composory\": true,\n                    \"options\": dataTypes,\n                    \"events\": {\n                      \"change\": function change(data) {\n                        if (data.value.length == 0) {\n                          data.error = \"目标资源类型不可为空\";\n                          data.right = false;\n                        } else {\n                          data.error = undefined;\n                          data.right = true;\n                        }\n                      }\n                    }\n                  };\n                  var DOMAINCALCTYPE = {\n                    \"label\": \"域汇聚类型\",\n                    \"maxlength\": 12,\n                    \"value\": domainCalcTypes[0].id,\n                    \"right\": true,\n                    \"data\": \"domainCalcType\",\n                    \"type\": \"select\",\n                    \"apply\": true,\n                    \"disabled\": false,\n                    \"composory\": true,\n                    \"options\": domainCalcTypes,\n                    \"events\": {\n                      \"change\": function change(data) {\n                        if (data.value.length == 0) {\n                          data.error = \"域汇聚类型不可为空\";\n                          data.right = false;\n                        } else {\n                          data.error = undefined;\n                          data.right = true;\n                        }\n                      }\n                    }\n                  };\n                  var TARGETTYPE = {\n                    \"label\": \"目标资源类型\",\n                    \"maxlength\": 12,\n                    \"value\": initModel,\n                    \"apply\": false,\n                    \"right\": true,\n                    \"data\": \"targetType\",\n                    \"type\": \"select\",\n                    \"disabled\": true,\n                    \"composory\": true,\n                    \"options\": targetTypes,\n                    \"events\": {\n                      \"change\": function change(data) {}\n                    }\n                  };\n                  var GRANULARITYUNIT = {\n                    \"label\": \"统计频率\",\n                    \"maxlength\": 12,\n                    \"value\": target ? target.granularityUnit : granularityUnits[2].id,\n                    \"right\": true,\n                    \"data\": \"granularityUnit\",\n                    \"type\": \"select\",\n                    \"composory\": true,\n                    \"options\": granularityUnits,\n                    \"events\": {\n                      \"change\": function change(data) {\n                        var value = data.value;\n                        granularChange(value);\n                      }\n                    }\n                  };\n                  var FORCASTMETHOD = {\n                    \"label\": \"预测方法\",\n                    \"apply\": false,\n                    \"maxlength\": 12,\n                    \"value\": target ? target.forecastMethod : \"\",\n                    \"right\": true,\n                    \"composory\": false,\n                    \"data\": \"forecastMethod\",\n                    \"placeholder\": \"预测方法\",\n                    \"type\": \"input\",\n                    \"events\": {\n                      \"change\": function change(data) {\n                        if (data.value.length == 0) {\n                          data.error = \"预测方法不可为空\";\n                          data.right = false;\n                        } else {\n                          data.error = undefined;\n                          data.right = true;\n                        }\n                      }\n                    }\n                  };\n                  var CALCUTYPE = {\n                    \"label\": \"计算方式\",\n                    \"maxlength\": 12,\n                    \"value\": initKqiModel == 0 ? 0 : 1,\n                    \"right\": true,\n                    \"apply\": true,\n                    \"data\": \"\",\n                    \"type\": \"radio\",\n                    \"options\": [{\n                      id: 0,\n                      label: '专家模版'\n                    }, {\n                      id: 1,\n                      label: '表达式'\n                    }],\n                    \"composory\": true,\n                    \"events\": {\n                      \"click\": function click(data) {\n                        CALCUTYPE.value = data.id;\n\n                        if (data.id == 0) {\n                          EXPERTMODELID.apply = true;\n                          INPUTMAPPING.apply = true;\n                          EXPRESSION.apply = false;\n                          EXPERTMODELID.calculable = true;\n                          INPUTMAPPING.calculable = true;\n                          EXPRESSION.calculable = false;\n                        } else {\n                          EXPERTMODELID.apply = false;\n                          INPUTMAPPING.apply = false;\n                          EXPRESSION.apply = true;\n                          EXPERTMODELID.calculable = false;\n                          INPUTMAPPING.calculable = false;\n                          EXPRESSION.calculable = true;\n                        }\n                      }\n                    }\n                  };\n                  var EXPERTMODELID = {\n                    \"label\": \"专家模版\",\n                    \"maxlength\": 12,\n                    \"value\": initKqiModel,\n                    \"right\": true,\n                    \"data\": \"expertDataModelId\",\n                    \"type\": \"select\",\n                    \"apply\": initKqiModel == 0 ? true : false,\n                    \"calculable\": false,\n                    \"composory\": true,\n                    \"options\": allKqiModels,\n                    \"events\": {\n                      \"change\": function change(data) {\n                        getKqiModelById(data.value, function (expertDataModel) {\n                          var varialbes = {};\n\n                          if (expertDataModel) {\n                            var viewContent = JSON.parse(expertDataModel.viewContent);\n\n                            var loopVariable = function loopVariable(variable) {\n                              varialbes[variable.name] = \"\";\n                            };\n\n                            for (var i in viewContent.variables) {\n                              loopVariable(viewContent.variables[i]);\n                            }\n\n                            ;\n                            INPUTMAPPING.value = varialbes;\n                          }\n                        });\n                      }\n                    }\n                  };\n                  var INPUTMAPPING = {\n                    \"label\": \"专家模版参数设置\",\n                    \"maxlength\": 12,\n                    \"value\": varialbes,\n                    \"right\": true,\n                    \"apply\": initKqiModel == 0 ? true : false,\n                    \"calculable\": false,\n                    \"data\": \"inputMapping\",\n                    \"type\": \"kpiSelector\",\n                    \"options\": kpis,\n                    \"composory\": true,\n                    \"events\": {\n                      \"change\": function change(data) {}\n                    }\n                  };\n                  var EXPRESSION = {\n                    \"label\": \"表达式\",\n                    \"right\": true,\n                    \"apply\": true,\n                    //initKqiModel == 0 ? false : true,\n                    \"calculable\": true,\n                    \"value\": target ? target.expression : \"\",\n                    \"data\": \"expression\",\n                    \"type\": \"codeMirror\"\n                  };\n                  scope.dialog = {\n                    title: \"KQI\",\n                    note: {\n                      \"message\": \"KQI自定义统计指标\"\n                    },\n                    tabs: [{\n                      id: 0,\n                      label: \"基础信息\",\n                      inputs: [KQINAME, KQIID, DATATYPE, DOMAINCALCTYPE, TIMEOFFSET, DESCRIPTION, SCRIPTTYPE, TARGETTYPE, FORCASTMETHOD]\n                    }, {\n                      id: 1,\n                      label: \"资源配置\",\n                      inputs: [DOMAINPATH, TARGETSOURCE]\n                    }, {\n                      id: 2,\n                      label: \"计算策略\",\n                      inputs: [GRANULARITYUNIT, TIMESELECT]\n                    }, {\n                      id: 3,\n                      label: \"表达式\",\n                      inputs: [EXPRESSION]\n                    }],\n                    button: [{\n                      label: TEXT.SUBMIT,\n                      icon: \"btn btn-primary\",\n                      disabledFn: function disabledFn() {\n                        var rs = [];\n\n                        for (var i in scope.dialog.tabs) {\n                          rs = rs.concat(scope.dialog.tabs[i].inputs);\n                        }\n\n                        ;\n                        var some = rs.some(function (elem) {\n                          return elem.right == false && elem.apply != false;\n                        });\n                        return some;\n                      },\n                      fn: function fn() {\n                        var self = scope.dialog;\n                        var inputs = [];\n\n                        for (var i in self.tabs) {\n                          inputs = inputs.concat(self.tabs[i].inputs);\n                        }\n\n                        ;\n\n                        var timeToCron = function timeToCron(data) {\n                          var rs = \"\";\n                          var arr = ['second', 'minute', 'hour', 'day', 'month', 'week', 'year'];\n                          var fd = data.find(function (elem) {\n                            return elem.data == 'week' || elem.data == 'day';\n                          });\n                          var weekOrDay = 'week';\n\n                          if (fd) {\n                            if (fd.data == 'week') {\n                              weekOrDay = 'day';\n                            } else {\n                              weekOrDay = 'week';\n                            }\n\n                            ;\n                          }\n\n                          ;\n\n                          var calcExp = function calcExp(item) {\n                            var find = data.find(function (elem) {\n                              return elem.data == item;\n                            });\n\n                            if (find) {\n                              return find.value;\n                            } else {\n                              return undefined;\n                            }\n\n                            ;\n                          };\n\n                          var inx = 0;\n                          var findVal = false;\n\n                          var repeat = function repeat(index) {\n                            var result = calcExp(arr[index]);\n\n                            if (result != undefined) {\n                              findVal = true;\n                              rs += result;\n                            } else {\n                              if (findVal == true) {\n                                if (arr[index] == weekOrDay) {\n                                  rs += \"?\";\n                                } else {\n                                  rs += \"*\";\n                                }\n\n                                ;\n                              } else {\n                                rs += \"0\";\n                              }\n                            } // \n\n\n                            index++;\n\n                            if (arr[index]) {\n                              rs += \" \";\n                              repeat(index);\n                            }\n\n                            ;\n                          };\n\n                          repeat(inx);\n                          return rs;\n                        };\n\n                        if (target) {\n                          var loop = function loop(elem) {\n                            if (typeof elem.value != \"function\" && elem.calculable != false && elem.data != \"\") {\n                              if (elem.type == \"groupSelect\") {\n                                target[elem.data] = timeToCron(elem.groups);\n                              } else {\n                                target[elem.data] = elem.value;\n                              }\n                            }\n\n                            ;\n                          };\n\n                          for (var i in inputs) {\n                            loop(inputs[i]);\n                          }\n\n                          ;\n\n                          if (CALCUTYPE.value == 1) {\n                            target.expertDataModelId = 0;\n                          }\n\n                          kqiManagerUIService.updateKqiCalcRule(target, function (event) {\n                            if (event.code == \"0\") {\n                              growl.success(\"KQI编辑完成\");\n                              target = event.data;\n\n                              for (var k in calcRules) {\n                                if (calcRules[k].id == event.data.id) {\n                                  calcRules[k] = event.data;\n                                  break;\n                                }\n                              }\n\n                              ; // calcRules.updateData(event.data);（这个功能暂时不用）\n\n                              ngDialog.close();\n                            }\n\n                            ;\n                          });\n                        } else {\n                          var newVar = {};\n\n                          var loop = function loop(elem) {\n                            if (typeof elem.value != \"function\" && elem.calculable != false && elem.data != \"\") {\n                              if (elem.type == \"groupSelect\") {\n                                newVar[elem.data] = timeToCron(elem.groups);\n                              } else {\n                                newVar[elem.data] = elem.value;\n                              }\n                            }\n\n                            ;\n                          };\n\n                          for (var i in inputs) {\n                            loop(inputs[i]);\n                          }\n\n                          ;\n\n                          if (CALCUTYPE.value == 1) {\n                            newVar.expertDataModelId = 0;\n                          } else {\n                            newVar.expression = \"var a=1\";\n                          }\n\n                          ;\n                          kqiManagerUIService.addKqiCalcRule(newVar, function (event) {\n                            if (event.code == \"0\") {\n                              calcRules.pushbefore(event.data);\n                              growl.success(\"KQI添加完成\");\n                              ngDialog.close();\n                            }\n\n                            ;\n                          });\n                        }\n\n                        ;\n                      }\n                    }, {\n                      label: TEXT.CANCEL,\n                      icon: \"btn btn-default\",\n                      fn: function fn() {\n                        ngDialog.close();\n                      }\n                    }]\n                  };\n                };\n\n                var getKpisByModelId_end = function getKpisByModelId_end(kpis) {\n                  if (initKqiModel != 0) {\n                    getKqiModelById(initKqiModel, function (kqiModel) {\n                      var viewContent = JSON.parse(kqiModel.viewContent);\n                      start(kpis, viewContent);\n                    });\n                  } else {\n                    start(kpis);\n                  }\n\n                  ;\n                };\n\n                if (initResource) {\n                  getKpisByModelId(initResource, function (kpis) {\n                    getKpisByModelId_end(kpis);\n                  });\n                } else {\n                  getKpisByModelId_end();\n                }\n              });\n            });\n            ngDialog.open({\n              template: '../partials/dialogue/config_alert_dia2.html',\n              className: 'ngdialog-theme-plain',\n              scope: scope\n            });\n          };\n\n          var addNewClick = function addNewClick() {\n            editCalcRules();\n          };\n\n          var delectClick = function delectClick(target) {\n            // \n            deleteKqiCalcRule(target.id, function (event) {\n              if (event.code == 0) {\n                growl.success(\"删除KQI成功！\");\n                target.remove();\n              }\n            });\n          };\n          /** var delectClickGroup = function(){}; */\n\n\n          var editClick = function editClick(target) {\n            editCalcRules(jQuery.extend(true, {}, target));\n          };\n\n          var strHeader = {};\n          var strEdit = {};\n          var strDel = {};\n          var optList = [];\n\n          if (scope.menuitems['A01_S97']) {\n            strHeader = {\n              icon: \"fa fa-plus\",\n              class: \"btn btn-primary btn-sm\",\n              label: \"添加KQI\",\n              style: {\n                margin: \"2px\"\n              },\n              type: \"button\",\n              events: {\n                click: addNewClick\n              }\n            };\n          }\n\n          if (scope.menuitems['A02_S97']) {\n            strEdit = {\n              label: \"编辑\",\n              type: \"button\",\n              class: \"btn btn-default\",\n              events: {\n                click: editClick\n              }\n            };\n            optList.push(strEdit);\n          }\n\n          if (scope.menuitems['A03_S97']) {\n            strDel = {\n              label: \"删除\",\n              type: \"button\",\n              class: \"btn btn-default\",\n              events: {\n                click: delectClick\n              }\n            };\n            optList.push(strDel);\n          }\n\n          scope.calcRules = {\n            source: calcRules,\n            showSelector: false,\n            header: [strHeader\n            /**, {\n            icon: \"fa fa-minus\",\n            class: \"btn btn-default btn-sm\",\n            label: \"删除KQI\",\n            style: {\n              margin: \"2px\"\n            },\n            type: \"button\",\n            disabled: function(event) {\n              var some = event.some(function(elem) {\n                return elem.selected == true && elem.status == -1;\n              });\n              return !some;\n            },\n            events: {\n              click: delectClickGroup\n            }\n            }*/\n            ],\n            columnDefs: [{\n              label: \"标识\",\n              width: \"10%\",\n              editable: true,\n              sortable: true,\n              filterable: true,\n              data: \"id\",\n              type: \"text\",\n              modes: {\n                default: {\n                  type: \"text\"\n                },\n                edit: {\n                  type: \"input\",\n                  placeholder: \"例如：请填写用户名，用户名不可为空\"\n                }\n              }\n            }, {\n              label: \"名称\",\n              width: \"20%\",\n              editable: true,\n              sortable: true,\n              filterable: true,\n              data: \"name\",\n              type: \"text\",\n              modes: {\n                default: {\n                  type: \"text\"\n                },\n                edit: {\n                  type: \"input\",\n                  placeholder: \"例如：请填写用户名，用户名不可为空\"\n                }\n              }\n            }, {\n              \"label\": \"对应指标\",\n              width: \"10%\",\n              editable: true,\n              sortable: true,\n              filterable: true,\n              data: \"kpiId\",\n              type: \"text\",\n              modes: {\n                default: {\n                  type: \"text\"\n                },\n                edit: {\n                  type: \"input\",\n                  placeholder: \"例如：请填写用户名，用户名不可为空\"\n                }\n              }\n            }, {\n              label: \"创建时间\",\n              data: \"createTime\",\n              type: \"date\",\n              format: \"yy-mm-dd hh:nn:ss\",\n              filterable: false,\n              sortable: true,\n              modes: {\n                default: {\n                  type: \"date\"\n                }\n              }\n            }, {\n              label: \"脚本类型\",\n              width: \"10%\",\n              editable: true,\n              sortable: true,\n              filterable: true,\n              data: \"scriptType\",\n              type: \"select\",\n              options: scriptTypes,\n              filterFormat: {\n                \"label\": \"label\",\n                \"value\": \"id\"\n              },\n              modes: {\n                default: {\n                  type: \"text\"\n                },\n                edit: {\n                  type: \"input\",\n                  placeholder: \"例如：请填写用户名，用户名不可为空\"\n                }\n              }\n            }, {\n              label: \"计算频率\",\n              width: \"auto\",\n              editable: true,\n              sortable: true,\n              filterable: true,\n              data: \"granularityUnit\",\n              type: \"select\",\n              options: granularityUnits,\n              filterFormat: {\n                \"label\": \"label\",\n                \"value\": \"id\"\n              },\n              modes: {\n                default: {\n                  type: \"text\"\n                },\n                edit: {\n                  type: \"input\",\n                  placeholder: \"例如：请填写用户名，用户名不可为空\"\n                }\n              }\n            }, {\n              label: \"操作\",\n              type: \"buttonGroup\",\n              filterable: false,\n              sortable: false,\n              width: \"141px\",\n              modes: {\n                default: {\n                  options: optList\n                }\n              }\n            }]\n          };\n        });\n      });\n    };\n\n    init();\n  }]);\n});"],"sourceRoot":"/source/"}