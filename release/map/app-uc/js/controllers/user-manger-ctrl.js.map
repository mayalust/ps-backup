{"version":3,"sources":["app-uc/js/controllers/user-manger-ctrl.js"],"names":["define","controllers","BootstrapDialog","controller","$scope","$location","Info","userLoginUIService","route","growl","configUIService","dialogInstance","treeviewIndex","oldTreeviewIndex","currentMenuCode","firstMenuCode","localMenuCode","showMenu","menuitems","publicTableSearch","tabelname","value","$broadcast","name","$on","rootHandler","current","params","mode","detailshow","gotoHomePage","user","enterprise","logoStatus","location","href","gotoAppPage","showMenuFun","logout","onViewLoad","menusFilter","item","functionCode","charAt","initUserObjects","callbackFun","initMenus","getConfigsByGroupName","returnObj","code","data","length","forEach","baseConfig","jQuery","extend","JSON","parse","title","$","html","shortcut","attr","Date","getTime","e","evt","d","isAuthenticated","close","userInfo","lastLoginTime","newDateJson","Format","GetDateCategoryStrByLabel","enterpriseType","localmodel","show","closable","message","dialog","$message","pageToLoad","getData","load","buttons","label","cssClass","action","dialogRef","userInput","document","getElementById","psdInput","login","userIdentifyService","userUIService","$interval","forgetClick","emailOnly","passwordConfig","interval","get","info","forgetList","emailAddress","verify","verifyEmail","newPwd","confimPwd","hideValidate","phoneEmail","statusCheck","verifySuccess","$watch","newValue","oldValue","undefined","getIdentify","identifyData","imgCode","codeCheck","val","identifyNum","res","modeCheck","match","repeatEmail","emailExist","checkMobilePhone","blindClick","t","emailSend","text","disabled","sendPasswordSMS","address","time","cancel","removeAttr","sendEmailPassword","forgetAjax","forgetPassword","css","addClass","secTip","seed","tip","window","setTimeout","forgetStep","forNumber","identifyPasswordSMS","codeData","emailCheckPassword","checkName","removeClass","$rootScope","passwordEdit","pwdList","configPwd","regPwd","confirmShow","codeMessage","identifyName","configError","userId","logoImg","websiteUrl","userID","enterpriseLogo","indexOf","mobilePhone","split","initPwd","modifyPassword","initDate","warning","tuichu","updatePassWord","$http","mobile","codeError","industry","industryList","provinceList","url","origin","search","querySolution","loginSave","identifySMS","weChatLogin","obj","codeClick","sendSMS","modelDefinitionService","regShow","confirmPassword","statusShow","safeMsg","editData","formData","password","roleID","userName","countryRegion","city","province","business","mail_num","enterpriseManager","urlCode","areaList","cityList","findAllIndustry","arr","arr1","newData","i","j","id","parentModelId","push","belongList","onMouseOver","actor","event","renewal","reload","statusClick","statusId","noEmail","sendEmail","phoneCode","timeCode","phoneSumbit","formData1","individualUserRegister","vv","staffName","emailHref","hrefName","emailSpile","open","passCheck","eve","currentTarget","identCheck","userCheck","checkClick","nextStep","regId","statusCode","identifyEmail","hide"],"mappings":"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","file":"app-uc/js/controllers/user-manger-ctrl.js","sourcesContent":["define(['controllers/controllers', 'bootstrap-dialog'], function (controllers, BootstrapDialog) {\n  'use strict';\n\n  controllers.controller('userMangerCtrl', ['$scope', '$location', 'Info', 'userLoginUIService', '$route', 'growl', 'configUIService', function ($scope, $location, Info, userLoginUIService, route, growl, configUIService) {\n    var dialogInstance;\n    $scope.treeviewIndex = \"\";\n    $scope.oldTreeviewIndex = \"\";\n    $scope.currentMenuCode = null; //当前的菜单编码\n\n    $scope.firstMenuCode = null; //第一层的菜单编码\n\n    $scope.localMenuCode = \"F01\"; //判断使用哪一个服务中心，用来替代localIndex\n\n    $scope.showMenu = false;\n    $scope.menuitems = {};\n\n    $scope.publicTableSearch = function (tabelname, value) {\n      $scope.$broadcast('table-search-handle', {\n        name: tabelname,\n        value: value\n      });\n    }; // 路由跳转成功后触发\n\n\n    $scope.$on('$routeChangeSuccess', function () {\n      userLoginUIService.rootHandler($scope, $location);\n\n      if (route.current.params.mode == 'detail') {\n        $scope.detailshow = true;\n      } else {\n        $scope.detailshow = false;\n      }\n    });\n    /**\r\n     * 判断未登录后如何处理\r\n     * localmodel＝true 本地测试使用\r\n     */\n\n    var showLogin = function showLogin() {\n      if (!localmodel) {\n        return;\n      }\n\n      dialogInstance = BootstrapDialog.show({\n        title: '欢迎来到普奥的世界',\n        closable: false,\n        //size:BootstrapDialog.SIZE_WIDE,\n        message: function message(dialog) {\n          var $message = $('<div></div>');\n          var pageToLoad = dialog.getData('pageToLoad');\n          $message.load(pageToLoad);\n          return $message;\n        },\n        data: {\n          'pageToLoad': 'partials/login.html'\n        },\n        buttons: [{\n          label: '登录',\n          cssClass: 'btn-success',\n          action: function action(dialogRef) {\n            var userInput = document.getElementById('username');\n            var psdInput = document.getElementById('password');\n            userLoginUIService.login(userInput.value, psdInput.value);\n          }\n        }, {\n          label: '退出',\n          action: function action(dialogRef) {\n            dialogRef.close();\n            location.href = \"../index.html\";\n          }\n        }]\n      });\n    };\n\n    $scope.gotoHomePage = function () {\n      if (userLoginUIService.user.enterprise.logoStatus != '0') {\n        location.href = \"http://www.proudsmart.com\";\n      }\n    };\n\n    $scope.gotoAppPage = function () {\n      location.href = \"index.html\";\n    };\n\n    $scope.showMenuFun = function () {\n      $scope.showMenu = !$scope.showMenu;\n    };\n\n    $scope.logout = function () {\n      userLoginUIService.logout();\n    };\n\n    $scope.onViewLoad = function () {}; //    $scope.powers = {};\n    //    var setPower = function(pow, len) {\n    //      pow = pow.substring(0, len);\n    //      $scope.powers[pow] = true;\n    //      if(len > 5) {\n    //        setPower(pow, len - 2);\n    //      }\n    //    }\n    //    var initPower = function() {\n    //      for(var i in userLoginUIService.user.functionCodeSet) {\n    //        var funCode = userLoginUIService.user.functionCodeSet[i];\n    //        $scope.powers[funCode] = true;\n    //        if(funCode.length > 5) {\n    //          setPower(funCode, funCode.length - 2);\n    //        }\n    //      }\n    //    };\n\n\n    $scope.menusFilter = function (item) {\n      return item.functionCode.charAt(0) === \"S\";\n    };\n\n    var initConfigManager = function initConfigManager(callbackFun) {\n      configUIService.getConfigsByGroupName(\"EnterpriseConfig\", function (returnObj) {\n        if (returnObj.code == 0) {\n          if (returnObj.data && returnObj.data.length > 0) {\n            returnObj.data.forEach(function (item) {\n              try {\n                if ($scope.baseConfig) {\n                  $scope.baseConfig = jQuery.extend(true, $scope.baseConfig, JSON.parse(item.value));\n                } else {\n                  $scope.baseConfig = JSON.parse(item.value);\n                }\n\n                if ($scope.baseConfig) {\n                  //拥有企业设置\n                  if ($scope.baseConfig.title) $(\"title\").html($scope.baseConfig.title);else $(\"title\").html(\"\");\n                  if ($scope.baseConfig.shortcut) $(\"link[rel='shortcut icon']\").attr(\"href\", \"../\" + $scope.baseConfig.shortcut + \"?\" + new Date().getTime());else $(\"link[rel='shortcut icon']\").attr(\"href\", \"../../login/images/shortcut_null.png\" + \"?\" + new Date().getTime());\n                }\n              } catch (e) {}\n            });\n          } else {\n            $(\"title\").html(\"\");\n            $(\"link[rel='shortcut icon']\").attr(\"href\", \"../../login/images/shortcut_null.png\" + \"?\" + new Date().getTime());\n          }\n\n          callbackFun();\n        }\n      });\n    };\n\n    function initUserObjects() {\n      initConfigManager(function () {\n        userLoginUIService.initMenus($scope, $location);\n      }); //      initPower();\n    }\n\n    ; // 监听用户登录状态\n\n    $scope.$on('loginStatusChanged', function (evt, d) {\n      if (userLoginUIService.user.isAuthenticated) {\n        if (dialogInstance) {\n          dialogInstance.close();\n        }\n\n        $scope.userInfo = userLoginUIService.user;\n        $scope.lastLoginTime = newDateJson(userLoginUIService.user.lastLoginTime).Format(GetDateCategoryStrByLabel());\n        if (userLoginUIService.user.enterprise) $scope.enterpriseType = userLoginUIService.user.enterprise.enterpriseType;\n        initUserObjects();\n      } else {\n        $scope.userInfo = {};\n        $scope.lastLoginTime = \"\";\n        showLogin();\n      }\n    });\n  }]); //忘记密码\n\n  controllers.controller(\"forgetCtrl\", ['$scope', 'userIdentifyService', 'Info', 'userUIService', '$interval', 'growl', function ($scope, userIdentifyService, Info, userUIService, $interval, growl) {\n    $scope.forgetClick = \"1\";\n    $scope.emailOnly = \"\";\n    $scope.passwordConfig; //通过json获取忘记密码配置\n\n    var info = Info.get(\"localdb/password.json\", function (info) {\n      $scope.passwordConfig = info.passwordConfig;\n    });\n    $scope.forgetList = {\n      'emailAddress': '',\n      'verify': '',\n      \"verifyEmail\": '',\n      'newPwd': '',\n      'confimPwd': ''\n    };\n    $scope.hideValidate = \"\";\n    $scope.phoneEmail = \"\";\n    $scope.verify = \"\";\n    $scope.statusCheck = \"\";\n    $scope.verifySuccess = \"0\";\n    $scope.$watch(\"forgetList.confimPwd\", function (newValue, oldValue) {\n      if (newValue != $scope.forgetList.newPwd) {\n        $scope.emailOnly = 4;\n      } else {\n        $scope.emailOnly = 0;\n      }\n    });\n    $scope.$watch(\"forgetList.newPwd\", function (newValue, oldValue) {\n      if (newValue == undefined) {\n        $scope.emailOnly = 333;\n      } else {\n        $scope.emailOnly = 0;\n      }\n    });\n    $scope.$watch(\"forgetList.verify\", function (newValue, oldValue) {\n      $scope.emailOnly = 0;\n    });\n    $scope.$watch(\"forgetList.verifyEmail\", function (newValue, oldValue) {\n      $scope.emailOnly = 0;\n    }); //生成验证码\n\n    userIdentifyService.getIdentify(function (identifyData) {\n      if (identifyData.code == 0) {\n        $scope.imgCode = identifyData.data;\n      }\n    });\n\n    $scope.codeCheck = function () {\n      var val = $scope.forgetList.verify;\n      var valLength = val.length;\n\n      if (valLength == 5) {\n        //验证码校验\n        userIdentifyService.identifyNum(val, function (res) {\n          if (res.code == 0 && res.data == true) {\n            $scope.verify = 'success';\n            $scope.emailOnly = \"0\";\n            $scope.verifySuccess = \"1\";\n          } else {\n            $scope.emailOnly = 2;\n            $scope.verify = \"error\";\n            $scope.verifySuccess = \"0\";\n            userIdentifyService.getIdentify(function (identifyData) {\n              if (identifyData.code == 0) {\n                $scope.imgCode = identifyData.data;\n              }\n            });\n          }\n        });\n      } else {\n        $scope.emailOnly = 2;\n        $scope.verifySuccess = \"0\";\n        $scope.verify = \"error\";\n      }\n    };\n\n    $scope.modeCheck = function () {\n      var val = $scope.forgetList.emailAddress;\n\n      if (val.match(/^([a-zA-Z0-9_\\.\\-])+\\@(([a-zA-Z0-9\\-])+\\.)+([a-zA-Z0-9]{2,4})+$/)) {\n        //校验邮箱是否存在\n        userIdentifyService.repeatEmail($scope.forgetList.emailAddress, function (emailExist) {\n          $scope.statusCheck = \"email\";\n\n          if (emailExist.code == 0 && emailExist.data == false) {\n            $scope.phoneEmail = \"\";\n          } else {\n            $scope.phoneEmail = 1001;\n            $scope.emailOnly = 1;\n          }\n        });\n      } else if (val.match(/^((1[3,5,8][0-9])|(14[5,7])|(17[0,6,7,8]))\\d{8}$/)) {\n        //校验手机号码是否存在\n        userUIService.checkMobilePhone($scope.forgetList.emailAddress, function (data) {\n          $scope.statusCheck = \"phone\";\n\n          if (data.code == 0 && data.data == true) {\n            $scope.emailOnly = 1;\n            $scope.phoneEmail = 1002;\n          } else {\n            $scope.phoneEmail = \"\";\n          }\n        });\n      } else if (val == '') {\n        $scope.emailOnly = 11; // $scope.phoneEmail=\"\";\n\n        $scope.statusCheck = '';\n        $scope.phoneEmail = \"\";\n      } else {\n        $scope.emailOnly = '111';\n        $scope.statusCheck = '';\n        $scope.phoneEmail = \"\";\n      }\n    };\n\n    $scope.blindClick = function () {\n      //生成验证码\n      $scope.imgCode = null;\n      userIdentifyService.getIdentify(function (identifyData) {\n        if (identifyData.code == 0) {\n          $scope.imgCode = identifyData.data;\n        }\n      });\n    };\n\n    $scope.t = 60;\n    var interval;\n    $scope.$watch(\"forgetList.emailAddress\", function (newValue, oldValue) {\n      $scope.emailOnly = \"0\";\n    });\n\n    $scope.emailSend = function () {\n      if ($scope.forgetList.emailAddress == \"\") {\n        $scope.emailOnly = 11;\n        return;\n      }\n\n      if ($scope.statusCheck == '') {\n        $scope.emailOnly = '111';\n        return;\n      }\n\n      if ($scope.phoneEmail == 1002 || $scope.phoneEmail == 1001) {\n        $scope.emailOnly = '1';\n        return;\n      }\n\n      if ($scope.forgetList.verify == \"\") {\n        $scope.emailOnly = '200';\n        return;\n      }\n\n      if ($scope.verify == \"error\") {\n        $scope.emailOnly = '2';\n        return;\n      }\n\n      if ($(\"#charge\").text() == \"获取验证码\") {\n        $(\"#charge\").attr({\n          \"disabled\": \"disabled\"\n        });\n\n        if ($scope.statusCheck == \"phone\") {\n          //手机发重置密码邮件\n          userIdentifyService.sendPasswordSMS($scope.forgetList.emailAddress, function (address) {\n            if (address.code == 0 && address.data == true) {\n              $scope.time = 60;\n              $interval.cancel();\n              interval = $interval(function () {\n                $scope.time--;\n\n                if ($scope.time == 0) {\n                  $(\"#charge\").removeAttr(\"disabled\");\n                  $(\"#charge\").text(\"获取验证码\");\n                  $scope.time = 60;\n                  $interval.cancel(interval); //$scope.emailSend = false;\n                } else {\n                  $(\"#charge\").text(\"\" + $scope.time + \"秒后，重新获取验证码\");\n                }\n              }, 1000);\n            } else if (address.code == 10008) {\n              $scope.emailOnly = \"1\";\n            }\n          });\n        } else if ($scope.statusCheck == \"email\") {\n          //发重置密码邮件\n          userIdentifyService.sendEmailPassword($scope.forgetList.emailAddress, function (address) {\n            if (address.code == 0 && address.data == true) {\n              $scope.time = 60;\n              $interval.cancel();\n              interval = $interval(function () {\n                $scope.time--;\n\n                if ($scope.time == 0) {\n                  $(\"#charge\").text(\"获取验证码\");\n                  $(\"#charge\").removeAttr(\"disabled\");\n                  $scope.time = 60;\n                  $interval.cancel(interval); //$scope.emailSend = false;\n                } else {\n                  $(\"#charge\").text(\"\" + $scope.time + \"秒后，重新获取验证码\");\n                }\n              }, 1000);\n            }\n          });\n        }\n      }\n    }; //runTiming();\n\n\n    $scope.forgetAjax = function () {\n      if ($scope.forgetList.newPwd == \"\") {\n        $scope.emailOnly = 311;\n        return;\n      }\n\n      if ($scope.forgetList.newPwd == undefined) {\n        return;\n      }\n\n      if ($scope.forgetList.confimPwd == \"\") {\n        $scope.emailOnly = 312;\n        return;\n      }\n\n      if ($scope.forgetList.confimPwd == undefined) {\n        return;\n      }\n\n      if ($scope.emailOnly == 4) {\n        return;\n      }\n\n      if ($scope.forgetList.newPwd != $scope.forgetList.confimPwd) {\n        $scope.emailOnly = 4;\n        return;\n      }\n\n      userIdentifyService.forgetPassword($scope.forgetList.emailAddress, $scope.hideValidate, $scope.forgetList.newPwd, function (emailExist) {\n        if (emailExist.code == 0 && emailExist.data == true) {\n          $scope.forgetClick = \"4\";\n          $(\"#barvader\").css(\"width\", \"100%\");\n          $(\".steps >ol >li:eq(2)\").addClass(\"active\");\n          secTip();\n        }\n      });\n    };\n\n    var seed = 5; //60秒\n\n    var tip = function tip() {\n      seed--;\n\n      if (seed > 0) {\n        $(\"#sec\").text(seed);\n        secTip();\n      } else {\n        window.location.href = \"../#/index\";\n      }\n    };\n\n    var secTip = function secTip() {\n      setTimeout(tip, 1000);\n    };\n\n    $scope.forgetStep = function (forNumber) {\n      if (forNumber == 2) {\n        if ($scope.forgetList.emailAddress == \"\") {\n          $scope.emailOnly = 11;\n          return;\n        }\n\n        if ($scope.statusCheck == '') {\n          $scope.emailOnly = '111';\n          return;\n        }\n\n        if ($scope.phoneEmail == 1002 || $scope.phoneEmail == 1001) {\n          $scope.emailOnly = '1';\n          return;\n        }\n\n        if ($scope.forgetList.verify == \"\") {\n          $scope.emailOnly = '200';\n          return;\n        }\n\n        if ($scope.verify == \"error\") {\n          $scope.emailOnly = '2';\n          return;\n        }\n\n        if ($scope.forgetList.verifyEmail != undefined && $scope.forgetList.verifyEmail != \"\") {\n          if ($scope.statusCheck == 'phone') {\n            userIdentifyService.identifyPasswordSMS($scope.forgetList.verifyEmail, function (codeData) {\n              if (codeData.code == 0) {\n                $scope.hideValidate = codeData.data;\n                $(\".steps >ol >li:eq(1)\").addClass(\"active\");\n                $(\"#barvader\").css(\"width\", \"50%\");\n                $scope.forgetClick = \"2\";\n              } else {\n                $scope.emailOnly = 3;\n              }\n            });\n          } else if ($scope.statusCheck == 'email') {\n            userIdentifyService.emailCheckPassword($scope.forgetList.verifyEmail, function (checkName) {\n              if (checkName.code == 0) {\n                $scope.hideValidate = checkName.data;\n                $scope.forgetClick = forNumber;\n                $(\".steps >ol >li:eq(1)\").addClass(\"active\");\n                $(\"#barvader\").css(\"width\", \"50%\");\n                $scope.forgetClick = \"2\";\n              } else {\n                $scope.emailOnly = 3;\n              }\n            });\n          }\n        } else {\n          $scope.emailOnly = 30001;\n        }\n      } else if (forNumber == 3) {\n        userLoginUIService.emailCheckPassword($scope.forgetList.verifyEmail, function (checkName) {\n          if (checkName.code == 0) {\n            $scope.hideValidate = checkName.data;\n            $scope.forgetClick = forNumber;\n            $(\".mod-sub-nav > li\").removeClass(\"list2-active\");\n            $(\".mod-sub-nav > li:eq(2)\").addClass(\"list3-active\");\n          } else {\n            $scope.emailOnly = 3;\n          }\n        });\n      }\n    };\n  }]); //初始化密码\n\n  controllers.controller('passwordController', ['$scope', '$rootScope', 'userLoginUIService', 'userIdentifyService', 'growl', function ($scope, $rootScope, userLoginUIService, userIdentifyService, growl) {\n    $scope.passwordEdit = userLoginUIService.user;\n    $scope.pwdList = {\n      \"emailAddress\": \"\",\n      \"newPwd\": \"\",\n      \"configPwd\": \"\",\n      \"regPwd\": \"\"\n    };\n    $scope.imgCode = \"\";\n    $scope.confirmShow = \"0\";\n    $scope.codeMessage = \"\";\n    $scope.emailAddress = \"\";\n    $scope.identifyName = \"\";\n    $scope.configError = \"\";\n    $scope.userId = \"\";\n    $scope.enterprise = {};\n    $scope.logoImg = '';\n    $scope.websiteUrl = '';\n    $scope.$on('loginStatusChanged', function (evt, d) {\n      if (userLoginUIService.user.isAuthenticated) {\n        $scope.userId = userLoginUIService.user.userID;\n        $scope.enterprise = userLoginUIService.user.enterprise;\n\n        if ($scope.enterprise.enterpriseLogo.indexOf(\"http\") < 0) {\n          $scope.logoImg = 'images/logo.svg';\n        } else {\n          $scope.logoImg = $scope.enterprise.enterpriseLogo;\n        }\n\n        if ($scope.enterprise.websiteUrl == '' || $scope.enterprise.websiteUrl == null) {\n          $scope.websiteUrl = 'http://www.proudsmart.com/';\n        } else {\n          $scope.websiteUrl = $scope.enterprise.websiteUrl;\n        }\n\n        if (userLoginUIService.user.emailAddress) {\n          $scope.emailAddress = userLoginUIService.user.emailAddress;\n        } else if (userLoginUIService.user.mobilePhone) {\n          $scope.emailAddress = userLoginUIService.user.mobilePhone;\n        }\n      }\n    }); //生成验证码\n\n    userIdentifyService.getIdentify(function (identifyData) {\n      if (identifyData.code == 0) {\n        $scope.imgCode = identifyData.data;\n      }\n    }); //更新验证码\n\n    $scope.blindClick = function () {\n      $scope.imgCode = null;\n      userIdentifyService.getIdentify(function (identifyData) {\n        if (identifyData.code == 0) {\n          $scope.imgCode = identifyData.data;\n        }\n      });\n    };\n\n    $scope.$watch(\"pwdList.regPwd\", function (newValue, oldValue) {\n      if (newValue != $scope.pwdList.newPwd) {\n        $scope.confirmShow = 1;\n      } else {\n        $scope.confirmShow = 0;\n      }\n    });\n    $scope.$watch(\"identifyName\", function (newValue, oldValue) {\n      $scope.confirmShow = 0;\n    });\n    $scope.$watch(\"pwdList.newPwd\", function (newValue, oldValue) {\n      if (newValue != '') {//if (newValue == $scope.pwdList.configPwd) {\n        //  $scope.configError = 2022;\n        //} else {\n        //  $scope.configError = 0;\n        //}\n      }\n    });\n    $scope.$watch(\"pwdList.configPwd\", function (newValue, oldValue) {\n      $scope.confirmShow = 0;\n    });\n    var currentUrl = document.location.href;\n    var currentPage = currentUrl.split(\"/\")[5]; // if(currentPage == \"personal\") {\n    //   userLoginUIService.logout();\n    // }\n\n    $scope.initPwd = function () {\n      if ($scope.emailAddress != \"\") {\n        if ($scope.pwdList.configPwd == \"\") {\n          $scope.confirmShow = 1010;\n          return;\n        }\n\n        if ($scope.pwdList.newPwd == \"\") {\n          $scope.confirmShow = 1011;\n          return;\n        }\n\n        if ($scope.pwdList.regPwd == \"\") {\n          $scope.confirmShow = 1016;\n          return;\n        }\n\n        if ($scope.identifyName == \"\") {\n          $scope.confirmShow = 1017;\n          return;\n        }\n\n        if ($scope.configError == 2022) {\n          return;\n        } //验证码校验\n\n\n        userIdentifyService.identifyNum($scope.identifyName, function (res) {\n          if (res.code == 0 && res.data == true) {\n            // $scope.pwdList.emailAddress=userLoginUIService.user.emailAddress;\n            if ($scope.pwdList.regPwd == $scope.pwdList.newPwd) {\n              if ($scope.userId == \"\" || $scope.userId == null) {\n                $scope.userId = userLoginUIService.user.userID;\n              }\n\n              userLoginUIService.modifyPassword($scope.userId, $scope.pwdList.configPwd, $scope.pwdList.newPwd, function (initDate) {\n                if (initDate.code == 0 && initDate.data == true) {\n                  BootstrapDialog.show({\n                    title: '提示',\n                    message: '修改密码成功,请重新登录',\n                    closable: false,\n                    buttons: [{\n                      label: '确定',\n                      action: function action(dialogRef) {\n                        userLoginUIService.logout();\n                        dialogRef.close();\n                      }\n                    }]\n                  });\n                } else if (initDate.data == false) {\n                  $scope.confirmShow = \"2011\";\n                  $scope.blindClick();\n                  return;\n                } else {\n                  $scope.confirmShow = \"10010\";\n                  $scope.blindClick();\n                  $scope.codeMessage = initDate.message; //$scope.codeMessage = '旧密码输入错误';\n                }\n              });\n            } else {\n              $scope.confirmShow = 1;\n            }\n          } else {\n            $scope.confirmShow = 3;\n          }\n        });\n      } else {\n        growl.warning(\"您的账号没有邮箱或者手机号码，不能修改密码\", {});\n        return; //window.location.href = \"login.html\";\n      }\n    };\n\n    $scope.tuichu = function () {\n      userLoginUIService.logout(function (res) {\n        if (res.code == 0) {\n          window.location.href = \"../#/index\";\n        }\n      });\n    };\n  }]); //修改密码\n\n  controllers.controller('forgetPwdController', ['$scope', '$rootScope', 'userLoginUIService', 'userIdentifyService', 'growl', function ($scope, $rootScope, userLoginUIService, userIdentifyService, growl) {\n    $scope.passwordEdit = userLoginUIService.user;\n    $scope.pwdList = {\n      \"emailAddress\": \"\",\n      \"newPwd\": \"\",\n      \"configPwd\": \"\",\n      \"regPwd\": \"\"\n    };\n    $scope.imgCode = \"\";\n    $scope.confirmShow = \"0\";\n    $scope.codeMessage = \"\";\n    $scope.emailAddress = \"\";\n    $scope.identifyName = \"\";\n    $scope.configError = \"\";\n    $scope.userId = \"\";\n\n    if (userLoginUIService.user.emailAddress) {\n      $scope.emailAddress = userLoginUIService.user.emailAddress;\n    } else if (userLoginUIService.user.mobilePhone) {\n      $scope.emailAddress = userLoginUIService.user.mobilePhone;\n    } //生成验证码\n\n\n    userIdentifyService.getIdentify(function (identifyData) {\n      if (identifyData.code == 0) {\n        $scope.imgCode = identifyData.data;\n      }\n    }); //更新验证码\n\n    $scope.blindClick = function () {\n      $scope.imgCode = null;\n      userIdentifyService.getIdentify(function (identifyData) {\n        if (identifyData.code == 0) {\n          $scope.imgCode = identifyData.data;\n        }\n      });\n    };\n\n    $scope.$watch(\"pwdList.regPwd\", function (newValue, oldValue) {\n      if (newValue != $scope.pwdList.newPwd) {\n        $scope.confirmShow = 1;\n      } else {\n        $scope.confirmShow = 0;\n      }\n    });\n    $scope.$watch(\"identifyName\", function (newValue, oldValue) {\n      $scope.confirmShow = 0;\n    });\n    $scope.$watch(\"pwdList.newPwd\", function (newValue, oldValue) {\n      if (newValue != '') {//if (newValue == $scope.pwdList.configPwd) {\n        //  $scope.configError = 2022;\n        //} else {\n        //  $scope.configError = 0;\n        //}\n      }\n    });\n    $scope.$watch(\"pwdList.configPwd\", function (newValue, oldValue) {\n      $scope.confirmShow = 0;\n    });\n    var currentUrl = document.location.href;\n    var currentPage = currentUrl.split(\"/\")[5]; // if(currentPage == \"personal\") {\n    //   userLoginUIService.logout();\n    // }\n\n    $scope.updatePassWord = function () {\n      if ($scope.emailAddress != \"\") {\n        if ($scope.pwdList.configPwd == \"\") {\n          growl.warning(\"旧密码不能为空\", {});\n          return;\n        }\n\n        if ($scope.pwdList.newPwd == \"\") {\n          growl.warning(\"新密码不能为空\", {});\n          return;\n        }\n\n        if ($scope.pwdList.regPwd == \"\") {\n          growl.warning(\"确认密码不能为空\", {});\n          return;\n        }\n\n        if ($scope.identifyName == \"\") {\n          growl.warning(\"验证码不能为空\", {});\n          return;\n        }\n\n        if ($scope.configError == 2022) {\n          return;\n        } //验证码校验\n\n\n        userIdentifyService.identifyNum($scope.identifyName, function (res) {\n          if (res.code == 0 && res.data == true) {\n            // $scope.pwdList.emailAddress=userLoginUIService.user.emailAddress;\n            if ($scope.pwdList.regPwd == $scope.pwdList.newPwd) {\n              if ($scope.userId == \"\" || $scope.userId == null) {\n                $scope.userId = userLoginUIService.user.userID;\n              }\n\n              userLoginUIService.modifyPassword($scope.userId, $scope.pwdList.configPwd, $scope.pwdList.newPwd, function (initDate) {\n                if (initDate.code == 0 && initDate.data == true) {\n                  BootstrapDialog.show({\n                    title: '提示',\n                    message: '修改密码成功,请重新登录',\n                    closable: false,\n                    buttons: [{\n                      label: '确定',\n                      action: function action(dialogRef) {\n                        userLoginUIService.logout();\n                        dialogRef.close();\n                      }\n                    }]\n                  });\n                } else if (initDate.data == false) {\n                  $scope.confirmShow = \"2011\";\n                  $scope.blindClick();\n                  return;\n                } else {\n                  $scope.confirmShow = \"10010\";\n                  $scope.blindClick();\n                  $scope.codeMessage = initDate.message; //$scope.codeMessage = '旧密码输入错误';\n                }\n              });\n            } else {\n              $scope.confirmShow = 1;\n            }\n          } else {\n            $scope.confirmShow = 3;\n          }\n        });\n      } else {\n        growl.warning(\"您的账号没有邮箱或者手机号码，不能修改密码\", {});\n        return; //window.location.href = \"login.html\";\n      }\n    };\n\n    $scope.tuichu = function () {\n      userLoginUIService.logout(function (res) {\n        if (res.code == 0) {\n          window.location.href = \"../#/index\";\n        }\n      });\n    };\n  }]); //展会登录页面\n\n  controllers.controller('loginController', ['$scope', \"$http\", '$rootScope', 'Info', 'userIdentifyService', '$interval', function ($scope, $http, $rootScope, Info, userIdentifyService, $interval) {\n    $scope.mobile = \"\"; //手机号码\n\n    $scope.codeError = \"\"; //错误提示标志\n\n    $scope.verify = \"\"; //验证码输入\n\n    $scope.industry = \"\"; //解决方案\n\n    $scope.industryList = \"\"; //解决方案集合\n    //通过json获取解决方案\n\n    var info = Info.get(\"localdb/info.json\", function (info) {\n      $scope.provinceList = info.industry;\n    });\n    var url = window.location.origin;\n\n    if (url.search('localhost') > -1 || url.search('127.0.0.1') > -1) {\n      url = \"http://192.168.1.121\";\n    }\n\n    userIdentifyService.querySolution(function (res) {\n      if (res.code == 0) {\n        $scope.industryList = res.data;\n      }\n    });\n    $scope.$watch(\"mobile\", function (newValue, oldValue) {\n      $scope.codeError = \"0\";\n    });\n    $scope.$watch(\"verify\", function (newValue, oldValue) {\n      $scope.codeError = \"0\";\n    });\n    $scope.$watch(\"industry\", function (newValue, oldValue) {\n      $scope.codeError = \"0\";\n    });\n\n    $scope.loginSave = function () {\n      if ($scope.mobile == \"\" && $scope.mobile == null && typeof $scope.mobile == \"undefined\") {\n        $scope.codeError = \"1003\";\n        return;\n      }\n\n      if ($scope.verify == \"\" && $scope.verify == null && typeof $scope.verify == \"undefined\") {\n        $scope.codeError = \"1004\";\n        return;\n      }\n\n      if ($scope.industry == \"\" && $scope.industry == null && typeof $scope.industry == \"undefined\") {\n        $scope.codeError = \"1005\";\n        return;\n      }\n\n      userIdentifyService.identifySMS($scope.verify, function (res) {\n        if (res.code == 0 && res.data == true) {\n          userIdentifyService.weChatLogin($scope.mobile, $scope.industry, function (obj) {\n            if (obj.code == 0) {\n              window.location.href = \"../app-oc/index.html#/dashboard\";\n            }\n          });\n        } else {\n          $scope.codeError = \"2001\";\n        }\n      });\n    };\n\n    var interval;\n\n    $scope.codeClick = function () {\n      if ($scope.mobile == \"\" && $scope.mobile == null && typeof $scope.mobile == \"undefined\") {\n        $scope.codeError = \"1003\";\n        return;\n      }\n\n      if ($(\"#charge\").text() == \"发送验证码\") {\n        $(\"#charge\").attr({\n          \"disabled\": \"disabled\"\n        }); //手机发重置密码邮件\n\n        userIdentifyService.sendSMS($scope.mobile, function (address) {\n          if (address.code == 0 && address.data == true) {\n            $scope.time = 60;\n            $interval.cancel();\n            interval = $interval(function () {\n              $scope.time--;\n\n              if ($scope.time == 0) {\n                $(\"#charge\").removeAttr(\"disabled\");\n                $(\"#charge\").text(\"发送验证码\");\n                $scope.time = 60;\n                $interval.cancel(interval);\n              } else {\n                $(\"#charge\").text(\"\" + $scope.time + \"秒后，重新获取验证码\");\n              }\n            }, 1000);\n          }\n        });\n      }\n    };\n  }]); //用户注册\n\n  controllers.controller('registerCtrl', ['$scope', '$rootScope', 'Info', 'userUIService', 'modelDefinitionService', 'userIdentifyService', '$interval', function ($scope, $rootScope, Info, userUIService, modelDefinitionService, userIdentifyService, $interval) {\n    $scope.regShow = \"1\";\n    $scope.confirmPassword = \"\";\n    $scope.confirmShow = \"false\";\n    $scope.statusShow = \"1\";\n    $scope.emailOnly = \"0\";\n    $scope.imgCode = \"\";\n    $scope.identifyName = \"\";\n    $scope.safeMsg = false;\n    $scope.phoneEmail = \"1001\";\n    $scope.editData = {};\n    $scope.formData = {\n      'emailAddress': '',\n      'password': '',\n      'roleID': '1',\n      'mobilePhone': '',\n      'userName': '',\n      'countryRegion': '中国大陆',\n      'address': '',\n      'industry': '',\n      'city': '北京',\n      'province': '北京',\n      'business': '',\n      'mail_num': ''\n    };\n    $scope.enterpriseManager = {\n      \"name\": \"\"\n    };\n    $scope.show = false;\n    var urlCode = location.href.split(\"?\");\n    var info = Info.get(\"localdb/info.json\", function (info) {\n      $scope.areaList = info.areaList;\n      $scope.provinceList = info.cityList;\n    }); // $scope.$on('loginStatusChanged', function(evt, d) {\n    //     if (userLoginUIService.user.isAuthenticated) {\n    //         $rootScope.staffName = userLoginUIService.user.userName;\n    //         $scope.userInfo = userLoginUIService.user;\n    //     }\n    // });\n    //生成验证码\n\n    userIdentifyService.getIdentify(function (e) {\n      if (e.code == 0) {\n        $scope.imgCode = e.data;\n      }\n    });\n    modelDefinitionService.findAllIndustry(function (industry) {\n      var arr = industry.data;\n      var arr1 = industry.data;\n      var newData = [];\n\n      for (var i = 0; i < arr.length; i++) {\n        for (var j = 0; j < arr1.length; j++) {\n          if (arr[i].id == arr1[j].parentModelId) {\n            newData.push(arr1[j]);\n          }\n        }\n      }\n\n      $scope.belongList = newData;\n    });\n\n    $scope.blindClick = function () {\n      //生成验证码\n      userIdentifyService.getIdentify(function (e) {\n        if (e.code == 0) {\n          $scope.imgCode = e.data;\n        }\n      });\n    };\n\n    $scope.$watch(\"formData.emailAddress\", function (newValue, oldValue) {\n      $scope.emailOnly = \"0\";\n    });\n    $scope.$watch(\"identifyName\", function (newValue, oldValue) {\n      $scope.emailOnly = \"0\";\n    });\n    $scope.$watch(\"formData.industry\", function (newValue, oldValue) {\n      $scope.emailOnly = \"0\";\n    });\n    $scope.$watch(\"formData.password\", function (newValue, oldValue) {\n      $scope.emailOnly = \"0\";\n    });\n    $scope.$watch(\"formData.mobilePhone\", function (newValue, oldValue) {\n      $scope.emailOnly = \"0\";\n    });\n    $scope.$watch(\"formData.userName\", function (newValue, oldValue) {\n      $scope.emailOnly = \"0\";\n    });\n    $scope.$watch(\"confirmPassword\", function (newValue, oldValue) {\n      $scope.emailOnly = \"0\";\n\n      if (newValue != $scope.formData.password) {\n        $scope.confirmShow = 1;\n      } else {\n        $scope.confirmShow = 0;\n      }\n    });\n\n    $scope.onMouseOver = function (actor, event) {\n      $scope.show = true;\n    };\n\n    $scope.renewal = function () {\n      //$scope.regShow=\"1\";\n      window.location.reload(); //刷新当前页面.\n    };\n\n    $scope.statusClick = function (statusId) {\n      if (statusId == 1) {\n        $scope.statusShow = 1;\n      } else if (statusId == 2) {\n        $scope.statusShow = 2;\n      }\n    };\n\n    var interval;\n\n    $scope.noEmail = function () {\n      if ($(\"#emailBtn\").text() == \"重新发送邮件\") {\n        userIdentifyService.sendEmail($scope.formData.emailAddress, $scope.formData.password, function (address) {\n          if (address.code == 0 && address.data == true) {\n            $scope.time = 60;\n            $interval.cancel();\n            interval = $interval(function () {\n              $scope.time--;\n\n              if ($scope.time == 0) {\n                $(\"#emailBtn\").text(\"重新发送邮件\");\n                $scope.time = 60;\n                $interval.cancel(interval);\n              } else {\n                $(\"#emailBtn\").text(\"\" + $scope.time + \"秒后，重新获取\");\n              }\n            }, 1000);\n          }\n\n          $scope.regShow = 2;\n        });\n      }\n    };\n\n    $scope.phoneCode = function () {\n      if ($scope.formData.emailAddress == \"\") {\n        $scope.emailOnly = 11;\n        return;\n      }\n\n      if ($scope.statusCheck == '') {\n        $scope.emailOnly = '1003';\n        return;\n      }\n\n      if ($scope.formData.password == \"\") {\n        $scope.emailOnly = 'pass10';\n        return;\n      }\n\n      if ($scope.formData.password == undefined) {\n        return;\n      }\n\n      if ($(\"#phoneCode\").text() == \"发送验证码\") {\n        $(\"#phoneCode\").attr({\n          \"disabled\": \"disabled\"\n        });\n        userIdentifyService.sendSMS($scope.formData.emailAddress, function (codeData) {\n          if (codeData.code == 0 && codeData.data == true) {\n            $scope.timeCode = 60;\n            $interval.cancel();\n            interval = $interval(function () {\n              $scope.timeCode--;\n\n              if ($scope.timeCode == 0) {\n                $(\"#phoneCode\").text(\"发送验证码\");\n                $(\"#phoneCode\").removeAttr(\"disabled\");\n                $scope.timeCode = 60;\n                $interval.cancel(interval); //$scope.emailSend = false;\n              } else {\n                $(\"#phoneCode\").text(\"\" + $scope.timeCode + \"秒后，重新获取\");\n              }\n            }, 1000);\n          } else {\n            if (codeData.code == 10017) {\n              $scope.emailOnly = 1;\n              $(\"#phoneCode\").removeAttr(\"disabled\");\n            }\n          }\n        });\n      }\n    };\n\n    var seed = 5; //60秒\n\n    var tip = function tip() {\n      seed--;\n\n      if (seed > 0) {\n        $(\"#sec\").text(seed);\n        secTip();\n      } else {\n        window.location.href = \"index.html\";\n      }\n    };\n\n    var secTip = function secTip() {\n      setTimeout(tip, 1000);\n    }; //注册只支持企业用户注册\n\n\n    $scope.phoneSumbit = function () {\n      if ($scope.formData.userName == \"\") {\n        $scope.emailOnly = \"01012\";\n        return;\n      }\n\n      if ($scope.formData.userName == undefined) {\n        return;\n      }\n\n      if ($scope.statusCheck == \"phone\") {\n        $scope.formData1 = {\n          'password': $scope.formData.password,\n          'mobilePhone': $scope.formData.emailAddress,\n          'userName': $scope.formData.userName,\n          'countryRegion': '中国大陆',\n          'address': $scope.formData.address,\n          'city': '北京',\n          'business': $scope.formData.business,\n          'province': '北京'\n        };\n        $scope.editData[\"name\"] = $scope.formData.business;\n        $scope.editData[\"address\"] = $scope.formData.address;\n        $scope.editData[\"contactPhone\"] = $scope.formData.emailAddress;\n      } else {\n        $scope.formData1 = {\n          'password': $scope.formData.password,\n          'emailAddress': $scope.formData.emailAddress,\n          'userName': $scope.formData.userName,\n          'countryRegion': '中国大陆',\n          'address': $scope.formData.address,\n          'city': '北京',\n          'business': $scope.formData.business,\n          'province': '北京'\n        };\n        $scope.editData[\"name\"] = $scope.formData.business;\n        $scope.editData[\"address\"] = $scope.formData.address;\n        $scope.editData[\"contactEmail\"] = $scope.formData.emailAddress;\n      }\n\n      userUIService.individualUserRegister($scope.editData, $scope.formData1, function (vv) {\n        if (vv.code == 0) {\n          $scope.regShow = \"4\";\n\n          if ($scope.statusCheck == \"phone\") {\n            $scope.$on('loginStatusChanged', function (evt, d) {\n              if (userLoginUIService.user.isAuthenticated) {\n                $rootScope.staffName = userLoginUIService.user.userName;\n                $scope.userInfo = userLoginUIService.user;\n              } else {\n                window.location.href = \"login.html\";\n              }\n            }); // userLoginUIService.login($scope.formData.emailAddress, $scope.formData.password);\n          } // setTimeout(function () {\n          // window.location.href=\"app/index.html\";\n          // }, 5000);\n\n\n          secTip();\n          $(\"#barvader\").css(\"width\", \"100%\");\n          $(\".steps >ol >li:eq(2)\").addClass(\"active\");\n        } else {\n          if (vv.code == -3) {\n            $scope.emailOnly = \"2\";\n          } else {// window.location.href=\"login.html\";\n          }\n        }\n      });\n    };\n\n    $scope.emailHref = function (hrefName) {\n      var emailSpile = hrefName.split(\"@\")[1].split(\".\")[0];\n      window.open(\"http://mail.\" + emailSpile + \".com/\");\n    };\n\n    $scope.passCheck = function (eve) {\n      var val = '' + eve.currentTarget.value + '';\n\n      if (val == '') {\n        $scope.emailOnly = \"pass10\";\n      } else {\n        if (!val.match(/^(?![^a-zA-Z]+$)(?!\\D+$).{6,20}$/)) {\n          $scope.emailOnly = \"pass11\";\n        }\n      } //  if(!val.match(/^(?![^a-zA-Z]+$)(?!\\D+$).{6,20}$/)){\n      //    $scope.emailOnly =\"pass11\";\n      //  }else if(){\n      //    $scope.emailOnly =\"pass10\";\n      // }\n\n    };\n\n    $scope.identCheck = function (eve) {\n      var val = '' + eve.currentTarget.value + '';\n\n      if (val == '') {\n        $scope.emailOnly = \"30001\";\n      }\n    };\n\n    $scope.userCheck = function (eve) {\n      var val = '' + eve.currentTarget.value + '';\n\n      if (val == '') {\n        $scope.emailOnly = \"01012\";\n      }\n    };\n\n    $scope.modeCheck = function () {\n      var val = $scope.formData.emailAddress;\n\n      if (val.match(/^([a-zA-Z0-9_\\.\\-])+\\@(([a-zA-Z0-9\\-])+\\.)+([a-zA-Z0-9]{2,4})+$/)) {\n        $scope.phoneEmail = 1002;\n        $scope.statusCheck = \"email\";\n      } else if (val.match(/^((1[3,5,8][0-9])|(14[5,7])|(17[0,6,7,8]))\\d{8}$/)) {\n        $scope.phoneEmail = 1001;\n        $scope.statusCheck = \"phone\";\n      } else if (val == '') {\n        $scope.emailOnly = 11; // $scope.phoneEmail=\"\";\n\n        $scope.statusCheck = ''; // $(\"#phone\").addClass(\"error-boder\");\n      } else {\n        $scope.emailOnly = '1003';\n        $scope.statusCheck = ''; // $(\"#phone\").addClass(\"error-boder\");\n      }\n    };\n\n    $scope.checkClick = function () {\n      $scope.emailOnly = \"0\";\n\n      if ($(\"#regCheck\").attr(\"checked\") == \"checked\") {\n        $(\"#regCheck\").attr(\"checked\", false);\n      } else {\n        $(\"#regCheck\").attr(\"checked\", true);\n      }\n    };\n\n    $scope.nextStep = function (regId) {\n      if ($scope.formData.emailAddress == \"\") {\n        $scope.emailOnly = 11;\n        return;\n      }\n\n      if ($scope.formData.password == \"\") {\n        $scope.emailOnly = 'pass10';\n        return;\n      }\n\n      if ($scope.identifyName == \"\") {\n        $scope.emailOnly = '30001';\n        return;\n      }\n\n      if (regId == 2) {\n        if ($(\"#regCheck\").attr(\"checked\") == \"checked\") {\n          if ($scope.statusCheck == \"phone\") {\n            //校验手机号码是否存在\n            userUIService.checkMobilePhone($scope.formData.emailAddress, function (data) {\n              if (data.code == 0 && data.data == true) {\n                userIdentifyService.identifySMS($scope.identifyName, function (codeData) {\n                  if (codeData.code == 0 && codeData.data == true) {\n                    $scope.regShow = '20000';\n                    $(\"#barvader\").css(\"width\", \"50%\");\n                    $(\".steps >ol >li:eq(1)\").addClass(\"active\");\n                  } else {\n                    $scope.emailOnly = 2;\n                  }\n                });\n              } else {\n                $scope.emailOnly = 1;\n              }\n            });\n          } else if ($scope.statusCheck == \"email\") {\n            //校验邮箱是否存在\n            userIdentifyService.repeatEmail($scope.formData.emailAddress, function (emailExist) {\n              if (emailExist.code == 0 && emailExist.data == true) {\n                //验证码校验\n                userIdentifyService.identifyNum($scope.identifyName, function (res) {\n                  if (res.code == 0 && res.data == true) {\n                    userIdentifyService.sendEmail($scope.formData.emailAddress, $scope.formData.password, function (address) {\n                      $scope.regShow = regId;\n                    });\n                  } else {\n                    $scope.emailOnly = 2; //生成验证码\n\n                    userIdentifyService.getIdentify(function (e) {\n                      if (e.code == 0) {\n                        $scope.imgCode = e.data;\n                      }\n                    });\n                  }\n                });\n              } else {\n                $scope.emailOnly = 1;\n              }\n            });\n          }\n        } else {\n          $scope.emailOnly = 2099;\n        }\n      }\n    };\n\n    if (urlCode[1] != undefined) {\n      var statusCode = urlCode[1];\n      userIdentifyService.identifyEmail(statusCode.split(\"=\")[1], function (identifyData) {\n        if (identifyData.code == 0) {\n          userIdentifyService.repeatEmail(identifyData.data.emailAddress, function (emailExist) {\n            if (emailExist.code == 0 && emailExist.data == false) {\n              //window.location.href=\"index.html#/index\";\n              $scope.regShow = 6;\n              $(\".steps\").hide();\n            } else {\n              $scope.formData.emailAddress = identifyData.data.emailAddress;\n              $scope.formData.password = identifyData.data.countryRegion;\n              $(\".steps >ol >li:eq(1)\").addClass(\"active\");\n              $(\"#barvader\").css(\"width\", \"50%\");\n              $scope.regShow = '20000';\n            }\n          });\n        } else {\n          $scope.regShow = 5;\n        }\n      });\n    }\n  }]);\n});"],"sourceRoot":"/source/"}