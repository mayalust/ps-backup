{"version":3,"sources":["app-help/js/controllers/message-ctrl.js"],"names":["define","controllers","BootstrapDialog","controller","$scope","$location","userLoginUIService","psMessageService","growl","msgStatus","statusMsg","messageList","readMsgStatus","path","msgGridData","columns","title","data","columnDefs","targets","render","type","full","status","newDateJson","Format","GetDateCategoryStrByLabel","str","tabMessage","aname","initGetDB","statusQuery","queryMessageByUserID","res","code","msgList","mesListQuery","i","message","msgType","push","$broadcast","Event","USERCENTERINIT","queryMessageByStatusAndUserID","$","on","e","target","attr","queryMessage","mesg","allQueryMessage","statusUpdate","messageData","modifyMsgStatus","messageId","orderId","trim","content","split","location","href","css","deleteMsg","option","messageInfo","each","this","is","val","length","show","closable","buttons","label","cssClass","action","dialogRef","deleteMessageUser","success","close","warning","$sce","$routeParams","msgId","detailMessage","TrustAsHtml","post","trustAsHtml","queryMessageByID"],"mappings":"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","file":"app-help/js/controllers/message-ctrl.js","sourcesContent":["define(['controllers/controllers', 'bootstrap-dialog'], function (controllers, BootstrapDialog) {\n  'use strict';\n\n  controllers.controller('AllMessageCtrl', ['$scope', '$location', 'userLoginUIService', 'psMessageService', 'growl', function ($scope, $location, userLoginUIService, psMessageService, growl) {\n    $scope.msgStatus = \"全部消息\";\n    $scope.statusMsg = \"0\";\n    $scope.messageList = \"\";\n    $scope.readMsgStatus = $location.path();\n    $scope.msgGridData = {\n      columns: [{\n        title: '<input type=\"checkbox\" id=\"allClick\" name=\"allClick\" style=\"width: 19px;height: 25px;\" class=\"minimal\" />',\n        data: \"message.messageId\"\n      }, {\n        title: \"消息标题\",\n        data: \"message.title\"\n      }, {\n        title: \"接收时间\",\n        data: \"message.insertTime\"\n      }, {\n        title: \"消息类型\",\n        data: \"message.msgType\"\n      }],\n      columnDefs: [{\n        \"targets\": 0,\n        \"data\": \"message.messageId\",\n        \"render\": function render(data, type, full) {\n          return '<input type=\"checkbox\" id=\"msgClick\" name=\"msgClick\" style=\"width: 19px;height: 25px;\" class=\"minimal msg\"  value=\"' + data + '\" />';\n        }\n      }, {\n        \"targets\": 1,\n        \"data\": \"message.title\",\n        \"render\": function render(data, type, full) {\n          var str = '';\n\n          if (full.status == 0) {\n            str = '<dt><a href class=\"hov-slide\" style=\"color: #444;\" >' + data + '</a></dt>';\n          } else {\n            str = '<span class=\"contacts-list-msg\"><a  href style=\"color: #999;\"   class=\"hov-slide\"  >' + data + '</a></span>';\n          }\n\n          return str;\n        }\n      }, {\n        \"targets\": 2,\n        \"data\": \"message.insertTime\",\n        \"render\": function render(data, type, full) {\n          var str = '';\n\n          if (full.status == 0) {\n            str = '<dt>' + newDateJson(data).Format(GetDateCategoryStrByLabel()) + '</dt>';\n          } else {\n            str = '<span class=\"contacts-list-msg\">' + newDateJson(data).Format(GetDateCategoryStrByLabel()) + '</span>';\n          }\n\n          return str;\n        }\n      }, {\n        \"targets\": 3,\n        \"data\": \"message.msgType\",\n        \"render\": function render(data, type, full) {\n          var str = \"\";\n\n          if (data == 'ticket_message') {\n            str = '工单任务';\n          } else if (data == 'maintenance_message') {\n            str = '维保';\n          } else if (data == 'bulletin_message') {\n            str = '系统公告';\n          } else if (data == 'payment_message') {\n            str = '缴费';\n          } else if (data == 'energyconsume_message') {\n            str = '能耗结构';\n          }\n\n          var str2 = '';\n\n          if (full.status == 0) {\n            str2 = '<dt>' + str + '</dt>';\n          } else {\n            str2 = '<span class=\"contacts-list-msg\">' + str + '</span>';\n          }\n\n          return str2;\n        }\n      }]\n    };\n\n    var initEvent = function initEvent() {\n      $('a[data-toggle=\"tab\"]').on('shown.bs.tab', function (e) {\n        var aname = $(e.target).attr(\"name\");\n        tabMessage(aname);\n      });\n    };\n\n    var tabMessage = function tabMessage(aname) {\n      if (aname == \"all\") {\n        initGetDB();\n      } else if (aname == \"order\") {\n        statusQuery(\"ticket_message\");\n      } else if (aname == \"bulletin\") {\n        statusQuery(\"bulletin_message\");\n      } else if (aname == \"payment\") {\n        statusQuery(\"payment_message\");\n      } else if (aname == \"maintenance\") {\n        statusQuery(\"maintenance_message \");\n      } //$scope.$apply();\n\n    };\n\n    var statusQuery = function statusQuery(status) {\n      if ($location.path() == \"/message\") {\n        psMessageService.queryMessageByUserID(function (res) {\n          if (res.code == 0) {\n            $scope.msgGridData.data = res.data;\n            $scope.messageList = res.data;\n            var msgList = $scope.messageList;\n            var mesListQuery = [];\n\n            for (var i in msgList) {\n              if (msgList[i].message.msgType == status) mesListQuery.push(msgList[i]);\n            }\n\n            $scope.msgGridData.data = mesListQuery;\n            $scope.$broadcast(Event.USERCENTERINIT + \"_msg\", $scope.msgGridData);\n          }\n        });\n      } else if ($location.path() == \"/unread\") {\n        psMessageService.queryMessageByStatusAndUserID(\"0\", function (res) {\n          if (res.code == 0) {\n            $scope.msgGridData.data = res.data;\n            $scope.messageList = res.data;\n            var msgList = $scope.messageList;\n            var mesListQuery = [];\n\n            for (var i in msgList) {\n              if (msgList[i].message.msgType == status) mesListQuery.push(msgList[i]);\n            }\n\n            $scope.msgGridData.data = mesListQuery;\n            $scope.$broadcast(Event.USERCENTERINIT + \"_msg\", $scope.msgGridData);\n          }\n        });\n      } else if ($location.path() == \"/read\") {\n        psMessageService.queryMessageByStatusAndUserID(\"1\", function (res) {\n          if (res.code == 0) {\n            $scope.msgGridData.data = res.data;\n            $scope.messageList = res.data;\n            var msgList = $scope.messageList;\n            var mesListQuery = [];\n\n            for (var i in msgList) {\n              if (msgList[i].message.msgType == status) mesListQuery.push(msgList[i]);\n            }\n\n            $scope.msgGridData.data = mesListQuery;\n            $scope.$broadcast(Event.USERCENTERINIT + \"_msg\", $scope.msgGridData);\n          }\n        });\n      } //psMessageService.queryMessageByTypeAndUserID(status, function (ret) {\n      //\n      //  if (ret.code == 0) {\n      //    $scope.msgGridData.data = ret.data;\n      //    $scope.$broadcast(Event.USERCENTERINIT + \"_msg\", $scope.msgGridData);\n      //  }\n      //});\n\n    };\n\n    initEvent();\n\n    var queryMessage = function queryMessage(mesg) {\n      //查询消息的状态\n      psMessageService.queryMessageByStatusAndUserID(mesg, function (res) {\n        if (res.code == 0) {\n          $scope.msgGridData.data = res.data;\n          $scope.messageList = res.data;\n          $scope.$broadcast(Event.USERCENTERINIT + \"_msg\", $scope.msgGridData);\n        }\n      });\n    };\n\n    var initGetDB = function initGetDB() {\n      if ($location.path() == \"/message\") {\n        $scope.msgStatus = \"全部消息\";\n        $scope.statusMsg = '0';\n        allQueryMessage();\n      } else if ($location.path() == \"/unread\") {\n        $scope.msgStatus = \"未读消息\";\n        $scope.statusMsg = '0';\n        queryMessage(\"0\");\n      } else if ($location.path() == \"/read\") {\n        $scope.msgGridData = {\n          columns: [{\n            title: \"消息标题\",\n            data: \"message.title\"\n          }, {\n            title: \"提交时间\",\n            data: \"message.insertTime\"\n          }, {\n            title: \"消息类型\",\n            data: \"message.msgType\"\n          }],\n          columnDefs: [{\n            \"targets\": 0,\n            \"data\": \"message.title\",\n            \"render\": function render(data, type, full) {\n              var str = '';\n\n              if (full.status == 0) {\n                str = '<dt><a href class=\"hov-slide\" style=\"color: #444;\" >' + data + '</a></dt>';\n              } else {\n                str = '<span class=\"contacts-list-msg\"><a  href style=\"color: #999;\"   class=\"hov-slide\"  >' + data + '</a></span>';\n              }\n\n              return str;\n            }\n          }, {\n            \"targets\": 1,\n            \"data\": \"message.insertTime\",\n            \"render\": function render(data, type, full) {\n              var str = '';\n\n              if (full.status == 0) {\n                str = '<dt>' + newDateJson(data).Format(GetDateCategoryStrByLabel()) + '</dt>';\n              } else {\n                str = '<span class=\"contacts-list-msg\">' + newDateJson(data).Format(GetDateCategoryStrByLabel()) + '</span>';\n              }\n\n              return str;\n            }\n          }, {\n            \"targets\": 2,\n            \"data\": \"message.msgType\",\n            \"render\": function render(data, type, full) {\n              var str = \"\";\n\n              if (data == 'ticket_message') {\n                str = '工单任务';\n              } else if (data == 'maintenance_message') {\n                str = '维保';\n              } else if (data == 'bulletin_message') {\n                str = '系统公告';\n              } else if (data == 'payment_message') {\n                str = '缴费';\n              } else if (data == 'energyconsume_message') {\n                str = '能耗结构';\n              }\n\n              var str2 = '';\n\n              if (full.status == 0) {\n                str2 = '<dt>' + str + '</dt>';\n              } else {\n                str2 = '<span class=\"contacts-list-msg\">' + str + '</span>';\n              }\n\n              return str2;\n            }\n          }]\n        };\n        $scope.msgStatus = \"已读消息\";\n        queryMessage(\"1\");\n        $scope.statusMsg = '1';\n      }\n    };\n\n    var allQueryMessage = function allQueryMessage() {\n      psMessageService.queryMessageByUserID(function (res) {\n        if (res.code == 0) {\n          $scope.msgGridData.data = res.data;\n          $scope.messageList = res.data;\n          $scope.$broadcast(Event.USERCENTERINIT + \"_msg\", $scope.msgGridData);\n        }\n      });\n    };\n\n    $scope.statusUpdate = function (messageData) {\n      psMessageService.modifyMsgStatus([messageData.message.messageId], function (res) {\n        if (res.code == 0) {\n          if (messageData.message.msgType == \"ticket_message\") {\n            var str2 = $.trim(messageData.message.content);\n            var orderId = str2.split(\"任务ID：\")[1];\n            location.href = '../app-oc/index.html#/orderdetail/' + orderId.split(\",\")[0] + '' + $location.path() + '/notdeal';\n          } else if (messageData.message.msgType == \"bulletin_message\") {\n            location.href = '#/messageDetail/' + messageData.message.messageId + '';\n          } else if (messageData.message.msgType == \"payment_message\") {\n            $(\"#info\").css(\"display\", \"none\");\n            $(\"#exp\").css(\"display\", \"block\");\n            location.href = '../app-uc/index.html#/expenses';\n          }\n        }\n      });\n    };\n\n    initGetDB();\n\n    $scope.deleteMsg = function (option) {\n      $scope.messageInfo = [];\n      var messageId = \"\";\n      $(\"input[name='msgClick']\").each(function () {\n        if ($(this).is(':checked')) {\n          messageId += $(this).val() + \",\";\n          $scope.messageInfo.push($(this).val());\n        }\n      });\n\n      if (option == '1') {\n        if ($scope.messageInfo.length > 0) {\n          BootstrapDialog.show({\n            title: '提示',\n            closable: false,\n            message: '您确认要删除选中的' + $scope.messageInfo.length + '条消息吗？',\n            buttons: [{\n              label: '确定',\n              cssClass: 'btn-success',\n              action: function action(dialogRef) {\n                psMessageService.deleteMessageUser($scope.messageInfo, function (res) {\n                  if (res.code == 0) {\n                    growl.success(\"删除消息成功\", {});\n                    initGetDB();\n                  }\n                });\n                dialogRef.close();\n              }\n            }, {\n              label: '取消',\n              action: function action(dialogRef) {\n                dialogRef.close();\n              }\n            }]\n          });\n        } else {\n          growl.warning(\"请选择要删除的消息\", {});\n        }\n      } else if (option == '2') {\n        if ($scope.messageInfo.length > 0) {\n          BootstrapDialog.show({\n            title: '提示',\n            closable: false,\n            message: '您确认要标记选中的' + $scope.messageInfo.length + '条消息为已读吗？',\n            buttons: [{\n              label: '确定',\n              cssClass: 'btn-success',\n              action: function action(dialogRef) {\n                psMessageService.modifyMsgStatus($scope.messageInfo, function (res) {\n                  if (res.code == 0) {\n                    growl.success(\"消息标记已读成功\", {});\n                    tabMessage($(\"#message  .active  a \").attr(\"name\"));\n                  }\n                });\n                dialogRef.close();\n              }\n            }, {\n              label: '取消',\n              action: function action(dialogRef) {\n                dialogRef.close();\n              }\n            }]\n          });\n        } else {\n          growl.warning(\"请选择要标记为已读的消息\", {});\n        }\n      }\n    };\n  }]);\n  controllers.controller('messageDetailCtrl', ['$scope', '$sce', '$routeParams', '$location', 'userLoginUIService', 'psMessageService', 'growl', function ($scope, $sce, $routeParams, $location, userLoginUIService, psMessageService, growl) {\n    var msgId = $routeParams.msgId;\n    $scope.detailMessage = \"\";\n\n    $scope.TrustAsHtml = function (post) {\n      return $sce.trustAsHtml(post);\n    };\n\n    psMessageService.queryMessageByID(msgId, function (res) {\n      if (res.code == 0) {\n        $scope.detailMessage = res.data;\n      }\n    });\n  }]);\n});"],"sourceRoot":"/source/"}