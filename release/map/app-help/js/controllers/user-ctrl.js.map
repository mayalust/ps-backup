{"version":3,"sources":["app-help/js/controllers/user-ctrl.js"],"names":["define","controllers","controller","$scope","$rootScope","Info","userLoginUIService","user","username","password","errorMsg","slide","$watch","newValue","oldValue","errorStatus","loginClick","e","keycode","window","event","keyCode","which","undefined","login","checkClick","$","attr","show","hide","homeClick","open","indexShow","personalShow","redirectHandler","industry","loginTimes","location","href","appData","isAuthenticated","$on","evt","d","staffName","userName","userInfo","result","message","userEnterpriseService","growl","userIdentifyService","modelDefinitionService","resourceUIService","userUIService","userEdit","provinces","districts","citys","loginname","editUser","pro","getSimpleDistricts","returnObj","code","i","data","label","enterprise","province","children","n","j","city","loginName","proChang","editData","findAllIndustry","arr","arr1","newData","length","id","parentModelId","push","belongList","get","info","provinceList","cityList","durationArr","durationList","scaleArr","scaleList","editClick","officePhone","userID","checkLoginName","res","personSave","modifyUser","userData","success","error","newV","oldV","v","editEnterpriseEClick","entArr","enterpriseSize","duration","name","enterpriseID","district","address","website","contact","contactEmail","contactPhone","modifyEnterpriseInfo","passwordEdit","pwdList","emailAddress","newPwd","configPwd","regPwd","imgCode","confirmShow","codeMessage","identifyName","configError","userId","getIdentify","identifyData","blindClick","document","split","logout","initPwd","identifyNum","modifyPassword","initDate","$interval","regShow","confirmPassword","statusShow","emailOnly","safeMsg","phoneEmail","formData","roleID","mobilePhone","countryRegion","business","mail_num","enterpriseManager","interval","urlCode","areaList","onMouseOver","actor","renewal","reload","statusClick","statusId","noEmail","text","sendEmail","time","cancel","phoneCode","statusCheck","disabled","sendSMS","codeData","timeCode","removeAttr","seed","tip","secTip","setTimeout","phoneSumbit","formData1","individualUser","vv","css","addClass","emailHref","hrefName","emailSpile","passCheck","eve","val","currentTarget","value","match","identCheck","userCheck","modeCheck","nextStep","regId","checkMobilePhone","identifySMS","repeatEmail","emailExist","statusCode","identifyEmail","forgetClick","forgetList","verify","verifyEmail","confimPwd","hideValidate","verifySuccess","codeCheck","t","emailSend","sendPasswordSMS","sendEmailPassword","forgetAjax","forgetPassword","forgetStep","forNumber","identifyPasswordSMS","emailCheckPassword","checkName","removeClass"],"mappings":"AAAAA,OAAO,CAAC,2BAA4B,SAAUC,GAC5C,aAGAA,EAAYC,WAAW,WAAY,CAAC,SAAU,aAAc,OAAQ,qBAAsB,SAAUC,EAAQC,EAAYC,EAAMC,GAC5HH,EAAOI,KAAO,CACZC,SAAU,GACVC,SAAU,IAEZN,EAAOO,SAAW,GAClBP,EAAOQ,MAAQ,IACfR,EAAOS,OAAO,gBAAiB,SAAUC,EAAUC,GACjDX,EAAOY,YAAc,IAEvBZ,EAAOS,OAAO,gBAAiB,SAAUC,EAAUC,GACjDX,EAAOY,YAAc,IAGvBZ,EAAOa,WAAa,SAAUC,GAC5B,IAAIC,EAAUC,OAAOC,MAAQH,EAAEI,QAAUJ,EAAEK,MAE3C,GAAe,IAAXJ,GAA4BK,MAAXL,EAAsB,CACzC,GAA4B,IAAxBf,EAAOI,KAAKC,SAGd,OAFAL,EAAOY,YAAc,OACrBZ,EAAOO,SAAW,WAIpB,GAA4B,IAAxBP,EAAOI,KAAKE,SAGd,OAFAN,EAAOY,YAAc,OACrBZ,EAAOO,SAAW,UAIQ,IAAxBP,EAAOI,KAAKC,UAA0C,IAAxBL,EAAOI,KAAKE,SAE5CH,EAAmBkB,MAAMrB,EAAOI,KAAKC,SAAUL,EAAOI,KAAKE,WAI3DN,EAAOO,SAAW,YAClBP,EAAOY,YAAc,KAK3BZ,EAAOsB,WAAa,WACsB,WAApCC,EAAE,eAAeC,KAAK,YACxBD,EAAE,eAAeE,OACjBF,EAAE,cAAcG,OAChBH,EAAE,eAAeC,KAAK,WAAW,KAEjCD,EAAE,eAAeG,OACjBH,EAAE,cAAcE,OAChBF,EAAE,eAAeC,KAAK,WAAW,KAIrCxB,EAAO2B,UAAY,WACjBX,OAAOY,KAAK,8BAGd3B,EAAW4B,WAAY,EACvB5B,EAAW6B,cAAe,EAE1B,IAAIC,EAAkB,WACpB,IAAIC,EAAW7B,EAAmBC,KAAK4B,SAElCA,GAAwB,GAAZA,EAe2B,GAAtC7B,EAAmBC,KAAK6B,WAC1BjB,OAAOkB,SAASC,KAAO,mBAEvBnB,OAAOkB,SAASC,KAAO,iBAjBpBhC,EAAmBC,KAAKgC,QAOe,GAAtCjC,EAAmBC,KAAK6B,WAC1BjB,OAAOkB,SAASC,KAAO,mBAEvBnB,OAAOkB,SAASC,KAAO,iBATiB,GAAtChC,EAAmBC,KAAK6B,WAC1BjB,OAAOkB,SAASC,KAAO,mBAEvBnB,OAAOkB,SAASC,KAAO,aAkB1BhC,EAAmBC,KAAKiC,gBAY3BN,IAXA/B,EAAOsC,IAAI,qBAAsB,SAAUC,EAAKC,GAC1CrC,EAAmBC,KAAKiC,iBAC1BpC,EAAWwC,UAAYtC,EAAmBC,KAAKsC,SAC/C1C,EAAO2C,SAAWxC,EAAmBC,KACrC2B,MAEA/B,EAAOO,SAAWJ,EAAmByC,OAAOC,QAC5C7C,EAAOY,YAAc,QAQ7Bd,EAAYC,WAAW,qBAAsB,CAAC,SAAU,wBAAyB,QAAS,OAAQ,qBAAsB,aAAc,sBAAuB,yBAA0B,oBAAqB,gBAAiB,SAAUC,EAAQ8C,EAAuBC,EAAO7C,EAAMC,EAAoBF,EAAY+C,EAAqBC,EAAwBC,EAAmBC,GACjXnD,EAAOoD,SAAW,GAClBpD,EAAOqD,UAAY,GACnBrD,EAAOsD,UAAY,GACnBtD,EAAOuD,MAAQ,GACfvD,EAAOwD,UAAY,GACnBxD,EAAOyD,SAAW,GAElB,IAAIC,EAAM,WACRR,EAAkBS,mBAAmB,SAAUC,GAC7C,GAAsB,GAAlBA,EAAUC,KAAW,CAGvB,IAAK,IAAIC,KAFT9D,EAAOqD,UAAYO,EAAUG,KAEf/D,EAAOqD,UACnB,GAAIrD,EAAOqD,UAAUS,GAAGE,OAAShE,EAAOoD,SAASa,WAAWC,SAAU,CACpE,GAA2C,OAAvClE,EAAOoD,SAASa,WAAWC,UAA4D,OAAvClE,EAAOoD,SAASa,WAAWC,UAA4D,OAAvClE,EAAOoD,SAASa,WAAWC,UAA4D,OAAvClE,EAAOoD,SAASa,WAAWC,SAAmB,CAChM,IAAIR,EAAM1D,EAAOqD,UAAUS,GAAGK,SAE9B,IAAK,IAAIC,KAAKV,EACRA,EAAIU,GAAGJ,OAAShE,EAAOoD,SAASa,WAAWC,WAC7ClE,EAAOuD,MAAQG,EAAIU,GAAGD,eAI1BnE,EAAOuD,MAAQvD,EAAOqD,UAAUS,GAAGK,SAGrCnE,EAAOsD,UAAY,GAIvB,IAAK,IAAIe,KAAKrE,EAAOuD,MACfvD,EAAOuD,MAAMc,GAAGL,OAAShE,EAAOoD,SAASa,WAAWK,OACtDtE,EAAOsD,UAAYtD,EAAOuD,MAAMc,GAAGF,cAOxChE,EAAmBC,KAAKiC,iBAa3BpC,EAAWwC,UAAYtC,EAAmBC,KAAKsC,SAC/C1C,EAAO2C,SAAWxC,EAAmBC,KACrCJ,EAAOoD,SAAWjD,EAAmBC,KACrCJ,EAAOyD,SAAWtD,EAAmBC,KAAKmE,UAC1Cb,KAhBA1D,EAAOsC,IAAI,qBAAsB,SAAUC,EAAKC,GAC1CrC,EAAmBC,KAAKiC,iBAC1BpC,EAAWwC,UAAYtC,EAAmBC,KAAKsC,SAC/C1C,EAAO2C,SAAWxC,EAAmBC,KACrCJ,EAAOoD,SAAWjD,EAAmBC,KACrCJ,EAAOyD,SAAWtD,EAAmBC,KAAKmE,UAC1Cb,KAEA1C,OAAOkB,SAASC,KAAO,eAW7BnC,EAAOwE,SAAW,WAChBd,KAGF1D,EAAOoD,SAAWjD,EAAmBC,KACrCJ,EAAOyE,SAAW,GAClBxB,EAAuByB,gBAAgB,SAAU1C,GAK/C,IAJA,IAAI2C,EAAM3C,EAAS+B,KACfa,EAAO5C,EAAS+B,KAChBc,EAAU,GAELf,EAAI,EAAGA,EAAIa,EAAIG,OAAQhB,IAC9B,IAAK,IAAIO,EAAI,EAAGA,EAAIO,EAAKE,OAAQT,IAC3BM,EAAIb,GAAGiB,IAAMH,EAAKP,GAAGW,eACvBH,EAAQI,KAAKL,EAAKP,IAKxBrE,EAAOkF,WAAaL,IAEX3E,EAAKiF,IAAI,oBAAqB,SAAUC,GACjDpF,EAAOqF,aAAeD,EAAKE,SAC3BtF,EAAOuF,YAAcH,EAAKI,aAC1BxF,EAAOyF,SAAWL,EAAKM,YAGzB1F,EAAO2F,UAAY,WAKjB3F,EAAOyE,SAAS,YAAiBzE,EAAOoD,SAASwC,YAGjD5F,EAAOyE,SAAS,OAAYzE,EAAOoD,SAASyC,OAC5C7F,EAAOyE,SAAS,SAAczE,EAAOoD,SAASV,SAE9C1C,EAAOyE,SAAS,UAAezE,EAAOoD,SAASmB,eAIL,IAA/BvE,EAAOoD,SAASwC,kBAAkE,IAA7B5F,EAAOoD,SAASmB,WAAgD,SAApBvE,EAAOwD,WAChF,IAA7BxD,EAAOoD,SAASmB,WAAgD,MAA7BvE,EAAOoD,SAASmB,YACjDvE,EAAOyD,UAAYzD,EAAOoD,SAASmB,UACG,GAApCvE,EAAOoD,SAASmB,UAAUO,QAC5B3B,EAAc2C,eAAe9F,EAAOoD,SAASmB,UAAW,SAAUwB,GAChE,GAAgB,GAAZA,EAAIlC,KAAW,CACjB,GAAgB,GAAZkC,EAAIhC,KAEN,YADA/D,EAAOwD,UAAY,SAGnBwC,EAAWhG,EAAOyE,aAM1BuB,EAAWhG,EAAOyE,YAM1B,IAAIuB,EAAa,SAAoBvB,GACnCtB,EAAc8C,WAAWxB,EAAU,SAAUyB,GACtB,GAAjBA,EAASrC,KACXd,EAAMoD,QAAQ,OAAQ,IAEtBpD,EAAMqD,MAAM,OAAQ,OAK1BpG,EAAOS,OAAO,qBAAsB,SAAU4F,EAAMC,EAAMC,GACxDvG,EAAOwD,UAAY,KAGrBxD,EAAOwG,qBAAuB,WAC5B,IAAIC,EAAS,GACbA,EAAO,eAAoBzG,EAAOoD,SAASa,WAAWyC,eACtDD,EAAO,SAAczG,EAAOoD,SAASa,WAAW0C,SAChDF,EAAO,KAAUzG,EAAOoD,SAASa,WAAW2C,KAC5CH,EAAO,aAAkBzG,EAAOoD,SAASyD,aACzCJ,EAAO,SAAczG,EAAOoD,SAASa,WAAWC,SAChDuC,EAAO,KAAUzG,EAAOoD,SAASa,WAAWK,KAC5CmC,EAAO,SAAczG,EAAOoD,SAASa,WAAW6C,SAChDL,EAAO,QAAazG,EAAOoD,SAASa,WAAW8C,QAC/CN,EAAO,QAAazG,EAAOoD,SAASa,WAAW+C,QAC/CP,EAAO,QAAazG,EAAOoD,SAASa,WAAWgD,QAC/CR,EAAO,aAAkBzG,EAAOoD,SAASa,WAAWiD,aAAelH,EAAOoD,SAASa,WAAWiD,aAAe,GAC7GT,EAAO,aAAkBzG,EAAOoD,SAASa,WAAWkD,aAAenH,EAAOoD,SAASa,WAAWkD,aAAe,GAC7GrE,EAAsBsE,qBAAqBX,EAAQ,SAAUP,GACtC,GAAjBA,EAASrC,MACX1D,EAAmBC,KAAK6D,WAAaiC,EAASnC,KAC9ChB,EAAMoD,QAAQ,OAAQ,KAEtBpD,EAAMqD,MAAM,OAAQ,OAK1BnG,EAAW4B,WAAY,EACvB5B,EAAW6B,cAAe,KAG5BhC,EAAYC,WAAW,qBAAsB,CAAC,SAAU,aAAc,qBAAsB,sBAAuB,SAAUC,EAAQC,EAAYE,EAAoB6C,GACnKhD,EAAOqH,aAAelH,EAAmBC,KACzCJ,EAAOsH,QAAU,CACfC,aAAgB,GAChBC,OAAU,GACVC,UAAa,GACbC,OAAU,IAEZ1H,EAAO2H,QAAU,GACjB3H,EAAO4H,YAAc,IACrB5H,EAAO6H,YAAc,GACrB7H,EAAOuH,aAAe,GACtBvH,EAAO8H,aAAe,GACtB9H,EAAO+H,YAAc,GACrB/H,EAAOgI,OAAS,GAChBhI,EAAOsC,IAAI,qBAAsB,SAAUC,EAAKC,GAC1CrC,EAAmBC,KAAKiC,kBAI1BrC,EAAOgI,OAAS7H,EAAmBC,KAAKyF,UAG5C7F,EAAOuH,aAAepH,EAAmBC,KAAKmH,aAE9CvE,EAAoBiF,YAAY,SAAUC,GACf,GAArBA,EAAarE,OACf7D,EAAO2H,QAAUO,EAAanE,QAIlC/D,EAAOmI,WAAa,WAClBnI,EAAO2H,QAAU,KACjB3E,EAAoBiF,YAAY,SAAUC,GACf,GAArBA,EAAarE,OACf7D,EAAO2H,QAAUO,EAAanE,SAKpC/D,EAAOS,OAAO,iBAAkB,SAAUC,EAAUC,GAC9CD,GAAYV,EAAOsH,QAAQE,OAC7BxH,EAAO4H,YAAc,EAErB5H,EAAO4H,YAAc,IAGzB5H,EAAOS,OAAO,eAAgB,SAAUC,EAAUC,GAChDX,EAAO4H,YAAc,IAEvB5H,EAAOS,OAAO,iBAAkB,SAAUC,EAAUC,MAQpDX,EAAOS,OAAO,oBAAqB,SAAUC,EAAUC,GACrDX,EAAO4H,YAAc,IAKJ,YAHFQ,SAASlG,SAASC,KACNkG,MAAM,KAAK,IAGtClI,EAAmBmI,SAGrBtI,EAAOuI,QAAU,WACf,GAA2B,IAAvBvI,EAAOuH,aAAoB,CAC7B,GAAgC,IAA5BvH,EAAOsH,QAAQG,UAEjB,YADAzH,EAAO4H,YAAc,MAIvB,GAA6B,IAAzB5H,EAAOsH,QAAQE,OAEjB,YADAxH,EAAO4H,YAAc,MAIvB,GAA6B,IAAzB5H,EAAOsH,QAAQI,OAEjB,YADA1H,EAAO4H,YAAc,MAIvB,GAA2B,IAAvB5H,EAAO8H,aAET,YADA9H,EAAO4H,YAAc,MAIvB,GAA0B,MAAtB5H,EAAO+H,YACT,OAIF/E,EAAoBwF,YAAYxI,EAAO8H,aAAc,SAAU/B,GAC7C,GAAZA,EAAIlC,MAAyB,GAAZkC,EAAIhC,KAEnB/D,EAAOsH,QAAQI,QAAU1H,EAAOsH,QAAQE,QACrB,IAAjBxH,EAAOgI,QAAiC,MAAjBhI,EAAOgI,SAChChI,EAAOgI,OAAS7H,EAAmBC,KAAKyF,QAG1C1F,EAAmBsI,eAAezI,EAAOgI,OAAQhI,EAAOsH,QAAQG,UAAWzH,EAAOsH,QAAQE,OAAQ,SAAUkB,GAC1G,GAAqB,GAAjBA,EAAS7E,MAA8B,GAAjB6E,EAAS3E,KACjC5D,EAAmBmI,aACd,CAAA,GAAqB,GAAjBI,EAAS3E,KAGlB,OAFA/D,EAAO4H,YAAc,YACrB5H,EAAOmI,aAGPnI,EAAO4H,YAAc,QACrB5H,EAAOmI,aACPnI,EAAO6H,YAAca,EAAS7F,YAIlC7C,EAAO4H,YAAc,EAGvB5H,EAAO4H,YAAc,SAIzB5G,OAAOkB,SAASC,KAAO,iBAK7BrC,EAAYC,WAAW,eAAgB,CAAC,SAAU,aAAc,OAAQ,gBAAiB,yBAA0B,sBAAuB,YAAa,SAAUC,EAAQC,EAAYC,EAAMiD,EAAeF,EAAwBD,EAAqB2F,GACrP3I,EAAO4I,QAAU,IACjB5I,EAAO6I,gBAAkB,GACzB7I,EAAO4H,YAAc,QACrB5H,EAAO8I,WAAa,IACpB9I,EAAO+I,UAAY,IACnB/I,EAAO2H,QAAU,GACjB3H,EAAO8H,aAAe,GACtB9H,EAAOgJ,SAAU,EACjBhJ,EAAOiJ,WAAa,OACpBjJ,EAAOyE,SAAW,GAClBzE,EAAOkJ,SAAW,CAChB3B,aAAgB,GAChBjH,SAAY,GACZ6I,OAAU,IACVC,YAAe,GACf1G,SAAY,GACZ2G,cAAiB,OACjBtC,QAAW,GACX/E,SAAY,GACZsC,KAAQ,KACRJ,SAAY,KACZoF,SAAY,GACZC,SAAY,IAEdvJ,EAAOwJ,kBAAoB,CACzB5C,KAAQ,IAEV5G,EAAOyB,MAAO,EACd,IAuFIgI,EAvFAC,EAAUxH,SAASC,KAAKkG,MAAM,KACvBnI,EAAKiF,IAAI,oBAAqB,SAAUC,GACjDpF,EAAO2J,SAAWvE,EAAKuE,SACvB3J,EAAOqF,aAAeD,EAAKE,WAS7BtC,EAAoBiF,YAAY,SAAUnH,GAC1B,GAAVA,EAAE+C,OACJ7D,EAAO2H,QAAU7G,EAAEiD,QAGvBd,EAAuByB,gBAAgB,SAAU1C,GAK/C,IAJA,IAAI2C,EAAM3C,EAAS+B,KACfa,EAAO5C,EAAS+B,KAChBc,EAAU,GAELf,EAAI,EAAGA,EAAIa,EAAIG,OAAQhB,IAC9B,IAAK,IAAIO,EAAI,EAAGA,EAAIO,EAAKE,OAAQT,IAC3BM,EAAIb,GAAGiB,IAAMH,EAAKP,GAAGW,eACvBH,EAAQI,KAAKL,EAAKP,IAKxBrE,EAAOkF,WAAaL,IAGtB7E,EAAOmI,WAAa,WAElBnF,EAAoBiF,YAAY,SAAUnH,GAC1B,GAAVA,EAAE+C,OACJ7D,EAAO2H,QAAU7G,EAAEiD,SAKzB/D,EAAOS,OAAO,wBAAyB,SAAUC,EAAUC,GACzDX,EAAO+I,UAAY,MAErB/I,EAAOS,OAAO,eAAgB,SAAUC,EAAUC,GAChDX,EAAO+I,UAAY,MAErB/I,EAAOS,OAAO,oBAAqB,SAAUC,EAAUC,GACrDX,EAAO+I,UAAY,MAErB/I,EAAOS,OAAO,oBAAqB,SAAUC,EAAUC,GACrDX,EAAO+I,UAAY,MAErB/I,EAAOS,OAAO,uBAAwB,SAAUC,EAAUC,GACxDX,EAAO+I,UAAY,MAErB/I,EAAOS,OAAO,oBAAqB,SAAUC,EAAUC,GACrDX,EAAO+I,UAAY,MAErB/I,EAAOS,OAAO,kBAAmB,SAAUC,EAAUC,GACnDX,EAAO+I,UAAY,IAEfrI,GAAYV,EAAOkJ,SAAS5I,SAC9BN,EAAO4H,YAAc,EAErB5H,EAAO4H,YAAc,IAIzB5H,EAAO4J,YAAc,SAAUC,EAAO5I,GACpCjB,EAAOyB,MAAO,GAGhBzB,EAAO8J,QAAU,WAEf9I,OAAOkB,SAAS6H,UAGlB/J,EAAOgK,YAAc,SAAUC,GACb,GAAZA,EACFjK,EAAO8I,WAAa,EACC,GAAZmB,IACTjK,EAAO8I,WAAa,IAMxB9I,EAAOkK,QAAU,WACc,UAAzB3I,EAAE,aAAa4I,QACjBnH,EAAoBoH,UAAUpK,EAAOkJ,SAAS3B,aAAcvH,EAAOkJ,SAAS5I,SAAU,SAAUyG,GAC1E,GAAhBA,EAAQlD,MAA6B,GAAhBkD,EAAQhD,OAC/B/D,EAAOqK,KAAO,GACd1B,EAAU2B,SACVb,EAAWd,EAAU,WACnB3I,EAAOqK,OAEY,GAAfrK,EAAOqK,MACT9I,EAAE,aAAa4I,KAAK,UACpBnK,EAAOqK,KAAO,GACd1B,EAAU2B,OAAOb,IAEjBlI,EAAE,aAAa4I,KAAUnK,EAAOqK,KAAO,YAExC,MAGLrK,EAAO4I,QAAU,KAKvB5I,EAAOuK,UAAY,WACmB,IAAhCvK,EAAOkJ,SAAS3B,aAKM,IAAtBvH,EAAOwK,YAKqB,IAA5BxK,EAAOkJ,SAAS5I,SAKYc,MAA5BpB,EAAOkJ,SAAS5I,UAIU,SAA1BiB,EAAE,cAAc4I,SAClB5I,EAAE,cAAcC,KAAK,CACnBiJ,SAAY,aAEdzH,EAAoB0H,QAAQ1K,EAAOkJ,SAAS3B,aAAc,SAAUoD,GAC7C,GAAjBA,EAAS9G,MAA8B,GAAjB8G,EAAS5G,MACjC/D,EAAO4K,SAAW,GAClBjC,EAAU2B,SACVb,EAAWd,EAAU,WACnB3I,EAAO4K,WAEgB,GAAnB5K,EAAO4K,UACTrJ,EAAE,cAAc4I,KAAK,SACrB5I,EAAE,cAAcsJ,WAAW,YAC3B7K,EAAO4K,SAAW,GAClBjC,EAAU2B,OAAOb,IAEjBlI,EAAE,cAAc4I,KAAUnK,EAAO4K,SAAW,YAE7C,MAEkB,OAAjBD,EAAS9G,OACX7D,EAAO+I,UAAY,EACnBxH,EAAE,cAAcsJ,WAAW,gBA/BjC7K,EAAO+I,UAAY,SALnB/I,EAAO+I,UAAY,OALnB/I,EAAO+I,UAAY,IAgDvB,IAAI+B,EAAO,EAEPC,EAAM,WAGG,IAFXD,GAGEvJ,EAAE,QAAQ4I,KAAKW,GACfE,KAEAhK,OAAOkB,SAASC,KAAO,cAIvB6I,EAAS,WACXC,WAAWF,EAAK,MA+MlB,GA3MA/K,EAAOkL,YAAc,WACa,IAA5BlL,EAAOkJ,SAASxG,SAKYtB,MAA5BpB,EAAOkJ,SAASxG,WAIM,SAAtB1C,EAAOwK,aACTxK,EAAOmL,UAAY,CACjB7K,SAAYN,EAAOkJ,SAAS5I,SAC5B8I,YAAepJ,EAAOkJ,SAAS3B,aAC/B7E,SAAY1C,EAAOkJ,SAASxG,SAC5B2G,cAAiB,OACjBtC,QAAW/G,EAAOkJ,SAASnC,QAC3BzC,KAAQ,KACRgF,SAAYtJ,EAAOkJ,SAASI,SAC5BpF,SAAY,MAEdlE,EAAOyE,SAAS,KAAUzE,EAAOkJ,SAASI,SAC1CtJ,EAAOyE,SAAS,QAAazE,EAAOkJ,SAASnC,QAC7C/G,EAAOyE,SAAS,aAAkBzE,EAAOkJ,SAAS3B,eAElDvH,EAAOmL,UAAY,CACjB7K,SAAYN,EAAOkJ,SAAS5I,SAC5BiH,aAAgBvH,EAAOkJ,SAAS3B,aAChC7E,SAAY1C,EAAOkJ,SAASxG,SAC5B2G,cAAiB,OACjBtC,QAAW/G,EAAOkJ,SAASnC,QAC3BzC,KAAQ,KACRgF,SAAYtJ,EAAOkJ,SAASI,SAC5BpF,SAAY,MAEdlE,EAAOyE,SAAS,KAAUzE,EAAOkJ,SAASI,SAC1CtJ,EAAOyE,SAAS,QAAazE,EAAOkJ,SAASnC,QAC7C/G,EAAOyE,SAAS,aAAkBzE,EAAOkJ,SAAS3B,cAGpDpE,EAAciI,eAAepL,EAAOyE,SAAUzE,EAAOmL,UAAW,SAAUE,GACzD,GAAXA,EAAGxH,MACL7D,EAAO4I,QAAU,IAES,SAAtB5I,EAAOwK,aACTxK,EAAOsC,IAAI,qBAAsB,SAAUC,EAAKC,GAC1CrC,mBAAmBC,KAAKiC,iBAC1BpC,EAAWwC,UAAYtC,mBAAmBC,KAAKsC,SAC/C1C,EAAO2C,SAAWxC,mBAAmBC,MAErCY,OAAOkB,SAASC,KAAO,eAQ7B6I,IACAzJ,EAAE,aAAa+J,IAAI,QAAS,QAC5B/J,EAAE,wBAAwBgK,SAAS,YAEnB,GAAZF,EAAGxH,OACL7D,EAAO+I,UAAY,QA7DvB/I,EAAO+I,UAAY,SAoEvB/I,EAAOwL,UAAY,SAAUC,GAC3B,IAAIC,EAAaD,EAASpD,MAAM,KAAK,GAAGA,MAAM,KAAK,GACnDrH,OAAOY,KAAK,eAAiB8J,EAAa,UAG5C1L,EAAO2L,UAAY,SAAUC,GAC3B,IAAIC,EAAM,GAAKD,EAAIE,cAAcC,MAEtB,IAAPF,EACF7L,EAAO+I,UAAY,SAEd8C,EAAIG,MAAM,sCACbhM,EAAO+I,UAAY,WAUzB/I,EAAOiM,WAAa,SAAUL,GAGjB,IAFD,GAAKA,EAAIE,cAAcC,QAG/B/L,EAAO+I,UAAY,UAIvB/I,EAAOkM,UAAY,SAAUN,GAGhB,IAFD,GAAKA,EAAIE,cAAcC,QAG/B/L,EAAO+I,UAAY,UAIvB/I,EAAOmM,UAAY,WACjB,IAAIN,EAAM7L,EAAOkJ,SAAS3B,aAEtBsE,EAAIG,MAAM,oEACZhM,EAAOiJ,WAAa,KACpBjJ,EAAOwK,YAAc,SACZqB,EAAIG,MAAM,qDACnBhM,EAAOiJ,WAAa,KACpBjJ,EAAOwK,YAAc,SAIrBxK,EAAOwK,aAFPxK,EAAO+I,UADS,IAAP8C,EACU,GAIA,OAFE,KAOzB7L,EAAOsB,WAAa,WAClBtB,EAAO+I,UAAY,IAEmB,WAAlCxH,EAAE,aAAaC,KAAK,WACtBD,EAAE,aAAaC,KAAK,WAAW,GAE/BD,EAAE,aAAaC,KAAK,WAAW,IAInCxB,EAAOoM,SAAW,SAAUC,GACU,IAAhCrM,EAAOkJ,SAAS3B,aAKY,IAA5BvH,EAAOkJ,SAAS5I,SAKO,IAAvBN,EAAO8H,aAKE,GAATuE,IACoC,WAAlC9K,EAAE,aAAaC,KAAK,WACI,SAAtBxB,EAAOwK,YAETrH,EAAcmJ,iBAAiBtM,EAAOkJ,SAAS3B,aAAc,SAAUxD,GACpD,GAAbA,EAAKF,MAA0B,GAAbE,EAAKA,KACzBf,EAAoBuJ,YAAYvM,EAAO8H,aAAc,SAAU6C,GACxC,GAAjBA,EAAS9G,MAA8B,GAAjB8G,EAAS5G,MACjC/D,EAAO4I,QAAU,QACjBrH,EAAE,aAAa+J,IAAI,QAAS,OAC5B/J,EAAE,wBAAwBgK,SAAS,WAEnCvL,EAAO+I,UAAY,IAIvB/I,EAAO+I,UAAY,IAGQ,SAAtB/I,EAAOwK,aAEhBxH,EAAoBwJ,YAAYxM,EAAOkJ,SAAS3B,aAAc,SAAUkF,GAC/C,GAAnBA,EAAW5I,MAAgC,GAAnB4I,EAAW1I,KAErCf,EAAoBwF,YAAYxI,EAAO8H,aAAc,SAAU/B,GAC7C,GAAZA,EAAIlC,MAAyB,GAAZkC,EAAIhC,KACvBf,EAAoBoH,UAAUpK,EAAOkJ,SAAS3B,aAAcvH,EAAOkJ,SAAS5I,SAAU,SAAUyG,GAC9F/G,EAAO4I,QAAUyD,KAGnBrM,EAAO+I,UAAY,EAEnB/F,EAAoBiF,YAAY,SAAUnH,GAC1B,GAAVA,EAAE+C,OACJ7D,EAAO2H,QAAU7G,EAAEiD,WAM3B/D,EAAO+I,UAAY,IAKzB/I,EAAO+I,UAAY,MAjDrB/I,EAAO+I,UAAY,QALnB/I,EAAO+I,UAAY,SALnB/I,EAAO+I,UAAY,IAgEL3H,MAAdsI,EAAQ,GAAiB,CAC3B,IAAIgD,EAAahD,EAAQ,GACzB1G,EAAoB2J,cAAcD,EAAWrE,MAAM,KAAK,GAAI,SAAUH,GAC3C,GAArBA,EAAarE,KACfb,EAAoBwJ,YAAYtE,EAAanE,KAAKwD,aAAc,SAAUkF,GACjD,GAAnBA,EAAW5I,MAAgC,GAAnB4I,EAAW1I,MAErC/D,EAAO4I,QAAU,EACjBrH,EAAE,UAAUG,SAEZ1B,EAAOkJ,SAAS3B,aAAeW,EAAanE,KAAKwD,aACjDvH,EAAOkJ,SAAS5I,SAAW4H,EAAanE,KAAKsF,cAC7C9H,EAAE,wBAAwBgK,SAAS,UACnChK,EAAE,aAAa+J,IAAI,QAAS,OAC5BtL,EAAO4I,QAAU,WAIrB5I,EAAO4I,QAAU,QAMzB9I,EAAYC,WAAW,aAAc,CAAC,SAAU,sBAAuB,gBAAiB,YAAa,SAAUC,EAAQgD,EAAqBG,EAAewF,GAyHzJ,IAAIc,EAxHJzJ,EAAO4M,YAAc,IACrB5M,EAAO+I,UAAY,GACnB/I,EAAO6M,WAAa,CAClBtF,aAAgB,GAChBuF,OAAU,GACVC,YAAe,GACfvF,OAAU,GACVwF,UAAa,IAEfhN,EAAOiN,aAAe,GACtBjN,EAAOiJ,WAAa,GACpBjJ,EAAO8M,OAAS,GAChB9M,EAAOwK,YAAc,GACrBxK,EAAOkN,cAAgB,IACvBlN,EAAOS,OAAO,uBAAwB,SAAUC,EAAUC,GACpDD,GAAYV,EAAO6M,WAAWrF,OAChCxH,EAAO+I,UAAY,EAEnB/I,EAAO+I,UAAY,IAGvB/I,EAAOS,OAAO,oBAAqB,SAAUC,EAAUC,GAEnDX,EAAO+I,UADO3H,MAAZV,EACiB,IAEA,IAGvBV,EAAOS,OAAO,oBAAqB,SAAUC,EAAUC,GACrDX,EAAO+I,UAAY,IAErB/I,EAAOS,OAAO,yBAA0B,SAAUC,EAAUC,GAC1DX,EAAO+I,UAAY,IAGrB/F,EAAoBiF,YAAY,SAAUC,GACf,GAArBA,EAAarE,OACf7D,EAAO2H,QAAUO,EAAanE,QAIlC/D,EAAOmN,UAAY,WACjB,IAAItB,EAAM7L,EAAO6M,WAAWC,OAGX,GAFDjB,EAAI/G,OAIlB9B,EAAoBwF,YAAYqD,EAAK,SAAU9F,GAC7B,GAAZA,EAAIlC,MAAyB,GAAZkC,EAAIhC,MACvB/D,EAAO8M,OAAS,UAChB9M,EAAO+I,UAAY,IACnB/I,EAAOkN,cAAgB,MAEvBlN,EAAO+I,UAAY,EACnB/I,EAAO8M,OAAS,QAChB9M,EAAOkN,cAAgB,IACvBlK,EAAoBiF,YAAY,SAAUC,GACf,GAArBA,EAAarE,OACf7D,EAAO2H,QAAUO,EAAanE,YAMtC/D,EAAO+I,UAAY,EACnB/I,EAAOkN,cAAgB,IACvBlN,EAAO8M,OAAS,UAIpB9M,EAAOmM,UAAY,WACjB,IAAIN,EAAM7L,EAAO6M,WAAWtF,aAExBsE,EAAIG,MAAM,mEAEZhJ,EAAoBwJ,YAAYxM,EAAO6M,WAAWtF,aAAc,SAAUkF,GACxEzM,EAAOwK,YAAc,QAEE,GAAnBiC,EAAW5I,MAAgC,GAAnB4I,EAAW1I,KACrC/D,EAAOiJ,WAAa,IAEpBjJ,EAAOiJ,WAAa,KACpBjJ,EAAO+I,UAAY,KAGd8C,EAAIG,MAAM,oDAEnB7I,EAAcmJ,iBAAiBtM,EAAO6M,WAAWtF,aAAc,SAAUxD,GACvE/D,EAAOwK,YAAc,QAEJ,GAAbzG,EAAKF,MAA0B,GAAbE,EAAKA,MACzB/D,EAAO+I,UAAY,EACnB/I,EAAOiJ,WAAa,MAEpBjJ,EAAOiJ,WAAa,KAOxBjJ,EAAOiJ,YADPjJ,EAAOwK,aAFPxK,EAAO+I,UADS,IAAP8C,EACU,GAKA,MAHE,IACD,KAQxB7L,EAAOmI,WAAa,WAElBnI,EAAO2H,QAAU,KACjB3E,EAAoBiF,YAAY,SAAUC,GACf,GAArBA,EAAarE,OACf7D,EAAO2H,QAAUO,EAAanE,SAKpC/D,EAAOoN,EAAI,GAEXpN,EAAOS,OAAO,0BAA2B,SAAUC,EAAUC,GAC3DX,EAAO+I,UAAY,MAGrB/I,EAAOqN,UAAY,WACqB,IAAlCrN,EAAO6M,WAAWtF,aAKI,IAAtBvH,EAAOwK,YAKc,MAArBxK,EAAOiJ,YAA2C,MAArBjJ,EAAOiJ,WAKR,IAA5BjJ,EAAO6M,WAAWC,OAKD,SAAjB9M,EAAO8M,OAKgB,SAAvBvL,EAAE,WAAW4I,SACf5I,EAAE,WAAWC,KAAK,CAChBiJ,SAAY,aAGY,SAAtBzK,EAAOwK,YAETxH,EAAoBsK,gBAAgBtN,EAAO6M,WAAWtF,aAAc,SAAUR,GACxD,GAAhBA,EAAQlD,MAA6B,GAAhBkD,EAAQhD,MAC/B/D,EAAOqK,KAAO,GACd1B,EAAU2B,SACVb,EAAWd,EAAU,WACnB3I,EAAOqK,OAEY,GAAfrK,EAAOqK,MACT9I,EAAE,WAAWsJ,WAAW,YACxBtJ,EAAE,WAAW4I,KAAK,SAClBnK,EAAOqK,KAAO,GACd1B,EAAU2B,OAAOb,IAEjBlI,EAAE,WAAW4I,KAAUnK,EAAOqK,KAAO,eAEtC,MACsB,OAAhBtD,EAAQlD,OACjB7D,EAAO+I,UAAY,OAGQ,SAAtB/I,EAAOwK,aAEhBxH,EAAoBuK,kBAAkBvN,EAAO6M,WAAWtF,aAAc,SAAUR,GAC1D,GAAhBA,EAAQlD,MAA6B,GAAhBkD,EAAQhD,OAC/B/D,EAAOqK,KAAO,GACd1B,EAAU2B,SACVb,EAAWd,EAAU,WACnB3I,EAAOqK,OAEY,GAAfrK,EAAOqK,MACT9I,EAAE,WAAW4I,KAAK,SAClB5I,EAAE,WAAWsJ,WAAW,YACxB7K,EAAOqK,KAAO,GACd1B,EAAU2B,OAAOb,IAEjBlI,EAAE,WAAW4I,KAAUnK,EAAOqK,KAAO,eAEtC,SAhDTrK,EAAO+I,UAAY,IALnB/I,EAAO+I,UAAY,MALnB/I,EAAO+I,UAAY,IALnB/I,EAAO+I,UAAY,MALnB/I,EAAO+I,UAAY,IA4EvB/I,EAAOwN,WAAa,WACc,IAA5BxN,EAAO6M,WAAWrF,OAKUpG,MAA5BpB,EAAO6M,WAAWrF,SAIa,IAA/BxH,EAAO6M,WAAWG,UAKa5L,MAA/BpB,EAAO6M,WAAWG,WAIE,GAApBhN,EAAO+I,YAIP/I,EAAO6M,WAAWrF,QAAUxH,EAAO6M,WAAWG,UAKlDhK,EAAoByK,eAAezN,EAAO6M,WAAWtF,aAAcvH,EAAOiN,aAAcjN,EAAO6M,WAAWrF,OAAQ,SAAUiF,GACnG,GAAnBA,EAAW5I,MAAgC,GAAnB4I,EAAW1I,OACrC/D,EAAO4M,YAAc,IACrBrL,EAAE,aAAa+J,IAAI,QAAS,QAC5B/J,EAAE,wBAAwBgK,SAAS,UACnCP,OATFhL,EAAO+I,UAAY,GAbnB/I,EAAO+I,UAAY,KATnB/I,EAAO+I,UAAY,KAoCvB,IAAI+B,EAAO,EAEPC,EAAM,WAGG,IAFXD,GAGEvJ,EAAE,QAAQ4I,KAAKW,GACfE,KAEAhK,OAAOkB,SAASC,KAAO,cAIvB6I,EAAS,WACXC,WAAWF,EAAK,MAGlB/K,EAAO0N,WAAa,SAAUC,GAC5B,GAAiB,GAAbA,EAAgB,CAClB,GAAsC,IAAlC3N,EAAO6M,WAAWtF,aAEpB,YADAvH,EAAO+I,UAAY,IAIrB,GAA0B,IAAtB/I,EAAOwK,YAET,YADAxK,EAAO+I,UAAY,OAIrB,GAAyB,MAArB/I,EAAOiJ,YAA2C,MAArBjJ,EAAOiJ,WAEtC,YADAjJ,EAAO+I,UAAY,KAIrB,GAAgC,IAA5B/I,EAAO6M,WAAWC,OAEpB,YADA9M,EAAO+I,UAAY,OAIrB,GAAqB,SAAjB/I,EAAO8M,OAET,YADA9M,EAAO+I,UAAY,KAIgB3H,MAAjCpB,EAAO6M,WAAWE,aAA6D,IAAjC/M,EAAO6M,WAAWE,YACxC,SAAtB/M,EAAOwK,YACTxH,EAAoB4K,oBAAoB5N,EAAO6M,WAAWE,YAAa,SAAUpC,GAC1D,GAAjBA,EAAS9G,MACX7D,EAAOiN,aAAetC,EAAS5G,KAC/BxC,EAAE,wBAAwBgK,SAAS,UACnChK,EAAE,aAAa+J,IAAI,QAAS,OAC5BtL,EAAO4M,YAAc,KAErB5M,EAAO+I,UAAY,IAGQ,SAAtB/I,EAAOwK,aAChBxH,EAAoB6K,mBAAmB7N,EAAO6M,WAAWE,YAAa,SAAUe,GACxD,GAAlBA,EAAUjK,MACZ7D,EAAOiN,aAAea,EAAU/J,KAChC/D,EAAO4M,YAAce,EACrBpM,EAAE,wBAAwBgK,SAAS,UACnChK,EAAE,aAAa+J,IAAI,QAAS,OAC5BtL,EAAO4M,YAAc,KAErB5M,EAAO+I,UAAY,IAKzB/I,EAAO+I,UAAY,WAEC,GAAb4E,GACTxN,mBAAmB0N,mBAAmB7N,EAAO6M,WAAWE,YAAa,SAAUe,GACvD,GAAlBA,EAAUjK,MACZ7D,EAAOiN,aAAea,EAAU/J,KAChC/D,EAAO4M,YAAce,EACrBpM,EAAE,qBAAqBwM,YAAY,gBACnCxM,EAAE,2BAA2BgK,SAAS,iBAEtCvL,EAAO+I,UAAY","file":"app-help/js/controllers/user-ctrl.js","sourcesContent":["define(['controllers/controllers'], function (controllers) {\n  'use strict'; //根据接口调用自定义视图获取\n  //用户登录userLoginUIService\n\n  controllers.controller('loginCtr', ['$scope', '$rootScope', 'Info', 'userLoginUIService', function ($scope, $rootScope, Info, userLoginUIService) {\n    $scope.user = {\n      username: \"\",\n      password: \"\"\n    };\n    $scope.errorMsg = \"\";\n    $scope.slide = \"1\";\n    $scope.$watch(\"user.username\", function (newValue, oldValue) {\n      $scope.errorStatus = 0;\n    });\n    $scope.$watch(\"user.password\", function (newValue, oldValue) {\n      $scope.errorStatus = 0;\n    });\n\n    $scope.loginClick = function (e) {\n      var keycode = window.event ? e.keyCode : e.which;\n\n      if (keycode == 13 || keycode == undefined) {\n        if ($scope.user.username == \"\") {\n          $scope.errorStatus = 1;\n          $scope.errorMsg = \"登录名不能为空\";\n          return;\n        }\n\n        if ($scope.user.password == \"\") {\n          $scope.errorStatus = 2;\n          $scope.errorMsg = \"密码不能为空\";\n          return;\n        }\n\n        if ($scope.user.username != \"\" && $scope.user.password != \"\") {\n          // if ($(\"#checkServe\").attr(\"checked\") == \"checked\") {\n          userLoginUIService.login($scope.user.username, $scope.user.password); // } else {\n          //     $scope.errorMsg = \"请勾选《普奥云网站服务协议》\";\n          // }\n        } else {\n          $scope.errorMsg = \"请输入用户名或密码\";\n          $scope.errorStatus = 1;\n        }\n      }\n    };\n\n    $scope.checkClick = function () {\n      if ($(\"#checkServe\").attr(\"checked\") == \"checked\") {\n        $(\"#checkServe\").show();\n        $(\"#checkName\").hide();\n        $(\"#checkServe\").attr(\"checked\", false);\n      } else {\n        $(\"#checkServe\").hide();\n        $(\"#checkName\").show();\n        $(\"#checkServe\").attr(\"checked\", true);\n      }\n    };\n\n    $scope.homeClick = function () {\n      window.open(\"http://www.proudsmart.com\");\n    };\n\n    $rootScope.indexShow = false;\n    $rootScope.personalShow = true;\n\n    var redirectHandler = function redirectHandler() {\n      var industry = userLoginUIService.user.industry;\n\n      if (!industry || industry == 0) {\n        if (!userLoginUIService.user.appData) {\n          if (userLoginUIService.user.loginTimes == 0) {\n            window.location.href = \"../password.html\";\n          } else {\n            window.location.href = \"apps.html\";\n          }\n        } else {\n          if (userLoginUIService.user.loginTimes == 0) {\n            window.location.href = \"../password.html\";\n          } else {\n            window.location.href = \"app/index.html\";\n          }\n        }\n      } else {\n        if (userLoginUIService.user.loginTimes == 0) {\n          window.location.href = \"../password.html\";\n        } else {\n          window.location.href = \"app/index.html\";\n        }\n      }\n    };\n\n    if (!userLoginUIService.user.isAuthenticated) {\n      $scope.$on('loginStatusChanged', function (evt, d) {\n        if (userLoginUIService.user.isAuthenticated) {\n          $rootScope.staffName = userLoginUIService.user.userName;\n          $scope.userInfo = userLoginUIService.user;\n          redirectHandler();\n        } else {\n          $scope.errorMsg = userLoginUIService.result.message;\n          $scope.errorStatus = 1;\n        }\n      });\n    } else {\n      redirectHandler();\n    }\n  }]); //个人中心编辑\n\n  controllers.controller('personalController', ['$scope', 'userEnterpriseService', 'growl', 'Info', 'userLoginUIService', '$rootScope', 'userIdentifyService', 'modelDefinitionService', 'resourceUIService', 'userUIService', function ($scope, userEnterpriseService, growl, Info, userLoginUIService, $rootScope, userIdentifyService, modelDefinitionService, resourceUIService, userUIService) {\n    $scope.userEdit = \"\";\n    $scope.provinces = \"\";\n    $scope.districts = \"\";\n    $scope.citys = \"\";\n    $scope.loginname = \"\";\n    $scope.editUser = '';\n\n    var pro = function pro() {\n      resourceUIService.getSimpleDistricts(function (returnObj) {\n        if (returnObj.code == 0) {\n          $scope.provinces = returnObj.data;\n\n          for (var i in $scope.provinces) {\n            if ($scope.provinces[i].label == $scope.userEdit.enterprise.province) {\n              if ($scope.userEdit.enterprise.province == '北京市' || $scope.userEdit.enterprise.province == '天津市' || $scope.userEdit.enterprise.province == '上海市' || $scope.userEdit.enterprise.province == '重庆市') {\n                var pro = $scope.provinces[i].children;\n\n                for (var n in pro) {\n                  if (pro[n].label == $scope.userEdit.enterprise.province) {\n                    $scope.citys = pro[n].children;\n                  }\n                }\n              } else {\n                $scope.citys = $scope.provinces[i].children;\n              }\n\n              $scope.districts = [];\n            }\n          }\n\n          for (var j in $scope.citys) {\n            if ($scope.citys[j].label == $scope.userEdit.enterprise.city) {\n              $scope.districts = $scope.citys[j].children;\n            }\n          }\n        }\n      });\n    };\n\n    if (!userLoginUIService.user.isAuthenticated) {\n      $scope.$on('loginStatusChanged', function (evt, d) {\n        if (userLoginUIService.user.isAuthenticated) {\n          $rootScope.staffName = userLoginUIService.user.userName;\n          $scope.userInfo = userLoginUIService.user;\n          $scope.userEdit = userLoginUIService.user;\n          $scope.editUser = userLoginUIService.user.loginName;\n          pro();\n        } else {\n          window.location.href = \"login.html\";\n        }\n      });\n    } else {\n      $rootScope.staffName = userLoginUIService.user.userName;\n      $scope.userInfo = userLoginUIService.user;\n      $scope.userEdit = userLoginUIService.user;\n      $scope.editUser = userLoginUIService.user.loginName;\n      pro();\n    }\n\n    $scope.proChang = function () {\n      pro();\n    };\n\n    $scope.userEdit = userLoginUIService.user;\n    $scope.editData = {};\n    modelDefinitionService.findAllIndustry(function (industry) {\n      var arr = industry.data;\n      var arr1 = industry.data;\n      var newData = [];\n\n      for (var i = 0; i < arr.length; i++) {\n        for (var j = 0; j < arr1.length; j++) {\n          if (arr[i].id == arr1[j].parentModelId) {\n            newData.push(arr1[j]);\n          }\n        }\n      }\n\n      $scope.belongList = newData;\n    });\n    var info = Info.get(\"localdb/info.json\", function (info) {\n      $scope.provinceList = info.cityList;\n      $scope.durationArr = info.durationList;\n      $scope.scaleArr = info.scaleList;\n    }); //编辑点击事件\n\n    $scope.editClick = function () {\n      //$scope.editData[\"industry\"] = $scope.userEdit.industry;\n      //$scope.editData[\"city\"] = $scope.userEdit.city;\n      //$scope.editData[\"province\"] = $scope.userEdit.province;\n      //$scope.editData[\"address\"] = $scope.userEdit.address;\n      $scope.editData[\"officePhone\"] = $scope.userEdit.officePhone; //$scope.editData[\"business\"] = $scope.userEdit.business;\n      //$scope.editData[\"website\"] = $scope.userEdit.website;\n\n      $scope.editData[\"userID\"] = $scope.userEdit.userID;\n      $scope.editData[\"userName\"] = $scope.userEdit.userName; //$scope.editData[\"business\"] = $scope.userEdit.business;\n\n      $scope.editData[\"loginName\"] = $scope.userEdit.loginName; // if($scope.userEdit.officePhone!=\"\" || $scope.userEdit.officePhone != null && $scope.userEdit.officePhone == undefined){\n      //     return;\n      // }\n\n      if (typeof $scope.userEdit.officePhone != \"undefined\" && typeof $scope.userEdit.loginName != \"undefined\" && $scope.loginname != \"error\") {\n        if ($scope.userEdit.loginName != '' && $scope.userEdit.loginName != null) {\n          if ($scope.editUser != $scope.userEdit.loginName) {\n            if ($scope.userEdit.loginName.length >= 4) {\n              userUIService.checkLoginName($scope.userEdit.loginName, function (res) {\n                if (res.code == 0) {\n                  if (res.data == false) {\n                    $scope.loginname = 'error';\n                    return;\n                  } else {\n                    personSave($scope.editData);\n                  }\n                }\n              });\n            }\n          } else {\n            personSave($scope.editData);\n          }\n        }\n      }\n    };\n\n    var personSave = function personSave(editData) {\n      userUIService.modifyUser(editData, function (userData) {\n        if (userData.code == 0) {\n          growl.success(\"保存成功\", {});\n        } else {\n          growl.error(\"保存失败\", {});\n        }\n      });\n    };\n\n    $scope.$watch(\"userEdit.loginName\", function (newV, oldV, v) {\n      $scope.loginname = '';\n    }); //企业修改点击事件\n\n    $scope.editEnterpriseEClick = function () {\n      var entArr = {};\n      entArr[\"enterpriseSize\"] = $scope.userEdit.enterprise.enterpriseSize;\n      entArr[\"duration\"] = $scope.userEdit.enterprise.duration;\n      entArr[\"name\"] = $scope.userEdit.enterprise.name;\n      entArr[\"enterpriseID\"] = $scope.userEdit.enterpriseID;\n      entArr[\"province\"] = $scope.userEdit.enterprise.province;\n      entArr[\"city\"] = $scope.userEdit.enterprise.city;\n      entArr[\"district\"] = $scope.userEdit.enterprise.district;\n      entArr[\"address\"] = $scope.userEdit.enterprise.address;\n      entArr[\"website\"] = $scope.userEdit.enterprise.website;\n      entArr[\"contact\"] = $scope.userEdit.enterprise.contact;\n      entArr[\"contactEmail\"] = $scope.userEdit.enterprise.contactEmail ? $scope.userEdit.enterprise.contactEmail : \"\";\n      entArr[\"contactPhone\"] = $scope.userEdit.enterprise.contactPhone ? $scope.userEdit.enterprise.contactPhone : \"\";\n      userEnterpriseService.modifyEnterpriseInfo(entArr, function (userData) {\n        if (userData.code == 0) {\n          userLoginUIService.user.enterprise = userData.data;\n          growl.success(\"保存成功\", {});\n        } else {\n          growl.error(\"保存失败\", {});\n        }\n      });\n    };\n\n    $rootScope.indexShow = false;\n    $rootScope.personalShow = true;\n  }]); //初始化密码\n\n  controllers.controller('passwordController', ['$scope', '$rootScope', 'userLoginUIService', 'userIdentifyService', function ($scope, $rootScope, userLoginUIService, userIdentifyService) {\n    $scope.passwordEdit = userLoginUIService.user;\n    $scope.pwdList = {\n      \"emailAddress\": \"\",\n      \"newPwd\": \"\",\n      \"configPwd\": \"\",\n      \"regPwd\": \"\"\n    };\n    $scope.imgCode = \"\";\n    $scope.confirmShow = \"0\";\n    $scope.codeMessage = \"\";\n    $scope.emailAddress = \"\";\n    $scope.identifyName = \"\";\n    $scope.configError = \"\";\n    $scope.userId = \"\";\n    $scope.$on('loginStatusChanged', function (evt, d) {\n      if (userLoginUIService.user.isAuthenticated) {\n        // $rootScope.staffName = userLoginUIService.user.userName;\n        // $scope.userInfo = userLoginUIService.user;\n        // $scope.emailAddress = userLoginUIService.user.emailAddress;\n        $scope.userId = userLoginUIService.user.userID;\n      }\n    });\n    $scope.emailAddress = userLoginUIService.user.emailAddress; //生成验证码\n\n    userIdentifyService.getIdentify(function (identifyData) {\n      if (identifyData.code == 0) {\n        $scope.imgCode = identifyData.data;\n      }\n    }); //更新验证码\n\n    $scope.blindClick = function () {\n      $scope.imgCode = null;\n      userIdentifyService.getIdentify(function (identifyData) {\n        if (identifyData.code == 0) {\n          $scope.imgCode = identifyData.data;\n        }\n      });\n    };\n\n    $scope.$watch(\"pwdList.regPwd\", function (newValue, oldValue) {\n      if (newValue != $scope.pwdList.newPwd) {\n        $scope.confirmShow = 1;\n      } else {\n        $scope.confirmShow = 0;\n      }\n    });\n    $scope.$watch(\"identifyName\", function (newValue, oldValue) {\n      $scope.confirmShow = 0;\n    });\n    $scope.$watch(\"pwdList.newPwd\", function (newValue, oldValue) {\n      if (newValue != '') {//if (newValue == $scope.pwdList.configPwd) {\n        //  $scope.configError = 2022;\n        //} else {\n        //  $scope.configError = 0;\n        //}\n      }\n    });\n    $scope.$watch(\"pwdList.configPwd\", function (newValue, oldValue) {\n      $scope.confirmShow = 0;\n    });\n    var currentUrl = document.location.href;\n    var currentPage = currentUrl.split(\"/\")[5];\n\n    if (currentPage == \"personal\") {\n      userLoginUIService.logout();\n    }\n\n    $scope.initPwd = function () {\n      if ($scope.emailAddress != \"\") {\n        if ($scope.pwdList.configPwd == \"\") {\n          $scope.confirmShow = 1010;\n          return;\n        }\n\n        if ($scope.pwdList.newPwd == \"\") {\n          $scope.confirmShow = 1011;\n          return;\n        }\n\n        if ($scope.pwdList.regPwd == \"\") {\n          $scope.confirmShow = 1016;\n          return;\n        }\n\n        if ($scope.identifyName == \"\") {\n          $scope.confirmShow = 1017;\n          return;\n        }\n\n        if ($scope.configError == 2022) {\n          return;\n        } //验证码校验\n\n\n        userIdentifyService.identifyNum($scope.identifyName, function (res) {\n          if (res.code == 0 && res.data == true) {\n            // $scope.pwdList.emailAddress=userLoginUIService.user.emailAddress;\n            if ($scope.pwdList.regPwd == $scope.pwdList.newPwd) {\n              if ($scope.userId == \"\" || $scope.userId == null) {\n                $scope.userId = userLoginUIService.user.userID;\n              }\n\n              userLoginUIService.modifyPassword($scope.userId, $scope.pwdList.configPwd, $scope.pwdList.newPwd, function (initDate) {\n                if (initDate.code == 0 && initDate.data == true) {\n                  userLoginUIService.logout();\n                } else if (initDate.data == false) {\n                  $scope.confirmShow = \"2011\";\n                  $scope.blindClick();\n                  return;\n                } else {\n                  $scope.confirmShow = \"10010\";\n                  $scope.blindClick();\n                  $scope.codeMessage = initDate.message; //$scope.codeMessage = '旧密码输入错误';\n                }\n              });\n            } else {\n              $scope.confirmShow = 1;\n            }\n          } else {\n            $scope.confirmShow = 3;\n          }\n        });\n      } else {\n        window.location.href = \"login.html\";\n      }\n    };\n  }]); //用户注册\n\n  controllers.controller('registerCtrl', ['$scope', '$rootScope', 'Info', 'userUIService', 'modelDefinitionService', 'userIdentifyService', '$interval', function ($scope, $rootScope, Info, userUIService, modelDefinitionService, userIdentifyService, $interval) {\n    $scope.regShow = \"1\";\n    $scope.confirmPassword = \"\";\n    $scope.confirmShow = \"false\";\n    $scope.statusShow = \"1\";\n    $scope.emailOnly = \"0\";\n    $scope.imgCode = \"\";\n    $scope.identifyName = \"\";\n    $scope.safeMsg = false;\n    $scope.phoneEmail = \"1001\";\n    $scope.editData = {};\n    $scope.formData = {\n      'emailAddress': '',\n      'password': '',\n      'roleID': '1',\n      'mobilePhone': '',\n      'userName': '',\n      'countryRegion': '中国大陆',\n      'address': '',\n      'industry': '',\n      'city': '北京',\n      'province': '北京',\n      'business': '',\n      'mail_num': ''\n    };\n    $scope.enterpriseManager = {\n      \"name\": \"\"\n    };\n    $scope.show = false;\n    var urlCode = location.href.split(\"?\");\n    var info = Info.get(\"localdb/info.json\", function (info) {\n      $scope.areaList = info.areaList;\n      $scope.provinceList = info.cityList;\n    }); // $scope.$on('loginStatusChanged', function(evt, d) {\n    //     if (userLoginUIService.user.isAuthenticated) {\n    //         $rootScope.staffName = userLoginUIService.user.userName;\n    //         $scope.userInfo = userLoginUIService.user;\n    //     }\n    // });\n    //生成验证码\n\n    userIdentifyService.getIdentify(function (e) {\n      if (e.code == 0) {\n        $scope.imgCode = e.data;\n      }\n    });\n    modelDefinitionService.findAllIndustry(function (industry) {\n      var arr = industry.data;\n      var arr1 = industry.data;\n      var newData = [];\n\n      for (var i = 0; i < arr.length; i++) {\n        for (var j = 0; j < arr1.length; j++) {\n          if (arr[i].id == arr1[j].parentModelId) {\n            newData.push(arr1[j]);\n          }\n        }\n      }\n\n      $scope.belongList = newData;\n    });\n\n    $scope.blindClick = function () {\n      //生成验证码\n      userIdentifyService.getIdentify(function (e) {\n        if (e.code == 0) {\n          $scope.imgCode = e.data;\n        }\n      });\n    };\n\n    $scope.$watch(\"formData.emailAddress\", function (newValue, oldValue) {\n      $scope.emailOnly = \"0\";\n    });\n    $scope.$watch(\"identifyName\", function (newValue, oldValue) {\n      $scope.emailOnly = \"0\";\n    });\n    $scope.$watch(\"formData.industry\", function (newValue, oldValue) {\n      $scope.emailOnly = \"0\";\n    });\n    $scope.$watch(\"formData.password\", function (newValue, oldValue) {\n      $scope.emailOnly = \"0\";\n    });\n    $scope.$watch(\"formData.mobilePhone\", function (newValue, oldValue) {\n      $scope.emailOnly = \"0\";\n    });\n    $scope.$watch(\"formData.userName\", function (newValue, oldValue) {\n      $scope.emailOnly = \"0\";\n    });\n    $scope.$watch(\"confirmPassword\", function (newValue, oldValue) {\n      $scope.emailOnly = \"0\";\n\n      if (newValue != $scope.formData.password) {\n        $scope.confirmShow = 1;\n      } else {\n        $scope.confirmShow = 0;\n      }\n    });\n\n    $scope.onMouseOver = function (actor, event) {\n      $scope.show = true;\n    };\n\n    $scope.renewal = function () {\n      //$scope.regShow=\"1\";\n      window.location.reload(); //刷新当前页面.\n    };\n\n    $scope.statusClick = function (statusId) {\n      if (statusId == 1) {\n        $scope.statusShow = 1;\n      } else if (statusId == 2) {\n        $scope.statusShow = 2;\n      }\n    };\n\n    var interval;\n\n    $scope.noEmail = function () {\n      if ($(\"#emailBtn\").text() == \"重新发送邮件\") {\n        userIdentifyService.sendEmail($scope.formData.emailAddress, $scope.formData.password, function (address) {\n          if (address.code == 0 && address.data == true) {\n            $scope.time = 60;\n            $interval.cancel();\n            interval = $interval(function () {\n              $scope.time--;\n\n              if ($scope.time == 0) {\n                $(\"#emailBtn\").text(\"重新发送邮件\");\n                $scope.time = 60;\n                $interval.cancel(interval);\n              } else {\n                $(\"#emailBtn\").text(\"\" + $scope.time + \"秒后，重新获取\");\n              }\n            }, 1000);\n          }\n\n          $scope.regShow = 2;\n        });\n      }\n    };\n\n    $scope.phoneCode = function () {\n      if ($scope.formData.emailAddress == \"\") {\n        $scope.emailOnly = 11;\n        return;\n      }\n\n      if ($scope.statusCheck == '') {\n        $scope.emailOnly = '1003';\n        return;\n      }\n\n      if ($scope.formData.password == \"\") {\n        $scope.emailOnly = 'pass10';\n        return;\n      }\n\n      if ($scope.formData.password == undefined) {\n        return;\n      }\n\n      if ($(\"#phoneCode\").text() == \"发送验证码\") {\n        $(\"#phoneCode\").attr({\n          \"disabled\": \"disabled\"\n        });\n        userIdentifyService.sendSMS($scope.formData.emailAddress, function (codeData) {\n          if (codeData.code == 0 && codeData.data == true) {\n            $scope.timeCode = 60;\n            $interval.cancel();\n            interval = $interval(function () {\n              $scope.timeCode--;\n\n              if ($scope.timeCode == 0) {\n                $(\"#phoneCode\").text(\"发送验证码\");\n                $(\"#phoneCode\").removeAttr(\"disabled\");\n                $scope.timeCode = 60;\n                $interval.cancel(interval); //$scope.emailSend = false;\n              } else {\n                $(\"#phoneCode\").text(\"\" + $scope.timeCode + \"秒后，重新获取\");\n              }\n            }, 1000);\n          } else {\n            if (codeData.code == 10017) {\n              $scope.emailOnly = 1;\n              $(\"#phoneCode\").removeAttr(\"disabled\");\n            }\n          }\n        });\n      }\n    };\n\n    var seed = 5; //60秒  \n\n    var tip = function tip() {\n      seed--;\n\n      if (seed > 0) {\n        $(\"#sec\").text(seed);\n        secTip();\n      } else {\n        window.location.href = \"index.html\";\n      }\n    };\n\n    var secTip = function secTip() {\n      setTimeout(tip, 1000);\n    }; //注册只支持企业用户注册\n\n\n    $scope.phoneSumbit = function () {\n      if ($scope.formData.userName == \"\") {\n        $scope.emailOnly = \"01012\";\n        return;\n      }\n\n      if ($scope.formData.userName == undefined) {\n        return;\n      }\n\n      if ($scope.statusCheck == \"phone\") {\n        $scope.formData1 = {\n          'password': $scope.formData.password,\n          'mobilePhone': $scope.formData.emailAddress,\n          'userName': $scope.formData.userName,\n          'countryRegion': '中国大陆',\n          'address': $scope.formData.address,\n          'city': '北京',\n          'business': $scope.formData.business,\n          'province': '北京'\n        };\n        $scope.editData[\"name\"] = $scope.formData.business;\n        $scope.editData[\"address\"] = $scope.formData.address;\n        $scope.editData[\"contactPhone\"] = $scope.formData.emailAddress;\n      } else {\n        $scope.formData1 = {\n          'password': $scope.formData.password,\n          'emailAddress': $scope.formData.emailAddress,\n          'userName': $scope.formData.userName,\n          'countryRegion': '中国大陆',\n          'address': $scope.formData.address,\n          'city': '北京',\n          'business': $scope.formData.business,\n          'province': '北京'\n        };\n        $scope.editData[\"name\"] = $scope.formData.business;\n        $scope.editData[\"address\"] = $scope.formData.address;\n        $scope.editData[\"contactEmail\"] = $scope.formData.emailAddress;\n      }\n\n      userUIService.individualUser($scope.editData, $scope.formData1, function (vv) {\n        if (vv.code == 0) {\n          $scope.regShow = \"4\";\n\n          if ($scope.statusCheck == \"phone\") {\n            $scope.$on('loginStatusChanged', function (evt, d) {\n              if (userLoginUIService.user.isAuthenticated) {\n                $rootScope.staffName = userLoginUIService.user.userName;\n                $scope.userInfo = userLoginUIService.user;\n              } else {\n                window.location.href = \"login.html\";\n              }\n            }); // userLoginUIService.login($scope.formData.emailAddress, $scope.formData.password);\n          } // setTimeout(function () {\n          // window.location.href=\"app/index.html\";\n          // }, 5000);\n\n\n          secTip();\n          $(\"#barvader\").css(\"width\", \"100%\");\n          $(\".steps >ol >li:eq(2)\").addClass(\"active\");\n        } else {\n          if (vv.code == -3) {\n            $scope.emailOnly = \"2\";\n          } else {// window.location.href=\"login.html\";\n          }\n        }\n      });\n    };\n\n    $scope.emailHref = function (hrefName) {\n      var emailSpile = hrefName.split(\"@\")[1].split(\".\")[0];\n      window.open(\"http://mail.\" + emailSpile + \".com/\");\n    };\n\n    $scope.passCheck = function (eve) {\n      var val = '' + eve.currentTarget.value + '';\n\n      if (val == '') {\n        $scope.emailOnly = \"pass10\";\n      } else {\n        if (!val.match(/^(?![^a-zA-Z]+$)(?!\\D+$).{6,20}$/)) {\n          $scope.emailOnly = \"pass11\";\n        }\n      } //  if(!val.match(/^(?![^a-zA-Z]+$)(?!\\D+$).{6,20}$/)){\n      //    $scope.emailOnly =\"pass11\";\n      //  }else if(){\n      //    $scope.emailOnly =\"pass10\";\n      // }\n\n    };\n\n    $scope.identCheck = function (eve) {\n      var val = '' + eve.currentTarget.value + '';\n\n      if (val == '') {\n        $scope.emailOnly = \"30001\";\n      }\n    };\n\n    $scope.userCheck = function (eve) {\n      var val = '' + eve.currentTarget.value + '';\n\n      if (val == '') {\n        $scope.emailOnly = \"01012\";\n      }\n    };\n\n    $scope.modeCheck = function () {\n      var val = $scope.formData.emailAddress;\n\n      if (val.match(/^([a-zA-Z0-9_\\.\\-])+\\@(([a-zA-Z0-9\\-])+\\.)+([a-zA-Z0-9]{2,4})+$/)) {\n        $scope.phoneEmail = 1002;\n        $scope.statusCheck = \"email\";\n      } else if (val.match(/^((1[3,5,8][0-9])|(14[5,7])|(17[0,6,7,8]))\\d{8}$/)) {\n        $scope.phoneEmail = 1001;\n        $scope.statusCheck = \"phone\";\n      } else if (val == '') {\n        $scope.emailOnly = 11; // $scope.phoneEmail=\"\";\n\n        $scope.statusCheck = ''; // $(\"#phone\").addClass(\"error-boder\");\n      } else {\n        $scope.emailOnly = '1003';\n        $scope.statusCheck = ''; // $(\"#phone\").addClass(\"error-boder\");\n      }\n    };\n\n    $scope.checkClick = function () {\n      $scope.emailOnly = \"0\";\n\n      if ($(\"#regCheck\").attr(\"checked\") == \"checked\") {\n        $(\"#regCheck\").attr(\"checked\", false);\n      } else {\n        $(\"#regCheck\").attr(\"checked\", true);\n      }\n    };\n\n    $scope.nextStep = function (regId) {\n      if ($scope.formData.emailAddress == \"\") {\n        $scope.emailOnly = 11;\n        return;\n      }\n\n      if ($scope.formData.password == \"\") {\n        $scope.emailOnly = 'pass10';\n        return;\n      }\n\n      if ($scope.identifyName == \"\") {\n        $scope.emailOnly = '30001';\n        return;\n      }\n\n      if (regId == 2) {\n        if ($(\"#regCheck\").attr(\"checked\") == \"checked\") {\n          if ($scope.statusCheck == \"phone\") {\n            //校验手机号码是否存在\n            userUIService.checkMobilePhone($scope.formData.emailAddress, function (data) {\n              if (data.code == 0 && data.data == true) {\n                userIdentifyService.identifySMS($scope.identifyName, function (codeData) {\n                  if (codeData.code == 0 && codeData.data == true) {\n                    $scope.regShow = '20000';\n                    $(\"#barvader\").css(\"width\", \"50%\");\n                    $(\".steps >ol >li:eq(1)\").addClass(\"active\");\n                  } else {\n                    $scope.emailOnly = 2;\n                  }\n                });\n              } else {\n                $scope.emailOnly = 1;\n              }\n            });\n          } else if ($scope.statusCheck == \"email\") {\n            //校验邮箱是否存在\n            userIdentifyService.repeatEmail($scope.formData.emailAddress, function (emailExist) {\n              if (emailExist.code == 0 && emailExist.data == true) {\n                //验证码校验\n                userIdentifyService.identifyNum($scope.identifyName, function (res) {\n                  if (res.code == 0 && res.data == true) {\n                    userIdentifyService.sendEmail($scope.formData.emailAddress, $scope.formData.password, function (address) {\n                      $scope.regShow = regId;\n                    });\n                  } else {\n                    $scope.emailOnly = 2; //生成验证码\n\n                    userIdentifyService.getIdentify(function (e) {\n                      if (e.code == 0) {\n                        $scope.imgCode = e.data;\n                      }\n                    });\n                  }\n                });\n              } else {\n                $scope.emailOnly = 1;\n              }\n            });\n          }\n        } else {\n          $scope.emailOnly = 2099;\n        }\n      }\n    };\n\n    if (urlCode[1] != undefined) {\n      var statusCode = urlCode[1];\n      userIdentifyService.identifyEmail(statusCode.split(\"=\")[1], function (identifyData) {\n        if (identifyData.code == 0) {\n          userIdentifyService.repeatEmail(identifyData.data.emailAddress, function (emailExist) {\n            if (emailExist.code == 0 && emailExist.data == false) {\n              //window.location.href=\"index.html#/index\";\n              $scope.regShow = 6;\n              $(\".steps\").hide();\n            } else {\n              $scope.formData.emailAddress = identifyData.data.emailAddress;\n              $scope.formData.password = identifyData.data.countryRegion;\n              $(\".steps >ol >li:eq(1)\").addClass(\"active\");\n              $(\"#barvader\").css(\"width\", \"50%\");\n              $scope.regShow = '20000';\n            }\n          });\n        } else {\n          $scope.regShow = 5;\n        }\n      });\n    }\n  }]); //忘记密码\n\n  controllers.controller(\"forgetCtrl\", ['$scope', 'userIdentifyService', 'userUIService', '$interval', function ($scope, userIdentifyService, userUIService, $interval) {\n    $scope.forgetClick = \"1\";\n    $scope.emailOnly = \"\";\n    $scope.forgetList = {\n      'emailAddress': '',\n      'verify': '',\n      \"verifyEmail\": '',\n      'newPwd': '',\n      'confimPwd': ''\n    };\n    $scope.hideValidate = \"\";\n    $scope.phoneEmail = \"\";\n    $scope.verify = \"\";\n    $scope.statusCheck = \"\";\n    $scope.verifySuccess = \"0\";\n    $scope.$watch(\"forgetList.confimPwd\", function (newValue, oldValue) {\n      if (newValue != $scope.forgetList.newPwd) {\n        $scope.emailOnly = 4;\n      } else {\n        $scope.emailOnly = 0;\n      }\n    });\n    $scope.$watch(\"forgetList.newPwd\", function (newValue, oldValue) {\n      if (newValue == undefined) {\n        $scope.emailOnly = 333;\n      } else {\n        $scope.emailOnly = 0;\n      }\n    });\n    $scope.$watch(\"forgetList.verify\", function (newValue, oldValue) {\n      $scope.emailOnly = 0;\n    });\n    $scope.$watch(\"forgetList.verifyEmail\", function (newValue, oldValue) {\n      $scope.emailOnly = 0;\n    }); //生成验证码\n\n    userIdentifyService.getIdentify(function (identifyData) {\n      if (identifyData.code == 0) {\n        $scope.imgCode = identifyData.data;\n      }\n    });\n\n    $scope.codeCheck = function () {\n      var val = $scope.forgetList.verify;\n      var valLength = val.length;\n\n      if (valLength == 5) {\n        //验证码校验\n        userIdentifyService.identifyNum(val, function (res) {\n          if (res.code == 0 && res.data == true) {\n            $scope.verify = 'success';\n            $scope.emailOnly = \"0\";\n            $scope.verifySuccess = \"1\";\n          } else {\n            $scope.emailOnly = 2;\n            $scope.verify = \"error\";\n            $scope.verifySuccess = \"0\";\n            userIdentifyService.getIdentify(function (identifyData) {\n              if (identifyData.code == 0) {\n                $scope.imgCode = identifyData.data;\n              }\n            });\n          }\n        });\n      } else {\n        $scope.emailOnly = 2;\n        $scope.verifySuccess = \"0\";\n        $scope.verify = \"error\";\n      }\n    };\n\n    $scope.modeCheck = function () {\n      var val = $scope.forgetList.emailAddress;\n\n      if (val.match(/^([a-zA-Z0-9_\\.\\-])+\\@(([a-zA-Z0-9\\-])+\\.)+([a-zA-Z0-9]{2,4})+$/)) {\n        //校验邮箱是否存在\n        userIdentifyService.repeatEmail($scope.forgetList.emailAddress, function (emailExist) {\n          $scope.statusCheck = \"email\";\n\n          if (emailExist.code == 0 && emailExist.data == false) {\n            $scope.phoneEmail = \"\";\n          } else {\n            $scope.phoneEmail = 1001;\n            $scope.emailOnly = 1;\n          }\n        });\n      } else if (val.match(/^((1[3,5,8][0-9])|(14[5,7])|(17[0,6,7,8]))\\d{8}$/)) {\n        //校验手机号码是否存在\n        userUIService.checkMobilePhone($scope.forgetList.emailAddress, function (data) {\n          $scope.statusCheck = \"phone\";\n\n          if (data.code == 0 && data.data == true) {\n            $scope.emailOnly = 1;\n            $scope.phoneEmail = 1002;\n          } else {\n            $scope.phoneEmail = \"\";\n          }\n        });\n      } else if (val == '') {\n        $scope.emailOnly = 11; // $scope.phoneEmail=\"\";\n\n        $scope.statusCheck = '';\n        $scope.phoneEmail = \"\";\n      } else {\n        $scope.emailOnly = '111';\n        $scope.statusCheck = '';\n        $scope.phoneEmail = \"\";\n      }\n    };\n\n    $scope.blindClick = function () {\n      //生成验证码\n      $scope.imgCode = null;\n      userIdentifyService.getIdentify(function (identifyData) {\n        if (identifyData.code == 0) {\n          $scope.imgCode = identifyData.data;\n        }\n      });\n    };\n\n    $scope.t = 60;\n    var interval;\n    $scope.$watch(\"forgetList.emailAddress\", function (newValue, oldValue) {\n      $scope.emailOnly = \"0\";\n    });\n\n    $scope.emailSend = function () {\n      if ($scope.forgetList.emailAddress == \"\") {\n        $scope.emailOnly = 11;\n        return;\n      }\n\n      if ($scope.statusCheck == '') {\n        $scope.emailOnly = '111';\n        return;\n      }\n\n      if ($scope.phoneEmail == 1002 || $scope.phoneEmail == 1001) {\n        $scope.emailOnly = '1';\n        return;\n      }\n\n      if ($scope.forgetList.verify == \"\") {\n        $scope.emailOnly = '200';\n        return;\n      }\n\n      if ($scope.verify == \"error\") {\n        $scope.emailOnly = '2';\n        return;\n      }\n\n      if ($(\"#charge\").text() == \"获取验证码\") {\n        $(\"#charge\").attr({\n          \"disabled\": \"disabled\"\n        });\n\n        if ($scope.statusCheck == \"phone\") {\n          //手机发重置密码邮件\n          userIdentifyService.sendPasswordSMS($scope.forgetList.emailAddress, function (address) {\n            if (address.code == 0 && address.data == true) {\n              $scope.time = 60;\n              $interval.cancel();\n              interval = $interval(function () {\n                $scope.time--;\n\n                if ($scope.time == 0) {\n                  $(\"#charge\").removeAttr(\"disabled\");\n                  $(\"#charge\").text(\"获取验证码\");\n                  $scope.time = 60;\n                  $interval.cancel(interval); //$scope.emailSend = false;\n                } else {\n                  $(\"#charge\").text(\"\" + $scope.time + \"秒后，重新获取验证码\");\n                }\n              }, 1000);\n            } else if (address.code == 10008) {\n              $scope.emailOnly = \"1\";\n            }\n          });\n        } else if ($scope.statusCheck == \"email\") {\n          //发重置密码邮件\n          userIdentifyService.sendEmailPassword($scope.forgetList.emailAddress, function (address) {\n            if (address.code == 0 && address.data == true) {\n              $scope.time = 60;\n              $interval.cancel();\n              interval = $interval(function () {\n                $scope.time--;\n\n                if ($scope.time == 0) {\n                  $(\"#charge\").text(\"获取验证码\");\n                  $(\"#charge\").removeAttr(\"disabled\");\n                  $scope.time = 60;\n                  $interval.cancel(interval); //$scope.emailSend = false;\n                } else {\n                  $(\"#charge\").text(\"\" + $scope.time + \"秒后，重新获取验证码\");\n                }\n              }, 1000);\n            }\n          });\n        }\n      }\n    }; //runTiming();\n\n\n    $scope.forgetAjax = function () {\n      if ($scope.forgetList.newPwd == \"\") {\n        $scope.emailOnly = 311;\n        return;\n      }\n\n      if ($scope.forgetList.newPwd == undefined) {\n        return;\n      }\n\n      if ($scope.forgetList.confimPwd == \"\") {\n        $scope.emailOnly = 312;\n        return;\n      }\n\n      if ($scope.forgetList.confimPwd == undefined) {\n        return;\n      }\n\n      if ($scope.emailOnly == 4) {\n        return;\n      }\n\n      if ($scope.forgetList.newPwd != $scope.forgetList.confimPwd) {\n        $scope.emailOnly = 4;\n        return;\n      }\n\n      userIdentifyService.forgetPassword($scope.forgetList.emailAddress, $scope.hideValidate, $scope.forgetList.newPwd, function (emailExist) {\n        if (emailExist.code == 0 && emailExist.data == true) {\n          $scope.forgetClick = \"4\";\n          $(\"#barvader\").css(\"width\", \"100%\");\n          $(\".steps >ol >li:eq(2)\").addClass(\"active\");\n          secTip();\n        }\n      });\n    };\n\n    var seed = 5; //60秒  \n\n    var tip = function tip() {\n      seed--;\n\n      if (seed > 0) {\n        $(\"#sec\").text(seed);\n        secTip();\n      } else {\n        window.location.href = \"../#/index\";\n      }\n    };\n\n    var secTip = function secTip() {\n      setTimeout(tip, 1000);\n    };\n\n    $scope.forgetStep = function (forNumber) {\n      if (forNumber == 2) {\n        if ($scope.forgetList.emailAddress == \"\") {\n          $scope.emailOnly = 11;\n          return;\n        }\n\n        if ($scope.statusCheck == '') {\n          $scope.emailOnly = '111';\n          return;\n        }\n\n        if ($scope.phoneEmail == 1002 || $scope.phoneEmail == 1001) {\n          $scope.emailOnly = '1';\n          return;\n        }\n\n        if ($scope.forgetList.verify == \"\") {\n          $scope.emailOnly = '200';\n          return;\n        }\n\n        if ($scope.verify == \"error\") {\n          $scope.emailOnly = '2';\n          return;\n        }\n\n        if ($scope.forgetList.verifyEmail != undefined && $scope.forgetList.verifyEmail != \"\") {\n          if ($scope.statusCheck == 'phone') {\n            userIdentifyService.identifyPasswordSMS($scope.forgetList.verifyEmail, function (codeData) {\n              if (codeData.code == 0) {\n                $scope.hideValidate = codeData.data;\n                $(\".steps >ol >li:eq(1)\").addClass(\"active\");\n                $(\"#barvader\").css(\"width\", \"50%\");\n                $scope.forgetClick = \"2\";\n              } else {\n                $scope.emailOnly = 3;\n              }\n            });\n          } else if ($scope.statusCheck == 'email') {\n            userIdentifyService.emailCheckPassword($scope.forgetList.verifyEmail, function (checkName) {\n              if (checkName.code == 0) {\n                $scope.hideValidate = checkName.data;\n                $scope.forgetClick = forNumber;\n                $(\".steps >ol >li:eq(1)\").addClass(\"active\");\n                $(\"#barvader\").css(\"width\", \"50%\");\n                $scope.forgetClick = \"2\";\n              } else {\n                $scope.emailOnly = 3;\n              }\n            });\n          }\n        } else {\n          $scope.emailOnly = 30001;\n        }\n      } else if (forNumber == 3) {\n        userLoginUIService.emailCheckPassword($scope.forgetList.verifyEmail, function (checkName) {\n          if (checkName.code == 0) {\n            $scope.hideValidate = checkName.data;\n            $scope.forgetClick = forNumber;\n            $(\".mod-sub-nav > li\").removeClass(\"list2-active\");\n            $(\".mod-sub-nav > li:eq(2)\").addClass(\"list3-active\");\n          } else {\n            $scope.emailOnly = 3;\n          }\n        });\n      }\n    };\n  }]);\n});"],"sourceRoot":"/source/"}