{"version":3,"sources":["js/controllers/free-style-ctrl.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","define","controllers","freeStyleCtrl","scope","rootScope","viewFlexService","resourceUIService","timeout","window","Info","freeboardservice","growl","routeParams","freeboardBaseService","userLoginUIService","input","viewId","viewTitle","page","pa","parameter","naviClick","link","param","location","href","encodeURIComponent","JSON","stringify","exportImage","html2canvas","$","taintTest","useCORS","onrendered","canvas","id","image","toDataURL","replace","timestamp","Date","getTime","$a","document","createElement","setAttribute","evObj","createEvent","initMouseEvent","dispatchEvent","setCurrentTab","str","bgColorFn","bgColor","background-color","instance","renderData","dt","$$","runExpression","setting","funRes","code","fnResult","data","system","hasOwnProperty","vt","va_arr","vt_arr","split","parse","length","base","rs","loop","inx","elem","find","element","path","tabLabel","push","label","slice","parseInt","i","navigation","arr","allAvaliableViews","template","modelId","resourceId","concat","getManagedViewsByTypeAndRole","event","getDefaultView","templateDefault","templateExtent","user","roleResList","some","resId","resType","getViewById","model","resource","content","getModelByIds","getResource_back","clone","layout","editData","replaceCiKpi","setMode","renderLayout","getResourceById","getResources","resources","itemchange","error","tabIndex","indexOf","tabs","groups","getViewById_back","message","init","test","get","info","selectEditDataGroup","tab","renderBoard","isAuthenticated","$on","evt","d","controller","$inject"],"mappings":"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","file":"js/controllers/free-style-ctrl.js","sourcesContent":["function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\ndefine(['controllers/controllers', 'Array'], function (controllers) {\n  'use strict';\n\n  controllers.controller('freeStyleCtrl', freeStyleCtrl);\n  freeStyleCtrl.$inject = [\"$scope\", \"$rootScope\", \"viewFlexService\", \"resourceUIService\", \"$timeout\", \"$window\", \"Info\", \"freeboardservice\", 'growl', '$routeParams', 'freeboardBaseService', 'userLoginUIService'];\n\n  function freeStyleCtrl(scope, rootScope, viewFlexService, resourceUIService, timeout, window, Info, freeboardservice, growl, routeParams, freeboardBaseService, userLoginUIService) {\n    var input,\n        viewId,\n        currentView,\n        viewTitle = routeParams.page ? routeParams.page : 'index',\n        pa = routeParams.parameter;\n    viewId = routeParams.viewId;\n\n    scope.naviClick = function (link, param) {\n      window.location.href = \"../app-free-style/index.html#/\" + viewId + \"/\" + link + \"/\" + encodeURIComponent(JSON.stringify(param));\n    };\n\n    scope.exportImage = function () {\n      html2canvas($(\"#export\"), {\n        taintTest: false,\n        // allowTaint: true,\n        useCORS: true,\n        onrendered: function onrendered(canvas) {\n          canvas.id = \"mycanvas\";\n          var image = canvas.toDataURL(\"image/png\").replace(\"image/png\", \"image/octet-stream\");\n          var timestamp = new Date().getTime();\n          var $a = document.createElement('a');\n          $a.setAttribute(\"href\", image);\n          $a.setAttribute(\"download\", timestamp + \".png\");\n          var evObj = document.createEvent('MouseEvents');\n          evObj.initMouseEvent('click', true, true, window, 0, 0, 0, 0, 0, false, false, true, false, 0, null);\n          $a.dispatchEvent(evObj);\n        }\n      });\n    };\n\n    rootScope.setCurrentTab = function (str) {};\n\n    scope.bgColorFn = function (bgColor) {\n      return {\n        \"background-color\": bgColor ? bgColor : \"#eee\"\n      };\n    };\n\n    scope.instance = {};\n\n    var renderData = function renderData(dt) {\n      $$.runExpression(dt.setting, function (funRes) {\n        if (funRes.code == \"0\") {\n          var fnResult = funRes.data;\n\n          if (typeof fnResult == 'function') {\n            scope.setting = fnResult(data, system);\n          } else {\n            scope.setting = fnResult;\n          }\n\n          scope.setting = scope.setting ? scope.setting : {};\n        } else {\n          scope.setting = {};\n        }\n      }); //scope.setting = dt.setting;\n\n      if (dt.hasOwnProperty(\"groups\")) {\n        var vt,\n            vt_arr = viewTitle.split(\"|\"),\n            va_arr;\n\n        if (pa) {\n          va_arr = JSON.parse(pa);\n        } else {\n          va_arr = [];\n        }\n\n        if (vt_arr.length > 0) {\n          vt = vt_arr[vt_arr.length - 1];\n        } else {\n          vt = viewTitle;\n          vt_arr = [viewTitle];\n        }\n\n        var base = '',\n            rs = [];\n\n        var loop = function loop(inx, elem) {\n          var find = dt[\"groups\"].find(function (element) {\n            return elem == element.path;\n          });\n\n          if (find) {\n            base = base == \"\" ? elem : base + \"|\" + elem;\n            var param = va_arr[inx],\n                tabLabel;\n\n            if (_typeof(param) == \"object\" && param != null) {\n              tabLabel = param.tabLabel;\n            }\n\n            rs.push({\n              label: tabLabel ? tabLabel : find.label,\n              link: base,\n              param: va_arr.slice(0, parseInt(inx) + 1)\n            });\n          }\n\n          ;\n        };\n\n        for (var i in vt_arr) {\n          loop(i, vt_arr[i]);\n        }\n\n        ;\n        scope.navigation = rs;\n\n        var getLastElement = function getLastElement(arr) {\n          return arr[arr.length - 1];\n        };\n\n        var parameter = {};\n\n        if (routeParams.parameter) {\n          parameter = getLastElement(JSON.parse(routeParams.parameter));\n        }\n\n        ;\n        rootScope.parameter = parameter;\n\n        if (vt == \"panel\") {\n          var modelId = parameter.modelId;\n          var resourceId = parameter.resourceId;\n          scope.navigation = scope.navigation.concat({\n            label: parameter.tabLabel ? parameter.tabLabel : \"设备仪表板\",\n            link: base + \"|panel\"\n          });\n          var allAvaliableViews, defaultViews, template;\n\n          var getManagedViewsByType_back = function getManagedViewsByType_back(event) {\n            if (event.code == 0) {\n              allAvaliableViews = event.data;\n\n              var getDefaultView_back = function getDefaultView_back(event) {\n                if (event.code == \"0\") {\n                  defaultViews = event.data;\n                  var templateDefault = defaultViews.find(function (elem) {\n                    if (elem.template) {\n                      if (elem.template.resourceId == modelId) {\n                        return true;\n                      } else {\n                        return false;\n                      }\n                    } else {\n                      return false;\n                    }\n                  });\n                  var templateExtent = allAvaliableViews.find(function (elem) {\n                    var viewId = elem.viewId;\n\n                    if (elem.template) {\n                      if (elem.template.resourceId == modelId) {\n                        var findRoleRes = function findRoleRes(elem) {\n                          return elem.resId == viewId && elem.resType == 21;\n                        };\n\n                        var authorized = userLoginUIService.user.roleResList.some(findRoleRes);\n                        return authorized;\n                      } else {\n                        return false;\n                      }\n                    } else {\n                      return false;\n                    }\n                  });\n\n                  if (templateExtent) {\n                    template = templateExtent;\n                  } else if (templateDefault) {\n                    template = templateDefault;\n                  }\n\n                  if (template) {\n                    var getViewById_back = function getViewById_back(event) {\n                      var model, resource, content;\n\n                      if (event.code == \"0\") {\n                        var content = event.data.content;\n\n                        var getModel_back = function getModel_back(event) {\n                          if (event.code == \"0\") {\n                            model = event.data[0];\n                          }\n\n                          var getResource_back = function getResource_back(event) {\n                            if (event.code == \"0\") {\n                              resource = event.data;\n\n                              if (content != null) {\n                                var clone = JSON.parse(content);\n                                var input = {\n                                  layout: clone.data ? clone.data : clone.layout,\n                                  setting: clone.setting\n                                };\n                                delete clone.data;\n                                var editData = new freeboardservice.replaceCiKpi(input, function () {\n                                  timeout(function () {\n                                    scope.instance.setMode(true);\n                                    scope.instance.renderLayout(editData, null, scope);\n                                  });\n                                }, {\n                                  model: model,\n                                  resource: resource\n                                }, clone);\n                              }\n                            }\n                          };\n\n                          if (resourceId) {\n                            resourceUIService.getResourceById(resourceId, getResource_back);\n                          } else {\n                            var getResources_back = function getResources_back(event) {\n                              if (event.code == 0) {\n                                scope.resources = event.data;\n                                /**  **/\n\n                                scope.resource = scope.resources[0];\n\n                                scope.itemchange = function (event) {\n                                  var id = event.id.split(\"number:\")[1];\n                                  var find = scope.resources.find(function (elem) {\n                                    return elem.id == id;\n                                  });\n\n                                  if (find) {\n                                    getResource_back({\n                                      code: 0,\n                                      data: find\n                                    });\n                                  }\n                                };\n\n                                getResource_back({\n                                  code: 0,\n                                  data: scope.resources[0]\n                                });\n                              }\n\n                              ;\n                            };\n\n                            resourceUIService.getResources(getResources_back);\n                          }\n\n                          ;\n                        };\n\n                        resourceUIService.getModelByIds([modelId], getModel_back);\n                      }\n                    };\n\n                    viewFlexService.getViewById(template.viewId, getViewById_back);\n                  } else {\n                    scope.error = \"没有找到相应的设备仪表板视图，点击<a href='#/views/dashboard' style='cursor:pointer; text-decoration: underline;'>Dashboard管理</a>创建设备仪表板\";\n                  }\n                } else {\n                  scope.error = \"视图列表为空，请联系系统管理员\";\n                }\n              };\n\n              viewFlexService.getDefaultView(modelId, getDefaultView_back);\n            } else {\n              scope.error = \"获取视图列表发生错误，请联系系统管理员\";\n            }\n          };\n\n          viewFlexService.getManagedViewsByTypeAndRole('dashboard', getManagedViewsByType_back);\n        } else if (vt == \"json:\") {} else {\n          //var parameter = JSON.parse($routeParams.parameter);\n          var find = dt[\"groups\"].find(function (element) {\n            return vt == element.path;\n          });\n          scope.tabIndex = find ? dt['groups'].indexOf(find) : 0;\n          scope.tabs = dt.groups;\n          input = {\n            layout: dt.groups[scope.tabIndex].layout,\n            setting: dt.setting\n          };\n          var editData = new freeboardservice.replaceCiKpi(input, function () {\n            timeout(function () {\n              scope.instance.setMode(true);\n              scope.instance.renderLayout(editData, null, scope);\n            });\n          }, null, dt, scope);\n        }\n      } else if (dt.hasOwnProperty(\"data\")) {\n        scope.navigation = [{\n          label: '运营首页'\n        }];\n        input = {\n          layout: dt.data,\n          setting: dt.setting\n        };\n        var editData = new freeboardservice.replaceCiKpi(input, function () {\n          timeout(function () {\n            scope.instance.setMode(true);\n            scope.instance.renderLayout(editData, null, scope);\n          });\n        }, null, dt, scope);\n      } else if (dt.hasOwnProperty(\"layout\")) {\n        scope.navigation = [{\n          label: '运营首页'\n        }];\n        input = {\n          layout: dt.layout,\n          setting: dt.setting\n        };\n        var editData = new freeboardservice.replaceCiKpi(input, function () {\n          timeout(function () {\n            scope.instance.setMode(true);\n            scope.instance.renderLayout(editData, null, scope);\n          });\n        }, null, dt, scope);\n      }\n\n      ;\n    };\n\n    var getViewById_back = function getViewById_back(event) {\n      if (event.code == 0 && event.data != null) {\n        var input;\n        var content = event.data.content;\n        var dt = JSON.parse(content);\n        renderData(dt);\n      } else {\n        scope.error = \"此用户无配置首页视图\" + (event.message ? \",\" + event.message : \"\");\n      }\n\n      ;\n    };\n\n    var init = function init() {\n      var numExp = /\\d+/g;\n\n      if (numExp.test(viewId)) {\n        viewFlexService.getViewById(viewId, getViewById_back);\n      } else {\n        var path = \"../localdb/echartTemplate/\" + viewId + \".json\";\n        Info.get(path, function (info) {\n          renderData(info);\n        });\n      }\n\n      ;\n    };\n\n    scope.selectEditDataGroup = function (tab) {\n      scope.tabIndex = tab.id;\n      input = {\n        layout: tab.layout,\n        setting: scope.editData.setting\n      };\n      scope.editData = new freeboardservice.replaceCiKpi(input, function () {\n        timeout(function () {\n          scope.editData.renderBoard(true, true);\n        });\n      });\n    };\n\n    if (!userLoginUIService.user.isAuthenticated) {\n      scope.$on('loginStatusChanged', function (evt, d) {\n        if (userLoginUIService.user.isAuthenticated) {\n          init();\n        }\n      });\n    } else {\n      init();\n    }\n\n    ;\n  }\n});"],"sourceRoot":"/source/"}