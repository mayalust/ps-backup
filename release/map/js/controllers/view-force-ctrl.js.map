{"version":3,"sources":["js/controllers/view-force-ctrl.js"],"names":["define","controllers","BootstrapDialog","initController","$scope","$routeParams","resourceUIService","alertService","SwSocket","Info","console","info","get","selectedforceitem","i","selectedInstances","page","code","ciid","option","title","text","label","subtext","x","y","tooltip","trigger","formatter","toolbox","show","feature","restore","magicType","type","saveAsImage","legend","data","series","name","ribbonType","categories","itemStyle","normal","textStyle","color","nodeStyle","brushType","borderColor","borderWidth","linkStyle","emphasis","useWorker","minRadius","maxRadius","gravity","scaling","roam","nodes","category","value","links","source","target","weight","$broadcast","Event","ECHARTINFOSINIT","getOption"],"mappings":"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","file":"js/controllers/view-force-ctrl.js","sourcesContent":["define(['controllers/controllers', 'bootstrap-dialog'], function (controllers, BootstrapDialog) {\n  'use strict';\n\n  controllers.initController('ViewForceCtrl', ['$scope', '$routeParams', 'resourceUIService', 'alertService', 'SwSocket', 'Info', function ($scope, $routeParams, resourceUIService, alertService, SwSocket, Info) {\n    console.info(\"切换到力导向图\");\n\n    var getOption = function getOption() {\n      var selectedforceitem;\n\n      for (var i in resourceUIService.selectedInstances) {\n        var page = resourceUIService.selectedInstances[i];\n\n        if (page.code == $routeParams.ciid) {\n          selectedforceitem = page;\n        }\n      }\n\n      var option = {\n        title: {\n          text: '设备关系图：' + selectedforceitem.label,\n          subtext: '数据来深度搜索和分享',\n          x: 'right',\n          y: 'bottom'\n        },\n        tooltip: {\n          trigger: 'item',\n          formatter: '{a} : {b}'\n        },\n        toolbox: {\n          show: true,\n          feature: {\n            restore: {\n              show: true\n            },\n            magicType: {\n              show: true,\n              type: ['force', 'chord']\n            },\n            saveAsImage: {\n              show: true\n            }\n          }\n        },\n        legend: {\n          x: 'left',\n          data: ['告警', '事件']\n        },\n        series: [{\n          type: 'force',\n          name: \"设备关系\",\n          ribbonType: false,\n          categories: [{\n            name: '设备'\n          }, {\n            name: '告警'\n          }, {\n            name: '事件'\n          }],\n          itemStyle: {\n            normal: {\n              label: {\n                show: true,\n                textStyle: {\n                  color: '#333'\n                }\n              },\n              nodeStyle: {\n                brushType: 'both',\n                borderColor: 'rgba(255,215,0,0.4)',\n                borderWidth: 1\n              },\n              linkStyle: {\n                type: 'curve'\n              }\n            },\n            emphasis: {\n              label: {\n                show: false // textStyle: null      // 默认使用全局文本样式，详见TEXTSTYLE\n\n              },\n              nodeStyle: {//r: 30\n              },\n              linkStyle: {}\n            }\n          },\n          useWorker: false,\n          minRadius: 15,\n          maxRadius: 25,\n          gravity: 1.1,\n          scaling: 1.1,\n          roam: 'move',\n          nodes: [{\n            category: 0,\n            name: selectedforceitem.label,\n            value: 10,\n            label: selectedforceitem.label\n          }, {\n            category: 1,\n            name: '普通告警',\n            value: 2\n          }, {\n            category: 1,\n            name: '一般告警',\n            value: 3\n          }, {\n            category: 1,\n            name: '严重告警',\n            value: 3\n          }, {\n            category: 1,\n            name: '紧急告警',\n            value: 7\n          }, {\n            category: 2,\n            name: '上线事件',\n            value: 5\n          }, {\n            category: 2,\n            name: '下线事件',\n            value: 8\n          }, {\n            category: 2,\n            name: '维修事件',\n            value: 9\n          }, {\n            category: 2,\n            name: '其他事件1',\n            value: 4\n          }, {\n            category: 2,\n            name: '其他事件2',\n            value: 4\n          }, {\n            category: 2,\n            name: '其他事件3',\n            value: 1\n          }],\n          links: [{\n            source: '普通告警',\n            target: selectedforceitem.label,\n            weight: 1,\n            name: '女儿'\n          }, {\n            source: '一般告警',\n            target: selectedforceitem.label,\n            weight: 2,\n            name: '父亲'\n          }, {\n            source: '严重告警',\n            target: selectedforceitem.label,\n            weight: 1,\n            name: '母亲'\n          }, {\n            source: '紧急告警',\n            target: selectedforceitem.label,\n            weight: 2\n          }, {\n            source: '上线事件',\n            target: selectedforceitem.label,\n            weight: 3,\n            name: '合伙人'\n          }, {\n            source: '下线事件',\n            target: selectedforceitem.label,\n            weight: 1\n          }, {\n            source: '维修事件',\n            target: selectedforceitem.label,\n            weight: 6,\n            name: '竞争对手'\n          }, {\n            source: '其他事件1',\n            target: selectedforceitem.label,\n            weight: 1,\n            name: '爱将'\n          }, {\n            source: '其他事件2',\n            target: selectedforceitem.label,\n            weight: 1\n          }, {\n            source: '其他事件3',\n            target: selectedforceitem.label,\n            weight: 1\n          }, {\n            source: '严重告警',\n            target: '一般告警',\n            weight: 1\n          }, {\n            source: '下线事件',\n            target: '一般告警',\n            weight: 1\n          }, {\n            source: '下线事件',\n            target: '严重告警',\n            weight: 1\n          }, {\n            source: '下线事件',\n            target: '紧急告警',\n            weight: 1\n          }, {\n            source: '下线事件',\n            target: '上线事件',\n            weight: 1\n          }, {\n            source: '维修事件',\n            target: '下线事件',\n            weight: 6\n          }, {\n            source: '维修事件',\n            target: '严重告警',\n            weight: 1\n          }, {\n            source: '其他事件2',\n            target: '下线事件',\n            weight: 1\n          }]\n        }]\n      };\n      $scope.$broadcast(Event.ECHARTINFOSINIT, {\n        \"option\": option\n      });\n    };\n\n    var info = Info.get(\"localdb/info.json\", function (info) {\n      getOption();\n    });\n  }]);\n});"],"sourceRoot":"/source/"}