{"version":3,"sources":["js/controllers/appnav-baogang-ctrl.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","define","controllers","BootstrapDialog","controller","$scope","$state","ngDialog","$location","Info","alertService","userLoginUIService","viewFlexService","unitService","configUIService","resourceUIService","dictionaryService","ticketTaskService","route","timeout","$rootScope","growl","userDomainService","userUIService","userEnterpriseService","q","registerService","psTreeData","psUiRouterHandler","cms","cms2","psConfig","projectUIService","psStore","dialogInstance","error","msg","console","runtime","init","time","Date","criticalCount","orderCount","myOptions","myOptionDic","myDicts","provinces","citys","districts","cityDics","districtDics","alertView","designView","enterpriseType","treeviewIndex","oldTreeviewIndex","loadingShow","currentMenuCode","firstMenuCode","localMenuCode","showMenu","menuitems","getAllUserInfo","getAllDeviceInfo","closeDialog","close","add","checkLoginAccont","userInfo","watch","$watch","n","o","s","path","match","window","location","pathname","exec","openSidebar","$","css","queryEnterpriseRole","returnObj","code","index","hash","split","roles","data","filter","ele","roleID","indexOf","values","roleInfo","find","user","currentRoleID","setRoleValues","log","__loadedTime__","toFixed","tabs","JSON","parse","children","e","$on","event","main_active_index","navToPage","params","then","d","go","apply","$broadcast","parameter","changeRole","usercurrentRoleID","localStorage","setItem","updateRoleValues","navigateTo","loginNames","forEach","arr","account","loginName","sessionStorage","getItem","isShowSelect","get","info","baseConfig","customerConfig","projectConfig","jQuery","extend","kpiIconList","kpiIcon","host","userName","password","getAllKpis","callback","condition","success","rs","next","modelId","map","a","getKpisByModelId","call","this","recursive","queue","item","shift","push","CacheAllData","events","promises","search","concat","loginFun","loginCallback","i","removeItem","href","gotoHomePage","enterprise","logoStatus","gotoAppPage","showMenuFun","logout","clear","onViewLoad","on","eventname","handler","cacheOneByOne","fn","getEnterpriseConfigs","eventHandler","getAllDicts","getAllUnits","getAllDevice","domainTreeQuery","getAllModelDeviceKpiDef","getSimpleDistricts","getAllAttrs","getAllDirectives","getRootDomain","getAllDataTypes","getDefaultKpis","__self","totalLen","length","reduce","b","defer","promise","resolve","len","Math","round","slice","deviceLoader","getAllDeviceInfos","id","externalDevId","dicts","dic","dictCode","items","commit","queryUserByCondition","getAllUserInfoList","userID","hasOwnProperty","province","city","allDataTypes","units","unitDics","unitCode","unitName","unitLoader","rootCi","subReturnObj","attrDef","rootModelsDic","attrs","getDirectivesByModelId","dirDef","directives","getKpiTypeByFilter","newObj","text","label","defaultKpiList","300","301","302","getModelsByCondition","model","kpiDef","kpiDic","unit","unitLabel","range","test","rangeObj","rangeAry","Array","min","max","Object","modelLoader","domainsArr","domains","domainListTree","getResourceById","tc","domainPath","getDomainsByFilter","domainListDic","domainsLoader","getConfigsByGroupName","value","title","html","shortcut","attr","getTime","initMenus","menusFilter","functionCode","charAt","publicTableSearch","tabelname","name","evt","isAuthenticated","lastLoginTime","newDateJson","Format","GetDateCategoryStrByLabel","cacheAllData","FileUploader","fileMaxSize","fileFormat","queueLimit","uploader","url","serviceOrigin","withCredentials","removeAfterUpload","fileBelongDic","filters","options","nameAry","type","warning","size","onWhenAddingFileFailed","onAfterAddingFile","fileItem","removeFromQueue","onAfterAddingAll","addedFileItems","fileBelongId","onBeforeUploadItem","formData","onProgressItem","progress","onProgressAll","onSuccessItem","response","status","headers","onErrorItem","onCancelItem","onCompleteItem","state","message","onCompleteAll","uplaodHandler","uploadAll","scope","clearHandler","clearQueue"],"mappings":"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","file":"js/controllers/appnav-baogang-ctrl.js","sourcesContent":["function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\ndefine([\"controllers/controllers\", \"bootstrap-dialog\"], function (controllers, BootstrapDialog) {\n  \"use strict\";\n\n  controllers.controller(\"AppNavCtrl\", [\"$scope\", \"$state\", \"ngDialog\", \"$location\", \"Info\", \"alertService\", \"userLoginUIService\", \"viewFlexService\", \"unitService\", \"configUIService\", \"resourceUIService\", \"dictionaryService\", \"ticketTaskService\", \"$route\", \"$timeout\", \"$rootScope\", \"growl\", \"userDomainService\", \"userUIService\", \"userEnterpriseService\", \"$q\", \"$registerService\", \"psTreeData\", \"psUiRouterHandler\", \"commonMethodService\", \"commonMethodService2\", \"psConfig\", \"projectUIService\", \"psStore\", function ($scope, $state, ngDialog, $location, Info, alertService, userLoginUIService, viewFlexService, unitService, configUIService, resourceUIService, dictionaryService, ticketTaskService, route, timeout, $rootScope, growl, userDomainService, userUIService, userEnterpriseService, q, registerService, psTreeData, psUiRouterHandler, cms, cms2, psConfig, projectUIService, psStore) {\n    growl.error = function (msg) {\n      console.error(msg);\n    };\n\n    var dialogInstance; // 弹出框实例\n\n    var localmodel = false; // 本地测试模式\n\n    var menuDisplayAlertCount = false; //菜单是否显示告警数量\n\n    runtime.init();\n    var target = new cms();\n    var time = new Date();\n    $scope.criticalCount = 0; // 菜单栏严重告警个数\n\n    $scope.orderCount = 0; // 待处理工单\n\n    $scope.myOptions; // 单位对象\n\n    $scope.myOptionDic; //单位字典\n\n    $scope.myDicts; // 配置项字典\n\n    $scope.provinces; // 省级区域\n\n    $scope.citys; // 市级区域\n\n    $scope.districts; // 县级区域\n\n    $scope.cityDics; // 市级区域\n\n    $scope.districtDics; // 县级区域\n    //    $scope.powers = {}; // 权限列表\n\n    $scope.alertView = []; //告警视图集合\n\n    $scope.designView = []; //性能视图集合\n\n    $scope.enterpriseType = 0; // 企业类型\n\n    $scope.treeviewIndex = \"\";\n    $scope.oldTreeviewIndex = \"\";\n    $scope.loadingShow = false; //true 显示loading false 隐藏\n\n    $scope.currentMenuCode = null; //当前的菜单编码\n\n    $scope.firstMenuCode = null; //第一层的菜单编码\n\n    $scope.localMenuCode = \"F01\"; //判断使用哪一个服务中心，用来替代localIndex\n\n    $scope.showMenu = false;\n    $scope.menuitems = {};\n    $scope.getAllUserInfo; //缓存用户信息\n\n    $scope.getAllDeviceInfo; //缓存设备信息\n    // 路由跳转成功后触发\n    //弹出框的关闭事件\n\n    $scope.closeDialog = function () {\n      ngDialog.close();\n    };\n\n    psStore.add(\"getAllDicts\");\n    /**\n     * 判断未登录后如何处理\n     * localmodel＝true 本地测试使用\n     */\n\n    function extend(a, b) {\n      for (var i in b) {\n        a[i] = b[i];\n      }\n\n      return a;\n    }\n\n    var showLogin = function showLogin() {\n      if (!localmodel) {\n        return;\n      }\n\n      dialogInstance = BootstrapDialog.show({\n        title: \"欢迎来到普奥的世界\",\n        closable: false,\n        //size:BootstrapDialog.SIZE_WIDE,\n        message: function message(dialog) {\n          var $message = $(\"<div></div>\");\n          var pageToLoad = dialog.getData(\"pageToLoad\");\n          $message.load(pageToLoad);\n          return $message;\n        },\n        data: {\n          pageToLoad: \"partials/login.html\"\n        },\n        buttons: [{\n          label: \"登录\",\n          cssClass: \"btn-success\",\n          action: function action(dialogRef) {\n            var userInput = document.getElementById(\"username\");\n            var psdInput = document.getElementById(\"password\");\n            userLoginUIService.login(userInput.value, psdInput.value);\n          }\n        }, {\n          label: \"退出\",\n          action: function action(dialogRef) {\n            dialogRef.close();\n            location.href = \"../index.html\";\n          }\n        }]\n      });\n    };\n    /**\n     * 获得基础配置\n     */\n\n\n    Info.get(\"../localdb/info.json\", function (info) {\n      if ($scope.baseConfig) {\n        delete info.customerConfig;\n        delete info.projectConfig;\n        $scope.baseConfig = jQuery.extend(true, $scope.baseConfig, info);\n      } else {\n        $scope.baseConfig = info;\n      }\n    });\n    /**\n     * 获得KPI的图片配置\n     */\n\n    Info.get(\"../localdb/icon.json\", function (info) {\n      $scope.kpiIconList = info.kpiIcon;\n    });\n    /**\n     * 切换角色的登陆状态\n     * 韩星 2018.01.08\n     */\n\n    function checkLoginAccont(userInfo) {\n      /**\n       * 1 该用户有几个角色\n       * 2 每个角色切换视图\n       */\n      function getCurrentLocation() {\n        var path = window.location.pathname,\n            match = /\\/(app\\-[\\w-]+)\\//.exec(path);\n        return match ? match[1] : null;\n      }\n\n      function getMainActiveIndexFromHash() {\n        var hash = window.location.hash,\n            arr = hash.split(\"/\");\n        return arr[4] - 0;\n      }\n\n      var watch = $scope.$watch(\"baseConfig\", function (n, o, s) {\n        if (_typeof(n) === \"object\") {\n          var location = getCurrentLocation();\n\n          if (location === \"app-sc\" && !n.openSidebar) {\n            $(\".sidebar-toggle\").css(\"display\", \"none\");\n            $(\".main-sidebar\").css(\"display\", \"none\");\n            $(\".sidebar-mini.sidebar-collapse .content-wrapper\").css(\"cssText\", \"margin-left: 0px!important\");\n          }\n\n          watch();\n        }\n      });\n      userEnterpriseService.queryEnterpriseRole(function (returnObj) {\n        if (returnObj.code == 0) {\n          $scope.index = getMainActiveIndexFromHash();\n          $scope.roles = returnObj.data ? returnObj.data.filter(function (ele) {\n            if (ele.roleID == \"100\") {\n              return false;\n            }\n\n            if (userInfo.roleID.indexOf(ele.roleID) == -1) {\n              return false;\n            }\n\n            return ele.values;\n          }) : [];\n          $scope.roleInfo = $scope.roles.find(function (n) {\n            return n.roleID == userLoginUIService.user.currentRoleID;\n          }) || $scope.roles[0];\n          psConfig.setRoleValues($scope.roleInfo.values);\n\n          try {\n            console.log(\"render Tabs\", ((new Date() - window.__loadedTime__) / 1000).toFixed(3) + \"s\");\n            $rootScope.tabs = JSON.parse($scope.roleInfo.values).children;\n          } catch (e) {\n            $rootScope.tabs = [];\n            console.error(e);\n            return;\n          }\n        }\n      });\n      $rootScope.$on(\"main_active_index\", function (event, index) {\n        $scope.index = index;\n        $rootScope.main_active_index = index;\n      });\n\n      $scope.navToPage = function (params, index) {\n        $rootScope.main_active_index = index;\n        $scope.index = params.index;\n        psUiRouterHandler(params).then(function (d) {\n          $state.go.apply($state, d);\n        });\n      };\n\n      $scope.$on(\"PS_MENU_BUTTON_CLICKED\", function (e, data) {\n        //console.log(e, data);\n        $scope.$broadcast(\"PS_MENU_BUTTON_CLICKED_DONE\", data);\n      });\n      $scope.$on(\"PS_MENU_LIST_ITEM_CLICKED\", function (e, data) {\n        psUiRouterHandler(data.parameter).then(function (d) {\n          $state.go.apply($state, d);\n        });\n      }); //PS_MENU_LIST_ITEM_CLICKED\n\n      $scope.changeRole = function (e) {\n        userLoginUIService.user.usercurrentRoleID = e.roleID + \"\";\n        userLoginUIService.user.currentRoleID = e.roleID;\n        localStorage.setItem(\"roleId\", e.roleID);\n        psConfig.updateRoleValues(e.values).then(function (values) {\n          var default_tab = values.children[0];\n          $rootScope.tabs = values.children;\n          cms2.navigateTo(0);\n        });\n      };\n\n      $scope.loginNames.forEach(function (ele, index, arr) {\n        if (ele.account == userInfo.loginName) {\n          $scope.loginName = $scope.loginNames[index];\n        }\n      }); // 缓存用户\n\n      if (userInfo.loginName == \"baowu_admin\" || userInfo.loginName == \"013346\" || userInfo.loginName == \"045400\" || userInfo.loginName == \"171171\" || userInfo.loginName == \"013346\") {\n        sessionStorage.setItem(\"loginNames\", userInfo);\n      } // 判断该不该显示选择框\n\n\n      if (sessionStorage.getItem(\"loginNames\")) {\n        $scope.isShowSelect = true;\n      } else {\n        $scope.isShowSelect = false;\n      }\n    }\n\n    var loginNames = [{\n      userName: \"决策者虚拟工作台\",\n      account: \"baowu_admin\",\n      password: \"abc123\"\n    }, {\n      userName: \"报警管理虚拟工作台  \",\n      account: \"baowu_bj\",\n      password: \"abc123\"\n    }, {\n      userName: \"诊断管理虚拟工作台   \",\n      account: \"baowu_fx\",\n      password: \"abc123\"\n    }, {\n      userName: \"协同管理虚拟工作台   \",\n      account: \"baowu_xt\",\n      password: \"abc123\"\n    }, {\n      userName: \"审核管理虚拟工作台   \",\n      account: \"baowu_sh\",\n      password: \"abc123\"\n    }, {\n      userName: \"点检管理虚拟工作台   \",\n      account: \"baowu_dj\",\n      password: \"abc123\"\n    }, {\n      userName: \"产线管理虚拟工作台   \",\n      account: \"baowu_cx\",\n      password: \"abc123\"\n    }, {\n      userName: \"检修管理虚拟工作台   \",\n      account: \"baowu_jx\",\n      password: \"abc123\"\n    }, {\n      userName: \"孟坤荫\",\n      //  精密检测工程师\n      account: \"170628\",\n      password: \"abc123\"\n    }, {\n      userName: \"乐海滨\",\n      //产线工程师\n      account: \"041048\",\n      password: \"abc123\"\n    }, {\n      userName: \"沈政\",\n      //产线工程师\n      account: \"171211\",\n      password: \"abc123\"\n    }, {\n      userName: \"宋明中\",\n      //总包诊断工程师\n      account: \"080231\",\n      password: \"abc123\"\n    }, {\n      userName: \"陈黎敏\",\n      // 总包产线诊断\n      account: \"190625\",\n      password: \"abc123\"\n    }, {\n      userName: \"沈嘉麟\",\n      //产线工程师\n      account: \"170373\",\n      password: \"abc123\"\n    }, {\n      userName: \"廖勇\",\n      // 2050产线决策\n      account: \"190712\",\n      password: \"abc123\"\n    }, {\n      userName: \"陈红琳\",\n      //'报警管理员',\n      account: \"170307\",\n      password: \"abc123\"\n    }, {\n      userName: \"张瑞菊\",\n      // 辊道备修工程师\n      account: \"170147\",\n      password: \"abc123\"\n    }, {\n      userName: \"张骏骋\",\n      // 辊道备修工程师\n      account: \"174079\",\n      password: \"abc123\"\n    }, {\n      userName: \"腾威\",\n      //辊道备修质量工程师\n      account: \"171352\",\n      password: \"abc123\"\n    }, {\n      userName: \"张君\",\n      //访客工作台\n      account: \"170381\",\n      password: \"abc123\"\n    }, {\n      userName: \"陈弘\",\n      //卷筒工作台\n      account: \"171163\",\n      password: \"abc123\"\n    }, {\n      userName: \"审核专家\",\n      //审核专家\n      account: \"baowu_shzj\",\n      password: \"abc123\"\n    }, {\n      userName: \"宋小佩\",\n      //电厂脱硫系统\n      account: \"190494\",\n      password: \"abc123\"\n    }, {\n      userName: \"沈亮\",\n      // 电厂脱硫产线工程师\n      account: \"190426\",\n      password: \"abc123\"\n    }, {\n      userName: \"炼铁厂(产内)\",\n      // 电厂脱硫产线工程师\n      account: \"baowu_lt\",\n      password: \"abc123\"\n    }, {\n      userName: \"万欣(测试新框架)\",\n      // 电厂脱硫产线工程师\n      account: \"170616\",\n      password: \"abc123\"\n    }, {\n      userName: \"智能诊断工程师\",\n      // 电厂脱硫产线工程师\n      account: \"190747\",\n      password: \"abc123\"\n    }, {\n      userName: \"葛申剑\",\n      //产线工程师\n      account: \"190747\",\n      password: \"abc123\"\n    }, {\n      userName: \"经营服务人员\",\n      // 备修流程经营服务人员\n      account: \"baowu_jyfw\",\n      password: \"abc123\"\n    }, {\n      userName: \"工艺工程师\",\n      // 备修流程工艺工程师\n      account: \"baowu_gygc\",\n      password: \"abc123\"\n    }, {\n      userName: \"作业实施人员\",\n      // 备修流程作业实施人员\n      account: \"baowu_zyss\",\n      password: \"abc123\"\n    }, {\n      userName: \"质量工程师\",\n      // 备修流程质量工程师\n      account: \"baowu_zlgc\",\n      password: \"abc123\"\n    }],\n        // 本地用户显示\n    loginNamesLocal = [{\n      userName: \"汤霄炯\",\n      // 电厂脱硫产线工程师\n      account: \"190520\",\n      password: \"abc123\"\n    }, {\n      userName: \"环保管理员\",\n      // 电厂脱硫产线工程师\n      account: \"baowu_huanbao\",\n      password: \"abc123\"\n    }, {\n      userName: \"废水\",\n      // 能环部废水\n      account: \"baowu_fs\",\n      password: \"abc123\"\n    }, {\n      userName: \"郑建刚\",\n      // 能环部废水\n      account: \"048428\",\n      password: \"abc123\"\n    }],\n        isLocal = function isLocal() {\n      var host = window.location.host;\n      return host && host.search(\"localhost\") != -1 && host.search(\"127.0.0.1\");\n    };\n\n    $scope.loginNames = isLocal() ? loginNames.concat(loginNamesLocal) : loginNames;\n\n    $scope.loginFun = function (e) {\n      userLoginUIService.loginCallback(e.account, e.password, function (userInfo) {\n        if (userInfo.code == 0) {\n          // 清除所有的设备除了用户的sessionStorage\n          for (var i in sessionStorage) {\n            if (i != \"loginNames\") {\n              sessionStorage.removeItem(i);\n            }\n          }\n\n          window.location.href = \"index.html\";\n        }\n      });\n    };\n\n    $scope.gotoHomePage = function () {\n      if (userLoginUIService.user.enterprise.logoStatus != \"0\") {\n        location.href = \"http://www.proudsmart.com\";\n      }\n    };\n\n    $scope.gotoAppPage = function () {\n      location.href = \"index.html\";\n    };\n\n    $scope.showMenuFun = function () {\n      $scope.showMenu = !$scope.showMenu;\n    };\n\n    $scope.logout = function () {\n      sessionStorage.clear();\n      userLoginUIService.logout();\n    };\n\n    $scope.onViewLoad = function () {};\n\n    function makeSequence(condition, success) {\n      var rs = [];\n      return function recursive(queue) {\n        var item = queue.shift(),\n            next = function next(d) {\n          [].push.apply(rs, d);\n          recursive(queue);\n        };\n\n        item ? condition(item, next) : success(rs);\n      };\n    }\n\n    function getKpisByModelId(modelId, callback) {\n      resourceUIService.getKpisByModelId(modelId, function (e) {\n        if (e.code == 0) {\n          callback && callback.call(this, e.data);\n        }\n      });\n    }\n\n    function getAllKpis(callback) {\n      var sequence = makeSequence(function (d, next) {\n        getKpisByModelId(d, function (n) {\n          next(n.map(function (a) {\n            d != -1 ? a.modelId = d != -1 : null;\n            return a;\n          }));\n        });\n      }, callback);\n      sequence([300, 301, 302, -1]);\n    }\n\n    function createPromise() {\n      var defer = q.defer();\n      return function (d) {\n        if (d == null) {\n          return defer.promise;\n        } else {\n          defer.resolve(d);\n        }\n      };\n    }\n\n    function CacheAllData() {\n      this.events = {};\n      this.promises = {};\n    }\n\n    CacheAllData.prototype.on = function (eventname, handler) {\n      this.promises[eventname]().then(handler);\n    };\n\n    CacheAllData.prototype.init = function (callback) {\n      this.cacheOneByOne([{\n        fn: this.getEnterpriseConfigs,\n        eventHandler: \"getEnterpriseConfigs\"\n      }, {\n        fn: this.getAllDicts,\n        eventHandler: \"getAllDicts\"\n      }, {\n        fn: this.getAllUnits,\n        eventHandler: \"getAllUnits\"\n      }, {\n        fn: this.getAllDevice,\n        eventHandler: \"getAllDevice\"\n      }, {\n        fn: this.domainTreeQuery,\n        eventHandler: \"domainTreeQuery\"\n      }, {\n        fn: this.getAllModelDeviceKpiDef,\n        eventHandler: \"getAllModelDeviceKpiDef\"\n      }, {\n        fn: this.getAllUserInfo,\n        eventHandler: \"getAllUserInfo\"\n      }, {\n        fn: this.getSimpleDistricts,\n        eventHandler: \"getSimpleDistricts\"\n      }, {\n        fn: this.getAllAttrs,\n        eventHandler: \"getAllAttrs\"\n      }, {\n        fn: this.getAllDirectives,\n        eventHandler: \"getAllDirectives\"\n      }, {\n        fn: this.getRootDomain,\n        eventHandler: \"getRootDomain\"\n      }, {\n        fn: this.getAllDataTypes,\n        eventHandler: \"getAllDataTypes\"\n      }, {\n        fn: this.getDefaultKpis,\n        eventHandler: \"getDefaultKpis\"\n      }], callback);\n    };\n\n    CacheAllData.prototype.cacheOneByOne = function cacheOneByOne(queue, callback) {\n      var __self = this,\n          totalLen = queue.length;\n\n      this.promises = queue.reduce(function (a, b) {\n        a[b.eventHandler] = createPromise();\n        return a;\n      }, {});\n\n      function recursive(queue) {\n        var item = queue.shift(),\n            _self = this,\n            fn,\n            eventHandler,\n            len = totalLen - queue.length;\n\n        if (item) {\n          fn = item.fn;\n          eventHandler = item.eventHandler;\n          return fn.call(_self, function (msg) {\n            console.info(len + \") \" + msg + \" - \" + Math.round(len / totalLen * 100) + \"%, 用时 : \" + (new Date() - time) / 1000 + \"s\");\n\n            __self.promises[eventHandler](\"success\"); //_self.emit(eventHandler, \"success\");\n\n\n            recursive(queue);\n          });\n        } else {\n          callback && callback.call(this);\n        }\n      }\n\n      recursive(queue.slice());\n    };\n\n    CacheAllData.prototype.getAllDevice = function getAllDevice(callback) {\n      resourceUIService.deviceLoader().then(function (getAllDeviceInfos) {\n        var obj = {};\n\n        for (var i in getAllDeviceInfos) {\n          obj[getAllDeviceInfos[i].id] = getAllDeviceInfos[i];\n          obj[getAllDeviceInfos[i].externalDevId] = getAllDeviceInfos[i];\n        }\n\n        $scope.getAllDeviceInfo = obj;\n        callback && callback.call(this, \"缓存全部设备完成\");\n      });\n    };\n\n    CacheAllData.prototype.getAllDicts = function getAllDicts(callback) {\n      dictionaryService.getAllDicts(function (returnObj) {\n        if (returnObj.code == 0) {\n          dictionaryService.dicts = returnObj.data;\n          $scope.myDicts = returnObj.data;\n          var dic = {};\n\n          for (var i in returnObj.data) {\n            var obj = returnObj.data[i];\n\n            if (dic[obj.dictCode]) {\n              dic[obj.dictCode].push(obj);\n            } else {\n              dic[obj.dictCode] = [];\n              dic[obj.dictCode].push(obj);\n            }\n          }\n\n          for (var items in dic) {\n            $scope.myDicts[items] = dic[items];\n          }\n\n          psStore.commit(\"getAllDicts\", $scope.myDicts);\n          callback && callback.call(this, \"缓存全部字典表完成\");\n        }\n      });\n    };\n\n    CacheAllData.prototype.getAllUserInfo = function getAllUserInfo(callback) {\n      userUIService.queryUserByCondition({}, function (returnObj) {\n        if (returnObj.code == 0) {\n          var getAllUserInfoList = returnObj.data;\n\n          for (var i in getAllUserInfoList) {\n            getAllUserInfoList[getAllUserInfoList[i].loginName] = getAllUserInfoList[i].userName;\n            getAllUserInfoList[getAllUserInfoList[i].userID] = getAllUserInfoList[i].userName;\n          }\n\n          $scope.getAllUserInfo = getAllUserInfoList;\n          callback && callback.call(this, \"缓存全部用户信息完成\");\n        }\n      });\n    };\n\n    CacheAllData.prototype.getSimpleDistricts = function getSimpleDistricts(callback) {\n      if (!resourceUIService.hasOwnProperty(\"provinces\")) {\n        resourceUIService.getSimpleDistricts(function (returnObj) {\n          if (returnObj.code == 0) {\n            resourceUIService.provinces = returnObj.data;\n            $scope.provinces = returnObj.data;\n            $scope.cityDics = {};\n            $scope.districtDics = {};\n            $scope.provinces.forEach(function (province) {\n              $scope.cityDics[province.id] = province.children;\n              province.children.forEach(function (city) {\n                $scope.districtDics[city.id] = city.children;\n              });\n            });\n            callback && callback.call(this, \"缓存所有的地图信息\");\n          }\n        });\n      } else {\n        callback && callback.call(this, \"缓存所有的地图信息\");\n      }\n    };\n\n    CacheAllData.prototype.getAllDataTypes = function getAllDataTypes(callback) {\n      resourceUIService.getAllDataTypes(function (returnObj) {\n        if (returnObj.code == 0) {\n          $scope.allDataTypes = returnObj.data;\n          callback && callback.call(this, \"缓存全部数据类型信息完成\");\n        }\n      });\n    };\n\n    CacheAllData.prototype.getAllUnits = function getAllUnits(callback) {\n      unitService.getAllUnits(function (returnObj) {\n        if (returnObj.code == 0) {\n          unitService.units = returnObj.data;\n          $scope.myOptions = returnObj.data;\n          unitService.unitDics = {};\n\n          for (var i in $scope.myOptions) {\n            unitService.unitDics[$scope.myOptions[i].unitCode] = $scope.myOptions[i].unitName;\n            if ($scope.myOptions[i].unitCode == \"NA\" || $scope.myOptions[i].unitCode == \"Number\") unitService.unitDics[$scope.myOptions[i].unitCode] = \"\";\n          }\n\n          $scope.myOptionDic = unitService.unitDics;\n          resourceUIService.unitLoader($scope.myOptionDic);\n          callback && callback.call(this, \"缓存全部单位字典表完成\");\n        }\n      });\n    };\n\n    CacheAllData.prototype.getRootDomain = function getRootDomain(callback) {\n      resourceUIService.getRootDomain(function (returnObj) {\n        if (returnObj.code == 0) {\n          if (returnObj.data) {\n            $scope.rootCi = returnObj.data.id;\n            callback && callback.call(this, \"缓存rootCi完成\");\n          } else {\n            growl.error(\"当前用户不存在rootCi，请联系客服处理。\", {});\n          }\n        }\n      });\n    };\n\n    CacheAllData.prototype.getAllAttrs = function getAllAttrs(callback) {\n      resourceUIService.getAllAttrs(function (subReturnObj) {\n        if (subReturnObj.code == 0) {\n          subReturnObj.data.forEach(function (attrDef) {\n            if (!$rootScope.rootModelsDic[attrDef.modelId]) return;\n            if (!$rootScope.rootModelsDic[attrDef.modelId].attrs) $rootScope.rootModelsDic[attrDef.modelId].attrs = [];\n            $rootScope.rootModelsDic[attrDef.modelId].attrs.push(attrDef);\n          });\n          callback && callback.call(this, \"缓存全部设备属性完成\");\n        }\n      });\n    };\n\n    CacheAllData.prototype.getAllDirectives = function getAllDirectives(callback) {\n      resourceUIService.getDirectivesByModelId(-1, function (subReturnObj) {\n        if (subReturnObj.code == 0) {\n          subReturnObj.data.forEach(function (dirDef) {\n            if (!$rootScope.rootModelsDic[dirDef.modelId]) return;\n            if (!$rootScope.rootModelsDic[dirDef.modelId].directives) $rootScope.rootModelsDic[dirDef.modelId].directives = [];\n            $rootScope.rootModelsDic[dirDef.modelId].directives.push(dirDef);\n          });\n          callback && callback.call(this, \"缓存全部指令完成\");\n        }\n      });\n    };\n\n    CacheAllData.prototype.getDefaultKpis = function getDefaultKpis(callback) {\n      resourceUIService.getKpiTypeByFilter({}, function (returnObj) {\n        if (returnObj.code == 0) {\n          var newObj = [];\n          returnObj.data.forEach(function (obj) {\n            obj.text = obj.label;\n            newObj.push(obj);\n          });\n          $scope.defaultKpiList = newObj;\n          callback && callback.call(this, \"缓存全部默认指标类型完成\");\n        }\n      });\n    };\n\n    CacheAllData.prototype.getAllModelDeviceKpiDef = function getAllModelDeviceKpiDef(callback) {\n      $rootScope.rootModelsDic = {\n        300: {},\n        301: {},\n        302: {}\n      };\n      resourceUIService.rootModelsDic = $rootScope.rootModelsDic;\n      resourceUIService.getModelsByCondition({}, function (returnObj) {\n        if (returnObj.code == 0) {\n          returnObj.data.forEach(function (model) {\n            if (!$rootScope.rootModelsDic[model.id]) $rootScope.rootModelsDic[model.id] = {};\n            $rootScope.rootModelsDic[model.id].model = model;\n          });\n          getAllKpis(function (subReturnObj) {\n            subReturnObj.forEach(function (kpiDef) {\n              if (!$rootScope.rootModelsDic[kpiDef.modelId]) return;\n              $rootScope.rootModelsDic[kpiDef.modelId].kpiDic = $rootScope.rootModelsDic[kpiDef.modelId].kpiDic || {};\n              if ($scope.myOptionDic[kpiDef.unit]) kpiDef.unitLabel = $scope.myOptionDic[kpiDef.unit];\n              var regExp = /\\{|\\[.*\\}|\\]/;\n\n              if (kpiDef.range) {\n                var find = regExp.test(kpiDef.range);\n                var rangeObj = [];\n\n                if (find) {\n                  try {\n                    rangeObj = find ? JSON.parse(kpiDef.range) : [];\n                  } catch (e) {}\n                }\n\n                kpiDef.rangeAry = rangeObj;\n\n                if (rangeObj instanceof Array) {\n                  kpiDef.rangeAry = rangeObj;\n\n                  if (rangeObj.length == 2) {\n                    kpiDef.min = rangeObj[0];\n                    kpiDef.max = rangeObj[1];\n                  }\n                } else if (rangeObj instanceof Object) {\n                  kpiDef.rangeObj = rangeObj;\n                }\n              }\n\n              $rootScope.rootModelsDic[kpiDef.modelId].kpiDic[kpiDef.id] = kpiDef;\n            });\n            resourceUIService.modelLoader($rootScope.rootModelsDic);\n            callback && callback.call(this, \"缓存全部模型、设备、指标完成\");\n          });\n        }\n      });\n    };\n\n    CacheAllData.prototype.domainTreeQuery = function domainTreeQuery(callback) {\n      /** 不需要的缓存，但有些接口是同步取的为兼容性，采用缓存 */\n      var domainsArr = userLoginUIService.user.domains.split(\"/\");\n      var domainListTree = {};\n\n      for (var i = 2; i < domainsArr.length - 1; i++) {\n        resourceUIService.getResourceById([domainsArr[i]], function (tc) {\n          domainListTree[tc.data.domainPath] = tc.data;\n          domainListTree[tc.data.id] = tc.data;\n        });\n      }\n\n      resourceUIService.getDomainsByFilter({}, function (tc) {\n        for (var i in tc.data) {\n          domainListTree[tc.data[i].domainPath] = tc.data[i];\n          domainListTree[tc.data[i].id] = tc.data[i];\n        }\n\n        $rootScope.domainListDic = domainListTree;\n        resourceUIService.domainsLoader(domainListTree);\n        callback && callback.call(this, \"缓存管理域名（兼容性保留）\");\n      });\n    };\n\n    CacheAllData.prototype.getEnterpriseConfigs = function getEnterpriseConfigs(callback) {\n      configUIService.getConfigsByGroupName(\"EnterpriseConfig\", function (returnObj) {\n        if (returnObj.code == 0) {\n          if (returnObj.data && returnObj.data.length > 0) {\n            returnObj.data.forEach(function (item) {\n              try {\n                if ($scope.baseConfig) {\n                  $scope.baseConfig = jQuery.extend(true, $scope.baseConfig, JSON.parse(item.value));\n                } else {\n                  $scope.baseConfig = JSON.parse(item.value);\n                }\n\n                if ($scope.baseConfig) {\n                  //拥有企业设置\n                  if ($scope.baseConfig.title) $(\"title\").html($scope.baseConfig.title);else $(\"title\").html(\"\");\n                  if ($scope.baseConfig.shortcut) $(\"link[rel='shortcut icon']\").attr(\"href\", $scope.baseConfig.shortcut + \"?\" + new Date().getTime());else $(\"link[rel='shortcut icon']\").attr(\"href\", \"../login/images/shortcut_null.png\" + \"?\" + new Date().getTime());\n                }\n              } catch (e) {}\n            });\n          } else {\n            $(\"title\").html(\"\");\n            $(\"link[rel='shortcut icon']\").attr(\"href\", \"../login/images/shortcut_null.png\" + \"?\" + new Date().getTime());\n          }\n\n          userLoginUIService.initMenus($scope, $location);\n          callback && callback.call(this, \"缓存基础配置信息完成\");\n        }\n      });\n    };\n\n    $scope.menusFilter = function (item) {\n      return item.functionCode.charAt(0) === \"S\";\n    };\n\n    $scope.publicTableSearch = function (tabelname, value) {\n      $scope.$broadcast(\"table-search-handle\", {\n        name: tabelname,\n        value: value\n      });\n    };\n\n    $scope.$on(\"loginStatusChanged\", function (evt, d) {\n      var cacheAllData;\n\n      if (userLoginUIService.user.isAuthenticated) {\n        if (dialogInstance) {\n          dialogInstance.close();\n        }\n\n        $scope.userInfo = userLoginUIService.user;\n        $scope.lastLoginTime = newDateJson(userLoginUIService.user.lastLoginTime).Format(GetDateCategoryStrByLabel());\n        if (userLoginUIService.user.enterprise) $scope.enterpriseType = userLoginUIService.user.enterprise.enterpriseType; //initUserObjects();\n\n        userLoginUIService.initMenus($scope, $location);\n        $rootScope.cacheAllData = new CacheAllData();\n        $rootScope.cacheAllData.init(function () {\n          //userLoginUIService.rootHandler($scope, $location);\n\n          /* $scope.detailshow =\n            route && route.$attr(\"current/params/mode\") == \"detail\"; */\n          console.log(\"全部数据缓存完成 - 用时 : \" + (new Date() - time) / 1000 + \"s\");\n        });\n        checkLoginAccont($scope.userInfo);\n      } else {\n        $scope.userInfo = {};\n        $scope.lastLoginTime = \"\";\n        showLogin();\n      }\n    });\n  }]);\n  controllers.controller(\"AppUploadCtrl\", [\"$scope\", \"growl\", \"FileUploader\", function ($scope, growl, FileUploader) {\n    $scope.fileMaxSize = $scope.fileMaxSize ? $scope.fileMaxSize : 1;\n    $scope.fileFormat = $scope.fileFormat ? $scope.fileFormat : \"jpg、png、jpeg、bmp、gif、svg\";\n    $scope.queueLimit = $scope.queueLimit ? $scope.queueLimit : 1;\n    var uploader = $scope.uploader = new FileUploader({\n      url: $scope.serviceOrigin,\n      withCredentials: true,\n      //      queueLimit: 1, //文件个数\n      removeAfterUpload: true //上传后删除文件\n\n    });\n    uploader.fileBelongDic = {}; // FILTERS\n\n    uploader.filters.push({\n      name: \"fileFilter\",\n      fn: function fn(item, options) {\n        var nameAry = item.name.split(\".\");\n        var type = nameAry[nameAry.length - 1];\n\n        if ($scope.fileFormat.indexOf(type) == -1) {\n          growl.warning(\"文件格式仅支持\" + $scope.fileFormat + \"文件，请重新选择\", {});\n          return false;\n        }\n\n        if (item.size / 1024 > $scope.fileMaxSize * 1000) {\n          growl.warning(\"您选择的文件大于\" + $scope.fileMaxSize + \"M，请重新选择\", {});\n          return false;\n        }\n\n        return true;\n      }\n    }); // CALLBACKS\n\n    uploader.onWhenAddingFileFailed = function (item, filter, options) {\n      //      uploader.clearQueue();\n      //      uploader.destroy();\n      console.info(\"onWhenAddingFileFailed\", item, filter, options);\n    };\n\n    uploader.onAfterAddingFile = function (fileItem) {\n      if (uploader.queue.length > $scope.queueLimit) uploader.removeFromQueue(uploader.queue.length.length - 1);\n      console.info(\"onAfterAddingFile\", fileItem);\n    };\n\n    uploader.onAfterAddingAll = function (addedFileItems) {\n      if (uploader.fileBelongId) {\n        uploader.fileBelongDic[uploader.fileBelongId] = addedFileItems;\n      }\n\n      $scope.$broadcast(\"onAfterAddingAll\", {\n        addedFileItems: addedFileItems\n      });\n      console.info(\"onAfterAddingAll\", addedFileItems);\n    };\n\n    uploader.onBeforeUploadItem = function (item) {\n      Array.prototype.push.apply(item.formData, uploader.formData);\n      console.info(\"onBeforeUploadItem\", item);\n    };\n\n    uploader.onProgressItem = function (fileItem, progress) {\n      console.info(\"onProgressItem\", fileItem, progress);\n    };\n\n    uploader.onProgressAll = function (progress) {\n      console.info(\"onProgressAll\", progress);\n    };\n\n    uploader.onSuccessItem = function (fileItem, response, status, headers) {\n      console.info(\"onSuccessItem\", fileItem, response, status, headers);\n    };\n\n    uploader.onErrorItem = function (fileItem, response, status, headers) {\n      growl.warning(\"上传文件失败\", {});\n      $scope.loadingShow = false;\n      console.info(\"onErrorItem\", fileItem, response, status, headers);\n    };\n\n    uploader.onCancelItem = function (fileItem, response, status, headers) {\n      console.info(\"onCancelItem\", fileItem, response, status, headers);\n    };\n\n    uploader.onCompleteItem = function (fileItem, response, status, headers) {\n      console.info(\"onCompleteItem\", fileItem, response, status, headers);\n      uploader.formData = []; //清空参数\n\n      if (response) {\n        if (response.code == 0) $scope.$broadcast(\"uploadTemplate\", {\n          state: true,\n          response: response\n        });else growl.error(response.message, {});\n        $scope.loadingShow = false;\n      } else {\n        growl.error(\"操作异常了，尝试重新刷新\", {});\n      }\n    };\n\n    uploader.onCompleteAll = function () {\n      console.info(\"onCompleteAll\");\n    };\n\n    uploader.uplaodHandler = function () {\n      uploader.uploadAll();\n      scope.loadingShow = true;\n      uploader.fileBelongDic = {};\n      uploader.fileBelongId = \"\";\n    };\n\n    uploader.clearHandler = function () {\n      uploader.clearQueue();\n      uploader.fileBelongDic = {};\n      uploader.fileBelongId = \"\";\n    };\n\n    uploader.growl = function (msg) {\n      growl.info(msg, {});\n    };\n  }]);\n});"],"sourceRoot":"/source/"}