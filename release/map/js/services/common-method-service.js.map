{"version":3,"sources":["js/services/common-method-service.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","define","services","BootstrapDialog","dateHandler","window","factory","location","$state","$stateParams","userEnterpriseService","timeout","rootScope","q","routeParam","Info","customMethodService","projectUIService","serviceCenterService","dictionaryService","energyConsumeUIService","ticketTaskService","resourceUIService","viewFlexService","userLoginUIService","route","growl","kpiDataService","SwSocket","alertService","userDomainService","thridPartyApiService","freeboardBaseService","configUIService","serviceProxy","FileUploader","maintenanceTaskUIService","sparePartUIService","deviceResumeUIService","rollerPartUIService","registerService","psTreeData","psUiRouterHandler","psLoading","unitService","cms2","popIns","keys","cache","viewCache","key","val","push","appSourceDictionary","TaskJobClass","bind","target","fn","apply","arguments","setVal","name","this","getVal","cms","mydata","scope","rootTarget","$getCurrentResource","$getResourceById","setValue","clickFnDic","events","localStore","LocalStore","timeIntervals","convertMeasureLoc","a","json","JSONparse","traverse","Object","toString","call","i","length","n","parseInt","splice","JSON","stringify","extend","b","clone","parse","str","e","themeCompare","default","Cyborg","Slate","Solar","cmethod","data","$clone","_proto_","refresh","getTaskJob","getAppSource","kpiDic","resourceDic","createSystemPopup","object","config","depth","cur","renderTo","$","submitFn","closeBtn","setting","$attr","cancelFn","modelDia","contentDom","find","addClass","bgOpacity","css","content","text","title","outter","wrap","undefined","width","row","append","attr","destroy","animate","margin-top","remove","opacity","on","event","instance","setMode","groups","layout","$remapByChild","element","rs","submit","statuc","cancel","renderLayout","top","popupLayer","size","after","prepend","createPopup","showcloseBtn","bg","span","getSelfDom","left","right","bottom","border","color","backgroundColor","console","error","clearEvents","getView","callback","match","view","item","path","testObj","regex","handler","d","viewId","ctrl","viewCtrl","word","RegExp","exec","warn","getConfig","createInjectorCtrlView","getViewById","elem","nographe","type","children","label","source","parameters","icon","id","perfix","advance","getfunction","expression","style","col","createRenderCtrl","ctrlname","defer","_newScope","$destroy","div","document","createElement","psrequire","render","resolve","promise","getRootScope","$$childHead","jsonp","url","funcname","script","num","Math","random","setAttribute","body","onerror","onload","getState","then","res","getChildren","l","resourceClick","paths","ext","self","getPathAndShowTreeLocation","showTree","params","index","navigateTo","$getKpisByModelId","modelId","modelLoader","models","kpiDics","getAllUnits","code","nextTick","setTimeout","topDateString","diff","format","regexp","exp","divide","repeat","inx","rest","floor","replace","getAttrsByModelId","measureLocation","sourceValue","getDataItemsByModelIdFromCache","kpisMap","rootModelsDic","getDataItemsByModelId","saveDomainAreaLineTree","domaintree","mapFun","node","viewTitle","domains","filterNode","resourceType","map","customers","projects","devices","saveEditorStatus","getAttrsByResource","resource","values","MeasurePointLocate","getAttrsByResourceId","getResourceById","showLoading","closeLoading","getDomainAreaLineTree_alertStatus","getDomainAreaLineTree","toJSON","getAlertState","root","fillEmpty","arr","loop","binx","einx","start","value","end","getDateHandler","dateString","init","reStructSeries","returnData","removeDuplicate","some","kpiCode","arisingTime","time","sort","getTime","reduce","getMinGap","min","m","minus","step","minGap","startTime","endTime","xAxis","before","addTimeStamp","dt","time1","time2","series","off","eventname","forEach","getCurrentParents","parents","join","catch","message","$on","$apply","getEvents","trigger","$broadcast","uploadFile1","file","group","fileFormat","urlParam","uploader","origin","withCredentials","filters","options","nameAry","split","indexOf","warning","fileMaxSize","onWhenAddingFileFailed","filter","info","onCompleteItem","fileItem","response","status","headers","qualifiedName","clearQueue","addToQueue","queue","que","formData","resourceId","onCompleteAll","uploadAll","getAllConfigGroups","configGroups","saveConfigGroup","getKpiTypeByFilter","param","uploadResourceFile","postService","toFix","number","Number","le","pow","len","uploadFile","domainPath","groupName","invalid","keyDesc","api","service","method","fun","success","saveConfig","resultObj","upload","dom","global","initFn","Error","$$","runExpression","funRes","fnResult","getAlertValueList","category","isRealTimeData","timePeriod","kpiCodes","setSelfDom","selfDom","defineProperty","enumerable","getGroups","getTheme","themeStr","themeObj","theme","getPath","addView","msg","updateView","$cache","getKpiDic","getResourceDic","getTimesByDay","getEditorStatus","getConfigsByGroupName","configs","getCurrentUser","user","splitData","valueList","times","Date","timeSplit","structure","nodeId","inputEmpty","createMsgBox","get","template","setConsoleText","commontery","oldConsole","getValue","createUnderscore","current","$$route","controller","close","createSystemPopupByCtrlView","createSystemPopupByViewId","getViewContent","createPopupByViewIdPath","curl","hasOwnProperty","createSystemPopupByLocalPath","getViewId","hostname","getViewByLocalId","createSystemPopupByJsonName","jsonName","run","closePopup","getTimesByMonth","setRootTarget","rt","getKpiValueList","ci","kpi","extension","removeSameValue","nodeIds","$extension","getKpiValList","getKpiValueCi","getValues","createPopupBypath","isLocal","parent","readImageFile","FileReader","reader","evt","result","readAsDataURL","createOverlayBypath","getRootTarget","getPopupData","createPopupByViewId","getDataHandlers","barOption","tooltip","legend","yAxis","polylineOption","subtext","axisPointer","toolbox","show","feature","saveAsImage","boundaryGap","axisLabel","formatter","snap","visualMap","dimension","pieces","lte","gt","smooth","markArea","pieOption","x","orient","radius","center","itemStyle","emphasis","shadowBlur","shadowOffsetX","shadowColor","scatter3DOption","max","inRange","xAxis3D","yAxis3D","zAxis3D","grid3D","boxWidth","boxHeight","boxDepth","viewControl","splitLine","light","main","intensity","ambient","symbol","shading","textStyle","fontSize","borderWidth","bar3DOption","line3DOption","copyToClipBoard","loadExternalJs","Clipboard","clipboard","clearSelection","action","getIcons","icons","getCtrlGroupDemos","getRoleByID","roleID","roleArr","queryEnterpriseRole","returnObj","role","objLike","arrLike","test","triggerSocket","simuSend","getToolsMenu","getHelpMenu","pdf","getSignalShipInfo","getManyShipInfo","ids","getShipTrack","getAllConfigs","configGroupName","configGroup","deleteConfig","configId","deleteConfigGroup","groupId","createInfoHtml","cont","clickFn","onclickHandler","createShipShape","trailWidth","trailLength","headWidth","headLength","leftBottomPoint","renderExcel","filename","require","table","thead","tbody","loopTr","td","tr","table2excel","exclude","asyncRepeat","repeatCall","finish","queryDomainTree","isArryLike","cached","Promise","userID","$TreeObj","to","level","domainInfos","dtree","getAlertWord","getAlertColorPoint","getAlertColor","getdomainListName","domainPathList","domainList","getdomainNameHandler","domainPathListStr","domainListDic","domainId","getCurrentDomainCi","cacheAsyncData","getDevicesByCondition","extendstr","noCache","menuitems","currentRoleID","roleFunctionCodeMap","includeFields","vals","diagnosticType","NOT_IN","isEmptyObject","getCurrentDevices","getCurrentProject","project","projectId","getCurrentResource","getParameter","getCurrentCustomer","getCiKpi","model","resources","modelType","resfilltype","kpis","defers","ks","getKpis","getResource","all","copyJSONFileToClipBoard","wholeJSON","getLatestDevices","doTaskCloseAlert","ticketNo","getDeviceInfo","getTicketsByStatus","getAlertDeviceList","getTicketTasksByCondition","getTicketTasksByConditionAndPage","pageRequest","getDealTicketListByPage","claimAlert","getDeviceDiagnosticResumeOrTicketByPage","getInfoByPage","getTicketsByConditionAndPage","getUsersByDeviceIdAndRoleAndSpecialty","deviceId","roleId","specialty","complexHandleAgain","taskId","complexHandel","getKnowledgeByConditionWithPage","alertTaskMergeDeal","taskIds","getTicketsByCondition","getDealTicketList","doTask","doTask4Baogang","getTopicErrorDataList","topicErrorQueryModel","getComplexHandleListWithCategorys","selector","ticketTaskQueryModel","energyTypeList","dicts","getDevicesByFilter","deviceName","sn","getCurrentAlert","queryFromDb","getAlertByPage","pages","getAllAlerts","getAlerts","domain","setExpression","getCustomerFromCurrentUser","customerId","getCurrentAlertByProject","currentDirective","resId","getDirectivesByModelId","getProjectByTYpeId","projectTypeId","getProjectsType","projectType","getResourceByModelId","el","valueCode","reject","$getViewById","cv","rej","getViewByViewId","views","getCached","first","shift","last","pop","sessionStorage","getItem","setItem","_setValue","_getValue","deleteValue","findProjectsByCondition","getCurrentProjects","getViewsByOnlyRole","viewType","sendDirective","dirId","sendDeviceDirective","sendItemDir","dir","itemDirValues","closable","buttons","cssClass","dialogRef","sendItemDirAll","$value","sendItemDirByValue","getAllDevices","getViewByViewTitle","getAllMyViews","setTimeInterval","getResources","navigateToTab","p","go","removeNull","analysisDataPrep","sensor","accessConfigs","setParameter","domainTree","physicalConfig","getProjectsAndKpiValue","cis","pushDiff","sloop","rptback","callback1","devis","device","callback2","getKpisByModelId","kpiDes","kpiMaps","valuelist","j","detail","alertFind","includeInstance","Synchook","hooks","tap","next","getProTypeByTypeId","hash","$$path","getPages","pageArr","page","parameter","tabLabel","fromCache","getOnlineByKpiCodes","getValueList","navigateBackTo","href","navigateBack","para","oldParam","encodeURIComponent","moveTo","pageStr","slice","navigateToJson","$target","navigateToFeature","ROLE","backHistory","historyBack","history","back","explainDic","getSimulateApi","simulate","randomText","strs","round","digital","getStartDate","alertTime","currentDate","addHour","getEndDate","wait","condition","http","getScope","setScopeValue","t","getScopeValue","linkTo","open","findViewHasProjectNameById","rootPath","getViewsOnlyPublishedByTypeAndDomainPath","getProjectsByCustomerId","nodesDes","kpisDes","simulateFn","timeStamp","timeStampToStr","nDate","year","getFullYear","month","getMonth","dat","getDate","hour","getHours","getMinutes","sec","getSeconds","renderData","period","frequency","range","getData","curTime","loopNodes","sampleData","ran","calcRandom","agentId","aggregatePeriod","aggregateStatus","aggregateType","compressCount","computeTaskId","dataSerialNumber","dataTime","insertTime","notes","numberValue","quality","stringValue","valueStr","loadArray","loadType","getDictValues","itm","every","loopKpis","loopInstance","ins1","loopInstance2","ins2","ranges","newTime","nextStep","renderData2D","aggr_type","loopAggrType","atype","renderData3D","getModels","getModelByIds","kpiId","md","getDomainsByFilter","getDomainsByFilters","getDeviceDiagnosticResumeAndAlertStatis","getDeviceDiagnosticResumeAndAlertBypage","queryDomainsByEnterpriseId","getProjectsByDomains","getCurrentProjectsFromDomain","findProjectById","getCurrentProjectsByCustom","subDomain","getViewByProjectId","deleteView","getDefaultView","getManagedViewsByTypeAndRole","getRoot","getViewByModelId","getSimulateList","uuid","webSocket","fixedid","unregister","paramSocket","ciid","operation","register","send","getKpiFromViewByTypeAndRole","socketCallback","valueDic","cells","z","cell","search","kpiDef","kpiName","attrs","kpiUnit","unitType","unitLabel","rangeObj","timeRange","statisticType","condList","returnAry","filterEnterprises","findEnterpriseInfoByDomainPath","industryType","queryEnterpriseListByHis","eventData","shortName","industryShortType","queryEnterprises","findEnterpriseInfos","queryDomains","nodeIdAry","enterpriseList","enterpriseId","modelDefinitionId","navigateToTracker","getDirectivesByTypeAndRole","directiveIds","dirctiveId","doubleCompare","getDirectivesByTypeAndRoleAndValue","directives","directive","queryBenchmarkByShortName","industryDic","energyDic","energyType","getAllDicts","dictCode","domainID","granularityUnit","dataType","instanceAry","instanceName","instanceCode","energyName","energyCode","getTaskBySimpleConditionAndPage","sortType","getDeviceFaultInfoList","saveDeviceFaultInfo","deleteDeviceFaultInfoById","getDeviceFaultBookList","saveDeviceFaultBook","deleteDeviceFaultBookById","getDeviceDiagnosticResumeListBypage","exportBGExcel","pageRequset","exportHBExcel","getRollerPartActionLogByCondition","getRollerPartByCondition","rollerTrust","rollerPartList","paramValues","rollerReelTrustReplace","actionLog","taskValues","getFactorySettlementByConditonAndPage","condtion","rollerReelTrust","pointCheckBatchDeal","ticketTaskList","createTempPointCheckTask","srcTaskList","changeDate","changeReason","changeTaskPlanTime","getPointCheckStatis","rollerOnBoard","createCycleReport","getCycleKpiList","sendCycleReportByTicket","getDeviceCycleReportReumeListByPage","getDatePickerListByCondition","pageSize","getPlanTaskTime","setPlanTaskTime","changeDatePickerBatch","srcDatePickerList","targetDate","saveDeviceWorkInfoList","deviceWorkInfoList","getWorkInfoByDeviceId","getDeviceConditionStatus","getModelAnalysisResultByConditionAndPage","PageRequest","getDailyReportByCondtionAndPage","getFaultDiagnosisModelByConditionAndPage","addFaultDiagnosisModel","deleteFaultDiagnosisModel","getCrackRateModelByConditionAndPage","addCrackRateModel","deleteFaultCrackRateModel","getCrackDiffModelByConditionAndPage","addCrackDiffModel","deleteCrackDiffModel","getDiagnosisModel","sendModelAnalysis","analysisTime","sendModelAnalysisTrain","trainType","endTim","getTaskByCondition","addPointCheckStanard","addMaintainStandardTask","addOfflineStandard","deleteTask","deleteMaintainStandardTask","addPreparedMaintainTrust","deleteSparePart","saveSparePart","getSparePartByDeviceId"],"mappings":"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","file":"js/services/common-method-service.js","sourcesContent":["function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/**\n * Created by leonlin on 16/11/3.\n */\ndefine(['./services.js', 'bootstrap-dialog', '../../toolkit/date-handler.js'], function (services, BootstrapDialog, dateHandler) {\n  'use strict';\n\n  var WIN = window || {};\n  services.factory('commonMethodService', ['$location', '$state', '$stateParams', 'userEnterpriseService', '$timeout', '$rootScope', '$q', '$routeParams', 'Info', 'customMethodService', 'projectUIService', 'serviceCenterService', 'dictionaryService', 'energyConsumeUIService', 'ticketTaskService', 'resourceUIService', 'viewFlexService', 'userLoginUIService', '$route', '$window', 'growl', 'kpiDataService', 'SwSocket', 'alertService', 'userDomainService', 'thridPartyApiService', 'freeboardBaseService', 'configUIService', 'serviceProxy', 'FileUploader', 'maintenanceTaskUIService', 'sparePartUIService', 'deviceResumeUIService', 'rollerPartUIService', '$registerService', 'psTreeData', 'psUiRouterHandler', 'psLoading', 'unitService', 'commonMethodService2', function (location, $state, $stateParams, userEnterpriseService, timeout, rootScope, q, routeParam, Info, customMethodService, projectUIService, serviceCenterService, dictionaryService, energyConsumeUIService, ticketTaskService, resourceUIService, viewFlexService, userLoginUIService, route, window, growl, kpiDataService, SwSocket, alertService, userDomainService, thridPartyApiService, freeboardBaseService, configUIService, serviceProxy, FileUploader, maintenanceTaskUIService, sparePartUIService, deviceResumeUIService, rollerPartUIService, registerService, psTreeData, psUiRouterHandler, psLoading, unitService, cms2) {\n    var popIns,\n        events = {};\n    var viewCache = createCache(),\n        resourceMap;\n    var appSourceDictionary = new TaskJobClass();\n\n    function TaskJobClass() {}\n\n    TaskJobClass.prototype.setVal = function (name, val) {\n      this[name] = val;\n    };\n\n    TaskJobClass.prototype.getVal = function (name) {\n      return this[name];\n    };\n\n    appSourceDictionary.setVal(\"智能诊断\", \"综合处理\");\n    appSourceDictionary.setVal(\"在线预警\", \"综合处理\");\n    appSourceDictionary.setVal(\"离线诊断\", \"综合处理\");\n    appSourceDictionary.setVal(\"合并报警\", \"综合处理\");\n    appSourceDictionary.setVal(\"智能决策\", \"综合处理\");\n    appSourceDictionary.setVal(\"故障漏报\", \"故障分析\");\n    appSourceDictionary.setVal(\"智能检修标准\", \"计划实施\");\n    appSourceDictionary.setVal(\"状态维护标准\", \"计划实施\");\n    appSourceDictionary.setVal(\"临时检修委托\", \"计划实施\");\n    appSourceDictionary.setVal(\"临时维护委托\", \"计划实施\");\n\n    function bind(target, fn) {\n      return function () {\n        return fn.apply(target, arguments);\n      };\n    }\n\n    function createCache() {\n      var keys = [];\n\n      var cache = function cache(key, val) {\n        if (typeof val === \"undefined\") {\n          return cache[\"_\" + key];\n        }\n\n        cache[\"_\" + key] = val;\n        keys.push(key);\n      };\n\n      cache.keys = function () {\n        return keys;\n      };\n\n      return cache;\n    }\n\n    function cms(mydata, scope) {\n      var clickFnDic = {}; //按钮的返回集合\n\n      var alertMode = false;\n      var rootTarget;\n      var events = {};\n      var oldURL = \"\";\n      var setValue;\n      var localStore = new LocalStore();\n      var timeIntervals = [];\n      var $getCurrentResource, $getResourceById, setValue; //window.addEventListener( \"hashchange\", hashkeyChangeListener );\n\n      function convertMeasureLoc(a) {\n        var json = JSONparse(a);\n\n        function traverse(a) {\n          if (Object.prototype.toString.call(a) == \"[object Array]\") {\n            for (var i = 0; i < a.length; i++) {\n              if (!a[i]['label'] && !a[i]['name']) {\n                traverse(a[i]);\n              } else {\n                var n = a[i]['name'];\n\n                if (parseInt(n) > 999) {\n                  a.splice(i, 1);\n                  i--;\n                }\n              }\n            }\n          } else if (Object.prototype.toString.call(a) == \"[object Object]\") {\n            for (var i in a) {\n              traverse(a[i]);\n            }\n          }\n        }\n\n        ;\n        traverse(json);\n        return JSON.stringify(json);\n      }\n\n      function extend(a, b) {\n        for (var i in b) {\n          a[i] = b[i];\n        }\n      }\n\n      function clone(obj) {\n        return JSON.parse(JSON.stringify(obj));\n      }\n\n      var routeStack = [];\n\n      var JSONparse = function JSONparse(str) {\n        var json;\n\n        if (_typeof(str) == \"object\") {\n          return str;\n        } else {\n          try {\n            json = JSON.parse(str);\n          } catch (e) {\n            json = null;\n          } finally {\n            return json;\n          }\n        }\n      };\n\n      var themeCompare = {\n        default: \"default\",\n        Cyborg: \"dark\",\n        Slate: \"dark\",\n        Solar: \"macarons\"\n      };\n\n      var cmethod = function cmethod(data) {\n        if (data) {\n          this.$clone(data);\n        }\n      };\n\n      var _proto_ = cmethod.prototype;\n      _proto_.refresh = cms2.refresh;\n      _proto_.getTaskJob = bind(cms2, cms2.getTaskJob);\n      _proto_.getAppSource = bind(cms2, cms2.getAppSource);\n      cmethod.kpiDic = {};\n      cmethod.resourceDic = {};\n      /**\n       * //  2D视图：柱状图（barOption）、折线图（polylineOption）、饼图（pieOption）\n       *     3D视图：散点图（scatter3DOption）、柱状图（bar3DOption）、折线图（line3DOption）\n       * @returns {option}\n       */\n\n      function hasValue(str) {\n        return function (item) {\n          return item === str;\n        };\n      }\n\n      function getViewByLocalId(viewId, path, callback) {\n        function getViewId() {\n          viewFlexService.getViewById(viewId, function (d) {\n            var content = JSON.parse(d.data.content);\n            var find;\n\n            if (content.hasOwnProperty(\"groups\")) {\n              find = content.groups.find(function (elem) {\n                return elem.path == path;\n              }) || {};\n            } else if (content.hasOwnProperty(\"layout\")) {\n              find = content;\n            }\n\n            callback(find);\n          });\n        }\n\n        if ([\"localhost\", \"127.0.0.1\"].some(hasValue(window.location.hostname))) {\n          psrequire([\"../app-views/build/\" + viewId + \".\" + path], function (view) {\n            callback(view);\n          }, function (e) {\n            getViewId();\n          });\n        } else {\n          getViewId();\n        }\n      }\n\n      var createSystemPopup = function createSystemPopup(object, config, data, depth) {\n        var cur = this;\n        cur.setValue(\"$POPUPDATA\", data);\n        config = config || {};\n        var renderTo = $(\"body\");\n        var showcloseBtn = config.closeBtn;\n        var themeObj = rootTarget ? JSONparse(rootTarget.setting) : {\n          theme: \"default\"\n        }; // var theme = themeObj.theme || \"default\";\n\n        var theme = \"steel\";\n        var submitFn = config.$attr(\"on/submit\");\n        var cancelFn = config.$attr(\"on/cancel\");\n        var cur = this;\n        var modelDia = $('<div id=\"bootstrap-dialog\" class=\"modal bootstrap-dialog type-primary fade size-normal in\" style=\"display : table-cell;\" popup_layer=\"popup_layer\">\\\n        <div class=\"modal-dialog\">\\\n          <div class=\"modal-content\">\\\n          <div class=\"modal-header bg-f2 padding-bottom-20\">\\\n          <div class=\"bootstrap-dialog-header\">\\\n          <a role=\"button\" class=\"close\">×</a>\\\n        <h4 class=\"modal-title info-box-number\"></h4>\\\n          </div>\\\n          </div>\\\n          <div class=\"modal-body no-pad-top\">\\\n          </div>\\\n          </div>\\\n          </div>\\\n          </div>');\n        var contentDom = modelDia.find(\".modal-dialog\");\n        contentDom.addClass(theme); // 设置背景的透明度\n\n        var bgOpacity = config.bgOpacity;\n\n        if (bgOpacity) {\n          $(\".bootstrap-dialog\").css('background-color', \"rgba(0, 0, 0, 0.8)\");\n        }\n\n        contentDom.css(\"height\", \"auto\");\n        modelDia.addClass(\"block\");\n        contentDom.css(\"min-height\", \"0\");\n        var content = modelDia.find(\".modal-dialog\");\n        var title = modelDia.find(\"h4\");\n        title.text(config.title || \"标题文字\");\n        var outter = modelDia.find(\".modal-body\");\n        var bg = $(\"<div></div>\");\n        var wrap = $(\"<div></div>\");\n        var closeBtn = modelDia.find(\"a.close\");\n        var span = $(\"<div></div>\");\n        modelDia.css(\"z-index\", depth + 1 || 10000);\n\n        if (config.width != undefined) {\n          content.css(\"width\", config.width);\n        }\n\n        var row = $(\"<div></div>\");\n        row.addClass(\"row\");\n        row.append(wrap);\n        outter.append(row);\n        outter.attr(\"id\", \"pp\");\n        wrap.css(\"position\", \"relative\");\n        wrap.addClass(\"col-md-12\");\n        wrap.attr(\"id\", \"popup\");\n        wrap.css(\"width\", \"100%\");\n        wrap.css(\"padding-top\", \"10px\");\n\n        var destroy = function destroy() {\n          content.animate({\n            \"margin-top\": 0\n          }, 300, function () {\n            modelDia.remove();\n            cur.setValue(\"$POPUPDATA\", null);\n          });\n          modelDia.animate({\n            opacity: 0\n          }, 100);\n        };\n\n        closeBtn.on(\"click\", function (event) {\n          if (cancelFn) {\n            cancelFn();\n          }\n\n          destroy();\n        });\n        var instance = freeboardBaseService(wrap);\n        instance.setMode(true);\n\n        if (object.groups) {\n          object.layout = object.groups[0].layout;\n          delete object.groups;\n        }\n\n        if (object.layout) {\n          object.layout = object.layout.$remapByChild(function (element) {\n            var rs = new cmethod(element);\n\n            rs.submit = function (obj) {\n              if (obj.statuc == \"cancel\") {\n                destroy();\n              } else {\n                if (submitFn) {\n                  submitFn(obj, destroy);\n                }\n              }\n            };\n\n            rs.cancel = function () {\n              if (cancelFn) {\n                cancelFn();\n              }\n\n              destroy();\n            };\n\n            return rs;\n          });\n          instance.renderLayout(object);\n        }\n\n        modelDia.addClass(\"block\");\n        modelDia.attr(\"id\", \"free-board\");\n        modelDia.css(\"opacity\", 0);\n        modelDia.css(\"position\", \"absolute\");\n        modelDia.css(\"overflow-y\", \"auto\");\n        modelDia.animate({\n          opacity: 1\n        }, 100);\n        content.css(\"margin-top\", 0);\n        content.animate({\n          \"margin-top\": config.top\n        }, 300);\n        var popupLayer = $(\"[popup_layer]\");\n\n        if (popupLayer.size() > 0) {\n          popupLayer.after(modelDia);\n        } else {\n          renderTo.prepend(modelDia);\n        }\n\n        return {\n          destroy: destroy\n        };\n      };\n\n      var createPopup = function createPopup(object, config, data, depth) {\n        var cur = this;\n        cur.setValue(\"$POPUPDATA\", data);\n        config = config || {};\n        var renderTo = config.renderTo || $(\"body\");\n        var showcloseBtn = config.closeBtn;\n        var bgOpacity = config.bgOpacity;\n\n        if (bgOpacity == undefined) {\n          bgOpacity = .1;\n        }\n\n        var submitFn = config.$attr(\"on/submit\");\n        var cancelFn = config.$attr(\"on/cancel\");\n        var cur = this;\n        var outter = $(\"<div></div>\");\n        outter.attr(\"popup_layer\", \"popup_layer\");\n        var bg = $(\"<div></div>\");\n        var wrap = $(\"<div></div>\");\n        var closeBtn = $(\"<button></button>\");\n        var span = $(\"<div></div>\");\n        bg.attr(\"id\", \"popup_background\");\n        bg.css(\"position\", \"fixed\");\n        bg.css(\"width\", \"100vw\");\n        bg.css(\"height\", \"100vh\");\n        bg.css(\"background-color\", \"rgba(0,0,0,\" + bgOpacity + \")\");\n        bg.css(\"top\", 0);\n        bg.css(\"left\", 0);\n        bg.css(\"z-index\", depth || 9999);\n        outter.css(\"z-index\", depth + 1 || 10000);\n\n        if (renderTo == \"self\") {\n          renderTo = cur.getSelfDom();\n        }\n\n        if (config.top != undefined) {\n          outter.css(\"top\", config.top);\n        }\n\n        if (config.left != undefined) {\n          outter.css(\"left\", config.left);\n        }\n\n        if (config.right != undefined) {\n          outter.css(\"right\", config.right);\n        }\n\n        if (config.bottom != undefined) {\n          outter.css(\"bottom\", config.bottom);\n        }\n\n        closeBtn.css(\"position\", \"absolute\");\n        closeBtn.css(\"right\", 5);\n        closeBtn.css(\"top\", 5);\n        closeBtn.css(\"z-index\", 10);\n        closeBtn.addClass(\"btn-sm btn-default\");\n        closeBtn.css({\n          \"border\": \"1px solid rgb(67, 133, 187)\",\n          \"color\": \"#ffffff\",\n          \"backgroundColor\": \"rgb(67, 133, 187)\"\n        });\n        span.addClass(\"glyphicon glyphicon-remove\");\n        closeBtn.append(span);\n\n        if (showcloseBtn != false) {\n          outter.append(closeBtn);\n        }\n\n        outter.append(wrap);\n        outter.attr(\"id\", \"pp\");\n        wrap.css(\"position\", \"relative\");\n        wrap.addClass(\"col-md-12\");\n        wrap.attr(\"id\", \"popup\");\n        outter.css(\"position\", \"absolute\");\n        outter.css(\"width\", config.width || \"400px\");\n        wrap.css(\"width\", \"100%\");\n        wrap.css(\"background-color\", \"#fff\");\n        wrap.css(\"box-shadow\", \"1px 1px 10px 1px rgba(0,0,0,.1)\");\n\n        var remove = function remove() {\n          outter.animate({\n            opacity: 0\n          }, 200);\n          outter.remove();\n          bg.remove();\n          cur.setValue(\"$POPUPDATA\", null);\n        };\n\n        closeBtn.on(\"click\", function (event) {\n          outter.remove();\n\n          if (cancelFn) {\n            cancelFn();\n          }\n        });\n        bg.on(\"click\", function (event) {\n          if (cancelFn) {\n            cancelFn();\n          }\n\n          outter.remove();\n          bg.remove();\n        });\n        var instance = freeboardBaseService(wrap);\n        instance.setMode(true);\n        object.layout = object.layout.$remapByChild(function (element) {\n          var rs = new cmethod(element);\n\n          rs.submit = function (obj) {\n            if (submitFn) {\n              submitFn(obj);\n            }\n\n            outter.remove();\n            bg.remove();\n          };\n\n          rs.cancel = function () {\n            if (cancelFn) {\n              cancelFn();\n            }\n\n            outter.remove();\n            bg.remove();\n          };\n\n          return rs;\n        });\n        instance.renderLayout(object);\n        renderTo.prepend(outter);\n        outter.addClass(\"block\");\n        outter.css(\"opacity\", 0);\n        outter.animate({\n          opacity: 1\n        }, 100);\n        bg.css(\"opacity\", 0);\n        bg.animate({\n          opacity: 1\n        }, 200);\n        $(\"body\").append(bg);\n      };\n\n      var createOverlay = function createOverlay(object, config, data, depth) {\n        var cur = this;\n        cur.setValue(\"$POPUPDATA\", data);\n        config = config || {};\n        var renderTo = config.renderTo || \"self\";\n        var bgOpacity = config.bgOpacity;\n        var submitFn = config.$attr(\"on/submit\");\n        var cancelFn = config.$attr(\"on/cancel\");\n        var cur = this;\n        var outter = $(\"<div></div>\");\n        var bg = $(\"<div></div>\");\n        var wrap = $(\"<div></div>\");\n        var closeBtn = $(\"<button></button>\");\n        var span = $(\"<div></div>\");\n        outter.css(\"z-index\", depth + 1 || 50);\n\n        if (renderTo == \"self\") {\n          renderTo = cur.getSelfDom();\n        }\n\n        if (config.top != undefined) {\n          outter.css(\"top\", config.top);\n        }\n\n        if (config.left != undefined) {\n          outter.css(\"left\", config.left);\n        }\n\n        if (config.right != undefined) {\n          outter.css(\"right\", config.right);\n        }\n\n        if (config.bottom != undefined) {\n          outter.css(\"bottom\", config.bottom);\n        }\n\n        outter.append(wrap);\n        wrap.css(\"position\", \"relative\");\n        wrap.addClass(\"col-md-12\");\n        wrap.attr(\"id\", \"popup\");\n        outter.css(\"position\", \"absolute\");\n        outter.css(\"width\", config.width || \"400px\");\n        wrap.css(\"width\", \"100%\");\n        bg.append(outter);\n        var instance = freeboardBaseService(wrap);\n        instance.setMode(true);\n        object.layout = object.layout.$remapByChild(function (element) {\n          var rs = new cmethod(element);\n\n          rs.submit = function (obj) {\n            if (submitFn) {\n              submitFn(obj);\n            }\n\n            outter.remove();\n            bg.remove();\n          };\n\n          rs.cancel = function () {\n            if (cancelFn) {\n              cancelFn();\n            }\n\n            outter.remove();\n            bg.remove();\n          };\n\n          return rs;\n        });\n        instance.renderLayout(object);\n        outter.addClass(\"block\");\n        renderTo.prepend(outter);\n      };\n\n      var toString = function toString(obj) {\n        if (typeof obj == \"function\") {\n          return obj.toString();\n        } else if (typeof obj == null) {\n          return \"null\";\n        } else if (_typeof(obj) == \"object\") {\n          return JSON.stringify(obj, null, 2);\n        } else if (typeof obj == \"string\") {\n          return obj;\n        } else if (typeof obj == \"number\") {\n          return obj + \"\";\n        } else if (_typeof(obj) == undefined) {\n          return \"undefined\";\n        } else {\n          return \"无效字符\";\n        }\n      };\n\n      cmethod.clearEvents = cmethod.prototype.clearEvents = function () {\n        for (var i in events) {\n          delete events[i];\n        }\n      };\n\n      _proto_.getView = function (data, callback) {\n        var view = data.item,\n            config = getConfig(data.path),\n            viewId = config && config.viewId || view.viewId,\n            viewCtrl = config && config.viewCtrl,\n            path = config && config.path,\n            match;\n\n        function getConfig(path) {\n          var testObj = {\n            view: {\n              regex: \"^\\\\s*viewId\\\\s*\\\\:\\\\s*(\\\\d+)\\\\s*$\",\n              handler: function handler(d) {\n                return {\n                  viewId: d\n                };\n              }\n            },\n            ctrl: {\n              regex: \"^\\\\s*viewCtrl\\\\s*\\\\:\\\\s*([-$\\\\w\\\\d]+)\\\\s*$\",\n              handler: function handler(d) {\n                return {\n                  viewCtrl: d\n                };\n              }\n            },\n            word: {\n              regex: \"^\\\\s*[\\\\w\\\\d]+\\\\s*$\",\n              handler: function handler(d) {\n                return {\n                  path: d\n                };\n              }\n            }\n          };\n\n          for (var i in testObj) {\n            match = new RegExp(testObj[i].regex).exec(path);\n\n            if (match) {\n              return testObj[i].handler(match[1]);\n            }\n          }\n\n          console.warn(\"无效配置项，采用默认视图ID\");\n        }\n\n        function parse(str) {\n          var json = null;\n\n          try {\n            json = JSON.parse(str);\n          } catch (e) {\n            console.warn(e);\n          }\n\n          return json;\n        }\n\n        if (viewCtrl) {\n          callback && callback(_proto_.createInjectorCtrlView(viewCtrl));\n        } else if (viewId) {\n          _proto_.getViewById(viewId, function (view) {\n            var json = parse(view.content),\n                groups = json.groups;\n\n            if (json) {\n              json.layout = path && groups ? groups.find(function (elem) {\n                return elem.path == path;\n              }) : json.layout;\n              callback && callback(json);\n            } else {\n              _proto_.Info('../../localdb/echartTemplate/baogang/nographe.json', function (nographe) {\n                callback && callback(nographe);\n              });\n            }\n          });\n        } else {\n          _proto_.Info('../../localdb/echartTemplate/' + view.default + \".json\", function (json) {\n            if (path) {\n              var find = json.groups.find(function (elem) {\n                return elem.path == path;\n              });\n              json.layout = find.layout;\n            }\n\n            callback && callback(json);\n          });\n        }\n      };\n\n      _proto_.createInjectorCtrlView = function (name) {\n        var json = {\n          \"layout\": {\n            \"type\": \"column\",\n            \"children\": [{\n              \"label\": \"视图嵌入\",\n              \"type\": \"injector\",\n              \"source\": \"INJECTOR\",\n              \"parameters\": {\n                \"icon\": {\n                  \"id\": 0,\n                  \"perfix\": \"ion\",\n                  \"css\": \"ion-ios-gear-outline\"\n                }\n              },\n              \"advance\": {\n                \"getfunction\": \"\",\n                \"expression\": \"expression = {\\n  on : {\\n      init : function(event){\\n          var target = event.target;\\n          target.renderCtrl(\\\"\" + name + \"\\\");\\n      }\\n  }\\n}\"\n              },\n              \"style\": {},\n              \"children\": []\n            }],\n            \"col\": 12\n          },\n          \"setting\": \"{\\n  \\\"theme\\\": \\\"steel\\\"\\n}\"\n        };\n        return json;\n      };\n\n      _proto_.createRenderCtrl = function (ctrlname) {\n        var defer = q.defer();\n        window._newScope ? window._newScope.$destroy() : null;\n        var div = document.createElement(ctrlname),\n            deps = [\"../ps-baogang/build/directive/\" + ctrlname + \".js|css\"];\n        psrequire(deps, function (render) {\n          try {\n            render(registerService);\n          } catch (e) {\n            console.error(e);\n          }\n\n          defer.resolve(div);\n        });\n        return defer.promise;\n      };\n\n      cmethod.prototype.getRootScope = function (attr) {\n        if (attr) {\n          return rootScope.$$childHead[attr];\n        } else {\n          return rootScope.$$childHead;\n        }\n      }; //解决跨域\n\n\n      cmethod.prototype.jsonp = function (url, funcname, callback, error) {\n        function random(num) {\n          var rs = \"\",\n              str = \"0123456789abcdefjhijklmnopqrstuvwxyz\";\n\n          for (var i = 0; i < num; i++) {\n            rs += str[parseInt(Math.random() * (str.length - 1))];\n          }\n\n          ;\n          return rs;\n        }\n\n        ;\n        var script = document.createElement(\"script\"),\n            name = \"fn_\" + random(16);\n        script.setAttribute(\"src\", url + \"&\" + funcname + \"=\" + name);\n        document.body.append(script);\n\n        window[name] = function (d) {\n          callback && callback(d);\n          delete window[name];\n        };\n\n        script.onerror = function (e) {\n          error(e);\n          script.remove();\n          script = null;\n          console.error(e);\n        };\n\n        script.onload = function (e) {\n          script.remove();\n          script = null;\n        };\n      };\n\n      _proto_.getState = function (id, callback) {\n        psTreeData(id).getState().then(function (res) {\n          callback(res);\n        });\n      };\n\n      _proto_.getChildren = function (id, callback) {\n        psTreeData(id).getChildren(function (n, i, l) {\n          return l < 2;\n        }).then(function (children) {\n          callback(children);\n        });\n      };\n\n      _proto_.resourceClick = function (paths, id, ext) {\n        var self = this;\n        psTreeData(id).getPathAndShowTreeLocation().then(function (d) {\n          var showTree = d.showTree,\n              location = d.location,\n              params = {\n            showTree: showTree,\n            id: id,\n            index: location\n          };\n\n          if (ext) {\n            params = extend(params, ext);\n          }\n\n          self.navigateTo(location, paths, params);\n        });\n      };\n\n      _proto_.$getKpisByModelId = function (modelId, callback) {\n        resourceUIService.modelLoader().then(function (models) {\n          var kpiDics = models[modelId].kpiDic,\n              rs = [];\n\n          for (var i in kpiDics) {\n            rs.push(kpiDics[i]);\n          }\n\n          callback(rs);\n        });\n      };\n\n      _proto_.getAllUnits = function (callback) {\n        unitService.getAllUnits(function (d) {\n          if (d.code == \"0\") {\n            callback(d.data);\n          }\n        });\n      };\n\n      cmethod.prototype.nextTick = function (fn) {\n        setTimeout(fn, 500);\n      };\n\n      cmethod.prototype.topDateString = function (diff, format) {\n        var cur = this;\n        var regexp = [{\n          exp: /d+/g,\n          divide: 24 * 3600 * 1000\n        }, {\n          exp: /h+/g,\n          divide: 3600 * 1000\n        }, {\n          exp: /n+/g,\n          divide: 60 * 1000\n        }, {\n          exp: /s+/g,\n          divide: 60\n        }];\n        var inx = 0;\n\n        var repeat = function repeat(inx, rest) {\n          if (regexp[inx]) {\n            var fd = regexp[inx].exp.exec(format);\n\n            if (fd) {\n              var num = Math.floor(rest / regexp[inx].divide);\n              rest = rest % regexp[inx].divide;\n              format = format.replace(regexp[inx].exp, num + \"\");\n            }\n\n            repeat(inx + 1, rest);\n          }\n        };\n\n        repeat(inx, diff);\n        return format;\n      };\n      /**\n       * 获得模板的属性\n       * 注意：首先查看缓存中是否存在\n       * @param {Object} modelId\n       * @param {Object} callback\n       */\n\n\n      cmethod.prototype.getAttrsByModelId = function (modelId, callback) {\n        resourceUIService.getAttrsByModelId(modelId, function (data) {\n          if (data.code == 0) {\n            var measureLocation = _typeof(data.data) === \"object\" && data.data.find(function (e) {\n              return e.name == \"MeasurePointLocate\";\n            });\n\n            if (_typeof(measureLocation) === \"object\") {\n              measureLocation.sourceValue = convertMeasureLoc(measureLocation.sourceValue);\n            }\n\n            callback(data.data);\n          }\n        });\n      };\n      /**\n       * 获得模板的数据项\n       * 注意：首先查看缓存中是否存在\n       * @param {Object} modelId\n       * @param {Object} callback\n       */\n\n\n      cmethod.prototype.getDataItemsByModelIdFromCache = function (id, callback) {\n        var kpisMap = {};\n        return resourceUIService.modelLoader().then(function (rootModelsDic) {\n          if (rootModelsDic[id]) {\n            kpisMap[id] = rootModelsDic[id]['kpiDic'];\n          }\n\n          callback(kpisMap);\n        });\n      };\n\n      cmethod.prototype.getDataItemsByModelId = function (modelId, callback) {\n        resourceUIService.getDataItemsByModelId(modelId, function (data) {\n          if (data.code == 0) {\n            callback(data.data);\n          }\n        });\n      };\n      /**\n       * 全局配置中保存域、客户、项目和设备同视图之间的关系\n       * @param {Object} domaintree\n       */\n\n\n      cmethod.prototype.saveDomainAreaLineTree = function (domaintree) {\n        var cur = this;\n\n        var mapFun = function mapFun(node) {\n          return {\n            id: node.id,\n            label: node.label,\n            view: {\n              viewId: node.view.viewId,\n              viewTitle: node.view.viewTitle\n            }\n          };\n        };\n\n        var view = domaintree.filterNode(function (node) {\n          return node.view;\n        });\n        var domains = domaintree.filterNode(function (node) {\n          return node.resourceType == \"domain\" && node.view;\n        }).map(mapFun);\n        var customers = domaintree.filterNode(function (node) {\n          return node.resourceType == \"customer\" && node.view;\n        }).map(mapFun);\n        var projects = domaintree.filterNode(function (node) {\n          return node.resourceType == \"project\" && node.view;\n        }).map(mapFun);\n        var devices = domaintree.filterNode(function (node) {\n          return node.resourceType == \"device\" && node.view;\n        }).map(mapFun);\n        var rs = {};\n\n        if (domains.length > 0) {\n          rs['domains'] = domains;\n        }\n\n        if (customers.length > 0) {\n          rs['customers'] = customers;\n        }\n\n        if (projects.length > 0) {\n          rs['projects'] = projects;\n        }\n\n        if (devices.length > 0) {\n          rs['devices'] = devices;\n        }\n\n        cur.saveEditorStatus(\"DomainAreaLineTree\", rs);\n      };\n      /**\n       * 获得域、客户、项目和设备的告警状态\n       * 更重要的是这里缓存了所有的设备\n       * @param {Object} callback\n       */\n\n\n      cmethod.prototype.getAttrsByResource = function (resource, callback) {\n        var measureLocation = resource.values.MeasurePointLocate;\n        resource.values.MeasurePointLocate = convertMeasureLoc(measureLocation);\n        callback(resource.values);\n      };\n\n      cmethod.prototype.getAttrsByResourceId = function (id, callback) {\n        this.getResourceById(id, function (resource) {\n          callback(resource.values);\n        });\n      }; // 打开请求转圈\n\n\n      cmethod.prototype.showLoading = function () {\n        psLoading.showLoading();\n      }; // 关闭请求转圈\n\n\n      cmethod.prototype.closeLoading = function () {\n        psLoading.closeLoading();\n      };\n\n      function toJSON(str) {\n        var obj = null;\n\n        try {\n          obj = JSON.parse(str);\n        } catch (e) {\n          console.warn(e);\n          return null;\n        }\n\n        return obj;\n      }\n\n      _proto_.getDomainAreaLineTree_alertStatus = _proto_.getDomainAreaLineTree = function (callback) {\n        var param = toJSON($state.params[\"#\"]) || {},\n            id = $state.params[\"id\"];\n        psTreeData.getAlertState().then(function (root) {\n          return id ? psTreeData(id).getState() : psTreeData(root[0].id).getState();\n        }).then(function (node) {\n          callback(node);\n        });\n      };\n\n      cmethod.prototype.fillEmpty = function (arr) {\n        var loop = function loop(inx, arr) {\n          inx = parseInt(inx);\n\n          if (!arr[inx]) {\n            var binx = inx;\n            var einx = inx;\n            var start = {\n              value: 0\n            };\n            var end = {\n              value: 0\n            };\n            binx--;\n\n            while (binx >= 0) {\n              if (arr[binx] != null) {\n                start = arr[binx];\n                break;\n              } else {\n                binx--;\n              }\n            }\n\n            einx++;\n\n            while (einx < arr.length) {\n              if (arr[einx] != null) {\n                end = arr[einx];\n                break;\n              } else {\n                einx++;\n              }\n            }\n\n            arr[inx] = {\n              value: (start.value + end.value) * (inx - binx) / (einx - binx)\n            };\n          }\n        };\n\n        for (var i in arr) {\n          loop(i, arr);\n        }\n      };\n\n      cmethod.prototype.getDateHandler = cmethod.prototype.dateHandler = function (dateString) {\n        var dh = dateHandler.init(dateString);\n        return dh;\n      };\n\n      cmethod.prototype.reStructSeries = function (returnData) {\n        var cur = this;\n        var removeDuplicate = [];\n\n        for (var i in returnData) {\n          var some = removeDuplicate.some(function (elem) {\n            return elem.kpiCode == returnData[i].kpiCode && elem.instance == returnData[i].instance && elem.arisingTime == returnData[i].arisingTime;\n          });\n\n          if (!some) {\n            removeDuplicate.push(returnData[i]);\n          }\n        }\n\n        returnData = removeDuplicate.map(function (elem) {\n          elem.time = dateHandler.init(elem.arisingTime);\n          return elem;\n        });\n\n        var sortByTIme = function sortByTIme(a, b) {\n          var t1 = a.time.getTime();\n          var t2 = b.time.getTime();\n          return t1 - t2;\n        };\n\n        returnData.sort(sortByTIme);\n        var rs = returnData.reduce(function (a, b) {\n          var kpiCode = b.kpiCode;\n          var ins = b.instance;\n          var attr = kpiCode + \"_\" + ins;\n          a[attr] = a[attr] || [];\n          a[attr].push(b);\n          return a;\n        }, {});\n\n        var getMinGap = function getMinGap(arr) {\n          var min = 100000000000000000000;\n          arr.reduce(function (a, b) {\n            var m = b.time.minus(a.time);\n\n            if (m == 0) {}\n\n            if (m < min) {\n              min = m;\n            }\n\n            return b;\n          });\n          return min;\n        };\n\n        var step = 10000000000000000000;\n\n        for (var i in rs) {\n          var minGap = getMinGap(rs[i]);\n\n          if (minGap < step) {\n            step = minGap;\n          }\n        }\n\n        var startTime = returnData[0].time;\n        var endTime = returnData[returnData.length - 1].time;\n        var xAxis = [];\n\n        while (startTime.before(endTime)) {\n          xAxis.push(startTime.clone());\n          startTime.addTimeStamp(step);\n        }\n\n        startTime.addTimeStamp(step);\n        xAxis.push(startTime.clone());\n\n        for (var i in rs) {\n          var dt = [];\n          xAxis.reduce(function (a, b) {\n            var time1 = a.getTime();\n            var time2 = b.getTime();\n            var find = rs[i].find(function (elem) {\n              var time = elem.time.getTime();\n              return time >= time1 && time < time2;\n            });\n\n            if (find) {\n              dt.push(find);\n            } else {\n              dt.push(null);\n            }\n\n            return b;\n          });\n          rs[i] = cur.fillEmpty(dt);\n        }\n\n        return {\n          series: rs,\n          xAxis: xAxis\n        };\n      };\n\n      cmethod.prototype.off = function (eventname, callback) {\n        var arr = events[eventname] || [];\n        arr.forEach(function (destroy) {\n          destroy();\n        });\n      };\n\n      cmethod.prototype.on = function on(eventname, callback) {\n        if (eventname === \"tree_resourceChange\") {\n          var id = $state.params.id;\n          id ? this.getResourceById(id, function (res) {\n            rootScope.$apply(function () {\n              callback({\n                resource: res || {}\n              });\n            });\n          }) : null;\n          return;\n        } else if (eventname === \"changeNavString\") {\n          cms2.getCurrentParents().then(function (parents) {\n            callback(parents.map(function (d) {\n              return d.label;\n            }).join(\" > \"));\n          }).catch(function (e) {\n            growl.error(e.message);\n          });\n        } else if (eventname === \"$destroy\") {\n          scope.$on(\"$destroy\", callback);\n        }\n\n        events[eventname] = events[eventname] || [];\n        events[eventname].push((scope || rootScope).$on(eventname, function (event, data) {\n          callback(data);\n        }));\n      };\n\n      cmethod.prototype.getEvents = function () {\n        return events;\n      };\n\n      cmethod.prototype.trigger = function (eventname, data, callback) {\n        rootScope.$broadcast(eventname, data);\n      };\n\n      cmethod.prototype.uploadFile1 = function (file, config, callback) {\n        config = config || {};\n        config.params = []; //设置一个队列，存放返回的内容\n\n        var group = config.group;\n        var cur = this;\n\n        var start = function start() {\n          var fileFormat = config.fileFormat || rootScope.fileFormat || \"|jpg|png|jpeg|bmp|gif|svg|\";\n          var queueLimit = 1;\n          var fileMaxSize = 1;\n          var urlParam = 'api/rest/upload/resourceFileUIService/uploadResourceFile'; //改成可以定义上传路径的接口\n\n          if (config.url) {\n            urlParam = config.url;\n          }\n\n          var uploader = new FileUploader({\n            url: configUIService.origin + '/' + urlParam + '',\n            withCredentials: true\n          });\n          uploader.filters.push({\n            name: 'imageFilter',\n            fn: function fn(item\n            /*{File|FileLikeObject}*/\n            , options) {\n              var nameAry = item.name.split(\".\");\n              var type = nameAry[nameAry.length - 1];\n\n              if (fileFormat.indexOf(type) == -1) {\n                growl.warning(\"文件格式仅支持\" + fileFormat + \"文件，请重新选择\", {});\n                return false;\n              }\n\n              if (item.size / 1024 > fileMaxSize * 10000) {\n                growl.warning(\"您选择的文件大于\" + fileMaxSize + \"0M，请重新选择\", {});\n                return false;\n              }\n\n              return true;\n            }\n          });\n\n          uploader.onWhenAddingFileFailed = function (item\n          /*{File|FileLikeObject}*/\n          , filter, options) {\n            console.info('onWhenAddingFileFailed', item, filter, options);\n          };\n\n          uploader.onCompleteItem = function (fileItem, response, status, headers) {\n            if (response && response.code == 0) {\n              var obj = {\n                value: {}\n              };\n              obj.label = fileItem.file.name;\n              obj.qualifiedName = response.data.qualifiedName;\n              obj.value.qualifiedName = response.data.qualifiedName;\n              config.params.push(obj);\n            } else {\n              growl.error(\"操作异常了，尝试重新刷新\", {});\n            }\n          };\n\n          uploader.clearQueue();\n          uploader.addToQueue(file);\n          uploader.queue.forEach(function (que) {\n            if (config.formData) {\n              que.formData = [config.formData];\n            } else {\n              que.formData = [{\n                resourceId: 0,\n                value: 'images/dashboardImage'\n              }];\n            }\n          });\n\n          uploader.onCompleteAll = function () {\n            uploader.clearQueue();\n            callback(config.params);\n          };\n\n          uploader.uploadAll();\n        };\n\n        if (group) {\n          cur.getAllConfigGroups(function (configGroups) {\n            var some = configGroups.some(function (elem) {\n              return elem.name == group;\n            });\n\n            if (some) {\n              start();\n            } else {\n              cur.saveConfigGroup({\n                label: \"图片缓存(\" + group + \")\",\n                name: group\n              }, function (event) {\n                start();\n              });\n            }\n          });\n        } else {\n          start();\n        }\n      };\n\n      cmethod.prototype.getKpiTypeByFilter = function (param, callback) {\n        resourceUIService.getKpiTypeByFilter(param, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.uploadResourceFile = function () {\n        var cur = this;\n        var service = \"\";\n        cur.postService(\"resourceFileUIService\", \"uploadResourceFile\");\n      };\n\n      cmethod.prototype.toFix = function (str, num) {\n        num = num || 4;\n        str = str || \"0\";\n        var cur = this;\n        var number = Number(str);\n        var le = Math.pow(10, num);\n        var res = parseInt(number * le) / le + \"\";\n        var len = res.split(\".\")[1] || \"\";\n\n        if (len == \"\") {\n          res += \".\";\n        }\n\n        for (var i = 0; i < num - len.length; i++) {\n          res += \"0\";\n        }\n\n        return res;\n      };\n\n      cmethod.prototype.uploadFile = function (file, config, callback) {\n        config = config || {};\n        var group = config.group;\n        var cur = this;\n\n        var start = function start() {\n          var param = config.config || {\n            domainPath: \"\",\n            groupName: group || \"dashboardImage\",\n            id: 0,\n            invalid: false,\n            key: \"\",\n            keyDesc: \"\",\n            label: \"\",\n            value: \"\"\n          };\n          var api = config.api || {\n            service: \"resourceFileUIService\",\n            method: \"uploadResourceFile\",\n            fun: \"uploadConfig\"\n          };\n          api.fun = \"upload\"; //宝钢用\n\n          var fileFormat = config.fileFormat || rootScope.fileFormat || \"|jpg|png|jpeg|bmp|gif|svg|\";\n          var queueLimit = 1;\n          var fileMaxSize = 10;\n          var uploader = new FileUploader({\n            url: configUIService.origin + '/api/rest/' + api.fun + '/' + api.service + '/' + api.method,\n            withCredentials: true\n          });\n          uploader.filters.push({\n            name: 'imageFilter',\n            fn: function fn(item\n            /*{File|FileLikeObject}*/\n            , options) {\n              var nameAry = item.name.split(\".\");\n              var type = nameAry[nameAry.length - 1];\n\n              if (fileFormat.indexOf(type) == -1) {\n                growl.warning(\"文件格式仅支持\" + fileFormat + \"文件，请重新选择\", {});\n                return false;\n              }\n\n              if (item.size / 1024 > fileMaxSize * 1000) {\n                growl.warning(\"您选择的文件大于\" + fileMaxSize + \"M，请重新选择\", {});\n                return false;\n              }\n\n              return true;\n            }\n          });\n\n          uploader.onWhenAddingFileFailed = function (item\n          /*{File|FileLikeObject}*/\n          , filter, options) {\n            console.info('onWhenAddingFileFailed', item, filter, options);\n          };\n\n          uploader.onCompleteItem = function (fileItem, response, status, headers) {\n            console.info('onCompleteItem', response);\n\n            if (response) {\n              if (response.code == 0) {\n                var url = response.data;\n                param.value = url;\n                growl.success(\"图片上传成功\", {});\n                configUIService.saveConfig(param, function (resultObj) {\n                  callback(resultObj);\n                });\n              } else {\n                growl.error(response.message, {});\n              }\n            } else {\n              growl.error(\"操作异常了，尝试重新刷新\", {});\n            }\n          };\n\n          uploader.clearQueue();\n          uploader.addToQueue(file);\n\n          if (uploader.queue.length > 0) {\n            var que = uploader.queue[0];\n            param.label = que.file.name;\n            configUIService.saveConfig(param, function (resultObj) {\n              if (resultObj.code == 0) {\n                var id = resultObj.data.id;\n                param.id = id;\n                que.formData = [{\n                  resourceId: id,\n                  value: 'images/dashboardImage',\n                  id: id\n                }];\n                que.upload();\n              }\n            });\n          }\n        };\n\n        if (group) {\n          cur.getAllConfigGroups(function (configGroups) {\n            var some = configGroups.some(function (elem) {\n              return elem.name == group;\n            });\n\n            if (some) {\n              start();\n            } else {\n              cur.saveConfigGroup({\n                label: \"图片缓存(\" + group + \")\",\n                name: group\n              }, function (event) {\n                start();\n              });\n            }\n          });\n        }\n      };\n\n      cmethod.prototype.init = function (dom, global, config) {\n        var render = config.render;\n        var cur = this;\n\n        if (typeof render !== \"function\") {\n          throw new Error(\"render function is needed!!\");\n        }\n\n        var expression, style, parameters, initFn;\n        $$.runExpression(cur.$attr(\"advance/expression\"), function (funRes) {\n          if (funRes.code == \"0\") {\n            var fnResult = funRes.data;\n            expression = fnResult ? fnResult : {};\n          } else {\n            expression = {}; //\n            //throw new Error(funRes.message);\n          }\n\n          initFn = expression.$attr(\"on/init\");\n          style = cur.$attr(\"style\");\n          parameters = cur.$attr(\"parameters\");\n\n          if (style) {\n            $(dom).css(style);\n          }\n\n          cur.render = function (data) {\n            dom.append(render(data, expression, style, parameters));\n          };\n\n          if (initFn) {\n            try {\n              initFn({\n                target: cur,\n                global: global\n              });\n            } catch (e) {\n              cur.growl(e.message);\n            }\n          } else {\n            dom.append(render({}, expression, style, parameters));\n          }\n        });\n      };\n\n      cmethod.prototype.getAlertValueList = function (callback) {\n        var param = ['alert', {\n          category: 'ci',\n          isRealTimeData: true,\n          timePeriod: 0,\n          kpiCodes: [\"alert_code_count\"]\n        }];\n        this.postService(\"kpiDataFlexService\", \"getKpiHierarchyValueList\", param, function (returnData) {\n          if (returnData.code == 0) {\n            callback(returnData);\n          }\n        });\n      };\n\n      cmethod.prototype.setSelfDom = function (dom) {\n        this.selfDom = dom;\n        Object.defineProperty(this, \"selfDom\", {\n          enumerable: false\n        });\n      };\n\n      cmethod.prototype.getGroups = function () {\n        //\n        return rootTarget.groups;\n      };\n\n      cmethod.prototype.getTheme = function (themeStr) {\n        if (rootTarget) {\n          var themeObj = JSONparse(rootTarget.setting) || {\n            theme: \"default\"\n          };\n          themeStr = themeStr || \"default\";\n          themeStr = themeStr == \"auto\" ? themeCompare[themeObj.theme || \"default\"] : themeStr;\n          return themeStr;\n        } else {\n          return \"default\";\n        }\n      };\n\n      cmethod.prototype.getPath = function (path) {\n        var find = rootTarget.groups.find(function (elem) {\n          return path == elem.path;\n        }) || {};\n        return find;\n      };\n\n      cmethod.prototype.addView = function (param, callback) {\n        viewFlexService.addView(param, function (event) {\n          if (event.code == 0) {\n            if (typeof callback == \"function\") {\n              callback({\n                code: 0,\n                msg: param.viewTitle + \"添加成功\",\n                data: event.data\n              });\n            }\n          } else {\n            if (typeof callback == \"function\") {\n              callback({\n                code: event.code,\n                msg: param.viewTitle + \"添加失败,\" + event.message\n              });\n            }\n          }\n        });\n      };\n\n      cmethod.prototype.updateView = function (param, callback) {\n        viewFlexService.updateView(param, function (event) {\n          if (event.code == 0) {\n            if (typeof callback == \"function\") {\n              callback({\n                code: 0,\n                msg: param.viewTitle + \"添加成功\",\n                data: event.data\n              });\n            }\n          } else {\n            if (typeof callback == \"function\") {\n              callback({\n                code: event.code,\n                msg: param.viewTitle + \"添加失败,\" + event.message\n              });\n            }\n          }\n        });\n      };\n\n      cmethod.prototype.getSelfDom = function () {\n        return this.selfDom;\n      };\n\n      cms.$cache = cms.$cache || {};\n\n      cmethod.prototype.getKpiDic = function () {\n        return cmethod.kpiDic;\n      };\n\n      cmethod.prototype.getResourceDic = function () {\n        return cmethod.resourceDic;\n      };\n\n      cmethod.prototype.getTimesByDay = function (num) {\n        return num * 24 * 3600 * 100;\n      };\n      /**\n       * 获得全局配置\n       * @param {Object} str\n       * @param {Object} callback\n       */\n\n\n      cmethod.prototype.getEditorStatus = function (str, callback) {\n        var cur = this;\n        cur.getConfigsByGroupName(str, function (configs) {\n          if (configs.length > 0) {\n            callback(JSON.parse(configs[0].value));\n          } else {\n            callback(null);\n          }\n        });\n      };\n\n      cmethod.prototype.getCurrentUser = function () {\n        return userLoginUIService.user;\n      };\n      /**\n       * 保存并返回全局配置\n       * @param {Object} str\n       * @param {Object} val\n       */\n\n\n      cmethod.prototype.saveEditorStatus = function (str, val, callback) {\n        var cur = this;\n\n        var saveConfig = function saveConfig(config) {\n          var param = {\n            label: \"设计器缓存\",\n            value: JSON.stringify(val),\n            groupName: str\n          };\n\n          if (config) {\n            param.id = config.id;\n          }\n\n          cur.saveConfig(param, function (event) {\n            callback && callback(event);\n          });\n        };\n\n        var start = function start() {\n          cur.getConfigsByGroupName(str, function (configs) {\n            if (configs.length == 0) {\n              saveConfig();\n            } else {\n              saveConfig(configs[0]);\n            }\n          });\n        };\n\n        cur.getAllConfigGroups(function (configGroups) {\n          var some = configGroups.some(function (elem) {\n            return elem.name == str;\n          });\n\n          if (!some) {\n            cur.saveConfigGroup({\n              label: \"设计器缓存\",\n              name: str\n            }, function (event) {\n              start();\n            });\n          } else {\n            start();\n          }\n        });\n      };\n\n      cmethod.prototype.splitData = function (valueList) {\n        var times = valueList.map(function (elem) {\n          return new Date(elem.arisingTime).getTime();\n        });\n        var timeSplit = times.reduce(function (a, b) {\n          if (a.indexOf(b) == -1) {\n            a.push(b);\n          }\n\n          return a;\n        }, []);\n        var structure = valueList.reduce(function (a, b) {\n          var attr = b.nodeId + \":\" + b.kpiCode;\n\n          if (!a[attr]) {\n            a[attr] = [];\n          } else {\n            a[attr].push({\n              time: new Date(b.arisingTime).getTime(),\n              value: b.value\n            });\n          }\n\n          return a;\n        }, {});\n\n        var inputEmpty = function inputEmpty(arr) {\n          var rs = [];\n\n          for (var i in timeSplit) {\n            var find = arr.find(function (elem) {\n              return elem.time == times[i];\n            });\n\n            if (find) {\n              rs.push(find);\n            } else {\n              rs.push({\n                value: '-',\n                time: timeSplit[i]\n              });\n            }\n          }\n\n          return rs;\n        };\n\n        for (var i in structure) {\n          structure[i] = inputEmpty(structure[i]);\n        }\n\n        structure.times = timeSplit;\n        return structure;\n      };\n\n      cmethod.prototype.createMsgBox = function (config) {\n        var cur = this;\n        var path = \"../localdb/echartTemplate/msgbox.json\";\n\n        var run = function run(data) {\n          createSystemPopup.call(cur, data, {\n            width: config.width || \"600px\",\n            title: config.title,\n            on: config.on\n          }, {\n            text: config.message\n          }, 100002);\n        };\n\n        Info.get(path, function (template) {\n          window[path] = template;\n          run(window[path]);\n        });\n      };\n\n      cmethod.prototype.setConsoleText = function (str) {\n        var cur = this;\n        cur.setValue(\"$CONSOLELOG\", \"\");\n      };\n\n      cmethod.prototype.console = function (obj, commontery) {\n        var cur = this;\n        var path = \"../../localdb/echartTemplate/console.json\";\n        var oldConsole = cur.getValue(\"$CONSOLELOG\") || \"\";\n\n        var createUnderscore = function createUnderscore(num) {\n          var rs = \"\";\n\n          for (var i = 0; i < num; i++) {\n            rs += \"-\";\n          }\n\n          return rs;\n        };\n\n        cur.setValue(\"$CONSOLELOG\", oldConsole + \"//\" + createUnderscore(40) + (commontery || \"\") + createUnderscore(40) + \"\\n\" + \"console.log = \" + toString(obj) + \"\\n//\" + createUnderscore(100) + \"\\n\");\n\n        var run = function run(data) {\n          if (route.current.$$route.controller == \"freeStyleCtrl\") {\n            createPopup.call(cur, data, {\n              width: \"100vw\",\n              bottom: 0\n            }, cur.getValue(\"$CONSOLELOG\"), 100002);\n          }\n        };\n\n        Info.get(path, function (template) {\n          window[path] = template;\n          run(window[path]);\n        });\n      };\n\n      cmethod.prototype.close = function () {\n        popIns = popIns && popIns.destroy();\n      };\n\n      cmethod.prototype.submit = function (d) {\n        popIns && this.setValue(\"$POPUPDATA\", d);\n        popIns = popIns && popIns.destroy();\n      };\n\n      _proto_.createSystemPopupByCtrlView = function (viewCtrl, config, dt) {\n        var cur = this;\n        this.getView({\n          path: \"viewCtrl:\" + viewCtrl,\n          item: {}\n        }, function (json) {\n          popIns = createSystemPopup.call(cur, json, {\n            width: config.width || \"600px\",\n            title: config.title,\n            top: config.top || \"40px\",\n            on: config.on,\n            bgOpacity: config.bgOpacity || \"1\"\n          }, dt, 100002);\n        });\n      };\n\n      cmethod.prototype.createSystemPopupByViewId = function (viewId, config, dt) {\n        var cur = this;\n        cur.getViewById(viewId, function (view) {\n          var json = $$.getViewContent(view);\n\n          if (json) {\n            popIns = createSystemPopup.call(cur, json, {\n              width: config.width || \"600px\",\n              title: config.title,\n              top: config.top || \"40px\",\n              on: config.on,\n              bgOpacity: config.bgOpacity || \"1\"\n            }, dt, 100002);\n          }\n        });\n      };\n\n      cmethod.prototype.createPopupByViewIdPath = function (viewId, path, config, dt) {\n        var curl = this; // 根据viewId查询当前的视图\n\n        viewFlexService.getViewById(viewId, function (d) {\n          var content = JSON.parse(d.data.content);\n          var find;\n\n          if (content.hasOwnProperty(\"groups\")) {\n            find = content.groups.find(function (elem) {\n              return elem.path == path;\n            }) || {};\n          } else if (content.hasOwnProperty(\"layout\")) {\n            find = content.layout;\n          } else {}\n\n          rootTarget = content;\n          createSystemPopup.call(curl, find, {\n            width: config.width || \"600px\",\n            title: config.title,\n            top: config.top || \"110px\",\n            on: config.on\n          }, dt, 100002);\n        });\n      };\n\n      cmethod.prototype.createSystemPopupByLocalPath = function (path, config, dt) {\n        var curl = this; // 根据viewId查询当前的视图\n\n        var viewId = $stateParams.viewId;\n        getViewByLocalId(viewId, path, function (d) {\n          createSystemPopup.call(curl, d, {\n            width: config.width || \"600px\",\n            title: config.title,\n            top: config.top || \"110px\",\n            on: config.on\n          }, dt, 100002);\n        });\n      };\n\n      cmethod.prototype.createSystemPopupByJsonName = function (jsonName, config, dt) {\n        var cur = this;\n        var path = \"../localdb/echartTemplate/\" + jsonName + \".json\";\n\n        var run = function run(data) {\n          createSystemPopup.call(cur, data, {\n            width: config.width || \"600px\",\n            title: config.title,\n            on: config.on\n          }, dt, 100002);\n        };\n\n        if (!window[path]) {\n          Info.get(path, function (template) {\n            window[path] = template;\n            run(window[path]);\n          });\n        } else {\n          run(window[path]);\n        }\n      };\n\n      cmethod.prototype.console = function (obj, commontery) {\n        var cur = this;\n        var path = \"../localdb/echartTemplate/console.json\";\n        var oldConsole = cur.getValue(\"$CONSOLELOG\") || \"\";\n\n        var createUnderscore = function createUnderscore(num) {\n          var rs = \"\";\n\n          for (var i = 0; i < num; i++) {\n            rs += \"-\";\n          }\n\n          return rs;\n        };\n\n        cur.setValue(\"$CONSOLELOG\", oldConsole + \"//\" + createUnderscore(40) + (commontery || \"\") + createUnderscore(40) + \"\\n\" + \"console.log = \" + toString(obj) + \"\\n//\" + createUnderscore(100) + \"\\n\");\n\n        var run = function run(data) {\n          if (route.current.$$route.controller == \"freeStyleCtrl\") {\n            createPopup.call(cur, data, {\n              width: \"100vw\",\n              bottom: 0\n            }, cur.getValue(\"$CONSOLELOG\"), 100002);\n          }\n        };\n\n        Info.get(path, function (template) {\n          window[path] = template;\n          run(window[path]);\n        });\n      };\n\n      cmethod.prototype.Info = function (path, callback) {\n        Info.get(path, function (template) {\n          callback(template);\n        });\n      };\n\n      cmethod.prototype.closePopup = function () {};\n\n      cmethod.prototype.getTimesByMonth = function (num) {\n        return num * 30 * 24 * 3600 * 100;\n      };\n\n      cmethod.prototype.setRootTarget = function (rt) {\n        rootTarget = rt;\n      };\n\n      cmethod.prototype.getKpiValueList = function (ci, kpi, time, callback, extension) {\n        /**\n         var nodeIds = removeSameValue(ci);\n         var kpiCodes = removeSameValue(kpi);\n         var queryInstances = extension.queryInstances;\n         var rs = [];\n         var cur = this;\n         function removeSameValue(arr) {\n        var rs = [];\n        for (var i in arr) {\n          if (rs.indexOf(arr[i]) == -1) {\n            rs.push(arr[i]);\n          }\n        }\n        return rs;\n        }\n         for(var i = 0; i < nodeIds.length; i++){\n        for(var j = 0; j < kpiCodes.length; j++){\n          var d = new Date().getTime();\n          for(var k = 0; k < 1000; k++){\n            rs.push({\n              nodeId : nodeIds[i],\n              kpiCode : kpiCodes[j],\n              instance : queryInstances,\n              value : parseInt(Math.random() * 100),\n              arisingTime : cur.getDateHandler(d).addSecond(k * 10).getDateString()\n            })\n          }\n        }\n        }\n          setTimeout(function(){\n        callback(rs);\n        }, 1000 * kpiCodes.length);\n         */\n        var removeSameValue = function removeSameValue(arr) {\n          var rs = [];\n\n          for (var i in arr) {\n            if (rs.indexOf(arr[i]) == -1) {\n              rs.push(arr[i]);\n            }\n          }\n\n          return rs;\n        };\n\n        var param = {\n          nodeIds: removeSameValue(ci),\n          kpiCodes: removeSameValue(kpi)\n        };\n\n        if (time) {\n          param.timePeriod = time;\n        }\n\n        if (0 == time) {\n          param.timePeriod = 0;\n        }\n\n        param = param.$extension(extension);\n        var extendstr = \"includeFields=kpiCode,value,nodeId,arisingTime,instance\"; // var extendstr = \"includeFields=kpiCode,values.view,nodeId,arisingTime,instance\";\n\n        kpiDataService.getKpiValList(param, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback([]);\n          }\n        }, extendstr);\n      };\n\n      cmethod.prototype.getKpiValueCi = function (ci, kpi, callback, extension) {\n        serviceCenterService.getValues(ci, kpi, extension).then(function (data) {\n          callback(data);\n        });\n      };\n\n      cmethod.prototype.createPopupBypath = function (path, config, data, isLocal) {\n        var cur = this; // var targetRoot = cur.getRootTarget();\n        // var find = targetRoot.groups.find(function (elem) {\n        //   return elem.path == path;\n        // });\n\n        var root = cur;\n\n        while (root.parent) {\n          root = root.parent;\n        }\n\n        var groups = root.root.groups;\n        var find = groups.find(function (elem) {\n          return elem.path == path;\n        }) || {};\n\n        if (route.current.$$route.controller != \"freeBoardCtrl\") {\n          if (find) {\n            var type = config.theme || \"default\";\n\n            if (type == \"default\") {\n              createPopup.call(cur, find, config, data);\n            } else if (type == \"system\") {\n              createSystemPopup.call(cur, find, config, data);\n            } else {\n              createPopup.call(cur, find, config, data);\n            }\n          }\n        }\n      };\n\n      cmethod.prototype.readImageFile = function (file, callback) {\n        if (typeof FileReader !== \"undefined\" && file.type.indexOf(\"image\") != -1) {\n          var reader = new FileReader();\n\n          reader.onload = function (evt) {\n            callback(evt.target.result);\n          };\n\n          reader.readAsDataURL(file);\n        }\n      };\n\n      cmethod.prototype.createOverlayBypath = function (path, config, data, isLocal) {\n        var cur = this;\n        var targetRoot = cur.getRootTarget();\n        var find = targetRoot.groups.find(function (elem) {\n          return elem.path == path;\n        });\n\n        if (route.current.$$route.controller != \"freeBoardCtrl\") {\n          if (find) {\n            createOverlay.call(cur, find, config, data);\n          }\n        }\n      };\n\n      cmethod.prototype.getPopupData = function () {\n        return this.getValue(\"$POPUPDATA\");\n      };\n\n      cmethod.prototype.createPopupByViewId = function (id, config, data) {\n        var cur = this;\n        cur.getViewById(id, function (view) {\n          var json = $$.getViewContent(view);\n\n          if (json) {\n            createPopup.call(cur, json, config, data);\n          }\n        });\n      };\n\n      cmethod.prototype.getDataHandlers = function (ci, kpi, callback, extension) {\n        return [{\n          id: 0,\n          label: \"不裁剪数据\",\n          text: \"function init(event){\\n    var global = event.global;\\n    var resources = event.resourceId;\\n    var kpis = event.kpiId;\\n    var timePeriod = event.timePeriod;\\n    var data = event.data;\\n    global.fire(\\\"renderList\\\", data);\\n}\"\n        }, {\n          id: 1,\n          label: \"适合线图的数据\",\n          text: \"function init(source){\\n  var formatter=function(elem){\\n    return elem.value;\\n   }\\n  return source.ci.getSeries(formatter);\\n}\"\n        }, {\n          id: 2,\n          label: \"适合饼图的数据\",\n          text: \"function init(source){\\n  var formatter=function(elem){\\n    return elem.value;\\n   }\\n  return source.ci.getSeries(formatter);\\n}\"\n        }, {\n          id: 3,\n          label: \"适合柱图的数据\",\n          text: \"function init(source){\\n  var formatter=function(elem){\\n    return elem.value;\\n   }\\n  return source.ci.getSeries(formatter);\\n}\"\n        }, {\n          id: 4,\n          label: \"适合柱图的数据\",\n          text: \"function init(source){\\n  var formatter=function(elem){\\n    return elem.value;\\n   }\\n  return source.ci.getSeries(formatter);\\n}\"\n        }];\n      };\n\n      cmethod.prototype.barOption = function () {\n        return {\n          title: {\n            text: 'ECharts 入门示例'\n          },\n          tooltip: {},\n          legend: {\n            data: ['销量']\n          },\n          xAxis: {\n            data: [\"衬衫\", \"羊毛衫\", \"雪纺衫\", \"裤子\", \"高跟鞋\", \"袜子\"]\n          },\n          yAxis: {},\n          series: [{\n            name: '销量',\n            type: 'bar',\n            data: [5, 20, 36, 10, 10, 20]\n          }]\n        };\n      };\n\n      cmethod.prototype.polylineOption = function () {\n        return {\n          title: {\n            text: '一天用电量分布',\n            subtext: '纯属虚构'\n          },\n          tooltip: {\n            trigger: 'axis',\n            axisPointer: {\n              type: 'cross'\n            }\n          },\n          toolbox: {\n            show: true,\n            feature: {\n              saveAsImage: {}\n            }\n          },\n          xAxis: {\n            type: 'category',\n            boundaryGap: false,\n            data: ['00:00', '01:15', '02:30', '03:45', '05:00', '06:15', '07:30', '08:45', '10:00', '11:15', '12:30', '13:45', '15:00', '16:15', '17:30', '18:45', '20:00', '21:15', '22:30', '23:45']\n          },\n          yAxis: {\n            type: 'value',\n            axisLabel: {\n              formatter: '{value} W'\n            },\n            axisPointer: {\n              snap: true\n            }\n          },\n          visualMap: {\n            show: false,\n            dimension: 0,\n            pieces: [{\n              lte: 6,\n              color: 'green'\n            }, {\n              gt: 6,\n              lte: 8,\n              color: 'red'\n            }, {\n              gt: 8,\n              lte: 14,\n              color: 'green'\n            }, {\n              gt: 14,\n              lte: 17,\n              color: 'red'\n            }, {\n              gt: 17,\n              color: 'green'\n            }]\n          },\n          series: [{\n            name: '用电量',\n            type: 'line',\n            smooth: true,\n            data: [300, 280, 250, 260, 270, 300, 550, 500, 400, 390, 380, 390, 400, 500, 600, 750, 800, 700, 600, 400],\n            markArea: {\n              data: [[{\n                name: '早高峰',\n                xAxis: '07:30'\n              }, {\n                xAxis: '10:00'\n              }], [{\n                name: '晚高峰',\n                xAxis: '17:30'\n              }, {\n                xAxis: '21:15'\n              }]]\n            }\n          }]\n        };\n      };\n\n      cmethod.prototype.pieOption = function () {\n        return {\n          title: {\n            text: '某站点用户访问来源',\n            subtext: '纯属虚构',\n            x: 'center'\n          },\n          tooltip: {\n            trigger: 'item',\n            formatter: \"{a} <br/>{b} : {c} ({d}%)\"\n          },\n          legend: {\n            orient: 'vertical',\n            left: 'left',\n            data: ['直接访问', '邮件营销', '联盟广告', '视频广告', '搜索引擎']\n          },\n          series: [{\n            name: '访问来源',\n            type: 'pie',\n            radius: '55%',\n            center: ['50%', '60%'],\n            data: [{\n              value: 335,\n              name: '直接访问'\n            }, {\n              value: 310,\n              name: '邮件营销'\n            }, {\n              value: 234,\n              name: '联盟广告'\n            }, {\n              value: 135,\n              name: '视频广告'\n            }, {\n              value: 1548,\n              name: '搜索引擎'\n            }],\n            itemStyle: {\n              emphasis: {\n                shadowBlur: 10,\n                shadowOffsetX: 0,\n                shadowColor: 'rgba(0, 0, 0, 0.5)'\n              }\n            }\n          }]\n        };\n      };\n\n      cmethod.prototype.scatter3DOption = function () {\n        var hours = ['12a', '1a', '2a', '3a', '4a', '5a', '6a', '7a', '8a', '9a', '10a', '11a', '12p', '1p', '2p', '3p', '4p', '5p', '6p', '7p', '8p', '9p', '10p', '11p'];\n        var days = ['1', '2', '3', '4', '5', '6', '7'];\n        var data = [[12, 0, 10], [3, 3, 15], [4, 3, 20], [10, 1, 12], [3, 0, 14]];\n        var option = {\n          tooltip: {},\n          visualMap: {\n            right: 0,\n            max: 20,\n            inRange: {\n              color: ['#313695', '#4575b4', '#74add1', '#abd9e9', '#e0f3f8', '#ffffbf', '#fee090', '#fdae61', '#f46d43', '#d73027', '#a50026']\n            }\n          },\n          xAxis3D: {\n            type: 'category',\n            data: hours\n          },\n          yAxis3D: {\n            type: 'category',\n            data: days\n          },\n          zAxis3D: {\n            type: 'value'\n          },\n          grid3D: {\n            boxWidth: 160,\n            boxHeight: 40,\n            boxDepth: 90,\n            viewControl: {// projection: 'orthographic'\n            },\n            // environment: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n            //   offset: 0, color: '#00aaff' // 天空颜色\n            // }, {\n            //   offset: 0.7, color: '#998866' // 地面颜色\n            // }, {\n            //   offset: 1, color: '#998866' // 地面颜色\n            // }], false),\n            splitLine: {\n              show: true\n            },\n            axisPointer: {\n              show: true\n            },\n            light: {\n              main: {\n                intensity: 1.4 //                    shadow: true\n\n              },\n              ambient: {\n                intensity: 0.3\n              }\n            }\n          },\n          series: [{\n            name: \"散点图\",\n            type: 'scatter3D',\n            symbol: 'arrow',\n            //            data: [{\n            //                // 数据项的名称\n            //                name: '数据1',\n            //                // 数据项值\n            //                value: [12, 3, 10]\n            //            }, {\n            //                name: '数据2',\n            //                value: [3, 5, 15],\n            //                itemStyle:{\n            //                    color:[255, 233, 1, 0.5]\n            //                }\n            //            }],\n            data: data.map(function (item) {\n              return {\n                value: [item[1], item[0], item[2]]\n              };\n            }),\n            shading: 'lambert',\n            label: {\n              textStyle: {\n                fontSize: 12,\n                borderWidth: 1\n              } //                formatter: '{a}: {b}'\n\n            },\n            emphasis: {\n              label: {\n                textStyle: {\n                  fontSize: 20,\n                  color: '#900'\n                }\n              },\n              itemStyle: {\n                color: '#900'\n              }\n            }\n          }]\n        };\n        return option;\n      };\n\n      cmethod.prototype.bar3DOption = function () {\n        var hours = ['12a', '1a', '2a', '3a', '4a', '5a', '6a', '7a', '8a', '9a', '10a', '11a', '12p', '1p', '2p', '3p', '4p', '5p', '6p', '7p', '8p', '9p', '10p', '11p'];\n        var days = ['1', '2', '3', '4', '5', '6', '7'];\n        var data = [[12, 0, 10], [3, 3, 15], [4, 3, 20], [10, 1, 12], [3, 0, 14]];\n        var option = {\n          tooltip: {},\n          visualMap: {\n            max: 20,\n            inRange: {\n              color: ['#313695', '#4575b4', '#74add1', '#abd9e9', '#e0f3f8', '#ffffbf', '#fee090', '#fdae61', '#f46d43', '#d73027', '#a50026']\n            }\n          },\n          xAxis3D: {\n            type: 'category',\n            data: hours\n          },\n          yAxis3D: {\n            type: 'category',\n            data: days\n          },\n          zAxis3D: {\n            type: 'value'\n          },\n          grid3D: {\n            boxWidth: 200,\n            boxHeight: 40,\n            boxDepth: 90,\n            light: {\n              main: {\n                intensity: 1.2\n              },\n              ambient: {\n                intensity: 0.3\n              }\n            }\n          },\n          series: [{\n            type: 'bar3D',\n            data: data.map(function (item) {\n              return {\n                value: [item[1], item[0], item[2]]\n              };\n            }),\n            shading: 'color',\n            label: {\n              show: false,\n              textStyle: {\n                fontSize: 16,\n                borderWidth: 1\n              }\n            },\n            itemStyle: {\n              opacity: 0.8\n            },\n            emphasis: {\n              label: {\n                textStyle: {\n                  fontSize: 20,\n                  color: '#900'\n                }\n              },\n              itemStyle: {\n                color: '#900'\n              }\n            }\n          }]\n        };\n        return option;\n      };\n\n      cmethod.prototype.line3DOption = function () {\n        var hours = ['12a', '1a', '2a', '3a', '4a', '5a', '6a', '7a', '8a', '9a', '10a', '11a', '12p', '1p', '2p', '3p', '4p', '5p', '6p', '7p', '8p', '9p', '10p', '11p'];\n        var days = ['1', '2', '3', '4', '5', '6', '7'];\n        var data = [[12, 0, 10], [3, 3, 15], [4, 3, 20], [10, 1, 12], [3, 0, 14]];\n        var option = {\n          tooltip: {},\n          visualMap: {\n            max: 20,\n            inRange: {\n              color: ['#313695', '#4575b4', '#74add1', '#abd9e9', '#e0f3f8', '#ffffbf', '#fee090', '#fdae61', '#f46d43', '#d73027', '#a50026']\n            }\n          },\n          xAxis3D: {\n            type: 'category',\n            data: hours\n          },\n          yAxis3D: {\n            type: 'category',\n            data: days\n          },\n          zAxis3D: {\n            type: 'value'\n          },\n          grid3D: {\n            boxWidth: 180,\n            boxHeight: 40,\n            boxDepth: 90,\n            light: {\n              main: {\n                intensity: 1.2\n              },\n              ambient: {\n                intensity: 0.3\n              }\n            }\n          },\n          series: [{\n            type: 'line3D',\n            data: data.map(function (item) {\n              return {\n                value: [item[1], item[0], item[2]]\n              };\n            }),\n            shading: 'color',\n            label: {\n              show: false,\n              textStyle: {\n                fontSize: 16,\n                borderWidth: 1\n              }\n            },\n            itemStyle: {\n              opacity: 0.8\n            },\n            emphasis: {\n              label: {\n                textStyle: {\n                  fontSize: 20,\n                  color: '#900'\n                }\n              },\n              itemStyle: {\n                color: '#900'\n              }\n            }\n          }]\n        };\n        return option;\n      };\n\n      cmethod.prototype.copyToClipBoard = function (dom, str, callback) {\n        dom.attr(\"data-clipboard-text\", str);\n        setTimeout(function () {\n          $$.loadExternalJs(['clipboard'], function (Clipboard) {\n            var clipboard = new Clipboard(dom[0]);\n            clipboard.on('success', function (e) {\n              if (callback) {\n                callback();\n              }\n\n              e.clearSelection();\n            });\n            clipboard.on('error', function (e) {\n              console.error('Action:', e.action);\n              console.error('Trigger:', e.trigger);\n            });\n          });\n        });\n      };\n\n      cmethod.prototype.getIcons = function (callback) {\n        var path = \"../../localdb/bootstrapIcon.json\";\n        Info.get(path, function (icons) {\n          callback(icons);\n        });\n      };\n\n      cmethod.prototype.getCtrlGroupDemos = function () {\n        return [{\n          label: \"普通文字\",\n          expression: \"expression = {\\n  on : {\\n    init : function(event){\\n      var target = event.target;\\n      var global = event.global;\\n      var ctrlGroups = [\\n       [{\\n          type : \\\"label\\\",\\n          value : \\\"普通标签\\\",\\n          class : \\\"col-md-12\\\"\\n        }]\\n      ];\\n      event.target.render(ctrlGroups);\\n    }\\n  }\\n}\"\n        }, {\n          label: \"基本按钮\",\n          expression: 'expression = {\\n  on : {\\n    init : function(event){\\n      var target = event.target;\\n      var global = event.global;\\n      var ctrlGroups = [\\n       [{\\n          type : \"button\",\\n          value : \"按钮\",\\n          icon : \"glyphicon glyphicon-search\",\\n          btnclass : \"btn btn-primary\",\\n          class : \"col-md-12\",\\n          on : {\\n            click : function(elem){\\n              target.console(elem);\\n            }\\n          }\\n        }]\\n      ];\\n      event.target.render(ctrlGroups);\\n    }\\n  }\\n}'\n        }, {\n          label: \"按钮组\",\n          expression: \"expression = {\\n  on : {\\n    init : function(event){\\n      var target = event.target;\\n      var global = event.global;\\n      var ctrlGroups = [\\n        [{\\n          type : \\\"buttonGroup\\\",\\n          class : \\\"col-md-12\\\",\\n          content : [{\\n            type : \\\"button\\\",\\n            value : \\\"保存\\\",\\n            icon : \\\"glyphicon glyphicon-save\\\",\\n            btnclass : \\\"btn btn-primary\\\",\\n            on : {\\n              click : function(elem){\\n              }\\n            }\\n          },{\\n            type : \\\"button\\\",\\n            value : \\\"取消\\\",\\n            icon : \\\"glyphicon glyphicon-remove\\\",\\n            btnclass : \\\"btn btn-default\\\",\\n            on : {\\n              click : function(elem){\\n              }\\n            }\\n          }]\\n        }]\\n      ];\\n      event.target.render(ctrlGroups);\\n    }\\n  }\\n}\"\n        }, {\n          label: \"复制粘贴按钮\",\n          expression: \"expression = {\\n  on : {\\n    init : function(event){\\n      var target = event.target;\\n      var global = event.global;\\n      var ctrlGroups = [\\n       [{\\n          type : \\\"clipboardButton\\\",\\n          value : \\\"复制到剪切板\\\",\\n          icon : \\\"glyphicon glyphicon-save\\\",\\n          btnclass : \\\"btn btn-primary\\\",\\n          clipboardText : \\\"123456\\\",\\n          class : \\\"col-md-12\\\",\\n          on : {\\n            save : function(elem){\\n              target.growl(\\\"保存到剪切板\\\");\\n            }\\n          }\\n        }]\\n      ];\\n      event.target.render(ctrlGroups);\\n    }\\n  }\\n}\"\n        }, {\n          label: \"单选下拉框\",\n          expression: \"expression = {\\n  on : {\\n    init : function(event){\\n      var target = event.target;\\n      var global = event.global;\\n      var options = [{\\n        id : 0,\\n        label : \\\"第一条\\\"\\n      },{\\n        id : 1,\\n        label : \\\"第二条\\\"\\n      }];\\n      var ctrlGroups = [\\n        [{\\n          type : \\\"select\\\",\\n          value : 0,\\n          class : \\\"col-md-12\\\",\\n          options : options,\\n          format : {\\n            id : \\\"id\\\",\\n            label : \\\"label\\\"\\n          },\\n          on : {\\n            change : function(elem){\\n\"\n        }, {\n          label: \"多选下拉框\",\n          expression: \"expression = {\\n  on : {\\n    init : function(event){\\n      var target = event.target;\\n      var global = event.global;\\n      var options = [{\\n        id : 0,\\n        label : \\\"第一条\\\"\\n      },{\\n        id : 1,\\n        label : \\\"第二条\\\"\\n      }];\\n      var ctrlGroups = [\\n        [{\\n          type : \\\"multiSelect\\\",\\n          value : 0,\\n          class : \\\"col-md-12\\\",\\n          options : options,\\n          format : {\\n            id : \\\"id\\\",\\n            label : \\\"label\\\"\\n          },\\n          on : {\\n            change : function(elem){\\n\"\n        }, {\n          label: \"数结构下拉框\",\n          expression: \"expression = {\\n  on : {\\n    init : function(event){\\n      var target = event.target;\\n      var global = event.global;\\n      var ctrlGroups = [\\n       [{\\n          type : \\\"clipboardButton\\\",\\n          value : \\\"复制到剪切板\\\",\\n          icon : \\\"glyphicon glyphicon-save\\\",\\n          btnclass : \\\"btn btn-primary\\\",\\n          clipboardText : \\\"123456\\\",\\n          class : \\\"col-md-12\\\",\\n          on : {\\n            save : function(elem){\\n              target.growl(\\\"保存到剪切板\\\");\\n            }\\n          }\\n        }]\\n      ];\\n      event.target.render(ctrlGroups);\\n    }\\n  }\\n}\"\n        }, {\n          label: \"自动搜索下拉框\",\n          expression: \"expression = {\\n  on : {\\n    init : function(event){\\n      var target = event.target;\\n      var global = event.global;\\n      var ctrlGroups = [\\n       [{\\n          type : \\\"clipboardButton\\\",\\n          value : \\\"复制到剪切板\\\",\\n          icon : \\\"glyphicon glyphicon-save\\\",\\n          btnclass : \\\"btn btn-primary\\\",\\n          clipboardText : \\\"123456\\\",\\n          class : \\\"col-md-12\\\",\\n          on : {\\n            save : function(elem){\\n              target.growl(\\\"保存到剪切板\\\");\\n            }\\n          }\\n        }]\\n      ];\\n      event.target.render(ctrlGroups);\\n    }\\n  }\\n}\"\n        }];\n      };\n\n      function parseJson(str) {\n        var objLike = new RegExp(\"^\\\\{.*\\\\}$\", \"g\");\n        var arrLike = new RegExp(\"^\\\\[.*\\\\]$\", \"g\");\n\n        if (objLike.test(str) || arrLike.test(str)) {\n          return JSON.parse(str);\n        } else {\n          return null;\n        }\n      }\n\n      cmethod.prototype.getRoleByID = function (roleID, callback) {\n        var roleArr = roleID.split(\",\").map(function (e) {\n          return parseInt(e);\n        });\n        userEnterpriseService.queryEnterpriseRole(function (returnObj) {\n          if (returnObj.code == 0) {\n            var role = returnObj.data.find(function (item) {\n              //\n              if (roleArr.indexOf(item.roleID) != -1) {\n                return parseJson(item.values);\n              }\n\n              ;\n              return false;\n            });\n            callback(role);\n          }\n        });\n      };\n\n      cmethod.prototype.triggerSocket = function (config) {\n        SwSocket.simuSend(config);\n      };\n\n      cmethod.prototype.getToolsMenu = function () {\n        /**\n         return [{\n        label: \"API调用\",\n        path: \"apicall\"\n        }, {\n        label: \"绘制自定义视图\",\n        path: \"drawechart\"\n        }, {\n        label: \"根据ID查询设备模型信息\",\n        path: \"idSelector\"\n        }, {\n        label: \"SCP路径\",\n        path: \"scp\"\n        },{\n        label: \"项目模版\",\n        url: \"projectlist\"\n        },{\n        label: \"图标样式\",\n        url: \"icon\"\n        }];*/\n        return [{\n          label: \"API调用\",\n          url: \"apiCall\"\n        }, {\n          label: \"绘制自定义视图\",\n          path: \"drawechart\"\n        },\n        /*{\n                label: \"根据ID查询设备模型信息\",\n                path: \"idSelector\"\n                }, */\n        {\n          label: \"SCP路径\",\n          url: \"scp\"\n        }, {\n          label: \"项目模版\",\n          url: \"projectlist\"\n        }, {\n          label: \"图标样式\",\n          url: \"icon\"\n        }, {\n          label: \"JS代码转换字符串\",\n          url: \"jstostring\"\n        }, {\n          label: \"批量导出导入视图或配置项\",\n          url: \"export\"\n        }, {\n          label: \"输入框组\",\n          url: \"ctrlGroupDemo\"\n        }];\n      };\n\n      cmethod.prototype.getHelpMenu = function () {\n        return [{\n          label: \"布局设置\",\n          pdf: \"layout\"\n        }, {\n          label: \"组件\",\n          url: \"control\",\n          children: [{\n            label: \"常用组件\",\n            url: \"common_ctrl\",\n            children: [{\n              label: \"文字\",\n              pdf: \"text\"\n            }, {\n              label: \"图片\",\n              pdf: \"image\"\n            }, {\n              label: \"控制板1\",\n              pdf: \"control1\"\n            }, {\n              label: \"控制板2\",\n              pdf: \"control2\"\n            }, {\n              label: \"TAB\",\n              pdf: \"tab\"\n            }, {\n              label: \"开关\",\n              pdf: \"switch\"\n            }]\n          }, {\n            label: \"功能组件\",\n            url: \"functional_ctrl\",\n            children: [{\n              label: \"天气信息\",\n              pdf: \"weather\"\n            }]\n          }, {\n            label: \"视图组件\",\n            url: \"echart_ctrl\",\n            children: [{\n              label: \"线图\",\n              pdf: \"line\"\n            }, {\n              label: \"饼图\",\n              pdf: \"pie\"\n            }, {\n              label: \"柱图\",\n              pdf: \"bar\"\n            }, {\n              label: \"仪表盘\",\n              pdf: \"gauge\"\n            }, {\n              label: \"散点图\",\n              pdf: \"scatter\",\n              show: false\n            }]\n          }, {\n            label: \"高级组件\",\n            url: \"advance_ctrl\",\n            children: [{\n              label: \"地图扩展\",\n              pdf: \"baidumap\"\n            }, {\n              label: \"视图嵌入\",\n              pdf: \"injector\"\n            }, {\n              label: \"轮播组件\",\n              pdf: \"echart_ctrl\"\n            }, {\n              label: \"高级图表\",\n              pdf: \"advance_ctrl\"\n            }, {\n              label: \"输入框组\",\n              pdf: \"ctrlgroup\"\n            }, {\n              label: \"伪TAB样式\",\n              pdf: \"faketab\"\n            }, {\n              label: \"重复单元\",\n              pdf: \"repeat\"\n            }]\n          }]\n        }, {\n          label: \"功能模块\",\n          url: \"tool\",\n          children: [{\n            label: \"数据统计标签\",\n            pdf: \"advance_ctrl\"\n          }, {\n            label: \"百分比状态条\",\n            pdf: \"advance_ctrl\"\n          }, {\n            label: \"环比标签\",\n            pdf: \"advance_ctrl\"\n          }, {\n            label: \"项目组态\",\n            pdf: \"advance_ctrl\"\n          }, {\n            label: \"设备（列表）\",\n            pdf: \"advance_ctrl\"\n          }, {\n            label: \"工单（列表）\",\n            pdf: \"advance_ctrl\"\n          }, {\n            label: \"告警（列表）\",\n            pdf: \"advance_ctrl\"\n          }, {\n            label: \"线图模板\",\n            pdf: \"advance_ctrl\"\n          }, {\n            label: \"告警趋势\",\n            pdf: \"advance_ctrl\"\n          }, {\n            label: \"设备分布\",\n            pdf: \"advance_ctrl\"\n          }, {\n            label: \"地图分布\",\n            pdf: \"advance_ctrl\"\n          }, {\n            label: \"设备地图列表\",\n            pdf: \"advance_ctrl\"\n          }, {\n            label: \"最近一周告警\",\n            pdf: \"advance_ctrl\"\n          }]\n        }, {\n          label: \"导入视图\",\n          pdf: \"import\"\n        }, {\n          label: \"实例\",\n          url: \"example\",\n          show: false\n        }, {\n          label: \"API\",\n          pdf: \"commonMethod\"\n        }];\n      };\n\n      cmethod.prototype.getSignalShipInfo = function (id, callback) {\n        thridPartyApiService.getSignalShipInfo(id, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getManyShipInfo = function (ids, callback) {\n        thridPartyApiService.getManyShipInfo(ids, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getShipTrack = function (id, start, end, callback) {\n        thridPartyApiService.getShipTrack(id, start, end, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getAllConfigs = function (callback) {\n        configUIService.getAllConfigs(function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getAllConfigGroups = function (callback) {\n        configUIService.getAllConfigGroups(function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getConfigsByGroupName = function (configGroupName, callback) {\n        configUIService.getConfigsByGroupName(configGroupName, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.saveConfig = function (config, callback) {\n        configUIService.saveConfig(config, function (event) {\n          if (event.code == 0) {\n            if (typeof callback == \"function\") {\n              callback({\n                code: 0,\n                msg: config.label + \"添加成功\"\n              });\n            }\n          } else {\n            if (typeof callback == \"function\") {\n              callback({\n                code: event.code,\n                msg: config.label + \"添加失败,原因\" + event.message\n              });\n            }\n          }\n        });\n      };\n\n      cmethod.prototype.saveConfigGroup = function (configGroup, callback) {\n        configUIService.saveConfigGroup(configGroup, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.deleteConfig = function (configId, callback) {\n        configUIService.deleteConfig(configId, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.deleteConfigGroup = function (groupId, callback) {\n        configUIService.deleteConfigGroup(groupId, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.createInfoHtml = function (obj) {\n        var str = \"\"; // var str = obj.label + \"<br><hr/>\";\n\n        window.onclickHandler = function (event) {\n          var key = event.target.id + \"&\" + event.target.name;\n\n          if (clickFnDic[key]) {\n            clickFnDic[key](event.target.name);\n          }\n        };\n\n        var createContent = function createContent(cont) {\n          return \"<label><span>\" + cont.label + \":</span><span>\" + cont.value + \"</span></label><br>\";\n        };\n\n        var createButton = function createButton(cont) {\n          var clickFn = cont.$attr(\"on/click\");\n          var key = cont.label + \"&\" + cont.value;\n          clickFnDic[key] = clickFn;\n          var dataBtn = \"<button id='\" + cont.label + \"' name='\" + cont.value + \"' onclick='onclickHandler(event)'>\" + cont.label + \"</button>\"; //var dataBtn = \"<button id='\"+cont.label+\"' onclick='fnOK(\"+cont.value+\")'>\"+cont.label +\"</button>\";\n\n          return dataBtn;\n        };\n\n        for (var i in obj.content) {\n          if (!obj.content[i].type || obj.content[i].type == \"label\") {\n            str += createContent(obj.content[i]);\n          } else if (obj.content[i].type == \"button\") {\n            str += createButton(obj.content[i]);\n          }\n        }\n\n        return str;\n      };\n\n      cmethod.prototype.createShipShape = function (width, length, trailWidth, trailLength, headWidth, headLength) {\n        var RIGHTOFFSET = .1;\n        var leftBottomPoint = [-width / 2 * trailWidth, -length / 2];\n        var rightBottomPoint = [width / 2 * trailWidth, -length / 2];\n        var rightBottomPoint_1 = [(1 - RIGHTOFFSET) * width / 2, (trailLength / 2 - 1) * length / 2];\n        var rightlowerPoint = [width / 2, (trailLength - 1) * length / 2];\n        var rightupperPoint = [width / 2 * 1.4, (1 / 2 - headLength) * length];\n        var rightupperPoint_1 = [headWidth / 2 * width, (1 / 2 - headLength / 3) * length];\n        var topPoint1 = [width * .1, length / 2 * .99];\n        var topPoint = [0, length / 2];\n        var topPoint2 = [-width * .1, length / 2 * .99];\n        var leftupperPoint_1 = [-headWidth / 2 * width, (1 / 2 - headLength / 3) * length];\n        var leftupperPoint = [-width / 2 * 1.4, (1 / 2 - headLength) * length];\n        var leftlowerPoint = [-width / 2, (trailLength - 1) * length / 2];\n        var leftBottomPoint_1 = [-(1 - RIGHTOFFSET) * width / 2, (trailLength / 2 - 1) * length / 2];\n        return [leftBottomPoint, rightBottomPoint, rightBottomPoint_1, rightlowerPoint, rightupperPoint, rightupperPoint_1, topPoint1, topPoint, topPoint2, leftupperPoint_1, leftupperPoint, leftlowerPoint, leftBottomPoint_1, leftBottomPoint];\n      };\n\n      cmethod.prototype.renderExcel = function (name, filename, json) {\n        require(['table2excel'], function () {\n          var table = $(\"<table></table>\");\n          table.attr(\"id\", \"table2excel\");\n          var thead = $(\"<thead></thead>\");\n          var tbody = $(\"<tbody></tbody>\");\n\n          var loopTr = function loopTr(dt) {\n            var tr = $(\"<tr></tr>\");\n\n            var loopTd = function loopTd(elem) {\n              var td = $(\"<td></td>\");\n              td.text(elem);\n              return td;\n            };\n\n            for (var i in dt) {\n              tr.append(loopTd(dt[i]));\n            }\n\n            return tr;\n          };\n\n          var tr = $(\"<tr></tr>\");\n\n          var loopTh = function loopTh(number) {\n            var th = $(\"<th></th>\");\n            th.text(number);\n            return th;\n          };\n          /**\n           for(var i in json[0]){\n          thead.append(loopTh(json[0][i]));\n          };*/\n\n\n          for (var i = 0; i < json.length; i++) {\n            tbody.append(loopTr(json[i]));\n          }\n\n          table.append(thead);\n          table.append(tbody); //$(\"body\").append(table);\n\n          table.table2excel({\n            exclude: \".excludeThisClass\",\n            name: name,\n            filename: filename\n          });\n        });\n      };\n\n      cmethod.prototype.asyncRepeat = function (repeatCall, finish) {\n        var self = this;\n        var inx = 0;\n\n        var repeat = function repeat(inx) {\n          if (self[inx]) {\n            repeatCall(inx, self[inx], function () {\n              inx++;\n              repeat(inx);\n            });\n          } else {\n            finish();\n          }\n        };\n\n        repeat(inx);\n      };\n      /**\n       * 获得域结构\n       * @param {Object} callback\n       * @param {Object} isArryLike\n       */\n\n\n      cmethod.prototype.queryDomainTree = function (callback, isArryLike) {\n        /** queryDomainTree方法第一次从后台取得，之后通过缓存取*/\n        var fn = cmethod.prototype.queryDomainTree;\n\n        if (fn.cached) {\n          callback(clone(fn.cached));\n        } else {\n          fn.promise = fn.promise || new Promise(function (resolve) {\n            userDomainService.queryDomainTree(userLoginUIService.user.userID, function (event) {\n              var $TreeObj = function $TreeObj(data) {\n                this.$clone(data);\n              };\n\n              var treeObjToArr = function treeObjToArr(data) {\n                var result = [];\n\n                var traverse = function traverse(item, parent, level) {\n                  var to = new $TreeObj(item);\n                  to.parent = parent;\n                  to.level = level;\n                  result.push(to);\n\n                  for (var i in item.domainInfos) {\n                    var m = level + 1;\n                    traverse(item.domainInfos[i], item, m);\n                  }\n                };\n\n                traverse(event.data[0], null, 0);\n                return result;\n              };\n\n              if (event.code) {\n                if (isArryLike) {\n                  var to = treeObjToArr(event.data[0]);\n                  resolve(to);\n                } else {\n                  resolve(event.data);\n                }\n              }\n            });\n          });\n          fn.promise.then(function (dtree) {\n            fn.cached = dtree;\n            delete fn.promise;\n            callback(clone(fn.cached));\n          });\n        }\n      };\n\n      cmethod.prototype.getAlertWord = function (str) {\n        var color = \"\";\n\n        switch (str) {\n          case 4:\n            color = \"危险\";\n            break;\n\n          case 3:\n            color = \"警告\";\n            break;\n\n          case 2:\n            color = \"注意\";\n            break;\n\n          case 1:\n            color = \"正常\";\n            break;\n\n          default:\n            color = \"正常\";\n            break;\n        } //\n\n\n        return color;\n      };\n\n      cmethod.prototype.getAlertColorPoint = function (status) {\n        var color = \"\";\n\n        switch (status) {\n          case 4:\n            color = \"e74e53\";\n            break;\n\n          case 3:\n            color = \"#ee6b1c\";\n            break;\n\n          case 2:\n            color = \"#efd709\";\n            break;\n\n          default:\n            color = \"#00bc79\";\n            break;\n        }\n\n        return color;\n      };\n\n      cmethod.prototype.getAlertColor = function (status) {\n        var color = \"\";\n\n        switch (status) {\n          case 4:\n            color = \"#e74e53\";\n            break;\n\n          case 3:\n            color = \"#ee6b1c\";\n            break;\n\n          case 2:\n            color = \"#ece417\";\n            break;\n\n          case 1:\n            color = \"#00bc79\";\n            break;\n\n          default:\n            color = \"#00bc79\";\n            break;\n        }\n\n        return color;\n      };\n      /**\n       * 查出基地/厂部/产线/设备名称\n       * 韩星 2018.01.16\n       * @param domainPathList 传入domainPath\n       */\n\n\n      cmethod.prototype.getdomainListName = function (domainPathList) {\n        var domainList = [];\n\n        for (var i = 0; i < domainPathList.length; i++) {\n          cmethod.prototype.getdomainNameHandler(domainPathList[i].domains, domainList);\n        }\n\n        return domainList;\n      };\n\n      cmethod.prototype.getdomainNameHandler = function (domainPathListStr, domainList) {\n        var domainListDic = rootScope.domainListDic;\n        var domainPathListSplit = domainPathListStr.split(\"/\");\n        domainPathListSplit.forEach(function (domainId) {\n          if (domainListDic[domainId]) {\n            domainList.push(domainListDic[domainId].label);\n          }\n        });\n        return domainList;\n      };\n\n      cmethod.prototype.getCurrentDomainCi = function (callback) {\n        var domainPath = userLoginUIService.user.domains;\n\n        if (!domainPath) {\n          callback(null);\n          return;\n        }\n\n        var domainId;\n        var arr = domainPath.split(\"/\");\n\n        if (arr.length > 1) {\n          domainId = arr[arr.length - 2];\n        }\n\n        $$.cacheAsyncData.call(resourceUIService.getResourceById, [domainId], function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n        /**\n         resourceUIService.getResourceById(domainId, function(event){\n        if(event.code == 0){\n        callback(event.data)\n        }\n        })*/\n      };\n\n      function isEmptyObject(obj) {\n        for (var i in obj) {\n          return false;\n        }\n\n        return true;\n      }\n\n      cmethod.prototype.getDevicesByCondition = function (params, callback, extendstr, noCache) {\n        var fn = cmethod.prototype.getDevicesByCondition;\n        var include = [\"resourceType\", \"category\", \"customerId\", \"projectId\", \"domainPath\", \"domains\", \"externalDevId\", \"label\", \"id\", \"modelId\", \"values.viewType\", \"values.MeasurePointLocate\", \"value.viewType\", \"values.OfflinePerson\", \"values.JoinPersonList\", \"physicalConfig.accessConfigs.instance\", \"physicalConfig.accessConfigs.dataItemId\", \"physicalConfig.accessConfigs.kpiId\", \"physicalConfig.accessConfigs.kpiName\", \"physicalConfig.accessConfigs.specialtyProp\"];\n        var currentRoleID = userLoginUIService.user.currentRoleID || 0;\n        var roleFunctionCodeMap = userLoginUIService.user.roleFunctionCodeMap || {};\n\n        var includeFields = \"includeFields=\" + include.toString(),\n            menuitems = roleFunctionCodeMap[currentRoleID] || [],\n            vals = function (menuitems) {\n          if (menuitems.indexOf(\"F08_01\") !== -1) return {};\n          if (menuitems.indexOf(\"F08_03\") !== -1) return {\n            diagnosticType: \"90\"\n          };\n          if (menuitems.indexOf(\"F08_06\") !== -1) return {\n            diagnosticType: \"280\"\n          };\n          if (menuitems.indexOf(\"F08_02\") !== -1) return {\n            diagnosticType: {\n              \"NOT_IN\": [\"90\", \"280\"]\n            }\n          };\n        }(menuitems);\n        /** 当参数为空的时候缓存DEVICES列表,不空的时候不进行缓存*/\n\n\n        if (!isEmptyObject(params)) {\n          params.values = vals;\n          resourceUIService.getDevicesByCondition(params, function (event) {\n            if (event.code == 0) {\n              callback(event.data);\n            }\n          }, extendstr || includeFields);\n        } else {\n          params.values = vals;\n\n          if (!noCache) {\n            if (fn.cached) {\n              callback(clone(fn.cached));\n            } else {\n              fn.promise = fn.promise || new Promise(function (resolve) {\n                resourceUIService.getDevicesByCondition(params, function (event) {\n                  if (event.code == 0) {\n                    resolve(event.data);\n                  }\n                }, extendstr || includeFields);\n              });\n              fn.promise.then(function (devices) {\n                fn.cached = devices;\n                delete fn.promise;\n                callback(clone(fn.cached));\n              });\n            }\n          } else {\n            resourceUIService.getDevicesByCondition(params, function (event) {\n              if (event.code == 0) {\n                callback(clone(event.data));\n              }\n            }, extendstr || includeFields);\n          }\n        }\n      };\n\n      cmethod.prototype.getCurrentDevices = function (callback) {\n        this.getCurrentProject(function (project) {\n          if (project) {\n            var domainPath = project.domainPath;\n            var params = {\n              projectId: project.id\n            };\n            resourceUIService.getDevicesByCondition(params, function (event) {\n              if (event.code == 0) {\n                callback(event.data);\n              }\n            });\n            /*\n            $$.cacheAsyncData.call(resourceUIService.getDevicesByCondition, [params], function(event){\n            if(event.code == 0){\n            callback(event.data)\n            }\n            });*/\n\n            /**\n             resourceUIService.getDevicesByCondition(params, function(event){\n            if(event.code == 0){\n            callback(event.data);\n            }\n            });*/\n          } else {\n            callback([]);\n          }\n        });\n      };\n\n      cmethod.prototype.getCurrentResource = function (callback) {\n        var id = this.getParameter(\"resourceId\");\n\n        if (id) {\n          resourceUIService.getResourceById(id, function (event) {\n            if (event.code == 0) {\n              callback(event.data);\n            }\n          });\n        } else {\n          if (routeParam.resourceId) {\n            id = routeParam.resourceId;\n            $$.cacheAsyncData.call(resourceUIService.getResourceById, [id], function (event) {\n              if (event.code == 0) {\n                callback(event.data);\n              }\n            });\n          } else {\n            callback(null);\n          }\n        }\n      };\n\n      cmethod.prototype.getCurrentProject = function (callback) {\n        var id = this.getParameter(\"projectId\");\n\n        if (id) {\n          $$.cacheAsyncData.call(resourceUIService.getResourceById, [id], function (event) {\n            if (event.code == 0) {\n              callback(event.data);\n            }\n          });\n        } else {\n          callback(null);\n        }\n      };\n\n      cmethod.prototype.getCurrentCustomer = function (callback) {\n        var id = this.getParameter(\"customerId\");\n\n        if (id) {\n          $$.cacheAsyncData.call(resourceUIService.getResourceById, [id], function (event) {\n            if (event.code == 0) {\n              callback(event.data);\n            }\n          });\n        } else {\n          callback(null);\n        }\n      };\n\n      cmethod.prototype.getCiKpi = function (callback) {\n        var model = this.$attr(\"data/model\");\n        var resources = this.$attr(\"data/resource\");\n        var modelType = this.$attr(\"data/modelType\");\n        var resfilltype = this.$attr(\"data/resfilltype\");\n        var kpis = this.$attr(\"data/kpi\");\n        resources = resources ? resources : [];\n        kpis = kpis ? kpis : [];\n        var cur = this,\n            defers = [],\n            res = [],\n            ks = [];\n\n        var getKpis = function getKpis() {\n          var some = kpis.some(function (element) {\n            return _typeof(element) != \"object\";\n          });\n\n          if (some) {\n            var modelId;\n\n            if (modelType == 0 || modelType == undefined) {\n              modelId = model.id;\n            } else {\n              modelId = modelType;\n            }\n\n            if (modelId) {\n              $$.cacheAsyncData.call(resourceUIService.getDataItemsByModelId, [modelId], function (event) {\n                if (event.code == 0) {\n                  ks = event.data.filter(function (elem) {\n                    return kpis.indexOf(elem.id) != -1;\n                  });\n                  callback(res, ks);\n                }\n              });\n              /**\n               resourceUIService.getKpisByModelId(modelId, function(event){\n              if(event.code == 0){\n              ks = event.data.filter(function(elem){\n              return kpis.indexOf(elem.id) != -1;\n              });\n              callback(res, ks);\n              }\n              })*/\n            } else {\n              throw new Error(\"modelId is no avaliable!!!\");\n            }\n          } else {\n            ks = kpis;\n            callback(res, ks);\n          }\n        };\n\n        if (resources.length == 1 && resources[0] == \"rootCi\") {\n          this.$attr(\"data/modelType\", 300);\n          this.$attr(\"data/resfilltype\", \"parameter\");\n          this.$attr(\"data/resource\", []);\n          modelType = 300;\n          resfilltype = \"parameter\";\n        }\n\n        if (resfilltype == \"parameter\") {\n          if (modelType == 300) {\n            cmethod.prototype.getCurrentDomainCi(function (ci) {\n              res = [ci];\n              getKpis();\n            });\n          } else if (modelType == 0) {\n            cmethod.prototype.getCurrentResource(function (ci) {\n              res = ci ? [ci] : [];\n              getKpis();\n            });\n          } else if (resfilltype == 301) {\n            cmethod.prototype.getCurrentCustomer(function (ci) {\n              res = ci ? [ci] : [];\n              getKpis();\n            });\n          } else if (modelType == 302) {\n            cmethod.prototype.getCurrentProject(function (ci) {\n              res = ci ? [ci] : [];\n              getKpis();\n            });\n          } else if (modelType == 303) {\n            cmethod.prototype.getCurrentDomainCi(function (ci) {\n              res = ci ? [ci] : [];\n              getKpis();\n            });\n          } else {\n            cmethod.prototype.getCurrentDomainCi(function (ci) {\n              res = ci ? [ci] : [];\n              getKpis();\n            });\n          }\n        } else {\n          var getResource = function getResource(resource) {\n            var defer = q.defer();\n\n            if (_typeof(resource) != \"object\") {\n              cur.getResourceById(resource, function (data) {\n                res.push(data);\n                defer.resolve(\"success\");\n              });\n            } else {\n              res.push(resource);\n              defer.resolve(\"success\");\n            }\n\n            return defer.promise;\n          };\n\n          for (var i in resources) {\n            defers.push(getResource(resources[i]));\n          }\n\n          q.all(defers).then(function (event) {\n            getKpis();\n          });\n        }\n      };\n\n      cmethod.prototype.copyJSONFileToClipBoard = function () {\n        var json = JSON.stringify(wholeJSON);\n      };\n\n      cmethod.prototype.postService = function (service, method, param, callback) {\n        serviceProxy.get(service, method, param, callback);\n      };\n\n      cmethod.prototype.getLatestDevices = function (callback) {\n        resourceUIService.getLatestDevices(function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.doTaskCloseAlert = function (ticketNo, obj, callback) {\n        ticketTaskService.doTaskCloseAlert(ticketNo, obj, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getDeviceInfo = function (callback) {\n        resourceUIService.getDeviceInfo(function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getTicketsByStatus = function (callback) {\n        ticketTaskService.getTicketsByStatus([100], function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getAlertDeviceList = function (params, callback) {\n        ticketTaskService.getAlertDeviceList(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getTicketTasksByCondition = function (params, callback) {\n        ticketTaskService.getTicketTasksByCondition(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getTicketTasksByConditionAndPage = function (params, pageRequest, callback) {\n        ticketTaskService.getTicketTasksByConditionAndPage(params, pageRequest, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getDealTicketListByPage = function (params, pageRequest, callback) {\n        ticketTaskService.getDealTicketListByPage(params, pageRequest, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.claimAlert = function (params, callback) {\n        ticketTaskService.claimAlert(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getDeviceDiagnosticResumeOrTicketByPage = function (params, pageRequest, callback) {\n        ticketTaskService.getDeviceDiagnosticResumeOrTicketByPage(params, pageRequest, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getInfoByPage = function (params, pageRequest, callback) {\n        ticketTaskService.getInfoByPage(params, pageRequest, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getTicketsByConditionAndPage = function (params, pageRequest, callback) {\n        ticketTaskService.getTicketsByConditionAndPage(params, pageRequest, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getUsersByDeviceIdAndRoleAndSpecialty = function (deviceId, roleId, specialty, callback) {\n        ticketTaskService.getUsersByDeviceIdAndRoleAndSpecialty(deviceId, roleId, specialty, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.complexHandleAgain = function (taskId, complexHandel, callback) {\n        ticketTaskService.complexHandleAgain(taskId, complexHandel, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getKnowledgeByConditionWithPage = function (params, pageRequest, callback) {\n        ticketTaskService.getKnowledgeByConditionWithPage(params, pageRequest, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.alertTaskMergeDeal = function (taskIds, values, callback) {\n        ticketTaskService.alertTaskMergeDeal(taskIds, values, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getTicketTasksByCondition = function (params, callback) {\n        ticketTaskService.getTicketTasksByCondition(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getTicketsByCondition = function (params, callback) {\n        ticketTaskService.getTicketsByCondition(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getDealTicketList = function (params, callback) {\n        ticketTaskService.getDealTicketList(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.doTask = function (params, callback) {\n        ticketTaskService.doTask(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.doTask4Baogang = function (ticketNo, values, callback) {\n        ticketTaskService.doTask4Baogang(ticketNo, values, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getTopicErrorDataList = function (topicErrorQueryModel, callback) {\n        ticketTaskService.getTopicErrorDataList(topicErrorQueryModel, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getComplexHandleListWithCategorys = function (selector, ticketTaskQueryModel, pageRequest, callback) {\n        ticketTaskService.getComplexHandleListWithCategorys(selector, ticketTaskQueryModel, pageRequest, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.energyTypeList = function (callback) {\n        var data = dictionaryService.dicts['energyType'];\n\n        if (callback) {\n          callback(data);\n        }\n      };\n\n      cmethod.prototype.getDevicesByFilter = function (filter, callback) {\n        var params = {\n          modelId: filter.modelId,\n          domainPath: filter.domainPath,\n          label: filter.deviceName,\n          sn: filter.sn\n        };\n        resourceUIService.getDevicesByCondition(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getCurrentAlert = function (callback) {\n        var resourceId = this.getParameter(\"resourceId\");\n\n        if (resourceId) {\n          alertService.queryFromDb({\n            nodeIds: resourceId\n          }, function (event) {\n            if (event.code == 0) {\n              callback(event.data);\n            }\n          });\n        } else {\n          callback([]);\n        }\n      };\n\n      cmethod.prototype.getAlertByPage = function (params, pages, callback) {\n        alertService.getAlertByPage(params, pages, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getAllAlerts = function (callback) {\n        alertService.queryFromDb({}, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getAlerts = function (callback) {\n        var domainPath = userLoginUIService.user.domainPath;\n        alertService.queryFromDb({\n          domain: domainPath\n        }, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.queryFromDb = function (param, callback) {\n        alertService.queryFromDb(param, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.setExpression = function (str) {\n        this.$attr(\"advance/expression\", str);\n      };\n\n      cmethod.prototype.runExpression = function (str) {\n        var expression;\n        $$.runExpression(str, function (funRes) {\n          if (funRes.code == \"0\") {\n            var fnResult = funRes.data;\n            expression = fnResult ? fnResult : {};\n          } else {\n            expression = {}; //throw new Error(funRes.message);\n          }\n        });\n        return expression;\n      };\n\n      cmethod.prototype.getCustomerFromCurrentUser = function (callback) {\n        var cur = this;\n        var domains = userLoginUIService.user.domains;\n        var customerId;\n        var arr = domains.split(\"/\");\n\n        if (arr.length > 2) {\n          customerId = arr[arr.length - 2];\n          cur.getResourceById(customerId, function (resource) {\n            callback(resource);\n          });\n        } else {\n          callback(resource);\n        }\n      };\n\n      cmethod.prototype.getCurrentAlertByProject = function (callback) {\n        var resourceId = this.getParameter(\"projectId\");\n        alertService.queryFromDb({\n          nodeIds: resourceId\n        }, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.currentDirective = function (callback) {\n        var resId = this.getParameter(\"resourceId\");\n\n        if (resId) {\n          this.getResourceById(resId, function (resource) {\n            if (resource) {\n              var modelId = resource.modelId;\n\n              if (modelId) {\n                resourceUIService.getDirectivesByModelId(modelId, function (event) {\n                  if (event.code == 0) {\n                    callback(event.data);\n                  }\n                });\n              } else {\n                callback([]);\n              }\n            } else {\n              callback([]);\n            }\n          });\n        } else {\n          callback([]);\n        }\n      };\n\n      cmethod.prototype.getProjectByTYpeId = function (projectTypeId, callback) {\n        customMethodService.getProjectsType(function (event) {\n          if (event.code == 0) {\n            var projectType = event.data.find(function (elem) {\n              return projectTypeId == elem.id;\n            });\n\n            if (projectType == undefined) {\n              projectType = event.data[0];\n            }\n\n            resourceUIService.getResourceByModelId(302, function (event) {\n              if (event.code == 0) {\n                var find = event.data.find(function (el) {\n                  return el.values.projectType == projectType.valueCode;\n                });\n\n                if (typeof callback == \"function\") {\n                  callback(find);\n                } else {}\n              }\n            });\n          }\n        });\n      };\n\n      _proto_.promise = function (fn) {\n        var defer = q.defer();\n        fn(defer.resolve, defer.reject);\n        return defer.promise;\n      };\n\n      _proto_.$getViewById = function (id, callback) {\n        var cv = viewCache(id),\n            self = this;\n\n        if (!cv) {\n          viewCache(id, self.promise(function (res, rej) {\n            self.getViewById(id, function (e) {\n              if (e) {\n                res(e);\n              }\n            });\n          }));\n        }\n\n        viewCache(id).then(function (d) {\n          callback(d);\n        });\n      };\n\n      cmethod.prototype.getViewById = cmethod.prototype.getViewByViewId = function (viewId, callback) {\n        if (!viewId) {\n          return;\n          throw new Error(\"viewId不存在\");\n        }\n\n        var views = cmethod.prototype.getViewById.views = cmethod.prototype.getViewById.views || {};\n        var view = views[viewId] = views[viewId] || {};\n\n        if (view.cache) {\n          callback(clone(view.cache));\n        } else {\n          view.promise = view.promise || new Promise(function (resolve) {\n            viewFlexService.getViewById(viewId, function (event) {\n              if (event.code == 0) {\n                resolve(event.data);\n              }\n            });\n          });\n          view.promise.then(function (d) {\n            view.cache = d;\n            callback(clone(view.cache));\n          });\n        }\n      };\n\n      cmethod.prototype.getProjectsType = function (callback, domains) {\n        customMethodService.getProjectsType(function (event) {\n          if (event.code == 0) {\n            if (typeof callback == \"function\") {\n              callback(event.data);\n            } else {}\n          }\n        }, domains);\n      };\n\n      cmethod.prototype.getCached = function () {\n        return cms.$cache;\n      };\n\n      function LocalStore() {}\n\n      LocalStore.prototype.setValue = function (attr, value) {\n        if (value == null) {\n          return;\n        }\n\n        var arr = attr.split(\"/\").filter(function (d) {\n          return d;\n        }),\n            first = arr.shift(),\n            last = arr.pop(),\n            str = window.sessionStorage.getItem(first),\n            obj = JSON.parse(str) || {},\n            rs = arr.length > 0 ? arr.reduce(function (a, b) {\n          a[b] = a[b] || {};\n          return a[b];\n        }, obj) : obj;\n\n        if (last != null) {\n          rs[last] = value;\n          window.sessionStorage.setItem(first, JSON.stringify(obj));\n        } else {\n          window.sessionStorage.setItem(first, value);\n        }\n      };\n\n      function parse(str) {\n        var rs;\n\n        try {\n          rs = JSON.parse(str);\n        } catch (e) {\n          console.error(e);\n        }\n\n        return rs;\n      }\n\n      LocalStore.prototype.getValue = function (attr) {\n        if (typeof attr !== \"string\") {\n          console.warn(\"无效的参数\");\n          return null;\n        } else {\n          //return cms.$cache.$attr(attr);\n          var arr = attr.split(\"/\").filter(function (d) {\n            return d;\n          }),\n              first = arr.shift(),\n              str = window.sessionStorage.getItem(first),\n              obj = parse(str),\n              value = arr.length > 0 ? arr.reduce(function (a, b) {\n            return a && a[b];\n          }, obj) : obj;\n          return value;\n        }\n      };\n\n      cmethod.prototype.setValue = setValue = function setValue(attr, value) {\n        cms.$cache.$attr(attr, value);\n      };\n\n      cmethod.prototype._setValue = setValue = function setValue(attr, value) {\n        localStore.setValue(attr, value);\n      };\n\n      cmethod.prototype.getValue = function (attr) {\n        return cms.$cache.$attr(attr);\n      };\n\n      cmethod.prototype._getValue = function (attr) {\n        return localStore.getValue(attr);\n      };\n\n      cmethod.prototype.deleteValue = function (attr, value) {\n        delete cms.$cache[attr]; // window.sessionStorage.removeItem(attr);\n      };\n\n      cmethod.prototype.findProjectsByCondition = function (param, callback) {\n        projectUIService.findProjectsByCondition(param, function (event) {\n          if (event.code == 0) {\n            if (callback) {\n              callback(event.data);\n            }\n          }\n        });\n      };\n\n      cmethod.prototype.getCurrentProjects = function (callback) {\n        var param = {\n          domainPath: userLoginUIService.user.domainPath\n        };\n        projectUIService.findProjectsByCondition(param, function (event) {\n          if (event.code == 0) {\n            if (callback) {\n              callback(event.data);\n            }\n          }\n        });\n      };\n\n      cmethod.prototype.getViewsByOnlyRole = function (viewType, resourceType, resourceId, callback) {\n        viewFlexService.getViewsByOnlyRole(viewType, function (event) {\n          var views = event.data;\n          /** 为防止同一模型有相同的视图被授权，在这里取VIEWID */\n\n          var loop = function loop(view) {\n            if (view.template && view.template.resourceType == resourceType && view.template.resourceId == resourceId) {\n              viewFlexService.getViewById(view.viewId, function (event) {\n                if (event.code == 0) {\n                  callback(event.data);\n                } else {\n                  callback(null);\n                }\n              });\n            }\n          };\n\n          for (var i in views) {\n            loop(views[i]);\n          }\n          /**\n           var find = views.find(function(view){\n          return view.template && view.template.resourceType == resourceType && view.template.resourceId == resourceId;\n          });\n           if(find){\n          viewFlexService.getViewById(find.viewId, function(event){\n          if(event.code == 0){\n          callback(event.data);\n          } else {\n          callback(null);\n          }\n          })\n          };*/\n\n        });\n      };\n      /** 这个和下面的getManagedViewsByTypeAndRole的有差别的\n       cmethod.prototype.getManagedViewsByTypeAndRole = function (viewType, resourceType, resourceId, callback) {\n      viewFlexService.getManagedViewsByTypeAndRole(viewType, function (event) {\n        var views = event.data;\n        var loop = function (view) {\n          if (view.template && view.template.resourceType == resourceType && view.template.resourceId == resourceId) {\n            viewFlexService.getViewById(view.viewId, function (event) {\n              if (event.code == 0) {\n                callback(event.data);\n              } else {\n                callback(null);\n              }\n            });\n          }\n        };\n        for (var i in views) {\n          loop(views[i])\n        }\n      });\n      };\n       */\n\n\n      cmethod.prototype.growl = function (str, fun) {\n        fun = fun || \"success\";\n        growl[fun](str);\n      };\n\n      cmethod.prototype.sendDirective = function (nodeId, dirId, data, callback) {\n        resourceUIService.sendDeviceDirective(nodeId, dirId, data, function (returnObj) {\n          if (returnObj.code == 0) {\n            if (typeof callback == \"function\") {\n              callback(returnObj);\n            } else {} //growl.success(\"指令发送成功\", {});\n\n          }\n        });\n      };\n\n      cmethod.prototype.sendItemDir = function (dir, nodeId) {\n        var itemDirValues = {};\n\n        if (!dir.value) {\n          growl.warning(\"请输入指令参数\");\n          return;\n        }\n\n        for (var i in dir.params) {\n          var obj = dir.params[i];\n          itemDirValues[obj.name] = dir.value;\n        }\n\n        BootstrapDialog.show({\n          title: '提示',\n          closable: false,\n          message: '您发送的指令将会在设备上执行，状态数据返回会有一段时间，确认要发送指令吗？',\n          buttons: [{\n            label: '确定',\n            cssClass: 'btn-success',\n            action: function action(dialogRef) {\n              resourceUIService.sendDeviceDirective(nodeId ? nodeId : Number(this.getParameter(\"resourceId\")), dir.id, itemDirValues, function (returnObj) {\n                if (returnObj.code == 0) {\n                  growl.success(\"指令发送成功，请勿重复发送，状态数据返回需要一定时间！\", {});\n                }\n              });\n              dialogRef.close();\n            }\n          }, {\n            label: '取消',\n            action: function action(dialogRef) {\n              dialogRef.close();\n            }\n          }]\n        });\n      };\n\n      cmethod.prototype.sendItemDirAll = function (dir) {\n        var itemDirValues = {};\n\n        for (var i in dir.params) {\n          var obj = dir.params[i];\n\n          if (dir.params[i].$value) {\n            itemDirValues[obj.name] = dir.params[i].$value;\n          }\n        }\n\n        resourceUIService.sendDeviceDirective(Number(this.getParameter(\"resourceId\")), dir.id, itemDirValues, function (returnObj) {\n          if (returnObj.code == 0) {\n            growl.success(\"指令发送成功\", {});\n          }\n        });\n      };\n\n      cmethod.prototype.sendItemDirByValue = function (id, params) {\n        resourceUIService.sendDeviceDirective(Number(this.getParameter(\"resourceId\")), id, params, function (returnObj) {\n          if (returnObj.code == 0) {\n            growl.success(\"指令发送成功\", {});\n          }\n        });\n      };\n\n      cmethod.prototype.getAllDevices = function () {};\n\n      cmethod.prototype.getViewByViewTitle = function (viewTitle, callback) {\n        viewFlexService.getAllMyViews(function (event) {\n          var views = event.data;\n          var find = views.find(function (view) {\n            return view.viewTitle == viewTitle;\n          });\n\n          if (find) {\n            viewFlexService.getViewById(find.viewId, function (event) {\n              if (event.code == 0) {\n                callback(event.data);\n              }\n            });\n          } else {\n            callback(null);\n          }\n        });\n      };\n\n      cmethod.prototype.setTimeInterval = function (fn, num) {\n        timeIntervals.push(fn, num || 10000);\n      };\n\n      cmethod.prototype.getResources = function (callback, extendstr) {\n        var fn = cmethod.prototype.getResources;\n\n        if (fn.cached) {\n          callback && callback(clone(fn.cached));\n        } else {\n          fn.promise = fn.promise || new Promise(function (resolve, reject) {\n            resourceUIService.getResources(function (event) {\n              if (event.code == 0) {\n                resolve(event.data);\n              } else {\n                reject(event);\n              }\n            }, extendstr);\n          });\n          fn.promise.then(function (d) {\n            fn.cached = d;\n            callback && callback(clone(fn.cached));\n          }).catch(function (e) {\n            console.error(e);\n          });\n        }\n      };\n      /**\n       * 宝钢针对全局视图的跳转，扩展了一个方法\n       * @param str\n       */\n\n\n      function removeNull(obj) {\n        for (var i in obj) {\n          if (typeof obj[i] === \"undefined\" || obj[i] === null) {\n            delete obj[i];\n          }\n        }\n\n        return obj;\n      }\n\n      cmethod.prototype.navigateToTab = function (p) {\n        var target = $state.current.name,\n            params = $state.params;\n        extend(params, p);\n        $state.go(target, removeNull(params));\n      };\n\n      cmethod.prototype.analysisDataPrep = function (node, callback) {\n        var cur = this,\n            sensor,\n            accessConfigs,\n            id = node.nodeId;\n        cur.setParameter(\"id\", node.nodeId);\n        cur.getResourceById(node.nodeId, function (resource) {\n          cur.getDomainAreaLineTree(function (domainTree) {\n            accessConfigs = resource.physicalConfig.accessConfigs || {};\n            cur.setValue(\"global/alertTime\", node.arisingTime);\n            cur.setValue(\"global/resource\", resource);\n            sensor = accessConfigs.find(function (n) {\n              return n.instance === node.instance;\n            }) || null;\n            cur.setValue(\"global/sensor\", sensor);\n            callback(sensor.name);\n          });\n        });\n      };\n\n      cmethod.prototype.getProjectsAndKpiValue = function (callback) {\n        var cur = this;\n        cur.findProjectsByCondition({}, function (projects) {\n          var cis = [];\n          var kpis = [999999];\n\n          var pushDiff = function pushDiff(arr) {\n            for (var i in arr) {\n              if (this.indexOf(arr[i]) == -1) {\n                this.push(arr[i]);\n              }\n            }\n          };\n\n          var sloop = function sloop(arr, rptback, callback) {\n            var inx = 0;\n\n            var repeat = function repeat(inx) {\n              var item = arr[inx];\n\n              if (item) {\n                rptback(item, function () {\n                  inx++;\n                  repeat(inx);\n                });\n              } else {\n                callback(arr);\n              }\n            };\n\n            repeat(inx);\n          };\n\n          var traverse = function traverse(callback) {\n            var cur = this;\n\n            for (var i in cur) {\n              for (var j in cur[i].devices) {\n                callback(cur[i], j, cur[i].devices[j]);\n              }\n            }\n          };\n\n          sloop(projects, function (project, callback1) {\n            cur.getDevicesByCondition({\n              projectId: project.id\n            }, function (devices) {\n              project.devices = devices;\n              var devis = devices.map(function (elem) {\n                return elem.id;\n              });\n              pushDiff.call(cis, devis);\n              sloop(devices, function (device, callback2) {\n                var modelId = device.modelId;\n                cur.getKpisByModelId(modelId, function (kpiDes) {\n                  var kpiMaps = kpiDes.map(function (elem) {\n                    return elem.id;\n                  });\n                  pushDiff.call(kpis, kpiMaps);\n                  device.kpis = kpiDes;\n                  callback2();\n                });\n              }, function () {\n                callback1();\n              });\n            });\n          }, function () {\n            cur.getKpiValueCi(cis, kpis, function (valuelist) {\n              traverse.call(projects, function (project, inx, device) {\n                if (project.detail == undefined) {\n                  project.detail = [];\n                }\n\n                var loop = function loop(kpi) {\n                  var find = valuelist.find(function (el) {\n                    return el.nodeId == device.id && el.kpiCode == kpi.id;\n                  });\n                  var alertFind = valuelist.find(function (el) {\n                    return el.nodeId == device.id && el.kpiCode == 999999 && el.instance == kpi.id;\n                  });\n                  project.detail.push({\n                    ci: {\n                      label: device.label\n                    },\n                    kpi: {\n                      label: kpi.label,\n                      icon: kpi.icon ? kpi.icon : \"proudsmart ps-system\"\n                    },\n                    status: alertFind ? alertFind.value : 0,\n                    value: find ? find.value : \"-\"\n                  });\n                };\n\n                for (var i in device.kpis) {\n                  loop(device.kpis[i]);\n                }\n              });\n              callback(projects);\n            }, {\n              \"includeInstance\": true\n            });\n          });\n        });\n      };\n\n      cmethod.prototype.Synchook = function () {\n        function Synchook() {\n          this.hooks = {};\n        }\n\n        Synchook.prototype.tap = function (name, callback) {\n          this.hooks[name] = callback;\n        };\n\n        Synchook.prototype.call = function (name, data, callback) {\n          var rs,\n              next = function next(d) {\n            callback(d);\n          };\n\n          if (typeof this.hooks[name] !== \"function\") {\n            callback();\n          } else {\n            rs = this.hooks[name](data, next);\n\n            if (rs) {\n              callback(rs);\n\n              next = function next() {};\n            }\n          }\n\n          ;\n        };\n\n        return new Synchook();\n      };\n\n      cmethod.prototype.getProTypeByTypeId = function (id, callback) {\n        customMethodService.getProTypeByTypeId(id, function (event) {\n          if (event.code == 0) {\n            if (typeof callback == \"function\") {\n              callback(event.data);\n            } else {}\n          }\n        });\n      };\n\n      function parse(str) {\n        var obj;\n\n        try {\n          obj = JSON.parse(str);\n        } catch (e) {\n          return undefined;\n        }\n\n        return _typeof(obj) == \"object\" ? obj : undefined;\n      }\n\n      function getParamsFromHash(attr) {\n        var hash = location.$$path,\n            params = hash && hash.split(\"/\"),\n            obj = params && params.pop(),\n            attrs = parse(obj) || [],\n            at = attrs.pop() || {};\n        return at[attr];\n      }\n\n      cmethod.prototype.getParameter = function (str) {\n        if (str === \"id\") {\n          var id = $state.params[str];\n          return id;\n        } else {\n          return $state.params[str] || getParamsFromHash(str);\n        }\n        /** 同时取得PATH和HASH的信息*/\n\n        /**\n        if( str === \"id\" ){\n          return $state.params[ \"id\" ];\n        }\n        var hash = (function (h) {\n          if (!h) return {};\n          var r = decodeURIComponent(h);\n          return JSON.parse(r)\n        })(location.hash());\n        var param = (function (s) {\n          if (!s) return {};\n          var p = decodeURIComponent(s);\n          p = JSON.parse(p);\n          return p.length > 0 ? p[p.length - 1] : {}\n        })(routeParam.parameter);\n        if (typeof param !== \"object\") {\n          param = {};\n        }\n        extend(param, hash);\n        return param.$attr(str);**/\n\n      };\n\n      cmethod.prototype.setParameter = function (attr, val) {\n        function switch2Object(obj) {\n          if (typeof obj !== \"string\" || _typeof(obj) !== \"object\" || obj == null) {\n            return {};\n          }\n\n          if (typeof obj == \"string\") {\n            return parse(obj) || {};\n          }\n\n          if (_typeof(obj) == \"object\") {}\n\n          return obj;\n        }\n\n        $state.params[\"#\"] = switch2Object($state.params[\"#\"]);\n        $state.params[\"#\"][attr] = val;\n      };\n\n      cmethod.prototype.getPages = function (str) {\n        var pageArr = (routeParam.page || \"index\").split(\"|\");\n        var parameters = JSON.parse(routeParam.parameter || \"[0]\");\n        var rs = [];\n        var rootTarget = this.getRootTarget();\n        var groups = rootTarget.groups;\n\n        for (var i in pageArr) {\n          rs.push({\n            path: pageArr[i],\n            tabLabel: parameters[i].tabLabel || groups[i].label,\n            parameter: parameters[i]\n          });\n        }\n\n        return rs;\n      };\n\n      _proto_.$getCurrentResource = $getCurrentResource = function $getCurrentResource(callback) {\n        var id = $state.params.id;\n        $getResourceById(id, callback);\n      };\n\n      _proto_.$getResourceById = $getResourceById = function $getResourceById(id, callback) {\n        psTreeData(id).getState().then(callback);\n      };\n\n      cmethod.prototype.getResourceById = function (id, callback, fromCache) {\n        var fn = cmethod.prototype.getResourceById;\n\n        if (!id) {\n          throw new Error(\"id不可为空\");\n        }\n\n        fn[id] = fn[id] || {};\n        fn[id].cached = fn[id].cached || {};\n\n        if (fn[id].cached && fromCache) {\n          callback(clone(fn[id].cached));\n        } else {\n          fn[id].promise = fn[id].promise || new Promise(function (resolve) {\n            resourceUIService.getResourceById(id, function (event) {\n              if (event.code == 0) {\n                resolve(event.data);\n              }\n            });\n          });\n          fn[id].promise.then(function (resource) {\n            fn[id].cached = resource;\n            callback(clone(resource));\n            delete fn[id].promise;\n          });\n        }\n      };\n\n      cmethod.prototype.getOnlineByKpiCodes = function (id, callback) {\n        if (id) {\n          var kpiQueryModel = {\n            includeInstance: true,\n            isRealTimeData: true,\n            nodeIds: [id],\n            kpiCodes: [999998],\n            timePeriod: 0\n          };\n          var param = [\"kpi\", kpiQueryModel];\n          kpiDataService.getValueList(param, function (event) {\n            if (event.code == 0) {\n              callback(event.data);\n            }\n          });\n        } else {\n          callback(null);\n        }\n      };\n\n      cmethod.prototype.navigateBackTo = function () {\n        window.location.href = oldURL;\n      };\n\n      cmethod.prototype.navigateBack = function () {\n        var para,\n            page = routeParam.page ? routeParam.page : \"index\";\n        var oldParam = routeParam.parameter;\n\n        if (oldParam == undefined) {\n          oldParam = ['0'];\n        } else {\n          oldParam = JSON.parse(oldParam);\n        }\n\n        var pageArr = page.split(\"|\");\n        pageArr.pop();\n        page = pageArr.toString();\n        page = page.replace(\",\", \"|\");\n        var last = oldParam[oldParam.length - 1];\n        var tabLabel = last.tabLabel;\n        oldParam.pop();\n        para = encodeURIComponent(JSON.stringify(oldParam));\n\n        if (route.current.$$route.controller == \"viewFreeboardCtrl\") {\n          if (page != \"\") {\n            window.location.href = \"../app-sc/index_freeboard.html#/freeboard/\" + page + \"/\" + para;\n          }\n        } else if (route.current.$$route.controller == \"freeStyleCtrl\") {\n          var viewId = routeParam.viewId;\n\n          if (page != \"\") {\n            window.location.href = \"../app-free-style/index.html#/\" + viewId + \"/\" + page + \"/\" + para;\n          }\n        } else {\n          if (page != \"\") {\n            window.location.href = \"../app-oc/index.html#/dashboard/\" + page + \"/\" + para;\n          }\n        }\n      };\n\n      cmethod.prototype.moveTo = function (url) {\n        var para,\n            page,\n            pageStr = routeParam.page ? routeParam.page : \"index\";\n        var oldParam = routeParam.parameter;\n\n        if (oldParam == undefined) {\n          oldParam = ['0'];\n        } else {\n          oldParam = JSON.parse(oldParam);\n        }\n\n        var page = pageStr.split(\"|\");\n        var inx = page.indexOf(url);\n\n        if (inx != -1) {\n          var pageArr = page.slice(0, inx + 1);\n          oldParam = oldParam.slice(0, inx + 1);\n          page = pageArr.toString();\n          page = page.replace(/\\,/g, \"|\");\n          para = encodeURIComponent(JSON.stringify(oldParam));\n\n          if (route.current.$$route.controller == \"viewFreeboardCtrl\") {\n            window.location.href = \"../app-sc/index_freeboard.html#/freeboard/\" + page + \"/\" + para;\n          } else if (route.current.$$route.controller == \"freeStyleCtrl\") {\n            var viewId = routeParam.viewId;\n            window.location.href = \"../app-free-style/index.html#/\" + viewId + \"/\" + page + \"/\" + para;\n          } else {\n            window.location.href = \"../app-oc/index.html#/dashboard/\" + page + \"/\" + para;\n          }\n        }\n      };\n\n      function getRootDir() {\n        var controller = route.current.$$route.controller;\n        var Dic = {\n          viewFreeboardCtrl: \"freeboard\",\n          freeStyleCtrl: routeParam.viewId,\n          others: \"dashboard\"\n        };\n        return Dic[controller] || \"dashboard\";\n      }\n\n      _proto_.destroy = function (fn) {\n        //window.removeEventListener( \"hashchange\", hashkeyChangeListener );\n        scope && scope.$on(\"$destroy\", fn);\n      };\n\n      cmethod.prototype.navigateToJson = function (url, parameter, type) {\n        var para,\n            page = routeParam.page ? routeParam.page : \"index\";\n\n        if (parameter == undefined) {\n          parameter = '0';\n        }\n\n        var oldParam = routeParam.parameter;\n\n        if (oldParam == undefined) {\n          oldParam = ['0'];\n        } else {\n          oldParam = JSON.parse(oldParam);\n        }\n\n        if (type == \"self\") {\n          var pageArr = page.split(\"|\");\n          pageArr.pop();\n          page = pageArr.toString();\n          page.replace(\",\", \"|\");\n          var last = oldParam[oldParam.length - 1];\n          var tabLabel = last.tabLabel;\n          oldParam.pop();\n\n          if (tabLabel) {\n            parameter.tabLabel = tabLabel;\n          }\n\n          parameter.$target == \"self\";\n          oldParam.push(parameter);\n        } else {\n          parameter.$target == \"blank\";\n          oldParam.push(parameter);\n        }\n\n        para = encodeURIComponent(JSON.stringify(oldParam));\n\n        if (route.current.$$route.controller == \"viewFreeboardCtrl\") {\n          if (page != \"\") {\n            window.location.href = \"../app-sc/index_freeboard.html#/freeboard/\" + page + \"|json:\" + url + \"/\" + para;\n          } else {\n            window.location.href = \"../app-sc/index_freeboard.html#/freeboard/\" + url + \"/\" + para;\n          }\n        } else if (route.current.$$route.controller == \"freeStyleCtrl\") {\n          var viewId = routeParam.viewId;\n\n          if (page != \"\") {\n            window.location.href = \"../app-free-style/index.html#/\" + viewId + \"/\" + page + \"|json:\" + url + \"/\" + para;\n          } else {\n            window.location.href = \"../app-free-style/index.html#/\" + viewId + \"/\" + url + \"/\" + para;\n          }\n        } else {\n          if (page != \"\") {\n            window.location.href = \"../app-oc/index.html#/dashboard/\" + page + \"|json:\" + url + \"/\" + para;\n          } else {\n            window.location.href = \"../app-oc/index.html#/dashboard/\" + url + \"/\" + para;\n          }\n        }\n      };\n\n      cmethod.prototype.navigateToFeature = function (callback) {\n        var cur = this;\n        var ROLE = cur.getValue(\"global/ROLE\");\n\n        if (ROLE == 0) {\n          cur.navigateTo(\"index\", {\n            main: 3\n          }, \"self\");\n        } else if (ROLE == 1) {\n          cur.navigateTo(\"index\", {\n            main: 2,\n            backHistory: 1\n          }, \"self\");\n        } else if (ROLE == 2) {\n          cur.navigateTo(\"index\", {\n            main: 2,\n            backHistory: 1\n          }, \"self\");\n        } else if (ROLE == 3) {\n          cur.navigateTo(\"index\", {\n            main: 2,\n            backHistory: 1\n          }, \"self\");\n        }\n      };\n      /** 跳转方法支持以下写法\n      target.navigateTo(\"综合趋势\");\n      target.navigateTo(\"prod_analysis\");\n      target.navigateTo(1);\n      target.navigateTo(\"index\", 1);\n      target.navigateTo([1,0]);\n      target.navigateTo(\"index\", [1,0]);\n      target.navigateTo({\n        main : 1,\n        sub : [0,\"\"]\n      });\n      target.navigateTo(\"index\", {\n        main : 1,\n        sub : 0\n      });\n       target.navigateTo(\"index\", function(node){\n          return node.name == \"综合趋势\";\n       });\n       **/\n\n\n      cmethod.prototype.navigateTo = function (url, parameter, ext) {\n        ext = _typeof(ext) != \"object\" ? {} : ext;\n        var ticketNo = this.getValue(\"ticketNo\");\n\n        if (typeof parameter === \"undefined\") {\n          parameter = url;\n          url = \"index\";\n        }\n\n        if (typeof parameter === \"undefined\") {\n          throw new Error(\"invalid parameter found\");\n        }\n\n        cms2.navigateTo(parameter, ext, url, {\n          ticketNo: ticketNo\n        });\n      };\n\n      cmethod.prototype.$state = $state;\n\n      cmethod.prototype.historyBack = function () {\n        window.history.go(-1);\n      };\n\n      cmethod.prototype.back = function () {\n        window.history.go(-1);\n      };\n\n      cmethod.prototype.explainDic = function (attr, elem) {\n        var obj;\n\n        if (_typeof(elem) == \"object\") {\n          obj = elem;\n        } else {\n          obj = {\n            type: \"label\",\n            value: attr,\n            name: elem\n          };\n        }\n\n        return obj;\n      };\n\n      cmethod.prototype.getSimulateApi = function (simulate, num, callback) {\n        var rs = [];\n        var target = {\n          randomText: function randomText(strs) {\n            var length = strs.length - 1;\n            var inx = Math.round(Math.random() * length);\n            return strs[inx];\n          },\n          random: function random(max, digital) {\n            var num = parseInt(Math.random() * max * Math.pow(10, digital)) / Math.pow(10, digital);\n            return num;\n          }\n        };\n\n        var repeat = function repeat(inx) {\n          var obj = {};\n\n          var loopAttr = function loopAttr(attr, elem) {\n            if (typeof elem == \"function\") {\n              obj[attr] = elem(inx, target, attr);\n            } else {\n              obj[attr] = elem;\n            }\n          };\n\n          for (var i in simulate) {\n            loopAttr(i, simulate[i]);\n          }\n\n          return obj;\n        };\n\n        for (var i = 0; i < num; i++) {\n          rs.push(repeat(i));\n        }\n\n        if (callback) {\n          callback(rs);\n        }\n      };\n\n      cmethod.prototype.getStartDate = function () {\n        var alertTime = this.getValue(\"global/alertTime\"),\n            currentDate = this.dateHandler();\n        alertMode = true;\n        alertTime = alertTime ? this.dateHandler(alertTime) : null;\n        return alertTime ? alertTime.clone().addHour(-2) : currentDate.addHour(-4);\n      };\n\n      cmethod.prototype.getEndDate = function () {\n        var alertTime = this.getValue(\"global/alertTime\"),\n            currentDate = this.dateHandler();\n        alertMode = true;\n        alertTime = alertTime ? this.dateHandler(alertTime) : null;\n        return alertTime ? alertTime.addHour(1) : currentDate;\n      };\n\n      cmethod.prototype.wait = function (condition, success) {\n        var repeat = function repeat() {\n          if (condition()) {\n            success();\n          } else {\n            setTimeout(function () {\n              repeat();\n            }, 10);\n          }\n        };\n\n        repeat();\n      };\n\n      cmethod.prototype.http = function (url, callback) {\n        customMethodService.http(url, function (event) {\n          callback(event);\n        });\n      };\n\n      cmethod.prototype.getScope = function () {\n        var cur = this;\n        var parent = cur;\n\n        while (parent.parent) {\n          parent = parent.parent;\n        }\n\n        return parent;\n      };\n\n      cmethod.prototype.setScopeValue = function (attr, value) {\n        var t = this.getScope();\n\n        if (!t['private']) {\n          t['private'] = {};\n          Object.defineProperty(t, \"private\", {\n            enumerable: false,\n            value: {}\n          });\n        }\n\n        var obj = t['private'];\n        obj.$attr(attr, value);\n      };\n\n      cmethod.prototype.getScopeValue = function (attr) {\n        var t = this.getScope();\n        var obj = t['private'] || {};\n        return obj.$attr(attr);\n      };\n\n      cmethod.prototype.linkTo = function (url, target) {\n        window.open(url, target ? target : \"_blank\");\n      };\n\n      cmethod.prototype.findViewHasProjectNameById = function (projectId, callback) {\n        this.getResourceById(projectId, function (project) {\n          var label = project.label;\n\n          var getRootPath = function getRootPath(domainPath) {\n            var arr = domainPath.split(\"/\");\n            return \"/\" + arr[1] + \"/\" + arr[2] + \"/\";\n          };\n\n          var rootPath = getRootPath(userLoginUIService.user.domainPath);\n          viewFlexService.getViewsOnlyPublishedByTypeAndDomainPath('dashboard', rootPath, function (event) {\n            var views = event.data;\n            var find = views.find(function (view) {\n              return label.indexOf(view.viewTitle) != -1;\n            });\n\n            if (find) {\n              viewFlexService.getViewById(find.viewId, function (event) {\n                if (event.code == 0) {\n                  callback(event.data);\n                }\n              });\n            } else {\n              callback(null);\n            }\n          });\n        });\n      };\n\n      cmethod.prototype.getProjectsByCustomerId = function (customerId, callback) {\n        var param = {};\n\n        if (customerId) {\n          param.customerId = customerId;\n        }\n\n        projectUIService.findProjectsByCondition(param, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.simulate = function (type, nodesDes, kpisDes, simulateFn, callback) {\n        var result = [];\n        var date = new Date();\n        var timeStamp = date.getTime();\n\n        var timeStampToStr = function timeStampToStr(timeStamp) {\n          var nDate = new Date(timeStamp - 8 * 3600 * 1000);\n          var year = nDate.getFullYear();\n          var month = nDate.getMonth() + 1;\n          var dat = nDate.getDate();\n          var hour = nDate.getHours();\n          var min = nDate.getMinutes();\n          var sec = nDate.getSeconds();\n\n          if (month < 10) {\n            month = \"0\" + month;\n          }\n\n          if (dat < 10) {\n            dat = \"0\" + dat;\n          }\n\n          if (hour < 10) {\n            hour = \"0\" + hour;\n          }\n\n          if (min < 10) {\n            min = \"0\" + min;\n          }\n\n          if (sec < 10) {\n            sec = \"0\" + sec;\n          }\n\n          return year + \"-\" + month + \"-\" + dat + \"T\" + hour + \":\" + min + \":\" + sec + \".000+0000\";\n        };\n\n        var renderData = function renderData(index) {\n          var startTime = simulateFn.startTime.getTime();\n          var period = simulateFn.period;\n          var frequency = simulateFn.frequency;\n          var range = simulateFn.range;\n\n          var getData = function getData(curTime) {\n            if (curTime - startTime < period) {\n              var loopNodes = function loopNodes(node) {\n                var loopKpis = function loopKpis(inx, kpi) {\n                  var calcRandom = function calcRandom(range) {\n                    if (range) {\n                      var max = range[1];\n                      var min = range[0];\n                      var ran = max - min;\n                      return Math.round((min + Math.random() * ran) * 10) / 10;\n                    } else {\n                      return Math.round(Math.random() * 100);\n                    }\n                  };\n\n                  var val = calcRandom(range);\n                  var sampleData = {\n                    \"agentId\": \"0\",\n                    \"aggregatePeriod\": null,\n                    \"aggregateStatus\": null,\n                    \"aggregateType\": null,\n                    \"arisingTime\": timeStampToStr(curTime),\n                    \"compressCount\": 0,\n                    \"computeTaskId\": 0,\n                    \"dataSerialNumber\": 0,\n                    \"dataTime\": null,\n                    \"insertTime\": timeStampToStr(curTime),\n                    \"kpiCode\": kpi.id,\n                    \"nodeId\": node.id,\n                    \"notes\": null,\n                    \"numberValue\": val,\n                    \"quality\": 0,\n                    \"resourceId\": 0,\n                    \"stringValue\": null,\n                    \"value\": val,\n                    \"valueStr\": val + \"\"\n                  };\n                  result.push(sampleData);\n                };\n\n                for (var i in kpisDes) {\n                  loopKpis(i, kpisDes[i]);\n                }\n              };\n\n              for (var i in nodesDes) {\n                loopNodes(nodesDes[i]);\n              }\n\n              getData(curTime + frequency);\n            }\n          };\n\n          getData(startTime);\n\n          if (typeof callback == \"function\") {\n            callback(result);\n          }\n        };\n\n        var renderData2D = function renderData2D() {\n          var dictionaryService = services.dictionaryService;\n          var loadArray = [\"energyType\", \"industryShortType\"];\n\n          var nextStep = function nextStep() {\n            var loopNodes = function loopNodes(node) {\n              var loopKpis = function loopKpis(inx, kpi) {\n                var loopInstance = function loopInstance(ins1) {\n                  var loopInstance2 = function loopInstance2(ins2) {\n                    var range;\n\n                    if (ranges) {\n                      range = ranges[inx];\n                    }\n\n                    var calcRandom = function calcRandom(range) {\n                      if (range) {\n                        var max = range[1];\n                        var min = range[0];\n                        var ran = max - min;\n                        return Math.round((min + Math.random() * ran) * 10) / 10;\n                      } else {\n                        return Math.round(Math.random() * 100);\n                      }\n                    };\n\n                    var val = calcRandom(range);\n                    var newTime = timeStamp;\n                    var sampleData = {\n                      \"agentId\": \"0\",\n                      \"aggregatePeriod\": null,\n                      \"aggregateStatus\": null,\n                      \"aggregateType\": null,\n                      \"arisingTime\": timeStampToStr(newTime),\n                      \"compressCount\": 0,\n                      \"computeTaskId\": 0,\n                      \"dataSerialNumber\": 0,\n                      \"dataTime\": null,\n                      \"insertTime\": timeStampToStr(newTime),\n                      \"kpiCode\": kpi.id,\n                      \"nodeId\": node.id,\n                      \"notes\": null,\n                      \"numberValue\": val,\n                      \"instance\": ins1.label + \",\" + ins2.label,\n                      \"quality\": 0,\n                      \"resourceId\": 0,\n                      \"stringValue\": null,\n                      \"value\": val,\n                      \"valueStr\": val + \"\"\n                    };\n                    result.push(sampleData);\n                  };\n\n                  for (var i in loadArray[1].data) {\n                    loopInstance2(loadArray[1].data[i]);\n                  }\n                };\n\n                for (var i in loadArray[0].data) {\n                  loopInstance(loadArray[0].data[i]);\n                }\n              };\n\n              for (var i in kpisDes) {\n                loopKpis(i, kpisDes[i]);\n              }\n            };\n\n            for (var i in nodesDes) {\n              loopNodes(nodesDes[i]);\n            }\n\n            if (typeof callback == \"function\") {\n              callback(result);\n            }\n          };\n\n          var loop = function loop(inx, loadType) {\n            var getEnergyType = function getEnergyType(event) {\n              var checkFinished = function checkFinished() {\n                var every = loadArray.every(function (elem) {\n                  return _typeof(elem) == \"object\";\n                });\n\n                if (every) {\n                  nextStep();\n                }\n              };\n\n              if (event.code == 0) {\n                var rs = [];\n\n                var loop = function loop(el) {\n                  var some = rs.some(function (itm) {\n                    return itm.label == el.label;\n                  });\n\n                  if (!some) {\n                    rs.push(el);\n                  }\n                };\n\n                for (var i in event.data) {\n                  loop(event.data[i]);\n                }\n\n                loadArray[inx] = {\n                  path: loadType,\n                  status: \"finished\",\n                  data: rs\n                };\n                checkFinished();\n              }\n            };\n\n            dictionaryService.getDictValues(loadType, getEnergyType);\n          };\n\n          for (var i in loadArray) {\n            loop(i, loadArray[i]);\n          }\n        };\n\n        var renderData3D = function renderData3D() {\n          var aggr_type;\n          var dictionaryService = services.dictionaryService;\n          var loadArray = [\"energyType\", \"industryShortType\"];\n\n          var nextStep = function nextStep() {\n            var loopNodes = function loopNodes(node) {\n              var loopKpis = function loopKpis(inx, kpi) {\n                var loopAggrType = function loopAggrType(atype) {\n                  var loopInstance = function loopInstance(ins1) {\n                    var loopInstance2 = function loopInstance2(ins2) {\n                      var range;\n\n                      if (ranges) {\n                        range = ranges[inx];\n                      }\n\n                      var calcRandom = function calcRandom(range) {\n                        if (range) {\n                          var max = range[1];\n                          var min = range[0];\n                          var ran = max - min;\n                          return Math.round((min + Math.random() * ran) * 10) / 10;\n                        } else {\n                          return Math.round(Math.random() * 100);\n                        }\n                      };\n\n                      var val = calcRandom(range);\n                      var newTime = timeStamp;\n                      var sampleData = {\n                        \"agentId\": \"0\",\n                        \"aggregatePeriod\": null,\n                        \"aggregateStatus\": null,\n                        \"aggregateType\": atype.valueCode,\n                        \"arisingTime\": timeStampToStr(newTime),\n                        \"compressCount\": 0,\n                        \"computeTaskId\": 0,\n                        \"dataSerialNumber\": 0,\n                        \"dataTime\": null,\n                        \"insertTime\": timeStampToStr(newTime),\n                        \"kpiCode\": kpi.id,\n                        \"nodeId\": node.id,\n                        \"notes\": null,\n                        \"numberValue\": val,\n                        \"instance\": ins2.label + \",\" + ins1.label,\n                        \"quality\": 0,\n                        \"resourceId\": 0,\n                        \"stringValue\": null,\n                        \"value\": val,\n                        \"valueStr\": val + \"\"\n                      };\n                      result.push(sampleData);\n                    };\n\n                    for (var i in loadArray[1].data) {\n                      loopInstance2(loadArray[1].data[i]);\n                    }\n                  };\n\n                  for (var i in loadArray[0].data) {\n                    loopInstance(loadArray[0].data[i]);\n                  }\n                };\n\n                for (var i in aggr_type) {\n                  loopAggrType(aggr_type[i]);\n                }\n              };\n\n              for (var i in kpisDes) {\n                loopKpis(i, kpisDes[i]);\n              }\n            };\n\n            for (var i in nodesDes) {\n              loopNodes(nodesDes[i]);\n            }\n\n            if (typeof callback == \"function\") {\n              callback(result);\n            }\n          };\n\n          var loop = function loop(inx, loadType) {\n            var getEnergyType = function getEnergyType(event) {\n              var checkFinished = function checkFinished() {\n                var every = loadArray.every(function (elem) {\n                  return _typeof(elem) == \"object\";\n                });\n\n                if (every) {\n                  nextStep();\n                }\n              };\n\n              if (event.code == 0) {\n                var rs = [];\n\n                var loop = function loop(el) {\n                  var some = rs.some(function (itm) {\n                    return itm.label == el.label;\n                  });\n\n                  if (!some) {\n                    rs.push(el);\n                  }\n                };\n\n                for (var i in event.data) {\n                  loop(event.data[i]);\n                }\n\n                loadArray[inx] = {\n                  path: loadType,\n                  status: \"finished\",\n                  data: rs\n                };\n                checkFinished();\n              }\n            };\n\n            dictionaryService.getDictValues(loadType, getEnergyType);\n          };\n\n          for (var i in loadArray) {\n            loop(i, loadArray[i]);\n          }\n\n          dictionaryService.getDictValues(\"aggregateType\", function (event) {\n            if (event.code == 0) {\n              aggr_type = event.data.slice(0, 2);\n            }\n          });\n        };\n\n        if (type == \"time\") {\n          renderData();\n        } else if (type == \"ci\") {\n          renderData(0);\n        } else if (type == \"ci_2d\") {\n          renderData2D();\n        } else if (type == \"ci_3d\") {\n          renderData3D();\n        }\n\n        return result;\n      };\n\n      cmethod.prototype.getModels = function (callback) {\n        resourceUIService.getModels(function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getModelByIds = function (ids, callback) {\n        resourceUIService.getModelByIds(ids, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getKpisByModelId = function (modelId, callback) {\n        if (modelId) {\n          resourceUIService.getKpisByModelId(modelId, function (event) {\n            if (event.code == 0) {\n              for (var i in event.data) {\n                var kpiId = event.data[i].id;\n\n                if (!cmethod.kpiDic[kpiId]) {\n                  cmethod.kpiDic[kpiId] = event.data[i].label;\n                }\n              }\n\n              callback(event.data);\n            }\n          });\n        } else {\n          callback([]);\n        }\n      };\n      /**\n       * 根据不同的modelId获得资源\n       * 300域 301客户 302项目\n       * @param {Object} modelId\n       * @param {Object} callback\n       */\n\n\n      cmethod.prototype.getResourceByModelId = function (modelId, callback, extendstr, noCache) {\n        var fn = cmethod.prototype.getResourceByModelId;\n        fn.model = fn.model || {};\n        fn.model[modelId] = fn.model[modelId] || {};\n        var md = fn.model[modelId];\n\n        if (md.cached && !noCache) {\n          callback(clone(md.cached));\n        } else {\n          md.promise = md.promise || new Promise(function (resolve) {\n            resourceUIService.getResourceByModelId(modelId, function (event) {\n              if (event.code == 0) {\n                resolve(event.data);\n              }\n            });\n          }, extendstr);\n          md.promise.then(function (resource) {\n            md.cached = resource;\n            callback(clone(resource));\n          });\n        }\n      };\n\n      cmethod.prototype.getDomainsByFilter = function (filter, callback) {\n        resourceUIService.getDomainsByFilter(filter, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getDomainsByFilters = function (filter, callback) {\n        resourceUIService.getDomainsByFilters(filter, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getDeviceDiagnosticResumeAndAlertStatis = function (params, callback) {\n        ticketTaskService.getDeviceDiagnosticResumeAndAlertStatis(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getDeviceDiagnosticResumeAndAlertBypage = function (params, pageRequest, callback) {\n        ticketTaskService.getDeviceDiagnosticResumeAndAlertBypage(params, pageRequest, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.queryDomainsByEnterpriseId = function (filter, callback) {\n        energyConsumeUIService.queryDomainsByEnterpriseId(filter, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getProjectsByDomains = function (domains, callback) {\n        var param = {};\n\n        if (domains) {\n          param.domainPath = domains;\n        }\n\n        projectUIService.findProjectsByCondition(param, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getProjectsByDomains = function (domains, callback) {\n        var param = {};\n\n        if (domains) {\n          param.domainPath = domains;\n        }\n\n        projectUIService.findProjectsByCondition(param, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getCurrentProjectsFromDomain = function (callback) {\n        var cur = this;\n        var domains = userLoginUIService.user.domains;\n        resourceUIService.getDomainsByFilter({\n          domains: userLoginUIService.user.domains,\n          modelId: 302\n        }, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.findProjectById = function (id, callback) {\n        projectUIService.findProjectById(id, function (event) {\n          if (event.code == 0) {\n            if (callback) {\n              callback(event.data);\n            }\n          }\n        });\n      };\n\n      cmethod.prototype.getCurrentProjectsByCustom = function (callback) {\n        var cur = this; //如果没有subDomain的话，那就不是客户用户，没有customerId的\n\n        if (!userLoginUIService.user.subDomain) {\n          callback([]);\n          return;\n        }\n\n        var arr = userLoginUIService.user.subDomain.split(\"/\");\n        var customerId = arr[arr.length - 2];\n        var param = {\n          customerId: customerId\n        };\n        projectUIService.findProjectsByCondition(param, function (event) {\n          if (event.code == 0) {\n            if (callback) {\n              callback(event.data);\n            }\n          }\n        });\n      };\n\n      cmethod.prototype.getViewByProjectId = function (resId, callback) {\n        var getRootPath = function getRootPath(domainPath) {\n          var arr = domainPath.split(\"/\");\n          return \"/\" + arr[1] + \"/\" + arr[2] + \"/\";\n        };\n\n        var rootPath = getRootPath(userLoginUIService.user.domainPath);\n        viewFlexService.getViewsOnlyPublishedByTypeAndDomainPath('configure', rootPath, function (event) {\n          var views = event.data;\n          var find = views.find(function (view) {\n            if (view.template) {\n              if (view.template.resourceType == \"project\") {\n                if (view.template.resourceId == resId) {\n                  return true;\n                }\n              }\n            }\n\n            return false;\n          });\n\n          if (find) {\n            viewFlexService.getViewById(find.viewId, function (event) {\n              if (event.code == 0) {\n                callback(event.data);\n              }\n            });\n          } else {\n            callback(null);\n          }\n        });\n      };\n\n      cmethod.prototype.getAllMyViews = function (callback) {\n        viewFlexService.getAllMyViews(function (event) {\n          if (event.code == 0) {\n            var views = event.data;\n            callback(views);\n          } else {\n            callback(null);\n          }\n        });\n      };\n\n      cmethod.prototype.deleteView = function (viewId, callback) {\n        viewFlexService.deleteView(viewId, function (event) {\n          if (event.code == 0) {\n            var views = event.data;\n            callback(views);\n          } else {\n            callback(null);\n          }\n        });\n      };\n\n      cmethod.prototype.getDefaultView = function (modelId, callback) {\n        viewFlexService.getDefaultView(modelId, function (event) {\n          if (event.code == 0) {\n            var views = event.data;\n            callback(views);\n          } else {\n            callback(null);\n          }\n        });\n      };\n\n      cmethod.prototype.getManagedViewsByTypeAndRole = function (type, callback) {\n        viewFlexService.getManagedViewsByTypeAndRole(type, function (event) {\n          if (event.code == 0) {\n            var views = event.data;\n            callback(views);\n          } else {\n            callback(null);\n          }\n        });\n      };\n\n      cmethod.prototype.getViewsOnlyPublishedByTypeAndDomainPath = function (type, rootPath, callback) {\n        viewFlexService.getViewsOnlyPublishedByTypeAndDomainPath(type, rootPath, function (event) {\n          if (event.code == 0) {\n            var views = event.data;\n            callback(views);\n          } else {\n            callback(null);\n          }\n        });\n      };\n\n      _proto_.getRoot = function (callback) {\n        psTreeData.getRoot().then(callback);\n      };\n\n      cmethod.prototype.getViewByModelId = function (resId, callback) {\n        var getRootPath = function getRootPath(domainPath) {\n          var arr = domainPath.split(\"/\");\n          return \"/\" + arr[1] + \"/\" + arr[2] + \"/\";\n        };\n\n        var rootPath = getRootPath(userLoginUIService.user.domainPath);\n        viewFlexService.getViewsOnlyPublishedByTypeAndDomainPath('configure', rootPath, function (event) {\n          var views = event.data;\n          var find = views.find(function (view) {\n            if (view.template) {\n              if (view.template.resourceType == \"device\") {\n                if (view.template.resourceId == resId) {\n                  return true;\n                }\n              }\n            }\n\n            return false;\n          });\n\n          if (find) {\n            viewFlexService.getViewById(find.viewId, function (event) {\n              if (event.code == 0) {\n                callback(event.data);\n              }\n            });\n          } else {\n            callback(null);\n          }\n        });\n      };\n\n      cmethod.prototype.getSimulateList = function (data, callback) {\n        customMethodService.getSimulateList(data, callback);\n      };\n\n      var uuid = Math.uuid();\n\n      cmethod.prototype.webSocket = function (nodeIds, kpiCodes, callback, fixedid) {\n        if (nodeIds.length == 0 || kpiCodes.length == 0) return;\n\n        if (fixedid) {\n          uuid = fixedid;\n        } else {\n          uuid = Math.uuid();\n        }\n\n        SwSocket.unregister(uuid);\n        var paramSocket = {\n          ciid: nodeIds.toString(),\n          kpi: kpiCodes.toString()\n        };\n        var operation = \"register\";\n        SwSocket.register(uuid, operation, function (event) {\n          if (typeof callback == \"function\") {\n            callback(event.data);\n          }\n        });\n        SwSocket.send(uuid, operation, 'kpi', paramSocket);\n      };\n\n      cmethod.prototype.getKpiFromViewByTypeAndRole = function (viewType, resourceType, resourceId, callback, socketCallback) {\n        var kpiCodes = [];\n        var nodeIds = [Number(this.getParameter(\"resourceId\"))];\n        var valueDic = {};\n        var uuid = Math.uuid();\n        this.getViewsByOnlyRole(viewType, resourceType, resourceId, function (view) {\n          var json = JSON.parse(view.content);\n          json.cells.sort(function (a, b) {\n            return parseInt(a.z) - parseInt(b.z);\n          });\n          json.cells.forEach(function (cell) {\n            if (cell.type == \"basic.Rect\" && cell.kpiId && cell.kpiId.length > 8 && cell.nodeId && cell.nodeId.length > 8) {\n              var kpiId;\n\n              if (typeof cell.kpiId == \"string\" && cell.kpiId.search('number:') > -1) {\n                kpiId = Number(cell.kpiId.split(\":\")[1]);\n              } else {\n                kpiId = Number(cell.kpiId);\n              }\n\n              var modelId;\n\n              if (typeof cell.modelId == \"string\" && cell.modelId.search('number:') > -1) {\n                modelId = Number(cell.modelId.split(\":\")[1]);\n              } else {\n                modelId = Number(cell.modelId);\n              }\n\n              var kpiDef = {};\n\n              if (resourceUIService.rootModelsDic && resourceUIService.rootModelsDic[modelId]) {\n                if (resourceUIService.rootModelsDic[modelId].kpiDic && resourceUIService.rootModelsDic[modelId].kpiDic[kpiId]) {\n                  kpiDef = resourceUIService.rootModelsDic[modelId].kpiDic[kpiId];\n                }\n              }\n\n              kpiCodes.push(kpiId);\n              valueDic[kpiId] = {\n                kpiName: cell.attrs.text.text ? cell.attrs.text.text : kpiDef.label,\n                kpiUnit: cell.unitType == \"number:1\" ? kpiDef.unitLabel ? kpiDef.unitLabel : \"\" : \"\",\n                value: \"无\",\n                kpiCode: kpiDef.id,\n                rangeObj: kpiDef.rangeObj\n              };\n            }\n          });\n          var kpiQueryModel = {\n            category: 'ci',\n            isRealTimeData: true,\n            nodeIds: nodeIds,\n            kpiCodes: kpiCodes,\n            startTime: null,\n            endTime: null,\n            timeRange: \"\",\n            statisticType: \"psiot\",\n            condList: []\n          };\n          var param = [\"kpi\", kpiQueryModel];\n          kpiDataService.getValueList(param, function (event) {\n            if (event.code == 0) {\n              event.data.forEach(function (kpi) {\n                valueDic[kpi.kpiCode].value = kpi.value;\n                if (valueDic[kpi.kpiCode].rangeObj) valueDic[kpi.kpiCode].value = valueDic[kpi.kpiCode].rangeObj[valueDic[kpi.kpiCode].value];\n              });\n              var returnAry = [];\n\n              for (var key in valueDic) {\n                returnAry.push(valueDic[key]);\n              }\n\n              callback(returnAry);\n            }\n          });\n          var paramSocket = {\n            ciid: nodeIds.toString(),\n            kpi: kpiCodes.toString()\n          };\n          SwSocket.unregister(uuid);\n          var operation = \"register\";\n          SwSocket.register(uuid, operation, function (event) {\n            if (typeof socketCallback == \"function\") {\n              if (valueDic[event.data.kpiCode].rangeObj) event.data.value = valueDic[event.data.kpiCode].rangeObj[event.data.value];\n              socketCallback(event.data);\n            }\n          });\n          SwSocket.send(uuid, operation, 'kpi', paramSocket);\n        });\n      };\n\n      cmethod.prototype.filterEnterprises = function (callback) {\n        var domainPath = userLoginUIService.user.domains;\n        energyConsumeUIService.findEnterpriseInfoByDomainPath(domainPath, function (returnObj) {\n          if (returnObj.code == 0) {\n            returnObj.data.valueCode = returnObj.data.industryType;\n            cmethod.prototype.queryEnterpriseListByHis(returnObj.data, function (eventData) {\n              callback(eventData);\n            });\n          }\n        });\n      };\n\n      cmethod.prototype.queryEnterpriseListByHis = function (shortName, callback) {\n        if (!shortName) {\n          growl.warning(\"请选择行业\");\n          return;\n        }\n\n        var industryShortType = shortName.valueCode; //获取所有企业\n\n        var queryEnterprises = [];\n\n        (function queryAllEnterprises() {\n          energyConsumeUIService.findEnterpriseInfos(function (returnObj) {\n            if (returnObj.code == 0) {\n              returnObj.data.forEach(function (item) {\n                if (item.industryType == industryShortType) {\n                  item.label = item.name;\n                  queryEnterprises.push(item);\n                }\n              });\n              callback(queryEnterprises);\n            }\n          });\n        })();\n      };\n\n      cmethod.prototype.queryDomains = function (filter, callback) {\n        var nodeIdAry = [];\n        var index = 0;\n\n        var queryDomainsByEnterpriseId = function queryDomainsByEnterpriseId(enterpriseId) {\n          energyConsumeUIService.queryDomainsByEnterpriseId(enterpriseId, function (returnObj) {\n            if (returnObj.code == 0) {\n              index++;\n              var ary = returnObj.data.filter(function (item) {\n                return item.modelDefinitionId == filter.modelId;\n              });\n              ary.forEach(function (item) {\n                nodeIdAry.push(item.id);\n              });\n\n              if (index == filter.enterpriseList.length) {\n                callback(nodeIdAry);\n                index = 0;\n              }\n            }\n          });\n        };\n\n        filter.enterpriseList.forEach(function (item) {\n          queryDomainsByEnterpriseId(item);\n        });\n      };\n\n      cmethod.prototype.navigateToTracker = function (ticketNo) {\n        var cur = this;\n        cur.refresh(\"prod_tracker\", {\n          ticketNo: ticketNo\n        });\n      };\n\n      cmethod.prototype.getDirectivesByTypeAndRole = function (viewType, resourceType, resourceId, callback) {\n        var ids = {};\n        var cur = this;\n        cur.getManagedViewsByTypeAndRole(viewType, resourceType, resourceId, function (view) {\n          var json = JSON.parse(view.content);\n          json.cells.forEach(function (cell) {\n            if (cell.directiveIds) {\n              cell.directiveIds.forEach(function (dirctiveId) {\n                if (typeof dirctiveId == \"string\") ids[dirctiveId.split(\":\")[1]] = true;else ids[dirctiveId] = true;\n              });\n            }\n          });\n          cur.getDirectivesByModelId(resourceId, function (event) {\n            var resources = [];\n            event.forEach(function (dir) {\n              if (ids[dir.id]) resources.push(dir);\n            });\n            resources.sort(doubleCompare([\"values\", \"index\"], \"desc\"));\n            callback(resources);\n          });\n        });\n      };\n\n      cmethod.prototype.getDirectivesByTypeAndRoleAndValue = function (viewType, resourceType, modelId, callback) {\n        var ids = {};\n        var resourceId = this.getParameter(\"resourceId\");\n        var cur = this;\n        cur.getViewsByOnlyRole(viewType, resourceType, modelId, function (view) {\n          var json = JSON.parse(view.content);\n          json.cells.forEach(function (cell) {\n            if (cell.directiveIds) {\n              cell.directiveIds.forEach(function (dirctiveId) {\n                if (typeof dirctiveId == \"string\") ids[dirctiveId.split(\":\")[1]] = true;else ids[dirctiveId] = true;\n              });\n            }\n          });\n          cur.getDirectivesByModelId(modelId, function (event) {\n            var directives = [];\n            event.forEach(function (dir) {\n              if (ids[dir.id]) directives.push(dir);\n            });\n            directives.sort(doubleCompare([\"values\", \"index\"], \"desc\"));\n            var kpis = directives.map(function (elem) {\n              if (elem.params) {\n                if (elem.params[0]) {\n                  return elem.params[0].id;\n                } else {\n                  return 0;\n                }\n              } else {\n                return 0;\n              }\n            });\n            var ci = [parseInt(resourceId)];\n            cur.getKpiValueCi(ci, kpis, function (event) {\n              var loop = function loop(item) {\n                var directive = directives.find(function (elem) {\n                  if (elem.params[0]) {\n                    return elem.params[0].id == item.kpiCode;\n                  } else {\n                    return false;\n                  }\n                });\n\n                if (directive) {\n                  directive.value = item.value;\n                }\n              };\n\n              for (var i in event) {\n                loop(event[i]);\n              }\n\n              callback(directives);\n            });\n          });\n        });\n      };\n\n      cmethod.prototype.getDirectivesByModelId = function (modelId, callback) {\n        if (modelId) {\n          resourceUIService.getDirectivesByModelId(modelId, function (event) {\n            if (event.code == 0) {\n              callback(event.data);\n            }\n          });\n        } else {\n          callback([]);\n        }\n      };\n\n      cmethod.prototype.getRootTarget = function () {\n        return rootTarget;\n      };\n\n      cmethod.prototype.queryBenchmarkByShortName = function (shortName, callback) {\n        var industryDic = {};\n        var energyDic = {};\n        var industryShortType = [];\n        var energyType = [];\n        dictionaryService.getAllDicts(function (returnObj) {\n          if (returnObj.code == 0) {\n            returnObj.data.forEach(function (item) {\n              if (item.dictCode == 'industryShortType') {\n                industryShortType.push(item);\n              } else if (item.dictCode == 'energyType') {\n                energyType.push(item);\n              }\n            });\n            industryShortType.forEach(function (item) {\n              industryDic[item.label] = item;\n            });\n            energyType.forEach(function (item) {\n              energyDic[item.label] = item;\n            });\n            callBack();\n          }\n        });\n\n        function callBack() {\n          var returnAry = [];\n          var param = [\"kpi\", {\n            \"isRealTimeData\": true,\n            \"nodeIds\": [userLoginUIService.user.domainID],\n            \"kpiCodes\": [3327],\n            \"granularityUnit\": 'MONTH',\n            \"aggregateType\": [\"VALENTWEIGHT\"],\n            \"timeRange\": \"\",\n            \"statisticType\": \"psiot\",\n            \"includeInstance\": true,\n            \"condList\": [],\n            \"timePeriod\": 1,\n            \"dataType\": 1\n          }];\n          kpiDataService.getValueList(param, function (returnObj) {\n            if (returnObj.code == 0) {\n              returnObj.data.forEach(function (item) {\n                var instanceAry = item.instance.split(',');\n                item.instanceName = industryDic[instanceAry[0]].param;\n                item.instanceCode = industryDic[instanceAry[0]].valueCode;\n                item.energyName = instanceAry[1];\n                item.energyCode = energyDic[instanceAry[1]].valueCode;\n\n                if (shortName.label == instanceAry[0]) {\n                  returnAry.push(item);\n                }\n              });\n              callback(returnAry);\n            }\n          });\n        }\n      };\n\n      cmethod.prototype.getTaskBySimpleConditionAndPage = function (params, callback, pages) {\n        var pageRequest = {\n          \"start\": 0,\n          \"length\": 1000000,\n          \"sort\": \"standardNo\",\n          \"sortType\": \"desc\"\n        };\n\n        if (pages) {\n          pageRequest = pages;\n        }\n\n        maintenanceTaskUIService.getTaskBySimpleConditionAndPage(params, pageRequest, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; //新增的1\n\n\n      cmethod.prototype.getDeviceFaultInfoList = function (params, callback) {\n        //var pageRequest = {\"start\":0,\"length\":1000000,\"asc\":\"modifyTime\",\"sortType\":\"desc\"};\n        //if (pages) {\n        //  pageRequest = pages;\n        //}\n        deviceResumeUIService.getDeviceFaultInfoList(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      };\n\n      cmethod.prototype.Info = Info.get; //新增的2\n\n      cmethod.prototype.saveDeviceFaultInfo = function (params, callback) {\n        //var pageRequest = {\"start\":0,\"length\":1000000,\"asc\":\"modifyTime\",\"sortType\":\"desc\"};\n        //if (pages) {\n        //  pageRequest = pages;\n        //}\n        deviceResumeUIService.saveDeviceFaultInfo(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; //新增的3\n\n\n      cmethod.prototype.deleteDeviceFaultInfoById = function (id, callback) {\n        deviceResumeUIService.deleteDeviceFaultInfoById(id, function (event) {\n          callback(event);\n        });\n      }; //新增的书1\n\n\n      cmethod.prototype.getDeviceFaultBookList = function (params, callback) {\n        //var pageRequest = {\"start\":0,\"length\":1000000,\"asc\":\"modifyTime\",\"sortType\":\"desc\"};\n        //if (pages) {\n        //  pageRequest = pages;\n        //}\n        deviceResumeUIService.getDeviceFaultBookList(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; //新增的书2\n\n\n      cmethod.prototype.saveDeviceFaultBook = function (params, callback) {\n        //var pageRequest = {\"start\":0,\"length\":1000000,\"asc\":\"modifyTime\",\"sortType\":\"desc\"};\n        //if (pages) {\n        //  pageRequest = pages;\n        //}\n        deviceResumeUIService.saveDeviceFaultBook(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; //新增的书3\n\n\n      cmethod.prototype.deleteDeviceFaultBookById = function (id, callback) {\n        deviceResumeUIService.deleteDeviceFaultBookById(id, function (event) {\n          callback(event);\n        });\n      }; //告警统计\n\n\n      cmethod.prototype.getDeviceDiagnosticResumeListBypage = function (params, pageRequest, callback) {\n        deviceResumeUIService.getDeviceDiagnosticResumeListBypage(params, pageRequest, function (event) {\n          callback(event);\n        });\n      }; // 宝钢的下载表格\n\n\n      cmethod.prototype.exportBGExcel = function (service, method, format, params, pageRequset, callback) {\n        deviceResumeUIService.exportBGExcel(service, method, format, params, pageRequset, function (event) {\n          callback(event);\n        });\n      }; // 宝钢的下载表格\n\n\n      cmethod.prototype.exportHBExcel = function (service, method, format, params, callback) {\n        deviceResumeUIService.exportHBExcel(service, method, format, params, function (event) {\n          callback(event);\n        });\n      }; //新增的备件更换和服役\n\n\n      cmethod.prototype.getRollerPartActionLogByCondition = function (params, callback) {\n        rollerPartUIService.getRollerPartActionLogByCondition(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; //新增的查询所有辊道\n\n\n      cmethod.prototype.getRollerPartByCondition = function (params, callback) {\n        rollerPartUIService.getRollerPartByCondition(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 发起辊道备修委托\n\n\n      cmethod.prototype.rollerTrust = function (rollerPartList, paramValues, callback) {\n        rollerPartUIService.rollerTrust(rollerPartList, paramValues, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 卷筒备修委托-备件更换\n\n\n      cmethod.prototype.rollerReelTrustReplace = function (ticketNo, actionLog, taskValues, callback) {\n        rollerPartUIService.rollerReelTrustReplace(ticketNo, actionLog, taskValues, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 沉降系统\n\n\n      cmethod.prototype.getFactorySettlementByConditonAndPage = function (condtion, pageRequest, callback) {\n        rollerPartUIService.getFactorySettlementByConditonAndPage(condtion, pageRequest, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 卷筒备修委托\n\n\n      cmethod.prototype.rollerReelTrust = function (rollerPartList, message, paramValues, callback) {\n        rollerPartUIService.rollerReelTrust(rollerPartList, message, paramValues, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 发起 点检计划任务更改-批量点检\n\n\n      cmethod.prototype.pointCheckBatchDeal = function (ticketTaskList, callback) {\n        rollerPartUIService.pointCheckBatchDeal(ticketTaskList, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 生成额外计划\n\n\n      cmethod.prototype.createTempPointCheckTask = function (srcTaskList, changeDate, changeReason, callback) {\n        rollerPartUIService.createTempPointCheckTask(srcTaskList, changeDate, changeReason, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 计划日期调整\n\n\n      cmethod.prototype.changeTaskPlanTime = function (srcTaskList, changeDate, changeReason, callback) {\n        rollerPartUIService.changeTaskPlanTime(srcTaskList, changeDate, changeReason, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 点检任务统计\n\n\n      cmethod.prototype.getPointCheckStatis = function (ticketTaskQueryModel, callback) {\n        rollerPartUIService.getPointCheckStatis(ticketTaskQueryModel, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 更换辊道备修委托\n\n\n      cmethod.prototype.getRollerPartByCondition = function (params, callback) {\n        rollerPartUIService.getRollerPartByCondition(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 更换辊道\n\n\n      cmethod.prototype.rollerOnBoard = function (params, callback) {\n        rollerPartUIService.rollerOnBoard(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 总包诊断工程师提交报告:\n\n\n      cmethod.prototype.createCycleReport = function (params, callback) {\n        rollerPartUIService.createCycleReport(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 总包诊断工程师查询kpi:\n\n\n      cmethod.prototype.getCycleKpiList = function (params, callback) {\n        rollerPartUIService.getCycleKpiList(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 诊断分析工程师发起报告流程:\n\n\n      cmethod.prototype.sendCycleReportByTicket = function (params, callback) {\n        rollerPartUIService.sendCycleReportByTicket(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 周期报告查询（真分页接口）\n\n\n      cmethod.prototype.getDeviceCycleReportReumeListByPage = function (params, pageRequest, callback) {\n        deviceResumeUIService.getDeviceCycleReportReumeListByPage(params, pageRequest, function (event) {\n          callback(event);\n        });\n      }; // 查询日期调整\n\n\n      cmethod.prototype.getDatePickerListByCondition = function (params, pageSize, callback) {\n        rollerPartUIService.getDatePickerListByCondition(params, pageSize, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; //  计划预设定时期查询\n\n\n      cmethod.prototype.getPlanTaskTime = function (params, callback) {\n        rollerPartUIService.getPlanTaskTime(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 计划预设定时期设置\n\n\n      cmethod.prototype.setPlanTaskTime = function (params, callback) {\n        rollerPartUIService.setPlanTaskTime(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 工作日调整\n\n\n      cmethod.prototype.changeDatePickerBatch = function (srcDatePickerList, targetDate, changeReason, callback) {\n        rollerPartUIService.changeDatePickerBatch(srcDatePickerList, targetDate, changeReason, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 模型分析保存接口\n\n\n      cmethod.prototype.saveDeviceWorkInfoList = function (deviceId, deviceWorkInfoList, callback) {\n        deviceResumeUIService.saveDeviceWorkInfoList(deviceId, deviceWorkInfoList, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 模型分析查询接口\n\n\n      cmethod.prototype.getWorkInfoByDeviceId = function (deviceId, callback) {\n        deviceResumeUIService.getWorkInfoByDeviceId(deviceId, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 查询设备最新工况\n\n\n      cmethod.prototype.getDeviceConditionStatus = function (deviceId, callback) {\n        deviceResumeUIService.getDeviceConditionStatus(deviceId, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 查询最新模型分析结果\n\n\n      cmethod.prototype.getModelAnalysisResultByConditionAndPage = function (params, PageRequest, callback) {\n        deviceResumeUIService.getModelAnalysisResultByConditionAndPage(params, PageRequest, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 日报下载\n\n\n      cmethod.prototype.getDailyReportByCondtionAndPage = function (params, PageRequest, callback) {\n        rollerPartUIService.getDailyReportByCondtionAndPage(params, PageRequest, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 故障模型-查询\n\n\n      cmethod.prototype.getFaultDiagnosisModelByConditionAndPage = function (params, PageRequest, callback) {\n        rollerPartUIService.getFaultDiagnosisModelByConditionAndPage(params, PageRequest, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 故障模型-新增/编辑\n\n\n      cmethod.prototype.addFaultDiagnosisModel = function (params, callback) {\n        rollerPartUIService.addFaultDiagnosisModel(params, function (event) {\n          if (event.code == 0) {\n            callback(event);\n          } else {\n            callback(event);\n          }\n        });\n      }; // 故障模型-删除\n\n\n      cmethod.prototype.deleteFaultDiagnosisModel = function (params, callback) {\n        rollerPartUIService.deleteFaultDiagnosisModel(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 裂化模型-速率-查询\n\n\n      cmethod.prototype.getCrackRateModelByConditionAndPage = function (params, PageRequest, callback) {\n        rollerPartUIService.getCrackRateModelByConditionAndPage(params, PageRequest, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 裂化模型-速率-新增/编辑\n\n\n      cmethod.prototype.addCrackRateModel = function (params, callback) {\n        rollerPartUIService.addCrackRateModel(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 裂化模型-速率-删除\n\n\n      cmethod.prototype.deleteFaultCrackRateModel = function (params, callback) {\n        rollerPartUIService.deleteFaultCrackRateModel(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 裂化模型-温差-查询\n\n\n      cmethod.prototype.getCrackDiffModelByConditionAndPage = function (params, PageRequest, callback) {\n        rollerPartUIService.getCrackDiffModelByConditionAndPage(params, PageRequest, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 裂化模型-温差-新增/编辑\n\n\n      cmethod.prototype.addCrackDiffModel = function (params, callback) {\n        rollerPartUIService.addCrackDiffModel(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 裂化模型-温差-删除\n\n\n      cmethod.prototype.deleteCrackDiffModel = function (params, callback) {\n        rollerPartUIService.deleteCrackDiffModel(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 查找模型分析对应的字段\n\n\n      cmethod.prototype.getDiagnosisModel = function (modelId, callback) {\n        rollerPartUIService.getDiagnosisModel(modelId, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 发起模型分析\n\n\n      cmethod.prototype.sendModelAnalysis = function (deviceId, analysisTime, callback) {\n        deviceResumeUIService.sendModelAnalysis(deviceId, analysisTime, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 训练数据同步\n\n\n      cmethod.prototype.sendModelAnalysisTrain = function (deviceId, trainType, startTime, endTim, callback) {\n        deviceResumeUIService.sendModelAnalysisTrain(deviceId, trainType, startTime, endTim, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      };\n\n      cmethod.prototype.getTaskByCondition = function (params, callback) {\n        maintenanceTaskUIService.getTaskByCondition(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      };\n\n      cmethod.prototype.addPointCheckStanard = function (params, callback) {\n        maintenanceTaskUIService.addPointCheckStanard(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      };\n\n      cmethod.prototype.addMaintainStandardTask = function (params, callback) {\n        maintenanceTaskUIService.addMaintainStandardTask(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      };\n\n      cmethod.prototype.addOfflineStandard = function (params, callback) {\n        maintenanceTaskUIService.addOfflineStandard(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      };\n\n      cmethod.prototype.deleteTask = function (id, callback) {\n        maintenanceTaskUIService.deleteTask(id, function (event) {\n          callback(event);\n        });\n      };\n\n      cmethod.prototype.deleteMaintainStandardTask = function (id, callback) {\n        maintenanceTaskUIService.deleteMaintainStandardTask(id, function (event) {\n          callback(event);\n        });\n      };\n\n      cmethod.prototype.addPreparedMaintainTrust = function (id, callback) {\n        maintenanceTaskUIService.addPreparedMaintainTrust(id, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      };\n\n      cmethod.prototype.deleteSparePart = function (id, callback) {\n        sparePartUIService.deleteSparePart(id, function (event) {\n          callback(event);\n        });\n      };\n\n      cmethod.prototype.saveSparePart = function (params, callback) {\n        sparePartUIService.saveSparePart(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      };\n\n      cmethod.prototype.getSparePartByDeviceId = function (id, callback) {\n        sparePartUIService.getSparePartByDeviceId(id, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      };\n\n      $getCurrentResource(function (res) {\n        setValue(\"global/resource\", res);\n      });\n      return new cmethod(mydata);\n    }\n\n    return cms;\n  }]);\n  return services;\n});"],"sourceRoot":"/source/"}