{"version":3,"sources":["js/directives/tree-view-dom.js"],"names":["define","directives","initDirective","timeout","compile","restrict","scope","source","formatter","mark","checkbox","link","element","attr","description","$","css","des_text","text","des_close","append","des_title","getAllChild","data","rs","traverse","obj","push","i","$watch","n","o","s","undefined","type","searchlist","children","remove","target","depth","parentIcon","parentDom","parentUser","parentData","dom","btn","icon","addClass","userIcon","name","checkIcon","infoBtn","infoBtnLeave","event","stopPropagation","off","inner","ui","on","offset","opacity","top","left","prepend","animate","val","getChildren","dt","removeClass","hasOwnProperty","parent","getParent","some","every","allchildren","length","elem","max-height","show","Array","render","getCheckNode","nodes"],"mappings":"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","file":"js/directives/tree-view-dom.js","sourcesContent":["define(['directives/directives'], function (directives) {\n  'use strict';\n\n  directives.initDirective('treeView', ['$timeout', '$compile', function (timeout, compile) {\n    return {\n      restrict: 'A',\n      scope: {\n        source: \"=\",\n        formatter: \"=\",\n        mark: \"=\",\n        checkbox: \"=\"\n      },\n      link: function link(scope, element, attr) {\n        var description = $(\"<div></div>\").css(\"z-index\", 1999).css(\"background-color\", \"#fff\").css(\"box-shadow\", \"1px 1px 10px rgba(0,0,0,.3)\").css(\"padding\", \"15px 20px\").css(\"margin\", \"-5px 0 0 25px\").css(\"display\", \"block\").css(\"width\", \"300px\").css(\"position\", \"fixed\");\n        var des_text = $(\"<p></p>\").text('').css(\"color\", \"#666\").css(\"margin\", 0).css(\"line-height\", \"16px\").css(\"font-size\", \"12px\").css(\"font-weight\", \"normal\");\n        var des_close = $(\"<div></div>\").append($(\"<span class='close'>x</span>\"));\n        var des_title = $(\"<p></p>\").text(\"描述 :\").css(\"font-weight\", \"bold\").css(\"color\", \"#333\").css(\"margin\", \"10px auto\").css(\"line-height\", \"16px\").css(\"font-size\", \"12px\");\n        description.append(des_close).append(des_title).append(des_text);\n\n        var ready = function ready() {\n          $(element).css(\"position\", \"relative\");\n          $(element).css(\"border\", \"1px solid #eee\");\n          $(element).css(\"box-shadow\", \"1px 1px 5px rgba(0,0,0,.1)\");\n\n          var getAllChild = function getAllChild(data) {\n            var rs = [];\n\n            var traverse = function traverse(obj) {\n              rs.push(obj);\n\n              if (obj[scope.mark]) {\n                for (var i in obj[scope.mark]) {\n                  traverse(obj[scope.mark][i]);\n                }\n              }\n            };\n\n            for (var i in data[scope.mark]) {\n              traverse(data[scope.mark][i]);\n            }\n\n            ;\n            return rs;\n          };\n\n          var sourceWatcher = function sourceWatcher(n, o, s) {\n            var getAllName = function getAllName(data) {\n              var rs = [];\n\n              var traverse = function traverse(data) {\n                rs.push(data.label);\n\n                var loop = function loop(elem) {\n                  traverse(elem);\n                };\n\n                if (data.hasOwnProperty(scope.mark)) {\n                  for (var i in data[scope.mark]) {\n                    loop(data[scope.mark]);\n                  }\n                }\n              };\n\n              traverse(data);\n              return rs;\n            };\n\n            var render = function render(data, type, searchlist) {\n              var tree = data;\n              $(element).children().remove();\n\n              var traverse = function traverse(target, data, depth, parentIcon, parentDom, parentUser, parentData) {\n                depth++;\n                data.depth = depth;\n                var children;\n                var dom = $(\"<div></div>\").css(\"border-bottom\", \"1px solid #ddd\").css(\"position\", \"relative\").css(\"overflow\", \"hidden\").css(\"opacity\", 0).css(\"max-height\", 0).css(\"line-height\", \"30px\");\n                var btn = $(\"<button></button>\").css(\"line-height\", \"12px\").css(\"padding\", \"4px 4px 6px 5px\").css(\"color\", \"#fff\").css(\"border\", \"0\").css(\"background-color\", \"#009dea\").css(\"float\", \"left\").css(\"margin\", \"4px 10px 0px 3px\");\n                var icon = $(\"<span></span>\").addClass(\"glyphicon glyphicon-minus\").css(\"font-size\", \"10px\").css(\"paddin\", \"0 0 0 1px\");\n                var userIcon = $(\"<span></span>\").addClass(\"glyphicon glyphicon-th-list\").css(\"margin\", \"0 15px 0 5px\").css(\"color\", \"#ccc\");\n                var text = $(\"<span></span>\").css(\"font-size\", \"12px\").css(\"margin-left\", 10).text(data.name);\n                var checkbox = $(\"<button></button>\").css(\"line-height\", \"12px\").css(\"font-size\", \"5px\").css(\"padding\", \"3px 4px 3px 4px\").css(\"border\", \"1px solid #ddd\").css(\"margin\", \"2px 0px 0px 2px\").addClass(\"checkbox\");\n                var checkIcon = $(\"<span></span>\").addClass(\" glyphicon glyphicon-ok\");\n                var infoBtn = $(\"<span></span>\").addClass(\"glyphicon glyphicon-question-sign\").css(\"cursor\", \"pointer\").css(\"font-size\", \"16px\").css(\"color\", \"#ccc\").css(\"margin-left\", \"20px\");\n\n                var infoBtnClick = function infoBtnClick(event) {\n                  event.stopPropagation();\n                  description.remove();\n                  var offset = $(event.target).offset();\n                  description.css({\n                    opacity: 0,\n                    top: offset.top - 20,\n                    left: offset.left + 5\n                  });\n                  des_text.text(data.description);\n                  $(\"body\").prepend(description);\n                  description.animate({\n                    opacity: 1\n                  }, 300);\n                  $(\"body\").on(\"click.infoleave\", infoBtnLeave);\n                };\n\n                var infoBtnLeave = function infoBtnLeave(event) {\n                  event.stopPropagation();\n                  $(\"body\").off();\n                  description.remove();\n                };\n\n                var inner = $(\"<div></div>\").css(\"margin-left\", (type != \"search\" ? depth * 20 : 0) + \"px\");\n                btn.append(icon);\n                data.ui = {\n                  checkbox: checkbox,\n                  checkIcon: checkIcon\n                };\n                infoBtn.on(\"click\", infoBtnClick);\n\n                if (!parentData) {\n                  dom.css(\"background-color\", \"#eee\");\n                }\n\n                ;\n\n                var foldClick = function foldClick(event) {\n                  if (children.css(\"max-height\") == \"0px\") {\n                    timeout(function () {\n                      icon.removeClass().addClass(\"glyphicon glyphicon-minus\");\n                      children.animate({\n                        \"max-height\": 2000,\n                        \"opacity\": 1\n                      }, 300);\n                    });\n                  } else {\n                    timeout(function () {\n                      icon.removeClass().addClass(\"glyphicon glyphicon-plus\");\n                      children.animate({\n                        \"max-height\": 0,\n                        \"opacity\": 0\n                      }, 300);\n                    });\n                  }\n\n                  ;\n                };\n\n                var checkboxClick = function checkboxClick() {\n                  var val;\n\n                  if (data[scope.checkbox] == 0) {\n                    val = 1;\n                  } else {\n                    val = 0;\n                  }\n\n                  var getChildren = function getChildren(dt) {\n                    dt[scope.checkbox] = val;\n\n                    if (val == 0) {\n                      dt.ui.checkbox.removeClass().addClass(\"checkbox\");\n                      dt.ui.checkIcon.removeClass().addClass(\"glyphicon glyphicon-empty\");\n                    } else {\n                      dt.ui.checkbox.removeClass().addClass(\"checkbox\");\n                      dt.ui.checkIcon.removeClass().addClass(\"glyphicon glyphicon-ok\");\n                    }\n\n                    if (dt.hasOwnProperty(scope.mark)) {\n                      for (var i in dt[scope.mark]) {\n                        getChildren(dt[scope.mark][i]);\n                      }\n                    }\n                  };\n\n                  var getParent = function getParent(dt) {\n                    var some, every;\n                    var allchildren = getAllChild(dt);\n\n                    if (allchildren.length > 1) {\n                      every = allchildren.every(function (elem) {\n                        return elem[scope.checkbox] == 1;\n                      });\n                      some = allchildren.some(function (elem) {\n                        return elem[scope.checkbox] == 1;\n                      });\n                    } else if (allchildren.length == 1) {\n                      if (data[scope.checkbox] == 0) {\n                        some = true;\n                      } else {\n                        every = true;\n                      }\n                    } else {\n                      every = true;\n                      some = false;\n                    }\n\n                    if (val == 0) {\n                      if (every) {\n                        dt[scope.checkbox] = 1;\n                        dt.ui.checkbox.removeClass().addClass(\"checkbox\");\n                        dt.ui.checkIcon.removeClass().addClass(\"glyphicon glyphicon-ok\");\n                      } else if (some) {\n                        dt[scope.checkbox] = 1;\n                        dt.ui.checkbox.removeClass().addClass(\"checkbox part\");\n                        dt.ui.checkIcon.removeClass().addClass(\"glyphicon glyphicon-ok\");\n                      } else {\n                        dt[scope.checkbox] = 0;\n                        dt.ui.checkbox.removeClass().addClass(\"checkbox\");\n                        dt.ui.checkIcon.removeClass().addClass(\"glyphicon glyphicon-empty\");\n                      }\n                    } else {\n                      dt[scope.checkbox] = val;\n\n                      if (every) {\n                        dt.ui.checkbox.removeClass().addClass(\"checkbox\");\n                        dt.ui.checkIcon.removeClass().addClass(\"glyphicon glyphicon-ok\");\n                      } else {\n                        dt.ui.checkbox.removeClass().addClass(\"checkbox part\");\n                        dt.ui.checkIcon.removeClass().addClass(\"glyphicon glyphicon-ok\");\n                      }\n                    }\n\n                    if (dt.hasOwnProperty('parent')) {\n                      getParent(dt['parent']);\n                    }\n                  };\n\n                  getChildren(data);\n\n                  if (data.parent) {\n                    getParent(data.parent);\n                  }\n                };\n\n                checkbox.append(checkIcon);\n                checkbox.on(\"click\", checkboxClick);\n                target.append(dom);\n                inner.append(btn).append(userIcon);\n\n                if (scope.checkbox != undefined) {\n                  inner.append(checkbox);\n                  var every;\n                  var allchildren = getAllChild(data);\n\n                  if (allchildren.length > 0) {\n                    every = allchildren.every(function (elem) {\n                      return elem[scope.checkbox] == 1;\n                    });\n                  } else {\n                    every = true;\n                  }\n\n                  if (data[scope.checkbox]) {\n                    if (every) {\n                      checkbox.removeClass().addClass(\"checkbox\");\n                      checkIcon.removeClass().addClass(\"glyphicon glyphicon-ok\");\n                    } else {\n                      checkbox.removeClass().addClass(\"checkbox part\");\n                      checkIcon.removeClass().addClass(\"glyphicon glyphicon-ok\");\n                    }\n                  } else {\n                    checkbox.removeClass().addClass(\"checkbox\");\n                    checkIcon.removeClass().addClass(\"glyphicon glyphicon-empty\");\n                  }\n                }\n\n                inner.append(text);\n                dom.animate({\n                  \"opacity\": 1,\n                  \"max-height\": \"50px\"\n                }, 300);\n\n                if (data.hasOwnProperty(scope.mark)) {\n                  if (data[scope.mark] != null) {\n                    userIcon.css(\"display\", \"none\");\n                    btn.css(\"display\", \"block\");\n                    dom.css(\"font-weight\", \"bold\");\n\n                    if (data.show = false) {\n                      dom.css(\"max-height\", 0);\n                    }\n\n                    ;\n                    children = $(\"<div></div>\").css(\"overflow\", \"hidden\");\n\n                    if (depth > 1) {\n                      children.css(\"max-height\", 0);\n                      icon.removeClass().addClass(\"glyphicon glyphicon-plus\");\n                    }\n\n                    target.append(children);\n\n                    for (var i in data[scope.mark]) {\n                      data[scope.mark][i].parent = data;\n                      traverse(children, data[scope.mark][i], depth, btn, dom, userIcon, data[scope.mark]);\n                    }\n\n                    btn.on(\"click\", foldClick);\n                  } else {\n                    userIcon.css(\"display\", \"inline\");\n                    btn.css(\"display\", \"none\");\n                  }\n                } else {\n                  userIcon.css(\"display\", \"inline\");\n                  btn.css(\"display\", \"none\");\n                }\n\n                dom.append(inner);\n              };\n\n              if (data instanceof Array) {\n                for (var i in data) {\n                  data[i].parent = data;\n                  traverse($(element), data[i], -1);\n                }\n              } else {\n                traverse($(element), data, -1);\n              }\n            };\n\n            if (n != undefined) {\n              render(n);\n\n              n.getCheckNode = function () {\n                var nodes = [];\n\n                var getChildren = function getChildren(dt) {\n                  if (dt[scope.checkbox] == 1) {\n                    nodes.push(dt);\n                  }\n\n                  if (dt.hasOwnProperty(scope.mark)) {\n                    for (var i in dt[scope.mark]) {\n                      getChildren(dt[scope.mark][i]);\n                    }\n                  }\n                };\n\n                getChildren(n);\n                return nodes;\n              };\n            }\n          };\n\n          scope.$watch(\"source\", sourceWatcher);\n        };\n\n        timeout(ready);\n      }\n    };\n  }]);\n});"],"sourceRoot":"/source/"}