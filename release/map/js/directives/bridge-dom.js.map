{"version":3,"sources":["js/directives/bridge-dom.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","define","directives","directive","q","timeout","scope","ngModel","restrict","link","element","attr","$","animate","opacity","order","$watch","n","o","s","index","undefined","delay","location","$$","loadExternalJs","d3","width","parent","height","dom","select","on","event","path","wrap","append","round1","color1","style","color3","bg","text","value","transform","transition","duration","tween","d","node","this","dgStr","getAttribute","deg","parseInt","split","i","interpolate","t","setAttribute","iAttrs","svg","data","ifxAxis","getValue","val","rule","indexOf","parseFloat","ox","$attr","offsetX","wd","he","xAxis","type","w","h","xAxisScale","scaleBand","domain","range","yAxisScale","scaleLinear","axisBottom","scale","yAxis","axisLeft","ticks","xAxisItem","call","yAxisItem","xScale","length","yScale","selectAll","aline","ln","divide","series","loopSeries","seriesIndex","serie","loopGroup","groupIndex","group","len","area","enter","position","color","rectEnter","Array","stroke","borderColor","strokeWidth","sum","inx","line","x","y","pth","datum","csymbol","renderData","nc","numberChanger","number","stop","render","unit","css","_blink","cursor","border-radius","box-shadow","bottom","left","background-color","show","animationDuration","circle1","circle2","circle3","remove","_blink2","echart","macarons","window","ec_instance","init","setOption","run","option","tooltip","trigger","traverse","target","extend","repeat","hasOwnProperty","bmap","require","a","b","count","wait","Error","BMap","Bmap","column","title","mark","bar","empty","display","clear","margin","float"],"mappings":"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","file":"js/directives/bridge-dom.js","sourcesContent":["function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\ndefine(['directives/directives'], function (directives) {\n  'use strict';\n\n  directives.directive(\"warningList\", [\"$q\", \"$timeout\", function (q, timeout) {\n    var directive = {};\n    directive.scope = {\n      ngModel: \"=\"\n    };\n    directive.restrict = \"C\";\n\n    directive.link = function (scope, element, attr) {\n      timeout(domReady);\n\n      function domReady() {\n        $(element).animate({\n          opacity: 1\n        }, 400);\n      }\n    };\n\n    return directive;\n  }]);\n  directives.directive(\"animTr\", [\"$q\", \"$timeout\", function (q, timeout) {\n    var directive = {};\n    directive.scope = {\n      order: \"=\"\n    };\n    directive.restrict = \"A\";\n\n    directive.link = function (scope, element, attr) {\n      timeout(domReady);\n\n      function domReady() {\n        function render(index) {\n          $(element).delay(index * 50).animate({\n            opacity: 1\n          }, 400);\n        }\n\n        scope.$watch(\"order\", function (n, o, s) {\n          if (n != undefined) {\n            render(n);\n          }\n        }, true);\n      }\n    };\n\n    return directive;\n  }]);\n  directives.directive(\"svgPie\", [\"$q\", \"$timeout\", \"$location\", function (q, timeout, location) {\n    var directive = {};\n    directive.scope = {\n      ngModel: \"=\"\n    };\n    directive.restrict = \"A\";\n\n    directive.link = function (scope, element, attr) {\n      timeout(domReady);\n\n      function domReady() {\n        $$.loadExternalJs([\"d3\"], function (d3) {\n          var width = $(element).parent().width();\n          var height = $(element).parent().height();\n          var dom = d3.select($(element)[0]);\n          dom.attr(\"width\", width);\n          dom.attr(\"height\", height);\n          dom.on(\"click\", function (event) {\n            location.path(\"bridge/detail\");\n          });\n          var wrap = dom.append(\"g\");\n          wrap.attr(\"transform\", \"translate(\" + width / 2 + \",\" + height / 2 + \")\");\n          var round1 = wrap.append(\"g\");\n          round1.attr(\"transform\", \"rotate(\" + 0 + \")\");\n          var color1 = round1.append(\"image\");\n          color1.attr(\"opacity\", 0);\n          color1.attr(\"transform\", \"translate(\" + -width / 2 + \",\" + -height / 2 + \")\");\n          color1.attr(\"xlink:href\", \"images/gauge1.png\");\n          color1.style(\"width\", width);\n          color1.style(\"height\", height);\n          var color3 = round1.append(\"image\");\n          color3.attr(\"opacity\", 0);\n          color3.attr(\"transform\", \"translate(\" + -width / 2 + \",\" + -height / 2 + \")\");\n          color3.attr(\"xlink:href\", \"images/gauge3.png\");\n          color3.style(\"width\", width);\n          color3.style(\"height\", height);\n          var bg = dom.append(\"circle\");\n          bg.attr(\"cx\", width / 2);\n          bg.attr(\"cy\", height / 2);\n          bg.attr(\"r\", width / 2 * .7);\n          bg.attr(\"fill\", \"#012f64\");\n          var text = dom.append(\"text\");\n          text.attr(\"x\", width / 2);\n          text.attr(\"y\", height / 2 + 6);\n          text.attr(\"text-anchor\", \"middle\");\n          text.attr(\"font-weight\", \"bold\");\n          text.style(\"fill\", \"#fff\");\n          text.style(\"font-size\", 16);\n\n          var renderData = function renderData(value) {\n            round1.attr({\n              \"transform\": \"rotate(0)\"\n            });\n            round1.transition().duration(1200).tween(\"transform\", function (d) {\n              var node = this;\n              var dgStr = node.getAttribute(\"transform\");\n              dgStr = dgStr ? dgStr : \"rotate(0)\";\n              var deg = parseInt(parseInt(dgStr.split(\"rotate(\")[1].split(\")\")[0]) / 3.6);\n              var i = d3.interpolate(deg, value);\n              return function (t) {\n                node.setAttribute(\"transform\", \"rotate(\" + i(t) * 3.6 + \")\");\n                color3.attr(\"opacity\", i(t) / 100);\n                color1.attr(\"opacity\", i(t) / 100);\n                text.text(parseInt(i(t)));\n              };\n            });\n          };\n\n          scope.$watch(\"ngModel\", function (n, o, s) {\n            if (n) {\n              renderData(n);\n            }\n          }, true);\n        });\n      }\n    };\n\n    return directive;\n  }]);\n  directives.directive(\"svgChart\", [\"$q\", \"$timeout\", function (q, timeout) {\n    return {\n      'scope': {\n        \"ngModel\": \"=\"\n      },\n      'restrict': 'A',\n      'link': function link(scope, element, iAttrs) {\n        $$.loadExternalJs([\"d3\"], function (d3) {\n          var width = $(element).parent().width();\n          var height = $(element).parent().height();\n          var svg = d3.select($(element)[0]);\n          svg.attr(\"width\", width);\n          svg.attr(\"height\", height);\n\n          var renderData = function renderData(data) {\n            var ifxAxis;\n\n            var getValue = function getValue(val, rule) {\n              if (typeof val == 'number') {\n                return val;\n              } else if (typeof val == 'string') {\n                if (val.indexOf(\"px\") != -1) {\n                  return parseFloat(val.split(\"px\")[0]);\n                } else if (val.indexOf(\"%\") != -1) {\n                  // \n                  return rule * parseFloat(val.split(\"%\")[0]) / 100;\n                }\n              } else {\n                return undefined;\n              }\n            };\n\n            var ox = getValue(data.$attr(\"grid/left\"), width);\n            var offsetX = ox ? ox : 40;\n            var wd = getValue(data.$attr(\"grid/width\"), width);\n            var he = getValue(data.$attr(\"grid/height\"), height); // \n            // \n\n            if (data.xAxis.type == \"category\") {\n              var w = wd ? wd : width * .8;\n              var h = he ? he : height * .8;\n              var xAxisScale = d3.scaleBand(); //xAxisScale.band(100);\n\n              var xDomain = xAxisScale.domain(data.xAxis.data);\n              xDomain.range([0, w]);\n              var yAxisScale = d3.scaleLinear().domain([data.$attr(\"yAxis/min\") ? data.$attr(\"yAxis/min\") : 0, data.$attr(\"yAxis/max\") ? data.$attr(\"yAxis/max\") : 100]).range([h, 0]);\n              var xAxis = d3.axisBottom();\n              xAxis.scale(xAxisScale); //xAxis.orient(\"bottom\");\n\n              var yAxis = d3.axisLeft();\n              yAxis.ticks(5);\n              yAxis.scale(yAxisScale); //yAxis.orient(\"left\");\n\n              var xAxisItem = svg.append(\"g\");\n              xAxisItem.attr(\"class\", \"axis\");\n              xAxisItem.attr(\"transform\", \"translate(\" + offsetX + \",\" + (h + height * .05) + \")\");\n              xAxisItem.call(xAxis);\n              var yAxisItem = svg.append(\"g\");\n              yAxisItem.attr(\"class\", \"axis\");\n              yAxisItem.attr(\"transform\", \"translate(\" + offsetX + \",\" + height * .05 + \")\");\n              yAxisItem.call(yAxis);\n              var xScale = d3.scaleLinear();\n              xScale.domain([0, data.xAxis.data.length]);\n              xScale.range([0, w]);\n              var yScale = d3.scaleLinear();\n              yScale.domain([data.$attr(\"yAxis/min\") ? data.$attr(\"yAxis/min\") : 0, data.$attr(\"yAxis/max\") ? data.$attr(\"yAxis/max\") : 100]);\n              yScale.range([0, h]);\n              ifxAxis = true;\n              xAxisItem.select(\"path.domain\").style(\"fill\", \"#254c6d\");\n              xAxisItem.selectAll(\"text\").style(\"fill\", \"#1b80bd\");\n              yAxisItem.select(\"path.domain\").style(\"opacity\", 0);\n              yAxisItem.selectAll(\"text\").style(\"fill\", \"#1b80bd\");\n              var aline = yAxisItem.selectAll(\"line\");\n              aline.attr(\"x2\", w);\n              aline.style(\"stroke\", \"#254c6d\");\n              aline.style(\"stroke-width\", 1);\n            } else if (data.yAxis.type == \"category\") {\n              var h = wd ? wd : width * .8;\n              var w = he ? he : height * .8;\n              var xAxisScale = d3.scaleLinear();\n              xAxisScale.domain([data.$attr(\"xAxis/min\") ? data.$attr(\"xAxis/min\") : 0, data.$attr(\"xAxis/max\") ? data.$attr(\"xAxis/max\") : 100]);\n              xAxisScale.range([0, h]);\n              var yAxisScale = d3.scaleBand();\n              yAxisScale.domain(data.yAxis.data);\n              yAxisScale.range([w, 0]);\n              var xAxis = d3.axisBottom();\n              xAxis.ticks(10);\n              xAxis.scale(xAxisScale); //xAxis.orient(\"bottom\");\n\n              var yAxis = d3.axisLeft();\n              yAxis.scale(yAxisScale); //yAxis.orient(\"left\");\n\n              var xAxisItem = svg.append(\"g\");\n              xAxisItem.attr(\"class\", \"axis\");\n              xAxisItem.attr(\"transform\", \"translate(\" + offsetX + \",\" + (w + height * .05) + \")\");\n              xAxisItem.call(xAxis);\n              var yAxisItem = svg.append(\"g\");\n              yAxisItem.attr(\"class\", \"axis\");\n              yAxisItem.attr(\"transform\", \"translate(\" + offsetX + \",\" + height * .05 + \")\");\n              yAxisItem.call(yAxis);\n              var yScale = d3.scaleLinear();\n              yScale.domain([0, data.yAxis.data.length]);\n              yScale.range([0, w]);\n              var xScale = d3.scaleLinear();\n              xScale.domain([data.$attr(\"xAxis/min\") ? data.$attr(\"xAxis/min\") : 0, data.$attr(\"xAxis/max\") ? data.$attr(\"xAxis/max\") : 100]);\n              xScale.range([0, h]);\n              yAxisItem.select(\"path.domain\").style(\"fill\", \"#254c6d\");\n              yAxisItem.selectAll(\"text\").style(\"fill\", \"#1b80bd\");\n              xAxisItem.select(\"path.domain\").style(\"opacity\", 0);\n              xAxisItem.selectAll(\"text\").style(\"fill\", \"#1b80bd\");\n              var ln = xAxisItem.selectAll(\"line\");\n              ln.attr(\"y2\", -w);\n              ln.style(\"stroke\", \"#254c6d\");\n              ln.style(\"stroke-width\", 1);\n              ifxAxis = false;\n            }\n\n            var divide = data.series.length;\n\n            var loopSeries = function loopSeries(seriesIndex, serie) {\n              var loopGroup = function loopGroup(groupIndex, group) {\n                svg.append(\"g\");\n                var len = group.data.length;\n                var wd = w / len / divide; // \n\n                if (serie.type == 'bar') {\n                  if (data.area) {\n                    var area = svg.selectAll(\"g.area_\" + seriesIndex + \"_\" + groupIndex).data(group.data).enter().append(\"g\");\n                    area.attr(\"transform\", function (d, i) {\n                      var he = parseInt(this.getAttribute(\"height\"));\n\n                      if (ifxAxis) {\n                        return \"translate(\" + offsetX + \",\" + (h - he + h * .05) + \")\";\n                      } else {\n                        return \"translate(\" + offsetX + \",\" + (height * .85 - yScale(i) - wd * .9) + \")\";\n                      }\n                    });\n                    var areaRect = area.selectAll(\"rect\").data(data.area).enter().append(\"rect\");\n                    areaRect.attr(\"width\", function (d) {\n                      var rs = getValue(d.position, ifxAxis ? w : h);\n                      return rs;\n                    }).attr(\"height\", wd * .9).attr(\"fill\", function (d) {\n                      return d.color;\n                    });\n                  }\n\n                  var rectEnter = svg.selectAll(\"rect.item_\" + seriesIndex + \"_\" + groupIndex).data(group.data).enter().append(\"rect\");\n                  rectEnter.attr(\"class\", \"item_\" + seriesIndex + \"_\" + groupIndex).attr(\"fill\", function (d, i) {\n                    if (group.color instanceof Array) {\n                      return group.color[i % group.color.length];\n                    } else {\n                      return group.color;\n                    }\n                  }).attr(\"width\", function (d, i) {\n                    if (ifxAxis) {\n                      var w = getValue(group.width, wd);\n                      w = w ? w : wd * .7;\n                      return w;\n                    } else {\n                      return 0;\n                    }\n                  }).attr(\"height\", function (d, i) {\n                    // \n                    if (ifxAxis) {\n                      return 0;\n                    } else {\n                      var w = getValue(group.width, wd);\n                      w = w ? w : wd * .7;\n                      return w;\n                    }\n                  }).attr(\"transform\", function (d, i) {\n                    var he = parseInt(this.getAttribute(\"height\"));\n\n                    if (ifxAxis) {\n                      return \"translate(\" + (offsetX + xScale(i) + seriesIndex * wd + wd * .15) + \",\" + (h - he + h * .05) + \")\";\n                    } else {\n                      return \"translate(\" + offsetX * .15 + \",\" + (height * .75 - (yScale(i) + seriesIndex * wd + wd * .15)) + \")\";\n                    }\n                  });\n                  rectEnter.style({\n                    stroke: function stroke(d) {\n                      if (group.borderColor instanceof Array) {\n                        return group.borderColor[i % group.borderColor.length];\n                      } else {\n                        return group.borderColor;\n                      }\n                    },\n                    \"strokeWidth\": 1\n                  });\n\n                  if (ifxAxis) {\n                    rectEnter.transition().duration(600).attr(\"height\", function (d, i) {\n                      return yScale(d);\n                    }).attr(\"transform\", function (d, i) {\n                      var sum = 0;\n\n                      for (var inx in serie.group) {\n                        if (inx <= groupIndex) {\n                          sum += serie.group[inx].data[i];\n                        }\n                      }\n\n                      return \"translate(\" + (offsetX + xScale(i) + seriesIndex * wd + wd * .15) + \",\" + (h - yScale(sum) + h * .05) + \")\";\n                    });\n                  } else {\n                    rectEnter.transition().duration(600).attr(\"width\", function (d, i) {\n                      return xScale(d);\n                    }).attr(\"transform\", function (d, i) {\n                      var sum = 0;\n\n                      for (var inx in serie.group) {\n                        if (inx <= groupIndex) {\n                          sum += serie.group[inx].data[i];\n                        }\n                      }\n\n                      return \"translate(\" + offsetX + \",\" + (height * .75 - (yScale(i) + seriesIndex * wd + wd * .15)) + \")\";\n                    });\n                  }\n                } else if (serie.type == 'line') {\n                  var line = d3.line().x(function (d, i) {\n                    return xScale(i) + width * .15;\n                  }).y(function (d, i) {\n                    return h - yScale(d);\n                  });\n                  var pth = svg.append(\"path\").datum(group.data);\n                  pth.attr(\"d\", line);\n                  pth.attr(\"class\", \"item\");\n                  pth.style(\"fill\", \"transparent\");\n                  pth.style(\"stroke\", function (d, i) {\n                    if (group.color instanceof Array) {\n                      return group.color[i % group.color.length];\n                    } else {\n                      return group.color;\n                    }\n                  });\n                  pth.style(\"stroke-width\", 3);\n                  var csymbol = svg.selectAll(\"circle.symbol\").data(group.data).enter().append(\"circle\");\n                  csymbol.attr(\"class\", \"symbol\");\n                  csymbol.attr(\"r\", 5);\n                  csymbol.attr(\"cx\", function (d, i) {\n                    return xScale(i) + width * .15;\n                  });\n                  csymbol.attr(\"cy\", function (d, i) {\n                    return h - yScale(d);\n                  });\n                  csymbol.style(\"fill\", function (d, i) {\n                    if (group.borderColor instanceof Array) {\n                      return group.borderColor[i % group.borderColor.length];\n                    } else {\n                      return group.borderColor;\n                    }\n                  });\n                }\n              };\n\n              for (var i in serie.group) {\n                loopGroup(i, serie.group[i]);\n              }\n            };\n\n            for (var i in data.series) {\n              loopSeries(i, data.series[i]);\n            }\n            /*\n             svg.selectAll(\"rect.area\")append(\"rect\")\n             .attr(\"class\", \"area\")\n             .attr(\"height\", wd)\n             .attr(\"width\", 100)\n             .attr(\"transform\", \"translate(\" + offsetX + \",\" + 10 + \")\");\n             */\n\n          };\n\n          scope.$watch(\"ngModel\", function (n, o, s) {\n            if (n) {\n              renderData(n);\n            }\n          }, true);\n        });\n      }\n    };\n  }]);\n  var id = 0;\n  directives.directive(\"changeNum\", [\"$q\", \"$timeout\", function (q, timeout) {\n    return {\n      'scope': {\n        \"ngModel\": \"=\"\n      },\n      'restrict': 'C',\n      'link': function link(scope, element, iAttrs) {\n        timeout(function () {\n          var nc = new $$.numberChanger(0, 10);\n\n          function render(data) {\n            var number = data.value;\n            nc.stop();\n            nc.render(number, function (value) {\n              $(element).text(value + (scope.ngModel.unit ? scope.ngModel.unit : \"\"));\n            });\n            /**\n            var number = data.value;\n            var final = num < parseInt(number);\n             \n            if(dd == 0){\n               \n            }\n            traverse();\n            function traverse() {\n              var status = num < parseInt(number);\n              $(element).text(num + (scope.ngModel.unit ? scope.ngModel.unit : \"\"));\n              if(final == status){\n                num++;\n                timeout(function(){\n                  traverse(status);\n                }, 10);\n              };\n            }\n             */\n          }\n\n          ;\n          scope.$watch(\"ngModel\", function (n, o, s) {\n            if (n) {\n              render(n);\n            }\n          }, true);\n        });\n      }\n    };\n  }]);\n  directives.directive(\"bridgeImage\", [\"$q\", \"$timeout\", \"$location\", function (q, timeout, location) {\n    return {\n      'scope': {\n        \"ngModel\": \"=\"\n      },\n      'restrict': 'C',\n      'link': function link(scope, element, iAttrs) {\n        $(element).css(\"display\", \"none\");\n        timeout(function () {\n          var _blink;\n\n          $$.loadExternalJs([\"d3\"], function (d3) {\n            var wrap = $(\"<div></div>\").css({\n              cursor: \"pointer\",\n              width: 76,\n              height: 76,\n              \"border-radius\": \"50%\",\n              \"box-shadow\": \"1px 1px 30px rgba(250,0,0,.2)\",\n              position: \"absolute\",\n              bottom: \"40%\",\n              left: \"45%\",\n              \"background-color\": \"rgba(250,0,0,.3)\"\n            }).on(\"click\", function (event) {\n              location.path(\"bridge/warning\");\n            });\n            $(element).append(wrap);\n            var wrap = d3.select(wrap[0]);\n            var svg = wrap.append(\"svg\");\n            svg.attr(\"width\", 76);\n            svg.attr(\"height\", 76);\n\n            function render(show) {\n              var animationDuration = 600;\n\n              if (show == true) {\n                var group = svg.append(\"g\");\n                group.attr(\"transform\", \"translate(38,38)\");\n                var circle1 = group.append(\"circle\");\n                circle1.attr(\"r\", 38);\n                circle1.style(\"fill\", \"#ff0000\");\n                var circle2 = group.append(\"circle\");\n                circle2.attr(\"r\", 27);\n                circle2.style(\"fill\", \"#ff9393\");\n                var circle3 = group.append(\"circle\");\n                circle3.attr(\"r\", 23);\n                circle3.style(\"fill\", \"#ff0000\");\n                $(element).css(\"display\", \"block\");\n                $(element).css(\"opacity\", 0);\n                $(element).stop().animate({\n                  opacity: 1\n                }, animationDuration);\n\n                _blink = function blink() {\n                  circle1.transition().duration(animationDuration).attr(\"r\", 30).attr(\"opacity\", .2);\n                  circle2.transition().duration(animationDuration).attr(\"r\", 14).attr(\"opacity\", .2);\n                  circle3.transition().duration(animationDuration).attr(\"r\", 6).attr(\"opacity\", .3);\n                  timeout(function () {\n                    circle1.transition().duration(animationDuration).attr(\"r\", 36).attr(\"opacity\", .5);\n                    circle2.transition().duration(animationDuration).attr(\"r\", 27).attr(\"opacity\", .6);\n                    circle3.transition().duration(animationDuration).attr(\"r\", 20).attr(\"opacity\", 1);\n                    timeout(function () {\n                      if (typeof _blink == 'function') {\n                        _blink();\n                      }\n                    }, animationDuration);\n                  }, animationDuration);\n                };\n\n                _blink();\n              } else {\n                _blink = undefined;\n                svg.selectAll(\"*\").remove();\n                $(element).stop().animate({\n                  opacity: 0\n                }, 400, function () {\n                  $(element).css(\"display\", \"none\");\n                });\n              }\n            }\n\n            ;\n            scope.$watch(\"ngModel\", function (n, o, s) {\n              if (n != undefined) {\n                render(n);\n              }\n            }, true);\n          });\n        });\n      }\n    };\n  }]);\n  directives.directive(\"bridgeImageTd\", [\"$q\", \"$timeout\", \"$location\", function (q, timeout, location) {\n    return {\n      'scope': {\n        \"ngModel\": \"=\"\n      },\n      'restrict': 'C',\n      'link': function link(scope, element, iAttrs) {\n        $(element).css(\"display\", \"none\");\n        timeout(function () {\n          var _blink2;\n\n          $$.loadExternalJs([\"d3\"], function (d3) {\n            var wrap = $(\"<div></div>\").css({\n              cursor: \"pointer\",\n              width: 46,\n              height: 46,\n              \"border-radius\": \"50%\",\n              \"box-shadow\": \"1px 1px 30px rgba(250,0,0,.2)\",\n              position: \"absolute\",\n              bottom: \"58%\",\n              left: \"27%\",\n              \"background-color\": \"rgba(250,0,0,.3)\"\n            }).on(\"click\", function (event) {\n              location.path(\"bridge/warning\");\n            });\n            ;\n            $(element).append(wrap);\n            var wrap = d3.select(wrap[0]);\n            var svg = wrap.append(\"svg\");\n            svg.attr(\"width\", 46);\n            svg.attr(\"height\", 46);\n\n            function render(show) {\n              var animationDuration = 600;\n\n              if (show == false) {\n                var group = svg.append(\"g\");\n                group.attr(\"transform\", \"translate(23,23)\");\n                var circle1 = group.append(\"circle\");\n                circle1.attr(\"r\", 23);\n                circle1.style(\"fill\", \"#ff0000\");\n                var circle2 = group.append(\"circle\");\n                circle2.attr(\"r\", 17);\n                circle2.style(\"fill\", \"#ff9393\");\n                var circle3 = group.append(\"circle\");\n                circle3.attr(\"r\", 12);\n                circle3.style(\"fill\", \"#ff0000\");\n                $(element).css(\"display\", \"block\");\n                $(element).css(\"opacity\", 0);\n                $(element).stop().animate({\n                  opacity: 1\n                }, animationDuration);\n\n                _blink2 = function blink() {\n                  circle1.transition().duration(animationDuration).attr(\"r\", 16).attr(\"opacity\", .2);\n                  circle2.transition().duration(animationDuration).attr(\"r\", 6).attr(\"opacity\", .2);\n                  circle3.transition().duration(animationDuration).attr(\"r\", 3).attr(\"opacity\", .3);\n                  timeout(function () {\n                    circle1.transition().duration(animationDuration).attr(\"r\", 23).attr(\"opacity\", .5);\n                    circle2.transition().duration(animationDuration).attr(\"r\", 17).attr(\"opacity\", .6);\n                    circle3.transition().duration(animationDuration).attr(\"r\", 12).attr(\"opacity\", 1);\n                    timeout(function () {\n                      if (typeof _blink2 == 'function') {\n                        _blink2();\n                      }\n                    }, animationDuration);\n                  }, animationDuration);\n                };\n\n                _blink2();\n              } else {\n                _blink2 = undefined;\n                svg.selectAll(\"*\").remove();\n                $(element).stop().animate({\n                  opacity: 0\n                }, 400, function () {\n                  $(element).css(\"display\", \"none\");\n                });\n              }\n            }\n\n            ;\n            scope.$watch(\"ngModel\", function (n, o, s) {\n              if (n != undefined) {\n                render(n);\n              }\n            }, true);\n          });\n        });\n      }\n    };\n  }]);\n  directives.directive(\"echart\", [\"$q\", \"$timeout\", function (q, timeout) {\n    return {\n      'scope': {\n        \"ngModel\": \"=\"\n      },\n      'restrict': 'A',\n      'link': function link(scope, element, iAttrs) {\n        var extend = function extend(target, _extend) {\n          traverse(target, _extend);\n\n          function traverse(target, extend) {\n            var repeat = function repeat(attr) {\n              if (_typeof(extend[attr]) == 'object') {\n                if (!target.hasOwnProperty(attr)) {\n                  var constructor = extend[attr].constructor;\n                  target[attr] = new constructor();\n                }\n\n                traverse(target[attr], extend[attr]);\n              } else {\n                target[attr] = extend[attr];\n              }\n            };\n\n            for (var i in extend) {\n              repeat(i);\n            }\n          }\n        };\n\n        $$.loadExternalJs(['echarts', 'macarons'], init);\n\n        function init(echart, macarons) {\n          window['echart'] = window['echart'] ? window['echart'] : echart;\n          window['macarons'] = window['macarons'] ? window['macarons'] : macarons;\n          var parent = $(element).parent();\n          $(element).css({\n            width: parent.width(),\n            height: parent.height() > 0 ? parent.height() : 0\n          });\n          timeout(domReady);\n\n          function domReady() {\n            var ec_instance = echart.init($(element)[0], \"macarons\");\n\n            var setOption = function setOption(data) {\n              if (data.bmap) {\n                require(['baiduMap', 'bmap'], function (a, b) {\n                  var count = 0;\n                  wait();\n\n                  function wait() {\n                    if (count < 20) {\n                      count += 1;\n                      timeout(function () {\n                        if (window.BMap == undefined) {\n                          wait();\n                        } else {\n                          run(window.Bmap);\n                        }\n                      });\n                    } else {\n                      throw new Error('百度视图获取失败!!');\n                    }\n                  }\n                });\n              } else {\n                run();\n              }\n\n              function run() {\n                var option = {\n                  tooltip: {\n                    trigger: 'item'\n                  }\n                };\n                extend(option, data);\n                ec_instance.setOption(option);\n              }\n            };\n\n            scope.$watch(\"ngModel\", function (n, o, s) {\n              if (n) {\n                setOption(n);\n              }\n            });\n          }\n        }\n      }\n    };\n  }]);\n  directives.directive(\"divBar\", [\"$q\", \"$timeout\", function (q, timeout) {\n    return {\n      'scope': {\n        \"ngModel\": \"=\"\n      },\n      'restrict': 'A',\n      'link': function link(scope, element, iAttrs) {\n        var empty = $(\"<div></div>\").css({\n          display: \"block\",\n          height: 1,\n          clear: \"both\"\n        });\n\n        var getItem = function getItem() {\n          var column = $(\"<div></div>\").css({\n            \"width\": \"33%\",\n            \"margin\": \"4px auto\",\n            \"float\": \"left\"\n          });\n          var title = $(\"<div></div>\").text(\"指标名称\").css({\n            \"margin\": \"5px 0 0 30px\",\n            \"color\": \"#fff\"\n          });\n          var mark = $(\"<div></div>\").css(\"width\", 10).css(\"height\", 2).css({\n            \"background-color\": \"#36d7ff\",\n            \"margin\": \"2px 0 0 45px\"\n          });\n          var value = $(\"<div></div>\").text(\"234\").css({\n            \"color\": \"#fff\",\n            \"margin\": \"2px 0 0 55px\"\n          });\n          var bar = $(\"<div></div>\").css(\"background-image\", \"url(images/bar.png)\").css(\"width\", 94).css(\"height\", 12).css({\n            \"margin\": \"5px 30px\"\n          });\n          column.append(title);\n          column.append(bar);\n          column.append(mark);\n          column.append(value);\n          return column;\n        };\n\n        for (var i = 0; i < 6; i++) {\n          $(element).append(getItem());\n        }\n\n        $(element).append(empty);\n      }\n    };\n  }]);\n});"],"sourceRoot":"/source/"}