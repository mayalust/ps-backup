{"version":3,"sources":["js/directives/device-version-dom.js"],"names":["define","directives","datatables","initDirective","$timeout","$compile","growl","restrict","controller","$scope","$element","$attrs","table","domMain","isEditing","$on","Event","UNITTYPEINIT","event","args","destroy","DataTable","dom","language","datatable","data","rowCallback","nRow","aData","iDataIndex","columns","title","orderable","columnDefs","targets","render","type","full","str","isEdit","on","parentDom","$","parent","html","e","stopPropagation","tr","this","closest","row","f","faultSave","doActionFault","returnObj","cells","invalidate","warning","preventDefault","isDel","rowData","flg","remove","draw","escape","id","checkPass","each","children","j","val1","jqob1","has","length","txt","trim","val","removeClass","cell","addClass","doActionTechnical","adjust","test","doActionMajor","hasClass","devicePointInit","reg","doActionTask","decodeURIComponent","param","UploadFile","selectedDitem","name","qualifiedName","trigger","doActionDocument","url","dowLoadUrl","window","open","DIRECTIVESINIT","ordering","divs2","initListDate","kpiList","put","i","label","dateType","allDataTypes","index","parents","clear","splice","rows","add","$tr","len","kpis","doActionStation","order","visible","projectData","allSpareParts"],"mappings":"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","file":"js/directives/device-version-dom.js","sourcesContent":["define(['directives/directives', 'datatables.net'], function (directives, datatables) {\n  'use strict'; //设备模板---故障列表\n\n  directives.initDirective('faultTable', ['$timeout', '$compile', 'growl', function ($timeout, $compile, growl) {\n    return {\n      restrict: 'A',\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        var domMain = $element;\n        var table;\n        var isEditing = false;\n        $scope.$on(Event.UNITTYPEINIT + \"_fault\", function (event, args) {\n          if (table) {\n            table.destroy();\n          }\n\n          isEditing = false;\n          table = domMain.DataTable({\n            dom: '<\"row\"<\"col-sm-6\"<\"special-btn\">><\"col-sm-6\"f>><\"row\"<\"clo-sm-12\">>t<\"row\"<\"col-sm-2\"i><\"col-sm-2\"l><\"col-sm-8\"p>>',\n            language: directives.datatable.language,\n            data: args.data,\n            rowCallback: function rowCallback(nRow, aData, iDataIndex) {\n              $compile(nRow)($scope);\n            },\n            columns: [{\n              title: \"故障编码\",\n              data: \"faultNo\"\n            }, {\n              title: \"故障分类\",\n              data: \"category\"\n            }, {\n              title: \"故障名称\",\n              data: \"label\"\n            }, {\n              title: \"操作\",\n              orderable: false,\n              data: \"option\"\n            }],\n            columnDefs: [{\n              \"targets\": 0,\n              \"data\": \"faultNo\",\n              \"render\": function render(data, type, full) {\n                //                if (full.isEdit == 2) {\n                //                  var str = ' <select id=\"fault\" name=\"fault\" ng-model=\"faultSave\" class=\"form-control select2\" selectdata=\"faultList\"   placeholder=\"请选择\"  select2></select>';\n                //                  return str;\n                //                } else {\n                return \"<a href='#faultKnowledge/\" + data + \"'>\" + data + \"</a>\"; //                }\n              }\n            }, {\n              \"targets\": 1,\n              \"data\": 'category',\n              \"render\": function render(data, type, full) {\n                if (data == null) {\n                  return \"\";\n                } else {\n                  return data;\n                }\n              }\n            }, {\n              \"targets\": 2,\n              \"data\": 'label',\n              \"render\": function render(data, type, full) {\n                if (data == null) {\n                  return \"\";\n                } else {\n                  return data;\n                }\n              }\n            }, {\n              \"targets\": 3,\n              \"data\": \"option\",\n              \"render\": function render(data, type, full) {\n                var str = \"<div class='btn-group btn-group-sm'>\";\n\n                if (full.isEdit == 2) {\n                  str += \"<a id='save-btn' class='btn btn-default' ><i class='fa fa-save hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 保存</span></a>\";\n                  str += \"<a id='cancel-btn' class='btn btn-default' ><i class='fa fa-times hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 取消</span></a>\";\n                } else {\n                  str += \"<a id='del-btn' class='btn btn-default' ><i class='fa fa-minus hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 删除</span></a>\";\n                }\n\n                str += \"</div>\";\n                return str;\n              }\n            }]\n          });\n        });\n        /**\n         * 监听表格初始化后，添加按钮\n         */\n\n        domMain.on('init.dt', function () {\n          var parentDom = $(\".special-btn\").parent(); //          parentDom.html('<a ng-click=\"addFault()\" class=\"btn btn-default btn-sm\"><i class=\"fa fa-plus\"></i><span class=\"hidden-xs\"> 添加故障</span></a>');\n\n          parentDom.html('<select class=\"form-control\" style=\"min-width:200px\" selectdata=\"faultList\" itemchange=\"addFault\" select2></select>');\n          $compile(parentDom)($scope);\n        });\n        domMain.on('click', '#save-btn', function (e) {\n          e.stopPropagation();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          var f = $scope.faultSave;\n\n          if (f != null && f != \"\" && f != \"-1\") {\n            row.data()[\"fault\"] = f;\n            $scope.doActionFault('saveFault', row.data(), function (returnObj) {\n              row.data().isEdit = 0;\n              row.cells().invalidate();\n              isEditing = false;\n            });\n          } else {\n            growl.warning(\"请选择故障\", {});\n          }\n        });\n        domMain.on('click', '#del-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          row.data().isDel = true;\n          var rowData = row.data();\n          $scope.doActionFault('faultDelete', rowData, function (flg) {\n            if (flg) row.remove().draw(false);\n          });\n        });\n        domMain.on('click', '#cancel-btn', function (e) {\n          e.stopPropagation();\n          e.preventDefault();\n\n          if (isEditing) {\n            isEditing = false;\n            var tr = $(this).closest('tr');\n            var row = table.row(tr);\n            row.data().isEdit = 0;\n            row.cells().invalidate();\n          }\n        });\n      }]\n    };\n  }]); //设备模板---技术参数列表\n\n  directives.initDirective('technicalTable', ['$timeout', '$compile', 'growl', function ($timeout, $compile, growl) {\n    return {\n      restrict: 'A',\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        var domMain = $element;\n        var table;\n        var isEditing = false;\n        $scope.$on(Event.UNITTYPEINIT + \"_technical\", function (event, args) {\n          if (table) {\n            table.destroy();\n          }\n\n          isEditing = false;\n          table = domMain.DataTable({\n            dom: '<\"row\"<\"col-sm-6\"<\"special-btn\">><\"col-sm-6\"f>><\"row\"<\"clo-sm-12\">>t<\"row\"<\"col-sm-2\"i><\"col-sm-2\"l><\"col-sm-8\"p>>',\n            language: directives.datatable.language,\n            data: args.data,\n            //\"order\": [0, \"desc\"],\n            columns: [{\n              title: \"项目\",\n              data: \"project\"\n            }, {\n              title: \"参数\",\n              data: \"parameter\"\n            }, {\n              title: \"备注\",\n              data: \"remark\"\n            }, {\n              title: \"操作\",\n              orderable: false,\n              data: \"option\"\n            }],\n            columnDefs: [{\n              \"targets\": 0,\n              \"data\": \"project\",\n              \"render\": function render(data, type, full) {\n                // 返回自定义内容\n                if (full.isEdit > 0) return \"<input class='form-control col-xs-6'   type='text'  maxlength='20'  style='border: 1px solid #F18282;width: 100%;' value='\" + escape(data) + \"'>\";else return escape(data);\n              }\n            }, {\n              \"targets\": 1,\n              \"data\": 'parameter',\n              \"render\": function render(data, type, full) {\n                // 返回自定义内容\n                if (full.isEdit > 0) return \"<input class='form-control col-xs-6'   type='text'  maxlength='100'  style='border: 1px solid #F18282;width: 100%;' value='\" + escape(data) + \"'>\";else return escape(data);\n              }\n            }, {\n              \"targets\": 2,\n              \"data\": 'remark',\n              \"render\": function render(data, type, full) {\n                // 返回自定义内容\n                if (full.isEdit > 0) return \"<input class='form-control col-xs-6'   type='text'  maxlength='20'  style='width: 100%;' value='\" + escape(data) + \"'>\";else return escape(data);\n              }\n            }, {\n              \"targets\": 3,\n              \"data\": \"option\",\n              \"render\": function render(data, type, full) {\n                var str = \"<div class='btn-group btn-group-sm'>\";\n\n                if (full.isEdit > 0) {\n                  str += \"<a id='save-btn' class='btn btn-default' ><i class='fa fa-save hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 保存</span></a>\";\n                  if (full.id) str += \"<a id='cancel-btn' class='btn btn-default' ><i class='fa fa-times hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 取消</span></a>\";else str += \"<a id='del-btn' class='btn btn-default' ><i class='fa fa-minus hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 删除</span></a>\";\n                } else {\n                  str += \"<a id='update-btn' class='btn btn-default' ><i class='fa fa-minus hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 修改</span></a>\";\n                  str += \"<a id='del-btn' class='btn btn-default' ><i class='fa fa-minus hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 删除</span></a>\";\n                }\n\n                str += \"</div>\";\n                return str;\n              }\n            }]\n          });\n        });\n        /**\n         * 监听表格初始化后，添加按钮\n         */\n\n        domMain.on('init.dt', function () {\n          var parentDom = $(\".special-btn\").parent();\n          parentDom.html('<a ng-click=\"addTechnical()\" class=\"btn btn-default btn-sm\"><i class=\"fa fa-plus\"></i><span class=\"hidden-xs\"> 添加技术参数</span></a>');\n          $compile(parentDom)($scope);\n        });\n        domMain.on('click', '#save-btn', function (e) {\n          e.stopPropagation();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          var checkPass = true; //var pro = $(\"#project  option:selected\").val();\n          //if(pro == null && pro == \"\"){\n          //  growl.warning(\"请选择项目\",{});\n          //  return;\n          //}\n\n          $.each(tr.children(), function (j, val1) {\n            var jqob1 = $(val1); //把input变为字符串\n\n            if (!jqob1.has('button').length && jqob1.has('input').length) {\n              var txt = $.trim(jqob1.children(\"input\").val());\n\n              if (txt && txt != \"请选择...\") {\n                $(val1).removeClass('danger');\n                table.cell(jqob1).data(txt);\n              } else {\n                if (j == 0 || j == 1) {\n                  table.cell(jqob1).data(txt);\n                  $(val1).addClass('danger');\n                  checkPass = false;\n                  return false;\n                }\n              }\n            }\n          });\n\n          if (checkPass) {\n            //row.data()[\"project\"] = pro;\n            $scope.doActionTechnical('save', row.data(), function (returnObj) {\n              if (returnObj) {\n                row.data().id = returnObj.id;\n                row.data().isEdit = 0;\n                row.cells().invalidate();\n                isEditing = false;\n              }\n            });\n          }\n        });\n        domMain.on('click', '#cancel-btn', function (e) {\n          e.stopPropagation();\n          e.preventDefault();\n          isEditing = false;\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          row.data().isEdit = 0;\n          row.cells().invalidate();\n        });\n        domMain.on('click', '#update-btn', function (e) {\n          isEditing = true;\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          row.data().isEdit = 2;\n          row.invalidate().columns.adjust().draw(false, true);\n        });\n        domMain.on('click', '#del-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          row.data().isDel = true;\n          var rowData = row.data();\n          $scope.doActionTechnical('delete', rowData, function (flg) {\n            if (flg) row.remove().draw(false);\n          });\n        });\n      }]\n    };\n  }]); //设备模板---主要部件\n\n  directives.initDirective('majorTable', ['$timeout', '$compile', 'growl', function ($timeout, $compile, growl) {\n    return {\n      restrict: 'A',\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        var domMain = $element;\n        var table;\n        var isEditing = false;\n        $scope.$on(Event.UNITTYPEINIT + \"_major\", function (event, args) {\n          if (table) {\n            table.destroy();\n          }\n\n          isEditing = false;\n          table = domMain.DataTable({\n            dom: '<\"row\"<\"col-sm-6\"<\"special-btn\">><\"col-sm-6\"f>><\"row\"<\"clo-sm-12\">>t<\"row\"<\"col-sm-2\"i><\"col-sm-2\"l><\"col-sm-8\"p>>',\n            language: directives.datatable.language,\n            data: args.data,\n            //\"order\": [0, \"desc\"],\n            columns: [{\n              title: \"部件名称\",\n              data: \"name\"\n            }, {\n              title: \"规格\",\n              data: \"specification\"\n            }, {\n              title: \"数量\",\n              data: \"num\"\n            }, {\n              title: \"备注\",\n              data: \"remark\"\n            }, {\n              title: \"操作\",\n              orderable: false,\n              data: \"option\"\n            }],\n            columnDefs: [{\n              \"targets\": 0,\n              \"data\": \"name\",\n              \"render\": function render(data, type, full) {\n                if (full.isEdit > 0) return \"<input class='form-control col-xs-6'  placeholder='请输入部件名称'  type='text'  maxlength='20'  style='border: 1px solid #F18282;width: 100%;' value='\" + escape(data) + \"'>\";else return escape(data);\n              }\n            }, {\n              \"targets\": 1,\n              \"data\": 'specification',\n              \"render\": function render(data, type, full) {\n                if (full.isEdit > 0) return \"<input class='form-control col-xs-6'  placeholder='请输入规格'  type='text'  maxlength='20'  style='border: 1px solid #F18282;width: 100%;' value='\" + escape(data) + \"'>\";else return escape(data);\n              }\n            }, {\n              \"targets\": 2,\n              \"data\": 'num',\n              \"render\": function render(data, type, full) {\n                if (full.isEdit > 0) return \"<input class='form-control col-xs-6'  placeholder='数量只能输入数字' type='number'  maxlength='20'  style='border: 1px solid #F18282;width: 100%;' value='\" + data + \"'>\";else return data;\n              }\n            }, {\n              \"targets\": 3,\n              \"data\": 'remark',\n              \"render\": function render(data, type, full) {\n                if (full.isEdit > 0) return \"<input class='form-control col-xs-6'   placeholder='请输入备注' type='text'  maxlength='20'  style='width: 100%;' value='\" + escape(data) + \"'>\";else return escape(data);\n              }\n            }, {\n              \"targets\": 4,\n              \"data\": \"option\",\n              \"render\": function render(data, type, full) {\n                var str = \"<div class='btn-group btn-group-sm'>\";\n\n                if (full.isEdit > 0) {\n                  str += \"<a id='save-btn' class='btn btn-default' ><i class='fa fa-save hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 保存</span></a>\";\n\n                  if (full.id) {\n                    str += \"<a id='cancel-btn' class='btn btn-default' ><i class='fa fa-times hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 取消</span></a>\";\n                  } else {\n                    str += \"<a id='del-btn' class='btn btn-default' ><i class='fa fa-times hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 删除</span></a>\";\n                  }\n                } else {\n                  str += \"<button type='button' class='btn btn-default btn-sm'>操作</button>\" + \"<button type='button' class='btn btn-default btn-sm dropdown-toggle' data-toggle='dropdown'>\" + \"<span class='caret'></span>\" + \"<span class='sr-only'>Toggle Dropdown</span>\" + \"</button>\" + \"<ul class='dropdown-menu' role='menu'>\" + \"<li><a  href='javascript:(0);' id='update-btn'>修改</a></li>\" + \"<li><a  href='' id='del-btn'>删除</a></li>\" + \"<li><a  href='' id='spare-btn'>关联备件</a></li>\" + \"</ul>\";\n                }\n\n                str += \"</div>\";\n                return str;\n              }\n            }]\n          });\n        });\n        /**\n         * 监听表格初始化后，添加按钮\n         */\n\n        domMain.on('init.dt', function () {\n          var parentDom = $(\".special-btn\").parent();\n          parentDom.html('<a ng-click=\"addMajor()\" class=\"btn btn-default btn-sm\"><i class=\"fa fa-plus\"></i><span class=\"hidden-xs\"> 添加主要部件</span></a>');\n          $compile(parentDom)($scope);\n        });\n        domMain.on('click', '#save-btn', function (e) {\n          e.stopPropagation();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          var checkPass = true;\n          $.each(tr.children(), function (j, val1) {\n            var jqob1 = $(val1); //把input变为字符串\n\n            if (!jqob1.has('button').length && jqob1.has('input').length) {\n              var txt = $.trim(jqob1.children(\"input\").val());\n\n              if (txt && txt != \"请选择...\") {\n                var reg = /^[1-9][0-9]*$/;\n\n                if (j == 2) {\n                  if (!reg.test(txt)) {\n                    growl.warning(\"数量不能为负数!\", {});\n                    $(val1).addClass('danger');\n                    checkPass = false;\n                    return false;\n                  }\n                }\n\n                $(val1).removeClass('danger');\n                table.cell(jqob1).data(txt);\n              } else {\n                if (j == 0 || j == 1 || j == 2) {\n                  table.cell(jqob1).data(txt);\n                  $(val1).addClass('danger');\n                  checkPass = false;\n                  return false;\n                }\n              }\n            }\n          });\n\n          if (checkPass) {\n            $scope.doActionMajor('save', row.data(), function (returnObj) {\n              if (row.data().isEdit != 2) {\n                row.data().id = returnObj.id;\n              }\n\n              row.data().isEdit = 0;\n              row.cells().invalidate();\n              isEditing = false;\n            });\n          }\n        });\n        domMain.on('click', '#cancel-btn', function (e) {\n          e.stopPropagation();\n          e.preventDefault();\n          isEditing = false;\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          row.data().isEdit = 0;\n          row.cells().invalidate();\n        });\n        domMain.on('click', '#update-btn', function (e) {\n          isEditing = true;\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          row.data().isEdit = 2;\n          row.cells().invalidate();\n        });\n        domMain.on('click', '#del-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          row.data().isDel = true;\n          var rowData = row.data();\n          $scope.doActionMajor('delete', rowData, function (flg) {\n            if (flg) row.remove().draw(false);\n          });\n        });\n        domMain.on('click', '#spare-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n\n          if (tr.hasClass('time-color')) {\n            tr.removeClass('time-color');\n          } else {\n            table.$('tr.time-color').removeClass('time-color');\n            tr.addClass('time-color');\n          }\n\n          $scope.devicePointInit(row.data(), \"spare\");\n        });\n      }]\n    };\n  }]); //设备模板---任务列表\n\n  directives.initDirective('taskModelTable', ['$timeout', '$compile', 'growl', function ($timeout, $compile, growl) {\n    return {\n      restrict: 'A',\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        var domMain = $element;\n        var table;\n        var isEditing = false;\n        $scope.$on(Event.UNITTYPEINIT + \"_task\", function (event, args) {\n          if (table) {\n            table.destroy();\n          }\n\n          isEditing = false;\n          table = domMain.DataTable({\n            dom: '<\"row\"<\"col-sm-6\"<\"special-btn\">><\"col-sm-6\"f>><\"row\"<\"clo-sm-12\">>t<\"row\"<\"col-sm-2\"i><\"col-sm-2\"l><\"col-sm-8\"p>>',\n            language: directives.datatable.language,\n            data: args.data,\n            //\"order\": [0, \"desc\"],\n            columns: [{\n              title: \"任务名称\",\n              data: \"name\"\n            }, {\n              title: \"任务编码\",\n              data: \"taskCode\"\n            }, {\n              title: \"任务周期(秒)\",\n              data: \"taskTime\"\n            }, {\n              title: \"操作\",\n              orderable: false,\n              data: \"option\"\n            }],\n            columnDefs: [{\n              \"targets\": 0,\n              \"data\": \"name\",\n              \"render\": function render(data, type, full) {\n                if (full.isEdit > 0) return \"<input class='form-control col-xs-6'   type='text'  maxlength='20' placeholder='输入任务名称'  style='border: 1px solid #F18282;width: 100%;' value='\" + escape(data) + \"'>\";else return escape(data);\n              }\n            }, {\n              \"targets\": 1,\n              \"data\": 'taskCode',\n              \"render\": function render(data, type, full) {\n                if (full.isEdit > 0) return \"<input class='form-control col-xs-6'  type='number' size='4'  min='1'  max='10000' placeholder='只能输入1~4位数字' style='border: 1px solid #F18282;width: 100%;' value='\" + data + \"'>\";else return data;\n              }\n            }, {\n              \"targets\": 2,\n              \"data\": 'taskTime',\n              \"render\": function render(data, type, full) {\n                if (full.isEdit > 0) return \"<input class='form-control col-xs-6'   type='number'  max ='5' placeholder='输入任务周期(秒)'  style='border: 1px solid #F18282;width: 100%;' value='\" + escape(data) + \"'>\";else return escape(data);\n              }\n            }, {\n              \"targets\": 3,\n              \"data\": \"option\",\n              \"render\": function render(data, type, full) {\n                // 返回自定义内容\n                var str = \"<div class='btn-group table-option-group' >\";\n\n                if (full.isEdit == 2 || full.isEdit == 3) {\n                  str += \"<a id='save-btn' class='btn btn-default btn-sm'><i class='fa fa-save  hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 保存</span></a>\";\n\n                  if (full.id) {\n                    str += \"<a id='cancel-btn' class='btn btn-default btn-sm' ><i class='fa fa-times hidden-lg hidden-md hidden-sm '></i><span class='hidden-xs'> 取消</span></a>\";\n                  } else {\n                    str += \"<a id='del-btn' class='btn btn-default btn-sm' ><i class='fa fa-times hidden-lg hidden-md hidden-sm '></i><span class='hidden-xs'> 删除</span></a>\";\n                  }\n                } else {\n                  str += \"<div class='btn-group table-option-group'>\" + \"<button type='button' class='btn btn-default btn-sm'>操作</button>\" + \"<button type='button' class='btn btn-default btn-sm dropdown-toggle' data-toggle='dropdown'>\" + \"<span class='caret'></span>\" + \"<span class='sr-only'>Toggle Dropdown</span>\" + \"</button>\" + \"<ul class='dropdown-menu' role='menu'>\" + \"<li><a id='edit-btn' >修改</a></li>\" + \"<li><a href id='del-btn' >删除</a></li>\" + \"<li><a href id='point-btn' >设置测点</a></li>\" + \"</ul>\" + \"</div>\";\n                }\n\n                str += \"</div>\";\n                return str;\n              }\n            }]\n          });\n        });\n        /**\n         * 监听表格初始化后，添加按钮\n         */\n\n        domMain.on('init.dt', function () {\n          var parentDom = $(\".special-btn\").parent();\n          parentDom.html('<a ng-click=\"addTask()\" class=\"btn btn-default btn-sm\"><i class=\"fa fa-plus\"></i><span class=\"hidden-xs\"> 添加任务</span></a>');\n          $compile(parentDom)($scope);\n        });\n        domMain.on('click', '#save-btn', function (e) {\n          e.stopPropagation();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          var checkPass = true;\n          $.each(tr.children(), function (j, val1) {\n            var jqob1 = $(val1); //把input变为字符串\n\n            if (!jqob1.has('button').length && jqob1.has('input').length) {\n              var txt = $.trim(jqob1.children(\"input\").val());\n\n              if (txt && txt != \"请选择...\") {\n                var reg = /^[0-9]*$/;\n\n                if (j == 1) {\n                  if (!reg.test(txt)) {\n                    growl.warning(\"任务编码不能为负数!\", {});\n                    $(val1).addClass('danger');\n                    checkPass = false;\n                    return false;\n                  }\n\n                  if (txt.length > 4) {\n                    growl.warning(\"您输入任务编码超过了4位数字!\", {});\n                    $(val1).addClass('danger');\n                    checkPass = false;\n                    return false;\n                  }\n                }\n\n                if (j == 2) {\n                  if (txt == 0) {\n                    growl.warning(\"任务周期必须大于0的整数!\", {});\n                    $(val1).addClass('danger');\n                    checkPass = false;\n                    return false;\n                  }\n\n                  if (!reg.test(txt)) {\n                    growl.warning(\"任务周期不能为负数!\", {});\n                    $(val1).addClass('danger');\n                    checkPass = false;\n                    return false;\n                  }\n                }\n\n                $(val1).removeClass('danger');\n                table.cell(jqob1).data(txt);\n              } else {\n                if (j == 0 || j == 1 || j == 2) {\n                  table.cell(jqob1).data(txt);\n                  $(val1).addClass('danger');\n                  checkPass = false;\n                  return false;\n                }\n              }\n            }\n          });\n\n          if (checkPass) {\n            $scope.doActionTask('save', row.data(), function (returnObj) {\n              row.data().id = returnObj.id;\n              row.data().isEdit = 0;\n              row.cells().invalidate();\n              isEditing = false;\n            });\n          }\n        });\n        domMain.on('click', '#cancel-btn', function (e) {\n          e.stopPropagation();\n          e.preventDefault();\n          isEditing = false;\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          row.data().isEdit = 0;\n          row.cells().invalidate();\n        });\n        domMain.on('click', '#edit-btn', function (e) {\n          isEditing = true;\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          row.data().isEdit = 2;\n          row.cells().invalidate();\n        });\n        domMain.on('click', '#del-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          row.data().isDel = true;\n          var rowData = row.data();\n          $scope.doActionTask('delete', rowData, function (flg) {\n            if (flg) row.remove().draw(false);\n          });\n        });\n        domMain.on('click', '#point-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n\n          if (tr.hasClass('time-color')) {\n            tr.removeClass('time-color');\n          } else {\n            table.$('tr.time-color').removeClass('time-color');\n            tr.addClass('time-color');\n          }\n\n          $scope.devicePointInit(row.data(), \"task\");\n        });\n      }]\n    };\n  }]);\n  directives.initDirective('documentTable', ['$timeout', '$compile', 'growl', function ($timeout, $compile, growl) {\n    return {\n      restrict: 'A',\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        var domMain = $element;\n        var table;\n        var isEditing = false;\n        var itemAttrs;\n        $scope.$on(Event.UNITTYPEINIT + \"_document\", function (event, args) {\n          if (table) {\n            table.destroy();\n          }\n\n          isEditing = false;\n          table = domMain.DataTable({\n            dom: '<\"row\"<\"col-sm-6\"<\"special-btn\">><\"col-sm-6\"f>><\"row\"<\"clo-sm-12\">>t<\"row\"<\"col-sm-2\"i><\"col-sm-2\"l><\"col-sm-8\"p>>',\n            language: directives.datatable.language,\n            data: args.data,\n            columns: [{\n              title: \"文档名称\",\n              data: \"name\"\n            }, {\n              title: \"文档路径\",\n              data: \"qualifiedName\"\n            }, {\n              title: \"操作\",\n              orderable: false,\n              data: \"option\"\n            }],\n            columnDefs: [{\n              \"targets\": 0,\n              \"data\": \"name\",\n              \"render\": function render(data, type, full) {\n                if (full.isEdit > 0) return \"<input class='form-control col-xs-6' id='docName' name='docName'  type='text'  maxlength='80' placeholder='请输入文档名称'  style='border: 1px solid #F18282;width: 100%;' value='\" + escape(decodeURIComponent(data)) + \"'>\";else return escape(decodeURIComponent(data));\n              }\n            }, {\n              \"targets\": 1,\n              \"data\": \"qualifiedName\",\n              \"render\": function render(data, type, full) {\n                if (full.isEdit > 0) return '<input type=\"file\" nv-file-select uploader=\"uploader\"/>';else return escape(data);\n              }\n            }, {\n              \"targets\": 2,\n              \"data\": \"option\",\n              \"render\": function render(data, type, full) {\n                // 返回自定义内容\n                var str = \"<div class='btn-group table-option-group' >\";\n\n                if (full.isEdit == 3) {\n                  str += \"<button id='save-btn' class='btn btn-default btn-sm'  ng-disabled='uploader.queue.length == 0'><i class='fa fa-save  hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 上传</span></button>\";\n\n                  if (full.id) {\n                    str += \"<a id='cancel-btn' class='btn btn-default btn-sm' ><i class='fa fa-times hidden-lg hidden-md hidden-sm '></i><span class='hidden-xs'> 取消</span></a>\";\n                  } else {\n                    str += \"<a id='del-btn' class='btn btn-default btn-sm' ><i class='fa fa-times hidden-lg hidden-md hidden-sm '></i><span class='hidden-xs'> 删除</span></a>\";\n                  }\n                } else {\n                  str += \"<a id='dow-btn' class='btn btn-default btn-sm'><i class='fa fa-save  hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 下载</span></a>\";\n                  str += \"<a id='del-btn' class='btn btn-default btn-sm' ><i class='fa fa-times hidden-lg hidden-md hidden-sm '></i><span class='hidden-xs'> 删除</span></a>\";\n                }\n\n                str += \"</div>\";\n                return str;\n              }\n            }],\n            rowCallback: function rowCallback(nRow, aData, iDataIndex) {\n              $compile(nRow)($scope);\n            }\n          });\n        });\n        /**\n         * 监听表格初始化后，添加按钮\n         */\n\n        domMain.on('init.dt', function () {\n          var parentDom = $(\".special-btn\").parent();\n          parentDom.html('<a ng-click=\"addDocument()\" class=\"btn btn-default btn-sm\"><i class=\"fa fa-plus\"></i><span class=\"hidden-xs\"> 新建文档</span></a>');\n          $compile(parentDom)($scope);\n        });\n        domMain.on('click', '#save-btn', function (e) {\n          e.stopPropagation();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          var param = $(\"#docName\").val();\n\n          if (param != null && param != \"\") {\n            //$scope.uploadParam.modelId = $scope.selectedDitem.id;\n            //$scope.uploadParam.name = param;\n            $scope.UploadFile(param, $scope.selectedDitem.id, function (flg) {\n              if (flg) {\n                row.data().isEdit = 0;\n                row.data().name = flg.name;\n                row.data().qualifiedName = flg.qualifiedName;\n                row.data().id = flg.id;\n                row.cells().invalidate();\n                isEditing = false;\n              }\n            });\n          } else {\n            growl.warning(\"文档名称不能为空\", {});\n          }\n        });\n        domMain.on('click', '#uploadImg', function (e) {\n          e.preventDefault();\n          $(\"#fileUp\").trigger('click');\n        });\n        domMain.on('click', '#cancel-btn', function (e) {\n          e.stopPropagation();\n          e.preventDefault();\n          isEditing = false;\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          row.data().isEdit = 0;\n          row.cells().invalidate();\n        });\n        domMain.on('click', '#del-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          row.data().isDel = true;\n          var rowData = row.data();\n          $scope.doActionDocument('delete', rowData, function (flg) {\n            if (flg) row.remove().draw(false);\n          });\n        });\n        domMain.on('click', '#dow-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          var url = $scope.dowLoadUrl + row.data().qualifiedName; //          location.href = '' + url + '';\n\n          window.open(url);\n        });\n      }]\n    };\n  }]); //设备模板---设置测点\n\n  directives.initDirective('directivesPointTable', ['$timeout', '$compile', function ($timeout, $compile) {\n    return {\n      restrict: 'A',\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        var domMain = $element;\n        var table;\n        var isEditing = false;\n        $scope.$on(Event.DIRECTIVESINIT + \"_point\", function (event, args) {\n          if (table) {\n            table.destroy();\n          }\n\n          isEditing = false;\n          table = domMain.DataTable({\n            dom: '<\"row\"<\"col-sm-6\"<\"special-btn\">><\"col-sm-6\"f>><\"row\"<\"clo-sm-12\">>t<\"row\"<\"col-sm-2\"i><\"col-sm-2\"l><\"col-sm-8\"p>>',\n            language: directives.datatable.language,\n            data: args.data,\n            ordering: false,\n            columns: [{\n              title: \"测点名称\",\n              data: \"label\"\n            }, {\n              title: \"数据类型\",\n              data: \"dataTypeId\"\n            }, {\n              title: \"操作\",\n              data: \"option\"\n            }],\n            columnDefs: [{\n              \"targets\": 0,\n              \"data\": \"name\",\n              \"render\": function render(data, type, full) {\n                // 返回自定义内容\n                var str = \"\";\n\n                if (full.isEdit == 3) {\n                  var divs2 = $scope.initListDate.kpiList;\n                  var put = \"<select id='selKpi' name='selKpi' class='combobox form-control input-sm'>\";\n                  put += '<option value=\"\">请选择...</option>';\n\n                  for (var i in divs2) {\n                    put += '<option value=\"' + divs2[i].id + '\">' + divs2[i].label + '</option>';\n                  }\n\n                  put += '</select>';\n                  str = put;\n                } else {\n                  str = data;\n                }\n\n                return str;\n              }\n            }, {\n              \"targets\": 1,\n              \"data\": \"dataTypeId\",\n              \"render\": function render(data, type, full) {\n                var dateType = $scope.initListDate.allDataTypes;\n                var str = \"\";\n\n                if (data != \"\" && data != null) {\n                  for (var j in dateType) {\n                    if (dateType[j].id == data) {\n                      str = dateType[j].name;\n                      break;\n                    }\n                  }\n                }\n\n                return str;\n              }\n            }, {\n              \"targets\": 2,\n              \"data\": \"option\",\n              \"render\": function render(data, type, full) {\n                // 返回自定义内容\n                var str = \"<div class='btn-group ' >\";\n\n                if (full.isEdit == 3) {\n                  str += \"<a id='save-btn' class='btn btn-default btn-sm' style='margin-right: 10px;'><i class='fa fa-save  hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 保存</span></a>\";\n                  str += \"<a id='cancel-btn' class='btn btn-default btn-sm' ><i class='fa fa-times hidden-lg hidden-md hidden-sm '></i><span class='hidden-xs'> 取消</span></a>\";\n                } else {\n                  str += \"<a id='move-btn' class='btn btn-default btn-sm' style='margin-right: 10px;'><i class='fa fa-save  hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 上移</span></a>\";\n                  str += \"<a id='down-btn' class='btn btn-default btn-sm'  style='margin-right: 10px;'><i class='fa fa-times hidden-lg hidden-md hidden-sm '></i><span class='hidden-xs'> 下移</span></a>\";\n                  str += \"<a id='del-btn' class='btn btn-default btn-sm' ><i class='fa fa-times hidden-lg hidden-md hidden-sm '></i><span class='hidden-xs'> 删除</span></a>\";\n                }\n\n                str += \"</div>\";\n                return str;\n              }\n            }]\n          });\n        });\n        /**\n         * 监听表格初始化后，添加按钮\n         */\n\n        domMain.on('init.dt', function () {\n          var parentDom = $(\".special-btn\").parent();\n          parentDom.html('<a ng-click=\"addStation()\" class=\"btn btn-default btn-sm\"><i class=\"fa fa-plus\"></i><span class=\"hidden-xs\"> 选择测点</span></a>');\n          $compile(parentDom)($scope);\n        });\n        domMain.on('click', '#move-btn', function (e) {\n          var index = table.row($(this).parents('tr')).index();\n          var $tr = $(this).parents(\"tr\");\n\n          if ($tr.index() != 0) {\n            var data = table.data();\n            table.clear();\n            data.splice(index - 1, 0, data.splice(index, 1)[0]);\n            table.rows.add(data).draw();\n          }\n        });\n        domMain.on('click', '#down-btn', function (e) {\n          var index = table.row($(this).parents('tr')).index();\n          var $tr = $(this).parents(\"tr\");\n          var len = $(\".down-btn\").length;\n\n          if ($tr.index() != len - 1) {\n            var data = table.data();\n            table.clear();\n            data.splice(index + 1, 0, data.splice(index, 1)[0]);\n            table.rows.add(data).draw();\n          }\n        });\n        domMain.on('click', '#save-btn', function (e) {\n          e.stopPropagation();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          var rowData = row.data();\n          var divs2 = $scope.selectedDitem.kpis;\n          var put = $(\"#selKpi option:selected\").val();\n\n          if (put == \"\" && put == null) {\n            return;\n          } else {\n            for (var i in divs2) {\n              if (divs2[i].id == put) {\n                $scope.doActionStation('save', divs2[i]);\n                break;\n              }\n            }\n          }\n        });\n        domMain.on('click', '#cancel-btn', function (e) {\n          e.stopPropagation(); //e.preventDefault();\n          //if(isEditing) {\n          //  isEditing = false;\n\n          var tr = $(this).closest('tr');\n          var row = table.row(tr); //  row.data().isEdit = 0;\n          //  row.cells().invalidate();\n          //}\n          //$scope.doActionStation('removeDomain', rowData, function(flg) {\n          //  if(flg)\n\n          row.remove().draw(false); //});\n        });\n        domMain.on('click', '#del-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          row.data().isDel = true;\n          var rowData = row.data();\n          $scope.doActionStation('removeDomain', rowData, function (flg) {\n            if (flg) row.remove().draw(false);\n          });\n        });\n      }]\n    };\n  }]); //设备模板---关联备件\n\n  directives.initDirective('majorAttachmentTable', ['$timeout', '$compile', function ($timeout, $compile) {\n    return {\n      restrict: 'A',\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        var domMain = $element;\n        var table;\n        var isEditing = false;\n        $scope.$on(Event.DIRECTIVESINIT + \"_attachment\", function (event, args) {\n          if (table) {\n            table.destroy();\n          }\n\n          isEditing = false;\n          table = domMain.DataTable({\n            dom: '<\"row\"<\"col-sm-6\"<\"special-btn\">><\"col-sm-6\"f>><\"row\"<\"clo-sm-12\">>t<\"row\"<\"col-sm-2\"i><\"col-sm-2\"l><\"col-sm-8\"p>>',\n            language: directives.datatable.language,\n            data: args.data,\n            \"order\": [0, \"asc\"],\n            columns: [{\n              title: \"\",\n              data: \"id\",\n              visible: false\n            }, {\n              title: \"备件编号\",\n              data: \"name\"\n            }, {\n              title: \"备件名称\",\n              data: \"label\"\n            }, {\n              title: \"当前数量\",\n              data: \"stockNumber\"\n            }, {\n              title: \"操作\",\n              orderable: false,\n              data: \"option\"\n            }],\n            columnDefs: [{\n              \"targets\": 1,\n              \"data\": \"name\",\n              \"render\": function render(data, type, full) {\n                // 返回自定义内容\n                var str = \"\";\n\n                if (full.isEdit == 3) {\n                  var projectData = $scope.initListDate.allSpareParts;\n                  str += '<select id=\"allSpare\" name=\"allSpare\" class=\"combobox form-control input-sm\">';\n                  str += '<option value=\"\">请选择...</option>';\n\n                  for (var i in projectData) {\n                    str += \"<option value='\" + projectData[i].id + \"' >\" + projectData[i].label + \"</option>\";\n                  }\n\n                  str += '</select>';\n                } else {\n                  str = \"<a href='#sparepartInfo/\" + full.id + \"'>\" + data + \"</a>\";\n                }\n\n                return str;\n              }\n            }, {\n              \"targets\": 2,\n              \"data\": \"label\",\n              \"render\": function render(data, type, full) {\n                return data;\n              }\n            }, {\n              \"targets\": 3,\n              \"data\": \"stockNumber\",\n              \"render\": function render(data, type, full) {\n                return data;\n              }\n            }, {\n              \"targets\": 4,\n              \"data\": \"option\",\n              \"render\": function render(data, type, full) {\n                // 返回自定义内容\n                var str = \"<div class='btn-group ' >\";\n\n                if (full.isEdit == 3) {\n                  str += \"<a id='save-btn' class='btn btn-default btn-sm' style='margin-right: 10px;'><i class='fa fa-save  hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 保存</span></a>\";\n                  str += \"<a id='cancel-btn' class='btn btn-default btn-sm' ><i class='fa fa-times hidden-lg hidden-md hidden-sm '></i><span class='hidden-xs'> 取消</span></a>\";\n                } else {\n                  str += \"<a id='del-btn' class='btn btn-default btn-sm' ><i class='fa fa-times hidden-lg hidden-md hidden-sm '></i><span class='hidden-xs'> 删除</span></a>\";\n                }\n\n                str += \"</div>\";\n                return str;\n              }\n            }]\n          });\n        });\n        /**\n         * 监听表格初始化后，添加按钮\n         */\n\n        domMain.on('init.dt', function () {\n          var parentDom = $(\".special-btn\").parent();\n          parentDom.html('<a ng-click=\"addAttachment()\" class=\"btn btn-default btn-sm\"><i class=\"fa fa-plus\"></i><span class=\"hidden-xs\"> 选择备件</span></a>');\n          $compile(parentDom)($scope);\n        });\n        domMain.on('click', '#save-btn', function (e) {\n          e.stopPropagation();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          var rowData = row.data();\n          var divs2 = $scope.initListDate.allSpareParts;\n          var put = $(\"#allSpare option:selected\").val();\n\n          if (put == \"\" && put == null) {\n            return;\n          } else {\n            for (var i in divs2) {\n              if (divs2[i].id == put) {\n                $scope.doActionStation('save', divs2[i]);\n                break;\n              }\n            }\n          }\n        });\n        domMain.on('click', '#cancel-btn', function (e) {\n          e.stopPropagation();\n          e.preventDefault(); //if(isEditing) {\n          //  isEditing = false;\n\n          var tr = $(this).closest('tr');\n          var row = table.row(tr); //  row.data().isEdit = 0;\n          //  row.cells().invalidate();\n          //}\n\n          row.remove().draw(false);\n        });\n        domMain.on('click', '#del-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          row.data().isDel = true;\n          var rowData = row.data();\n          $scope.doActionStation('delAttachment', rowData, function (flg) {\n            if (flg) row.remove().draw(false);\n          });\n        });\n      }]\n    };\n  }]);\n});"],"sourceRoot":"/source/"}