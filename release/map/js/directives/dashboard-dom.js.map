{"version":3,"sources":["js/directives/dashboard-dom.js"],"names":["define","directives","echarts","dragging","editBtn_directive","timeout","variables","route","directive","restrict","scope","dashboard","link","element","attr","current","params","mode","$","addClass","removeClass","on","$apply","callback","_EDITMODE_","_VIEWMODE_","colorSelector_directive","bgcolor","colors","wrap","i","showBlock","color","block","css","width","height","margin","float","display","append","event","stopPropagation","off","attributes","offset","top","left","hideBlock","prepend","iconSelector_directive","icon","icons","find","ciSelectmenu_directive","tool","$resources","get","then","data","obj","option","text","label","id","this","call","nodeId","ci","modelId","getModelIdByNodeId","$kpis","getBymodelId","onChange","err","selectmenu","change","ui","parseInt","item","value","aciSelectmenu_directive","getCurrent","index","getAttrByNodeId","ciSelectmenuChart_directive","kpiCache","chart","$watch","n","o","s","add","fill","kpiObjects","some","push","kpiObj","length","nodes","kpiSelectmenuChart_directive","target","kpis","children","remove","prop","render","filter","kpi","map","selectmenu_directive","attrSelectmenu_directive","attrId","bootinputfree_directive","model","oldValue","inputDom","cols","col","arr","val","split","reduce","prev","next","alert","elem","bootinput_directive","wrapDiv","colDiv","numberInput","unitDiv","sum","parts","draggable_directive","draggable","start","stop","handle","cursor","appendTo","revert","helper","drag","currentTarget","layout","JSON","parse","stringify","layouts","result","divDom","revertDuration","zIndex","connectToSortable","droppable_directive","q","kpiDataService","resourceUIService","viewFlexService","growl","basicline","basicpie","location","window","Info","ticketTaskService","solutionUIService","templates","$Array","bootEditor","object","cur","structure","resize","toJSON","each","type","echart","dragconfig","cursorAt","opacity","clone","size","cl","pointer-events","mouseEvent","mouseover","mouseout","dropconfig","tolerance","drop","rowWrap","rowInput","variable","dragId","$randomString","eachRow","domId","hasClass","rowId","parent","colId","eachCol","rows","temp","box","boxHeader","before","traverse","init","$tree","insertAfter","getData","root","row","boxBody","droppable","inputTitle","toolbar","moveBtn","deleteBtn","insertBefore","innerContent","innerWrap","checkbox","show","removeAttr","title","column","j","inrow","designView","totalItems","progress","downTab","attrTab","header","content","getOption","elements","listone","listtwo","sparkline","document","removed","param","emptyRow","undefined","eRow","emptyCol","mydata","dom","renderlayout","deferreds","kpiResDefer","deferred","defer","promise","kpisDes","nodesDes","category","dataType","formatStr","$rootDomain","kpiQueryModel","isRealTimeData","timePeriod","timespan","nodeIds","kpiCodes","startTime","endTime","timeRange","statisticType","condList","def1","resolve","all","getValueList","valueList","vlistGroup","nodeDes","kpiId","kpiDes","vg","date","Date","getTime","year","getYear","month","getMonth","dt","getDate","values","kpiCode","arisingTime","replace","timeStamp","xAxis","legend","optionFormat","vlGroup","$valueListGroup","op","$option","series","clearSeries","getLegend","getxAxisByTime","eachValueListMerged","name","$valueList","pushSeries","first","firstSeries","setFirstxAxis","setLegend","itemStyle","normal","lineStyle","areaStyle","markPoint","markLine","animation","getKpiHierarchyValueList","code","ul","recordList","Array","alert_code_count","li","after","currentKpi","inner","number","indexOf","getResourceById","getDataByModelId","getValueByRootKpi","unit","href","$units","units","unitCode","unitName","addErrorMessage","kpiDefs","outer","kpiIds","getValueListByRootKpis","vlist","myvalues","slice","el","barColor","baseoption","dashboardOption","backgroundColor","subtext","sublink","textStyle","tooltip","trigger","formatter","seriesName","bmap","center","zoom","roam","mapStyle","styleJson","coordinateSystem","symbolSize","position","emphasis","showEffectOn","rippleEffect","brushType","hoverAnimation","shadowBlur","shadowColor","zlevel","info","styleJson_dark","statDeviceByStandardAddress","returnObj","citys","北京市","city","geoCoord","prg","getByKpiIds","html","valueDom","disc","old","rate","Math","abs","random","fun","uldom","eval","message","lidom","format","createTime","time","exec","t","tbody","status","priorityCode","ticketNo","fn","extend","setOption","arguments","dashboardView","beditor","viewId","changeView","save","solutionId","saveManageViewContent","open","success","error","viewTitle","viewName","viewType","saveManageDashboard","delete","deleteViews","initDirective","$inject"],"mappings":"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","file":"js/directives/dashboard-dom.js","sourcesContent":["define(['directives/directives', \"echarts\", \"jquery-ui\", \"macarons\", 'bmap'], function (directives, echarts) {\n  'use strict';\n\n  var dragging = false;\n  directives.initDirective('editBtn', editBtn_directive);\n  editBtn_directive.$inject = ['$timeout', 'variables', \"$route\"];\n\n  function editBtn_directive(timeout, variables, route) {\n    var directive = {};\n    directive.restrict = \"A\";\n    directive.scope = {\n      dashboard: \"=\"\n    };\n\n    directive.link = function (scope, element, attr) {\n      timeout(function () {\n        if (route.current.params.mode == 'edit') {\n          $(\"#leftPart\").addClass(\"open\");\n          $(\"#rightPart\").addClass(\"fold\");\n          scope.dashboard.mode = \"editmode\";\n        } else {\n          $(\"#leftPart\").removeClass(\"open\");\n          $(\"#rightPart\").removeClass(\"fold\");\n          scope.dashboard.mode = \"viewmode\";\n        }\n      });\n      $(element).on(\"click\", function () {\n        scope.$apply(function () {\n          var body = $('body');\n\n          if (scope.dashboard.callback) {\n            scope.dashboard.callback();\n          }\n\n          if (scope.dashboard.mode == variables._EDITMODE_) {\n            $(\"#leftPart\").removeClass(\"open\");\n            $(\"#rightPart\").removeClass(\"fold\");\n            scope.dashboard.mode = variables._VIEWMODE_;\n          } else {\n            $(\"#leftPart\").addClass(\"open\");\n            $(\"#rightPart\").addClass(\"fold\");\n            scope.dashboard.mode = variables._EDITMODE_;\n          }\n        });\n      });\n    };\n\n    return directive;\n  }\n\n  directives.initDirective('colorSelector', colorSelector_directive);\n  colorSelector_directive.$inject = ['$timeout', 'variables'];\n\n  function colorSelector_directive(timeout, variables) {\n    /*\n     var kpiQueryModel = {\n     category: 'ci',\n     isRealTimeData: true,\n     timePeriod: 0,\n     kpiCodes: [\"alert_code_count\"]\n     };\n     var p = [\"alert\", kpiQueryModel];\n     */\n    var directive = {};\n    directive.restrict = \"A\";\n    directive.scope = {\n      bgcolor: \"=\"\n    };\n\n    directive.link = function (scope, element, attr) {\n      timeout(function () {\n        var colors = ['bg-red', 'bg-yellow', 'bg-aqua', 'bg-blue', 'bg-light-blue', 'bg-green', 'bg-navy', 'bg-teal', 'bg-olive', 'bg-lime', 'bg-orange', 'bg-fuchsia', 'bg-purple', 'bg-maroon', 'bg-white', 'bg-black'];\n        var wrap = $(\"<div class='selWrap' id='colorSelector'></div>\");\n        $(element).on(\"click.cs\", showBlock);\n\n        for (var i in colors) {\n          (function (color) {\n            var block = $(\"<div class='small-box \" + color + \"'></div>\");\n            block.css({\n              width: 20,\n              height: 20,\n              margin: 5,\n              float: 'left',\n              display: block\n            });\n            wrap.append(block);\n            block.on(\"click.block\", function (event) {\n              event.stopPropagation();\n              wrap.css(\"display\", \"none\");\n              $(\"body\").off(\"click.body\");\n              $(element).off(\"click.cs\");\n              $(element).on(\"click.cs\", showBlock);\n              scope.$apply(function () {\n                if (scope.bgcolor.attributes) {\n                  scope.bgcolor.attributes.color = color;\n                } else {\n                  scope.bgcolor.attributes = {\n                    color: color\n                  };\n                }\n\n                $(element).removeClass().addClass(\"small-box\").addClass(color);\n              });\n            });\n          })(colors[i]);\n\n          scope.bgcolor.attributes.color = colors[0];\n        }\n\n        function showBlock(event) {\n          event.stopPropagation();\n          wrap.css(\"display\", \"block\");\n          wrap.css(\"top\", $(element).offset().top);\n          wrap.css(\"left\", $(element).offset().left + 30);\n          $(element).off(\"click.cs\");\n          $(element).on(\"click.cs\", hideBlock);\n          $(\"body\").on(\"click.body\", hideBlock);\n        }\n\n        ;\n\n        function hideBlock(event) {\n          event.stopPropagation();\n          wrap.css(\"display\", \"none\");\n          $(\"body\").off(\"click.body\");\n          $(element).off(\"click.cs\");\n          $(element).on(\"click.cs\", showBlock);\n        }\n\n        $(\"body\").prepend(wrap);\n        wrap.on(\"click.empty\", function () {\n          event.stopPropagation();\n        });\n      });\n    };\n\n    return directive;\n  }\n\n  directives.initDirective('iconSelector', iconSelector_directive);\n  iconSelector_directive.$inject = ['$timeout', 'variables'];\n\n  function iconSelector_directive(timeout, variables) {\n    var directive = {};\n    directive.restrict = \"A\";\n    directive.scope = {\n      icon: \"=\"\n    };\n\n    directive.link = function (scope, element, attr) {\n      timeout(function () {\n        /* var icons = ['fa fa-connectdevelop',\n         'fa fa-warning', 'fa fa-edit', 'fa fa-birthday-cake', 'fa fa-user', 'fa fa-envelope-o',\n         'fa fa-file-code-o', 'fa fa-icon-file', 'fa fa-clock-o', 'fa fa-warning',\n         'ps-lg-nofix ps-dashboard', 'ps-lg-nofix ps-resource', 'ps-lg-nofix ps-performance']; */\n        var icons = ['ps-edit', ' ps-back', 'ps-mushroom', 'ps-planting', 'ps-current_production', 'ps-estimated_output', 'ps-daily_output', 'ps-duration', 'ps-sandglass', 'ps-task', 'ps-current_production_p', 'ps-pattern', 'ps-number', 'ps-air-humidity', 'ps-air-temperature', 'ps-camera', 'ps-sunshine', 'ps-video-camera', 'ps-water', 'ps-fan', 'ps-electric_motor02', 'ps-electric_motor', 'ps-Co2', 'ps-soil_temperature', 'ps-soil_humidity', 'ps-irrigation', 'ps-spraying', 'ps-chart_brokenline', 'ps-userinfo', 'ps-user', 'ps-group', 'ps-center', 'ps-server', 'ps-app'];\n        var wrap = $(\"<div class='selWrap' id='iconSelector'></div>\");\n        $(element).on(\"click.cs\", showBlock);\n\n        for (var i in icons) {\n          (function (icon) {\n            var block = $(\"<div class='icon'><span class='proudsmart \" + icon + \"' style='font-size : 15px; color : #fff; top : 2px; left : 2px;'></span></div>\");\n            block.css({\n              width: 20,\n              height: 20,\n              margin: 5,\n              float: 'left',\n              display: block\n            });\n            wrap.append(block);\n            block.on(\"click.block\", function (event) {\n              event.stopPropagation();\n              wrap.css(\"display\", \"block\");\n              $(\"body\").off(\"click.body\");\n              wrap.css(\"display\", \"none\");\n              $(element).off(\"click.cs\");\n              $(element).on(\"click.cs\", showBlock);\n              scope.$apply(function () {\n                if (scope.icon.attributes) {\n                  scope.icon.attributes.icon = icon;\n                } else {\n                  scope.icon.attributes = {\n                    icon: icon\n                  };\n                }\n\n                $(element).find(\"i\").removeClass().addClass(\"proudsmart \" + icon);\n              });\n            });\n          })(icons[i]);\n\n          scope.icon.attributes.icon = icons[0];\n        }\n\n        function showBlock(event) {\n          event.stopPropagation();\n          wrap.css(\"top\", $(element).offset().top);\n          wrap.css(\"left\", $(element).offset().left + 30);\n          wrap.css(\"display\", \"block\");\n          $(element).off(\"click.cs\");\n          $(element).on(\"click.cs\", hideBlock);\n          $(\"body\").on(\"click.body\", hideBlock);\n        }\n\n        ;\n\n        function hideBlock(event) {\n          event.stopPropagation();\n          wrap.css(\"display\", \"none\");\n          $(\"body\").off(\"click.body\");\n          $(element).off(\"click.cs\");\n          $(element).on(\"click.cs\", showBlock);\n        }\n\n        $(\"body\").prepend(wrap);\n        wrap.on(\"click.empty\", function () {\n          event.stopPropagation();\n        });\n      });\n    };\n\n    return directive;\n  }\n\n  directives.initDirective('ciSelectmenu', ciSelectmenu_directive);\n  ciSelectmenu_directive.$inject = ['$timeout', 'variables'];\n\n  function ciSelectmenu_directive(timeout, variables) {\n    var directive = {};\n    directive.restrict = \"A\";\n    directive.scope = {\n      tool: \"=\"\n    };\n\n    directive.link = function (scope, element, attr) {\n      timeout(function () {\n        variables.$resources.get().then(function success(data) {\n          for (var i in data) {\n            (function (obj) {\n              var option = $(\"<option></option>\");\n              option.text(obj.label);\n              option.attr(\"value\", obj.id);\n              this.append(option);\n            }).call($(element), data[i]);\n          }\n\n          var nodeId = data[0].id;\n          scope.tool.attributes.ci = nodeId;\n          var modelId = variables.$resources.getModelIdByNodeId(nodeId);\n          variables.$kpis.getBymodelId(modelId).then(function success(data) {\n            scope.tool.onChange(data);\n          }, function error(err) {});\n          $(element).selectmenu({\n            width: 100,\n            change: function change(event, ui) {\n              var nodeId = parseInt(ui.item.value);\n              scope.tool.attributes.ci = nodeId;\n              var modelId = variables.$resources.getModelIdByNodeId(nodeId);\n              variables.$kpis.getBymodelId(modelId).then(function success(data) {\n                scope.tool.onChange(data);\n              }, function error(err) {});\n            }\n          });\n        }, function error(err) {});\n      });\n    };\n\n    return directive;\n  }\n\n  ;\n  directives.initDirective('aciSelectmenu', aciSelectmenu_directive);\n  aciSelectmenu_directive.$inject = ['$timeout', 'variables'];\n\n  function aciSelectmenu_directive(timeout, variables) {\n    var directive = {};\n    directive.restrict = \"A\";\n    directive.scope = {\n      attr: \"=\"\n    };\n\n    directive.link = function (scope, element, attr) {\n      timeout(function () {\n        variables.$resources.getCurrent().then(function success(data) {\n          for (var i in data) {\n            (function (index, obj) {\n              if (index != 0) {\n                var option = $(\"<option></option>\");\n                option.text(obj.label);\n                option.attr(\"value\", obj.id);\n                this.append(option);\n              }\n            }).call($(element), i, data[i]);\n          }\n\n          var nodeId = data[1].id;\n          scope.attr.attributes.ci = nodeId;\n          variables.$resources.getAttrByNodeId(nodeId).then(function success(data) {\n            scope.attr.onChange(data);\n          }, function error(err) {});\n          $(element).selectmenu({\n            width: 100,\n            change: function change(event, ui) {\n              var nodeId = parseInt(ui.item.value);\n              variables.$resources.getAttrByNodeId(nodeId).then(function success(data) {\n                scope.attr.onChange(data);\n              }, function error(err) {});\n            }\n          });\n        }, function error(err) {});\n      });\n    };\n\n    return directive;\n  }\n\n  ;\n  directives.initDirective('ciSelectmenuChart', ciSelectmenuChart_directive);\n  ciSelectmenuChart_directive.$inject = ['$timeout', 'variables'];\n\n  function ciSelectmenuChart_directive(timeout, variables) {\n    var directive = {};\n    var kpiCache;\n    directive.restrict = \"A\";\n    directive.scope = {\n      chart: \"=\"\n    };\n\n    directive.link = function (scope, element, attr) {\n      scope.$watch('chart', function (n, o, s) {\n        if (n) {\n          n.add = function () {\n            var fill;\n\n            for (var i in kpiCache) {\n              var find = scope.chart.kpiObjects.some(function (element) {\n                return kpiCache[i].id == element.id;\n              });\n\n              if (!find) {\n                fill = {\n                  id: kpiCache[i].id\n                };\n                break;\n              }\n            }\n\n            scope.chart.kpiObjects.push(fill);\n            var kpiObj = scope.chart.kpiObjects;\n            timeout(function () {\n              kpiObj[kpiObj.length - 1].onChange(kpiCache);\n            });\n          };\n        }\n      });\n      timeout(function () {\n        variables.$resources.get().then(function success(data) {\n          for (var i in data) {\n            (function (obj) {\n              var option = $(\"<option></option>\");\n              option.text(obj.label);\n              option.attr(\"value\", obj.id);\n              this.append(option);\n            }).call($(element), data[i]);\n          }\n\n          var nodeId = data[0].id;\n          scope.chart.attributes.nodes = [nodeId];\n          var modelId = variables.$resources.getModelIdByNodeId(nodeId);\n          variables.$kpis.getBymodelId(modelId).then(function success(data) {\n            kpiCache = data;\n            scope.chart.kpiObjects = [{\n              id: data[0].id\n            }];\n            timeout(function () {\n              scope.chart.kpiObjects[0].onChange(data);\n            });\n          }, function error(err) {});\n          $(element).selectmenu({\n            width: 100,\n            change: function change(event, ui) {\n              scope.$apply(function () {\n                var nodeId = parseInt(ui.item.value);\n                scope.chart.attributes.nodes = [nodeId];\n                var modelId = variables.$resources.getModelIdByNodeId(nodeId);\n                variables.$kpis.getBymodelId(modelId).then(function success(data) {\n                  kpiCache = data;\n                  scope.chart.kpiObjects = [{\n                    id: data[0].id\n                  }];\n                  timeout(function () {\n                    scope.chart.kpiObjects[0].onChange(data);\n                  });\n                }, function error(err) {});\n              });\n            }\n          });\n        }, function error(err) {});\n      });\n    };\n\n    return directive;\n  }\n\n  ;\n  directives.initDirective('kpiSelectmenuChart', kpiSelectmenuChart_directive);\n  kpiSelectmenuChart_directive.$inject = ['$timeout', 'variables'];\n\n  function kpiSelectmenuChart_directive(timeout, variables) {\n    var directive = {};\n    directive.restrict = \"A\";\n    directive.scope = {\n      chart: \"=\",\n      target: \"=\"\n    };\n\n    directive.link = function (scope, element, attr) {\n      scope.$watch('chart', function (n, o, s) {\n        if (n) {\n          n.onChange = function (kpis) {\n            var result = kpis.filter(function (kpi) {\n              for (var i in s.filter) {\n                var find = function (attr, value) {\n                  return kpi[attr] == value;\n                }(i, s.filter[i]);\n\n                if (!find) {\n                  return false;\n                }\n              }\n\n              return true;\n            });\n            render(result);\n          };\n        }\n      });\n      scope.$watch('chart.id', function (n, o, s) {\n        if (n) {\n          s.target.attributes.kpis = s.target.kpiObjects.map(function (element) {\n            return element.id;\n          });\n        }\n      });\n\n      function render(data) {\n        $(element).children().remove();\n\n        for (var i in data) {\n          (function (obj) {\n            var option = $(\"<option></option>\");\n            option.text(obj.label);\n            option.attr(\"value\", obj.id);\n\n            if (scope.chart.id == obj.id) {\n              option.prop(\"selected\", \"selected\");\n            }\n\n            this.append(option);\n          }).call($(element), data[i]);\n        }\n\n        var instance = $(element).selectmenu(\"instance\");\n\n        if (instance) {\n          $(element).selectmenu(\"refresh\");\n        } else {\n          $(element).selectmenu({\n            width: 100,\n            change: function change(event, ui) {\n              scope.$apply(function () {\n                scope.chart.id = parseInt(ui.item.value);\n              });\n            }\n          });\n        }\n      }\n\n      ;\n    };\n\n    return directive;\n  }\n\n  directives.initDirective('kpiSelectmenu', selectmenu_directive);\n  selectmenu_directive.$inject = ['$timeout', 'variables'];\n\n  function selectmenu_directive(timeout, variables) {\n    var directive = {};\n    directive.restrict = \"A\";\n    directive.scope = {\n      tool: \"=\",\n      filter: \"=\"\n    };\n\n    directive.link = function (scope, element, attr) {\n      scope.$watch('tool', function (n, o, s) {\n        if (n) {\n          n.onChange = function (kpis) {\n            var result = kpis.filter(function (kpi) {\n              for (var i in s.filter) {\n                var find = function (attr, value) {\n                  return kpi[attr] == value;\n                }(i, s.filter[i]);\n\n                if (!find) {\n                  return false;\n                }\n              }\n\n              return true;\n            });\n            render(result);\n          };\n        }\n      });\n\n      function render(data) {\n        $(element).children().remove();\n\n        for (var i in data) {\n          (function (obj) {\n            var option = $(\"<option></option>\");\n            option.text(obj.label);\n            option.attr(\"value\", obj.id);\n            this.append(option);\n          }).call($(element), data[i]);\n        }\n\n        var instance = $(element).selectmenu(\"instance\");\n\n        if (instance) {\n          $(element).selectmenu(\"refresh\");\n        } else {\n          $(element).selectmenu({\n            width: 100,\n            change: function change(event, ui) {\n              scope.tool.attributes.kpi = parseInt(ui.item.value);\n            }\n          });\n        }\n\n        scope.tool.attributes.kpi = data[0].id;\n      }\n\n      ;\n    };\n\n    return directive;\n  }\n\n  directives.initDirective('attrSelectmenu', attrSelectmenu_directive);\n  attrSelectmenu_directive.$inject = ['$timeout', 'variables'];\n\n  function attrSelectmenu_directive(timeout, variables) {\n    var directive = {};\n    directive.restrict = \"A\";\n    directive.scope = {\n      attr: \"=\",\n      filter: \"=\"\n    };\n\n    directive.link = function (scope, element, attr) {\n      scope.$watch('attr', function (n, o, s) {\n        if (n) {\n          n.onChange = function (kpis) {\n            var result = kpis.filter(function (kpi) {\n              for (var i in s.filter) {\n                var find = function (attr, value) {\n                  return kpi[attr] == value;\n                }(i, s.filter[i]);\n\n                if (!find) {\n                  return false;\n                }\n              }\n\n              return true;\n            });\n            render(result);\n          };\n        }\n      });\n\n      function render(data) {\n        $(element).children().remove();\n\n        for (var i in data) {\n          (function (obj) {\n            var option = $(\"<option></option>\");\n            option.text(obj.label);\n            option.attr(\"value\", obj.id);\n            this.append(option);\n          }).call($(element), data[i]);\n        }\n\n        var instance = $(element).selectmenu(\"instance\");\n\n        if (instance) {\n          $(element).selectmenu(\"refresh\");\n        } else {\n          $(element).selectmenu({\n            width: 100,\n            change: function change(event, ui) {\n              scope.attr.attributes.attrId = parseInt(ui.item.value);\n            }\n          });\n        }\n\n        scope.attr.attributes.attrId = data[0].id;\n      }\n\n      ;\n    };\n\n    return directive;\n  }\n\n  directives.initDirective('bootinputfree', bootinputfree_directive);\n  bootinputfree_directive.$inject = ['$timeout', 'variables'];\n\n  function bootinputfree_directive(timeout, variables) {\n    var directive = {};\n    directive.restrict = \"C\";\n    directive.scope = {\n      model: \"=\"\n    };\n\n    directive.link = function (scope, element, attr) {\n      var oldValue = '';\n      timeout(function () {\n        var value = \"\";\n\n        for (var i in scope.model.cols) {\n          if (i == scope.model.cols.length - 1) {\n            value += scope.model.cols[i].col;\n          } else {\n            value += scope.model.cols[i].col + \"-\";\n          }\n        }\n\n        oldValue = value;\n        render(value);\n      });\n\n      function render(value) {\n        var inputDom = $(\"<input />\");\n        inputDom.on(\"blur\", function (event) {\n          scope.$apply(applied);\n\n          function applied() {\n            var arr = $(event.target).val().split(\"-\");\n            var sum = arr.reduce(function (prev, next) {\n              return parseInt(prev) + parseInt(next);\n            });\n\n            if (sum != 12) {\n              $(event.target).val(oldValue);\n              alert(\"输入列数总和要为12！\");\n            } else {\n              oldValue = $(event.target).val();\n              scope.model.cols = arr.map(function (elem) {\n                return {\n                  col: elem\n                };\n              });\n            }\n          }\n        });\n        inputDom.val(value);\n        $(element).children().remove();\n        $(element).append(inputDom);\n      }\n    };\n\n    return directive;\n  }\n\n  directives.initDirective('bootinput', bootinput_directive);\n  bootinput_directive.$inject = ['$timeout', 'variables'];\n\n  function bootinput_directive(timeout, variables) {\n    var directive = {};\n    directive.restrict = \"C\";\n    directive.scope = {\n      model: \"=\"\n    };\n\n    directive.link = function (scope, element, attr) {\n      timeout(function () {\n        render();\n      });\n\n      function render() {\n        var wrapDiv = $(\"<div class='row bootShow'></div>\");\n\n        for (var i in scope.model.cols) {\n          (function (index, col) {\n            var colDiv = $(\"<div class='cwrap col-md-\" + col.col + \"'><div style='margin : 0 4px 0 0;background-color : white; border : 1px solid #bfbfbf;'><div class='inner'></div></div></div>\");\n            var numberInput = $(\"<input class='colNum' />\");\n            numberInput.val(col.col);\n            numberInput.css(\"margin\", \"0px 5px\");\n            colDiv.append(numberInput);\n\n            for (var i = 0; i < col.col; i++) {\n              var unitDiv = $(\"<div class='bwrap' style='width : \" + 100 / col.col + \"%;'><div class='block'></div></div>\");\n              colDiv.find(\".inner\").append(unitDiv);\n            }\n\n            colDiv.find(\".inner\").append($(\"<div style='height : 1px; clear : both; width : 100%;'></div>\"));\n            wrapDiv.append(colDiv);\n            numberInput.on(\"change\", function (event) {\n              scope.$apply(function () {\n                var value = parseInt($(event.target).val());\n\n                if (value < 2) {\n                  value = 2;\n                } else if (value > 12 - scope.model.cols.length + 1) {\n                  value = 12 - scope.model.cols.length + 1;\n                }\n\n                var sum = 0;\n                var parts = 0;\n\n                for (var i in scope.model.cols) {\n                  if (scope.model.cols[i] != col) {\n                    sum += scope.model.cols[i].col;\n                    parts += scope.model.cols[i].col;\n                  } else {\n                    sum += value;\n                  }\n                }\n\n                if (sum <= 12) {\n                  col.col = value;\n                } else {\n                  col.col = 12 - parts;\n                }\n\n                render();\n              });\n            });\n          })(i, scope.model.cols[i]);\n        }\n\n        $(element).children().remove();\n        $(element).append(wrapDiv);\n      }\n    };\n\n    return directive;\n  }\n\n  directives.initDirective('drag', draggable_directive);\n  draggable_directive.$inject = ['$timeout', 'variables'];\n\n  function draggable_directive(timeout, variables) {\n    var directive = {};\n    directive.restrict = \"A\";\n    directive.scope = {\n      dashboard: \"=\"\n    };\n\n    directive.link = function (scope, element, attr) {\n      $(element).draggable({\n        start: function start(event, ui) {\n          dragging = true;\n        },\n        stop: function stop(event, ui) {\n          dragging = false;\n        },\n        handle: $(element).find(\".handler\"),\n        cursor: 'move',\n        appendTo: \"body\",\n        revert: true,\n        helper: function helper(ui) {\n          if (attr.drag == \"layouts\") {\n            var id = $(ui.currentTarget).attr(\"id\");\n            var layout = JSON.parse(JSON.stringify(variables.layouts.filter(function (layout) {\n              return layout.id == id;\n            })[0]));\n            var result = $(\"<div class='helper row'></div>\");\n\n            for (var i in layout.cols) {\n              var col = layout.cols[i];\n              var divDom = $(\"<div class='inner col-md-\" + col.col + \"'></div>\");\n              result.append(divDom);\n            }\n          } else if (attr.drag == \"designViews\") {\n            var result = $(\"<div class='helper row'></div>\").css({\n              height: \"100px\"\n            });\n          } else if (attr.drag == \"totalItems\") {\n            var result = $(\"<div class='helper row'></div>\").css({\n              width: \"200px\",\n              height: \"100px\"\n            });\n          } else if (attr.drag == \"progress\") {\n            var result = $(\"<div class='helper row'></div>\").css({\n              width: \"200px\",\n              height: \"100px\"\n            });\n          } else if (attr.drag == \"downTab\") {\n            var result = $(\"<div class='helper row'></div>\").css({\n              width: \"200px\",\n              height: \"100px\"\n            });\n          } else if (attr.drag == \"attrTab\") {\n            var result = $(\"<div class='helper row'></div>\").css({\n              width: \"200px\",\n              height: \"100px\"\n            });\n          } else if (attr.drag == \"basicline\") {\n            var result = $(\"<div class='helper row'></div>\").css({\n              width: \"200px\",\n              height: \"100px\"\n            });\n          } else if (attr.drag == \"basicpie\") {\n            var result = $(\"<div class='helper row'></div>\").css({\n              width: \"200px\",\n              height: \"100px\"\n            });\n          } else if (attr.drag == \"header\") {\n            var result = $(\"<div class='helper row'></div>\").css({\n              width: \"200px\",\n              height: \"100px\"\n            });\n          } else if (attr.drag == \"listone\") {\n            var result = $(\"<div class='helper row'></div>\").css({\n              width: \"200px\",\n              height: \"100px\"\n            });\n          } else if (attr.drag == \"listtwo\") {\n            var result = $(\"<div class='helper row'></div>\").css({\n              width: \"200px\",\n              height: \"100px\"\n            });\n          } else if (attr.drag == \"map\") {\n            var result = $(\"<div class='helper row'></div>\").css({\n              width: \"200px\",\n              height: \"100px\"\n            });\n          } else if (attr.drag == \"sparkline\") {\n            var result = $(\"<div class='helper row'></div>\").css({\n              width: \"200px\",\n              height: \"100px\"\n            });\n          } else if (attr.drag == \"alertcommon\") {\n            var result = $(\"<div class='helper row'></div>\").css({\n              width: \"200px\",\n              height: \"100px\"\n            });\n          }\n\n          return result;\n        },\n        revertDuration: 0,\n        zIndex: 9999999,\n        connectToSortable: \"#sortable\"\n      });\n    };\n\n    return directive;\n  }\n\n  directives.initDirective('dashboardDrop', droppable_directive);\n  droppable_directive.$inject = [\"$q\", '$timeout', 'variables', 'kpiDataService', 'resourceUIService', 'viewFlexService', \"growl\", \"basicline\", \"basicpie\", \"$location\", \"$window\", \"Info\", \"ticketTaskService\", \"solutionUIService\"];\n\n  function droppable_directive(q, timeout, variables, kpiDataService, resourceUIService, viewFlexService, growl, basicline, basicpie, location, window, Info, ticketTaskService, solutionUIService) {\n    var templates = new $Array(variables.layouts);\n    var directive = {};\n    directive.restrict = \"A\";\n    directive.scope = {\n      dashboard: \"=\"\n    };\n\n    directive.link = function (scope, element, attr) {\n      timeout(function () {\n        variables.dashboardView.then(function success(event) {\n          var beditor;\n          var dashboardView = event.data;\n          var viewId = event.viewId;\n\n          variables.changeView = function (data) {\n            $(element).find(\"#dropBody\").children().remove();\n            beditor = new bootEditor({\n              root: $(element).find(\"#dropBody\"),\n              data: data,\n              dashboard: scope.dashboard\n            });\n          };\n\n          beditor = new bootEditor({\n            root: $(element).find(\"#dropBody\"),\n            data: dashboardView,\n            dashboard: scope.dashboard\n          });\n\n          scope.dashboard.save = function () {\n            var result, param;\n            var solutionId = scope.dashboard.solutionId;\n\n            if (solutionId) {\n              result = beditor.toJSON();\n              solutionUIService.saveManageViewContent(solutionId, JSON.stringify(result), function (event) {\n                if (event.code == 0) {\n                  window.open(\"index.html#/myView\", \"_self\");\n                  growl.success(\"解决方案视图修改成功\", {});\n                } else {\n                  growl.error(\"解决方案视图修改失败\", {});\n                }\n              });\n            } else {\n              result = beditor.toJSON();\n              param = {\n                viewTitle: 'dashboard',\n                viewName: 'dashboard',\n                viewType: \"dashboard\",\n                content: JSON.stringify(result)\n              };\n              viewFlexService.saveManageDashboard(param, function (event) {\n                if (event.code == 0) {\n                  window.open(\"index.html\", \"_self\");\n                  growl.success(\"视图首页修改成功\", {});\n                } else {\n                  growl.error(\"视图首页修改失败\", {});\n                }\n              });\n            }\n          };\n\n          scope.dashboard.delete = function () {\n            viewFlexService.deleteViews([viewId], function (event) {\n              viewId = undefined;\n              window.open(\"index.html\", \"_self\");\n            });\n          };\n        }, function error(err) {//growl.addErrorMessage(err);\n        });\n      }, 100);\n    };\n\n    function bootEditor(object) {\n      var cur = this;\n      var structure;\n      var dashboard = object.dashboard;\n      dashboard.on(\"switchMode\", function () {\n        timeout(function () {\n          cur.resize();\n        }, 100);\n      });\n      $(window).on(\"resize\", function () {\n        timeout(function () {\n          cur.resize();\n        }, 100);\n      });\n\n      cur.toJSON = function () {\n        return structure.toJSON();\n      };\n\n      cur.resize = function () {\n        structure.each(function (element) {\n          if (element.type == \"designView\" || element.type == \"basicline\" || element.type == \"basicpie\") {\n            for (var i in element.echarts) {\n              element.echarts[i].echart(\"option\", \"resize\");\n            }\n          }\n        });\n      };\n\n      var dragconfig = {\n        cursorAt: {\n          top: 0,\n          left: 450\n        },\n        start: function start(event, ui) {\n          $(event.target).css(\"display\", \"none\");\n          dragging = true;\n        },\n        stop: function stop(event, ui) {\n          $(event.target).css(\"display\", \"block\");\n          dragging = false;\n        },\n        appendTo: \"body\",\n        revertDuration: 0,\n        cursor: 'move',\n        revert: true,\n        zIndex: 9999,\n        opacity: .5,\n        helper: function helper(ui) {\n          var clone = $(ui.currentTarget).clone();\n          var find = clone.find('.box-body');\n          var wrap = $(\"<div class='help_wrap row'></div>\");\n\n          if (find.size() > 0) {\n            find.children(\".innerContent\").children().each(function (index, element) {\n              var cl = $(element).clone();\n              cl.children().remove();\n\n              if (cl.filter(\"[class*=col-]\").size() == 0) {\n                cl.addClass(\"column col-md-12\");\n              }\n\n              wrap.append(cl);\n            });\n          } else {\n            clone.children(\".innerContent\").children().each(function (index, element) {\n              var cl = $(element).clone();\n              cl.children().remove();\n\n              if (cl.filter(\"[class*=col-]\").size() == 0) {\n                cl.addClass(\"column col-md-12\");\n              }\n\n              wrap.append(cl);\n            });\n          }\n\n          wrap.css({\n            'pointer-events': 'none'\n          });\n          return wrap;\n        }\n      };\n      var mouseEvent = {\n        mouseover: function mouseover(event, ui) {\n          if (dragging) {\n            var target = $(event.target);\n            target.addClass(\"drophover\");\n          }\n        },\n        mouseout: function mouseout(event, ui) {\n          if (dragging) {\n            var target = $(event.target);\n            target.removeClass(\"drophover\");\n          }\n        }\n      };\n      var dropconfig = {\n        tolerance: 'pointer',\n        drop: function drop(event, ui) {\n          var rowWrap, rowInput;\n          var variable = {};\n          var draggable = $(ui.draggable);\n          var dragId = draggable.attr(\"id\");\n          var target = $(event.target);\n\n          if (draggable.filter(\"[drag]\").size() > 0) {\n            var type = draggable.attr(\"drag\");\n            rowWrap = $(\"<div id='\" + $randomString(32) + \"' class='row rowWrap'></div>\");\n            variable = JSON.parse(JSON.stringify(variables[type].filter(function (variable) {\n              return variable.id == dragId;\n            })[0]));\n            variable.target = rowWrap;\n          } else {\n            structure.eachRow(function (element) {\n              var domId = $(element.target).attr(\"id\");\n\n              if (dragId == domId) {\n                structure.remove(element);\n                variable = element;\n              }\n            });\n            rowWrap = variable.target;\n          }\n\n          if (target.hasClass(\"insert_before\")) {\n            var add;\n            var colId, rowId;\n\n            if (target.parent().hasClass(\"box-body\")) {\n              colId = target.parent().parent().parent().parent().attr(\"id\");\n              rowId = target.parent().parent().parent().attr(\"id\");\n            } else {\n              colId = target.parent().parent().attr(\"id\");\n              rowId = target.parent().attr(\"id\");\n            }\n\n            structure.eachCol(function (element) {\n              var domId = $(element.target).attr(\"id\");\n\n              if (colId == domId) {\n                add = element;\n              }\n            });\n\n            if (add.rows) {\n              var temp = [];\n\n              for (var i in add.rows) {\n                if (rowId == add.rows[i].target.attr(\"id\")) {\n                  temp.push(variable);\n                }\n\n                temp.push(add.rows[i]);\n              }\n\n              add.rows = temp;\n            }\n\n            if (colId == \"dropBody\") {\n              var box = $(\"<div class='box box-info'>\");\n              var boxHeader = $('<div class=\"box-header with-border\">\\\n                                <h3 class=\"box-title\" id=\"boxTitle\"></h3>\\\n                            </div>');\n              rowInput = $(\"<div class='box-body'></div>\");\n              rowWrap.children().remove();\n              rowWrap.append(box);\n              box.append(boxHeader);\n              box.append(rowInput);\n            } else {\n              var find = rowWrap.find('.box-body');\n\n              if (find.size() > 0) {\n                //var children = find.children();\n                rowWrap.find('.box').remove(); //rowWrap.append(children);\n              }\n\n              rowWrap.children().remove();\n              rowInput = rowWrap;\n            }\n\n            if (target.parent().hasClass(\"box-body\")) {\n              target.parent().parent().parent().before(rowWrap);\n            } else {\n              target.parent().before(rowWrap);\n            }\n          } else if (target.hasClass(\"insert_after\")) {\n            var add, colId;\n\n            if (target.parent().hasClass(\"box-body\")) {\n              colId = target.parent().parent().parent().attr(\"id\");\n            } else {\n              colId = target.parent().attr(\"id\");\n            }\n\n            structure.eachCol(function (element) {\n              var domId = $(element.target).attr(\"id\");\n\n              if (colId == domId) {\n                add = element;\n              }\n            });\n\n            if (add.rows) {\n              add.rows.push(variable);\n            } else {\n              add.rows = [variable];\n            }\n\n            if (colId == \"dropBody\") {\n              var box = $(\"<div class='box'>\");\n              var boxHeader = $('<div class=\"box-header with-border\">\\\n                                <h3 class=\"box-title\" id=\"boxTitle\"></h3>\\\n                            </div>');\n              rowInput = $(\"<div class='box-body'></div>\");\n              rowWrap.append(box);\n              box.append(boxHeader);\n              box.append(rowInput);\n              var find = rowWrap.find('.box-body');\n\n              if (find.size() > 0) {\n                var children = find.children();\n                rowWrap.find('.box').remove();\n                rowWrap.append(children);\n                rowWrap.children().remove();\n                rowWrap.append(box);\n              } else {\n                rowInput.append(rowWrap.children());\n              }\n            } else {\n              var find = rowWrap.find('.box-body');\n\n              if (find.size() > 0) {\n                //var children = find.children();\n                rowWrap.find('.box').remove(); //rowWrap.append(children);\n              }\n\n              rowWrap.children().remove();\n              rowInput = rowWrap;\n            }\n\n            if (target.parent().hasClass(\"box-body\")) {\n              target.parent().parent().before(rowWrap);\n            } else {\n              target.before(rowWrap);\n            }\n          }\n\n          target.removeClass(\"drophover\");\n          traverse(rowInput, variable);\n          timeout(function () {\n            cur.resize();\n          }, 100);\n\n          if ($(\"#dropBody\").children(\".rowWrap\").size() == 0) {\n            $(\"#dropBody\").children(\".insert_after\").css(\"height\", \"500px\");\n          }\n        }\n      };\n      init(object);\n\n      function init(object) {\n        structure = new $tree(JSON.parse(JSON.stringify(object.data)));\n        var insertAfter = $(\"<div class='insert_after'></div>\");\n        structure.getData().target = object.root;\n\n        for (var i in structure.getData().rows) {\n          var row = structure.getData().rows[i];\n          var rowWrap = $(\"<div id='\" + $randomString(32) + \"' class='row rowWrap'></div>\");\n          var box = $(\"<div class='box'></div>\");\n          var boxHeader = $('<div class=\"box-header with-border\">\\\n                        <h3 id=\"boxTitle\" class=\"box-title\"></h3>\\\n                    </div>');\n          var boxBody = $(\"<div class='box-body'></div>\");\n          row.target = rowWrap;\n          rowWrap.append(box);\n          box.append(boxHeader);\n          box.append(boxBody);\n          structure.getData().target.append(rowWrap);\n          traverse(boxBody, row);\n        }\n\n        structure.getData().target.append(insertAfter);\n        insertAfter.droppable(dropconfig);\n        insertAfter.on(mouseEvent);\n      }\n\n      ;\n\n      function traverse(target, row) {\n        var inputTitle = $(\"<div class='titleWrap'><lable>表标题</lable><input id='btitle'/></div>\");\n        var toolbar = $(\"<div class='toolbar'></div>\");\n        var moveBtn = $(\"<div class='moveBtn'><span class='proudsmart ps-move'></span></div>\");\n        var deleteBtn = $(\"<div class='deleteBtn'><span class='proudsmart ps-delete'></span></div>\");\n        var insertBefore = $(\"<div class='insert_before'></div>\");\n        var innerContent = $(\"<div class='row innerContent'></div>\");\n        var innerWrap = $(\"<div class='innerWrap'></div>\");\n\n        if (target.hasClass(\"box-body\")) {\n          var checkbox = $(\"<div class='showOutter'><input type='checkbox'/><label>显示外框</label></div>\");\n          toolbar.append(inputTitle).append(deleteBtn).append(moveBtn).append(checkbox);\n\n          if (row.show != false) {\n            row.show = true;\n            checkbox.find(\"input\").prop(\"checked\", \"checked\");\n            target.parent().parent().removeClass(\"hideWrap\");\n          } else {\n            row.show = false;\n            checkbox.find(\"input\").removeAttr(\"checked\");\n            target.parent().parent().addClass(\"hideWrap\");\n          }\n\n          checkbox.find(\"input\").on(\"click\", function (event) {\n            if ($(this).prop(\"checked\")) {\n              row.show = true;\n              target.parent().parent().removeClass(\"hideWrap\");\n            } else {\n              row.show = false;\n              target.parent().parent().addClass(\"hideWrap\");\n            }\n          });\n\n          if (row.title) {\n            inputTitle.find(\"#btitle\").val(row.title);\n            var boxTitle = target.parent().find('#boxTitle');\n            boxTitle.text(row.title);\n          }\n\n          inputTitle.find(\"#btitle\").on(\"change\", function (event) {\n            var object = $(event.target);\n            var boxTitle = target.parent().find('#boxTitle');\n            boxTitle.text(object.val());\n            row.title = object.val();\n          });\n        } else {\n          delete row.show;\n          toolbar.append(deleteBtn).append(moveBtn);\n        }\n\n        ;\n        target.append(insertBefore).append(toolbar).append(innerContent);\n\n        if (row.type == 'layout') {\n          var cols = row.cols;\n\n          for (var i in cols) {\n            var column = $(\"<div id='col_\" + $randomString(32) + \"' class='column col-md-\" + cols[i].col + \"'></div>\");\n            var insertAfter = $(\"<div class='insert_after'></div>\");\n            var col = cols[i];\n            col.target = column;\n\n            for (var j in col.rows) {\n              var rowWrap = $(\"<div id='\" + $randomString(32) + \"' class='row rowWrap'></div>\");\n              column.append(rowWrap);\n              var inrow = col.rows[j];\n              inrow.target = rowWrap;\n              traverse(rowWrap, inrow);\n            }\n\n            column.append(insertAfter);\n            innerContent.append(column);\n            insertAfter.droppable(dropconfig);\n            insertAfter.on(mouseEvent);\n          }\n        } else if (row.type == 'designView') {\n          innerContent.append(innerWrap);\n          var dv = designView(innerWrap, row);\n        } else if (row.type == 'totalItems') {\n          innerContent.append(innerWrap);\n          var dv = totalItems(innerWrap, row);\n        } else if (row.type == 'progress') {\n          innerContent.append(innerWrap);\n          var dv = progress(innerWrap, row);\n        } else if (row.type == 'downTab') {\n          innerContent.append(innerWrap);\n          var dv = downTab(innerWrap, row);\n        } else if (row.type == 'attrTab') {\n          innerContent.append(innerWrap);\n          var dv = attrTab(innerWrap, row);\n        } else if (row.type == 'header') {\n          innerContent.append(innerWrap);\n          var dv = header(innerWrap, row);\n        } else if (row.type == 'basicline') {\n          innerContent.append(innerWrap);\n          row.content = basicline.getOption();\n          row.content.elements[0].nodes = row.attributes.nodes;\n          row.content.elements[0].kpis = row.attributes.kpis;\n          var dv = designView(innerWrap, row);\n        } else if (row.type == 'basicpie') {\n          innerContent.append(innerWrap);\n          row.content = basicpie.getOption();\n          row.content.elements[0].nodes = row.attributes.nodes;\n          row.content.elements[0].kpis = row.attributes.kpis;\n          var dv = designView(innerWrap, row);\n        } else if (row.type == 'listone') {\n          innerContent.append(innerWrap);\n          var dv = listone(innerWrap, row);\n        } else if (row.type == 'listtwo') {\n          innerContent.append(innerWrap);\n          var dv = listtwo(innerWrap, row);\n        } else if (row.type == 'map') {\n          innerContent.append(innerWrap);\n          var dv = map(innerWrap, row);\n        } else if (row.type == 'sparkline') {\n          innerContent.append(innerWrap);\n          var dv = sparkline(innerWrap, row);\n        } else if (row.type == 'alertcommon') {\n          innerContent.append(innerWrap);\n          row.content = basicpie.getOption();\n          var dv = designView(innerWrap, row);\n        }\n\n        if (target.hasClass(\"box-body\")) {\n          target.parent().parent().draggable(dragconfig);\n          target.parent().parent().draggable(\"option\", \"handle\", moveBtn);\n          target.parent().parent().draggable(\"option\", \"handle\", moveBtn);\n        } else {\n          target.draggable(dragconfig);\n          target.draggable(\"option\", \"handle\", moveBtn);\n          target.draggable(\"option\", \"handle\", moveBtn);\n        }\n\n        insertBefore.droppable(dropconfig);\n        insertBefore.on(mouseEvent);\n\n        if (target.hasClass(\"box-body\")) {\n          (function (target) {\n            target.on(\"mouseover\", function (event) {\n              event.stopPropagation();\n              $(document).find('.boot-mouseOver').removeClass('boot-mouseOver');\n              $(event.currentTarget).addClass('boot-mouseOver');\n            });\n          })(target.parent().parent());\n        } else {\n          (function (target) {\n            target.on(\"mouseover\", function (event) {\n              event.stopPropagation();\n              $(document).find('.boot-mouseOver').removeClass('boot-mouseOver');\n              $(event.currentTarget).addClass('boot-mouseOver');\n            });\n          })(target);\n        }\n\n        deleteBtn.on(\"click\", function (event) {\n          var removed;\n          event.stopPropagation();\n\n          if ($(event.target).parent().parent().parent().hasClass('box-body')) {\n            var id = $(event.currentTarget).parent().parent().parent().parent().attr(\"id\");\n            structure.each(function (element) {\n              if (element.target.attr(\"id\") == id) {\n                removed = element;\n              }\n            });\n            structure.remove(removed);\n            target.parent().parent().remove();\n          } else {\n            // \n            var id = $(event.currentTarget).parent().parent().attr(\"id\");\n            structure.each(function (element) {\n              if (element.target.attr(\"id\") == id) {\n                removed = element;\n              }\n            });\n            structure.remove(removed);\n            target.remove();\n          }\n\n          if ($(\"#dropBody\").children(\".rowWrap\").size() == 0) {\n            $(\"#dropBody\").children(\".insert_after\").css(\"height\", \"500px\");\n          }\n        });\n      }\n\n      ;\n\n      function $tree(param) {\n        var cur = this;\n        var data = param;\n\n        cur.getData = function () {\n          return data;\n        };\n\n        cur.toJSON = function () {\n          var clone = {\n            rows: []\n          };\n\n          for (var i in data.rows) {\n            var row = data.rows[i];\n            var emptyRow = {};\n            emptyRow.type = row.type;\n            emptyRow.show = row.show;\n            emptyRow.title = row.title;\n\n            if (row.type == \"designView\") {\n              emptyRow.content = row.content;\n            } else if (row.type == \"totalItems\") {\n              emptyRow.attributes = row.attributes;\n            } else if (row.type == \"progress\") {\n              emptyRow.attributes = row.attributes;\n            } else if (row.type == \"downTab\") {\n              emptyRow.attributes = row.attributes;\n            } else if (row.type == \"attrTab\") {\n              emptyRow.attributes = row.attributes;\n            } else if (row.type == 'basicline') {\n              emptyRow.attributes = row.attributes;\n              emptyRow.content = row.content;\n            } else if (row.type == 'basicpie') {\n              emptyRow.attributes = row.attributes;\n              emptyRow.content = row.content;\n            } else if (row.type == \"header\") {\n              emptyRow.attributes = row.attributes;\n            } else if (row.type == \"listone\") {\n              emptyRow.attributes = row.attributes;\n            } else if (row.type == \"listtwo\") {\n              emptyRow.attributes = row.attributes;\n            } else if (row.type == 'map') {\n              emptyRow.attributes = row.attributes;\n            } else if (row.type == 'sparkline') {\n              emptyRow.attributes = row.attributes;\n            } else if (row.type == 'alertcommon') {\n              emptyRow.attributes = row.attributes;\n            }\n\n            clone.rows.push(emptyRow);\n            traverse(row, emptyRow);\n          }\n\n          function traverse(obj, emptyRow) {\n            if (obj.cols != undefined) {\n              for (var i in obj.cols) {\n                (function (col) {\n                  var emptyCol = {\n                    col: col.col\n                  };\n\n                  if (emptyRow.cols) {\n                    emptyRow.cols.push(emptyCol);\n                  } else {\n                    emptyRow.cols = [emptyCol];\n                  }\n\n                  for (var j in col.rows) {\n                    (function (row) {\n                      var eRow = {};\n                      eRow.type = row.type;\n                      emptyCol.type = row.type;\n\n                      if (row.type == \"designView\") {\n                        eRow.content = row.content;\n                      } else if (row.type == \"totalItems\") {\n                        eRow.attributes = row.attributes;\n                      } else if (row.type == \"progress\") {\n                        eRow.attributes = row.attributes;\n                      } else if (row.type == \"downTab\") {\n                        eRow.attributes = row.attributes;\n                      } else if (row.type == \"attrTab\") {\n                        eRow.attributes = row.attributes;\n                      } else if (row.type == 'basicline') {\n                        eRow.attributes = row.attributes;\n                        eRow.content = row.content;\n                      } else if (row.type == 'basicpie') {\n                        eRow.attributes = row.attributes;\n                        eRow.content = row.content;\n                      } else if (row.type == \"header\") {\n                        eRow.attributes = row.attributes;\n                      } else if (row.type == \"listone\") {\n                        eRow.attributes = row.attributes;\n                      } else if (row.type == \"listtwo\") {\n                        eRow.attributes = row.attributes;\n                      } else if (row.type == \"map\") {\n                        eRow.attributes = row.attributes;\n                      } else if (row.type == \"sparkline\") {\n                        eRow.attributes = row.attributes;\n                      } else if (row.type == 'alertcommon') {\n                        eRow.attributes = row.attributes;\n                      }\n\n                      if (emptyCol.rows) {\n                        emptyCol.rows.push(eRow);\n                      } else {\n                        emptyCol.rows = [eRow];\n                      }\n\n                      traverse(row, eRow);\n                    })(col.rows[j]);\n                  }\n                })(obj.cols[i]);\n              }\n            }\n          }\n\n          return clone;\n        };\n\n        cur.each = function (callback) {\n          for (var i in data.rows) {\n            var row = data.rows[i];\n            traverse(row);\n            callback(row);\n          }\n\n          function traverse(row) {\n            for (var i in row.cols) {\n              var col = row.cols[i];\n              callback(col);\n\n              for (var j in col.rows) {\n                traverse(col.rows[j]);\n                callback(col.rows[j]);\n              }\n            }\n          }\n        };\n\n        cur.remove = function (removed) {\n          var temp = [];\n\n          for (var i in data.rows) {\n            var row = data.rows[i];\n\n            if (removed != row) {\n              temp.push(row);\n              traverse(row);\n            } else {}\n          }\n\n          data.rows = temp;\n\n          if (temp.length > 0) {\n            data.rows = temp;\n          } else {\n            delete data.rows;\n          }\n\n          function traverse(row) {\n            for (var i in row.cols) {\n              var col = row.cols[i];\n              var temp = [];\n\n              for (var j in col.rows) {\n                if ($(removed.target).attr(\"id\") != $(col.rows[j].target).attr(\"id\")) {\n                  temp.push(col.rows[j]);\n                  traverse(col.rows[j]);\n                } else {}\n              }\n\n              if (temp.length > 0) {\n                col.rows = temp;\n              } else {\n                delete col.rows;\n              }\n            }\n          }\n        };\n\n        cur.eachRow = function (callback) {\n          for (var i in data.rows) {\n            (function (row) {\n              if (row) {\n                traverse(row);\n                callback(row);\n              }\n            })(data.rows[i]);\n          }\n\n          function traverse(row) {\n            for (var i in row.cols) {\n              (function (col) {\n                for (var j in col.rows) {\n                  (function (row) {\n                    if (row) {\n                      traverse(row);\n                      callback(row);\n                    }\n                  })(col.rows[j]);\n                }\n              })(row.cols[i]);\n            }\n          }\n        };\n\n        cur.eachCol = function (callback) {\n          callback(data);\n\n          for (var i in data.rows) {\n            var row = data.rows[i];\n            traverse(row);\n          }\n\n          function traverse(row) {\n            for (var i in row.cols) {\n              var col = row.cols[i];\n              callback(col);\n\n              for (var j in col.rows) {\n                traverse(col.rows[j]);\n              }\n            }\n          }\n        };\n      }\n\n      function designView(target, mydata) {\n        var elements, layouts, dom;\n        mydata.echarts = [];\n        dom = $(\"<div class='designView'></div>\");\n        elements = mydata.content.elements;\n        layouts = [];\n        target.append(dom);\n\n        (function (renderlayout) {\n          var deferreds = [];\n\n          for (var i in elements) {\n            var kpiResDefer = [];\n            var deferred = q.defer();\n            deferreds.push(deferred.promise);\n            var layouts = [],\n                layout;\n            var category = elements[i].category;\n            var dataType = elements[i].dataType;\n            var option = elements[i].option;\n            var formatStr = elements[i].formatStr;\n\n            if (elements[i].layout) {\n              var col = elements[i].layout.col;\n              var row = elements[i].layout.row;\n            } else {\n              var col = 0;\n              var row = i;\n              elements[i].layout = {\n                width: 100,\n                col: 0,\n                row: i\n              };\n            }\n\n            if (!layouts[row]) {\n              layouts[row] = [];\n            }\n\n            layout = layouts[row][col] = {\n              kpis: elements[i].kpis,\n              nodes: elements[i].nodes,\n              layout: elements[i].layout,\n              option: elements[i].option\n            };\n            var kpisDes, nodesDes, minTimespan, nodes;\n            variables.$rootDomain.get().then(function (data) {\n              var kpiQueryModel, param;\n              nodes = [data.id];\n\n              if (mydata.attributes.type != 'alert') {\n                kpiQueryModel = {\n                  category: category,\n                  isRealTimeData: true,\n                  timePeriod: category == \"time\" ? elements[i].timespan : 0,\n                  nodeIds: nodes\n                  /*elements[i].nodes*/\n                  ,\n                  kpiCodes: elements[i].kpis,\n                  startTime: null,\n                  endTime: null,\n                  timeRange: \"\",\n                  statisticType: \"psiot\",\n                  condList: []\n                };\n                param = [\"kpi\", kpiQueryModel];\n                var def1 = q.defer();\n                var def2 = q.defer();\n                kpiResDefer.push(def1.promise);\n                variables.$kpis.getBymodelId(data.modelId).then(function success(data) {\n                  kpisDes = data.reduce(function (prev, next) {\n                    var find = elements[i].kpis.some(function (elem) {\n                      return elem == next.id;\n                    });\n\n                    if (find) {\n                      prev[next.id] = next;\n                    }\n\n                    return prev;\n                  }, {});\n                  def1.resolve(\"success\");\n                }, function error(err) {});\n                nodesDes = {};\n                nodesDes[data.id] = data;\n                q.all(kpiResDefer).then(function () {\n                  kpiDataService.getValueList(param, function (event) {\n                    var valueList = new $Array(event.data);\n\n                    var vlistGroup = function () {\n                      var result = new $Array([]);\n\n                      for (var i in kpisDes) {\n                        for (var j in nodesDes) {\n                          result.push({\n                            nodeId: j,\n                            nodeDes: nodesDes[j],\n                            kpiId: i,\n                            kpiDes: kpisDes[i],\n                            valueList: []\n                          });\n                        }\n                      }\n\n                      return result;\n                    }(kpisDes, nodesDes);\n\n                    if (category == \"time\") {\n                      vlistGroup.each(function (vg) {\n                        for (var i = 0; i < 7; i++) {\n                          var date = new Date(new Date().getTime() - (7 - i) * 24 * 3600 * 1000);\n                          var year = date.getYear();\n                          var month = date.getMonth();\n                          var dt = date.getDate();\n                          var find = valueList.values().find(function (element) {\n                            return function (year, month, date) {\n                              var cur = this;\n                              return cur.getYear() == year && cur.getMonth() == month && cur.getDate() == date && vg.kpiId == element.kpiCode;\n                            }.call(new Date(element.arisingTime.split(\"T\")[0].replace(/-/g, \"/\")), year, month, dt);\n                          });\n                          vg.valueList.push({\n                            kpiCode: vg.kpiId,\n                            value: find ? find.value : undefined,\n                            timeStamp: date.getTime()\n                          });\n                        }\n\n                        ;\n                      });\n                    } else {\n                      vlistGroup.each(function (vg) {\n                        var date = new Date();\n                        var find = valueList.values().find(function (element) {\n                          return vg.kpiId == element.kpiCode;\n                        });\n\n                        if (find) {\n                          vg.valueList.push({\n                            kpiCode: vg.kpiId,\n                            value: find.value,\n                            timeStamp: date.getTime()\n                          });\n                        } else {\n                          vg.valueList.push({\n                            kpiCode: vg.kpiId,\n                            value: 0,\n                            timeStamp: date.getTime()\n                          });\n                        }\n                      });\n                    }\n\n                    var optionFormat = dataType.category[category];\n                    var vlGroup = new $valueListGroup(vlistGroup, 1, formatStr);\n                    var op = new $option(option);\n                    var xAxis, legend;\n\n                    if (category == \"time\") {\n                      if (optionFormat.series) {\n                        if (optionFormat.series.model == \"linear\") {\n                          op.clearSeries();\n                          legend = vlGroup.getLegend();\n                          xAxis = vlGroup.getxAxisByTime();\n                          vlGroup.eachValueListMerged(function (vg) {\n                            var name = vg.nodeDes.label + \"-\" + vg.kpiDes.label;\n                            var data = vg.$valueList;\n                            op.pushSeries(name, data);\n                          });\n                        } else if (optionFormat.series.model == \"dimensional\") {\n                          if (optionFormat.series.value = \"ci\") {} else if (optionFormat.series.value = \"kpi\") {}\n                        }\n                      }\n                    } else if (category == \"ci\") {\n                      if (optionFormat.series) {\n                        if (optionFormat.series.model == \"linear\") {\n                          var series = [];\n                          legend = vlGroup.getLegend();\n                          xAxis = [];\n                          var first = op.firstSeries();\n                          vlGroup.eachValueListMerged(function (vg) {\n                            var name = vg.nodeDes.label + \"-\" + vg.kpiDes.label;\n                            var data = vg.valueList;\n                            series.push({\n                              name: name,\n                              value: data[0].value\n                            });\n                          });\n                          first.data = series;\n                        } else if (optionFormat.series.model == \"dimensional\") {\n                          if (optionFormat.series.value = \"ci\") {} else if (optionFormat.series.value = \"kpi\") {}\n                        }\n                      }\n                    }\n\n                    if (optionFormat.xAxis) {\n                      op.setFirstxAxis(xAxis);\n                    }\n\n                    if (optionFormat.legend) {\n                      op.setLegend(legend);\n                    }\n\n                    layout.option = op.getOption();\n\n                    if (mydata.attributes.color) {\n                      layout.option.series[0].itemStyle = {\n                        normal: {\n                          color: mydata.attributes.color\n                        }\n                      };\n                      layout.option.series[0].lineStyle = {\n                        normal: {\n                          color: mydata.attributes.color\n                        }\n                      };\n                      layout.option.series[0].areaStyle = {\n                        normal: {\n                          color: mydata.attributes.color\n                        }\n                      };\n                      layout.option.series[0].markPoint = {};\n                      layout.option.series[0].markLine = {};\n                    }\n\n                    layout.option.animation = true;\n                    deferred.resolve(\"success\");\n                  });\n                });\n              } else {\n                var kpiQueryModel = {\n                  category: 'ci',\n                  isRealTimeData: true,\n                  timePeriod: 0,\n                  kpiCodes: [\"alert_code_count\"]\n                };\n                param = [\"alert\", kpiQueryModel];\n                kpiDataService.getKpiHierarchyValueList(param, function (event) {\n                  if (event.code == '0') {\n                    var ul = $('<ul class=\"nav nav-pills nav-stacked\"></ul>');\n\n                    if (event.data.recordList instanceof Array) {\n                      var op = new $option(option),\n                          data = [];\n                      op.clearSeries();\n\n                      for (var i in event.data.recordList) {\n                        data.push({\n                          name: event.data.recordList[i].category,\n                          value: event.data.recordList[i].alert_code_count\n                        });\n                        var li = $('<li>\\\n                                                    <a>' + event.data.recordList[i].category + ' <span class=\"pull-right text-red ng-binding\">' + event.data.recordList[i].alert_code_count + '条</span></a>\\\n                                                </li>');\n                        ul.append(li);\n                      }\n\n                      dom.after(ul);\n                      op.pushSeries('常见告警类型', data);\n                      layout.option = op.getOption();\n                      layout.option.animation = true;\n                      deferred.resolve(\"success\");\n                    }\n                  }\n                });\n              }\n            });\n          }\n\n          q.all(deferreds).then(function (event) {\n            renderlayout(layouts);\n          });\n        })(renderlayout);\n\n        function renderlayout(layouts) {\n          for (var i in layouts) {\n            var row = $(\"<div class='rowCls'></div>\");\n            dom.append(row);\n\n            for (var j in layouts[i]) {\n              var col = $(\"<div class='colCls'></div>\");\n              var width = layouts[i][j].layout.width;\n              row.append(col);\n              col.css(\"width\", width + \"%\");\n              var height = target.width() * .6; //var height = target.width() * layouts[i][j].layout.widthheightPortion;\n\n              col.css(\"height\", 300 + \"px\");\n              col.echart({\n                option: layouts[i][j].option\n              });\n              layouts[i][j].target = col;\n              mydata.echarts.push(col);\n            }\n          }\n        }\n\n        return dom;\n      }\n\n      function totalItems(target, mydata) {\n        if (mydata.attributes) {\n          var resource;\n          var currentKpi;\n          var kpiId = mydata.attributes.kpi;\n          var nodeId = mydata.attributes.ci;\n          var innerContent = $(\"<div class='small-box \" + mydata.attributes.color + \"'></div>\");\n          var inner = $(\"<div class='inner' style='cursor : pointer;'></div>\");\n          var number = $(\"<h3><span id='text'></span><span id='unit' style='font-size: 20px'></span></h3>\");\n          var title = $(\"<p id='title'></p>\");\n          var icon;\n\n          if (mydata.attributes.icon.indexOf('fa') == -1) {\n            icon = $(\"<div class='icon'><i class='proudsmart \" + mydata.attributes.icon + \"' style='font-size : 70px;'></i></div>\");\n          } else {\n            icon = $(\"<div class='icon'><i class='\" + mydata.attributes.icon + \"' style='font-size : 70px;'></i></div>\");\n          }\n\n          inner.append(number);\n          inner.append(title);\n          innerContent.append(inner);\n          innerContent.append(icon);\n          target.append(innerContent);\n          resourceUIService.getResourceById([nodeId], function (event) {\n            if (event.code == '0') {\n              if (event.data == null) {\n                variables.$rootDomain.get().then(function (data) {\n                  resource = data;\n                  var modelId = resource.modelId;\n                  getDataByModelId(modelId);\n                });\n              } else {\n                var modelId = event.data.modelId;\n                getDataByModelId(modelId);\n              }\n            }\n          });\n          variables.getValueByRootKpi(kpiId).then(function (value) {\n            number.find(\"span#text\").text(value);\n          });\n        }\n\n        function getDataByModelId(modelId) {\n          variables.$kpis.getBymodelId(modelId).then(function success(data) {\n            currentKpi = data.find(function (elem) {\n              return elem.id == kpiId;\n            });\n            var unit = currentKpi.unit;\n            title.text(currentKpi.label);\n            innerContent.on(\"click\", function () {\n              if (currentKpi.label == '管控设备数') {\n                window.location.href = \"../app-oc/index.html#/resource\";\n              } else if (currentKpi.label == '数据采集点') {\n                window.location.href = \"../app-oc/index.html#/emcsView\";\n              } else if (currentKpi.label == '待处理工单数') {\n                window.location.href = \"../app-oc/index.html#/workorder\";\n              } else if (currentKpi.label == '待处理告警数') {\n                window.location.href = \"../app-oc/index.html#/configAlertByStatus\";\n              } else if (currentKpi.label == '待处理紧急告警数') {\n                window.location.href = \"../app-oc/index.html#/configAlert\";\n              } else if (currentKpi.label == '日开机总时长') {\n                window.location.href = \"../app-oc/index.html#/emcsView\";\n              } else if (currentKpi.label == '当日总产量') {\n                window.location.href = \"../app-oc/index.html#/emcsView\";\n              } else if (currentKpi.label == '生产任务') {\n                window.location.href = \"../app-oc/index.html#/emcsView\";\n              } else {\n                window.location.href = \"../app-oc/index.html#/emcsView\";\n              }\n            });\n            variables.$units.get().then(function success(units) {\n              var find = units.filter(function (elem) {\n                return elem.unitCode == unit;\n              });\n\n              if (find[0]) {\n                if (find[0].unitCode == \"Amount\") {\n                  if (data[0].label == '数据采集点') {\n                    number.find(\"span#unit\").text(\"台\");\n                  } else {\n                    number.find(\"span#unit\").text(\"个\");\n                  }\n                } else {\n                  number.find(\"span#unit\").text(find[0].unitName);\n                }\n              }\n            }, function error(err) {\n              growl.addErrorMessage(err);\n            });\n          });\n        }\n      }\n\n      function header(target, mydata) {\n        if (mydata.attributes) {\n          var text = mydata.attributes.text;\n          var header = $(\"<h4 class='visibleWhenView'></h4>\");\n          var inputDom = $(\"<div class='hideWhenView'><label>标题名称：</label><input class='form-control'/></div>\");\n          inputDom.css({\n            \"margin\": \"30px\"\n          });\n          header.css({\n            \"margin\": \"5px\"\n          });\n          target.append(header).append(inputDom);\n\n          if (mydata.attributes.text) {\n            header.text(mydata.attributes.text);\n            inputDom.find(\"input\").val(mydata.attributes.text);\n          }\n\n          inputDom.find(\"input\").on('change', function (event) {\n            var value = $(event.target).val();\n            mydata.attributes.text = value;\n            header.text(value);\n          });\n        }\n      }\n\n      function attrTab(target, mydata) {\n        if (mydata.attributes) {\n          var attrId = mydata.attributes.attrId;\n          var nodeId = mydata.attributes.ci;\n          var innerContent = $(\"<div class='small-box \" + mydata.attributes.color + \"'></div>\");\n          var inner = $(\"<div class='inner' style='cursor : pointer;'></div>\");\n          var number = $(\"<h3><span id='text'></span><span id='unit' style='font-size: 20px'></span></h3>\");\n          var title = $(\"<p id='title'></p>\");\n          var icon = $(\"<div class='icon'><i class='proudsmart \" + mydata.attributes.icon + \"'></i></div>\");\n          inner.append(number);\n          inner.append(title);\n          innerContent.append(inner);\n          innerContent.append(icon);\n          target.append(innerContent);\n          variables.$resources.getAttrByNodeId(nodeId).then(function success(data) {\n            var result = data.filter(function (element) {\n              return element.id == attrId;\n            });\n\n            if (result.length > 0) {\n              number.find(\"span#text\").text(result[0].label);\n              number.find(\"span#unit\").text(result[0].value);\n              title.text(result[0].name);\n            }\n          }, function error(err) {});\n        }\n      }\n\n      function sparkline(target, mydata) {\n        var currentKpi, resource, kpiDefs;\n\n        if (mydata.attributes) {\n          if (mydata.kpiObjects) {\n            mydata.attributes.kpis = [];\n\n            for (var i in mydata.kpiObjects) {\n              mydata.attributes.kpis.push(mydata.kpiObjects[i].id);\n            }\n          }\n        }\n\n        var outer = $('<div class=\"pad box-pane-right bg-green\" style=\"min-height: 280px\"></div>');\n        target.append(outer);\n        var kpiIds = mydata.attributes.kpis;\n        variables.$rootDomain.get().then(function (data) {\n          resource = data;\n          var modelId = resource.modelId;\n          variables.$kpis.getBymodelId(modelId).then(function success(data) {\n            kpiDefs = data.reduce(function (prev, next) {\n              var find = kpiIds.some(function (elem) {\n                return elem == next.id;\n              });\n\n              if (find) {\n                prev[next.id] = next;\n              }\n\n              return prev;\n            }, {});\n            variables.getValueListByRootKpis(kpiIds).then(function success(vlist) {\n              for (var i in kpiDefs) {\n                var find = vlist.filter(function (elem) {\n                  return elem.kpiCode == kpiDefs[i].id;\n                });\n                var inner = $('<div class=\"description-block margin-bottom ng-scope\" ng-repeat=\"item in totalItems4\" on-finish-render-filters=\"\">\\\n                                <div class=\"sparkbar pad\">\\\n                                </div>\\\n                                <h5 class=\"description-header ng-binding\">' + (find.length ? find[find.length - 1].value : 0) + '</h5>\\\n                                <span class=\"description-text ng-binding\">' + kpiDefs[i].label + '</span>\\\n                            </div>');\n                var myvalues = [];\n\n                if (find) {\n                  if (find.length > 7) {\n                    myvalues = find.slice(-7).map(function (el) {\n                      return el.value;\n                    });\n                  } else {\n                    myvalues = find.slice(-find.length + 1).map(function (el) {\n                      return el.value;\n                    });\n                  }\n                } else {\n                  for (var i = 0; i < 7; i++) {\n                    myvalues.push(0);\n                  }\n                }\n\n                outer.append(inner);\n                inner.find('.sparkbar').sparkline(myvalues, {\n                  type: 'bar',\n                  barColor: 'white'\n                });\n              }\n            });\n          });\n        });\n      }\n\n      function map(target, mydata) {\n        var inner = $(\"<div style='width : 100%; height : 340px;'></div>\");\n        target.append(inner);\n        var baseoption;\n        var dashboardOption = {\n          backgroundColor: '#404a59',\n          title: {\n            text: '',\n            subtext: '',\n            sublink: '',\n            left: 'center',\n            textStyle: {\n              color: '#fff'\n            }\n          },\n          tooltip: {\n            trigger: 'item',\n            formatter: function formatter(obj) {\n              return obj.seriesName + ':' + obj.value[2];\n            }\n          },\n          bmap: {\n            center: [104.114129, 37.550339],\n            zoom: 5,\n            roam: true,\n            mapStyle: {\n              styleJson: []\n            }\n          },\n          series: [{\n            name: '运行设备数',\n            type: 'scatter',\n            coordinateSystem: 'bmap',\n            data: [],\n            symbolSize: function symbolSize(val) {\n              var value;\n\n              if (val) {\n                value = val[2] * .2;\n              } else {\n                value = 0;\n              }\n\n              return 10 + value > 20 ? 20 : 10 + value;\n            },\n            label: {\n              normal: {\n                formatter: '{b}',\n                position: 'right',\n                show: false\n              },\n              emphasis: {\n                show: true\n              }\n            },\n            itemStyle: {\n              normal: {\n                color: '#ddb926'\n              }\n            }\n          }, {\n            name: '运行设备数',\n            type: 'effectScatter',\n            coordinateSystem: 'bmap',\n            data: [],\n            symbolSize: function symbolSize(val) {\n              var value;\n\n              if (val) {\n                value = val[2] * .2;\n              } else {\n                value = 0;\n              }\n\n              return 10 + value > 20 ? 20 : 10 + value;\n            },\n            showEffectOn: 'render',\n            rippleEffect: {\n              brushType: 'stroke'\n            },\n            hoverAnimation: true,\n            label: {\n              normal: {\n                formatter: '{b}',\n                position: 'right',\n                show: true\n              }\n            },\n            itemStyle: {\n              normal: {\n                color: '#f4e925',\n                shadowBlur: 10,\n                shadowColor: '#333'\n              }\n            },\n            zlevel: 1\n          }]\n        };\n\n        var init = function init() {\n          resourceUIService.statDeviceByStandardAddress(function (returnObj) {\n            var citys = {\n              \"北京市\": 0\n            };\n\n            if (returnObj.code == 0) {\n              for (var city in returnObj.data) {\n                if (city) {\n                  var arr = city.split(\",\");\n\n                  if (arr[0].indexOf(\"市\") > -1) {\n                    if (citys[arr[0]]) citys[arr[0]] = citys[arr[0]] + returnObj.data[city];else citys[arr[0]] = returnObj.data[city];\n                  } else if (arr.length > 1) {\n                    citys[arr[1]] = returnObj.data[city];\n                  }\n                } else {\n                  citys[\"北京市\"] = citys[\"北京市\"] + returnObj.data[\"\"];\n                }\n              }\n\n              for (var city in citys) {\n                var obj = {};\n                obj.name = city;\n                obj.value = baseoption.geoCoord[city];\n\n                if (obj.value) {\n                  obj.value.push(citys[city]);\n                }\n\n                dashboardOption.series[0].data.push(obj);\n\n                if (dashboardOption.series[0].data.length < 5) {\n                  dashboardOption.series[1].data.push(obj);\n                }\n              }\n\n              inner.echart({\n                option: dashboardOption\n              });\n            }\n          });\n        };\n\n        var par = \"../localdb/echarts-map.json\";\n        var info = Info.get(par, function (info) {\n          baseoption = info;\n          dashboardOption.bmap.mapStyle.styleJson = baseoption.styleJson_dark;\n          init();\n        });\n      }\n\n      function progress(target, mydata) {\n        if (mydata.attributes) {\n          var resource, currentKpi;\n          var nodeId = mydata.attributes.ci;\n          var kpiId = mydata.attributes.kpi;\n          var innerContent = $(\"<div class='progress-group'></div>\");\n          var text = $(\"<span class='progress-text' id='value'></span>\");\n          var number = $(\"<span class='progress-number'></span>\");\n          var prg = $(\"<div class='progress sm'><div class='progress-bar' style='width:80%'></div></div>\");\n          innerContent.append(text);\n          innerContent.append(number);\n          innerContent.append(prg);\n          target.append(innerContent);\n          variables.$kpis.getByKpiIds([kpiId]).then(function success(data) {\n            text.text(data[0].label);\n          });\n          variables.$rootDomain.get().then(function (data) {\n            resource = data;\n            var modelId = resource.modelId;\n            variables.$kpis.getBymodelId(modelId).then(function success(data) {\n              currentKpi = data.find(function (elem) {\n                return elem.id == kpiId;\n              });\n              variables.getValueByRootKpi(kpiId).then(function (value) {\n                number.find(\"span#text\").text(value);\n\n                switch (true) {\n                  case value == 100:\n                    prg.find(\".progress-bar\").addClass(\"progress-bar-aqua\");\n                    break;\n\n                  case value > 90:\n                    prg.find(\".progress-bar\").addClass(\"progress-bar-green\");\n                    break;\n\n                  case value > 80:\n                    prg.find(\".progress-bar\").addClass(\"progress-bar-yellow\");\n                    break;\n\n                  case value > 70:\n                    prg.find(\".progress-bar\").addClass(\"progress-bar-yellow\");\n                    break;\n\n                  case value > 60:\n                    prg.find(\".progress-bar\").addClass(\"progress-bar-red\");\n                    break;\n\n                  default:\n                    prg.find(\".progress-bar\").addClass(\"progress-bar-danger\");\n                }\n\n                number.html(\"<b>\" + value + \"</b>%\");\n                prg.find(\".progress-bar\").css(\"width\", value + \"%\");\n              });\n            });\n          });\n        }\n      }\n\n      function downTab(target, mydata) {\n        if (mydata.attributes) {\n          var resource;\n          var nodeId = mydata.attributes.ci;\n          var kpiId = mydata.attributes.kpi;\n          var innerContent = $(\"<div class='description-block border-right'></div>\");\n          var text = $(\"<span class='description-percentage'><i class='fa'></i><span id='rate'></span></span>\");\n          var valueDom = $(\"<h5 class='description-header'></h5>\");\n          var disc = $(\"<span class='description-text'></span>\");\n          var currentKpi;\n          innerContent.append(text);\n          innerContent.append(valueDom);\n          innerContent.append(disc);\n          target.append(innerContent);\n          variables.$rootDomain.get().then(function (data) {\n            resource = data;\n            var modelId = resource.modelId;\n            variables.$kpis.getBymodelId(modelId).then(function success(data) {\n              currentKpi = data.find(function (elem) {\n                return elem.id == kpiId;\n              });\n              disc.text(currentKpi.label);\n            });\n            variables.getValueListByRootKpis([kpiId]).then(function (data) {\n              var value, old, rate;\n\n              if (data.length > 0) {\n                value = data[0].value;\n              }\n\n              if (data.length > 1) {\n                old = data[data.length - 1];\n\n                if (old > 0) {\n                  rate = (value - old / old) * 100;\n                } else {\n                  rate = 100;\n                }\n              } else {\n                rate = 0;\n              }\n\n              text.find(\"#rate\").text(Math.abs(rate) + '%');\n\n              if (rate > 0) {\n                text.find(\"i.fa\").addClass(\"fa-caret-up\");\n                text.addClass(\"text-red\");\n              } else if (rate < 0) {\n                text.find(\"i.fa\").addClass(\"fa-caret-down\");\n                text.addClass(\"text-green\");\n              } else {\n                text.find(\"i.fa\").addClass(\"fa-caret-left\");\n                text.addClass(\"text-red\");\n              }\n\n              var value = value == 0 ? parseInt(Math.random() * 100) : value;\n              valueDom.text(value);\n            });\n          });\n        }\n      }\n\n      function listone(target, mydata) {\n        if (mydata.attributes) {\n          var fun = mydata.attributes.fun;\n          var innerContent = $(\"<table width='100%' class='table table-hover no-margin'>\");\n          var uldom = $('<ul class=\"products-list product-list-in-box\"></ul>');\n          innerContent.append(uldom);\n          target.append(innerContent);\n          eval(fun)(function (event) {\n            try {\n              if (event.code == '0') {\n                for (var i in event.data) {\n                  var lidom = $('<li class=\"item ng-scope\" ng-repeat=\"device in deviceitems\">\\\n                                                <div class=\"product-info\">\\\n                                                    <a href=\"../app-oc/index.html#/#resource/' + event.data[i].modelId + '/' + event.data[i].id + '\" class=\"product-title ng-binding\"><span class=\"label label-primary pull-left ng-binding\">' + format(event.data[i].createTime) + '</span>' + event.data[i].label + '</a>\\\n                                                </div>\\\n                                            </li>');\n                  uldom.append(lidom);\n                }\n\n                uldom.append($('<a href=\"../app-oc/index.html#/resource\" class=\"uppercase\">查看更多</a>'));\n              } else {\n                throw event.message;\n              }\n            } catch (err) {}\n\n            function format(time) {\n              var dateRegExp = /\\d{4}\\-\\d{2}\\-\\d{2}/;\n              var timeRegExp = /\\d{2}\\:\\d{2}\\:\\d{2}/;\n              var date = dateRegExp.exec(time);\n              var t = timeRegExp.exec(time);\n\n              if (date != null && t != null) {\n                return date + \" \" + t;\n              } else {\n                return time;\n              }\n            }\n          });\n        }\n      }\n\n      function listtwo(target, mydata) {\n        if (mydata.attributes) {\n          var fun = mydata.attributes.fun;\n          var innerContent = $(\"<table width='100%' class='table table-hover no-margin'>\");\n          var header = $(\"<thead><tr><th>工单号</th><th>内容</th><th>紧急度</th></tr></thead>\");\n          var tbody = $(\"<tbody></tbody>\");\n          innerContent.append(header).append(tbody);\n          target.append(innerContent);\n          var status = 100;\n          eval(fun)(status, function (event) {\n            try {\n              if (event.code == '0') {\n                for (var i = 0; i < (event.data.length > 10 ? 10 : event.data.length); i++) {\n                  var content;\n\n                  (function (index, item) {\n                    if (item.priorityCode == 0) {\n                      content = $('<tr ng-repeat=\"item in orderList\" class=\"ng-scope\">\\\n                                            <td><a href=\"../app-oc/index.html#/orderdetail/' + event.data[i].ticketNo + '/order\" class=\"ng-binding\">' + event.data[i].ticketNo + '</a></td>\\\n                                            <td class=\"ng-binding\">' + event.data[i].message + '</td>\\\n                                            <!-- <td>{{item.statuslab}}</td> -->\\\n                                        <td><span class=\"label alerts-minor\">低</span></td>\\\n                                    </tr>');\n                    } else if (item.priorityCode == 100) {\n                      content = $('<tr ng-repeat=\"item in orderList\" class=\"ng-scope\">\\\n                                            <td><a href=\"../app-oc/index.html#/orderdetail/' + event.data[i].ticketNo + '/order\" class=\"ng-binding\">' + event.data[i].ticketNo + '</a></td>\\\n                                            <td class=\"ng-binding\">' + event.data[i].message + '</td>\\\n                                            <!-- <td>{{item.statuslab}}</td> -->\\\n                                        <td><span class=\"label alerts-major\">中</span></td>\\\n                                    </tr>');\n                    } else if (item.priorityCode == 200) {\n                      content = $('<tr ng-repeat=\"item in orderList\" class=\"ng-scope\">\\\n                                            <td><a href=\"../app-oc/index.html#/orderdetail/' + event.data[i].ticketNo + '/order\" class=\"ng-binding\">' + event.data[i].ticketNo + '</a></td>\\\n                                            <td class=\"ng-binding\">' + event.data[i].message + '</td>\\\n                                            <!-- <td>{{item.statuslab}}</td> -->\\\n                                        <td><span class=\"label alerts-critical\">高</span></td>\\\n                                    </tr>');\n                    }\n                  })(i, event.data[i]);\n\n                  tbody.append(content);\n                }\n              } else {\n                throw event.message;\n              }\n            } catch (err) {}\n\n            tbody.append($('<tr><td colspan=\"3\"><a href=\"../app-oc/index.html#/workorder\" class=\"btn btn-sm btn-default btn-flat\">查看更多</a></td></tr>'));\n          });\n        }\n      }\n\n      $.fn.extend({\n        echart: function echart() {\n          var cur = this;\n          var target;\n\n          if (arguments.length == 1) {\n            target = echarts.init(this[0], 'macarons');\n            this.data(\"target\", target);\n            target.setOption(arguments[0].option);\n          } else if (arguments[0] == \"option\") {\n            if (arguments[2]) {\n              eval(arguments[1])(arguments[2]);\n            } else {\n              eval(arguments[1] + \"()\");\n            }\n          }\n\n          function resize() {\n            target = cur.data(\"target\");\n            if (target) target.resize();\n          }\n\n          function setOption(option) {\n            target = cur.data(\"target\");\n            if (target) target.setOption(option, true);\n          }\n        }\n      });\n    }\n\n    return directive;\n  }\n});"],"sourceRoot":"/source/"}