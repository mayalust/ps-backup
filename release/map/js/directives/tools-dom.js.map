{"version":3,"sources":["js/directives/tools-dom.js"],"names":["define","directives","initDirective","$timeout","$compile","$filter","restrict","scope","renderHtml","link","element","attr","$watch","n","o","s","$","html","templateUrl","replace","toolbars","tabLabelLists","id","name","toolbarHandler","item","isShowContent","flag","forEach","ele","index","push","deleteItemTab","$index","splice","selecItemTab","template","resetTreeData","e","rs","i","undefined","parentID","pid","parent","find","elem","children","setTimeout","click","this","siblings","css","removeClass","addClass","slideDown","parents","slideUp","iElem","iAttr","ngmodel","XW","msg","rABS","norABS","noxfer","rabs","transferable","use_worker","useworker","format","fixdata","data","l","w","byteLength","String","fromCharCode","apply","Uint8Array","slice","xw_xfer","cb","worker","Worker","onmessage","t","console","error","d","xx","Uint16Array","ab2str","JSON","parse","val","b","ArrayBuffer","length","v","charCodeAt","s2ab","postMessage","xw","arr","btoa","xw_noxfer","handleFile","files","target","f","reader","FileReader","onload","result","process_wb","wb","XLSX","read","type","readAsBinaryString","readAsArrayBuffer","output","workbook","SheetNames","sheetName","roa","utils","sheet_to_row_object_array","Sheets","formulae","get_formulae","join","csv","sheet_to_csv","fun","loadcomplete","growl","warning","require","append","on","nextAll","attrs","ngModel","$parsers","value","$formatters","parseFloat","timeout","directive","options","render","remove","addLi","op","div","text","title","event","$apply","slickReady","slick","slidesToShow","slidesToScroll","arrows","$$","loadExternalJs","maxlength","disabled","label","change","fontsize","width","dtMark","dtKey","key","placeholder","mark","cssStyle","search","select","wraps","optionsWatcher","container","childrenDom","jQuery","isArray","clone","concat","traverse","level","child","wrap","handler","checkhasViewId","viewId","hasOwnProperty","checkViewId","chd","inx","lb","trigger","stopPropagation","hasClass","animate","height","opacity","display","position","preventDefault","docClick","off","selectedTraverse","datePicker","timepicker","autoapply","timepicker24hour","timepickerseconds","opens","iszero","limitendtime","intervaldays","Number","drops","formatDate","inputDate","getTime","Date","ev","picker","model","$parent","defDate","sDate","startDate","endDate","setStartDate","setEndDate","$modelValue","newValue","oldValue","clearSelectTime","daterangepicker","singleDatePicker","showDropdowns","timePicker","timePicker24Hour","timePickerSeconds","autoApply","autoUpdateInput","minDate","maxDate","locale","applyLabel","cancelLabel","daysOfWeek","monthNames","firstDay","controller","$scope","$element","$attrs","date","$setViewValue","_d","start","end","treeview","treeview1","domainListTree","getDomainList","domains","gatewaydomainpath","domainPath","onNodeSelected","node","popover","split","placement","userparent","rootModel","htmlContent","vlaue","kpiValue","modelId","instances","instance","getHierarchyValue","kpiCode","returnObj","option","tooltip","grid","x","y","x2","y2","toolbox","show","feature","dataView","readOnly","magicType","restore","saveAsImage","calculable","xAxis","boundaryGap","times","yAxis","scale","interval","chartinterval","min","max","axisLabel","formatter","series","markLine","$broadcast","Event","ECHARTINFOSINIT","slideIndex","addSlick","itemid","itemlabel","str","unit","stateStyle","icon","$on","dots","draggable","variableWidth","infinite","init","requireFinish","autorender","autoplay","autoplaySpeed","autoplayspeed","variablesidth","slidestoscroll","slidestoshow","currentSlide","nextSlide","ngRepeatFinishedEvent","swipeToSlide","params","newVal","oldVal","$parse","clientHeight","window","offseth","slimScroll","$observe","expr","iCheck","boxClass","radioClass","ngModelGetter","labelHover","checkboxClass","increaseArea","elemType","assign","checked","$http","weatherService","templateurl","maxData","minData","weathers","weather","results","weather_data","temperature","borderWidth","initChart","updateWeather","city","getWeatherByCity","code","myJsDate","context","innerHTML","fn","clicks","timer","$event","clearTimeout","bootstrapSwitch","state","$emit","nodeId","itemDirValues","initStatus","destroySelect2","selectData","select2","empty","baseSelect2","multiple","language","noResults","noresults","select2init","evt","itemchange","selectdata","$evalAsync","multiselect","nonSelectedText","nonselectedtext","numberDisplayed","numberdisplayed","nSelectedText","allSelectedText","enableFiltering","enablefiltering","filterPlaceholder","templates","filter","buttonWidth","buttonwidth","buttonClass","buttonclass","onDropdownShow","onChange","selectvalues","toggle","rootScope","uploader","fileBelongId","parentElement","queue","source","eventUpdate","setting","watch","uls","delay","distance","typeObj","connectWith","sort","sortable","extend","dropOnEmpty","helper","items","cursor","revert","scroll","scrollSensitivity","update","ui","as","totalAry","map","itemAry","parseInt","activate","disableSelection"],"mappings":"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","file":"js/directives/tools-dom.js","sourcesContent":["define(['directives/directives'], function (directives) {\n  'use strict';\n\n  directives.initDirective('renderHtml', [\"$timeout\", \"$compile\", \"$filter\", function ($timeout, $compile, $filter) {\n    return {\n      restrict: 'A',\n      scope: {\n        renderHtml: '='\n      },\n      link: function link(scope, element, attr) {\n        scope.$watch(\"renderHtml\", function (n, o, s) {\n          if (n) {\n            $(element).html(n);\n          }\n        });\n      }\n    };\n  }]);\n  directives.initDirective('advanceTab', [\"$timeout\", \"$compile\", \"$filter\", function ($timeout, $compile, $filter) {\n    return {\n      restrict: 'E',\n      templateUrl: '../partials/advance_tab.html',\n      replace: true,\n      scope: {\n        toolbars: '='\n      },\n      link: function link(scope, element, attr) {\n        // add\n        scope.tabLabelLists = [{\n          id: \"0\",\n          name: \"工作台\"\n        }];\n\n        scope.toolbarHandler = function (id, name) {\n          scope.isShowContent = id;\n          var item = {\n            id: id,\n            name: name\n          };\n          var flag = true;\n          scope.tabLabelLists.forEach(function (ele, index) {\n            if (ele.id == id) {\n              // alert(ele.name + \"已经存在\");\n              flag = false;\n            }\n          });\n\n          if (flag) {\n            scope.tabLabelLists.push(item);\n          }\n        }; // delete\n\n\n        scope.deleteItemTab = function ($index, name) {\n          scope.tabLabelLists.splice($index, 1);\n          scope.isShowContent = scope.tabLabelLists[$index - 1].id;\n        }; //select\n\n\n        scope.isShowContent = 0;\n\n        scope.selecItemTab = function (id, index) {\n          scope.isShowContent = id;\n        };\n      }\n    };\n  }]);\n  directives.initDirective('treeMenu', [\"$timeout\", \"$compile\", \"$filter\", function ($timeout, $compile, $filter) {\n    return {\n      restrict: 'AE',\n      template: ' <div class=\"tree-menu\">\\n' + '                    <ul>\\n' + '                        <li ng-repeat=\"firstMenu in resetTreeData\">\\n' + '                            <a href=\"\" ng-class=\"{false:\\'inactive\\'}[firstMenu.children.length == 0]\"\\n' + '                               ng-bind=\"firstMenu.name\">\\n' + '                            </a>\\n' + '                            <ul style=\"display: none\">\\n' + '                                <li ng-repeat=\"secondMenu  in firstMenu.children\">\\n' + '                                    <a href=\"\" ng-class=\"{false:\\'inactive\\',true:\\'\\'}[secondMenu.children.length == 0]\"\\n' + '                                       ng-bind=\"secondMenu.name\">\\n' + '                                    </a>\\n' + '                                    <ul>\\n' + '                                        <li ng-repeat=\"thirdMenu  in secondMenu.children\">\\n' + '                                            <a href=\"\" ng-class=\"{false:\\'inactive\\',true:\\'\\'}[secondMenu.children.length == 0]\" ng-bind=\"thirdMenu.name\"></a>\\n' + '                                            <ul>\\n' + '                                                <li ng-repeat=\"fourthMenu  in thirdMenu.children\">\\n' + '                                                    <a href=\"\" ng-class=\"{false:\\'\\',true:\\'\\'}[fourthMenu.children.length == 0]\" ng-bind=\"fourthMenu.name\"></a>\\n' + '                                                </li>\\n' + '                                            </ul>\\n' + '                                        </li>\\n' + '                                    </ul>\\n' + '                                </li>\\n' + '                            </ul>\\n' + '                        </li>\\n' + '                    </ul>\\n' + '                </div>',\n      link: function link(scope, element, attr) {\n        var getTreeData = [{\n          id: 0,\n          name: \"all\"\n        }, {\n          parentID: 0,\n          id: 1,\n          name: '韶关松山基地'\n        }, {\n          parentID: 0,\n          id: 2,\n          name: '上海宝山基地'\n        }, {\n          parentID: 0,\n          id: 3,\n          name: '湛江东山基地'\n        }, {\n          parentID: 0,\n          id: 4,\n          name: '南京梅山基地'\n        }, {\n          parentID: 2,\n          id: 2001,\n          name: '2250产线'\n        }, {\n          parentID: 2,\n          id: 2002,\n          name: '1580产线'\n        }, {\n          parentID: 2001,\n          id: 3001,\n          name: '风机电机'\n        }, {\n          parentID: 2001,\n          id: 3002,\n          name: '风机叶轮'\n        }, {\n          parentID: 2001,\n          id: 3003,\n          name: '主转动电机'\n        }, {\n          parentID: 2001,\n          id: 3004,\n          name: '助燃风机'\n        }, {\n          parentID: 3001,\n          id: 4001,\n          name: '冲击有效值'\n        }, {\n          parentID: 3001,\n          id: 4002,\n          name: '冲击峰值'\n        }, {\n          parentID: 3001,\n          id: 4003,\n          name: '速度有效值'\n        }, {\n          parentID: 3001,\n          id: 4004,\n          name: '速度峰值'\n        }, {\n          parentID: 3002,\n          id: 4001,\n          name: '冲击有效值'\n        }, {\n          parentID: 3002,\n          id: 4002,\n          name: '冲击峰值'\n        }, {\n          parentID: 3002,\n          id: 4003,\n          name: '速度有效值'\n        }, {\n          parentID: 3002,\n          id: 4004,\n          name: '速度峰值'\n        }]; // 转成数结构\n\n        function resetTreeData(e) {\n          var rs;\n          e.push({\n            id: 0\n          });\n\n          for (var i in e) {\n            if (e[i].parentID != undefined) {\n              var pid = e[i].parentID;\n              var parent = e.find(function (elem) {\n                return elem.id == pid;\n              });\n\n              if (parent.children == undefined) {\n                parent.children = [];\n              }\n\n              e[i].parent = parent;\n              parent.children.push(e[i]);\n            } else {\n              rs = e[i];\n            }\n          }\n\n          return rs;\n        }\n\n        scope.resetTreeData = resetTreeData(getTreeData).children;\n        setTimeout(function () {\n          $('.inactive').click(function () {\n            if ($(this).siblings('ul').css('display') == 'none') {\n              $(this).parent('li').siblings('li').removeClass('inactives');\n              $(this).addClass('inactives');\n              $(this).siblings('ul').slideDown(200).children('li');\n\n              if ($(this).parents('li').siblings('li').children('ul').css('display') == 'block') {\n                $(this).parents('li').siblings('li').children('ul').parent('li').children('a').removeClass('inactives');\n                $(this).parents('li').siblings('li').children('ul').slideUp(200);\n              }\n            } else {\n              //控制自身变成+号\n              $(this).removeClass('inactives'); //控制自身菜单下子菜单隐藏\n\n              $(this).siblings('ul').slideUp(200); //控制自身子菜单变成+号\n\n              $(this).siblings('ul').children('li').children('ul').parent('li').children('a').addClass('inactives'); //控制自身菜单下子菜单隐藏\n\n              $(this).siblings('ul').children('li').children('ul').slideUp(200); //控制同级菜单只保持一个是展开的（-号显示）\n\n              $(this).siblings('ul').children('li').children('a').removeClass('inactives');\n            }\n          });\n        });\n      }\n    };\n  }]);\n  directives.initDirective('importBtn', function () {\n    return {\n      restrict: 'A',\n      link: function link(scope, iElem, iAttr, ngmodel) {\n        var XW = {\n          /* worker message */\n          msg: 'xlsx',\n\n          /* worker scripts */\n          rABS: '../node_modules/js-xlsx/xlsxworker2.js',\n          norABS: '../node_modules/js-xlsx/xlsxworker1.js',\n          noxfer: '../node_modules/js-xlsx/xlsxworker.js'\n        };\n        var rABS = iAttr.rabs == 'false' ? false : true;\n        var transferable = iAttr.transferable == 'false' ? false : true;\n        var use_worker = iAttr.useworker == 'false' ? false : true;\n        var format = iAttr.format ? iAttr.format : 'json';\n\n        function fixdata(data) {\n          var o = \"\",\n              l = 0,\n              w = 10240;\n\n          for (; l < data.byteLength / w; ++l) {\n            o += String.fromCharCode.apply(null, new Uint8Array(data.slice(l * w, l * w + w)));\n          }\n\n          o += String.fromCharCode.apply(null, new Uint8Array(data.slice(l * w)));\n          return o;\n        }\n\n        function ab2str(data) {\n          var o = \"\",\n              l = 0,\n              w = 10240;\n\n          for (; l < data.byteLength / w; ++l) {\n            o += String.fromCharCode.apply(null, new Uint16Array(data.slice(l * w, l * w + w)));\n          }\n\n          o += String.fromCharCode.apply(null, new Uint16Array(data.slice(l * w)));\n          return o;\n        }\n\n        function s2ab(s) {\n          var b = new ArrayBuffer(s.length * 2),\n              v = new Uint16Array(b);\n\n          for (var i = 0; i != s.length; ++i) {\n            v[i] = s.charCodeAt(i);\n          }\n\n          return [v, b];\n        }\n\n        function xw_noxfer(data, cb) {\n          var worker = new Worker(XW.noxfer);\n\n          worker.onmessage = function (e) {\n            switch (e.data.t) {\n              case 'ready':\n                break;\n\n              case 'e':\n                console.error(e.data.d);\n                break;\n\n              case XW.msg:\n                cb(JSON.parse(e.data.d));\n                break;\n            }\n          };\n\n          var arr = rABS ? data : btoa(fixdata(data));\n          worker.postMessage({\n            d: arr,\n            b: rABS\n          });\n        }\n\n        function xw_xfer(data, cb) {\n          var worker = new Worker(rABS ? XW.rABS : XW.norABS);\n\n          worker.onmessage = function (e) {\n            switch (e.data.t) {\n              case 'ready':\n                break;\n\n              case 'e':\n                console.error(e.data.d);\n                break;\n\n              default:\n                var xx = ab2str(e.data).replace(/\\n/g, \"\\\\n\").replace(/\\r/g, \"\\\\r\");\n                cb(JSON.parse(xx));\n                break;\n            }\n          };\n\n          if (rABS) {\n            var val = s2ab(data);\n            worker.postMessage(val[1], [val[1]]);\n          } else {\n            worker.postMessage(data, [data]);\n          }\n        }\n\n        function xw(data, cb) {\n          if (transferable) xw_xfer(data, cb);else xw_noxfer(data, cb);\n        }\n\n        function to_json(workbook) {\n          var result = {};\n          workbook.SheetNames.forEach(function (sheetName) {\n            var roa = XLSX.utils.sheet_to_row_object_array(workbook.Sheets[sheetName]);\n\n            if (roa.length > 0) {\n              result[sheetName] = roa;\n            }\n          });\n          return result;\n        }\n\n        function to_csv(workbook) {\n          var result = [];\n          workbook.SheetNames.forEach(function (sheetName) {\n            var csv = XLSX.utils.sheet_to_csv(workbook.Sheets[sheetName]);\n\n            if (csv.length > 0) {\n              result.push(\"SHEET: \" + sheetName);\n              result.push(\"\");\n              result.push(csv);\n            }\n          });\n          return result.join(\"\\n\");\n        }\n\n        function to_formulae(workbook) {\n          var result = [];\n          workbook.SheetNames.forEach(function (sheetName) {\n            var formulae = XLSX.utils.get_formulae(workbook.Sheets[sheetName]);\n\n            if (formulae.length > 0) {\n              result.push(\"SHEET: \" + sheetName);\n              result.push(\"\");\n              result.push(formulae.join(\"\\n\"));\n            }\n          });\n          return result.join(\"\\n\");\n        }\n\n        function handleFile(e) {\n          var files = e.target.files;\n          if (!files || files.length == 0) return;\n          var f = files[0];\n          var reader = new FileReader();\n          var name = f.name;\n\n          reader.onload = function (e) {\n            if (typeof console !== 'undefined') var data = e.target.result;\n\n            if (use_worker) {\n              xw(data, process_wb);\n            } else {\n              var wb;\n\n              if (rABS) {\n                wb = XLSX.read(data, {\n                  type: 'binary'\n                });\n              } else {\n                var arr = fixdata(data);\n                wb = XLSX.read(btoa(arr), {\n                  type: 'base64'\n                });\n              }\n\n              process_wb(wb);\n            }\n          };\n\n          if (rABS) reader.readAsBinaryString(f);else reader.readAsArrayBuffer(f);\n        }\n\n        function process_wb(wb) {\n          var output;\n\n          switch (format) {\n            case \"json\":\n              output = to_json(wb);\n              break;\n\n            case \"form\":\n              output = to_formulae(wb);\n              break;\n\n            default:\n              output = to_csv(wb);\n          }\n\n          var fun = scope[iAttr.loadcomplete];\n\n          if (fun) {\n            fun(output);\n          } else {\n            growl.warning(\"无法批量添加该数据\", {});\n          }\n        }\n\n        require(['xlsx'], function () {\n          iElem.parent().append('<input type=\"file\" style=\"display:none\" accept=\"application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\">');\n          iElem.on(\"click\", function () {\n            iElem.nextAll('input').click();\n            iElem.nextAll('input').on(\"change\", handleFile);\n          });\n        });\n      }\n    };\n  });\n  directives.initDirective('stringToNumber', function () {\n    return {\n      require: 'ngModel',\n      link: function link(scope, element, attrs, ngModel) {\n        ngModel.$parsers.push(function (value) {\n          return '' + value;\n        });\n        ngModel.$formatters.push(function (value) {\n          return parseFloat(value);\n        });\n      }\n    };\n  });\n  directives.initDirective(\"slickSlide\", [\"$timeout\", function (timeout) {\n    var directive = {};\n    directive.scope = {\n      options: \"=\",\n      click: \"&\"\n    };\n    directive.restrict = \"A\";\n    directive.link = link;\n\n    function link(scope, element, attr) {\n      $(element).css(\"width\", \"calc(100 - 30px)\");\n      $(element).css(\"margin\", \"0 15px\");\n\n      var ngModelWatcher = function ngModelWatcher(n, o, s) {\n        var render = function render(options) {\n          $(element).children().remove();\n\n          var addLi = function addLi(index, op) {\n            var div = $(\"<div></div>\").text(op.title);\n            div.addClass(\"inner-item\");\n            /**\n             if(index == 1) {\n              div.addClass(\"active\");\n            }\n             */\n\n            var click = function click(event) {\n              scope.$apply(function () {\n                scope.click({\n                  item: op\n                });\n              });\n            };\n\n            div.on(\"click\", click);\n            return div;\n          };\n\n          for (var i in options) {\n            $(element).append(addLi(i, options[i]));\n          }\n\n          var domready = function domready() {\n            var slickReady = function slickReady(slick) {\n              $(element).slick({\n                slidesToShow: 8,\n                slidesToScroll: 8,\n                arrows: true\n              });\n            };\n\n            $$.loadExternalJs(['slick'], slickReady);\n          };\n\n          timeout(domready);\n        };\n\n        if (n != undefined) {\n          render(n);\n        }\n      };\n\n      scope.$watch(\"options\", ngModelWatcher);\n    }\n\n    return directive;\n  }]);\n  directives.initDirective(\"maxlength\", [\"$timeout\", function (timeout) {\n    var directive = {};\n    directive.scope = {\n      maxlength: \"=\",\n      ngModel: \"=\"\n    };\n    directive.restrict = \"A\";\n    directive.link = link;\n\n    function link(scope, element, attr) {\n      var maxlength = scope.maxlength;\n      $(element).on(\"keyup\", function (event) {\n        var val = $(this).val();\n        scope.$apply(function () {\n          if (val.length > maxlength) {\n            scope.ngModel = val.slice(0, maxlength);\n          }\n        });\n      });\n    }\n\n    return directive;\n  }]);\n  directives.initDirective(\"dropdowntree\", [\"$timeout\", function (timeout) {\n    var directive = {};\n    directive.scope = {\n      ngModel: \"=\",\n      disabled: \"=\",\n      options: \"=\",\n      label: \"=\",\n      change: \"&\",\n      fontsize: \"=\",\n      width: \"=\",\n      dtMark: \"=\",\n      dtKey: \"=\",\n      key: \"@\",\n      placeholder: \"@\"\n    };\n    directive.restrict = \"C\";\n    directive.link = link;\n\n    function link(scope, element, attr) {\n      //    if(element.context.children.length > 0) return; 已经没有在行内选择的场景，去掉\n      var ready = function ready() {\n        var mark;\n        var placeholder = scope[\"placeholder\"] == \"\" ? \"\" : scope[\"placeholder\"] ? scope[\"placeholder\"] : \"请选择...\";\n        var label = scope['label'] ? scope['label'] : 'text';\n        var dtKey = scope.dtKey;\n        var dtMark = scope.dtMark;\n        var key;\n\n        if (dtKey) {\n          key = dtKey;\n        } else {\n          key = attr.key ? attr.key : \"id\";\n        }\n\n        if (dtMark) {\n          mark = dtMark;\n        } else {\n          mark = attr[\"mark\"] ? attr[\"mark\"] : \"children\";\n        }\n\n        var cssStyle = \"form-control\";\n        $(element).css(\"width\", scope.width);\n\n        if (attr[\"selectclass\"]) {\n          cssStyle = attr[\"selectclass\"];\n        } else {\n          if (attr[\"class\"]) {\n            if (attr[\"class\"].search(\"input-sm\") > -1 || attr[\"class\"].search(\"select-sm\") > -1) {\n              cssStyle = \"form-control input-sm\";\n            }\n          }\n        }\n\n        var select = $(\"<select></select>\").addClass(cssStyle);\n        var wraps = [];\n        select.on(\"mousedown\", function (event) {\n          event.preventDefault();\n        });\n\n        if (scope.disabled != true) {\n          select.on(\"click\", function (event) {\n            scope.$apply(function () {\n              var elem = $(element).find('[id*=container]'); //          elem.css(\"box-sizing\", \"border-box\");\n\n              if (elem.hasClass(\"noview\")) {\n                elem.removeClass(\"noview\");\n                select.addClass(\"extend\");\n                timeout(function () {\n                  $('body').on(\"click.body\", docClick);\n                });\n              } //docClick函数定义放在if内部在IE下面会报错误.\n\n\n              function docClick() {\n                elem.addClass(\"noview\");\n                $('body').off(\"click.body\");\n                select.removeClass(\"extend\");\n              }\n            });\n          });\n        } else {\n          select.attr(\"disabled\", \"disabled\");\n        } //直接把select替换进\n        //element.html(select);\n        //这个地方用html会让label无法显示的 zhangafa\n\n\n        element.append(select);\n\n        function ngModelWatcher(n, o, s) {\n          wraps.forEach(function (wrap) {\n            wrap.removeClass(\"active\");\n          });\n\n          if (!n) {\n            select.children().remove();\n            select.append($(\"<option id='selectlabel' value='selectlabel'>\" + placeholder + \"</option>\")); //select.val('selectlabel')\n          }\n\n          if (n && scope.options) {\n            var children;\n\n            if (jQuery.isArray(scope.options)) {\n              children = scope.options;\n            } else {\n              children = scope.options[mark];\n            }\n\n            var selectedTraverse = function selectedTraverse(children) {\n              children.forEach(function (child) {\n                if (child[key] == n) {\n                  select.children().remove();\n                  select.append($(\"<option id='selectlabel' value='selectlabel'>\" + (child.label ? child.label : \"请选择...\") + \"</option>\")); //select.val('selectlabel')\n\n                  wraps.forEach(function (wrap) {\n                    if (wrap.attr(key) == n) {\n                      wrap.addClass(\"active\");\n                    }\n                  });\n                } else {\n                  if (child[mark]) {\n                    selectedTraverse(child[mark]);\n                  }\n                }\n              });\n            };\n\n            selectedTraverse(children);\n          }\n\n          if (scope.change && n != o) {\n            //手动触发change方法\n            scope.change({\n              data: n\n            });\n          }\n        }\n\n        ; //traverse函数定义放在if内部在IE下面会报错误.\n\n        function traverse(children, container, level) {\n          children.forEach(function (child) {\n            var wrap = $(\"<div></div>\").addClass(\"wrap\");\n            var handler = $(\"<div></div>\").addClass(\"glyphicon\");\n            var label = $(\"<span></span>\").addClass(\"labeltxt\");\n            var childrenDom = $(\"<div></div>\").addClass(\"children\");\n            var find = false;\n            var children = child[mark];\n\n            var checkhasViewId = function checkhasViewId(child) {\n              if (child.viewId == scope.ngModel) {\n                return true;\n              } else {\n                if (child.hasOwnProperty(mark)) {\n                  var checkViewId = function checkViewId(chd) {\n                    return checkhasViewId(chd);\n                  };\n\n                  for (var i in child[mark]) {\n                    if (checkViewId(child[mark][i])) {\n                      return true;\n                    }\n                  }\n                }\n              }\n\n              return false;\n            };\n\n            handler.data(\"children\", children);\n            var lb = scope['label'] ? scope['label'] : 'label';\n            child.label = child[lb];\n            label.text(child.label ? child.label : child.text);\n\n            for (var i = 0; i <= level; i++) {\n              (function (clone, inx) {\n                if (inx == level - 1) {\n                  clone.addClass(\"last\");\n                }\n\n                clone.css(\"left\", 10 + inx * 8 + \"px\");\n                wrap.append(clone);\n              })($(\"<div></div>\").addClass(\"vline\"), i);\n            }\n\n            wrap.append(handler);\n            wrap.append(label);\n            wrap.attr(key, child[key]);\n            wrap.css(\"padding-left\", level * 8 + \"px\");\n            wraps.push(wrap);\n            container.append(wrap);\n\n            if (child[key] == scope.ngModel || child[key] == attr[\"model\"]) {\n              select.children().remove();\n              select.append($(\"<option id='selectlabel' value='selectlabel'>\" + (child.label ? child.label : \"请选择...\") + \"</option>\")); //select.val('selectlabel')\n            }\n\n            wrap.on(\"click\", function (event) {\n              scope.$apply(function () {\n                select.children().remove();\n                select.append($(\"<option id='selectlabel' value='selectlabel'>\" + (child.label ? child.label : \"请选择...\") + \"</option>\")); //select.val('selectlabel')\n\n                wraps.forEach(function (elem) {\n                  elem.removeClass(\"active\");\n                });\n                wrap.addClass(\"active\");\n\n                if (attr.hasOwnProperty(\"model\")) {\n                  attr[\"model\"] = child[key];\n                  $(element).attr(\"model\", child[key]);\n                } else {\n                  scope.ngModel = child[key];\n                }\n\n                $('body').trigger(\"click.body\");\n\n                if (!attr.hasOwnProperty(\"ngModel\") || !attr.ngModel) {\n                  scope.change({\n                    data: {\n                      value: child[key]\n                    }\n                  });\n                }\n              });\n            });\n\n            if (children) {\n              if (checkhasViewId(child) == false) {\n                childrenDom.addClass(\"hidechildren\");\n                handler.addClass(\"glyphicon-plus\");\n              } else {\n                handler.addClass(\"glyphicon-minus\");\n              }\n\n              handler.on(\"click\", function (event) {\n                event.stopPropagation();\n\n                if (handler.hasClass(\"glyphicon-minus\")) {\n                  handler.removeClass(\"glyphicon-minus\").addClass(\"glyphicon-plus\");\n                  childrenDom.css(\"overflow\", \"hidden\");\n                  childrenDom.animate({\n                    \"height\": \"100%\",\n                    opacity: 0\n                  }, 300, function () {\n                    childrenDom.css({\n                      display: \"none\"\n                    }).css(\"overflow\", \"auto\");\n                  });\n                } else {\n                  handler.removeClass(\"glyphicon-plus\").addClass(\"glyphicon-minus\");\n                  childrenDom.css(\"overflow\", \"hidden\").css(\"display\", \"block\");\n                  childrenDom.animate({\n                    \"height\": \"100%\",\n                    \"position\": \"absolute\",\n                    opacity: 1\n                  }, 300);\n                }\n              });\n              container.append(childrenDom);\n              traverse(children, childrenDom, level + 1);\n            } else {\n              handler.addClass(\"glyphicon glyphicon-duplicate\").css(\"opacity\", 0);\n            }\n          });\n        }\n\n        function optionsWatcher(n, o, s) {\n          if (n) {\n            var options = n;\n            var container = $(\"<div></div>\").attr(\"id\", \"container\").addClass(\"noview\").css(\"border-top\", \"1px solid #ddd\");\n            var childrenDom = $(\"<div></div>\").addClass(\"children\");\n            var children;\n\n            if (jQuery.isArray(options)) {\n              children = options;\n            } else {\n              children = options[mark];\n            }\n\n            if (attr[\"showclear\"]) {\n              //显示空选项\n              var clone = {\n                key: null\n              };\n              clone[label] = placeholder;\n              children = [clone].concat(children);\n            }\n\n            select.find('[id*=selectlabel]').remove();\n\n            if (options[key] && (options[key] == scope.ngModel || options[key] == attr[\"model\"])) {\n              select.append($(\"<option id='selectlabel'>\" + (options.label ? options.label : \"请选择...\") + \"</option>\"));\n            } else {\n              select.append($(\"<option id='selectlabel'>\" + placeholder + \"</option>\"));\n            }\n\n            container.append(childrenDom);\n            element.find('[id*=container]').remove();\n            element.append(container);\n            if (children) traverse(children, childrenDom, 1);\n          } else {\n            element.find('[id*=container]').remove();\n          }\n        }\n\n        if (attr.hasOwnProperty(\"ngModel\") && attr.ngModel) {\n          scope.$watch(\"ngModel\", ngModelWatcher);\n        }\n\n        if (attr.hasOwnProperty(\"options\") && attr.options) {\n          if (scope.options && (jQuery.isArray(scope.options) && scope.options.length > 0 || scope.options[mark])) {\n            optionsWatcher(scope.options);\n          } else {\n            scope.$watch(\"options\", optionsWatcher);\n          }\n        }\n      };\n\n      timeout(ready);\n    }\n\n    return directive;\n  }]);\n  directives.initDirective('daterangePicker2', [\"$timeout\", \"$filter\", function ($timeout, $filter) {\n    return {\n      restrict: 'A',\n      require: '?ngModel',\n      link: function link(scope, iElem, iAttr, ngmodel) {\n        var datePicker;\n        var format = \"YYYY-MM-DD\";\n        var timepicker = false; //是否显示时分秒\n\n        var autoapply = true; //自动提交，如果timepicker==true时，不起作用\n\n        var timepicker24hour = true; //是否显示24小时制，如果timepicker==true时，才有作用\n\n        var timepickerseconds = true; //是否显示秒，如果timepicker==true时，才有作用\n\n        var opens = \"right\"; //打开方向 right left center\n\n        var iszero = false;\n        var limitendtime = false; //限制结束时间不能超过现在时间\n\n        var intervaldays = 30; //默认开始时间和结束时间的间隔\n\n        if (iAttr['intervaldays']) {\n          intervaldays = Number(iAttr.intervaldays);\n        }\n\n        if (iAttr['iszero']) {\n          iszero = iAttr.iszero == 'true' ? true : false;\n        }\n\n        if (iAttr['limitendtime']) {\n          limitendtime = iAttr.limitendtime == 'true' ? true : false;\n        }\n\n        if (iAttr['opens']) {\n          opens = iAttr.opens;\n        }\n\n        var drops = \"up\"; //纵方向 up down\n\n        if (iAttr['drops']) {\n          drops = iAttr.drops;\n        } //通过页面标签读取，如果true（YYYY-MM-DD）false （YYYY-MM-DD HH:mm:ss）\n\n\n        if (iAttr['timepicker']) {\n          timepicker = iAttr.timepicker == 'true' ? true : false;\n          format = !timepicker ? 'YYYY-MM-DD' : 'YYYY-MM-DD HH:mm:ss';\n        }\n\n        if (iAttr['autoapply']) {\n          autoapply = iAttr.autoapply == 'true' ? true : false;\n        }\n\n        if (iAttr['timepicker24hour']) {\n          timepicker24hour = iAttr.timepicker24hour == 'true' ? true : false;\n        }\n\n        if (iAttr['timepickerseconds']) {\n          timepickerseconds = iAttr.timepickerseconds == 'true' ? true : false;\n        }\n\n        var formatDate = function formatDate(inputDate) {\n          return $filter('date')(inputDate ? inputDate.getTime() : new Date().getTime(), timepicker && !iszero ? 'yyyy-MM-dd HH:mm:ss' : 'yyyy-MM-dd');\n        };\n\n        var i = 0;\n        iElem.on('show.daterangepicker', function (ev, picker) {\n          if (i == 1) {\n            i++;\n            iElem.trigger(\"click\");\n          }\n        });\n        iElem.on('hide.daterangepicker', function (ev, picker) {\n          i = 0;\n        });\n        iElem.on('showCalendar.daterangepicker', function (ev, picker) {\n          if (i == 0) {\n            i++;\n            var model;\n            model = scope[iAttr[\"model\"]];\n            if (!model) model = scope.$parent[iAttr[\"model\"]];\n            if (!model) return;\n            var defDate = formatDate();\n            var sDate = formatDate(new Date(new Date().getTime() - intervaldays * 24 * 60 * 60 * 1000));\n            var startDate = model[iAttr[\"startdate\"]] ? model[iAttr[\"startdate\"]] : sDate;\n            var endDate = model[iAttr[\"enddate\"]] ? model[iAttr[\"enddate\"]] : defDate;\n            picker.setStartDate(startDate);\n            picker.setEndDate(endDate);\n          }\n        });\n        iElem.on('hideCalendar.daterangepicker', function (ev, picker) {});\n        iElem.on('apply.daterangepicker', function (ev, picker) {\n          datePicker = picker;\n          var model;\n          model = scope[iAttr[\"model\"]];\n          if (!model) model = scope.$parent[iAttr[\"model\"]];\n          if (!model) return;\n          var startDate = picker.startDate.format(format);\n          var endDate = picker.endDate.format(format);\n          model[iAttr[\"startdate\"]] = startDate;\n          model[iAttr[\"enddate\"]] = endDate;\n          ngmodel.$modelValue = startDate + \"到\" + endDate;\n          iElem.val(ngmodel.$modelValue);\n          scope.$apply();\n        });\n        iElem.on('cancel.daterangepicker', function (ev, picker) {\n          var model;\n          model = scope[iAttr[\"model\"]];\n          if (!model) model = scope.$parent[iAttr[\"model\"]];\n          if (!model) return;\n          model[iAttr[\"startdate\"]] = \"\";\n          model[iAttr[\"enddate\"]] = \"\";\n          ngmodel.$modelValue = \"\";\n          iElem.val(ngmodel.$modelValue);\n          i = 0;\n          var defDate = formatDate();\n          var startDate = formatDate(new Date(new Date().getTime() - intervaldays * 24 * 60 * 60 * 1000));\n\n          if (picker) {\n            picker.setStartDate(startDate);\n            picker.setEndDate(defDate);\n          } else if (datePicker) {\n            datePicker.setStartDate(startDate);\n            datePicker.setEndDate(defDate);\n          }\n        });\n        scope.$watch(iAttr[\"ngModel\"], function (newValue, oldValue) {\n          if (!newValue && oldValue) {\n            iElem.trigger(\"cancel\");\n          }\n        });\n\n        scope.clearSelectTime = function () {\n          iElem.trigger(\"cancel\");\n        };\n\n        $timeout(function () {\n          require(['bootstrap-daterangepicker'], function (daterangepicker) {\n            iElem.daterangepicker({\n              singleDatePicker: false,\n              showDropdowns: true,\n              timePicker: timepicker,\n              timePicker24Hour: timepicker24hour,\n              timePickerSeconds: timepickerseconds,\n              autoApply: autoapply,\n              autoUpdateInput: false,\n              minDate: timepicker ? '1980-01-01 00:00:00' : '1980-01-01',\n              maxDate: timepicker ? limitendtime ? formatDate() : '2099-12-31 23:59:59' : limitendtime ? formatDate() : '2099-12-31',\n              opens: opens,\n              drops: drops,\n              \"locale\": {\n                \"format\": format,\n                \"applyLabel\": \"确定\",\n                \"cancelLabel\": \"清除\",\n                \"daysOfWeek\": [\"日\", \"一\", \"二\", \"三\", \"四\", \"五\", \"六\"],\n                \"monthNames\": [\"一月\", \"二月\", \"三月\", \"四月\", \"五月\", \"六月\", \"七月\", \"八月\", \"九月\", \"十月\", \"十一月\", \"十二月\"],\n                \"firstDay\": 1\n              }\n            });\n          });\n        }, 200);\n      },\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {}]\n    };\n  }]);\n  directives.initDirective('dateTimePicker', [\"$timeout\", \"$compile\", \"$filter\", function ($timeout, $compile, $filter) {\n    return {\n      restrict: 'A',\n      require: '?ngModel',\n      scope: {\n        ngModel: '='\n      },\n      link: function link(scope, iElem, iAttr, ngModel) {\n        var datePicker;\n        var format = \"YYYY-MM-DD\";\n        var timepicker = false; //是否显示时分秒\n\n        var autoapply = true; //自动提交，如果timepicker==true时，不起作用\n\n        var timepicker24hour = true; //是否显示24小时制，如果timepicker==true时，才有作用\n\n        var timepickerseconds = true; //是否显示秒，如果timepicker==true时，才有作用\n\n        var iszero = false; // 初始化时是否显示00:00:00\n\n        var opens = \"right\"; //横方向 right left center\n\n        if (iAttr['opens']) {\n          opens = iAttr.opens;\n        }\n\n        var drops = \"up\"; //纵方向 up down\n\n        if (iAttr['drops']) {\n          drops = iAttr.drops;\n        } //通过页面标签读取，如果true（YYYY-MM-DD）false （YYYY-MM-DD HH:mm:ss）\n\n\n        if (iAttr['timepicker']) {\n          timepicker = iAttr.timepicker == 'true' ? true : false;\n          format = !timepicker ? 'YYYY-MM-DD' : 'YYYY-MM-DD HH:mm:ss';\n        }\n\n        if (iAttr['autoapply']) {\n          autoapply = iAttr.autoapply == 'true' ? true : false;\n        }\n\n        if (iAttr['timepicker24hour']) {\n          timepicker24hour = iAttr.timepicker24hour == 'true' ? true : false;\n        }\n\n        if (iAttr['timepickerseconds']) {\n          timepickerseconds = iAttr.timepickerseconds == 'true' ? true : false;\n        }\n\n        if (iAttr['iszero']) {\n          iszero = iAttr.iszero == 'true' ? true : false;\n        }\n\n        var i = 0;\n        iElem.on('show.daterangepicker', function (ev, picker) {\n          if (i == 1) {\n            i++;\n            iElem.trigger(\"click\");\n          }\n        });\n        iElem.on('hide.daterangepicker', function (ev, picker) {\n          i = 0;\n        });\n        iElem.on('showCalendar.daterangepicker', function (ev, picker) {\n          if (i == 0 && !iElem.val() && timepicker) {\n            i++;\n            var defDate = $filter('date')(new Date().getTime(), timepicker && !iszero ? 'yyyy-MM-dd HH:mm:ss' : 'yyyy-MM-dd');\n            picker.setStartDate(defDate);\n            picker.setEndDate(defDate);\n          } else if (i == 0 && scope['ngModel']) {\n            i++;\n            var date = scope['ngModel'];\n            picker.setStartDate(date);\n            picker.setEndDate(date);\n          }\n        });\n        iElem.on('apply.daterangepicker', function (ev, picker) {\n          datePicker = picker;\n          var startDate = picker.startDate.format(format);\n          scope.$apply(function () {\n            iElem.val(startDate);\n            if (ngModel) ngModel.$setViewValue(picker.startDate._d);\n\n            if (iAttr['ngClick']) {\n              var fun = scope.$parent[iAttr['ngClick']];\n\n              if (fun) {\n                fun();\n              }\n            }\n          });\n        });\n        iElem.on('cancel.daterangepicker', function (ev, picker) {\n          iElem.val(\"\");\n          if (ngModel) ngModel.$setViewValue(\"\");\n          var defDate = $filter('date')(new Date().getTime(), timepicker && !iszero ? 'yyyy-MM-dd HH:mm:ss' : 'yyyy-MM-dd');\n\n          if (picker) {\n            picker.setStartDate(defDate);\n            picker.setEndDate(defDate);\n          } else if (datePicker) {\n            datePicker.setStartDate(defDate);\n            datePicker.setEndDate(defDate);\n          }\n        });\n        scope.$watch(\"ngModel\", function (newValue, oldValue) {\n          if (!newValue && oldValue) {\n            iElem.trigger(\"cancel\");\n          }\n\n          if (newValue) {\n            iElem.val($filter('date')(new Date(newValue), timepicker && !iszero ? 'yyyy-MM-dd HH:mm:ss' : 'yyyy-MM-dd'));\n          }\n        });\n        $timeout(function () {\n          require(['bootstrap-daterangepicker'], function (daterangepicker) {\n            $(iElem).daterangepicker({\n              singleDatePicker: true,\n              showDropdowns: true,\n              timePicker: timepicker,\n              timePicker24Hour: timepicker24hour,\n              timePickerSeconds: timepickerseconds,\n              autoApply: autoapply,\n              autoUpdateInput: false,\n              minDate: timepicker ? '1980-01-01 00:00:00' : '1980-01-01',\n              maxDate: timepicker ? '2025-12-31 23:59:59' : '2025-12-31',\n              opens: opens,\n              drops: drops,\n              locale: {\n                format: format,\n                \"applyLabel\": \"确定\",\n                \"cancelLabel\": \"清除\",\n                \"daysOfWeek\": [\"日\", \"一\", \"二\", \"三\", \"四\", \"五\", \"六\"],\n                \"monthNames\": [\"一月\", \"二月\", \"三月\", \"四月\", \"五月\", \"六月\", \"七月\", \"八月\", \"九月\", \"十月\", \"十一月\", \"十二月\"]\n              }\n            }, function (start, end, label) {});\n          });\n        }, 200);\n      }\n    };\n  }]);\n  directives.initDirective('domainPicker', [\"$compile\", \"$timeout\", function ($compile, $timeout) {\n    return {\n      restrict: 'A',\n      link: function link(scope, iElem, iAttr, ngmodel) {\n        require(['bootstrap-treeview'], function (treeview) {\n          var getDomainList = function getDomainList(domains) {\n            if (iAttr.gatewaydomainpath) {\n              for (var i in domains) {\n                if (domains[i].domainPath == iAttr.gatewaydomainpath) return [domains[i]];else return getDomainList(domains[i].domains);\n              }\n            } else {\n              return domains;\n            }\n          };\n\n          iElem.on('shown.bs.popover', function () {\n            var treeview1 = $('#treeview1');\n            $compile(treeview1)(scope);\n            var domainListTree = getDomainList(scope.domainListTree);\n            treeview1.treeview({\n              data: domainListTree,\n              onNodeSelected: function onNodeSelected(event, node) {\n                if (node.domainPath != \"\") {\n                  iElem.attr(\"domainPath\", node.domainPath);\n                  iElem.popover(\"hide\");\n\n                  if (iAttr.model) {\n                    var arr = iAttr.model.split(\"\\.\");\n                    var model = scope;\n\n                    for (var i in arr) {\n                      if (model) {\n                        if (i == arr.length - 1) {\n                          model[arr[i]] = node.domainPath;\n                          break;\n                        }\n\n                        model = model[arr[i]];\n                      }\n                    }\n                  }\n\n                  iElem.val(node.name).change();\n                }\n              }\n            });\n          });\n        });\n      },\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        var domMain = $element;\n        $element.attr(\"readonly\", true);\n        $element.data('content', \"<div id ='treeview1' slim-scroll height='220px'></div>\");\n        $element.popover({\n          html: true,\n          trigger: 'manual',\n          placement: 'auto bottom'\n        });\n        $element.on(\"click\", function () {\n          $element.popover(\"show\");\n          $element.siblings(\".popover\").on(\"mouseleave\", function () {\n            $element.popover('hide');\n          });\n        });\n        $element.on(\"mouseleave\", function () {\n          setTimeout(function () {\n            if (!$(\".popover:hover\").length) {\n              $element.popover(\"hide\");\n            }\n          }, 100);\n        });\n      }]\n    };\n  }]);\n  directives.initDirective('modelPicker', [\"$compile\", \"$timeout\", function ($compile, $timeout) {\n    return {\n      restrict: 'A',\n      link: function link(scope, iElem, iAttr, ngmodel) {\n        require(['bootstrap-treeview'], function (treeview) {\n          if (iAttr.userparent) scope = scope.$parent;\n          iElem.on('shown.bs.popover', function () {\n            var treeview1 = $('#treeview1');\n            $compile(treeview1)(scope);\n            treeview1.treeview({\n              data: scope.rootModel[\"nodes\"],\n              onNodeSelected: function onNodeSelected(event, node) {\n                iElem.attr(\"modelId\", node.id);\n                iElem.popover(\"hide\");\n\n                if (iAttr.model) {\n                  var arr = iAttr.model.split(\"\\.\");\n                  var model = scope;\n\n                  for (var i in arr) {\n                    if (model) {\n                      if (i == arr.length - 1) {\n                        model[arr[i]] = node.id;\n                        break;\n                      }\n\n                      model = model[arr[i]];\n                    }\n                  }\n                }\n\n                iElem.val(node.label).change();\n              }\n            });\n          });\n        });\n      },\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        $element.attr(\"readonly\", true);\n        $element.data('content', \"<div id ='treeview1' slim-scroll height='220px'></div>\");\n        $element.popover({\n          html: true,\n          trigger: 'manual',\n          placement: 'auto bottom'\n        });\n        $element.on(\"click\", function () {\n          $element.popover(\"show\");\n          $element.siblings(\".popover\").on(\"mouseleave\", function () {\n            $element.popover('hide');\n          });\n        });\n        $element.on(\"mouseleave\", function () {\n          setTimeout(function () {\n            if (!$(\".popover:hover\").length) {\n              $element.popover(\"hide\");\n            }\n          }, 100);\n        });\n      }]\n    };\n  }]);\n  directives.initDirective('sensorPopover', [\"$compile\", \"$timeout\", function ($compile, $timeout) {\n    return {\n      restrict: 'A',\n      require: 'ngModel',\n      link: function link(scope, $element, iAttr, ngModel) {\n        $timeout(function () {\n          var htmlContent = '<div class=\"box form-group\" style=\"margin-bottom:0;border-top:0;width:400px;\">' + '<div class=\"box-header with-border\">' + '<h3 class=\"box-title\">' + iAttr.vlaue + '</h3>';\n          if (ngModel.$modelValue.directive) htmlContent += '<input type=\"checkbox\" class=\"switch\" data-size=\"mini\" data-on-text=\"关闭\" data-off-text=\"启动\" bootstrap-switch ngvalue=\"' + ngModel.$modelValue.kpiValue + '\" ngid=\"' + ngModel.$modelValue.directive.id + '\">';\n          htmlContent += '<div class=\"box-tools pull-right\">' + '<a href=\"#/emcsView/' + ngModel.$modelValue.id + '\" class=\"btn btn-box-tool\"><i class=\"fa fa-area-chart\">报表</i></a>' + '<a href=\"#/configAlert/' + ngModel.$modelValue.id + '/node\" class=\"btn btn-box-tool\"><i class=\"fa fa-warning\">告警</i></a>' + '<a href=\"#/resource_type/' + ngModel.$modelValue.modelId + '/alert\" class=\"btn btn-box-tool\"><i class=\"fa fa-cog\">阈值</i></a>' + '</div>' + '</div>' + '<div class=\"box-body no-padding\" >' + //\t\t\t\t\t\t'<div class=\"sparkline pad\" data-color=\"#fff\"></div>'+\n          '<div echarts3-dom name=\"sensorMain\" style=\"height:170px\"></div>' + '</div>' + '</div>';\n          $element.data('content', $compile(htmlContent)(scope));\n          $element.popover({\n            html: true,\n            trigger: 'manual',\n            placement: 'bottom'\n          }).on(\"click\", function () {\n            $element.popover(\"show\");\n            $element.siblings(\".popover\").on(\"mouseleave\", function () {\n              $element.popover('hide');\n            });\n          }).on(\"mouseleave\", function () {\n            setTimeout(function () {\n              if (!$(\".popover:hover\").length) {\n                $element.popover(\"hide\");\n              }\n            }, 100);\n          });\n\n          var initChart = function initChart(returnObj) {\n            var option = {\n              tooltip: {\n                trigger: 'axis'\n              },\n              grid: {\n                x: 55,\n                y: 10,\n                x2: 40,\n                y2: 25\n              },\n              toolbox: {\n                show: false,\n                feature: {\n                  mark: {\n                    show: true\n                  },\n                  dataView: {\n                    show: true,\n                    readOnly: false\n                  },\n                  magicType: {\n                    show: true,\n                    type: ['line', 'bar']\n                  },\n                  restore: {\n                    show: true\n                  },\n                  saveAsImage: {\n                    show: true\n                  }\n                }\n              },\n              calculable: true,\n              xAxis: [{\n                type: 'category',\n                boundaryGap: false,\n                data: returnObj.times\n              }],\n              yAxis: [{\n                type: 'value',\n                scale: true,\n                interval: iAttr.chartinterval ? Number(iAttr.chartinterval) : null,\n                min: iAttr.min ? Number(iAttr.min) : 'auto',\n                max: iAttr.max ? Number(iAttr.max) : 'auto',\n                axisLabel: {\n                  //                formatter: '{value} ' + (ngModel.$modelValue.unit == \"NA\" ? '' : ngModel.$modelValue.unit)\n                  formatter: '{value}'\n                }\n              }],\n              series: [{\n                name: iAttr.vlaue,\n                type: 'line',\n                data: returnObj.data,\n                markLine: {\n                  data: [{\n                    type: 'average',\n                    name: '平均值'\n                  }]\n                }\n              }]\n            };\n            $timeout(function () {\n              scope.$broadcast(Event.ECHARTINFOSINIT, {\n                \"name\": \"sensorMain\",\n                \"option\": option\n              });\n            });\n          };\n\n          $element.on('show.bs.popover', function () {\n            var instances = [];\n\n            if (ngModel.$modelValue.instance) {\n              instances.push(ngModel.$modelValue.instance);\n            }\n\n            scope.getHierarchyValue([ngModel.$modelValue.id], [ngModel.$modelValue.kpiCode], instances, function (returnObj) {\n              if (returnObj) {\n                initChart(returnObj);\n              }\n            });\n          });\n          $element.on('shown.bs.popover', function () {});\n          $element.on('hidden.bs.popover', function () {});\n        });\n      }\n    };\n  }]);\n  directives.initDirective('kpiSlick', [\"$timeout\", \"$compile\", function ($timeout, $compile) {\n    return {\n      restrict: 'A',\n      require: 'ngModel',\n      link: function link(scope, iElem, iAttr, ngmodel) {\n        require(['slick'], function (slick) {\n          $timeout(function () {\n            var fontsize = iAttr.fontsize ? iAttr.fontsize : '48px';\n            var slideIndex = 0;\n            var item = {\n              id: iAttr.itemid,\n              label: iAttr.itemlabel\n            };\n\n            var addSlick = function addSlick(newValue) {\n              // \n              if (slideIndex > 0) {\n                for (; slideIndex > 0; slideIndex--) {\n                  iElem.slick('slickRemove', slideIndex - 1);\n                }\n              }\n\n              for (var i in newValue) {\n                //              iElem.slick('slickAdd','<div style=\"margin-right: 10px;\" class=\"btn btn-social-icon '+newValue[i].stateStyle+'\" data-toggle=\"popover\" title=\"'+newValue[i].label+\":\"+newValue[i].value +'\"><i class=\"'+newValue[i].icon+'\"></i></div>');\n                var str = '<div ng-click=\"viewDetail(item)\" class=\"box-body\">' + '<p class=\"text-muted text-center\">' + (newValue[i].value != \"NA\" ? newValue[i].value : '-') + (newValue[i].value == 'NA' || newValue[i].unit == 'NA' ? '' : newValue[i].unit) + '</p>' + '<div style=\"width : 74px; height : 67px;\" class=\"btn ' + newValue[i].stateStyle + '\"><i style=\"font-size:' + fontsize + '\" class=\"' + newValue[i].icon + '\"></i></div>' + '<h5 class=\"text-center\">' + newValue[i].label + '</h5>' + '</div>';\n                iElem.slick('slickAdd', $compile(str)(scope));\n                slideIndex++;\n              }\n            };\n\n            scope.$watch(iAttr.ngModel, function (newValue) {\n              addSlick(newValue);\n            });\n            scope.$on(\"kpiSlickValue\", function (event, returnObj) {\n              if (iAttr.itemid == returnObj.id) {\n                addSlick(returnObj.value);\n              }\n            });\n          });\n        });\n      },\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        require(['slick'], function (slick) {\n          $element.slick({\n            dots: false,\n            arrows: true,\n            draggable: false,\n            slidesToScroll: 5,\n            variableWidth: true,\n            infinite: false\n          });\n        });\n      }]\n    };\n  }]);\n  directives.initDirective('slick', ['$timeout', function ($timeout) {\n    return {\n      restrict: 'A',\n      //\t\t\trequire: 'ngModel',\n      //\t\t\tlink: function(scope, iElem, iAttr,ngModel) {\n      link: function link(scope, iElem, iAttr) {\n        var init = false;\n        var requireFinish = false;\n        var slideIndex = 0;\n        var timesRenderFinish = false;\n        var autorender = true; //自动渲染\n\n        if (iAttr['autorender']) {\n          autorender = iAttr.autorender == 'true' ? true : false;\n        }\n\n        var autoplay = false;\n\n        if (iAttr['autoplay']) {\n          autoplay = iAttr.autoplay == 'true' ? true : false;\n        }\n\n        var autoplaySpeed = 3000;\n\n        if (iAttr['autoplayspeed']) {\n          autoplaySpeed = iAttr.autoplayspeed;\n        }\n\n        var arrows = false;\n\n        if (iAttr['arrows']) {\n          arrows = iAttr.arrows == 'true' ? true : false;\n        }\n\n        var dots = true;\n\n        if (iAttr['dots']) {\n          dots = iAttr.dots == 'true' ? true : false;\n        }\n\n        var variableWidth = false;\n\n        if (iAttr['variablesidth']) {\n          variableWidth = iAttr.variablesidth == 'true' ? true : false;\n        }\n\n        var draggable = true;\n\n        if (iAttr['draggable']) {\n          draggable = iAttr.draggable == 'true' ? true : false;\n        }\n\n        var slidesToScroll = 1;\n\n        if (iAttr['slidestoscroll']) {\n          slidesToScroll = iAttr.slidestoscroll;\n        }\n\n        var slidesToShow = 1;\n\n        if (iAttr['slidestoshow']) {\n          slidesToShow = iAttr.slidestoshow;\n        }\n\n        var infinite = false;\n\n        if (iAttr['infinite']) {\n          infinite = iAttr.infinite == 'true' ? true : false;\n        } // On before slide change\n\n\n        iElem.on('beforeChange', function (event, slick, currentSlide, nextSlide) {}); // On init\n\n        iElem.on('init', function (event, slick) {}); // On init\n\n        iElem.on('reInit', function (event, slick) {});\n        scope.$on('ngRepeatFinished', function (ngRepeatFinishedEvent) {\n          if (!init) requireFinish = true;\n        });\n\n        require(['slick'], function (slick) {\n          var render = function render() {\n            if (!init) init = true;else iElem.slick('unslick');\n            iElem.slick({\n              dots: dots,\n              arrows: arrows,\n              draggable: draggable,\n              swipeToSlide: true,\n              slidesToScroll: slidesToScroll,\n              slidesToShow: slidesToShow,\n              infinite: infinite,\n              autoplay: autoplay,\n              variableWidth: variableWidth,\n              autoplaySpeed: autoplaySpeed\n            });\n          };\n\n          if (autorender || requireFinish) {\n            $timeout(function () {\n              render();\n            });\n          } else {\n            scope.$on('ngRepeatFinished', function (ngRepeatFinishedEvent) {\n              if (!init) render();\n            });\n          }\n\n          scope.$on('ngRepeatDelFinished', function (event, params) {\n            $timeout(function () {\n              iElem.slick('slickRemove', true, true, true);\n              render();\n            }, 100);\n          });\n          scope.$watch(iAttr.ngModel, function (newVal, oldVal) {\n            if (newVal === oldVal) {\n              return;\n            }\n\n            if (init) {\n              iElem.slick('slickRemove', true, true, true);\n              render();\n            }\n          });\n        });\n      }\n    };\n  }]);\n  directives.initDirective('slimScroll', ['$timeout', '$parse', function ($timeout, $parse) {\n    return {\n      restrict: 'A',\n      link: function link(scope, iElem, iAttr) {\n        var init = function init() {\n          var clientHeight = $(window).height() - (iAttr.offseth ? Number(iAttr.offseth) : 200); //加了一个外部控制宽的判断\n\n          var clientWidth = \"auto\";\n          $timeout(function () {\n            iElem.slimScroll({\n              width: iAttr.width ? iAttr.width : clientWidth,\n              //可滚动区域宽度\n              height: iAttr.height ? iAttr.height : clientHeight //可滚动区域高度\n              //              size: '10px', //组件宽度\n              //              color: '#000', //滚动条颜色\n              //              position: 'right', //组件位置：left/right\n              //              distance: '0px', //组件与侧边之间的距离\n              //              start: 'top', //默认滚动位置：top/bottom\n              //              opacity: .4, //滚动条透明度\n              //              alwaysVisible: true, //是否 始终显示组件\n              //              disableFadeOut: false, //是否 鼠标经过可滚动区域时显示组件，离开时隐藏组件\n              //              railVisible: true, //是否 显示轨道\n              //              railColor: '#333', //轨道颜色\n              //              railOpacity: .2, //轨道透明度\n              //              railDraggable: true, //是否 滚动条可拖动\n              //              railClass: 'slimScrollRail', //轨道div类名 \n              //              barClass: 'slimScrollBar', //滚动条div类名\n              //              wrapperClass: 'slimScrollDiv', //外包div类名\n              //              allowPageScroll: true, //是否 使用滚轮到达顶端/底端时，滚动窗口\n              //              wheelStep: 20, //滚轮滚动量\n              //              touchScrollStep: 200, //滚动量当用户使用手势\n              //              borderRadius: '7px', //滚动条圆角\n              //              railBorderRadius: '7px' //轨道圆角\n\n            });\n          });\n        };\n\n        if (iAttr.hasOwnProperty(\"ngHide\") || iAttr.hasOwnProperty(\"ngShow\")) {\n          iAttr.$observe('ngShow', function (expr) {\n            scope.$watch(function () {\n              return $parse(expr)(scope);\n            }, function (value) {\n              if (value) {\n                init();\n              }\n            });\n          });\n        } else {\n          init();\n        }\n      }\n    };\n  }]);\n  directives.initDirective('iCheck', [\"$timeout\", \"$parse\", function ($timeout, $parse) {\n    return {\n      link: function link($scope, element, $attrs) {\n        require(['iCheck'], function (iCheck) {\n          var boxClass = $attrs['boxclass'];\n          var radioClass = $attrs['radioclass'];\n\n          if (!$attrs['boxclass']) {\n            boxClass = 'icheckbox_square-blue';\n          }\n\n          if (!$attrs['radioclass']) {\n            radioClass = 'iradio_square-blue';\n          }\n\n          var value = $attrs['value'],\n              ngModelGetter = $parse($attrs['ngModel']);\n          return $timeout(function () {\n            $scope.$watch($attrs.ngModel, function (newValue) {\n              $(element).iCheck('update');\n            });\n            $(element).iCheck({\n              labelHover: false,\n              checkboxClass: boxClass,\n              increaseArea: '20%',\n              radioClass: radioClass\n            }).on('ifChanged', function (event) {\n              if ($attrs['change']) {\n                var fun = $scope[$attrs['change']];\n\n                if (fun) {\n                  fun($scope.item);\n                }\n              }\n\n              var elemType = $(element).attr('type');\n\n              if (elemType === 'checkbox' && $attrs.ngModel) {\n                $scope.$apply(function () {\n                  return ngModelGetter.assign($scope, event.target.checked);\n                });\n              } else if (elemType === 'radio' && $attrs.ngModel) {\n                return $scope.$apply(function () {\n                  return ngModelGetter.assign($scope, value);\n                });\n              }\n            });\n          });\n        });\n      }\n    };\n  }]);\n  directives.initDirective('baiduWeather', [\"$timeout\", \"$parse\", \"$http\", \"weatherService\", function ($timeout, $parse, $http, weatherService) {\n    return {\n      restrict: 'A',\n      templateUrl: function templateUrl(o, attrs) {\n        return attrs.templateurl ? attrs.templateurl : 'partials/weather.html';\n      },\n      link: function link($scope, $element, $attrs) {\n        return $timeout(function () {\n          var initChart = function initChart(returnObj) {\n            var data = [];\n            var maxData = [];\n            var minData = [];\n\n            if ($scope.weathers.data && $scope.weathers.data.error == 0) {\n              for (var i = 1; i < 4; i++) {\n                var weather = $scope.weathers.data.results[0].weather_data[i];\n                data.push(weather.date);\n                var arr = weather.temperature.split(\" ~ \");\n                maxData.push(arr[0]);\n                minData.push(arr[1].split(\"℃\")[0]);\n              }\n            }\n\n            var option = {\n              tooltip: {\n                trigger: 'axis'\n              },\n              grid: {\n                borderWidth: 0,\n                x: 15,\n                y: 5,\n                x2: 15,\n                y2: 5\n              },\n              toolbox: {\n                show: false,\n                feature: {\n                  mark: {\n                    show: true\n                  },\n                  dataView: {\n                    show: true,\n                    readOnly: false\n                  },\n                  magicType: {\n                    show: true,\n                    type: ['line', 'bar']\n                  },\n                  restore: {\n                    show: true\n                  },\n                  saveAsImage: {\n                    show: true\n                  }\n                }\n              },\n              calculable: true,\n              xAxis: [{\n                type: 'category',\n                show: false,\n                boundaryGap: false,\n                data: data\n              }],\n              yAxis: [{\n                type: 'value',\n                show: false,\n                axisLabel: {\n                  formatter: '{value} °C'\n                }\n              }],\n              series: [{\n                name: '最高气温',\n                type: 'line',\n                data: maxData\n              }, {\n                name: '最低气温',\n                type: 'line',\n                data: minData\n              }]\n            };\n            $timeout(function () {\n              $scope.$broadcast(Event.ECHARTINFOSINIT, {\n                \"name\": \"weatherMain\",\n                \"option\": option\n              });\n            });\n          };\n\n          $scope.$on('updateWeatherFinish', function (event, params) {\n            initChart();\n          });\n\n          $scope.updateWeather = function (city) {\n            weatherService.getWeatherByCity(city, function (returnObj) {\n              if (returnObj.code == 0) {\n                $scope.weathers = {\n                  data: JSON.parse(returnObj.data)\n                };\n                $scope.$broadcast(\"updateWeatherFinish\");\n              }\n            });\n          };\n\n          $scope.$watch($attrs.ngModel, function (newValue) {\n            if (!newValue) newValue = \"北京\";\n            $scope.updateWeather(newValue);\n          });\n        });\n      }\n    };\n  }]);\n  directives.initDirective('dateLabel', ['$compile', '$timeout', '$filter', function ($compile, $timeout, $filter) {\n    return {\n      restrict: 'EA',\n      link: function link(scope, iElem, iAttr, ngmodel) {\n        var myJsDate = $filter('date')(iAttr.value, iAttr.format);\n        iElem.context.innerHTML = myJsDate;\n      }\n    };\n  }]);\n  directives.initDirective('sglclick', ['$parse', function ($parse) {\n    return {\n      restrict: 'A',\n      link: function link(scope, element, attr) {\n        var fn = $parse(attr['sglclick']);\n        var delay = 100,\n            clicks = 0,\n            timer = null;\n        element.on('click', function (event) {\n          clicks++; //count clicks\n\n          if (clicks === 1) {\n            timer = setTimeout(function () {\n              scope.$apply(function () {\n                fn(scope, {\n                  $event: event\n                });\n              });\n              clicks = 0; //after action performed, reset counter\n            }, delay);\n          } else {\n            clearTimeout(timer); //prevent single-click action\n\n            clicks = 0; //after action performed, reset counter\n          }\n        });\n      }\n    };\n  }]);\n  directives.initDirective('bootstrapSwitch', function () {\n    return {\n      restrict: 'A',\n      link: function link(scope, element, attrs) {\n        require(['bootstrap-switch'], function (bootstrapSwitch) {\n          $(element).bootstrapSwitch({\n            state: attrs['ngvalue'] == 0 ? false : true\n          });\n          $(element).on('switchChange.bootstrapSwitch', function (e, data) {\n            if (scope[attrs['model']] == data) return;\n            scope.$emit(\"switchChange\", {\n              nodeId: \"\",\n              id: attrs['ngid'],\n              itemDirValues: data ? 1 : 0\n            });\n          });\n\n          if (attrs.hasOwnProperty('model')) {\n            scope.$watch(attrs['model'], function (newValue, oldValue) {\n              if (newValue != oldValue) $(element).bootstrapSwitch('state', newValue);\n            });\n          }\n        });\n      }\n    };\n  });\n  directives.initDirective('select2', ['$parse', function ($parse) {\n    return {\n      restrict: 'A',\n      require: '?ngModel',\n      link: function link(scope, element, attrs, ngModel) {\n        //同一个Dom中存在时，跳出\n        //    if(element.context.children.length > 0) return; 已经没有在行内选择的场景，去掉\n        //初始化状态\n        var initStatus = false; //如初始化、销毁\n\n        var destroySelect2 = function destroySelect2(selectData) {\n          if (initStatus) {\n            initStatus = false;\n            var instance = $(element).data('select2');\n\n            if (instance) {\n              $(element).select2('destroy');\n\n              if (selectData) {\n                $(element).empty();\n              }\n            }\n          }\n        }; //初始化\n\n\n        var init = function init(selectData) {\n          require(['select2'], function (select2) {\n            //如果Dom为ng-show控制时，监听变化\n            if ($(element).hasClass(\"ng-hide\")) {\n              attrs.$observe('ngShow', function (expr) {\n                scope.$watch(function () {\n                  return $parse(expr)(scope);\n                }, function (value) {\n                  if (value) {\n                    init(scope[attrs[\"selectdata\"]]);\n                  } else {\n                    destroySelect2(selectData);\n                  }\n                });\n              });\n              return;\n            } //判断是否销毁\n\n\n            destroySelect2(selectData);\n            var baseSelect2 = {\n              multiple: false,\n              language: {\n                noResults: function noResults() {\n                  return attrs.noresults ? attrs.noresults : \"没有该匹配项\";\n                }\n              },\n              placeholder: attrs.placeholder ? attrs.placeholder : \"请选择...\"\n            };\n\n            if (selectData) {\n              baseSelect2.data = selectData;\n            }\n\n            $(element).children(\"[value$='?']\").remove(); //实例化select2\n\n            $(element).select2(baseSelect2);\n            initStatus = true; //设置select2为空\n\n            scope.select2init = function (value) {\n              $(element).val(value).trigger(\"change.select2\");\n            };\n\n            $(element).on(\"select2:select\", function (evt) {\n              if (evt.params) {\n                var fun = scope[attrs.itemchange];\n\n                if (fun) {\n                  fun(evt.params.data);\n                }\n              }\n            });\n\n            if (!ngModel.$modelValue) {\n              scope.select2init();\n            }\n          });\n        };\n\n        scope.$watch(attrs.ngModel, function (n, o) {\n          if (n && !o) {\n            if (initStatus) {\n              init();\n            }\n          } else {\n            init();\n          }\n        }); //监听数据源，如果为null时监听变化，注意：selectdata的源一定要初始状态为null\n\n        scope.$watch(attrs.selectdata, function (n, o, s) {\n          if (n && n.length > 0 || n != o) {\n            scope.$evalAsync(function () {\n              init();\n            });\n          }\n        });\n      }\n    };\n  }]);\n  directives.initDirective('bootstrapMultiselect', function () {\n    return {\n      restrict: 'A',\n      //    require: 'ngModel',\n      link: function link(scope, element, attrs) {\n        require(['bootstrap-multiselect'], function (multiselect) {\n          element.multiselect({\n            nonSelectedText: attrs.nonselectedtext ? attrs.nonselectedtext : '请选择...',\n            numberDisplayed: attrs.numberdisplayed ? attrs.numberdisplayed : 5,\n            nSelectedText: '项被选中',\n            allSelectedText: '全选中',\n            enableFiltering: attrs.enablefiltering == 'true' ? true : false,\n            filterPlaceholder: '搜索',\n            templates: {\n              filter: '<li class=\"multiselect-item multiselect-filter\"><div class=\"input-group\"><input class=\"form-control multiselect-search\" type=\"text\"></div></li>'\n            },\n            buttonWidth: attrs.buttonwidth ? attrs.buttonwidth : '',\n            //        selectedClass: 'disabled',\n            buttonClass: attrs.buttonclass ? attrs.buttonclass : 'btn btn-default btn-sm',\n            onDropdownShow: function onDropdownShow(option, checked) {\n              //如果没有数据加一个提示语\n              var selLength = $(\".multiselect-group select option\");\n\n              if (selLength.length == 0) {\n                $(\".multiselect-group select\").append(\"<option value='Value'>没有该匹配项</option>\");\n                element.multiselect('rebuild'); // $(\".multiselect-group ul li:first-child\").css(\"display\",\"none\");\n\n                $(\".multiselect-group ul li:last-child\").html('<label  style=\"cursor:default;text-align: center;display: inline-block;width: 100%;font-weight: 400;\"> 没有该匹配项</label>');\n                $(\".multiselect-group select\").empty();\n              }\n            },\n            onChange: function onChange(option, checked) {// Get selected options.\n              //              var selectedOptions = element.find('option:selected');\n              //              var values = [];\n              //              selectedOptions.each(function() {\n              //                values.push($(this).val());\n              //              });\n              //              ngModel = values;\n              //              if (selectedOptions.length >= 4) {\n              //                  // Disable all other checkboxes.\n              //                  var nonSelectedOptions = $('#example-limit option').filter(function() {\n              //                      return !$(this).is(':selected');\n              //                  });\n              // \n              //                  var dropdown = $('#example-limit').siblings('.multiselect-container');\n              //                  nonSelectedOptions.each(function() {\n              //                      var input = $('input[value=\"' + $(this).val() + '\"]');\n              //                      input.prop('disabled', true);\n              //                      input.parent('li').addClass('disabled');\n              //                  });\n              //              }\n              //              else {\n              //                  // Enable all checkboxes.\n              //                  var dropdown = $('#example-limit').siblings('.multiselect-container');\n              //                  $('#example-limit option').each(function() {\n              //                      var input = $('input[value=\"' + $(this).val() + '\"]');\n              //                      input.prop('disabled', false);\n              //                      input.parent('li').addClass('disabled');\n              //                  });\n              //              }\n            }\n          });\n          scope.$watch(function () {\n            return element[0].length;\n          }, function () {\n            element.multiselect('rebuild');\n          }); // Watch for any changes from outside the directive and refresh\n\n          if (attrs.selectvalues) {\n            element.multiselect('select', attrs.selectvalues.split(\",\"));\n            attrs.selectvalues = \"\";\n          } else {\n            scope.$watch(attrs.ngModel, function (newVal, oldVal) {\n              if (newVal) {\n                if (attrs.selectvalues) {\n                  element.multiselect('select', attrs.selectvalues.split(\",\"));\n                  attrs.selectvalues = \"\";\n                } else {\n                  element.multiselect('refresh');\n                }\n              }\n            });\n          }\n        });\n      }\n    };\n  });\n  directives.initDirective('uploaderDiv', function () {\n    return {\n      restrict: 'AE',\n      template: '<div class=\"input-group\">' + '<input id=\"nv-file-select\" style=\"display:none\" class=\"form-control input-sm\" type=\"file\" nv-file-select uploader=\"uploader\">' + '<input type=\"text\" disabled class=\"form-control input-sm\" ng-model=\"uploader.queue[0].file.name\" placeholder=\"请选择一个文件\">' + '<span class=\"input-group-btn\">' + '<button class=\"btn btn-default btn-sm\" type=\"button\" ng-click=\"toggle()\"><i class=\"proudsmart ps-add\"></i></button>' + '</span>' + '</div>',\n      replace: true,\n      link: function link(scope, element, attrs) {\n        scope.toggle = function toggle() {\n          $('#nv-file-select').click();\n        };\n      }\n    };\n  });\n  directives.initDirective('uploaderDiv2', [\"$rootScope\", function (rootScope) {\n    return {\n      restrict: 'AE',\n      scope: {},\n      template: '<div class=\"input-group\">' + '<input id=\"nv-file-select\" style=\"display:none\" class=\"form-control input-sm\" type=\"file\" nv-file-select uploader=\"uploader\">' + '<input type=\"text\" disabled class=\"form-control input-sm\" ng-model=\"uploader.fileBelongDic[fileBelongId][0].file.name\" placeholder=\"请选择一个文件\">' + '<span class=\"input-group-btn\">' + '<button class=\"btn btn-default btn-sm\" type=\"button\" ng-show=\"!uploader.fileBelongDic[fileBelongId] || uploader.fileBelongDic[fileBelongId].length == 0\" title=\"添加文件\" ng-click=\"toggle()\"><i class=\"proudsmart ps-add\"></i></button>' + '<button class=\"btn btn-default btn-sm\" type=\"button\" ng-show=\"uploader.fileBelongDic[fileBelongId].length > 0\" title=\"上传\" ng-click=\"uploader.uplaodHandler()\"><i class=\"glyphicon glyphicon-upload\"></i></button>' + '<button class=\"btn btn-default btn-sm\" type=\"button\" ng-show=\"uploader.fileBelongDic[fileBelongId].length > 0\" title=\"清空\" ng-click=\"uploader.clearHandler()\"><i class=\"glyphicon glyphicon-trash\"></i></button>' + '</span>' + '</div>',\n      replace: true,\n      controller: ['$scope', '$element', '$attrs', function (scope, element, attrs) {\n        scope.uploader = rootScope.uploader;\n      }],\n      link: function link(scope, element, attrs) {\n        scope.fileBelongId = element[0].parentElement.id;\n\n        scope.toggle = function toggle() {\n          if (scope.uploader.queue.length > 0) {\n            scope.uploader.growl(\"当前有未上传的文档，请上传或者清空\");\n            return;\n          }\n\n          rootScope.uploader.fileBelongId = scope.fileBelongId;\n          $('#nv-file-select').click();\n        };\n      }\n    };\n  }]);\n  directives.initDirective('sortable', ['$timeout', '$compile', '$filter', function ($timeout, $compile, $filter) {\n    return {\n      restrict: 'E',\n      scope: {\n        ngModel: \"=\",\n        source: \"=\",\n        target: \"=\",\n        eventUpdate: \"&\",\n        setting: \"=\"\n      },\n      template: '<div ng-class=\"setting.boxClass\">' + '<ul ng-class = \"setting.ulClass\">' + '<li ng-repeat=\"item in source\" id=\"{{item.id}}\" ng-class=\"setting.liClass\">{{item.label}}</li>' + '</ul>' + '<ul ng-class = \"setting.ulClass\"> ' + ' <li ng-repeat = \"item in target\" ng-class = \"setting.liClass\" id = \"{{item.id}}\" > {{item.label}} </li>' + '</ul>' + '</div>',\n      link: function link(scope, element, attrs, ngModel) {\n        //样式 最外层div必须有高\n        if (!scope.setting.boxClass) {\n          $(element).css(\"height\", \"300px\");\n        }\n\n        var render = function render(data) {\n          var uls = $(element).find('ul');\n          var delay = 50,\n              distance = 3,\n              cursor = \"move\",\n              cancel,\n              dropOnEmpty = true,\n              placeholder = \"\",\n              typeObj = {};\n\n          if (scope.setting && scope.setting['placeholder']) {\n            placeholder = scope.setting.placeholder;\n          }\n\n          if (scope.setting && scope.setting['delay']) {\n            delay = scope.setting['delay'];\n          }\n\n          if (scope.setting && scope.setting['distance']) {\n            distance = scope.setting['distance'];\n          }\n\n          if (scope.setting && scope.setting['type']) {\n            if (scope.setting['type'] == 'connectWith') {\n              //type = connectWith 是双项，默认为单项\n              typeObj = {\n                connectWith: 'ul'\n              };\n            }\n          }\n\n          require(['jquery-ui'], function (sort) {\n            uls.sortable($.extend(typeObj, {\n              delay: delay,\n              distance: distance,\n              dropOnEmpty: dropOnEmpty,\n              placeholder: placeholder,\n              helper: \"clone\",\n              items: \">li\",\n              // 指定哪些条目是可排序\n              // cancel: cancel, //取消排序（但仍为防止目标）\n              cursor: cursor,\n              //\"crosshair\",\"auto\",\n              revert: true,\n              //sortable 项目是否使用一个流畅的动画还原到它的新位置\n              scroll: true,\n              //如果设置为 true，当到达边缘时页面会滚动。\n              scrollSensitivity: 10,\n              //定义鼠标距离边缘多少距离时开始滚动。\n              update: function update(event, ui) {\n                var as = $(this).sortable(\"serialize\", {\n                  key: \"id\"\n                });\n                var asAry = as.split(\"&\");\n                var totalAry = asAry.map(function (item) {\n                  var itemAry = item.split(\"=\");\n                  return {\n                    id: parseInt(itemAry[1])\n                  };\n                });\n                scope.$apply(function () {\n                  scope.eventUpdate({\n                    as: as\n                  });\n                });\n                return totalAry;\n              },\n              remove: function remove(event, ui) {\n                var id = ui.item.attr('id').split(\"_\")[1];\n                return {\n                  id: id,\n                  label: ui.item.html()\n                };\n              },\n              activate: function activate(event, ui) {}\n            })).disableSelection();\n          });\n        };\n\n        scope.watch = {};\n        scope.watch.source = scope.source;\n        scope.watch.target = scope.target;\n        scope.$watch('watch', function (n, o, s) {\n          if (n) {\n            render(n);\n          }\n        });\n      }\n    };\n  }]);\n});"],"sourceRoot":"/source/"}