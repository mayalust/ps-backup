{"version":3,"sources":["solution/customview/test.js"],"names":["define","theme","on","init","event","target","finshTimeType","getRootScope","getAllUserInfo","Dictionary","title","commitTimeUtc","sponsorName","participantName","finshTimeTypeName","statusName","resource","getValue","getTableData1","params","pageRequest","cb","getTicketsByConditionAndPage","tc","data","forEach","ele","useMomentFormat","commitTime","values","sponsor","participant","elem","valueCode","timeLimit","label","status","total","e","render","datas","format","i","item","explainDic","push","name","type","content","icon","class","click","obj","task","row","option","createSystemPopupByLocalPath","width","deviceId","id","theTicketType","commitBeginTime","commitEndTime","paging","off"],"mappings":"AAAAA,OAAO,CACLC,MAAS,OACTC,GAAM,CACJC,KAAQ,SAAcC,GACpB,IAAIC,EAASD,EAAMC,OACfC,EAAgBD,EAAOE,aAAa,WAAW,cAC/CC,EAAiBH,EAAOE,aAAa,kBAGrCE,EAAa,CACfC,MAAO,OACPC,cAAe,OACfC,YAAa,QACbC,gBAAiB,QACjBC,kBAAmB,KACnBC,WAAY,MAGVC,EAAWX,EAAOY,SAAS,mBAM/B,SAASC,EAAcC,EAAQC,EAAaC,GAC1ChB,EAAOiB,6BAA6BH,EAAQC,EAAa,SAAUG,GACjEA,EAAGC,KAAKC,QAAQ,SAAUC,GACxBA,EAAIf,cAAgBgB,gBAAgBD,EAAIE,WAAY,uBACpDF,EAAId,YAAcJ,EAAekB,EAAIG,OAAOC,SAC5CJ,EAAIb,gBAAkBL,EAAekB,EAAIG,OAAOE,aAChDzB,EAAcmB,QAAQ,SAAUO,GAC1BA,EAAKC,WAAaP,EAAIG,OAAOK,YAC/BR,EAAIZ,kBAAoBkB,EAAKG,SAGjCT,EAAIX,WAA2B,KAAdW,EAAIU,OAAgB,OAAS,QAEhDf,EAAGE,EAAGC,KAAMD,EAAGc,SAlBnBhC,EAAOH,GAAG,WAAY,SAAUoC,GAC9BtB,EAAWsB,EACXC,EAAO,MAqBT,IAAIA,EAAS,SAAgBC,EAAOF,GAClC,IAAIG,EAAS,GAEb,IAAK,IAAIC,KAAKjC,EAAY,CACxB,IAAIkC,EAAOtC,EAAOuC,WAAWF,EAAGjC,EAAWiC,IAC3CD,EAAOI,KAAKF,GAGdF,EAAOI,KAAK,CACVC,KAAM,KACNC,KAAM,cACNC,QAAS,CAAC,CACRb,MAAO,OACPc,KAAM,OACNC,MAAO,yBACPhD,GAAI,CACFiD,MAAO,SAAenB,GACpB,IAAIoB,EAAM,CACRC,KAAQrB,EAAKsB,IACbC,OAAU,QAEZlD,EAAOmD,6BAA6B,WAAY,CAC9CC,MAAO,MACP/C,MAAO,QACN0C,SAMX,IAAIjC,EAAS,CACXU,OAAU,CACR6B,SAAU1C,EAAS2C,GACnBC,cAAe,OACfC,gBAAmBvB,EAAIA,EAAEuB,gBAAkB,GAC3CC,cAAiBxB,EAAIA,EAAEwB,cAAgB,GACvC/B,YAAeO,EAAIA,EAAEP,YAAc,KAGvC1B,EAAOkC,OAAO,CACZf,KAAMgB,EACNrB,OAAQA,EACR4C,OAAQ7C,EACRuB,OAAQA,KAIZpC,EAAO2D,IAAI,iBACX3D,EAAOH,GAAG,gBAAiB,SAAUoC,GACnCC,EAAO,GAAID","file":"solution/customview/test.js","sourcesContent":["define({\n  \"theme\": \"dark\",\n  \"on\": {\n    \"init\": function init(event) {\n      var target = event.target;\n      var finshTimeType = target.getRootScope(\"myDicts\")[\"finshTimeType\"];\n      var getAllUserInfo = target.getRootScope(\"getAllUserInfo\"); //--------------------------自定义输入-----------------------------\n      //从结果返回数据中的一组，拷贝过来作为参照，使用完之后删掉\n\n      var Dictionary = {\n        title: \"报警信息\",\n        commitTimeUtc: \"发起时间\",\n        sponsorName: \"会诊发起人\",\n        participantName: \"会诊参与人\",\n        finshTimeTypeName: \"时限\",\n        statusName: \"状态\"\n      }; // 获取设备id\n\n      var resource = target.getValue(\"global/resource\");\n      target.on(\"resource\", function (e) {\n        resource = e;\n        render([]);\n      });\n\n      function getTableData1(params, pageRequest, cb) {\n        target.getTicketsByConditionAndPage(params, pageRequest, function (tc) {\n          tc.data.forEach(function (ele) {\n            ele.commitTimeUtc = useMomentFormat(ele.commitTime, \"yyyy-MM-dd hh:mm:ss\");\n            ele.sponsorName = getAllUserInfo[ele.values.sponsor];\n            ele.participantName = getAllUserInfo[ele.values.participant];\n            finshTimeType.forEach(function (elem) {\n              if (elem.valueCode == ele.values.timeLimit) {\n                ele.finshTimeTypeName = elem.label;\n              }\n            });\n            ele.statusName = ele.status == 200 ? \"协同完毕\" : \"待协同\";\n          });\n          cb(tc.data, tc.total);\n        });\n      } //--------------------------自定义输入-----------------------------\n\n\n      var render = function render(datas, e) {\n        var format = [];\n\n        for (var i in Dictionary) {\n          var item = target.explainDic(i, Dictionary[i]);\n          format.push(item);\n        }\n\n        format.push({\n          name: \"操作\",\n          type: \"buttonGroup\",\n          content: [{\n            label: \"诊断详情\",\n            icon: \"null\",\n            class: \"btn btn-default btn-sm\",\n            on: {\n              click: function click(elem) {\n                var obj = {\n                  \"task\": elem.row,\n                  \"option\": \"look\"\n                };\n                target.createSystemPopupByLocalPath(\"xtdetail\", {\n                  width: \"40%\",\n                  title: \"诊断详情\"\n                }, obj);\n              }\n            }\n          }]\n        }); // 表格需要传递的参数\n\n        var params = {\n          \"values\": {\n            deviceId: resource.id,\n            theTicketType: \"join\",\n            \"commitBeginTime\": e ? e.commitBeginTime : \"\",\n            \"commitEndTime\": e ? e.commitEndTime : \"\",\n            \"participant\": e ? e.participant : \"\"\n          }\n        };\n        target.render({\n          data: datas,\n          params: params,\n          paging: getTableData1,\n          format: format\n        });\n      };\n\n      target.off(\"queryTabelOne\");\n      target.on(\"queryTabelOne\", function (e) {\n        render([], e);\n      });\n    }\n  }\n});"],"sourceRoot":"/source/"}