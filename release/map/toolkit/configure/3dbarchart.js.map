{"version":3,"sources":["toolkit/configure/3dbarchart.js"],"names":["define","d3","init","tg","option","WIDTH","HEIGHT","AlARMPOINT","color","title","svg","select","wholewrap","selectAll","append","wrap","bottomWrap","rect","innerBottom","innerRect","innerShadow","innerTop","highlight","alarmWrapShadow","top","defs","alarmWrap","alarm","alarmShadow","alarmHighlight","text","hitarea","events","creatGradient","id","config","color1","color2","type","x1","y1","x2","r","y2","fx","fy","offset1","offset2","linearGradient","attr","style","setAttr","i","this","setStyle","threeDbar","call","transform","fill","font-size","font-weight","cx","cy","width","height","opacity","cursor","rx","ry","on","event","prototype","setColor","clr","setPos","pos","x","y","setValue","value","transition","duration","eventName","handler","setAlarmStatus","status"],"mappings":"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","file":"toolkit/configure/3dbarchart.js","sourcesContent":["/**\n * Created by leonlin on 16/11/3.\n */\ndefine(['d3'], function (d3) {\n  return {\n    init: function init(tg, option) {\n      var WIDTH = 20;\n      var HEIGHT = 80;\n      var AlARMPOINT = WIDTH / 3.2;\n      var color = \"#2d8ee5\";\n      var alarmColor = \"#00e55d\";\n      var title = option.title;\n      var svg = d3.select(tg);\n      var viewport = svg.selectAll(\".viewport\");\n      var wholewrap = viewport.append(\"g\");\n      var wrap = wholewrap.append(\"g\");\n      var bottomWrap = wrap.append(\"ellipse\");\n      var bottom = wrap.append(\"ellipse\");\n      var rect = wrap.append(\"rect\");\n      var innerBottom = wrap.append(\"ellipse\");\n      var innerRect = wrap.append(\"rect\");\n      var innerShadow = wrap.append(\"rect\");\n      var innerTop = wrap.append(\"ellipse\");\n      var highlight = wrap.append(\"rect\");\n      var alarmWrapShadow = wrap.append(\"circle\");\n      var top = wrap.append(\"ellipse\");\n      var defs = svg.select(\"defs\");\n      var alarmWrap = wrap.append(\"circle\");\n      var alarm = wrap.append(\"circle\");\n      var alarmShadow = wrap.append(\"circle\");\n      var alarmHighlight = wrap.append(\"circle\");\n      var text = wholewrap.append(\"text\");\n      var hitarea = wholewrap.append(\"rect\");\n      var events = {};\n\n      var creatGradient = function creatGradient(id, config) {\n        var id = id;\n        var color1 = config.color1 || \"#000\";\n        var color2 = config.color2 || \"#fff\";\n        var type = config.type || \"linearGradient\";\n        var x1 = config.x1 || \"0%\";\n        var y1 = config.y1 || \"0%\";\n        var x2 = config.x2 || \"100%\";\n        var y2 = config.y2 || \"0%\";\n        var r = config.r;\n        var fx = config.fx;\n        var fy = config.fy;\n        var offset1 = config.offset1 || \"0%\";\n        var offset2 = config.offset2 || \"100%\";\n        var linearGradient = defs.append(type).attr(\"id\", id).attr(\"x1\", x1).attr(\"y1\", y1).attr(\"x2\", x2).attr(\"r\", r).attr(\"fx\", fx).attr(\"fy\", fy);\n        var stop1 = linearGradient.append(\"stop\").attr(\"offset\", offset1).style(\"stop-color\", color1);\n        var stop2 = linearGradient.append(\"stop\").attr(\"offset\", offset2).style(\"stop-color\", color2);\n      };\n\n      var setAttr = function setAttr(config) {\n        var cur = this;\n\n        for (var i in config) {\n          cur.attr(i, config[i]);\n        }\n      };\n\n      var setStyle = function setStyle(config) {\n        var cur = this;\n\n        for (var i in config) {\n          cur.style(i, config[i]);\n        }\n      };\n\n      function threeDbar() {\n        wrap.attr(\"transform\", \"scale(1,-1)\");\n        text.text(title);\n        setAttr.call(text, {\n          transform: \"translate(-12, \" + HEIGHT / 5 + \")\"\n        });\n        setStyle.call(text, {\n          fill: \"#f1d516\",\n          \"font-size\": \"12px\",\n          \"font-weight\": \"bold\"\n        });\n        creatGradient(\"innerShadow\", {\n          color1: \"rgba(0,0,0,.2)\",\n          color2: \"rgba(0,0,0,0)\",\n          x1: \"0%\",\n          x2: \"0%\",\n          y1: \"100%\"\n        });\n        creatGradient(\"wrapShadow\", {\n          color1: \"#999\",\n          color2: \"#ccc\",\n          x1: \"0%\",\n          x2: \"0%\",\n          y1: \"100%\"\n        });\n        creatGradient(\"alarmShadow\", {\n          type: \"radialGradient\",\n          color1: \"rgba(0,0,0,0)\",\n          color2: \"rgba(0,0,0,.3)\",\n          x1: \"0%\",\n          x2: \"0%\",\n          r: \"50%\",\n          fx: \"50%\",\n          fy: \"50%\"\n        });\n        creatGradient(\"alarmWrapShadow\", {\n          type: \"radialGradient\",\n          color1: \"rgba(0,0,0,.3)\",\n          color2: \"rgba(0,0,0,0)\",\n          x1: \"0%\",\n          x2: \"0%\",\n          r: \"50%\",\n          fx: \"50%\",\n          fy: \"50%\"\n        });\n        creatGradient(\"highlight\", {\n          color1: \"rgba(250,250,250,1)\",\n          color2: \"rgba(250,250,250,0)\",\n          x1: \"0%\",\n          x2: \"0%\",\n          y1: \"100%\"\n        });\n        creatGradient(\"alarmHighlight\", {\n          color1: \"rgba(250,250,250,1)\",\n          color2: \"rgba(250,250,250,0)\",\n          x1: \"0%\",\n          y1: \"100%\",\n          x2: \"0%\",\n          y2: \"0%\",\n          offset2: \"50%\"\n        });\n        setAttr.call(alarmWrap, {\n          cx: WIDTH / 2,\n          cy: AlARMPOINT * .3,\n          r: AlARMPOINT * 1.2\n        });\n        setStyle.call(alarmWrap, {\n          fill: \"url(#wrapShadow)\"\n        });\n        setAttr.call(alarmWrapShadow, {\n          cx: WIDTH / 2,\n          cy: AlARMPOINT * .3,\n          r: AlARMPOINT * 3\n        });\n        setStyle.call(alarmWrapShadow, {\n          fill: \"url(#alarmWrapShadow)\"\n        });\n        setAttr.call(alarm, {\n          cx: WIDTH / 2,\n          cy: AlARMPOINT * .3,\n          r: AlARMPOINT\n        });\n        setStyle.call(alarm, {\n          fill: alarmColor\n        });\n        setAttr.call(alarmShadow, {\n          cx: WIDTH / 2,\n          cy: AlARMPOINT * .3,\n          r: AlARMPOINT\n        });\n        setAttr.call(hitarea, {\n          width: WIDTH,\n          height: HEIGHT,\n          transform: \"translate(0,-\" + HEIGHT + \")\"\n        });\n        setStyle.call(hitarea, {\n          fill: \"blue\",\n          opacity: 0,\n          cursor: \"pointer\"\n        });\n        setStyle.call(alarmShadow, {\n          fill: \"url(#alarmShadow)\"\n        });\n        setAttr.call(alarmHighlight, {\n          cx: WIDTH / 2,\n          cy: AlARMPOINT * .3,\n          r: AlARMPOINT * .8\n        });\n        setStyle.call(alarmHighlight, {\n          fill: \"url(#alarmHighlight)\"\n        });\n        setAttr.call(rect, {\n          width: WIDTH,\n          height: HEIGHT\n        });\n        setStyle.call(rect, {\n          fill: \"#fff\",\n          opacity: .3\n        });\n        setAttr.call(highlight, {\n          transform: \"translate(\" + WIDTH / 10 + \",\" + HEIGHT * .3 + \")\",\n          width: WIDTH / 5,\n          height: HEIGHT * .7\n        });\n        setStyle.call(highlight, {\n          fill: \"url(#highlight)\"\n        });\n        setAttr.call(innerRect, {\n          width: WIDTH,\n          height: 0\n        });\n        setAttr.call(innerShadow, {\n          width: WIDTH,\n          height: 0\n        });\n        innerRect.style(\"fill\", color);\n        innerShadow.style(\"fill\", \"url(#innerShadow)\");\n        setAttr.call(top, {\n          cx: WIDTH / 2,\n          cy: HEIGHT,\n          rx: WIDTH / 2,\n          ry: WIDTH / 6\n        });\n        setStyle.call(top, {\n          fill: \"url(#wrapShadow)\",\n          opacity: 1\n        });\n        setAttr.call(innerTop, {\n          cx: WIDTH / 2,\n          cy: 0,\n          rx: WIDTH / 2,\n          ry: WIDTH / 6\n        });\n        innerTop.style(\"fill\", color);\n        setAttr.call(innerBottom, {\n          cx: WIDTH / 2,\n          cy: 0,\n          rx: WIDTH / 2,\n          ry: WIDTH / 6\n        });\n        innerBottom.style(\"fill\", color);\n        setAttr.call(bottomWrap, {\n          cx: WIDTH / 2,\n          cy: 0,\n          rx: WIDTH / 2 * 1.4,\n          ry: WIDTH / 6 * 1.4\n        });\n        bottomWrap.style(\"fill\", \"url(#wrapShadow)\");\n        hitarea.on(\"click\", function (event) {\n          if (events[\"click\"]) {\n            events[\"click\"](event);\n          }\n\n          ;\n        });\n      }\n\n      ;\n\n      threeDbar.prototype.setColor = function (clr) {\n        color = clr;\n        innerRect.style(\"fill\", color);\n        innerTop.style(\"fill\", color);\n        innerBottom.style(\"fill\", color);\n      };\n\n      threeDbar.prototype.setPos = function (pos) {\n        wholewrap.attr(\"transform\", \"translate(\" + pos.x + \",\" + pos.y + \")\");\n      };\n\n      threeDbar.prototype.setValue = function (value) {\n        var DURATION = 1000;\n        var height = HEIGHT * value / 100;\n        innerTop.transition().duration(DURATION).attr(\"cy\", height);\n        innerRect.transition().duration(DURATION).attr(\"height\", height);\n        innerShadow.transition().duration(DURATION).attr(\"height\", height); //value / 100\n        //val.attr(\"d\", createArc(0, (option.radius || 50) - 1,  Math.PI / 2 * ( 1 - value / 100), Math.PI / 2));\n      };\n\n      threeDbar.prototype.on = function (eventName, handler) {\n        events[eventName] = handler;\n      };\n\n      threeDbar.prototype.setAlarmStatus = function (status) {\n        var color = \"\";\n\n        switch (status) {\n          case 4:\n            color = \"#e74e53\";\n            break;\n\n          case 3:\n            color = \"#ee6b1c\";\n            break;\n\n          case 2:\n            color = \"#ece417\";\n            break;\n\n          case 1:\n            color = \"#00bc79\";\n            break;\n\n          default:\n            color = \"#00bc79\";\n            break;\n        }\n\n        setStyle.call(alarm, {\n          fill: color\n        });\n      };\n\n      return new threeDbar(tg);\n    }\n  };\n});"],"sourceRoot":"/source/"}