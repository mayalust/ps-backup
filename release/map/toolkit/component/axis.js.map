{"version":3,"sources":["toolkit/component/axis.js"],"names":["define","data","expression","dom","$","addClass","element","global","style","$$","runExpression","$attr","funRes","code","fnResult","system","console","error","message","initFn","render","children","remove","ul","css","createItem","historyData","li","iIcon","span","divTime","h3Str","time","text","icon","disList","length","i","concat","value","append","target","e","runExpressionSuccess"],"mappings":"AAGAA,OAAO,GAAI,WACT,OAAO,SAAUC,GACf,IAKIC,EALAC,EAAMC,EAAE,eAAeC,SAAS,OAChCC,EAAUL,EAAKK,QACfC,EAASN,EAAKM,OACdC,EAAQP,EAAKK,QAAQE,MAmGzB,OAhGAC,GAAGC,cAAcJ,EAAQK,MAAM,sBAAuB,SAAUC,GAC9D,GAAmB,KAAfA,EAAOC,KAAa,CACtB,IAAIC,EAAWF,EAAOX,KAQtBC,GALEA,EADqB,mBAAZY,EACIA,EAASb,EAAMc,QAEfD,IAGY,QAE3BZ,EAAa,GACbc,QAAQC,MAAML,EAAOM,UAMzB,SAA8BhB,GAC5B,IAAIiB,EAASjB,EAAWS,MAAM,WAC9BH,EAAQA,GAAgB,GA4DxB,GAFAF,EAAQc,OAxDK,SAAgBnB,GAC3BE,EAAIkB,WAAWC,SACf,IAAIC,EAAKnB,EAAE,aAAaC,SAAS,uBAE7BG,GACFe,EAAGC,IAAIhB,GAGT,IAAIiB,EAAa,SAAoBC,GACnC,IAAIC,EAAKvB,EAAE,aACPwB,EAAQxB,EAAE,WAEVyB,GADKzB,EAAE,aAAaC,SAAS,6BACtBD,EAAE,iBAAiBC,SAAS,SACnCyB,EAAU1B,EAAE,eAAeC,SAAS,iBACpC0B,EAAQ,GAUZ,GARIL,EAAYM,MACdH,EAAKI,KAAKP,EAAYM,MAGpBN,EAAYQ,MACdN,EAAMvB,SAASqB,EAAYQ,MAGI,EAA7BR,EAAYS,QAAQC,OACtB,IAAK,IAAIC,KAAKX,EAAYS,QAExBJ,GAAS,gDAAgDO,OAAOZ,EAAYS,QAAQE,GAAGE,MAAO,OAAOD,OAAOZ,EAAYS,QAAQE,GAAGE,MAAO,cAG5IR,EAAQ,oDAOV,OAJAD,EAAQU,OAAOX,GACfC,EAAQU,OAAOT,GACfJ,EAAGa,OAAOZ,GACVD,EAAGa,OAAOV,GACHH,GAGT,GAAkB,EAAd1B,EAAKmC,OACP,IAAK,IAAIC,KAAKpC,EACZsB,EAAGiB,OAAOf,EAAWxB,EAAKoC,KAW9BlC,EAAIqC,OAAOjB,IAKTJ,EACF,IACEA,EAAO,CACLsB,OAAQnC,EACRC,OAAQA,IAEV,MAAOmC,KAvEXC,CAAqBzC,KAgFhBC","file":"toolkit/component/axis.js","sourcesContent":["/**\n * Created by leonlin on 16/11/3.\n */\ndefine([], function () {\n  return function (data) {\n    var dom = $(\"<div></div>\").addClass(\"box\");\n    var element = data.element;\n    var global = data.global;\n    var style = data.element.style; // var timeData = element.$attr(\"parameters/data\");\n\n    var expression;\n    $$.runExpression(element.$attr(\"advance/expression\"), function (funRes) {\n      if (funRes.code == \"0\") {\n        var fnResult = funRes.data;\n\n        if (typeof fnResult == 'function') {\n          expression = fnResult(data, system);\n        } else {\n          expression = fnResult;\n        }\n\n        expression = expression || {};\n      } else {\n        expression = {};\n        console.error(funRes.message);\n      }\n\n      runExpressionSuccess(expression);\n    });\n\n    function runExpressionSuccess(expression) {\n      var initFn = expression.$attr(\"on/init\");\n      style = style ? style : {};\n\n      var render = function render(data) {\n        dom.children().remove();\n        var ul = $(\"<ul></ul>\").addClass(\"timeline horizontal\");\n\n        if (style) {\n          ul.css(style);\n        }\n\n        var createItem = function createItem(historyData) {\n          var li = $(\"<li></li>\");\n          var iIcon = $(\"<i></i>\");\n          var h3 = $(\"<h3></h3>\").addClass(\"timeline-header no-border\");\n          var span = $(\"<span></span>\").addClass(\"time\");\n          var divTime = $(\"<div></div>\").addClass(\"timeline-item\");\n          var h3Str = '';\n\n          if (historyData.time) {\n            span.text(historyData.time);\n          }\n\n          if (historyData.icon) {\n            iIcon.addClass(historyData.icon);\n          }\n\n          if (historyData.disList.length > 0) {\n            for (var i in historyData.disList) {\n              // h3Str +=  \"<h3 class='timeline-header no-border'>\"+historyData.disList[i].value+\"</h3>\" ;\n              h3Str += \"<h3 class='timeline-header no-border' title='\".concat(historyData.disList[i].value, \"' >\").concat(historyData.disList[i].value, \"</h3>\");\n            }\n          } else {\n            h3Str = \"<h3 class='timeline-header no-border'>处理人:默认</h3>\";\n          }\n\n          divTime.append(span);\n          divTime.append(h3Str);\n          li.append(iIcon);\n          li.append(divTime);\n          return li;\n        };\n\n        if (data.length > 0) {\n          for (var i in data) {\n            ul.append(createItem(data[i]));\n          }\n\n          ;\n        }\n        /**\n         var li = $(\"<li></li>\");\n         li.css(\"clear\", \"both\");\n         ul.append(li);*/\n\n\n        dom.append(ul);\n      };\n\n      element.render = render;\n\n      if (initFn) {\n        try {\n          initFn({\n            target: element,\n            global: global\n          });\n        } catch (e) {\n          // if(route.current.$$route.controller == \"freeStyleCtrl\"){\n          //   growl.error(\"组件［时间轴］的初始化表达式配置发生错误！\");\n          // };\n          ;\n        }\n      }\n    }\n\n    return dom;\n  };\n});"],"sourceRoot":"/source/"}