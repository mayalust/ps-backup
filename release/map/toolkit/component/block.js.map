{"version":3,"sources":["toolkit/component/block.js"],"names":["define","data","expression","element","global","target","route","style","css","$$","runExpression","$attr","funRes","code","fnResult","system","clickFn","initFn","on","event","current","$$route","controller","setCss","setInvisible","isFlag","e","growl","message","expressionLoaded"],"mappings":"AAGAA,OAAO,GAAI,WACT,OAAO,SAAUC,GACf,IAaIC,EAbAC,EAAUF,EAAKE,QACfC,EAASH,EAAKG,OACdC,EAASJ,EAAKI,OACdC,EAAQL,EAAKK,MAEbH,EAAQI,OACVF,EAAOG,IAAIL,EAAQI,OAQrBE,GAAGC,cAAcP,EAAQQ,MAAM,sBAAuB,SAAUC,GAC9D,GAAmB,KAAfA,EAAOC,KAAa,CACtB,IAAIC,EAAWF,EAAOX,KAQtBC,GALEA,EADqB,mBAAZY,EACIA,EAASb,EAAMc,QAEfD,IAGwB,QAEvCZ,EAAa,IAOjB,SAA0BA,GACxB,IAAIc,EAAUd,EAAWS,MAAM,YAC3BM,EAASf,EAAWS,MAAM,WA4B9B,GA3BAN,EAAOa,GAAG,QAAS,SAAUC,GACL,mBAAXH,IACTX,EAAOG,IAAI,SAAU,WAEmB,iBAApCF,EAAMc,QAAQC,QAAQC,YACxBN,EAAQ,CACNX,OAAQF,EACRC,OAAQA,OAQhBD,EAAQoB,OAAS,SAAUf,GACzBH,EAAOG,IAAIA,IAGbL,EAAQqB,aAAe,SAAUC,GAC/BpB,EAAOG,IAAI,UAAW,QAElBiB,GACFpB,EAAOG,IAAI,UAAW,UAItBS,EACF,IACEA,EAAO,CACLZ,OAAQF,EACRC,OAAQA,IAEV,MAAOsB,GACPvB,EAAQwB,MAAMD,EAAEE,QAAS,YAxC7BC,CAAiB3B","file":"toolkit/component/block.js","sourcesContent":["/**\n * Created by leonlin on 16/11/3.\n */\ndefine([], function () {\n  return function (data) {\n    var element = data.element;\n    var global = data.global;\n    var target = data.target;\n    var route = data.route;\n\n    if (element.style) {\n      target.css(element.style);\n    }\n\n    ; // if(route.current.$$route.controller == \"freeBoardCtrl\"){\n    //   target.css(\"display\", \"block\");\n    // }\n\n    var expression;\n    $$.runExpression(element.$attr(\"advance/expression\"), function (funRes) {\n      if (funRes.code == \"0\") {\n        var fnResult = funRes.data;\n\n        if (typeof fnResult == 'function') {\n          expression = fnResult(data, system);\n        } else {\n          expression = fnResult;\n        }\n\n        expression = expression ? expression : {};\n      } else {\n        expression = {};\n        ; //throw new Error(funRes.message);\n      }\n\n      expressionLoaded(expression);\n    });\n\n    function expressionLoaded(expression) {\n      var clickFn = expression.$attr(\"on/click\");\n      var initFn = expression.$attr(\"on/init\");\n      target.on(\"click\", function (event) {\n        if (typeof clickFn == \"function\") {\n          target.css(\"cursor\", \"pointer\");\n\n          if (route.current.$$route.controller != \"freeBoardCtrl\") {\n            clickFn({\n              target: element,\n              global: global\n            });\n          }\n\n          ;\n        }\n      });\n\n      element.setCss = function (css) {\n        target.css(css);\n      };\n\n      element.setInvisible = function (isFlag) {\n        target.css(\"display\", \"none\");\n\n        if (isFlag) {\n          target.css(\"display\", \"block\");\n        }\n      };\n\n      if (initFn) {\n        try {\n          initFn({\n            target: element,\n            global: global\n          });\n        } catch (e) {\n          element.growl(e.message, \"warning\");\n        }\n      }\n    }\n  };\n});"],"sourceRoot":"/source/"}