{"version":3,"sources":["toolkit/component/timeselector.js"],"names":["define","commonMethod","data","expression","dom","$","self","global","element","$$","runExpression","$attr","funRes","code","fnResult","datePicker","config","changeFn","input","addClass","attr","i","css","position","bottom","right","top","cursor","append","timeout","loadExternalJs","daterangepicker","start","end","label","target","tools","value","Date","format","val"],"mappings":"AAGAA,OAAO,CAAC,gBAAiB,SAAUC,GACjC,OAAO,SAAUC,GACf,IAIIC,EAJAC,EAAMC,EAAE,eACRC,EAAO,IAAIL,EAAaC,GACxBK,EAASL,EAAKK,OACdC,EAAUN,EAAKM,QAEnBC,GAAGC,cAAcF,EAAQG,MAAM,sBAAuB,SAAUC,GAC9D,GAAmB,KAAfA,EAAOC,KAAa,CACtB,IAAIC,EAAWF,EAAOV,KACtBC,EAAaW,OAGbX,EAAa,KAGjB,IAAIY,EAAaZ,EAAWQ,MAAM,cAC9BK,EAASD,GAA0B,GACnCE,EAAWd,EAAWQ,MAAM,aAC5BO,EAAQb,EAAE,aAAac,SAAS,gBAAgBC,KAAK,OAAQ,QAC7DC,EAAIhB,EAAE,+DAA+DiB,IAAI,CAC3EC,SAAU,WACVC,OAAQ,OACRC,MAAO,OACPC,IAAK,OACLC,OAAQ,YAyBV,OAvBAvB,EAAIwB,OAAOV,GAAOU,OAAOP,IAEzBQ,EADc3B,EAAK2B,SACX,WACNpB,GAAGqB,eAAe,CAAC,6BAA8B,SAAUC,GACzD3B,EAAI2B,gBAAgBf,EAAQ,SAAUgB,EAAOC,EAAKC,GAC5CjB,GACFA,EAAS,CACPkB,OAAQ3B,EACRA,QAASA,EACTD,OAAQA,EACR6B,MAAOlC,EACPI,KAAMA,EACN+B,MAAO,CACLL,MAAO,IAAIM,KAAKN,EAAMO,OAAO,eAC7BN,IAAK,IAAIK,KAAKL,EAAIM,OAAO,kBAK/BrB,EAAMsB,IAAIR,EAAMO,OAAO,cAAgB,KAAON,EAAIM,OAAO,qBAIxDnC","file":"toolkit/component/timeselector.js","sourcesContent":["/**\n * Created by leonlin on 16/11/3.\n */\ndefine(['commonMethod'], function (commonMethod) {\n  return function (data) {\n    var dom = $(\"<div></div>\");\n    var self = new commonMethod(data);\n    var global = data.global;\n    var element = data.element;\n    var expression;\n    $$.runExpression(element.$attr(\"advance/expression\"), function (funRes) {\n      if (funRes.code == \"0\") {\n        var fnResult = funRes.data;\n        expression = fnResult;\n      } else {\n        ;\n        expression = {}; //throw new Error(funRes.message);\n      }\n    });\n    var datePicker = expression.$attr(\"datePicker\");\n    var config = datePicker ? datePicker : {};\n    var changeFn = expression.$attr(\"on/change\");\n    var input = $(\"<input />\").addClass(\"form-control\").attr(\"type\", \"text\");\n    var i = $('<i class=\"glyphicon glyphicon-calendar fa fa-calendar\"></i>').css({\n      position: \"absolute\",\n      bottom: \"10px\",\n      right: \"14px\",\n      top: \"auto\",\n      cursor: \"pointer\"\n    });\n    dom.append(input).append(i);\n    var timeout = data.timeout;\n    timeout(function () {\n      $$.loadExternalJs(['bootstrap-daterangepicker'], function (daterangepicker) {\n        dom.daterangepicker(config, function (start, end, label) {\n          if (changeFn) {\n            changeFn({\n              target: element,\n              element: element,\n              global: global,\n              tools: data,\n              self: self,\n              value: {\n                start: new Date(start.format(\"YYYY-MM-DD\")),\n                end: new Date(end.format(\"YYYY-MM-DD\"))\n              }\n            });\n          }\n\n          input.val(start.format('YYYY-MM-DD') + \", \" + end.format('YYYY-MM-DD'));\n        });\n      });\n    });\n    return dom;\n  };\n});"],"sourceRoot":"/source/"}