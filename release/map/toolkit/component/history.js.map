{"version":3,"sources":["toolkit/component/history.js"],"names":["define","data","expression","dom","$","addClass","element","global","style","$$","runExpression","$attr","funRes","code","fnResult","system","initFn","render","ul","css","createItem","historyData","li","iIcon","h3","span","divTime","h3Str","document","createDocumentFragment","time","text","icon","disList","length","i","fn","click","createElement","setAttribute","innerHTML","value","appendChild","onclick","append","target","e"],"mappings":"AAGAA,OAAO,GAAI,WACT,OAAO,SAAUC,GACf,IAKIC,EALAC,EAAMC,EAAE,eAAeC,SAAS,OAChCC,EAAUL,EAAKK,QACfC,EAASN,EAAKM,OACdC,EAAQP,EAAKK,QAAQE,MAGzBC,GAAGC,cAAcJ,EAAQK,MAAM,sBAAuB,SAAUC,GAC9D,GAAmB,KAAfA,EAAOC,KAAa,CACtB,IAAIC,EAAWF,EAAOX,KAQtBC,GALEA,EADqB,mBAAZY,EACIA,EAASb,EAAMc,QAEfD,IAGY,QAE3BZ,EAAa,KAIjB,IAAIc,EAASd,EAAWS,MAAM,WAC9BH,EAAQA,GAAgB,GA8DxB,GAFAF,EAAQW,OA1DK,SAAgBhB,GAC3B,IAAIiB,EAAKd,EAAE,aAAaC,SAAS,YAE7BG,GACFU,EAAGC,IAAIX,GAGT,IAAIY,EAAa,SAAoBC,GACnC,IAAIC,EAAKlB,EAAE,aACPmB,EAAQnB,EAAE,WACVoB,EAAKpB,EAAE,aAAaC,SAAS,6BAC7BoB,EAAOrB,EAAE,iBAAiBC,SAAS,QACnCqB,EAAUtB,EAAE,eAAeC,SAAS,iBACpCsB,EAAQC,SAASC,yBAWrB,GARIR,EAAYS,MACdL,EAAKM,KAAKV,EAAYS,MAGpBT,EAAYW,MACdT,EAAMlB,SAASgB,EAAYW,MAGI,EAA7BX,EAAYY,QAAQC,OACtB,IAAK,IAAIC,KAAKd,EAAYY,QAAS,CACjC,IAAIG,EAAKf,EAAYY,QAAQE,GAAGE,OAChCb,EAAKI,SAASU,cAAc,OACzBC,aAAa,QAAS,6BACzBf,EAAGgB,UAAYnB,EAAYY,QAAQE,GAAGM,MACtCd,EAAMe,YAAYlB,GAClBY,IAAKZ,EAAGmB,QAAUP,QAGpBT,EAAQ,oDAOV,OAJAD,EAAQkB,OAAOnB,GACfC,EAAQ,GAAGgB,YAAYf,GACvBL,EAAGsB,OAAOrB,GACVD,EAAGsB,OAAOlB,GACHJ,GAGT,GAAkB,EAAdrB,EAAKiC,OACP,IAAK,IAAIC,KAAKlC,EACZiB,EAAG0B,OAAOxB,EAAWnB,EAAKkC,KAM9B,IAAIb,EAAKlB,EAAE,aACXkB,EAAGH,IAAI,QAAS,QAChBD,EAAG0B,OAAOtB,GACVnB,EAAIyC,OAAO1B,IAKTF,EACF,IACEA,EAAO,CACL6B,OAAQvC,EACRC,OAAQA,IAEV,MAAOuC,IAQX,OAAO3C","file":"toolkit/component/history.js","sourcesContent":["/**\n * Created by leonlin on 16/11/3.\n */\ndefine([], function () {\n  return function (data) {\n    var dom = $(\"<div></div>\").addClass(\"row\");\n    var element = data.element;\n    var global = data.global;\n    var style = data.element.style; // var timeData = element.$attr(\"parameters/data\");\n\n    var expression;\n    $$.runExpression(element.$attr(\"advance/expression\"), function (funRes) {\n      if (funRes.code == \"0\") {\n        var fnResult = funRes.data;\n\n        if (typeof fnResult == 'function') {\n          expression = fnResult(data, system);\n        } else {\n          expression = fnResult;\n        }\n\n        expression = expression || {};\n      } else {\n        expression = {};\n        ; //throw new Error(funRes.message);\n      }\n    });\n    var initFn = expression.$attr(\"on/init\");\n    style = style ? style : {};\n\n    var render = function render(data) {\n      var ul = $(\"<ul></ul>\").addClass(\"timeline\");\n\n      if (style) {\n        ul.css(style);\n      }\n\n      var createItem = function createItem(historyData) {\n        var li = $(\"<li></li>\");\n        var iIcon = $(\"<i></i>\");\n        var h3 = $(\"<h3></h3>\").addClass(\"timeline-header no-border\");\n        var span = $(\"<span></span>\").addClass(\"time\");\n        var divTime = $(\"<div></div>\").addClass(\"timeline-item\");\n        var h3Str = document.createDocumentFragment(),\n            h3;\n\n        if (historyData.time) {\n          span.text(historyData.time);\n        }\n\n        if (historyData.icon) {\n          iIcon.addClass(historyData.icon);\n        }\n\n        if (historyData.disList.length > 0) {\n          for (var i in historyData.disList) {\n            var fn = historyData.disList[i].click;\n            h3 = document.createElement(\"h3\");\n            h3.setAttribute(\"class\", \"timeline-header no-border\");\n            h3.innerHTML = historyData.disList[i].value;\n            h3Str.appendChild(h3);\n            fn ? h3.onclick = fn : null;\n          }\n        } else {\n          h3Str = \"<h3 class='timeline-header no-border'>处理人:默认</h3>\";\n        }\n\n        divTime.append(span);\n        divTime[0].appendChild(h3Str);\n        li.append(iIcon);\n        li.append(divTime);\n        return li;\n      };\n\n      if (data.length > 0) {\n        for (var i in data) {\n          ul.append(createItem(data[i]));\n        }\n\n        ;\n      }\n\n      var li = $(\"<li></li>\");\n      li.css(\"clear\", \"both\");\n      ul.append(li);\n      dom.append(ul);\n    };\n\n    element.render = render;\n\n    if (initFn) {\n      try {\n        initFn({\n          target: element,\n          global: global\n        });\n      } catch (e) {\n        // if(route.current.$$route.controller == \"freeStyleCtrl\"){\n        //   growl.error(\"组件［时间轴］的初始化表达式配置发生错误！\");\n        // };\n        ;\n      }\n    }\n\n    return dom;\n  };\n});"],"sourceRoot":"/source/"}