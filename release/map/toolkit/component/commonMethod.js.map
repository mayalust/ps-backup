{"version":3,"sources":["toolkit/component/commonMethod.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","WIN","window","define","customMethodService","projectUIService","serviceCenterService","dictionaryService","energyConsumeUIService","ticketTaskService","resourceUIService","viewFlexService","userLoginUIService","elemData","route","growl","kpiDataService","SwSocket","alertService","userDomainService","thridPartyApiService","cmethod","data","this","$clone","element","q","serviceProxy","wholeJSON","timeout","$cache","$events","getSignalShipInfo","id","callback","event","code","getManyShipInfo","ids","getShipTrack","start","end","setSelfDom","dom","selfDom","Object","defineProperty","enumerable","getTheme","themeStr","rootTarget","themeObj","JSONparse","setting","theme","themeCompare","clickFnDic","createInfoHtml","str","onclickHandler","key","target","name","cont","clickFn","i","content","type","$attr","label","value","createShipShape","width","length","trailWidth","trailLength","headWidth","headLength","leftBottomPoint","asyncCall","arr","asyncRepeat","repeatCall","finish","self","repeat","inx","queryDomainTree","isArryLike","user","userID","result","$TreeObj","to","traverse","item","parent","level","push","domainInfos","m","getAlertColor","color","getCurrentDomainCi","domainId","domains","split","$$","cacheAsyncData","call","getResourceById","getDevicesByCondition","params","getCurrentDevices","getCurrentProject","project","domainPath","projectId","getCurrentResource","getParameter","getCurrentCustomer","getCiKpi","model","resources","modelType","resfilltype","kpis","cur","defers","res","ks","getKpis","some","modelId","undefined","Error","getDataItemsByModelId","filter","elem","indexOf","ci","getResource","resource","defer","resolve","promise","all","then","copyJSONFileToClipBoard","JSON","stringify","postService","service","method","param","get","getLatestDevices","getTicketsByStatus","energyTypeList","dicts","getDevicesByFilter","deviceName","sn","getCurrentAlert","resourceId","queryFromDb","nodeIds","getAllAlerts","getAlerts","domain","getCustomerFromCurrentUser","customerId","getCurrentAlertByProject","currentDirective","resId","getDirectivesByModelId","getKpiValueCi","kpi","extension","getValues","getProjectByTYpeId","projectTypeId","getProjectsType","projectType","find","getResourceByModelId","el","values","valueCode","getViewById","getViewByViewId","viewId","setValue","attr","getValue","deleteValue","findProjectsByCondition","getCurrentProjects","even","getViewsByOnlyRole","viewType","resourceType","view","views","template","getManagedViewsByTypeAndRole","success","sendDirective","nodeId","dirId","sendDeviceDirective","returnObj","sendItemDir","dir","itemDirValues","Number","warning","sendItemDirAll","$value","sendItemDirByValue","getAllDevices","getViewByViewTitle","viewTitle","getAllMyViews","getResources","getProjectsAndKpiValue","projects","cis","pushDiff","sloop","rptback","callback1","devices","devis","map","device","callback2","getKpisByModelId","kpiDes","kpiMaps","valuelist","j","detail","loop","kpiCode","alertFind","icon","status","getProTypeByTypeId","routeParam","parameter","parse","getOnlineByKpiCodes","includeInstance","isRealTimeData","kpiCodes","timePeriod","getValueList","navigateBack","para","page","oldParam","pageArr","pop","toString","replace","tabLabel","encodeURIComponent","current","$$route","controller","location","href","navigateTo","url","$target","http","linkTo","open","findViewHasProjectNameById","rootPath","getViewsOnlyPublishedByTypeAndDomainPath","getProjectsByCustomerId","simulate","nodesDes","kpisDes","simulateFn","timeStamp","Date","getTime","timeStampToStr","nDate","year","getFullYear","month","getMonth","dat","getDate","hour","getHours","min","getMinutes","sec","getSeconds","renderData","index","startTime","period","frequency","range","getData","curTime","loopNodes","node","val","sampleData","max","ran","Math","round","random","calcRandom","agentId","aggregatePeriod","aggregateStatus","aggregateType","arisingTime","compressCount","computeTaskId","dataSerialNumber","dataTime","insertTime","notes","numberValue","quality","stringValue","valueStr","services","loadArray","loadType","getDictValues","rs","itm","path","every","loopKpis","loopInstance","ins1","loopInstance2","ins2","ranges","newTime","instance","nextStep","renderData2D","aggr_type","loopAggrType","atype","slice","renderData3D","getModels","getDomainsByFilter","queryDomainsByEnterpriseId","getProjectsByDomains","getCurrentProjectsFromDomain","findProjectById","getCurrentProjectsByCustom","subDomain","getViewByProjectId","getViewByModelId","getSimulateList","webSocket","uuid","paramSocket","ciid","unregister","operation","register","send","$","on","getKpiFromViewByTypeAndRole","socketCallback","parameters","valueDic","json","cells","sort","a","b","parseInt","z","forEach","cell","kpiId","search","kpiDef","rootModelsDic","kpiDic","kpiName","attrs","text","kpiUnit","unitType","unitLabel","rangeObj","category","endTime","timeRange","statisticType","condList","returnAry","filterEnterprises","findEnterpriseInfoByDomainPath","industryType","queryEnterpriseListByHis","eventData","shortName","industryShortType","queryEnterprises","findEnterpriseInfos","queryDomains","nodeIdAry","enterpriseList","enterpriseId","modelDefinitionId","getDirectivesByTypeAndRole","directiveIds","dirctiveId","doubleCompare","getDirectivesByTypeAndRoleAndValue","directives","directive","queryBenchmarkByShortName","industryDic","energyDic","energyType","getAllDicts","dictCode","domainID","granularityUnit","dataType","instanceAry","instanceName","instanceCode","energyName","energyCode"],"mappings":"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","file":"toolkit/component/commonMethod.js","sourcesContent":["function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/**\n * Created by leonlin on 16/11/3.\n */\nvar WIN = window;\ndefine([], function () {\n  var timeout, customMethodService, projectUIService, serviceCenterService, dictionaryService, energyConsumeUIService, ticketTaskService, resourceUIService, viewFlexService, userLoginUIService, elemData, route, window, growl, kpiDataService, SwSocket, alertService, userDomainService, thridPartyApiService;\n\n  var cmethod = function cmethod(data) {\n    if (data) {\n      this.$clone(data.element);\n      elemData = data;\n      route = data.route;\n      window = data.window;\n      q = data.q;\n      projectUIService = data.projectUIService;\n      serviceCenterService = data.serviceCenterService;\n      customMethodService = data.customMethodService;\n      resourceUIService = data.resourceUIService;\n      dictionaryService = data.dictionaryService;\n      energyConsumeUIService = data.energyConsumeUIService;\n      viewFlexService = data.viewFlexService;\n      userLoginUIService = data.userLoginUIService;\n      kpiDataService = data.kpiDataService;\n      ticketTaskService = data.ticketTaskService;\n      userDomainService = data.userDomainService;\n      SwSocket = data.SwSocket;\n      alertService = data.alertService;\n      serviceProxy = data.serviceProxy;\n      thridPartyApiService = data.thridPartyApiService;\n      wholeJSON = data.wholeJSON;\n      growl = data.growl;\n      timeout = data.timeout;\n    }\n\n    ;\n  };\n\n  WIN.$cache = {};\n  WIN.$events = {};\n\n  cmethod.prototype.getSignalShipInfo = function (id, callback) {\n    thridPartyApiService.getSignalShipInfo(id, function (event) {\n      if (event.code == 0) {\n        callback(event.data);\n      }\n    });\n  };\n\n  cmethod.prototype.getManyShipInfo = function (ids, callback) {\n    thridPartyApiService.getManyShipInfo(ids, function (event) {\n      if (event.code == 0) {\n        callback(event.data);\n      }\n    });\n  };\n\n  cmethod.prototype.getShipTrack = function (id, start, end, callback) {\n    thridPartyApiService.getShipTrack(id, start, end, function (event) {\n      if (event.code == 0) {\n        callback(event.data);\n      }\n    });\n  };\n\n  cmethod.prototype.setSelfDom = function (dom) {\n    this.selfDom = dom;\n    Object.defineProperty(this, \"selfDom\", {\n      enumerable: false\n    });\n  };\n\n  cmethod.prototype.getTheme = function (themeStr) {\n    if (rootTarget) {\n      var themeObj = JSONparse(rootTarget.setting) || {\n        theme: \"default\"\n      };\n      themeStr = themeStr || \"default\";\n      themeStr = themeStr == \"auto\" ? themeCompare[themeObj.theme || \"default\"] : themeStr;\n      return themeStr;\n    } else {\n      return \"default\";\n    }\n  };\n\n  var clickFnDic = {}; //按钮的返回集合\n\n  cmethod.prototype.createInfoHtml = function (obj) {\n    var str = \"\"; // var str = obj.label + \"<br><hr/>\";\n\n    window.onclickHandler = function (event) {\n      var key = event.target.id + \"&\" + event.target.name;\n\n      if (clickFnDic[key]) {\n        clickFnDic[key](event.target.name);\n      }\n    };\n\n    var createContent = function createContent(cont) {\n      return \"<label><span>\" + cont.label + \":</span><span>\" + cont.value + \"</span></label><br>\";\n    };\n\n    var createButton = function createButton(cont) {\n      var clickFn = cont.$attr(\"on/click\");\n      var key = cont.label + \"&\" + cont.value;\n      clickFnDic[key] = clickFn;\n      var dataBtn = \"<button id='\" + cont.label + \"' name='\" + cont.value + \"' onclick='onclickHandler(event)'>\" + cont.label + \"</button>\"; //    var dataBtn = \"<button id='\"+cont.label+\"' onclick='fnOK(\"+cont.value+\")'>\"+cont.label +\"</button>\";\n\n      return dataBtn;\n    };\n\n    for (var i in obj.content) {\n      if (!obj.content[i].type || obj.content[i].type == \"label\") {\n        str += createContent(obj.content[i]);\n      } else if (obj.content[i].type == \"button\") {\n        str += createButton(obj.content[i]);\n      }\n    }\n\n    return str;\n  };\n\n  cmethod.prototype.createShipShape = function (width, length, trailWidth, trailLength, headWidth, headLength) {\n    var RIGHTOFFSET = 0;\n    var leftBottomPoint = [-width / 2 * trailWidth, -length / 2];\n    var rightBottomPoint = [width / 2 * trailWidth, -length / 2];\n    var rightBottomPoint_1 = [(1 - RIGHTOFFSET) * width / 2, (trailLength / 2 - 1) * length / 2];\n    var rightlowerPoint = [width / 2, (trailLength - 1) * length / 2];\n    var rightupperPoint = [width / 2 * 1.4, (1 / 2 - headLength) * length];\n    var rightupperPoint_1 = [headWidth / 2 * width, (1 / 2 - headLength / 3) * length];\n    var topPoint1 = [width * .1, length / 2 * .99];\n    var topPoint = [0, length / 2];\n    var topPoint2 = [-width * .1, length / 2 * .99];\n    var leftupperPoint_1 = [-headWidth / 2 * width, (1 / 2 - headLength / 3) * length];\n    var leftupperPoint = [-width / 2 * 1.4, (1 / 2 - headLength) * length];\n    var leftlowerPoint = [-width / 2, (trailLength - 1) * length / 2];\n    var leftBottomPoint_1 = [-(1 - RIGHTOFFSET) * width / 2, (trailLength / 2 - 1) * length / 2];\n    return [leftBottomPoint, rightBottomPoint, rightBottomPoint_1, rightlowerPoint, rightupperPoint, rightupperPoint_1, topPoint1, topPoint, topPoint2, leftupperPoint_1, leftupperPoint, leftlowerPoint, leftBottomPoint_1, leftBottomPoint];\n  };\n\n  cmethod.prototype.asyncCall = function (arr) {};\n\n  cmethod.prototype.asyncRepeat = function (repeatCall, finish) {\n    var self = this;\n    var inx = 0;\n\n    var repeat = function repeat(inx) {\n      if (self[inx]) {\n        repeatCall(inx, self[inx], function () {\n          inx++;\n          repeat(inx);\n        });\n      } else {\n        finish();\n      }\n    };\n\n    repeat(inx);\n  };\n\n  cmethod.prototype.queryDomainTree = function (callback, isArryLike) {\n    userDomainService.queryDomainTree(userLoginUIService.user.userID, function (event) {\n      var $TreeObj = function $TreeObj(data) {\n        this.$clone(data);\n      };\n\n      var treeObjToArr = function treeObjToArr(data) {\n        var result = [];\n\n        var traverse = function traverse(item, parent, level) {\n          var to = new $TreeObj(item);\n          to.parent = parent;\n          to.level = level;\n          result.push(to);\n\n          for (var i in item.domainInfos) {\n            var m = level + 1;\n            traverse(item.domainInfos[i], item, m);\n          }\n        };\n\n        traverse(event.data[0], null, 0);\n        return result;\n      };\n\n      if (event.code) {\n        if (isArryLike) {\n          var to = treeObjToArr(event.data[0]);\n          callback(to);\n        } else {\n          callback(event.data);\n        }\n      }\n\n      ;\n    });\n  };\n\n  cmethod.prototype.getAlertColor = function (str) {\n    var color = \"\";\n\n    switch (str) {\n      case 4:\n        color = \"#e7675d\";\n        break;\n\n      case 3:\n        color = \"#ed9700\";\n        break;\n\n      case 2:\n        color = \"#e1cd0a\";\n        break;\n\n      case 1:\n        color = \"#25bce7\";\n        break;\n\n      default:\n        color = \"#4db6ac\";\n        break;\n    } //;\n\n\n    return color;\n  };\n\n  cmethod.prototype.getCurrentDomainCi = function (callback) {\n    var domainPath = userLoginUIService.user.domains;\n    var domainId;\n    var arr = domainPath.split(\"/\");\n\n    if (arr.length > 1) {\n      domainId = arr[arr.length - 2];\n    }\n\n    $$.cacheAsyncData.call(resourceUIService.getResourceById, [domainId], function (event) {\n      if (event.code == 0) {\n        callback(event.data);\n      }\n    });\n    /**\n    resourceUIService.getResourceById(domainId, function(event){\n      if(event.code == 0){\n        callback(event.data)\n      }\n    })*/\n  };\n\n  cmethod.prototype.getDevicesByCondition = function (params, callback) {\n    resourceUIService.getDevicesByCondition(params, function (event) {\n      if (event.code == 0) {\n        callback(event.data);\n      }\n    });\n  };\n\n  cmethod.prototype.getCurrentDevices = function (callback) {\n    this.getCurrentProject(function (project) {\n      if (project) {\n        var domainPath = project.domainPath;\n        var params = {\n          projectId: project.id\n        };\n        resourceUIService.getDevicesByCondition(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n        /*\n        $$.cacheAsyncData.call(resourceUIService.getDevicesByCondition, [params], function(event){\n          if(event.code == 0){\n            callback(event.data)\n          }\n        });*/\n\n        /**\n        resourceUIService.getDevicesByCondition(params, function(event){\n          if(event.code == 0){\n            callback(event.data);\n          }\n        });*/\n      } else {\n        callback([]);\n      }\n\n      ;\n    });\n  };\n\n  cmethod.prototype.getCurrentResource = function (callback) {\n    var id = this.getParameter(\"resourceId\");\n\n    if (id) {\n      resourceUIService.getResourceById(id, function (event) {\n        if (event.code == 0) {\n          callback(event.data);\n        }\n      });\n    } else {\n      if (elemData.$attr(\"routeParam/resourceId\")) {\n        id = elemData.$attr(\"routeParam/resourceId\");\n        $$.cacheAsyncData.call(resourceUIService.getResourceById, [id], function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n        /**\n        resourceUIService.getResourceById(id, function(event){\n          if(event.code == 0){\n            callback(event.data);\n          }\n        })*/\n      } else {\n        callback(null);\n      }\n    }\n  };\n\n  cmethod.prototype.getCurrentProject = function (callback) {\n    var id = this.getParameter(\"projectId\");\n\n    if (id) {\n      $$.cacheAsyncData.call(resourceUIService.getResourceById, [id], function (event) {\n        if (event.code == 0) {\n          callback(event.data);\n        }\n      });\n      /**\n      resourceUIService.getResourceById(id, function(event){\n        if(event.code == 0){\n          callback(event.data)\n        }\n      })*/\n    } else {\n      callback(null);\n    }\n  };\n\n  cmethod.prototype.getCurrentCustomer = function (callback) {\n    var id = this.getParameter(\"customerId\");\n\n    if (id) {\n      $$.cacheAsyncData.call(resourceUIService.getResourceById, [id], function (event) {\n        if (event.code == 0) {\n          callback(event.data);\n        }\n      });\n      /**\n      resourceUIService.getResourceById(id, function(event){\n        if(event.code == 0){\n          callback(event.data)\n        }\n      })*/\n    } else {\n      callback(null);\n    }\n  };\n\n  cmethod.prototype.getCiKpi = function (callback) {\n    var model = this.$attr(\"data/model\");\n    var resources = this.$attr(\"data/resource\");\n    var modelType = this.$attr(\"data/modelType\");\n    var resfilltype = this.$attr(\"data/resfilltype\");\n    var kpis = this.$attr(\"data/kpi\");\n    resources = resources ? resources : [];\n    kpis = kpis ? kpis : [];\n    var cur = this,\n        defers = [],\n        res = [],\n        ks = [];\n\n    var getKpis = function getKpis() {\n      var some = kpis.some(function (element) {\n        return _typeof(element) != \"object\";\n      });\n\n      if (some) {\n        var modelId;\n\n        if (modelType == 0 || modelType == undefined) {\n          modelId = model.id;\n        } else {\n          modelId = modelType;\n        }\n\n        if (modelId) {\n          $$.cacheAsyncData.call(resourceUIService.getDataItemsByModelId, [modelId], function (event) {\n            if (event.code == 0) {\n              ks = event.data.filter(function (elem) {\n                return kpis.indexOf(elem.id) != -1;\n              });\n              callback(res, ks);\n            }\n          });\n          /**\n          resourceUIService.getKpisByModelId(modelId, function(event){\n            if(event.code == 0){\n              ks = event.data.filter(function(elem){\n                return kpis.indexOf(elem.id) != -1;\n              });\n              callback(res, ks);\n            }\n          })*/\n        } else {\n          throw new Error(\"modelId is no avaliable!!!\");\n        }\n      } else {\n        ks = kpis;\n        callback(res, ks);\n      }\n    };\n\n    if (resources.length == 1 && resources[0] == \"rootCi\") {\n      this.$attr(\"data/modelType\", 300);\n      this.$attr(\"data/resfilltype\", \"parameter\");\n      this.$attr(\"data/resource\", []);\n      modelType = 300;\n      resfilltype = \"parameter\";\n    }\n\n    if (resfilltype == \"parameter\") {\n      if (modelType == 300) {\n        cmethod.prototype.getCurrentDomainCi(function (ci) {\n          res = [ci];\n          getKpis();\n        });\n      } else if (modelType == 0) {\n        cmethod.prototype.getCurrentResource(function (ci) {\n          res = ci ? [ci] : [];\n          getKpis();\n        });\n      } else if (resfilltype == 301) {\n        cmethod.prototype.getCurrentCustomer(function (ci) {\n          res = ci ? [ci] : [];\n          getKpis();\n        });\n      } else if (modelType == 302) {\n        cmethod.prototype.getCurrentProject(function (ci) {\n          res = ci ? [ci] : [];\n          getKpis();\n        });\n      } else if (modelType == 303) {\n        cmethod.prototype.getCurrentDomainCi(function (ci) {\n          res = ci ? [ci] : [];\n          getKpis();\n        });\n      } else {\n        cmethod.prototype.getCurrentDomainCi(function (ci) {\n          res = ci ? [ci] : [];\n          getKpis();\n        });\n      }\n    } else {\n      var getResource = function getResource(resource) {\n        var defer = q.defer();\n\n        if (_typeof(resource) != \"object\") {\n          cur.getResourceById(resource, function (data) {\n            res.push(data);\n            defer.resolve(\"success\");\n          });\n        } else {\n          res.push(resource);\n          defer.resolve(\"success\");\n        }\n\n        return defer.promise;\n      };\n\n      for (var i in resources) {\n        defers.push(getResource(resources[i]));\n      }\n\n      q.all(defers).then(function (event) {\n        getKpis();\n      });\n    }\n\n    ;\n  };\n\n  cmethod.prototype.copyJSONFileToClipBoard = function () {\n    var json = JSON.stringify(wholeJSON);\n  };\n\n  cmethod.prototype.postService = function (service, method, param, callback) {\n    serviceProxy.get(service, method, param, callback);\n  };\n\n  cmethod.prototype.getLatestDevices = function (callback) {\n    resourceUIService.getLatestDevices(function (event) {\n      if (event.code == 0) {\n        callback(event.data);\n      }\n    });\n  };\n\n  cmethod.prototype.getTicketsByStatus = function (callback) {\n    ticketTaskService.getTicketsByStatus([100], function (event) {\n      if (event.code == 0) {\n        callback(event.data);\n      }\n    });\n  };\n\n  cmethod.prototype.energyTypeList = function (callback) {\n    var data = dictionaryService.dicts['energyType'];\n\n    if (callback) {\n      callback(data);\n    }\n  };\n\n  cmethod.prototype.getDevicesByFilter = function (filter, callback) {\n    var params = {\n      modelId: filter.modelId,\n      domainPath: filter.domainPath,\n      label: filter.deviceName,\n      sn: filter.sn\n    };\n    resourceUIService.getDevicesByCondition(params, function (event) {\n      if (event.code == 0) {\n        callback(event.data);\n      }\n    });\n  };\n\n  cmethod.prototype.getCurrentAlert = function (callback) {\n    var resourceId = this.getParameter(\"resourceId\");\n\n    if (resourceId) {\n      alertService.queryFromDb({\n        nodeIds: resourceId\n      }, function (event) {\n        if (event.code == 0) {\n          callback(event.data);\n        }\n      });\n    } else {\n      callback([]);\n    }\n\n    ;\n  };\n\n  cmethod.prototype.getAllAlerts = function (callback) {\n    alertService.queryFromDb({}, function (event) {\n      if (event.code == 0) {\n        callback(event.data);\n      }\n    });\n  };\n\n  cmethod.prototype.getAlerts = function (callback) {\n    var domainPath = userLoginUIService.user.domainPath;\n    alertService.queryFromDb({\n      domain: domainPath\n    }, function (event) {\n      if (event.code == 0) {\n        callback(event.data);\n      }\n    });\n  };\n\n  cmethod.prototype.queryFromDb = function (param, callback) {\n    alertService.queryFromDb(param, function (event) {\n      if (event.code == 0) {\n        callback(event.data);\n      }\n    });\n  };\n\n  cmethod.prototype.getCustomerFromCurrentUser = function (callback) {\n    var cur = this;\n    var domains = userLoginUIService.user.domains;\n    var customerId;\n    var arr = domains.split(\"/\");\n\n    if (arr.length > 2) {\n      customerId = arr[arr.length - 2];\n      cur.getResourceById(customerId, function (resource) {\n        callback(resource);\n      });\n    } else {\n      callback(resource);\n    }\n  };\n\n  cmethod.prototype.getCurrentAlertByProject = function (callback) {\n    var resourceId = this.getParameter(\"projectId\");\n    alertService.queryFromDb({\n      nodeIds: resourceId\n    }, function (event) {\n      if (event.code == 0) {\n        callback(event.data);\n      }\n    });\n  };\n\n  cmethod.prototype.currentDirective = function (callback) {\n    var resId = this.getParameter(\"resourceId\");\n\n    if (resId) {\n      this.getResourceById(resId, function (resource) {\n        if (resource) {\n          var modelId = resource.modelId;\n\n          if (modelId) {\n            resourceUIService.getDirectivesByModelId(modelId, function (event) {\n              if (event.code == 0) {\n                callback(event.data);\n              }\n\n              ;\n            });\n          } else {\n            callback([]);\n          }\n\n          ;\n        } else {\n          callback([]);\n        }\n\n        ;\n      });\n    } else {\n      callback([]);\n    }\n  };\n\n  cmethod.prototype.getKpiValueCi = function (ci, kpi, callback, extension) {\n    serviceCenterService.getValues(ci, kpi, extension).then(function (data) {\n      callback(data);\n    });\n  };\n\n  cmethod.prototype.getProjectByTYpeId = function (projectTypeId, callback) {\n    customMethodService.getProjectsType(function (event) {\n      if (event.code == 0) {\n        var projectType = event.data.find(function (elem) {\n          return projectTypeId == elem.id;\n        });\n\n        if (projectType == undefined) {\n          projectType = event.data[0];\n        }\n\n        resourceUIService.getResourceByModelId(302, function (event) {\n          if (event.code == 0) {\n            var find = event.data.find(function (el) {\n              return el.values.projectType == projectType.valueCode;\n            });\n\n            if (typeof callback == \"function\") {\n              callback(find);\n            } else {\n              ;\n            }\n          }\n        });\n      }\n    });\n  };\n\n  cmethod.prototype.getViewById = cmethod.prototype.getViewByViewId = function (viewId, callback) {\n    if (viewId) {\n      viewFlexService.getViewById(viewId, function (event) {\n        if (event.code == 0) {\n          callback(event.data);\n        }\n      });\n    } else {\n      callback(null);\n    }\n  };\n\n  cmethod.prototype.getProjectsType = function (callback, domains) {\n    customMethodService.getProjectsType(function (event) {\n      if (event.code == 0) {\n        if (typeof callback == \"function\") {\n          callback(event.data);\n        } else {\n          ;\n        }\n      }\n    }, domains);\n  };\n\n  cmethod.prototype.setValue = function (attr, value) {\n    WIN.$cache.$attr(attr, value);\n  };\n\n  cmethod.prototype.getValue = function (attr) {\n    return WIN.$cache.$attr(attr);\n  };\n\n  cmethod.prototype.deleteValue = function (attr, value) {\n    delete WIN.$cache[attr];\n  };\n\n  cmethod.prototype.findProjectsByCondition = function (param, callback) {\n    projectUIService.findProjectsByCondition(param, function (event) {\n      if (event.code == 0) {\n        if (callback) {\n          callback(event.data);\n        }\n      }\n    });\n  };\n\n  cmethod.prototype.getCurrentProjects = function (callback) {\n    var param = {\n      domainPath: userLoginUIService.user.domainPath\n    };\n    projectUIService.findProjectsByCondition(param, function (event) {\n      if (even.code == 0) {\n        if (callback) {\n          callback(event.data);\n        }\n      }\n    });\n  };\n\n  cmethod.prototype.getViewsByOnlyRole = function (viewType, resourceType, resourceId, callback) {\n    viewFlexService.getViewsByOnlyRole(viewType, function (event) {\n      var views = event.data;\n      /** 为防止同一模型有相同的视图被授权，在这里取VIEWID */\n\n      var loop = function loop(view) {\n        if (view.template && view.template.resourceType == resourceType && view.template.resourceId == resourceId) {\n          viewFlexService.getViewById(view.viewId, function (event) {\n            if (event.code == 0) {\n              callback(event.data);\n            } else {\n              callback(null);\n            }\n          });\n        }\n\n        ;\n      };\n\n      for (var i in views) {\n        loop(views[i]);\n      }\n      /**\n       var find = views.find(function(view){\n        return view.template && view.template.resourceType == resourceType && view.template.resourceId == resourceId;\n      });\n       if(find){\n        viewFlexService.getViewById(find.viewId, function(event){\n          if(event.code == 0){\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        })\n      };*/\n\n    });\n  };\n\n  cmethod.prototype.getManagedViewsByTypeAndRole = function (viewType, resourceType, resourceId, callback) {\n    viewFlexService.getManagedViewsByTypeAndRole(viewType, function (event) {\n      var views = event.data;\n      /** 为防止同一模型有相同的视图被授权，在这里取VIEWID */\n\n      var loop = function loop(view) {\n        if (view.template && view.template.resourceType == resourceType && view.template.resourceId == resourceId) {\n          viewFlexService.getViewById(view.viewId, function (event) {\n            if (event.code == 0) {\n              callback(event.data);\n            } else {\n              callback(null);\n            }\n          });\n        }\n\n        ;\n      };\n\n      for (var i in views) {\n        loop(views[i]);\n      }\n      /**\n      var find = views.find(function(view){\n        return view.template && view.template.resourceType == resourceType && view.template.resourceId == resourceId;\n      });\n      if(find){\n        viewFlexService.getViewById(find.viewId, function(event){\n          if(event.code == 0){\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        })\n      };*/\n\n    });\n  };\n\n  cmethod.prototype.growl = function (str) {\n    growl.success(str);\n  };\n\n  cmethod.prototype.sendDirective = function (nodeId, dirId, data, callback) {\n    resourceUIService.sendDeviceDirective(nodeId, dirId, data, function (returnObj) {\n      if (returnObj.code == 0) {\n        if (typeof callback == \"function\") {\n          callback(returnObj);\n        } else {\n          ;\n        } //growl.success(\"指令发送成功\", {});\n\n      }\n    });\n  };\n\n  cmethod.prototype.sendItemDir = function (dir, nodeId) {\n    var itemDirValues = {};\n\n    if (!dir.value) {\n      growl.warning(\"请输入指令参数\");\n      return;\n    }\n\n    for (var i in dir.params) {\n      var obj = dir.params[i];\n      itemDirValues[obj.name] = dir.value;\n    }\n\n    resourceUIService.sendDeviceDirective(nodeId ? nodeId : Number(this.getParameter(\"resourceId\")), dir.id, itemDirValues, function (returnObj) {\n      if (returnObj.code == 0) {\n        growl.success(\"指令发送成功\", {});\n      }\n    });\n  };\n\n  cmethod.prototype.sendItemDirAll = function (dir) {\n    var itemDirValues = {};\n\n    for (var i in dir.params) {\n      var obj = dir.params[i];\n\n      if (dir.params[i].$value) {\n        itemDirValues[obj.name] = dir.params[i].$value;\n      }\n    }\n\n    resourceUIService.sendDeviceDirective(Number(this.getParameter(\"resourceId\")), dir.id, itemDirValues, function (returnObj) {\n      if (returnObj.code == 0) {\n        growl.success(\"指令发送成功\", {});\n      }\n    });\n  };\n\n  cmethod.prototype.sendItemDirByValue = function (id, params) {\n    resourceUIService.sendDeviceDirective(Number(this.getParameter(\"resourceId\")), id, params, function (returnObj) {\n      if (returnObj.code == 0) {\n        growl.success(\"指令发送成功\", {});\n      }\n    });\n  };\n\n  cmethod.prototype.getAllDevices = function () {};\n\n  cmethod.prototype.getViewByViewTitle = function (viewTitle, callback) {\n    viewFlexService.getAllMyViews(function (event) {\n      var views = event.data;\n      var find = views.find(function (view) {\n        return view.viewTitle == viewTitle;\n      });\n\n      if (find) {\n        viewFlexService.getViewById(find.viewId, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      } else {\n        callback(null);\n      }\n    });\n  };\n\n  cmethod.prototype.getResources = function (callback) {\n    resourceUIService.getResources(function (event) {\n      if (event.code == 0) {\n        if (typeof callback == \"function\") {\n          callback(event.data);\n        } else {\n          ;\n        }\n\n        ;\n      }\n\n      ;\n    });\n  };\n\n  cmethod.prototype.getProjectsAndKpiValue = function (callback) {\n    var cur = this;\n    cur.findProjectsByCondition({}, function (projects) {\n      var cis = [];\n      var kpis = [999999];\n\n      var pushDiff = function pushDiff(arr) {\n        for (var i in arr) {\n          if (this.indexOf(arr[i]) == -1) {\n            this.push(arr[i]);\n          }\n        }\n      };\n\n      var sloop = function sloop(arr, rptback, callback) {\n        var inx = 0;\n\n        var repeat = function repeat(inx) {\n          var item = arr[inx];\n\n          if (item) {\n            rptback(item, function () {\n              inx++;\n              repeat(inx);\n            });\n          } else {\n            callback(arr);\n          }\n        };\n\n        repeat(inx);\n      };\n\n      var traverse = function traverse(callback) {\n        var cur = this;\n\n        for (var i in cur) {\n          for (var j in cur[i].devices) {\n            callback(cur[i], j, cur[i].devices[j]);\n          }\n        }\n      };\n\n      sloop(projects, function (project, callback1) {\n        cur.getDevicesByCondition({\n          projectId: project.id\n        }, function (devices) {\n          project.devices = devices;\n          var devis = devices.map(function (elem) {\n            return elem.id;\n          });\n          pushDiff.call(cis, devis);\n          sloop(devices, function (device, callback2) {\n            var modelId = device.modelId;\n            cur.getKpisByModelId(modelId, function (kpiDes) {\n              var kpiMaps = kpiDes.map(function (elem) {\n                return elem.id;\n              });\n              pushDiff.call(kpis, kpiMaps);\n              device.kpis = kpiDes;\n              callback2();\n            });\n          }, function () {\n            callback1();\n          });\n        });\n      }, function () {\n        cur.getKpiValueCi(cis, kpis, function (valuelist) {\n          traverse.call(projects, function (project, inx, device) {\n            if (project.detail == undefined) {\n              project.detail = [];\n            }\n\n            ;\n\n            var loop = function loop(kpi) {\n              var find = valuelist.find(function (el) {\n                return el.nodeId == device.id && el.kpiCode == kpi.id;\n              });\n              var alertFind = valuelist.find(function (el) {\n                return el.nodeId == device.id && el.kpiCode == 999999;\n              });\n              project.detail.push({\n                ci: {\n                  label: device.label\n                },\n                kpi: {\n                  label: kpi.label,\n                  icon: kpi.icon ? kpi.icon : \"proudsmart ps-system\"\n                },\n                status: alertFind ? alertFind.value : 0,\n                value: find ? find.value : \"-\"\n              });\n            };\n\n            for (var i in device.kpis) {\n              loop(device.kpis[i]);\n            }\n\n            ;\n          });\n          callback(projects);\n        });\n      });\n    });\n  };\n\n  cmethod.prototype.getResourceByModelId = function (id, callback) {\n    resourceUIService.getResourceByModelId(id, function (event) {\n      if (event.code == 0) {\n        if (typeof callback == \"function\") {\n          callback(event.data);\n        } else {\n          ;\n        }\n\n        ;\n      }\n\n      ;\n    });\n  };\n\n  cmethod.prototype.getProTypeByTypeId = function (id, callback) {\n    customMethodService.getProTypeByTypeId(id, function (event) {\n      if (event.code == 0) {\n        if (typeof callback == \"function\") {\n          callback(event.data);\n        } else {\n          ;\n        }\n      }\n    });\n  };\n\n  cmethod.prototype.getParameter = function (str) {\n    if (elemData.routeParam.parameter) {\n      var all = JSON.parse(elemData.routeParam.parameter);\n      var param = all[all.length - 1];\n      return param.$attr(str);\n    } else {\n      return null;\n    }\n  };\n\n  cmethod.prototype.getResourceById = function (id, callback) {\n    if (id) {\n      resourceUIService.getResourceById(id, function (event) {\n        if (event.code == 0) {\n          callback(event.data);\n        }\n\n        ;\n      });\n    } else {\n      callback(null);\n    }\n  };\n\n  cmethod.prototype.getOnlineByKpiCodes = function (id, callback) {\n    if (id) {\n      var kpiQueryModel = {\n        includeInstance: true,\n        isRealTimeData: true,\n        nodeIds: [id],\n        kpiCodes: [999998],\n        timePeriod: 0\n      };\n      var param = [\"kpi\", kpiQueryModel];\n      kpiDataService.getValueList(param, function (event) {\n        if (event.code == 0) {\n          callback(event.data);\n        }\n\n        ;\n      });\n    } else {\n      callback(null);\n    }\n  };\n\n  cmethod.prototype.navigateBack = function () {\n    var para,\n        page = elemData.routeParam.page ? elemData.routeParam.page : \"index\";\n    var oldParam = elemData.routeParam.parameter;\n\n    if (oldParam == undefined) {\n      oldParam = ['0'];\n    } else {\n      oldParam = JSON.parse(oldParam);\n    }\n\n    var pageArr = page.split(\"|\");\n    pageArr.pop();\n    page = pageArr.toString();\n    page.replace(\",\", \"|\");\n    var last = oldParam[oldParam.length - 1];\n    var tabLabel = last.tabLabel;\n    oldParam.pop();\n    para = encodeURIComponent(JSON.stringify(oldParam));\n\n    if (route.current.$$route.controller == \"viewFreeboardCtrl\") {\n      if (page != \"\") {\n        window.location.href = \"../app-sc/index_freeboard.html#/freeboard/\" + page + \"/\" + para;\n      }\n    } else if (route.current.$$route.controller == \"freeStyleCtrl\") {\n      var viewId = elemData.routeParam.viewId;\n\n      if (page != \"\") {\n        window.location.href = \"../app-free-style/index.html#/\" + viewId + \"/\" + page + \"/\" + para;\n      }\n    } else {\n      if (page != \"\") {\n        window.location.href = \"../app-oc/index.html#/dashboard/\" + page + \"/\" + para;\n      }\n    }\n\n    ;\n  };\n\n  cmethod.prototype.navigateTo = function (url, parameter, type) {\n    var para,\n        page = elemData.routeParam.page ? elemData.routeParam.page : \"index\";\n\n    if (parameter == undefined) {\n      parameter = '0';\n    }\n\n    var oldParam = elemData.routeParam.parameter;\n\n    if (oldParam == undefined) {\n      oldParam = ['0'];\n    } else {\n      oldParam = JSON.parse(oldParam);\n    }\n\n    if (type == \"self\") {\n      var pageArr = page.split(\"|\");\n      pageArr.pop();\n      page = pageArr.toString();\n      page.replace(\",\", \"|\");\n      var last = oldParam[oldParam.length - 1];\n      var tabLabel = last.tabLabel;\n      oldParam.pop();\n\n      if (tabLabel) {\n        parameter.tabLabel = tabLabel;\n      }\n\n      parameter.$target == \"self\";\n      oldParam.push(parameter);\n    } else {\n      parameter.$target == \"blank\";\n      oldParam.push(parameter);\n    }\n\n    para = encodeURIComponent(JSON.stringify(oldParam));\n\n    if (route.current.$$route.controller == \"viewFreeboardCtrl\") {\n      if (page != \"\") {\n        window.location.href = \"../app-sc/index_freeboard.html#/freeboard/\" + page + \"|\" + url + \"/\" + para;\n      } else {\n        window.location.href = \"../app-sc/index_freeboard.html#/freeboard/\" + url + \"/\" + para;\n      }\n    } else if (route.current.$$route.controller == \"freeStyleCtrl\") {\n      var viewId = elemData.routeParam.viewId;\n\n      if (page != \"\") {\n        window.location.href = \"../app-free-style/index.html#/\" + viewId + \"/\" + page + \"|\" + url + \"/\" + para;\n      } else {\n        window.location.href = \"../app-free-style/index.html#/\" + viewId + \"/\" + url + \"/\" + para;\n      }\n    } else {\n      if (page != \"\") {\n        window.location.href = \"../app-oc/index.html#/dashboard/\" + page + \"|\" + url + \"/\" + para;\n      } else {\n        window.location.href = \"../app-oc/index.html#/dashboard/\" + url + \"/\" + para;\n      }\n    }\n\n    ;\n  };\n\n  cmethod.prototype.http = function (url, callback) {\n    customMethodService.http(url, function (event) {\n      callback(event);\n    });\n  };\n\n  cmethod.prototype.linkTo = function (url, target) {\n    window.open(url, target ? target : \"_blank\");\n  };\n\n  cmethod.prototype.findViewHasProjectNameById = function (projectId, callback) {\n    this.getResourceById(projectId, function (project) {\n      var label = project.label;\n\n      var getRootPath = function getRootPath(domainPath) {\n        var arr = domainPath.split(\"/\");\n        return \"/\" + arr[1] + \"/\" + arr[2] + \"/\";\n      };\n\n      var rootPath = getRootPath(userLoginUIService.user.domainPath);\n      viewFlexService.getViewsOnlyPublishedByTypeAndDomainPath('dashboard', rootPath, function (event) {\n        var views = event.data;\n        var find = views.find(function (view) {\n          return label.indexOf(view.viewTitle) != -1;\n        });\n\n        if (find) {\n          viewFlexService.getViewById(find.viewId, function (event) {\n            if (event.code == 0) {\n              callback(event.data);\n            }\n          });\n        } else {\n          callback(null);\n        }\n      });\n    });\n  };\n\n  cmethod.prototype.getProjectsByCustomerId = function (customerId, callback) {\n    var param = {};\n\n    if (customerId) {\n      param.customerId = customerId;\n    }\n\n    ;\n    projectUIService.findProjectsByCondition(param, function (event) {\n      if (event.code == 0) {\n        callback(event.data);\n      }\n    });\n  };\n\n  cmethod.prototype.simulate = function (type, nodesDes, kpisDes, simulateFn, callback) {\n    var result = [];\n    var date = new Date();\n    var timeStamp = date.getTime();\n\n    var timeStampToStr = function timeStampToStr(timeStamp) {\n      var nDate = new Date(timeStamp - 8 * 3600 * 1000);\n      var year = nDate.getFullYear();\n      var month = nDate.getMonth() + 1;\n      var dat = nDate.getDate();\n      var hour = nDate.getHours();\n      var min = nDate.getMinutes();\n      var sec = nDate.getSeconds();\n\n      if (month < 10) {\n        month = \"0\" + month;\n      }\n\n      if (dat < 10) {\n        dat = \"0\" + dat;\n      }\n\n      if (hour < 10) {\n        hour = \"0\" + hour;\n      }\n\n      if (min < 10) {\n        min = \"0\" + min;\n      }\n\n      if (sec < 10) {\n        sec = \"0\" + sec;\n      }\n\n      ;\n      return year + \"-\" + month + \"-\" + dat + \"T\" + hour + \":\" + min + \":\" + sec + \".000+0000\";\n    };\n\n    var renderData = function renderData(index) {\n      var startTime = simulateFn.startTime.getTime();\n      var period = simulateFn.period;\n      var frequency = simulateFn.frequency;\n      var range = simulateFn.range;\n\n      var getData = function getData(curTime) {\n        if (curTime - startTime < period) {\n          var loopNodes = function loopNodes(node) {\n            var loopKpis = function loopKpis(inx, kpi) {\n              var calcRandom = function calcRandom(range) {\n                if (range) {\n                  var max = range[1];\n                  var min = range[0];\n                  var ran = max - min;\n                  return Math.round((min + Math.random() * ran) * 10) / 10;\n                } else {\n                  return Math.round(Math.random() * 100);\n                }\n              };\n\n              var val = calcRandom(range);\n              var sampleData = {\n                \"agentId\": \"0\",\n                \"aggregatePeriod\": null,\n                \"aggregateStatus\": null,\n                \"aggregateType\": null,\n                \"arisingTime\": timeStampToStr(curTime),\n                \"compressCount\": 0,\n                \"computeTaskId\": 0,\n                \"dataSerialNumber\": 0,\n                \"dataTime\": null,\n                \"insertTime\": timeStampToStr(curTime),\n                \"kpiCode\": kpi.id,\n                \"nodeId\": node.id,\n                \"notes\": null,\n                \"numberValue\": val,\n                \"quality\": 0,\n                \"resourceId\": 0,\n                \"stringValue\": null,\n                \"value\": val,\n                \"valueStr\": val + \"\"\n              };\n              result.push(sampleData);\n            };\n\n            for (var i in kpisDes) {\n              loopKpis(i, kpisDes[i]);\n            }\n          };\n\n          for (var i in nodesDes) {\n            loopNodes(nodesDes[i]);\n          }\n\n          ;\n          getData(curTime + frequency);\n        }\n      };\n\n      getData(startTime);\n\n      if (typeof callback == \"function\") {\n        callback(result);\n      }\n    };\n\n    var renderData2D = function renderData2D() {\n      var dictionaryService = services.dictionaryService;\n      var loadArray = [\"energyType\", \"industryShortType\"];\n\n      var nextStep = function nextStep() {\n        var loopNodes = function loopNodes(node) {\n          var loopKpis = function loopKpis(inx, kpi) {\n            var loopInstance = function loopInstance(ins1) {\n              var loopInstance2 = function loopInstance2(ins2) {\n                var range;\n\n                if (ranges) {\n                  range = ranges[inx];\n                }\n\n                var calcRandom = function calcRandom(range) {\n                  if (range) {\n                    var max = range[1];\n                    var min = range[0];\n                    var ran = max - min;\n                    return Math.round((min + Math.random() * ran) * 10) / 10;\n                  } else {\n                    return Math.round(Math.random() * 100);\n                  }\n                };\n\n                var val = calcRandom(range);\n                var newTime = timeStamp;\n                var sampleData = {\n                  \"agentId\": \"0\",\n                  \"aggregatePeriod\": null,\n                  \"aggregateStatus\": null,\n                  \"aggregateType\": null,\n                  \"arisingTime\": timeStampToStr(newTime),\n                  \"compressCount\": 0,\n                  \"computeTaskId\": 0,\n                  \"dataSerialNumber\": 0,\n                  \"dataTime\": null,\n                  \"insertTime\": timeStampToStr(newTime),\n                  \"kpiCode\": kpi.id,\n                  \"nodeId\": node.id,\n                  \"notes\": null,\n                  \"numberValue\": val,\n                  \"instance\": ins1.label + \",\" + ins2.label,\n                  \"quality\": 0,\n                  \"resourceId\": 0,\n                  \"stringValue\": null,\n                  \"value\": val,\n                  \"valueStr\": val + \"\"\n                };\n                result.push(sampleData);\n              };\n\n              for (var i in loadArray[1].data) {\n                loopInstance2(loadArray[1].data[i]);\n              }\n            };\n\n            for (var i in loadArray[0].data) {\n              loopInstance(loadArray[0].data[i]);\n            }\n          };\n\n          for (var i in kpisDes) {\n            loopKpis(i, kpisDes[i]);\n          }\n        };\n\n        for (var i in nodesDes) {\n          loopNodes(nodesDes[i]);\n        }\n\n        ;\n\n        if (typeof callback == \"function\") {\n          callback(result);\n        }\n      };\n\n      var loop = function loop(inx, loadType) {\n        var getEnergyType = function getEnergyType(event) {\n          var checkFinished = function checkFinished() {\n            var every = loadArray.every(function (elem) {\n              return _typeof(elem) == \"object\";\n            });\n\n            if (every) {\n              nextStep();\n            }\n          };\n\n          if (event.code == 0) {\n            var rs = [];\n\n            var loop = function loop(el) {\n              var some = rs.some(function (itm) {\n                return itm.label == el.label;\n              });\n\n              if (!some) {\n                rs.push(el);\n              }\n            };\n\n            for (var i in event.data) {\n              loop(event.data[i]);\n            }\n\n            loadArray[inx] = {\n              path: loadType,\n              status: \"finished\",\n              data: rs\n            };\n            checkFinished();\n          }\n        };\n\n        dictionaryService.getDictValues(loadType, getEnergyType);\n      };\n\n      for (var i in loadArray) {\n        loop(i, loadArray[i]);\n      }\n    };\n\n    var renderData3D = function renderData3D() {\n      var aggr_type;\n      var dictionaryService = services.dictionaryService;\n      var loadArray = [\"energyType\", \"industryShortType\"];\n\n      var nextStep = function nextStep() {\n        var loopNodes = function loopNodes(node) {\n          var loopKpis = function loopKpis(inx, kpi) {\n            var loopAggrType = function loopAggrType(atype) {\n              var loopInstance = function loopInstance(ins1) {\n                var loopInstance2 = function loopInstance2(ins2) {\n                  var range;\n\n                  if (ranges) {\n                    range = ranges[inx];\n                  }\n\n                  var calcRandom = function calcRandom(range) {\n                    if (range) {\n                      var max = range[1];\n                      var min = range[0];\n                      var ran = max - min;\n                      return Math.round((min + Math.random() * ran) * 10) / 10;\n                    } else {\n                      return Math.round(Math.random() * 100);\n                    }\n                  };\n\n                  var val = calcRandom(range);\n                  var newTime = timeStamp;\n                  var sampleData = {\n                    \"agentId\": \"0\",\n                    \"aggregatePeriod\": null,\n                    \"aggregateStatus\": null,\n                    \"aggregateType\": atype.valueCode,\n                    \"arisingTime\": timeStampToStr(newTime),\n                    \"compressCount\": 0,\n                    \"computeTaskId\": 0,\n                    \"dataSerialNumber\": 0,\n                    \"dataTime\": null,\n                    \"insertTime\": timeStampToStr(newTime),\n                    \"kpiCode\": kpi.id,\n                    \"nodeId\": node.id,\n                    \"notes\": null,\n                    \"numberValue\": val,\n                    \"instance\": ins2.label + \",\" + ins1.label,\n                    \"quality\": 0,\n                    \"resourceId\": 0,\n                    \"stringValue\": null,\n                    \"value\": val,\n                    \"valueStr\": val + \"\"\n                  };\n                  result.push(sampleData);\n                };\n\n                for (var i in loadArray[1].data) {\n                  loopInstance2(loadArray[1].data[i]);\n                }\n              };\n\n              for (var i in loadArray[0].data) {\n                loopInstance(loadArray[0].data[i]);\n              }\n            };\n\n            for (var i in aggr_type) {\n              loopAggrType(aggr_type[i]);\n            }\n\n            ;\n          };\n\n          for (var i in kpisDes) {\n            loopKpis(i, kpisDes[i]);\n          }\n        };\n\n        for (var i in nodesDes) {\n          loopNodes(nodesDes[i]);\n        }\n\n        ;\n\n        if (typeof callback == \"function\") {\n          callback(result);\n        }\n      };\n\n      var loop = function loop(inx, loadType) {\n        var getEnergyType = function getEnergyType(event) {\n          var checkFinished = function checkFinished() {\n            var every = loadArray.every(function (elem) {\n              return _typeof(elem) == \"object\";\n            });\n\n            if (every) {\n              nextStep();\n            }\n          };\n\n          if (event.code == 0) {\n            var rs = [];\n\n            var loop = function loop(el) {\n              var some = rs.some(function (itm) {\n                return itm.label == el.label;\n              });\n\n              if (!some) {\n                rs.push(el);\n              }\n            };\n\n            for (var i in event.data) {\n              loop(event.data[i]);\n            }\n\n            loadArray[inx] = {\n              path: loadType,\n              status: \"finished\",\n              data: rs\n            };\n            checkFinished();\n          }\n        };\n\n        dictionaryService.getDictValues(loadType, getEnergyType);\n      };\n\n      for (var i in loadArray) {\n        loop(i, loadArray[i]);\n      }\n\n      dictionaryService.getDictValues(\"aggregateType\", function (event) {\n        if (event.code == 0) {\n          aggr_type = event.data.slice(0, 2);\n        }\n      });\n    };\n\n    if (type == \"time\") {\n      renderData();\n    } else if (type == \"ci\") {\n      renderData(0);\n    } else if (type == \"ci_2d\") {\n      renderData2D();\n    } else if (type == \"ci_3d\") {\n      renderData3D();\n    }\n\n    ;\n    return result;\n  };\n\n  cmethod.prototype.getModels = function (callback) {\n    resourceUIService.getModels(function (event) {\n      if (event.code == 0) {\n        callback(event.data);\n      }\n    });\n  };\n\n  cmethod.prototype.getKpisByModelId = function (modelId, callback) {\n    if (modelId) {\n      resourceUIService.getKpisByModelId(modelId, function (event) {\n        if (event.code == 0) {\n          callback(event.data);\n        }\n      });\n    } else {\n      callback([]);\n    }\n\n    ;\n  };\n\n  cmethod.prototype.getResourceByModelId = function (modelId, callback) {\n    if (modelId) {\n      resourceUIService.getResourceByModelId(modelId, function (event) {\n        if (event.code == 0) {\n          callback(event.data);\n        }\n      });\n    } else {\n      callback([]);\n    }\n\n    ;\n  };\n\n  cmethod.prototype.getDomainsByFilter = function (filter, callback) {\n    resourceUIService.getDomainsByFilter(filter, function (event) {\n      if (event.code == 0) {\n        callback(event.data);\n      }\n    });\n  };\n\n  cmethod.prototype.queryDomainsByEnterpriseId = function (filter, callback) {\n    energyConsumeUIService.queryDomainsByEnterpriseId(filter, function (event) {\n      if (event.code == 0) {\n        callback(event.data);\n      }\n    });\n  };\n\n  cmethod.prototype.getProjectsByDomains = function (domains, callback) {\n    var param = {};\n\n    if (domains) {\n      param.domainPath = domains;\n    }\n\n    ;\n    projectUIService.findProjectsByCondition(param, function (event) {\n      if (event.code == 0) {\n        callback(event.data);\n      }\n    });\n  };\n\n  cmethod.prototype.getProjectsByDomains = function (domains, callback) {\n    var param = {};\n\n    if (domains) {\n      param.domainPath = domains;\n    }\n\n    ;\n    projectUIService.findProjectsByCondition(param, function (event) {\n      if (event.code == 0) {\n        callback(event.data);\n      }\n    });\n  };\n\n  cmethod.prototype.getCurrentProjectsFromDomain = function (callback) {\n    var cur = this;\n    var domains = userLoginUIService.user.domains;\n    resourceUIService.getDomainsByFilter({\n      domains: userLoginUIService.user.domains,\n      modelId: 302\n    }, function (event) {\n      if (event.code == 0) {\n        callback(event.data);\n      }\n    });\n  };\n\n  cmethod.prototype.findProjectById = function (id, callback) {\n    projectUIService.findProjectById(id, function (event) {\n      if (event.code == 0) {\n        if (callback) {\n          callback(event.data);\n        }\n      }\n    });\n  };\n\n  cmethod.prototype.getCurrentProjectsByCustom = function (callback) {\n    var cur = this; //如果没有subDomain的话，那就不是客户用户，没有customerId的\n\n    if (!userLoginUIService.user.subDomain) {\n      callback([]);\n      return;\n    }\n\n    var arr = userLoginUIService.user.subDomain.split(\"/\");\n    var customerId = arr[arr.length - 2];\n    var param = {\n      customerId: customerId\n    };\n    projectUIService.findProjectsByCondition(param, function (event) {\n      if (event.code == 0) {\n        if (callback) {\n          callback(event.data);\n        }\n      }\n    });\n  };\n\n  cmethod.prototype.getViewByProjectId = function (resId, callback) {\n    var getRootPath = function getRootPath(domainPath) {\n      var arr = domainPath.split(\"/\");\n      return \"/\" + arr[1] + \"/\" + arr[2] + \"/\";\n    };\n\n    var rootPath = getRootPath(userLoginUIService.user.domainPath);\n    viewFlexService.getViewsOnlyPublishedByTypeAndDomainPath('configure', rootPath, function (event) {\n      var views = event.data;\n      var find = views.find(function (view) {\n        if (view.template) {\n          if (view.template.resourceType == \"project\") {\n            if (view.template.resourceId == resId) {\n              return true;\n            }\n          }\n        }\n\n        return false;\n      });\n\n      if (find) {\n        viewFlexService.getViewById(find.viewId, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      } else {\n        callback(null);\n      }\n    });\n  };\n\n  cmethod.prototype.getViewByModelId = function (resId, callback) {\n    var getRootPath = function getRootPath(domainPath) {\n      var arr = domainPath.split(\"/\");\n      return \"/\" + arr[1] + \"/\" + arr[2] + \"/\";\n    };\n\n    var rootPath = getRootPath(userLoginUIService.user.domainPath);\n    viewFlexService.getViewsOnlyPublishedByTypeAndDomainPath('configure', rootPath, function (event) {\n      var views = event.data;\n      var find = views.find(function (view) {\n        if (view.template) {\n          if (view.template.resourceType == \"device\") {\n            if (view.template.resourceId == resId) {\n              return true;\n            }\n          }\n        }\n\n        return false;\n      });\n\n      if (find) {\n        viewFlexService.getViewById(find.viewId, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      } else {\n        callback(null);\n      }\n    });\n  };\n\n  cmethod.prototype.getSimulateList = function (data, callback) {\n    customMethodService.getSimulateList(data, callback);\n  };\n\n  cmethod.prototype.webSocket = function (nodeIds, kpiCodes, callback) {\n    var uuid = Math.uuid();\n    var paramSocket = {\n      ciid: nodeIds.toString(),\n      kpi: kpiCodes.toString()\n    };\n    /**\n    var inx1 = Math.floor(Math.random() * nodeIds.length)\n    var inx2 = Math.floor(Math.random() * kpiCodes.length);\n    var val = Math.round(Math.random() * 100);\n    callback({\n      value : val,\n      nodeId : nodeIds[inx1],\n      kpiCode : kpiCodes[inx2]\n    });\n    var test = function(){\n      setTimeout(function(){\n        var inx1 = Math.floor(Math.random() * nodeIds.length);\n        var inx2 = Math.floor(Math.random() * kpiCodes.length);\n        var val = Math.round(Math.random() * 100);\n        callback({\n          value : val,\n          nodeId : nodeIds[inx1],\n          kpiCode : kpiCodes[inx2]\n        });\n        test();\n      }, 6000);\n    };\n    test();*/\n\n    SwSocket.unregister(uuid);\n    var operation = \"register\";\n    SwSocket.register(uuid, operation, function (event) {\n      if (typeof callback == \"function\") {\n        callback(event.data);\n      }\n    });\n    SwSocket.send(uuid, operation, 'kpi', paramSocket);\n    /**\n     * PROMETHEUS-586 \n     * 注销scope时注销方法heartBeat，回调函数callback\n     */\n\n    $('#free-board').on('naviClick', function () {\n      ;\n      SwSocket.unregister(uuid);\n    });\n  };\n\n  cmethod.prototype.getKpiFromViewByTypeAndRole = function (viewType, resourceType, resourceId, callback, socketCallback) {\n    var kpiCodes = [];\n    var nodeIds;\n\n    if (this.getParameter(\"resourceId\")) {\n      nodeIds = [Number(this.getParameter(\"resourceId\"))];\n    } else if (this.parameters[\"resourceId\"]) {\n      nodeIds = [this.parameters[\"resourceId\"]];\n    }\n\n    var valueDic = {};\n    var uuid = Math.uuid();\n    this.getViewsByOnlyRole(viewType, resourceType, resourceId, function (view) {\n      var json = JSON.parse(view.content);\n      json.cells.sort(function (a, b) {\n        return parseInt(a.z) - parseInt(b.z);\n      });\n      json.cells.forEach(function (cell) {\n        if (cell.type == \"basic.Rect\" && cell.kpiId && cell.kpiId.length > 8 && cell.nodeId && cell.nodeId.length > 8) {\n          var kpiId;\n\n          if (typeof cell.kpiId == \"string\" && cell.kpiId.search('number:') > -1) {\n            kpiId = Number(cell.kpiId.split(\":\")[1]);\n          } else {\n            kpiId = Number(cell.kpiId);\n          }\n\n          var modelId;\n\n          if (typeof cell.modelId == \"string\" && cell.modelId.search('number:') > -1) {\n            modelId = Number(cell.modelId.split(\":\")[1]);\n          } else {\n            modelId = Number(cell.modelId);\n          }\n\n          var kpiDef = {};\n\n          if (resourceUIService.rootModelsDic && resourceUIService.rootModelsDic[modelId]) {\n            if (resourceUIService.rootModelsDic[modelId].kpiDic && resourceUIService.rootModelsDic[modelId].kpiDic[kpiId]) {\n              kpiDef = resourceUIService.rootModelsDic[modelId].kpiDic[kpiId];\n            }\n          }\n\n          kpiCodes.push(kpiId);\n          valueDic[kpiId] = {\n            kpiName: cell.attrs.text.text ? cell.attrs.text.text : kpiDef.label,\n            kpiUnit: cell.unitType == \"number:1\" ? kpiDef.unitLabel ? kpiDef.unitLabel : \"\" : \"\",\n            value: \"无\",\n            kpiCode: kpiDef.id,\n            rangeObj: kpiDef.rangeObj\n          };\n        }\n      });\n      var kpiQueryModel = {\n        category: 'ci',\n        isRealTimeData: true,\n        nodeIds: nodeIds,\n        kpiCodes: kpiCodes,\n        startTime: null,\n        endTime: null,\n        timeRange: \"\",\n        statisticType: \"psiot\",\n        condList: []\n      };\n      var param = [\"kpi\", kpiQueryModel];\n      kpiDataService.getValueList(param, function (event) {\n        if (event.code == 0) {\n          event.data.forEach(function (kpi) {\n            valueDic[kpi.kpiCode].value = kpi.value;\n            if (valueDic[kpi.kpiCode].rangeObj) valueDic[kpi.kpiCode].value = valueDic[kpi.kpiCode].rangeObj[valueDic[kpi.kpiCode].value];\n          });\n          var returnAry = [];\n\n          for (var key in valueDic) {\n            returnAry.push(valueDic[key]);\n          }\n\n          callback(returnAry);\n        }\n      });\n      var paramSocket = {\n        ciid: nodeIds.toString(),\n        kpi: kpiCodes.toString()\n      };\n      SwSocket.unregister(uuid);\n      var operation = \"register\";\n      SwSocket.register(uuid, operation, function (event) {\n        if (typeof socketCallback == \"function\") {\n          if (valueDic[event.data.kpiCode].rangeObj) event.data.value = valueDic[event.data.kpiCode].rangeObj[event.data.value];\n          socketCallback(event.data);\n        }\n      });\n      SwSocket.send(uuid, operation, 'kpi', paramSocket);\n      /**\n       * PROMETHEUS-586 \n       * 注销scope时注销方法heartBeat，回调函数callback\n       */\n\n      $('#free-board').on('naviClick', function () {\n        ;\n        SwSocket.unregister(uuid);\n      });\n    });\n  };\n\n  cmethod.prototype.filterEnterprises = function (callback) {\n    var domainPath = userLoginUIService.user.domains;\n    energyConsumeUIService.findEnterpriseInfoByDomainPath(domainPath, function (returnObj) {\n      if (returnObj.code == 0) {\n        returnObj.data.valueCode = returnObj.data.industryType;\n        cmethod.prototype.queryEnterpriseListByHis(returnObj.data, function (eventData) {\n          ;\n          callback(eventData);\n        });\n      }\n    });\n  };\n\n  cmethod.prototype.queryEnterpriseListByHis = function (shortName, callback) {\n    if (!shortName) {\n      growl.warning(\"请选择行业\");\n      return;\n    }\n\n    var industryShortType = shortName.valueCode; //获取所有企业\n\n    var queryEnterprises = [];\n\n    (function queryAllEnterprises() {\n      energyConsumeUIService.findEnterpriseInfos(function (returnObj) {\n        if (returnObj.code == 0) {\n          returnObj.data.forEach(function (item) {\n            if (item.industryType == industryShortType) {\n              item.label = item.name;\n              queryEnterprises.push(item);\n            }\n          });\n          callback(queryEnterprises);\n        }\n      });\n    })();\n  };\n\n  cmethod.prototype.queryDomains = function (filter, callback) {\n    var nodeIdAry = [];\n    var index = 0;\n\n    var queryDomainsByEnterpriseId = function queryDomainsByEnterpriseId(enterpriseId) {\n      energyConsumeUIService.queryDomainsByEnterpriseId(enterpriseId, function (returnObj) {\n        if (returnObj.code == 0) {\n          index++;\n          var ary = returnObj.data.filter(function (item) {\n            return item.modelDefinitionId == filter.modelId;\n          });\n          ary.forEach(function (item) {\n            nodeIdAry.push(item.id);\n          });\n\n          if (index == filter.enterpriseList.length) {\n            callback(nodeIdAry);\n            index = 0;\n          }\n        }\n      });\n    };\n\n    filter.enterpriseList.forEach(function (item) {\n      queryDomainsByEnterpriseId(item);\n    });\n  };\n\n  cmethod.prototype.getDirectivesByTypeAndRole = function (viewType, resourceType, resourceId, callback) {\n    var ids = {};\n    var cur = this;\n    cur.getManagedViewsByTypeAndRole(viewType, resourceType, resourceId, function (view) {\n      var json = JSON.parse(view.content);\n      json.cells.forEach(function (cell) {\n        if (cell.directiveIds) {\n          cell.directiveIds.forEach(function (dirctiveId) {\n            if (typeof dirctiveId == \"string\") ids[dirctiveId.split(\":\")[1]] = true;else ids[dirctiveId] = true;\n          });\n        }\n      });\n      cur.getDirectivesByModelId(resourceId, function (event) {\n        var resources = [];\n        event.forEach(function (dir) {\n          if (ids[dir.id]) resources.push(dir);\n        });\n        resources.sort(doubleCompare([\"values\", \"index\"], \"desc\"));\n        callback(resources);\n      });\n    });\n  };\n\n  cmethod.prototype.getDirectivesByTypeAndRoleAndValue = function (viewType, resourceType, modelId, callback) {\n    var ids = {};\n    var resourceId = this.getParameter(\"resourceId\");\n    var cur = this;\n    cur.getViewsByOnlyRole(viewType, resourceType, modelId, function (view) {\n      var json = JSON.parse(view.content);\n      json.cells.forEach(function (cell) {\n        if (cell.directiveIds) {\n          cell.directiveIds.forEach(function (dirctiveId) {\n            if (typeof dirctiveId == \"string\") ids[dirctiveId.split(\":\")[1]] = true;else ids[dirctiveId] = true;\n          });\n        }\n      });\n      cur.getDirectivesByModelId(modelId, function (event) {\n        var directives = [];\n        event.forEach(function (dir) {\n          if (ids[dir.id]) directives.push(dir);\n        });\n        directives.sort(doubleCompare([\"values\", \"index\"], \"desc\"));\n        var kpis = directives.map(function (elem) {\n          if (elem.params) {\n            if (elem.params[0]) {\n              return elem.params[0].id;\n            } else {\n              ;\n              return 0;\n            }\n          } else {\n            return 0;\n          }\n        });\n        ;\n        var ci = [parseInt(resourceId)];\n        cur.getKpiValueCi(ci, kpis, function (event) {\n          var loop = function loop(item) {\n            var directive = directives.find(function (elem) {\n              if (elem.params[0]) {\n                return elem.params[0].id == item.kpiCode;\n              } else {\n                return false;\n              }\n            });\n\n            if (directive) {\n              directive.value = item.value;\n            }\n          };\n\n          for (var i in event) {\n            loop(event[i]);\n          }\n\n          ;\n          callback(directives);\n        });\n      });\n    });\n  };\n\n  cmethod.prototype.getDirectivesByModelId = function (modelId, callback) {\n    if (modelId) {\n      resourceUIService.getDirectivesByModelId(modelId, function (event) {\n        if (event.code == 0) {\n          callback(event.data);\n        }\n      });\n    } else {\n      callback([]);\n    }\n  };\n\n  cmethod.prototype.queryBenchmarkByShortName = function (shortName, callback) {\n    var industryDic = {};\n    var energyDic = {};\n    var industryShortType = [];\n    var energyType = [];\n    dictionaryService.getAllDicts(function (returnObj) {\n      if (returnObj.code == 0) {\n        returnObj.data.forEach(function (item) {\n          if (item.dictCode == 'industryShortType') {\n            industryShortType.push(item);\n          } else if (item.dictCode == 'energyType') {\n            energyType.push(item);\n          }\n        });\n        industryShortType.forEach(function (item) {\n          industryDic[item.label] = item;\n        });\n        energyType.forEach(function (item) {\n          energyDic[item.label] = item;\n        });\n        callBack();\n      }\n    });\n\n    function callBack() {\n      var returnAry = [];\n      var param = [\"kpi\", {\n        \"isRealTimeData\": true,\n        \"nodeIds\": [userLoginUIService.user.domainID],\n        \"kpiCodes\": [3327],\n        \"granularityUnit\": 'MONTH',\n        \"aggregateType\": [\"VALENTWEIGHT\"],\n        \"timeRange\": \"\",\n        \"statisticType\": \"psiot\",\n        \"includeInstance\": true,\n        \"condList\": [],\n        \"timePeriod\": 1,\n        \"dataType\": 1\n      }];\n      kpiDataService.getValueList(param, function (returnObj) {\n        if (returnObj.code == 0) {\n          returnObj.data.forEach(function (item) {\n            var instanceAry = item.instance.split(',');\n            item.instanceName = industryDic[instanceAry[0]].param;\n            item.instanceCode = industryDic[instanceAry[0]].valueCode;\n            item.energyName = instanceAry[1];\n            item.energyCode = energyDic[instanceAry[1]].valueCode;\n\n            if (shortName.label == instanceAry[0]) {\n              returnAry.push(item);\n            }\n          });\n          callback(returnAry);\n        }\n      });\n    }\n\n    ;\n  };\n\n  return cmethod;\n});"],"sourceRoot":"/source/"}