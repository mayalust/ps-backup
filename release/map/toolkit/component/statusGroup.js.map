{"version":3,"sources":["toolkit/component/statusGroup.js"],"names":["define","ultility","data","expression","dom","$","element","global","style","document","createElement","$$","runExpression","$attr","funRes","code","fnResult","system","console","error","message","initFn","render","d","wrap","display","wrap1","wrap2","fragement","createDocumentFragment","flex","width","padding","index","obj","callback","key","keys","i","push","sort","a","b","length","sortedKeys","n","item","float","border","margin","ids","unit0","empty","text","innerText","instanceName","fontSize","background","textAlign","cursor","appendChild","text1","height","unit","value","color","setAttribute","instance","kpiCode","alertLevel","onclick","e","navigateTo","sensor","getAttribute","dataItems","unit2","kpiName","slice","each","target","runExpressionSuccess"],"mappings":"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","file":"toolkit/component/statusGroup.js","sourcesContent":["/**\n * Created by leonlin on 16/11/3.\n */\ndefine(['../../../node_modules/ps-ultility/ps-ultility.js'], function (ultility) {\n  return function (data) {\n    var dom = $(\"<div></div>\");\n    var element = data.element;\n    var global = data.global;\n    var style = data.element.style;\n    var wrap = document.createElement(\"div\");\n    var expression;\n    $$.runExpression(element.$attr(\"advance/expression\"), function (funRes) {\n      if (funRes.code == \"0\") {\n        var fnResult = funRes.data;\n\n        if (typeof fnResult == 'function') {\n          expression = fnResult(data, system);\n        } else {\n          expression = fnResult;\n        }\n\n        expression = expression || {};\n      } else {\n        expression = {};\n        console.error(funRes.message);\n      }\n\n      runExpressionSuccess(expression);\n    });\n\n    function runExpressionSuccess(expression) {\n      var initFn = expression.$attr(\"on/init\");\n      style = style ? style : {};\n\n      var render = function render(d) {\n        var wrap = document.createElement(\"div\");\n        wrap.style.display = \"flex\";\n        var wrap1 = document.createElement(\"div\");\n        var wrap2 = document.createElement(\"div\");\n        var fragement = document.createDocumentFragment();\n        wrap1.style.flex = \"1\";\n        wrap2.style.width = \"30px\";\n        wrap2.style.padding = \"4px 0\";\n        var index = 0;\n\n        function each(n, i) {\n          var item = document.createElement(\"div\");\n          item.style.float = \"left\";\n          item.style.width = \"9%\";\n          item.style.border = \"1px solid #25729d\";\n          item.style.margin = \"2px\";\n          var ids = document.createElement(\"div\");\n          ids.style.padding = \"8px 0px 9px 0\";\n\n          for (var i = 0; i < n.length; i++) {\n            var unit0 = document.createElement(\"div\");\n            var empty = document.createElement(\"div\"); //标题\n\n            if (i == 0) {\n              var text = document.createElement(\"div\");\n              text.innerText = n[0].instanceName;\n              text.style.fontSize = \"14px\";\n              text.style.background = \"#214770\";\n              text.style.textAlign = \"center\";\n              text.style.display = \"block\";\n              text.style.cursor = \"pointer\";\n              unit0.appendChild(text);\n              var text1 = document.createElement(\"div\");\n              text1.style.height = \"17px\";\n              text1.style.textAlign = \"center\";\n              text1.style.display = \"block\";\n              text1.style.padding = \"10px 0\";\n              empty.appendChild(text1);\n            }\n\n            var unit = document.createElement(\"div\");\n            unit.innerText = n[i].value;\n            unit.style.width = \"80%\";\n            unit.style.margin = \"3% auto\";\n            unit.style.textAlign = \"center\";\n            unit.style.color = \"#FFFFFF\";\n            unit.style.fontSize = \"12px\";\n            unit.style.cursor = \"pointer\";\n            unit.setAttribute(\"instance\", n[i].instance);\n            unit.setAttribute(\"kpiCode\", n[i].kpiCode); //判断颜色\n\n            if (n[i].alertLevel == 1) {\n              unit.style.background = \"#00bb7b\";\n            } else if (n[i].alertLevel == 2) {\n              unit.style.background = \"#efd80b\";\n            } else if (n[i].alertLevel == 3) {\n              unit.style.background = \"#ff8800\";\n            } else if (n[i].alertLevel == 4) {\n              unit.style.background = \"#cc0000\";\n            } //点击设置页面的跳转\n\n\n            unit.onclick = function (e) {\n              element.navigateTo(\"index\", \"专业分析\", {\n                sensor: unit.getAttribute(\"instance\"),\n                dataItems: unit.getAttribute(\"kpiCode\")\n              });\n            };\n\n            unit0.appendChild(unit);\n            item.appendChild(unit0);\n            var unit2 = document.createElement(\"div\");\n            unit2.innerText = n[i].kpiName.slice(-2);\n            unit2.style.width = \"80%\";\n            unit2.style.textAlign = \"center\";\n            unit2.style.color = \"#ffffff\";\n            unit2.style.fontSize = \"12px\";\n            empty.appendChild(unit2);\n            ids.appendChild(empty);\n          }\n\n          if (index % 10 == 0) {\n            wrap2.appendChild(ids);\n          }\n\n          index++;\n          wrap1.appendChild(item);\n        }\n\n        function sortedKeys(obj, callback) {\n          var keys = [],\n              key;\n\n          for (var i in obj) {\n            keys.push(i);\n          }\n\n          ;\n          keys.sort(function (a, b) {\n            return a < b ? -1 : 1;\n          });\n\n          for (i = 0; i < keys.length; i++) {\n            key = keys[i];\n            callback(obj[key], key);\n          }\n        }\n\n        sortedKeys(d, function (n, i) {\n          each(n, i);\n        });\n        wrap.appendChild(wrap2);\n        wrap.appendChild(wrap1);\n        fragement.appendChild(wrap);\n        dom[0].appendChild(fragement);\n      };\n\n      element.render = render;\n\n      if (initFn) {\n        try {\n          initFn({\n            target: element,\n            global: global\n          });\n        } catch (e) {\n          ;\n        }\n      }\n    }\n\n    return dom;\n  };\n});"],"sourceRoot":"/source/"}