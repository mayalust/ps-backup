{"version":3,"sources":["toolkit/component/ctrlgroup.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","define","data","clear","element","global","scope","rootScope","growl","compile","expression","defer","wrap","$","$$","runExpression","$attr","funRes","code","fnResult","system","format","layout","wholeWidth","width","bootstrap","ctrlgroup","append","css","createIcon","fmt","ctrlGroup","td","style","tdStyle","cls","class","icon","clickFn","addClass","on","event","createLabel","composory","hide","labelStyle","linkage","compIconwrap","label","attr","hideExtraText","display","cursor","overflow","text-overflow","white-space","position","top","text","rnd","parseInt","Math","random","createMultiSelect","id","options","getSelect","arr","filter","find","each","index","target","ele","push","select","loop","item","value","option","join","indexOf","i","children","remove","setTimeout","toolReady","multiselect","buttonText","length","selected","this","substr","onChange","elem","checked","changeFn","row","current","values","e","console","error","enableFiltering","buttonWidth","loadExternalJs","createAutoComplete","placeholder","autocomplete","availableTags","source","request","response","key","term","toUpperCase","stxt","chineseCharacterToPinyin","slice","equalPinyin","map","change","ui","val","currentTarget","createTextarea","input","disabled","attrs","k","createToggle","inner","hasClass","removeClass","createInput","createMultipleSelect","rs","inx","select2Dom","trigger","replacer","button","div","customInput","height","background-color","padding","ensureBtn","isFlag","click","show","inputVal","newOption","Option","baseSelect2","language","noResults","noresults","multiple","select2","createInputableSelect","tdWrap","btn","pop","addBtn","z-index","border","inputValue","v","info","valueCode","createSelet","getData4Options","forEach","undefined","evt","params","parentEvent","parentName","$on","empty","parentKey","createClipboardButton","btnStyle","btnclass","saveFn","txt","prop","clipboardText","Clipboard","clipboard","clearSelection","action","createButton","createUploadFile","cfg","file","group","previewBtn","submitBtn","submitFn","config","fileDom","off","createSystemPopupByJsonName","title","uploadFile","name","url","files","createUploadFile2","autosubmit","manual","fileFormat","formData","mulbtn","dpulDom","path","textAry","split","prepend","dpliDom","groupId","delBtn","downloadBtn","btnstatus","search","deleteFn","downloadFn","txtStr","f","File","uploadFile1","createButtonGroup","groupStyle","createBtn","fmtBtn","createClipboardBtn","content","type","createDatePicker","uuid","bottom","right","laydate","assert","render","theme","useMomentFormat","done","date","endDate","getUTCDateString","formatDatebyMomentToUTC","getDateString","createDateTimePicker","dateType","CLASS","trimmToDate","btns","createDateRangePicker","range","getDateHandler","dateArray","start","end","startDateString","endDateString","createJQury","renderFn","createDropDownTree","dropDownTree","dropdowntree","createSvg","svgAttr","svgStyle","d3","svg","createCustomHtml","Array","qualifiedName","a","textContent","createClock","valueFn","clock","myClock","init","createRadio","radioDom","createCheckBoxList","column","createCheckboxList","trick","checkbox","some","hasOwnProperty","Object","defineProperty","enumerable","dom","vertical-align","createProgress","table","tr","td1","td2","shownumber","pwrap","progress","popover","mousemove","clientY","clientX","ctrlGroups","resolve","loopCtrlGroups","inputGroup","loopformat","refresh","colSpan","rowSpan","setSelfDom","parentShow","parent","parentHide","initFn","cacheAllData","underWatch","runExpressionSuccess"],"mappings":"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","file":"toolkit/component/ctrlgroup.js","sourcesContent":["function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/**\n * Created by leonlin on 16/11/3.\n */\ndefine([], function () {\n  return function (data) {\n    var element = data.element;\n    var global = data.global;\n    var clear;\n    var scope = data.scope;\n    var rootScope = data.rootScope;\n    var compile = data.compile;\n    var growl = data.growl;\n    delete element.growl;\n    var defer = data.defer;\n    var wrap = $(\"<div></div>\");\n    /**\n     if (element.style) {\n      wrap.css(element.style);\n    }*/\n\n    var expression;\n    $$.runExpression(element.$attr(\"advance/expression\"), function (funRes) {\n      if (funRes.code == \"0\") {\n        var fnResult = funRes.data;\n\n        if (typeof fnResult == 'function') {\n          expression = fnResult(data, system);\n        } else {\n          expression = fnResult;\n        }\n\n        expression = expression ? expression : {};\n      } else {\n        expression = {}; //throw new Error(funRes.message);\n      }\n\n      runExpressionSuccess(expression);\n    }, element);\n\n    function runExpressionSuccess(expression) {\n      var format = expression.format;\n      var layout = expression.layout || \"fixed\";\n      var wholeWidth = expression.width || \"100%\";\n      var cgroupstyle = element.$attr(\"parameters/cgroupstyle\");\n      var bootstrap = cgroupstyle == \"bootstrap\" || expression.bootstrap || false;\n\n      if (bootstrap) {\n        var ctrlgroup = $(\"<div></div>\");\n      } else {\n        var ctrlgroup = $(\"<table></table>\");\n      }\n\n      wrap.append(ctrlgroup);\n      ctrlgroup.css(\"width\", wholeWidth);\n      ctrlgroup.css(\"table-layout\", layout);\n\n      var createIcon = function createIcon(fmt, ctrlGroup) {\n        var td = $(\"<td></td>\");\n        var style = fmt.style || {};\n        var tdStyle = fmt.tdStyle || {};\n        var cls = fmt.class || \"\";\n        var icon = $(\"<span></span>\");\n        var clickFn = fmt.$attr(\"on/click\");\n        icon.addClass(fmt.icon);\n        td.addClass(cls);\n        td.css(\"padding\", \"3px\");\n\n        if (_typeof(style) == \"object\") {\n          icon.css(style);\n        }\n\n        icon.css(tdStyle);\n        td.on(\"click\", function (event) {\n          if (clickFn) {\n            clickFn();\n          }\n        });\n        td.append(icon);\n        return td;\n      };\n\n      var createLabel = function createLabel(fmt, ctrlGroup) {\n        var td = $(\"<td></td>\");\n        var style = fmt.style || {};\n        var composory = fmt.composory || false;\n        var hide = fmt.hide || false;\n        var labelStyle = fmt.labelStyle || {};\n        var linkage = fmt.linkage;\n        var compIconwrap = $(\"<span><span>\");\n        var icon = $(\"<div>*</div>\");\n        compIconwrap.css(\"display\", \"inline-block\");\n        compIconwrap.css(\"width\", \"10px\");\n        icon.css(\"font-size\", \"20px\");\n        icon.css(\"top\", \"5px\");\n        icon.css(\"position\", \"absolute\");\n        var format = fmt.format || {\n          \"label\": \"value\"\n        };\n        var cls = fmt.class || \"\";\n\n        if (linkage) {\n          var label = $(\"<a></a>\");\n          label.attr(\"target\", \"_blank\");\n          label.attr(\"href\", linkage);\n          label.css(\"cursor\", \"pointer\");\n        } else {\n          var label = $(\"<span></span>\"); //label.css(\"display\", \"inline-block\")\n        }\n\n        var clickFn = fmt.$attr(\"on/click\");\n        td.addClass(cls);\n        label.css(labelStyle);\n        td.css(\"padding\", \"3px\");\n\n        if (_typeof(style) == \"object\") {\n          td.css(style);\n        }\n\n        td.on(\"click\", function (event) {\n          if (clickFn) {\n            clickFn();\n          }\n        });\n        /***\n         *   韩星 2018.01.07\n         *   需求: 超出指定的长度部分显示... 鼠标滑过去显示全部\n         *   使用方法: 多加一个属性，例如：hideExtraText:\"100px\",\n         */\n\n        if (fmt.hideExtraText && fmt.hideExtraText != \"undefined\") {\n          label.css({\n            \"display\": \"inline-block\",\n            \"cursor\": \"pointer\",\n            \"overflow\": \"hidden\",\n            \"text-overflow\": \"ellipsis\",\n            \"white-space\": \"nowrap\",\n            \"position\": \"relative\",\n            \"width\": fmt.hideExtraText,\n            \"top\": \"2px\"\n          });\n          label.text(fmt[format.label]);\n          label.attr(\"title\", fmt[format.label]);\n        } else {\n          label.text(fmt[format.label]);\n        }\n\n        var rnd = parseInt(Math.random() * 10000);\n        icon.attr(\"id\", rnd);\n\n        if (composory == true) {\n          icon.css(\"color\", \"#ff6f64\");\n          icon.css(\"position\", \"relative\");\n        } else if (composory == \"none\") {\n          compIconwrap.css(\"display\", \"none\");\n        } else {\n          icon.css(\"color\", \"rgba(0,0,0,0)\");\n        }\n\n        compIconwrap.append(icon);\n        td.css(\"position\", \"relative\");\n        td.append(compIconwrap);\n        td.append(label);\n\n        if (hide) {\n          td.hide();\n        }\n\n        return td;\n      };\n\n      var createMultiSelect = function createMultiSelect(fmt, ctrlGroup) {\n        var format = fmt.format || {\n          id: \"id\",\n          label: \"label\"\n        };\n        var td = $(\"<td></td>\");\n        var style = fmt.style || {};\n        var data = fmt.options || [];\n        var cls = fmt.class || \"\";\n        td.addClass(cls);\n        td.css(\"padding\", \"3px\");\n\n        if (_typeof(style) == \"object\") {\n          td.css(style);\n        }\n\n        var getSelect = function getSelect() {\n          var arr = [];\n          var filter = td.find(\"ul.dropdown-menu li.active\");\n          filter.each(function (index, element) {\n            var target = $(element).find(\"input\");\n            var find = data.find(function (ele) {\n              return ele[format.id] == target.attr(\"value\");\n            });\n            arr.push(find);\n          });\n          return arr;\n        };\n\n        var select = $(\"<select></select>\").addClass(\"multiselect multiselect-all multiselect-search\");\n        select.css(\"display\", \"none\");\n        select.attr(\"multiple\", \"multiple\");\n        td.append(select);\n\n        var loop = function loop(item) {\n          if (format) {\n            var label = format.label;\n            var value = format.id;\n          }\n\n          var option = $(\"<option></option>\").attr(\"value\", item[value]).text(item[label]);\n          /**\n           * 返回来的若是数组，可以选中状态\n           */\n\n          var arr = fmt.value || [];\n\n          if (item[format.value] || arr.join(',').indexOf(item[value]) > -1) {\n            option.attr(\"selected\", \"selected\");\n          }\n\n          return option;\n        };\n\n        select.children().remove();\n\n        for (var i in data) {\n          select.append(loop(data[i]));\n        }\n\n        var domready = function domready() {\n          var toolReady = function toolReady(multiselect) {\n            var buttonText = function buttonText(options) {\n              if (options.length == 0) {\n                return '无做出任何选择';\n              } else if (options.length > 1) {\n                return \"已选择\" + options.length + \"个\";\n              } else {\n                var selected = '';\n                options.each(function () {\n                  selected += $(this).text() + ', ';\n                });\n                return selected.substr(0, selected.length - 2);\n              }\n            };\n\n            var onChange = function onChange(elem, checked) {\n              var changeFn = fmt.$attr(\"on/change\");\n\n              if (typeof changeFn == \"function\") {\n                try {\n                  changeFn({\n                    row: ctrlGroup,\n                    current: fmt,\n                    values: getSelect()\n                  });\n                } catch (e) {\n                  console.error(e);\n                }\n              }\n            };\n\n            select.multiselect('destroy');\n            select.multiselect({\n              enableFiltering: true,\n              buttonWidth: td.width(),\n              buttonText: buttonText,\n              onChange: onChange\n            });\n          };\n\n          $$.loadExternalJs([\"bootstrap-multiselect\"], toolReady);\n        };\n\n        setTimeout(domready);\n        return td;\n      };\n\n      var createAutoComplete = function createAutoComplete(fmt, ctrlGroup) {\n        var td = $(\"<td></td>\");\n        var cls = fmt.class || \"\";\n        td.addClass(cls);\n        var value = fmt.value;\n        var placeholder = fmt.placeholder;\n        var format = fmt.format || {\n          id: \"id\",\n          label: \"label\"\n        };\n        var style = fmt.style || {};\n        td.css(\"padding\", \"3px\");\n\n        if (_typeof(style) == \"object\") {\n          td.css(style);\n        }\n\n        var changeFn = fmt.$attr(\"on/change\");\n        var autocomplete = $(\"<input />\");\n        autocomplete.attr(\"placeholder\", placeholder);\n        autocomplete.addClass(\"form-control\");\n        td.append(autocomplete);\n        $$.loadExternalJs(['jquery-ui'], function () {\n          /**\n           var availableTags = fmt.options.map(function(elem){\n          return elem[format.label];\n          });*/\n          var availableTags = fmt.options;\n          autocomplete.autocomplete({\n            source: function source(request, response) {\n              var key = request.term.toUpperCase();\n\n              var equalPinyin = function equalPinyin(text) {\n                var find = false;\n\n                var loop = function loop(stxt) {\n                  if (stxt.indexOf(key) == 0) {\n                    find = true;\n                  }\n                };\n\n                for (var i = 0; i < text.length - 1; i++) {\n                  loop($$.chineseCharacterToPinyin(text.slice(i, -1)));\n                }\n\n                return find;\n              };\n\n              var check = function check(text) {\n                return text.indexOf(key) != -1;\n              };\n              /**\n               var filter = availableTags.filter(function(text){\n              return equalPinyin(text) || check(text);\n              });*/\n\n\n              var filter = availableTags.filter(function (elem) {\n                var text = elem[format.label] + \"\";\n                return equalPinyin(text) || check(text);\n              }).map(function (elem) {\n                return {\n                  id: elem[format.id],\n                  label: elem[format.label]\n                };\n              });\n              response(filter);\n            },\n            change: function change(event, ui) {\n              var val = $(event.currentTarget).val();\n\n              if (typeof changeFn == \"function\") {\n                changeFn({\n                  row: ctrlGroup,\n                  current: fmt,\n                  value: val\n                });\n              }\n            }\n          });\n        });\n        return td;\n      };\n\n      var createTextarea = function createTextarea(fmt, ctrlGroup) {\n        var td = $(\"<td></td>\");\n        var cls = fmt.class || \"\";\n        td.addClass(cls);\n        td.css(\"padding\", \"3px\");\n        var style = fmt.style || {};\n        td.css(\"padding\", \"3px\");\n\n        if (_typeof(style) == \"object\") {\n          td.css(style);\n        }\n\n        var input = $(\"<textarea \\>\");\n        var changeFn = fmt.$attr(\"on/change\");\n        input.addClass(\"form-control\");\n        input.val(fmt.value);\n\n        if (fmt.disabled) {\n          input.attr(\"disabled\", \"disabled\");\n        } //属性\n\n\n        if (fmt.attrs) {\n          for (var k in fmt.attrs) {\n            input.attr(k, fmt.attrs[k]);\n          }\n        }\n\n        input.on(\"change\", function (event) {\n          if (typeof changeFn == \"function\") {\n            try {\n              changeFn({\n                row: ctrlGroup,\n                current: fmt,\n                value: input.val()\n              });\n            } catch (e) {\n              console.error(e);\n            }\n          }\n        });\n        td.append(input);\n        return td;\n      };\n\n      var createToggle = function createToggle(fmt, ctrlGroup) {\n        var td = $(\"<td></td>\");\n        var cls = fmt.class || \"\";\n        td.addClass(cls);\n        td.css(\"padding\", \"3px\");\n        var style = fmt.style || {};\n        td.css(\"padding\", \"3px\");\n\n        if (_typeof(style) == \"object\") {\n          td.css(style);\n        }\n\n        var wrap = $(\"<div></div>\").addClass(\"toggle-wrap\");\n        var inner = $(\"<div></div>\").addClass(\"toggle-inner\");\n\n        if (fmt.value) {\n          wrap.addClass(\"active\");\n        }\n\n        wrap.append(inner);\n        var changeFn = fmt.$attr(\"on/change\");\n        wrap.on(\"click\", function (event) {\n          if (wrap.hasClass(\"active\")) {\n            wrap.removeClass(\"active\");\n          } else {\n            wrap.addClass(\"active\");\n          }\n\n          if (typeof changeFn == \"function\") {\n            try {\n              changeFn({\n                row: ctrlGroup,\n                current: fmt,\n                value: wrap.hasClass(\"active\")\n              });\n            } catch (e) {\n              console.error(e);\n            }\n          }\n        });\n        td.append(wrap);\n        return td;\n      };\n\n      var createInput = function createInput(fmt, ctrlGroup) {\n        var td = $(\"<td></td>\");\n        var cls = fmt.class || \"\";\n        td.addClass(cls);\n        td.css(\"padding\", \"3px\");\n        var style = fmt.style || {};\n        td.css(\"padding\", \"3px\");\n\n        if (_typeof(style) == \"object\") {\n          td.css(style);\n        }\n\n        var input = $(\"<input \\>\");\n        var changeFn = fmt.$attr(\"on/change\");\n        input.addClass(\"form-control\");\n        input.val(fmt.value);\n\n        if (fmt.disabled) {\n          input.attr(\"disabled\", \"disabled\");\n        }\n\n        if (fmt.placeholder) {\n          input.attr(\"placeholder\", fmt.placeholder);\n        } //属性\n\n\n        if (fmt.attrs) {\n          for (var k in fmt.attrs) {\n            input.attr(k, fmt.attrs[k]);\n          }\n        }\n\n        input.on(\"change\", function (event) {\n          if (typeof changeFn == \"function\") {\n            try {\n              changeFn({\n                row: ctrlGroup,\n                current: fmt,\n                value: input.val()\n              });\n            } catch (e) {\n              ;\n            }\n          }\n        });\n        td.append(input);\n        return td;\n      }; // 创建了多个下拉框\n\n\n      var createMultipleSelect = function createMultipleSelect(fmt, ctrlGroup) {\n        var format = fmt.format || {\n          id: \"id\",\n          label: \"label\"\n        };\n        var val = fmt.value;\n        var disabled = fmt.disabled || false;\n        var options = fmt.options || [];\n        var td = $(\"<td></td>\");\n        var cls = fmt.class || \"\";\n        td.addClass(cls);\n        var style = fmt.style;\n        td.css(\"padding\", \"3px\");\n\n        if (_typeof(style) == \"object\") {\n          td.css(style);\n        }\n\n        td.css(\"padding\", \"3px\");\n        var inx = 0;\n        var data = options.map(function (elem) {\n          var rs = {\n            id: elem[format.id],\n            text: elem[format.label]\n          };\n          inx++;\n          return rs;\n        });\n        $$.loadExternalJs(['select2'], function () {\n          // 默认选中\n          if (val) {\n            setTimeout(function () {\n              select2Dom.val(val).trigger(\"change\");\n            }, 1000);\n          }\n\n          var replacer = $(\"<div style='width:80%'><div>\"); //之前98%\n\n          var select2Dom = $(\"<select></select>\");\n\n          if (disabled) {\n            select2Dom = $(\"<select disabled='disabled'></select>\");\n          }\n\n          select2Dom.css({\n            \"width\": \"98%\"\n          });\n          var button = $(\"<span class=\\\"btn btn-default\\\"><span class=\\\"glyphicon glyphicon-plus\\\"></span></span>\");\n          replacer.append(select2Dom);\n          replacer.append(button); // 做一个输入框\n\n          var div = $(\"<div id='customDiv'></div>\");\n          div.css({\n            \"position\": \"relative\",\n            \"display\": \"none\"\n          });\n          var customInput = $(\"<input/ id='inputVal'>\");\n          customInput.css({\n            \"width\": \"96%\",\n            \"height\": \"27px\",\n            \"background-color\": \"#3a5066\",\n            \"padding\": \"0 10px\"\n          });\n          var ensureBtn = $(\"<button class='btn btn-default'> 确认 </button>\");\n          div.append(customInput);\n          div.append(ensureBtn);\n          replacer.append(div);\n\n          if (fmt.hide) {\n            replacer.hide();\n          }\n\n          var isFlag = false;\n\n          if (!disabled) {\n            button.click(function () {\n              isFlag = !isFlag;\n\n              if (isFlag) {\n                $(\"#customDiv\").show();\n              } else {\n                $(\"#customDiv\").hide();\n              }\n            });\n          }\n\n          ensureBtn.click(function () {\n            isFlag = !isFlag;\n            var inputVal = $(\"#inputVal\").val();\n            var obj = {\n              id: inputVal,\n              text: inputVal\n            };\n\n            if (inputVal != \"\") {\n              var newOption = new Option(obj.text, obj.id, true, true);\n              select2Dom.append(newOption).trigger(\"change\");\n            }\n\n            $(\"#inputVal\").val(\"\");\n            $(\"#customDiv\").hide();\n          });\n          var changeFn = fmt.$attr(\"on/change\");\n          var baseSelect2 = {\n            language: {\n              noResults: function noResults() {\n                return fmt.noresults || \"没有该匹配项\";\n              }\n            },\n            placeholder: fmt.placeholder || \"请选择...\",\n            data: data,\n            multiple: true\n          };\n          td.append(replacer);\n          select2Dom.select2(baseSelect2);\n          setTimeout(function () {\n            select2Dom.on(\"change\", function (event) {\n              try {\n                changeFn({\n                  row: ctrlGroup,\n                  current: fmt,\n                  value: $(this).select2(\"data\").map(function (e) {\n                    return e.text;\n                  })\n                });\n              } catch (e) {\n                console.error(e);\n              }\n            });\n          });\n        });\n        return td;\n      };\n\n      var createInputableSelect = function createInputableSelect(fmt, ctrlGroup) {\n        var format = fmt.format || {\n          id: \"id\",\n          label: \"label\"\n        };\n        var disabled = fmt.disabled || false;\n        var val = fmt.value + \"\";\n        var options = fmt.options || [];\n        var td = $(\"<td></td>\");\n        var cls = fmt.class || \"\";\n        var tdWrap = $(\"<div></div>\");\n        var btn = $(\"<button></button>\");\n        var pop = $(\"<div></div>\");\n        var input = $(\"<input />\");\n        var addBtn = $(\"<button></button>\");\n        var select2Dom = $(\"<select></select>\");\n        var data = options.map(function (elem) {\n          var rs = {\n            id: elem[format.id],\n            text: elem[format.label]\n          };\n          return rs;\n        });\n        var changeFn = fmt.$attr(\"on/change\");\n        td.addClass(cls);\n        tdWrap.attr(\"class\", \"input-group\").css(\"width\", \"calc( 100% - 35px )\");\n        btn.attr(\"class\", \"btn btn-primary\").text(\"+\");\n        addBtn.attr(\"class\", \"btn btn-primary btn-xs\").text(\"确定\");\n        pop.attr(\"class\", \"input-group\").css({\n          position: 'absolute',\n          padding: '5px',\n          'z-index': 1000,\n          'background-color': '#3a5066',\n          border: '1px solid rgb(165, 164, 164)',\n          display: 'none'\n        });\n        pop.append(input).append(addBtn);\n        var style = fmt.style;\n        td.css(\"padding\", \"3px\");\n\n        if (_typeof(style) == \"object\") {\n          td.css(style);\n        }\n\n        btn.on(\"click\", function (e) {\n          if (pop.css(\"display\") == \"block\") {\n            pop.css(\"display\", \"none\");\n          } else {\n            pop.css(\"display\", \"block\");\n          }\n        });\n        addBtn.on(\"click\", function () {\n          pop.css(\"display\", \"none\");\n          var inputValue = input.val();\n          var obj = {};\n          obj[format.id] = inputValue;\n          obj[format.value] = inputValue;\n          obj[format.label] = inputValue; //防止添加重复类型\n\n          var rs = options.find(function (v) {\n            return v.label === obj.label;\n          });\n\n          if (!rs) {\n            options.push(obj);\n          } else {\n            growl.info(\"该备件类型已存在\");\n            return;\n          }\n\n          select2Dom.select2({\n            data: options.map(function (elem) {\n              return {\n                id: elem[format.id],\n                text: elem[format.label]\n              };\n            })\n          });\n          select2Dom.val(inputValue);\n          select2Dom.trigger('change.select2');\n\n          try {\n            changeFn({\n              row: ctrlGroup,\n              current: fmt,\n              value: {\n                valueCode: inputValue,\n                label: inputValue\n              }\n            });\n          } catch (e) {\n            console.error(e);\n          }\n\n          setTimeout(function () {\n            input.val(null);\n          });\n        });\n        $$.loadExternalJs(['select2'], function () {\n          select2Dom.css(\"width\", \"100%\");\n          var baseSelect2 = {\n            language: {\n              noResults: function noResults() {\n                return fmt.noresults || \"没有该匹配项\";\n              }\n            },\n            placeholder: fmt.placeholder || \"请选择...\",\n            data: data\n          };\n          tdWrap.append(select2Dom);\n          tdWrap.append(btn);\n          tdWrap.append(pop);\n          td.append(tdWrap);\n          select2Dom.select2(baseSelect2);\n          var find = options.find(function (elem) {\n            return elem.id == val;\n          });\n          var inxStr = options.indexOf(find) + \"\";\n          select2Dom.val(val);\n          select2Dom.trigger('change.select2');\n          setTimeout(function () {\n            select2Dom.on(\"change\", function (event) {\n              var target = $(event.target);\n              var id = target.val();\n              var find = options.find(function (elem) {\n                return elem[format['id']] == id;\n              }); //input.val(find[format['label']]);\n\n              try {\n                changeFn({\n                  row: ctrlGroup,\n                  current: fmt,\n                  value: {\n                    valueCode: find[format['id']],\n                    label: find[format['label']]\n                  }\n                });\n              } catch (e) {\n                console.error(e);\n              }\n            });\n          });\n          /*setTimeout(function () {\n            var selection = td.find(\".select2\");\n            selection.css(\"visibility\");\n            var replacer = $(\"<div><div>\");\n            var input = $(\"<input/>\");\n            if (disabled) {\n              input = $(\"<input disabled='disabled' / >\");\n            }\n            var buttonWrap = $(\"<span class=\\\"input-group-btn\\\"></span>\");\n            var button = $(\"<span class=\\\"btn btn-default\\\"><span class=\\\"glyphicon glyphicon-plus\\\"></span></span>\");\n            var wrap = $(\"<div></div>\");\n            wrap.css(\"position\", \"relative\");\n            wrap.css(\"top\", \"15px\");\n            input.addClass(\"form-control\");\n            replacer.addClass(\"input-group\");\n            replacer.css(\"width\", \"100%\");\n            replacer.append(input);\n            replacer.append(buttonWrap);\n            buttonWrap.append(button);\n            wrap.append(pop);\n            input.val(val);\n            input.attr(\"placeholder\", fmt.placeholder);\n            var toggleSelect = function () {\n              if ($(\".select2-container--open\").size()) {\n                select2Dom.select2(\"close\");\n              } else {\n                select2Dom.select2(\"open\");\n              }\n            };\n            td.prepend(wrap);\n            input.on(\"change\", function (event) {\n              try {\n                changeFn({\n                  row: ctrlGroup,\n                  current: fmt,\n                  value: {\n                    valueCode: input.val(),\n                    label: input.val()\n                  }\n                });\n              } catch (e) {\n                console.error(e);\n              }\n            })\n          });*/\n        });\n        return td;\n      };\n\n      var createSelet = function createSelet(fmt, ctrlGroup) {\n        var format = fmt.format || {\n          id: \"id\",\n          label: \"label\"\n        };\n        var val = fmt.value + \"\";\n        var options = fmt.options || [];\n        var disabled = fmt.disabled || false;\n        var td = $(\"<td></td>\");\n        var cls = fmt.class || \"\";\n        td.addClass(cls);\n        var style = fmt.style;\n        td.css(\"padding\", \"3px\");\n\n        if (_typeof(style) == \"object\") {\n          td.css(style);\n        }\n\n        td.css(\"padding\", \"3px\");\n\n        var getData4Options = function getData4Options(key, value) {\n          var data = [];\n          options.forEach(function (elem) {\n            if (key == undefined || value == undefined || elem[key] == value) {\n              var rs = {\n                id: elem[format.id],\n                text: elem[format.label]\n              };\n              data.push(rs);\n            }\n          });\n          return data;\n        };\n\n        $$.loadExternalJs(['select2'], function () {\n          var select2Dom = $(\"<select></select>\");\n\n          if (disabled) {\n            select2Dom = $(\"<select disabled='disabled'></select>\");\n          }\n\n          var changeFn = fmt.$attr(\"on/change\");\n          select2Dom.css(\"width\", \"100%\");\n          var baseSelect2 = {\n            language: {\n              noResults: function noResults() {\n                return fmt.noresults || \"没有该匹配项\";\n              }\n            },\n            placeholder: fmt.placeholder || \"请选择...\",\n            data: getData4Options()\n          };\n          select2Dom.on(\"select2:select\", function (evt) {\n            if (typeof changeFn == \"function\") {\n              var id = evt.params.data.id;\n              var find = fmt.options.find(function (elem) {\n                return id == elem[format.id];\n              });\n\n              try {\n                changeFn({\n                  row: ctrlGroup,\n                  current: fmt,\n                  value: find\n                });\n              } catch (e) {\n                console.error(e);\n              }\n            }\n          });\n          td.append(select2Dom);\n          select2Dom.select2(baseSelect2);\n          var find = options.find(function (elem) {\n            return elem.id == val;\n          });\n          var inxStr = options.indexOf(find) + \"\";\n          select2Dom.val(val);\n          select2Dom.trigger('change.select2'); //如果format有parentName，那么就要监听这个parentName的变化\n\n          var parentEvent;\n\n          if (format.parentName) {\n            if (parentEvent) {\n              parentEvent();\n              parentEvent = null;\n            }\n\n            parentEvent = scope.$on(format.parentName, function (event, params) {\n              select2Dom.select2('destroy').empty();\n              baseSelect2.data = getData4Options(format.parentKey, params.value);\n              select2Dom.select2(baseSelect2);\n              select2Dom.val(\"\");\n              select2Dom.trigger('change.select2');\n            });\n          }\n        });\n        return td;\n      };\n\n      var createClipboardButton = function createClipboardButton(fmt, ctrlGroup) {\n        var cur = this;\n        var td = $(\"<td></td>\");\n        var style = fmt.style || {};\n        var btnStyle = fmt.btnStyle || {};\n        var cls = fmt.class || \"\";\n        var btnclass = fmt.btnclass || \"\";\n        var saveFn = fmt.$attr(\"on/save\");\n        var disabled = fmt.disabled;\n        td.addClass(cls);\n        td.css(\"padding\", \"3px\");\n\n        if (_typeof(style) == \"object\") {\n          td.css(style);\n        }\n\n        var button = $(\"<button></button>\");\n        var txt = $(\"<span></span>\");\n        var icon = $(\"<span></span>\");\n        var clickFn = fmt.$attr(\"on/click\");\n        button.addClass(btnclass);\n        button.attr(\"type\", \"button\");\n\n        if (fmt.icon) {\n          icon.addClass(fmt.icon);\n          button.append(icon);\n        }\n\n        if (disabled) {\n          button.prop(\"disabled\", \"disabled\");\n        }\n\n        button.css(btnStyle);\n        txt.text(fmt.value || \"\");\n        button.append(txt);\n        button.attr(\"data-clipboard-text\", fmt.clipboardText || \"\");\n        $$.loadExternalJs(['clipboard'], function (Clipboard) {\n          setTimeout(function () {\n            var clipboard = new Clipboard(button[0]);\n            clipboard.on('success', function (e) {\n              if (saveFn) {\n                saveFn(e);\n              }\n\n              e.clearSelection();\n            });\n            clipboard.on('error', function (e) {\n              ;\n              console.error('Action:', e.action);\n              console.error('Trigger:', e.trigger);\n            });\n          });\n        });\n        td.append(button);\n        return td;\n      };\n\n      var createButton = function createButton(fmt, ctrlGroup) {\n        var td = $(\"<td></td>\");\n        var style = fmt.style || {};\n        var btnStyle = fmt.btnStyle || {};\n        var cls = fmt.class || \"\";\n        var btnclass = fmt.btnclass || \"\";\n        var disabled = fmt.disabled;\n        var format = fmt.format || {\n          label: \"value\"\n        };\n        td.addClass(cls);\n        td.css(\"padding\", \"3px\");\n\n        if (_typeof(style) == \"object\") {\n          td.css(style);\n        }\n\n        var button = $(\"<button></button>\");\n        var txt = $(\"<span></span>\");\n        var icon = $(\"<span></span>\");\n        var clickFn = fmt.$attr(\"on/click\");\n        button.addClass(btnclass);\n        button.attr(\"type\", \"button\");\n\n        if (fmt.icon) {\n          icon.addClass(fmt.icon);\n          button.append(icon);\n        }\n\n        if (disabled) {\n          button.prop(\"disabled\", \"disabled\");\n        }\n\n        button.css(btnStyle);\n        txt.text(fmt[format.label] || \"\");\n        button.append(txt);\n        button.on(\"click\", function (event) {\n          if (typeof clickFn == \"function\") {\n            clickFn({\n              row: ctrlGroup,\n              current: fmt,\n              ui: event\n            });\n          }\n        });\n        td.append(button);\n        return td;\n      };\n\n      var createUploadFile = function createUploadFile(fmt, ctrlGroup) {\n        var group = $(\"<div></div>\");\n        var cfg;\n        group.addClass(\"btn-group\");\n        var file;\n        var td = $(\"<td></td>\");\n        var style = fmt.style || {};\n        var btnStyle = fmt.btnStyle || {};\n        var cls = fmt.class || \"\";\n        var disabled = fmt.disabled;\n        var previewBtn = $(\"<button></button>\");\n        var submitBtn = $(\"<button></button>\");\n        var submitFn = fmt.$attr(\"on/submit\");\n        var config = {};\n        config.group = fmt.group;\n        previewBtn.addClass(\"btn btn-default\");\n        previewBtn.text(\"预览\");\n        submitBtn.addClass(\"btn btn-primary\");\n        submitBtn.text(\"上传\");\n        td.addClass(cls);\n        td.css(\"padding\", \"3px\");\n\n        if (_typeof(style) == \"object\") {\n          td.css(style);\n        }\n\n        var button = $(\"<button></button>\");\n        var txt = $(\"<span></span>\");\n        var icon = $(\"<span></span>\");\n        var clickFn = fmt.$attr(\"on/click\");\n        var fileDom = $(\"<input />\");\n        fileDom.attr(\"type\", \"file\");\n        fileDom.css(\"display\", \"none\");\n        button.addClass(\"btn btn-default\");\n        button.attr(\"type\", \"button\");\n        group.append(button);\n\n        if (fmt.icon) {\n          icon.addClass(fmt.icon);\n          button.append(icon);\n        }\n\n        if (disabled) {\n          button.prop(\"disabled\", \"disabled\");\n        }\n\n        button.css(btnStyle);\n        txt.text(\"选择文件\");\n        button.append(txt);\n        previewBtn.off(\"click\");\n        previewBtn.on(\"click\", function (event) {\n          element.createSystemPopupByJsonName(\"imagePrev\", {\n            title: \"图片内容预览\",\n            width: \"500px\",\n            config: cfg\n          }, {\n            file: file\n          });\n        });\n        submitBtn.on(\"click\", function (event) {\n          element.uploadFile(file, config, function (event) {\n            submitBtn.remove();\n            txt.text(\"文件 : \" + file.name + \"已经成功上传！\");\n            cfg = event.data;\n\n            if (submitFn) {\n              submitFn(event[\"data\"]);\n              previewBtn.off(\"click\");\n              previewBtn.on(\"click\", function (evt) {\n                element.createSystemPopupByJsonName(\"imagePrev\", {\n                  title: \"图片内容预览\",\n                  width: \"500px\"\n                }, {\n                  url: event[\"data\"].value\n                });\n              });\n            }\n          });\n        });\n        fileDom.on(\"change\", function (event) {\n          file = fileDom[0].files[0];\n          txt.text(\"已选择文件 : \" + file.name);\n          group.append(previewBtn);\n          group.append(submitBtn);\n        });\n        button.on(\"click\", function (event) {\n          fileDom.trigger(\"click\");\n        });\n        td.append(fileDom);\n        td.append(group);\n        return td;\n      }; //加了一个可以自定义上传图片，上传图片的参数\n\n\n      var createUploadFile2 = function createUploadFile2(fmt, ctrlGroup) {\n        var group = $(\"<div class='dropdown'></div>\");\n        group.addClass(\"btn-group\");\n        var file;\n        var td = $(\"<td></td>\");\n        var autosubmit = !fmt.manual ? true : false;\n        var style = fmt.style || {};\n        var btnStyle = fmt.btnStyle || {};\n        var cls = fmt.class || \"\";\n        var disabled = fmt.disabled;\n        var text = fmt.text ? fmt.text : \"选择文件\"; //获得初始化的文件名\n\n        var submitFn = fmt.$attr(\"on/submit\");\n        var config = {};\n        config.group = fmt.group;\n        config.fileFormat = fmt.fileFormat; //自定义上传图片的格式\n\n        config.url = fmt.url; //自定义上传图片路径\n\n        config.formData = fmt.formData; //获取图片上传的参数\n\n        td.addClass(cls);\n        td.css(\"padding\", \"3px\");\n\n        if (_typeof(style) == \"object\") {\n          td.css(style);\n        }\n\n        var button = $(\"<button></button>\");\n        var dpulDom = $('<ul class=\"dropdown-menu\" role=\"menu\"></ul>');\n        var mulbtn;\n        var txt = $(\"<span></span>\");\n        var icon = $(\"<span></span>\");\n        var clickFn = fmt.$attr(\"on/click\");\n        var fileDom = $(\"<input />\");\n        fileDom.attr(\"type\", \"file\");\n        /**\n         * 韩星\n         * 控制是否为多选几个文件一起上传\n         *\n         */\n\n        if (fmt.multiple == true) {\n          group.append(dpulDom);\n\n          if (fmt.path) {\n            var textAry = fmt.text.split(\",\");\n            mulbtn = $('<button type=\"button\" class=\"btn btn-default dropdown-toggle\" data-toggle=\"dropdown\">' + textAry[0] + '<span class=\"caret\"></span></button>');\n            group.prepend(mulbtn);\n            button.css(\"display\", \"none\");\n            textAry.forEach(function (txt) {\n              var dpliDom = $('<li>' + txt + '</li>');\n              dpulDom.append(dpliDom);\n            });\n          }\n\n          fileDom.attr(\"multiple\", true);\n        }\n\n        fileDom.css(\"display\", \"none\");\n        button.addClass(\"btn btn-default\");\n        button.attr(\"type\", \"button\");\n\n        if (fmt.groupId) {\n          button.attr(\"id\", fmt.groupId);\n        }\n\n        group.append(button);\n\n        if (fmt.icon) {\n          icon.addClass(fmt.icon);\n          button.append(icon);\n        }\n\n        if (disabled) {\n          button.prop(\"disabled\", \"disabled\");\n        }\n\n        button.css(btnStyle);\n        txt.text(text);\n        button.append(txt);\n        var submitBtn; //提交按钮\n\n        if (!autosubmit) {\n          submitBtn = $(\"<button></button>\");\n          submitBtn.addClass(\"btn btn-primary\");\n          submitBtn.text(\"上传\");\n        }\n\n        var btnstatus = fmt.btnstatus; //如果有删除\n\n        var delBtn;\n\n        if (!disabled && btnstatus && btnstatus.search(\"del\") > -1) {\n          var deleteFn = fmt.$attr(\"on/del\");\n          delBtn = $(\"<button></button>\");\n          delBtn.addClass(\"btn btn-default\");\n          delBtn.text(\"清空\");\n          delBtn.off(\"click\");\n          delBtn.on(\"click\", function (event) {\n            if (submitBtn) submitBtn.remove();\n            if (mulbtn) mulbtn.remove();\n            button.css(\"display\", \"inline-block\");\n            txt.text(\"选择文件\");\n            fmt.path = \"\";\n            fmt.text = \"\";\n\n            if (deleteFn) {\n              deleteFn(event, fileDom, fmt); //需要把返回的全部callback回来\n            }\n          });\n          group.append(delBtn);\n        } //如果有下载\n\n\n        var downloadBtn;\n\n        if (fmt.path && disabled && btnstatus && btnstatus.search(\"download\") > -1) {\n          var downloadFn = fmt.$attr(\"on/download\");\n          downloadBtn = $(\"<button></button>\");\n          downloadBtn.addClass(\"btn btn-default\");\n          downloadBtn.text(\"下载\");\n          downloadBtn.off(\"click\");\n          downloadBtn.on(\"click\", function (event) {\n            if (downloadFn) {\n              downloadFn(event, fileDom, fmt); //需要把返回的全部callback回来\n            }\n          });\n          group.append(downloadBtn);\n        }\n\n        fileDom.on(\"change\", function (event) {\n          /* 老版本的处理\n           var txtStr = \"\";\n           for (var f in fileDom[0].files) {\n           if (fileDom[0].files[f] instanceof File) {\n           if (txtStr) {\n           txtStr += \"\\r\\n\" + fileDom[0].files[f].name\n           } else {\n           txtStr = fileDom[0].files[f].name\n           }\n           }\n           }\n           txt.text(txtStr);\n           txt.attr(\"title\",txtStr);\n           if(fmt.multiple==true) {\n           txt.css({\n           \"width\":\"120px\",\n           \"display\":\"block\",\n           \"cursor\":\"pointer\",\n           \"overflow\": \"hidden\",\n           \"text-overflow\":\"ellipsis\",\n           \"white-space\" : \"nowrap\"\n           })\n           }\n           */\n          var txtStr = \"\";\n          dpulDom.empty();\n\n          for (var f in fileDom[0].files) {\n            if (fileDom[0].files[f] instanceof File) {\n              if (!autosubmit) {\n                if (fmt.multiple == true) {\n                  if (!txtStr) {\n                    txtStr = fileDom[0].files[f].name;\n                    mulbtn = $('<button type=\"button\" class=\"btn btn-default dropdown-toggle\" data-toggle=\"dropdown\">' + txtStr + '<span class=\"caret\"></span></button>');\n                    group.prepend(mulbtn);\n                    button.css(\"display\", \"none\");\n                  } //            var dpliDom = $('<li>'+fileDom[0].files[f].name+'<span role=\"button\" class=\"glyphicon glyphicon-trash\"></span></li>')\n\n\n                  var dpliDom = $('<li>' + fileDom[0].files[f].name + '</li>');\n                  dpulDom.append(dpliDom);\n                } else {\n                  txtStr = fileDom[0].files[f].name;\n                  txt.text(txtStr);\n                  txt.attr(\"title\", txtStr);\n                }\n              }\n            }\n          }\n\n          if (!autosubmit) {\n            submitBtn.on(\"click\", function (event) {\n              element.uploadFile1(fileDom[0].files, config, function (event) {\n                submitBtn.remove();\n\n                if (submitFn) {\n                  if (fmt.multiple) {\n                    submitFn(event, fileDom, fmt); //需要把返回的全部callback回来\n                  } else {\n                    submitFn(event[0], fileDom, fmt); //需要把返回的全部callback回来\n                  }\n                }\n              });\n            });\n            group.append(submitBtn);\n          } else {\n            element.uploadFile1(fileDom[0].files, config, function (event) {\n              //用了新上传文件提交services\n              if (submitFn) {\n                if (fmt.multiple) {\n                  submitFn(event, fileDom, fmt); //需要把返回的全部callback回来\n                } else {\n                  submitFn(event[0], fileDom, fmt); //需要把返回的全部callback回来\n                }\n              }\n            });\n          }\n        });\n        button.on(\"click\", function (event) {\n          fileDom.trigger(\"click\");\n        });\n        td.append(fileDom);\n        td.append(group);\n        return td;\n      };\n\n      var createButtonGroup = function createButtonGroup(fmt, ctrlGroup) {\n        var td = $(\"<td></td>\");\n        var style = fmt.style || {};\n        var groupStyle = fmt.groupStyle || {};\n        td.css(style);\n        td.css(\"padding\", \"3px\");\n        var div = $(\"<div></div>\");\n        div.css(groupStyle);\n        div.addClass(\"btn-group\");\n\n        var createBtn = function createBtn(fmtBtn) {\n          var style = fmtBtn.style || {};\n          var disabled = fmtBtn.disabled;\n          var btnStyle = fmtBtn.btnStyle || {};\n          var cls = fmtBtn.class || \"btn btn-default\";\n          var btnclass = fmtBtn.btnclass || \"\";\n          var button = $(\"<button></button>\");\n          var txt = $(\"<span></span>\");\n          var icon = $(\"<span></span>\");\n          var clickFn = fmtBtn.$attr(\"on/click\");\n          button.addClass(btnclass);\n          button.attr(\"type\", \"button\");\n\n          if (fmtBtn.icon) {\n            icon.addClass(fmtBtn.icon);\n            button.append(icon);\n          }\n\n          if (disabled) {\n            button.prop(\"disabled\", \"disabled\");\n          }\n\n          button.css(btnStyle);\n          txt.text(fmtBtn.value || \"\");\n          button.append(txt);\n          td.append(button);\n          button.on(\"click\", function (event) {\n            if (typeof clickFn == \"function\") {\n              clickFn({\n                row: ctrlGroup,\n                current: fmtBtn\n              });\n            }\n          });\n          return button;\n        };\n\n        var createClipboardBtn = function createClipboardBtn(fmtBtn) {\n          var cur = this;\n          var style = fmtBtn.style || {};\n          var btnStyle = fmtBtn.btnStyle || {};\n          var cls = fmtBtn.class || \"\";\n          var btnclass = fmtBtn.btnclass || \"\";\n          var saveFn = fmtBtn.$attr(\"on/save\");\n          var disabled = fmtBtn.disabled;\n\n          if (_typeof(style) == \"object\") {\n            td.css(style);\n          }\n\n          var button = $(\"<button></button>\");\n          var txt = $(\"<span></span>\");\n          var icon = $(\"<span></span>\");\n          button.addClass(btnclass);\n          button.attr(\"type\", \"button\");\n\n          if (fmtBtn.icon) {\n            icon.addClass(fmtBtn.icon);\n            button.append(icon);\n          }\n\n          if (disabled) {\n            button.prop(\"disabled\", \"disabled\");\n          }\n\n          button.css(btnStyle);\n          txt.text(fmtBtn.value || \"\");\n          button.append(txt);\n          button.attr(\"data-clipboard-text\", fmtBtn.clipboardText || \"\");\n          $$.loadExternalJs(['clipboard'], function (Clipboard) {\n            setTimeout(function () {\n              var clipboard = new Clipboard(button[0]);\n              clipboard.on('success', function (e) {\n                if (saveFn) {\n                  saveFn(e);\n                }\n\n                e.clearSelection();\n              });\n              clipboard.on('error', function (e) {\n                ;\n                console.error('Action:', e.action);\n                console.error('Trigger:', e.trigger);\n              });\n            });\n          });\n          return button;\n        };\n\n        for (var i in fmt.content) {\n          if (fmt.content[i].type == \"button\") {\n            div.append(createBtn(fmt.content[i]));\n          } else if (fmt.content[i].type == \"clipboardButton\") {\n            div.append(createClipboardBtn(fmt.content[i]));\n          }\n        }\n\n        td.append(div);\n        return td;\n      };\n\n      var createDatePicker = function createDatePicker(fmt, ctrlGroup) {\n        var td = $(\"<td></td>\");\n        var style = fmt.style;\n        var value = fmt.value;\n        td.css(\"padding\", \"3px\");\n\n        if (_typeof(style) == \"object\") {\n          td.css(style);\n        }\n\n        var cls = fmt.class || \"\";\n        td.addClass(cls);\n        var wrap = $(\"<div></div>\");\n        var id = Math.uuid();\n        var changeFn = fmt.$attr(\"on/change\");\n        var input = $(\"<input id=datePicker\" + id + \" />\").addClass(\"form-control\").attr(\"type\", \"text\");\n        var i = $('<i class=\"glyphicon glyphicon-calendar fa fa-calendar\"></i>').css({\n          position: \"absolute\",\n          bottom: \"10px\",\n          right: \"14px\",\n          top: \"auto\",\n          cursor: \"pointer\"\n        });\n        td.append(wrap);\n        wrap.css(\"position\", \"relative\");\n        wrap.append(input).append(i);\n        setTimeout(function () {\n          $$.loadExternalJs(['laydate'], function (laydate) {\n            console.assert(input.length, \"laydate容器不存在\");\n            laydate.path = '../../toolkit/laydate/';\n            laydate.render({\n              elem: input[0],\n              //指定元素\n              theme: '#393D49',\n              value: value ? useMomentFormat(value, \"YYYY-MM-DD\") : '',\n              done: function done(value, date, endDate) {\n                if (changeFn) {\n                  changeFn({\n                    target: element,\n                    global: global,\n                    row: ctrlGroup,\n                    current: fmt,\n                    value: {\n                      getUTCDateString: value == '' ? '' : formatDatebyMomentToUTC(value),\n                      //格林尼治时间格式\n                      getDateString: value\n                    }\n                  });\n                }\n              }\n            });\n          });\n        });\n        return td;\n      };\n\n      var createDateTimePicker = function createDateTimePicker(fmt, ctrlGroup) {\n        var td = $(\"<td></td>\");\n        var style = fmt.style;\n        td.css(\"padding\", \"3px\");\n\n        if (_typeof(style) == \"object\") {\n          td.css(style);\n        }\n\n        var cls = fmt.class || \"\";\n        var value = fmt.value;\n        td.addClass(cls);\n        var wrap = $(\"<div></div>\");\n        var changeFn = fmt.$attr(\"on/change\");\n        var id = Math.uuid();\n        var input = $(\"<input id=dateTime\" + id + \" />\").addClass(\"form-control\").attr(\"type\", \"text\");\n        var dateType = fmt.dateType;\n\n        if (fmt.icon == \"none\") {\n          td.append(wrap);\n          wrap.css(\"position\", \"relative\");\n          wrap.append(input);\n        } else {\n          var i = $('<i class=\"glyphicon glyphicon-calendar fa fa-calendar\"></i>').css({\n            position: \"absolute\",\n            bottom: \"10px\",\n            right: \"14px\",\n            top: \"auto\",\n            cursor: \"pointer\"\n          });\n          td.append(wrap);\n          wrap.css(\"position\", \"relative\");\n          wrap.append(input).append(i);\n        }\n\n        setTimeout(function () {\n          $$.loadExternalJs(['laydate'], function (laydate) {\n            var tstr = \"yy-MM-dd hh:mm:ss\";\n\n            if (_typeof(value) === \"object\" && value.CLASS === \"DateHandler\") {\n              if (dateType == \"date\") value.trimmToDate();\n              value = value.getDateString(\"yy-MM-dd hh:mm:ss\");\n            }\n\n            console.assert(input.length, \"laydate容器不存在\");\n            laydate.path = '../../toolkit/laydate/';\n            laydate.render({\n              elem: input[0],\n              //指定元素'#dateRange'\n              theme: '#393D49',\n              type: dateType ? dateType : 'datetime',\n              btns: ['clear', 'confirm'],\n              value: value ? useMomentFormat(value, \"YYYY-MM-DD HH:mm:ss\") : '',\n              done: function done(value, date, endDate) {\n                if (changeFn) {\n                  changeFn({\n                    target: element,\n                    global: global,\n                    row: ctrlGroup,\n                    current: fmt,\n                    value: {\n                      getUTCDateString: value == '' ? '' : formatDatebyMomentToUTC(value),\n                      //格林尼治时间格式    element.getDateHandler(value).getUTCDateString()\n                      getDateString: value\n                    }\n                  });\n                }\n              }\n            });\n          });\n        });\n        return td;\n      };\n\n      var createDateRangePicker = function createDateRangePicker(fmt, ctrlGroup) {\n        var td = $(\"<td></td>\");\n        var style = fmt.style;\n        td.css(\"padding\", \"3px\");\n\n        if (_typeof(style) == \"object\") {\n          td.css(style);\n        }\n\n        var cls = fmt.class || \"\";\n        td.addClass(cls);\n        var wrap = $(\"<div></div>\");\n        var changeFn = fmt.$attr(\"on/change\");\n        var id = Math.uuid();\n        var input = $(\"<input id=dateRange\" + id + \" />\").addClass(\"form-control\").attr(\"type\", \"text\");\n\n        if (fmt.icon == \"none\") {\n          td.append(wrap);\n          wrap.css(\"position\", \"relative\");\n          wrap.css(\"padding\", \"3px\");\n          wrap.append(input);\n        } else {\n          var i = $('<i class=\"glyphicon glyphicon-calendar fa fa-calendar\"></i>').css({\n            position: \"absolute\",\n            bottom: \"10px\",\n            right: \"14px\",\n            top: \"auto\",\n            cursor: \"pointer\"\n          });\n          td.append(wrap);\n          wrap.css(\"position\", \"relative\");\n          wrap.css(\"padding\", \"3px\");\n          wrap.append(input).append(i);\n        }\n\n        var btns = ['clear', 'confirm'];\n\n        if (fmt.btns) {\n          btns = fmt.btns;\n        }\n\n        setTimeout(function () {\n          $$.loadExternalJs(['laydate'], function (laydate) {\n            laydate.path = '../../toolkit/laydate/';\n            laydate.render({\n              elem: input[0],\n              //指定元素\n              theme: '#393D49',\n              range: true,\n              btns: btns,\n              value: fmt.value == '' || fmt.value == undefined ? '' : element.getDateHandler(fmt.value[0]).getDateString(\"yy-MM-dd\") + \" - \" + element.getDateHandler(fmt.value[1]).getDateString(\"yy-MM-dd\"),\n              done: function done(value, date, endDate) {\n                var dateArray = value.split(\" - \");\n\n                if (changeFn) {\n                  changeFn({\n                    target: element,\n                    global: global,\n                    row: ctrlGroup,\n                    current: fmt,\n                    value: {\n                      start: dateArray[0] == '' ? null : formatDatebyMomentToUTC(dateArray[0]),\n                      //格林尼治时间格式\n                      end: dateArray[0] == '' ? null : formatDatebyMomentToUTC(dateArray[1]),\n                      //格林尼治时间格式\n                      // end: element.getDateHandler(dateArray[1]).getUTCDateString(),  //格林尼治时间格式\n                      startDateString: dateArray[0],\n                      endDateString: dateArray[1]\n                    }\n                  });\n                }\n              }\n            });\n          });\n        });\n        return td;\n      };\n\n      var createJQury = function createJQury(fmt, ctrlGroup) {\n        var td = $(\"<td></td>\");\n        var style = fmt.style;\n        td.css(\"padding\", \"3px\");\n\n        if (_typeof(style) == \"object\") {\n          td.css(style);\n        }\n\n        var renderFn = fmt.render;\n\n        if (typeof renderFn == \"function\") {\n          td.append(renderFn($));\n        }\n\n        return td;\n      };\n\n      var createDropDownTree = function createDropDownTree(fmt, ctrlGroup) {\n        var td = $(\"<td></td>\");\n        var changeFn = fmt.$attr(\"on/change\");\n        td.css(\"padding\", \"3px\");\n        var style = fmt.style;\n        td.css(\"padding\", \"3px\");\n\n        if (_typeof(style) == \"object\") {\n          td.css(style);\n        }\n\n        var cls = fmt.class || \"\";\n        td.addClass(cls);\n        var dropDownTree = $(\"<div></div>\");\n        $$.loadExternalJs(['dropdowntree'], function () {\n          dropDownTree.dropdowntree({\n            value: fmt.value,\n            options: fmt.options,\n            format: fmt.format,\n            change: function change(event) {\n              if (typeof changeFn == \"function\") {\n                changeFn({\n                  row: ctrlGroup,\n                  current: fmt,\n                  value: event.data\n                });\n              }\n            }\n          });\n        });\n        td.append(dropDownTree);\n        return td;\n      };\n\n      var createSvg = function createSvg(fmt) {\n        var td = $(\"<td></td>\");\n        var style = fmt.style || {};\n        var cls = fmt.class || \"\";\n        var svgAttr = fmt.svgAttr || {};\n        var svgStyle = fmt.svgStyle || {};\n        var renderFn = fmt.render;\n        td.addClass(cls);\n        td.css(\"padding\", \"3px\");\n        $$.loadExternalJs(['d3'], function (d3) {\n          var wrap = d3.select(td[0]);\n          var svg = wrap.append(\"svg\");\n\n          for (var i in svgAttr) {\n            svg.attr(i, svgAttr[i]);\n          }\n\n          for (var i in svgStyle) {\n            svg.style(i, svgStyle[i]);\n          }\n\n          renderFn(svg);\n        });\n        return td;\n      };\n\n      var createCustomHtml = function createCustomHtml(fmt) {\n        var td = $(\"<td></td>\");\n        var div = $(\"<div></div>\");\n        var style = fmt.style || {};\n        var cls = fmt.class || \"\";\n        var val = fmt.value || {}; // 如果传进来是个数组需要展示多个\n\n        if (val instanceof Array) {\n          val.forEach(function (ele) {\n            var value = ele.qualifiedName ? ele.qualifiedName : ele.value;\n            var a = $('<a target=\"_blank\" href=\"' + value + '\">' + ele.label + '</a><br />');\n            div.append(a);\n          });\n        } else {\n          div.append(val);\n        }\n\n        td.addClass(cls); // td.css(\"padding\", \"3px\");\n\n        td.css(style); // 添加点击事件\n\n        var clickFn = fmt.$attr(\"on/click\");\n        div.on(\"click\", function (event) {\n          if (typeof clickFn == \"function\") {\n            clickFn({\n              current: fmt,\n              ui: event,\n              params: {\n                textContent: $(fmt.value)[0].textContent\n              }\n            });\n          }\n        });\n        td.append(div);\n        return td;\n      };\n\n      var createClock = function createClock(fmt, item) {\n        var td = $(\"<td></td>\");\n        var style = fmt.style || {};\n        var cls = fmt.class || \"\";\n        var label = $(\"<div></div>\");\n        td.addClass(cls);\n        td.css(\"padding\", \"3px\");\n\n        if (_typeof(style) == \"object\") {\n          label.css(style);\n        }\n\n        var valueFn = fmt.value || function (elem) {\n          return elem;\n        };\n\n        $$.loadExternalJs(['clock'], function (clock) {\n          var myClock = clock.init();\n          myClock.on(\"init\", function (value, id) {\n            ;\n            label.text(valueFn(value));\n          });\n          myClock.on(\"change\", function (value, id) {\n            ;\n            label.text(valueFn(value));\n          });\n          myClock.start();\n        });\n        td.append(label);\n        return td;\n      };\n\n      var createRadio = function createRadio(fmt, ctrlGroup) {\n        var td = $(\"<td></td>\");\n        var val = fmt.value;\n        var changeFn = fmt.$attr(\"on/change\");\n        td.css(\"padding\", \"3px\");\n        var style = fmt.style;\n        td.css(\"padding\", \"3px\");\n\n        if (_typeof(style) == \"object\") {\n          td.css(style);\n        }\n\n        var cls = fmt.class || \"\";\n        td.addClass(cls);\n        var radioDom = $(\"<div></div>\").addClass(\"btn-group btn-group-justified\");\n        radioDom.css(\"width\", \"100%\");\n\n        var createBtn = function createBtn(item) {\n          var btn = $(\"<div></div>\").addClass(\"btn\");\n\n          if (item.id == val) {\n            btn.addClass(\"btn-primary\");\n          } else {\n            btn.addClass(\"btn-default\");\n          }\n\n          btn.on(\"click\", function (event) {\n            var btns = radioDom.find(\".btn-primary\");\n            btns.removeClass(\"btn-primary\");\n            btns.addClass(\"btn-default\");\n            btn.removeClass(\"btn-default\");\n            btn.addClass(\"btn-primary\");\n\n            if (changeFn) {\n              try {\n                changeFn({\n                  row: ctrlGroup,\n                  current: fmt,\n                  value: item.value\n                });\n              } catch (e) {\n                console.error(e);\n              }\n            }\n          });\n          btn.text(item.label);\n          return btn;\n        };\n\n        for (var i in fmt.options) {\n          radioDom.append(createBtn(fmt.options[i]));\n        }\n\n        td.append(radioDom);\n        return td;\n      };\n\n      var createCheckBoxList = function createCheckBoxList(fmt, ctrlGroup) {\n        var td = $(\"<td></td>\");\n        var multiselect = fmt.multiselect == undefined ? true : fmt.multiselect;\n        td.css(\"padding\", \"3px\");\n        var style = fmt.style;\n\n        if (_typeof(style) == \"object\") {\n          td.css(style);\n        }\n\n        var format = fmt.format || {\n          id: \"id\",\n          label: \"label\"\n        };\n        var cls = fmt.class || \"\";\n        var options = fmt.options;\n        var column = fmt.column || 1;\n        var value = fmt.value;\n        var changeFn = fmt.$attr(\"on/change\");\n\n        var createCheckboxList = function createCheckboxList(item) {\n          var div = $(\"<div></div>\");\n          div.css(\"width\", parseInt(100 / column) + \"%\");\n          div.addClass(\"checkboxlist\");\n          var trick = $(\"<span></span>\");\n          var checkbox = $(\"<div></div>\");\n          trick.addClass(\"glyphicon glyphicon-ok\");\n          checkbox.addClass(\"checkbox\");\n          checkbox.append(trick);\n\n          if (value.some(function (id) {\n            return id == item[format.id];\n          })) {\n            div.addClass(\"checked\");\n          }\n\n          if (item.hasOwnProperty(\"dom\")) {\n            Object.defineProperty(item, \"dom\", {\n              enumerable: false,\n              value: div\n            });\n          } else {\n            item.dom = div;\n          }\n\n          var label = $(\"<span></span>\"); // 文字过长省略\n\n          if (fmt.hideExtraText && fmt.hideExtraText != \"undefined\") {\n            label.css({\n              \"display\": \"inline-block\",\n              \"cursor\": \"pointer\",\n              \"overflow\": \"hidden\",\n              \"text-overflow\": \"ellipsis\",\n              \"white-space\": \"nowrap\",\n              \"vertical-align\": \"middle\",\n              \"width\": fmt.hideExtraText\n            });\n            label.text(item[format.label]);\n            label.attr(\"title\", item[format.label]);\n          } else {\n            label.text(item[format.label]);\n          }\n\n          div.append(checkbox);\n          div.append(label);\n          div.on(\"click\", function (event) {\n            //div.css(\"display\", \"none\");\n            if (multiselect) {\n              if (div.hasClass(\"checked\")) {\n                div.removeClass(\"checked\");\n              } else {\n                div.addClass(\"checked\");\n              }\n            } else {\n              for (var i in options) {\n                options[i].dom.removeClass(\"checked\");\n              }\n\n              div.addClass(\"checked\");\n            }\n\n            changeFn({\n              row: ctrlGroup,\n              current: fmt,\n              value: options.filter(function (elem) {\n                return elem.dom.hasClass(\"checked\");\n              })\n            });\n          });\n          return div;\n        };\n\n        for (var i in options) {\n          td.append(createCheckboxList(options[i]));\n        }\n\n        td.addClass(cls);\n        return td;\n      };\n\n      var createProgress = function createProgress(fmt, ctrlGroup) {\n        var td = $(\"<td></td>\");\n        td.css(\"padding\", \"3px\");\n        var style = fmt.style;\n\n        if (_typeof(style) == \"object\") {\n          td.css(style);\n        }\n\n        var table = $(\"<div style='display:table;'><tr></tr></div>\");\n        var tr = table.find(\"tr\");\n        var td1 = $(\"<td></td>\");\n        var td2 = $(\"<td></td>\");\n        tr.append(td1);\n        tr.append(td2);\n        var cls = fmt.class || \"\";\n        var shownumber = fmt.shownumber;\n        td.addClass(cls);\n        td1.css(\"vertical-align\", \"middle\");\n        td1.css(\"text-align\", \"right\");\n        td2.css(\"vertical-align\", \"middle\");\n        var pwrap = $('<div></div>').addClass(\"progress sm\");\n        var data = fmt.value;\n        var progress = $('<div></div>').addClass(\"progress-bar\").css(\"width\", (data || 0) + \"%\");\n\n        if (shownumber) {\n          table.append(td1);\n          td1.append($(\"<span style=\\\"width:35px;display:inline-block;padding-right:2px;\\\">\" + data + \"%</span>\"));\n        }\n\n        pwrap.css(\"margin\", \"auto\");\n        pwrap.append(progress);\n        td2.append(pwrap);\n        td2.css(\"width\", \"100%\");\n        table.append(td2);\n        td.append(table);\n        /** baogang only */\n\n        var popover = $(\"<div></div>\");\n        popover.text(\"100\");\n        popover.css(\"padding\", \"5px 10px\");\n        popover.css(\"background-color\", \"#000\");\n        popover.css(\"color\", \"#fff\");\n        popover.css(\"position\", \"fixed\");\n        popover.css(\"z-index\", 1100);\n        popover.css(\"pointer-events\", \"none\");\n\n        function mouseenter(event) {\n          popover.css(\"top\", event.clientY - popover.height());\n          popover.css(\"left\", event.clientX - popover.width());\n          $(\"body\").append(popover);\n          progress.on(\"mousemove\", mousemove);\n        }\n\n        function mousemove(event) {\n          ;\n          popover.css(\"top\", event.clientY - popover.height());\n          popover.css(\"left\", event.clientX - popover.width());\n        }\n\n        function mouseleave(event) {\n          progress.off(\"mousemove\");\n          popover.remove();\n        }\n\n        progress.on(\"mouseenter\", mouseenter);\n        progress.on(\"mouseleave\", mouseleave);\n        /** baogang only */\n\n        switch (true) {\n          case data == 100:\n            progress.addClass(\"progress-bar-aqua\");\n            break;\n\n          case data > 90:\n            progress.addClass(\"progress-bar-green\");\n            break;\n\n          case data > 80:\n            progress.addClass(\"progress-bar-yellow\");\n            break;\n\n          case data > 70:\n            progress.addClass(\"progress-bar-yellow\");\n            break;\n\n          case data > 60:\n            progress.addClass(\"progress-bar-red\");\n            break;\n\n          default:\n            progress.addClass(\"progress-bar-danger\");\n            break;\n        }\n\n        return td;\n      };\n\n      var render = function render(ctrlGroups) {\n        defer.resolve(\"underwatch\");\n        ctrlgroup.children().remove();\n\n        var loopCtrlGroups = function loopCtrlGroups(ctrlGroup) {\n          var inputGroup = $(\"<tr></tr>\");\n\n          if (bootstrap) {\n            inputGroup.css(\"display\", \"block\");\n            inputGroup.addClass(\"row\");\n          } //inputGroup.css(\"padding\", \"5px\");\n\n\n          var loopformat = function loopformat(fmt) {\n            var dom;\n\n            ctrlGroup.refresh = function () {\n              ;\n            };\n\n            if (fmt.type == \"label\") {\n              dom = createLabel(fmt, ctrlGroup);\n            } else if (fmt.type == \"icon\") {\n              dom = createIcon(fmt, ctrlGroup);\n            } else if (fmt.type == \"toggle\") {\n              dom = createToggle(fmt, ctrlGroup);\n            } else if (fmt.type == \"autoComplete\") {\n              dom = createAutoComplete(fmt);\n            } else if (fmt.type == \"input\") {\n              dom = createInput(fmt, ctrlGroup);\n            } else if (fmt.type == \"textarea\") {\n              dom = createTextarea(fmt, ctrlGroup);\n            } else if (fmt.type == \"select\") {\n              dom = createSelet(fmt, ctrlGroup);\n            } else if (fmt.type == \"inputableSelect\") {\n              dom = createInputableSelect(fmt, ctrlGroup);\n            } else if (fmt.type == \"multipleSelect\") {\n              dom = createMultipleSelect(fmt, ctrlGroup);\n            } else if (fmt.type == \"button\") {\n              dom = createButton(fmt, ctrlGroup);\n            } else if (fmt.type == \"uploadFile\") {\n              dom = createUploadFile(fmt, ctrlGroup);\n            } else if (fmt.type == \"uploadFile2\") {\n              //宝钢报告编制特殊处理\n              dom = createUploadFile2(fmt, ctrlGroup);\n            } else if (fmt.type == \"dropdowntree\") {\n              dom = createDropDownTree(fmt, ctrlGroup);\n            } else if (fmt.type == \"dateRangePicker\") {\n              dom = createDateRangePicker(fmt, ctrlGroup);\n            } else if (fmt.type == \"datePicker\") {\n              dom = createDatePicker(fmt, ctrlGroup);\n            } else if (fmt.type == \"dateTimePicker\") {\n              dom = createDateTimePicker(fmt, ctrlGroup);\n            } else if (fmt.type == \"multiSelect\") {\n              dom = createMultiSelect(fmt, ctrlGroup);\n            } else if (fmt.type == \"radio\") {\n              dom = createRadio(fmt, ctrlGroup);\n            } else if (fmt.type == \"buttonGroup\") {\n              dom = createButtonGroup(fmt, ctrlGroup);\n            } else if (fmt.type == \"jquery\") {\n              dom = createJQury(fmt, ctrlGroup);\n            } else if (fmt.type == \"clipboardButton\") {\n              dom = createClipboardButton(fmt, ctrlGroup);\n            } else if (fmt.type == \"clock\") {\n              dom = createClock(fmt, ctrlGroup);\n            } else if (fmt.type == \"svg\") {\n              dom = createSvg(fmt, ctrlGroup);\n            } else if (fmt.type == \"customHtml\") {\n              //加了一个自定义html功能，便于其它功能的扩展\n              dom = createCustomHtml(fmt, ctrlGroup);\n            } else if (fmt.type == \"progressbar\") {\n              dom = createProgress(fmt, ctrlGroup);\n            } else if (fmt.type == \"checkboxlist\") {\n              dom = createCheckBoxList(fmt, ctrlGroup);\n            }\n\n            if (bootstrap) {\n              inputGroup.css(\"display\", \"block\");\n            }\n\n            if (fmt.colSpan) {\n              dom.attr(\"colSpan\", fmt.colSpan);\n            }\n\n            if (fmt.rowSpan) {\n              dom.attr(\"rowSpan\", fmt.rowSpan);\n            }\n\n            if (fmt.tdStyle) {\n              dom.css(fmt.tdStyle);\n            }\n\n            element.setSelfDom(dom);\n            return dom;\n          };\n\n          for (var i in ctrlGroup) {\n            inputGroup.append(loopformat(ctrlGroup[i]));\n          }\n\n          return inputGroup;\n        };\n\n        for (var i in ctrlGroups) {\n          ctrlgroup.append(loopCtrlGroups(ctrlGroups[i]));\n        }\n\n        return ctrlgroup;\n      };\n\n      element.render = render;\n\n      element.parentShow = function () {\n        ctrlgroup.parent().parent().css(\"display\", \"block\");\n      };\n\n      element.parentHide = function () {\n        ctrlgroup.parent().parent().css(\"display\", \"none\");\n      };\n\n      element.show = function () {\n        ctrlgroup.css(\"display\", \"block\");\n      };\n\n      element.hide = function () {\n        ctrlgroup.css(\"display\", \"none\");\n      };\n\n      var initFn = expression.$attr(\"on/init\");\n\n      if (typeof initFn == \"function\") {\n        if (rootScope.cacheAllData) {\n          clear = rootScope.cacheAllData.on(\"domainTreeQuery\", function () {\n            try {\n              initFn({\n                target: element,\n                global: global,\n                scope: scope\n              });\n            } catch (e) {\n              console.error(e);\n            }\n          });\n        } else {\n          try {\n            initFn({\n              target: element,\n              global: global,\n              scope: scope\n            });\n          } catch (e) {\n            console.error(e);\n          }\n        }\n      } else {\n        defer.resolve(\"underwatch\");\n      }\n\n      ctrlgroup.underWatch = true;\n    }\n\n    scope && scope.$on(\"$destroy\", function () {\n      clear && clear();\n    });\n    return wrap;\n  };\n});"],"sourceRoot":"/source/"}