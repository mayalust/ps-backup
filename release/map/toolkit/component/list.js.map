{"version":3,"sources":["toolkit/component/list.js"],"names":["define","data","expression","element","innerContent","$","$$","runExpression","$attr","funRes","code","Error","message","fnResult","global","header","tbody","customevents","ready","dom","events","addEvent","event","handler","on","evt","jquery","tools","ui","i","addEvents","append","render","children","remove","tr","label","index","item","content","value","createContent","target"],"mappings":"AAGAA,OAAO,GAAI,WACT,OAAO,SAAUC,GACf,IAEIC,EAFAC,EAAUF,EAAKE,QACfC,EAAeC,EAAE,4DAErBC,GAAGC,cAAcJ,EAAQK,MAAM,sBAAuB,SAAUC,GAC9D,GAAmB,KAAfA,EAAOC,KAKT,MAAM,IAAIC,MAAMF,EAAOG,SAJvB,IAAIC,EAAWJ,EAAOR,KAEtBC,GADAA,EAAaW,IAC0B,KAK3C,IAAIC,EAASb,EAAKa,OACdC,EAASV,EAAE,mBACXW,EAAQX,EAAE,mBACVY,EAAe,CACjBC,MAAO,UAGO,SAAmBC,EAAKC,GACtC,IAAIC,EAAW,SAAkBC,EAAOC,GAClCN,EAAaK,GACfL,EAAaK,GAASC,EAEtBJ,EAAIK,GAAGF,EAAO,SAAUG,GACtBF,EAAQ,CACNG,OAAQD,EACRX,OAAQA,EACRa,MAAO1B,EACP2B,GAAIzB,OAMZ,IAAK,IAAI0B,KAAKT,EACZC,EAASQ,EAAGT,EAAOS,IAMvBC,CAAU1B,EAAcF,EAAWM,MAAM,OACzCJ,EAAa2B,OAAOhB,GAAQgB,OAAOf,GAwCnC,OAXAb,EAAQ6B,OA3BK,SAAgB/B,GAC3Bc,EAAOkB,WAAWC,SAClBlB,EAAMiB,WAAWC,SACjB,IAAIC,EAAK9B,EAAE,aAGX,IAAK,IAAIwB,KAFTd,EAAOgB,OAAOI,GAEAlC,EAAK,GACjBkC,EAAGJ,OAAO1B,EAAE,OAASJ,EAAK,GAAG4B,GAAGO,MAAQ,UAG1C,IAAKP,KAAK5B,EAWRe,EAAMe,OAVc,SAAuBM,EAAOC,GAChD,IAAIC,EAAUlC,EAAE,aAEhB,IAAK,IAAIwB,KAAKS,EACZC,EAAQR,OAAO1B,EAAE,OAASiC,EAAKT,GAAGW,MAAQ,UAG5C,OAAOD,EAGIE,CAAcZ,EAAG5B,EAAK4B,MAQN,mBAAtBZ,EAAaC,OACtBD,EAAaC,MAAM,CACjBwB,OAAQvC,EACRW,OAAQA,EACRa,MAAO1B,EACP2B,GAAIzB,IAIDC","file":"toolkit/component/list.js","sourcesContent":["/**\n * Created by leonlin on 16/11/3.\n */\ndefine([], function () {\n  return function (data) {\n    var element = data.element;\n    var innerContent = $(\"<table width='100%' class='table table-hover no-margin'>\");\n    var expression;\n    $$.runExpression(element.$attr(\"advance/expression\"), function (funRes) {\n      if (funRes.code == \"0\") {\n        var fnResult = funRes.data;\n        expression = fnResult;\n        expression = expression ? expression : {};\n      } else {\n        throw new Error(funRes.message);\n      }\n    });\n    var global = data.global;\n    var header = $(\"<thead></thead>\");\n    var tbody = $(\"<tbody></tbody>\");\n    var customevents = {\n      ready: \"ready\"\n    };\n\n    var addEvents = function addEvents(dom, events) {\n      var addEvent = function addEvent(event, handler) {\n        if (customevents[event]) {\n          customevents[event] = handler;\n        } else {\n          dom.on(event, function (evt) {\n            handler({\n              jquery: evt,\n              global: global,\n              tools: data,\n              ui: element\n            });\n          });\n        }\n      };\n\n      for (var i in events) {\n        addEvent(i, events[i]);\n      }\n\n      ;\n    };\n\n    addEvents(innerContent, expression.$attr(\"on\"));\n    innerContent.append(header).append(tbody);\n\n    var render = function render(data) {\n      header.children().remove();\n      tbody.children().remove();\n      var tr = $(\"<tr></tr>\");\n      header.append(tr);\n\n      for (var i in data[0]) {\n        tr.append($(\"<th>\" + data[0][i].label + \"</th>\"));\n      }\n\n      for (i in data) {\n        var createContent = function createContent(index, item) {\n          var content = $('<tr></tr>');\n\n          for (var i in item) {\n            content.append($('<td>' + item[i].value + '</td>'));\n          }\n\n          return content;\n        };\n\n        tbody.append(createContent(i, data[i]));\n      }\n\n      ;\n    };\n\n    element.render = render;\n\n    if (typeof customevents.ready == \"function\") {\n      customevents.ready({\n        target: element,\n        global: global,\n        tools: data,\n        ui: element\n      });\n    }\n\n    return innerContent;\n  };\n});\n/**\n * (function(){\n  return {\n    click : function(event){\n      var target = event.global.variable(\"productlist\");\n      var value = event.value.value;\n      var number = Math.round(value / 20);\n      if(number > 10) {\n        number = 10;\n      } else if(number < 1) {\n        number = 1;\n      }\n      var result = [];\n      for(var j = 0; j < number; j++) {\n        var name = ''\n        if(j % 4 == 0) {\n          name = 'FH (' + event.value.name + \")\";\n        } else if(j % 4 == 1) {\n          name = 'T系列(' + event.value.name + \")\";\n        } else if(j % 4 == 2) {\n          name = 'EH系列(' + event.value.name + \")\";\n        } else if(j % 4 == 3) {\n          name = 'SPZ-FK系列(' + event.value.name + \")\";\n        }\n        result.push({\n          category : {\n            label : '产品分类',\n            value : name\n          },\n          product : {\n            label : '产品份额',\n            value : value + Math.round(Math.random() * 100),\n          },\n          malfunction : {\n            label : '平均故障',\n            value : Math.round(Math.random() * 100)\n          }\n        });\n      }\n      target.render(result);\n    }\n  }\n})\n*/"],"sourceRoot":"/source/"}