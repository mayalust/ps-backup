{"version":3,"sources":["toolkit/component/autocomplete.js"],"names":["define","$","fn","autocomplete","obj","slist","options","format","id","label","searchArea","addClass","css","icon","button","searchlist","append","this","on","event","key","val","children","remove","createItem","elem","div","text","stopPropagation","check","item","pinyin","$$","chineseCharacterToPinyin","indexOf","toUpperCase","i"],"mappings":"AAGAA,OAAO,GAAI,WAmET,OAlEAC,EAAEC,GAAGC,aAAe,SAAUC,GAC5B,IAAIC,EAAQD,EAAIE,SAAW,GACvBC,EAASH,EAAIG,QAAU,CACzBC,GAAM,KACNC,MAAS,SAGPC,EAAaT,EAAE,aAAaU,SAAS,gBAAgBC,IAAI,UAAW,gBAAgBA,IAAI,SAAU,QAClGC,EAAOZ,EAAE,iBAAiBU,SAAS,8BACnCG,EAASb,EAAE,qBAAqBU,SAAS,mBACzCI,EAAad,EAAE,eACnBc,EAAWH,IAAI,WAAY,YAC3BG,EAAWH,IAAI,QAAS,QACxBG,EAAWH,IAAI,UAAW,KAC1BG,EAAWH,IAAI,aAAc,SAC7BG,EAAWH,IAAI,aAAc,UAC7BG,EAAWH,IAAI,aAAc,QAC7BG,EAAWH,IAAI,aAAc,+BAC7BE,EAAOE,OAAOH,GACdI,KAAKL,IAAI,WAAY,YACrBK,KAAKD,OAAON,GACZO,KAAKD,OAAOD,GACZL,EAAWQ,GAAG,QAAS,SAAUC,GAC/B,IAAIC,EAAMV,EAAWW,MACrBN,EAAWO,WAAWC,SAEtB,IAAIC,EAAa,SAAoBC,GACnC,IAAIC,EAAMzB,EAAE,eAAe0B,KAAKF,EAAKhB,OAUrC,OATAiB,EAAId,IAAI,UAAW,QACnBc,EAAId,IAAI,SAAU,WAClBc,EAAId,IAAI,mBAAoB,uBAC5Bc,EAAId,IAAI,gBAAiB,kBACzBc,EAAIR,GAAG,QAAS,SAAUC,GACxBA,EAAMS,kBACNlB,EAAWW,IAAII,EAAKhB,OACpBM,EAAWO,WAAWC,WAEjBG,GAGLG,EAAQ,SAAeC,GACzB,GAAW,IAAPV,EACF,OAAO,EAEP,IAAIW,EAASC,GAAGC,yBAAyBH,GAEzC,OAA0B,GAAtBA,EAAKI,QAAQd,KAEgC,GAAtCW,EAAOG,QAAQd,EAAIe,gBAQlC,IAAK,IAAIC,KAAK/B,EACRwB,EAAMxB,EAAM+B,GAAG7B,EAAOE,SACxBM,EAAWC,OAAOQ,EAAWnB,EAAM+B,QAQpC","file":"toolkit/component/autocomplete.js","sourcesContent":["/**\n * Created by leonlin on 16/11/3.\n */\ndefine([], function () {\n  $.fn.autocomplete = function (obj) {\n    var slist = obj.options || [];\n    var format = obj.format || {\n      \"id\": \"id\",\n      \"label\": \"label\" //;\n\n    };\n    var searchArea = $(\"<input />\").addClass(\"form-control\").css(\"display\", \"inline-block\").css(\"height\", \"35px\");\n    var icon = $(\"<span></span>\").addClass(\"glyphicon glyphicon-search\");\n    var button = $(\"<button></button>\").addClass(\"btn btn-primary\");\n    var searchlist = $(\"<div></div>\");\n    searchlist.css(\"position\", \"absolute\");\n    searchlist.css(\"width\", \"100%\");\n    searchlist.css(\"z-index\", 999);\n    searchlist.css(\"max-height\", \"200px\");\n    searchlist.css(\"overflow-x\", \"hidden\");\n    searchlist.css(\"overflow-y\", \"auto\");\n    searchlist.css(\"box-shadow\", \"1px 1px 10px rgba(0,0,0,.3)\");\n    button.append(icon);\n    this.css(\"position\", \"relative\");\n    this.append(searchArea);\n    this.append(searchlist);\n    searchArea.on(\"keyup\", function (event) {\n      var key = searchArea.val();\n      searchlist.children().remove();\n\n      var createItem = function createItem(elem) {\n        var div = $(\"<div></div>\").text(elem.label);\n        div.css(\"padding\", \"10px\");\n        div.css(\"cursor\", \"pointer\");\n        div.css(\"background-color\", \"rgba(250,250,250,1)\");\n        div.css(\"border-bottom\", \"1px solid #eee\");\n        div.on(\"click\", function (event) {\n          event.stopPropagation();\n          searchArea.val(elem.label);\n          searchlist.children().remove();\n        });\n        return div;\n      };\n\n      var check = function check(item) {\n        if (key == \"\") {\n          return true;\n        } else {\n          var pinyin = $$.chineseCharacterToPinyin(item);\n\n          if (item.indexOf(key) != -1) {\n            return true;\n          } else if (pinyin.indexOf(key.toUpperCase()) != -1) {\n            return true;\n          } else {\n            return false;\n          }\n        }\n      };\n\n      for (var i in slist) {\n        if (check(slist[i][format.label])) {\n          searchlist.append(createItem(slist[i]));\n        }\n      }\n\n      ;\n    });\n  };\n\n  return null;\n});"],"sourceRoot":"/source/"}