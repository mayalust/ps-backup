{"version":3,"sources":["toolkit/component/explainer/ci_kpixAxis.js"],"names":["define","data","tools","callback","nodesDes","kpisDes","group","ci","kpi","rs","loop","obj","name","label","find","elem","kpiCode","id","nodeId","value","i","push","regroup","getSeries","formatter","gr","getLegend","map","getxAxis","nodes","kpis","legend","series"],"mappings":"AAGAA,OAAO,GAAI,WACT,OAAO,SAAUC,EAAMC,EAAOC,GAE5B,IAAIC,EAAWF,EAAME,SACjBC,EAAUH,EAAMG,QAiChBC,EA/BU,SAAiBC,EAAIC,GACjC,IAAIC,EAAK,GAELC,EAAO,SAAcH,GACvB,IAAII,EAAM,CACRC,KAAML,EAAGM,MACTZ,KAAM,IAGJS,EAAO,SAAcF,GACvB,IAAIM,EAAOb,EAAKa,KAAK,SAAUC,GAC7B,OAAOA,EAAKC,SAAWR,EAAIS,IAAMF,EAAKG,QAAUX,EAAGU,KAErD,OAAOH,EAAOA,EAAKK,MAAQ,KAG7B,IAAK,IAAIC,KAAKZ,EACZG,EAAIV,KAAKoB,KAAKX,EAAKF,EAAIY,KAGzB,OAAOT,GAGT,IAAK,IAAIS,KAAKb,EACZE,EAAGY,KAAKX,EAAKH,EAAGa,KAIlB,OAAOX,EAGGa,CAAQlB,EAAUC,GAS1BkB,EAAY,SAAmBC,GACjC,IAEyBC,EACnBd,EAHFF,EAAK,GAUT,IAAK,IAAIW,KAAKd,EARWmB,EASlBnB,EAAMc,QARPT,EAAAA,EAAM,CACRC,KAAMa,EAAGb,KACTX,KAAMwB,EAAGxB,MAEXQ,EAAGY,KAAKV,GAQV,OAAOF,GAGLiB,EAAY,SAAmBF,GAIjC,OAHSnB,EAAQsB,IAAI,SAAUZ,GAC7B,OAAOA,EAAKF,SAgBhBV,EAXS,CACPoB,UAAWA,EACXK,SAnCa,SAAkBJ,GAI/B,MAHS,CAACnB,EAAQsB,IAAI,SAAUZ,GAC9B,OAAOA,EAAKF,UAkCda,UAAWA,EACXzB,KAAM,CACJ4B,MAAOzB,EACP0B,KAAMzB,EACN0B,OAAQL,IACRM,OAAQT","file":"toolkit/component/explainer/ci_kpixAxis.js","sourcesContent":["/**\n * Created by leonlin on 16/11/3.\n */\ndefine([], function () {\n  return function (data, tools, callback) {\n    ;\n    var nodesDes = tools.nodesDes;\n    var kpisDes = tools.kpisDes;\n\n    var regroup = function regroup(ci, kpi) {\n      var rs = [];\n\n      var loop = function loop(ci) {\n        var obj = {\n          name: ci.label,\n          data: []\n        };\n\n        var loop = function loop(kpi) {\n          var find = data.find(function (elem) {\n            return elem.kpiCode == kpi.id && elem.nodeId == ci.id;\n          });\n          return find ? find.value : \"-\";\n        };\n\n        for (var i in kpi) {\n          obj.data.push(loop(kpi[i]));\n        }\n\n        return obj;\n      };\n\n      for (var i in ci) {\n        rs.push(loop(ci[i]));\n      }\n\n      ;\n      return rs;\n    };\n\n    var group = regroup(nodesDes, kpisDes);\n\n    var getxAxis = function getxAxis(formatter) {\n      var rs = [kpisDes.map(function (elem) {\n        return elem.label;\n      })];\n      return rs;\n    };\n\n    var getSeries = function getSeries(formatter) {\n      var rs = [];\n\n      var loop = function loop(gr) {\n        var obj = {\n          name: gr.name,\n          data: gr.data\n        };\n        rs.push(obj);\n      };\n\n      for (var i in group) {\n        loop(group[i]);\n      }\n\n      ;\n      return rs;\n    };\n\n    var getLegend = function getLegend(formatter) {\n      var rs = kpisDes.map(function (elem) {\n        return elem.label;\n      });\n      return rs;\n    };\n\n    var rs = {\n      getSeries: getSeries,\n      getxAxis: getxAxis,\n      getLegend: getLegend,\n      data: {\n        nodes: nodesDes,\n        kpis: kpisDes,\n        legend: getLegend(),\n        series: getSeries()\n      }\n    };\n    callback(rs);\n  };\n});"],"sourceRoot":"/source/"}