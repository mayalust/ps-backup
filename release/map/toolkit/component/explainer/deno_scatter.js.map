{"version":3,"sources":["toolkit/component/explainer/deno_scatter.js"],"names":["define","simulate","data","tools","callback","Info","item","nodesDes","kpisDes","instance","result","xAxis","i","indexOf","push","sort","loopNodeDes","node","loopInstance","ins","rs","loopKpiDes","kpi","find","el","id","kpiCode","nodeId","value","obj","name","label","getLegend","map","elem","getxAxis","getSeries","length","clone","$clone","itm"],"mappings":"AAGAA,OAAO,CAAC,YAAa,SAAUC,GAC7B,OAAO,SAAUC,EAAMC,EAAOC,GACjBD,EAAME,KAAjB,IASyBC,EARrBC,EAAWJ,EAAMI,SACjBC,EAAUL,EAAMK,QAChBC,EAAWN,EAAMM,SAEjBC,GADaP,EAAMF,SACV,IAETU,EAAQ,GAUZ,IAAK,IAAIC,KAAKV,EARWI,EASlBJ,EAAKU,IAR2B,GAAjCD,EAAME,QAAQP,EAAKG,WACrBE,EAAMG,KAAKR,EAAKG,UAWpBE,EAAQA,EAAMI,OAEd,IAyCIC,EAAc,SAAqBC,GACrC,IAAIC,EAAe,SAAsBC,GACvC,IAAIC,EAAK,GAELC,EAAa,SAAoBC,GACnC,IAAIC,EAAOrB,EAAKqB,KAAK,SAAUC,GAC7B,OAAOL,EAAIM,IAAMD,EAAGf,SAASgB,IAAMD,EAAGE,SAAWJ,EAAIG,IAAMD,EAAGG,QAAUV,EAAKQ,KAG/E,OAAIF,EACKA,EAAKK,MAEL,GAIX,IAAK,IAAIhB,KAAKJ,EACZY,EAAGN,KAAKO,EAAWb,EAAQI,KAI7B,IAAIiB,EAAM,CACRC,KAAMX,EAAIY,MACV7B,KAAM,CAACkB,IAETV,EAAOI,KAAKe,IAGd,IAAK,IAAIjB,KAAKH,EACZS,EAAaT,EAASG,KAM1B,IAAK,IAAIA,KAAKL,EACZS,EAAYT,EAASK,IAIvBR,EAAS,CACPM,OAAQA,EACRsB,UAnFc,WAKd,OAJSvB,EAASwB,IAAI,SAAUC,GAC9B,OAAOA,EAAKH,SAkFdI,SA5Ea,WAYb,MAAO,CAXExB,EAAMsB,IAAI,SAAUR,GAC3B,IAAIF,EAAOd,EAASc,KAAK,SAAUJ,GACjC,OAAOA,EAAIM,IAAMA,IAGnB,OAAIF,EACKA,EAAKQ,MAEL,QAoEXK,UA9Dc,WAed,OAdI1B,EAAO2B,OAKF3B,EAAOuB,IAAI,SAAU3B,GAC5B,IAAIgC,EAAQhC,EAAKiC,SAKjB,OAJAD,EAAMR,KAAOQ,EAAMR,KACnBQ,EAAMpC,KAAOoC,EAAMpC,KAAK+B,IAAI,SAAUO,GACpC,OAAOA,IAEFF","file":"toolkit/component/explainer/deno_scatter.js","sourcesContent":["/**\n * Created by leonlin on 16/11/3.\n */\ndefine([\"simulate\"], function (simulate) {\n  return function (data, tools, callback) {\n    var Info = tools.Info;\n    var nodesDes = tools.nodesDes;\n    var kpisDes = tools.kpisDes;\n    var instance = tools.instance;\n    var simulateFn = tools.simulate;\n    var result = []; //var data = simulate(\"ci\", nodesDes, kpisDes, instance, simulateFn);\n\n    var xAxis = [];\n\n    var loop = function loop(item) {\n      if (xAxis.indexOf(item.instance) == -1) {\n        xAxis.push(item.instance);\n      }\n\n      ;\n    };\n\n    for (var i in data) {\n      loop(data[i]);\n    }\n\n    ;\n    xAxis = xAxis.sort();\n\n    var getLegend = function getLegend() {\n      var rs = instance.map(function (elem) {\n        return elem.label;\n      });\n      ;\n      return rs;\n    };\n\n    var getxAxis = function getxAxis() {\n      var rs = xAxis.map(function (id) {\n        var find = instance.find(function (ins) {\n          return ins.id == id;\n        });\n\n        if (find) {\n          return find.label;\n        } else {\n          return \"-\";\n        }\n      });\n      return [rs];\n    };\n\n    var getSeries = function getSeries() {\n      if (result.length == 0) {\n        ;\n      }\n\n      ;\n      var rs = result.map(function (item) {\n        var clone = item.$clone();\n        clone.name = clone.name;\n        clone.data = clone.data.map(function (itm) {\n          return itm;\n        });\n        return clone;\n      });\n      ;\n      return rs;\n    };\n\n    var loopNodeDes = function loopNodeDes(node) {\n      var loopInstance = function loopInstance(ins) {\n        var rs = [];\n\n        var loopKpiDes = function loopKpiDes(kpi) {\n          var find = data.find(function (el) {\n            return ins.id == el.instance.id && el.kpiCode == kpi.id && el.nodeId == node.id;\n          });\n\n          if (find) {\n            return find.value;\n          } else {\n            return 0;\n          }\n        };\n\n        for (var i in kpisDes) {\n          rs.push(loopKpiDes(kpisDes[i]));\n        }\n\n        ;\n        var obj = {\n          name: ins.label,\n          data: [rs]\n        };\n        result.push(obj);\n      };\n\n      for (var i in instance) {\n        loopInstance(instance[i]);\n      }\n\n      ;\n    };\n\n    for (var i in nodesDes) {\n      loopNodeDes(nodesDes[i]);\n    }\n\n    ;\n    callback({\n      result: result,\n      getLegend: getLegend,\n      getxAxis: getxAxis,\n      getSeries: getSeries\n    });\n  };\n});"],"sourceRoot":"/source/"}