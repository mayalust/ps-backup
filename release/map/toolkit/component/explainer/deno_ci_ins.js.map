{"version":3,"sources":["toolkit/component/explainer/deno_ci_ins.js"],"names":["define","simulate","data","tools","callback","Info","nodesDes","kpisDes","instances","reduce","a","b","indexOf","instance","push","get","item","result","xAxis","i","sort","loopNodeDes","node","loopKpisDes","kpi","obj","name","ci","label","value","map","elem","find","el","kpiCode","id","nodeId","getLegend","getxAxis","getSeries","itm"],"mappings":"AAGAA,OAAO,CAAC,YAAa,SAAUC,GAC7B,OAAO,SAAUC,EAAMC,EAAOC,GAC5B,IAAIC,EAAOF,EAAME,KACbC,EAAWH,EAAMG,SACjBC,EAAUJ,EAAMI,QAChBC,EAAYN,EAAKO,OAAO,SAAUC,EAAGC,GAKvC,OAJ8B,GAA1BD,EAAEE,QAAQD,EAAEE,WACdH,EAAEI,KAAKH,EAAEE,UAGJH,GACN,IACcP,EAAMF,SA8EvBI,EAAKU,IAAI,2BA5EU,WACjB,IAIyBC,EAJrBC,EAAS,GAETC,EAAQ,GAUZ,IAAK,IAAIC,KAAKjB,EARWc,EASlBd,EAAKiB,IAR2B,GAAjCD,EAAMN,QAAQI,EAAKH,WACrBK,EAAMJ,KAAKE,EAAKH,UAWpBK,EAAQA,EAAME,OAEd,IAsBIC,EAAc,SAAqBC,GACrC,IAAIC,EAAc,SAAqBC,GACrC,IAAIC,EAAM,CACRC,KAAM,CACJC,GAAIL,EAAKM,MACTJ,IAAKA,EAAII,OAEXC,MAAOX,EAAMY,IAAI,SAAUC,GAIzB,OAHW7B,EAAK8B,KAAK,SAAUC,GAC7B,OAAOF,GAAQE,EAAGpB,UAAYoB,EAAGC,SAAWV,EAAIW,IAAMF,EAAGG,QAAUd,EAAKa,QAK9ElB,EAAOH,KAAKW,IAGd,IAAK,IAAIN,KAAKZ,EACZgB,EAAYhB,EAAQY,KAIxB,IAAK,IAAIA,KAAKb,EACZe,EAAYf,EAASa,IAIvBf,EAAS,CACPiC,UAlDc,WACd,OAAOnB,GAkDPoB,SA/Ca,WACb,OAAO9B,GA+CP+B,UA5Cc,WACd,OAAOtB,EAAOa,IAAI,SAAUd,GAC1B,IAAIS,EAAM,GAQV,OAPAA,EAAIC,KAAOV,EAAKU,KAAKF,IACrBC,EAAIvB,KAAOc,EAAKa,MAAMC,IAAI,SAAUU,GAClC,MAAO,CACLd,KAAMc,EAAI3B,SACVgB,MAAOW,EAAIX,SAGRJ","file":"toolkit/component/explainer/deno_ci_ins.js","sourcesContent":["/**\n * Created by leonlin on 16/11/3.\n */\ndefine([\"simulate\"], function (simulate) {\n  return function (data, tools, callback) {\n    var Info = tools.Info;\n    var nodesDes = tools.nodesDes;\n    var kpisDes = tools.kpisDes;\n    var instances = data.reduce(function (a, b) {\n      if (a.indexOf(b.instance) == -1) {\n        a.push(b.instance);\n      }\n\n      return a;\n    }, []);\n    var simulateFn = tools.simulate;\n\n    var getInfo_back = function getInfo_back() {\n      var result = []; //var data = simulate(\"ci\", nodesDes, kpisDes, instance, simulateFn);\n\n      var xAxis = [];\n\n      var loop = function loop(item) {\n        if (xAxis.indexOf(item.instance) == -1) {\n          xAxis.push(item.instance);\n        }\n\n        ;\n      };\n\n      for (var i in data) {\n        loop(data[i]);\n      }\n\n      ;\n      xAxis = xAxis.sort();\n\n      var getLegend = function getLegend() {\n        return xAxis;\n      };\n\n      var getxAxis = function getxAxis() {\n        return instances;\n      };\n\n      var getSeries = function getSeries() {\n        return result.map(function (item) {\n          var obj = {};\n          obj.name = item.name.kpi;\n          obj.data = item.value.map(function (itm) {\n            return {\n              name: itm.instance,\n              value: itm.value\n            };\n          });\n          return obj;\n        });\n      };\n\n      var loopNodeDes = function loopNodeDes(node) {\n        var loopKpisDes = function loopKpisDes(kpi) {\n          var obj = {\n            name: {\n              ci: node.label,\n              kpi: kpi.label\n            },\n            value: xAxis.map(function (elem) {\n              var find = data.find(function (el) {\n                return elem == el.instance && el.kpiCode == kpi.id && el.nodeId == node.id;\n              });\n              return find;\n            })\n          };\n          result.push(obj);\n        };\n\n        for (var i in kpisDes) {\n          loopKpisDes(kpisDes[i]);\n        }\n      };\n\n      for (var i in nodesDes) {\n        loopNodeDes(nodesDes[i]);\n      }\n\n      ;\n      callback({\n        getLegend: getLegend,\n        getxAxis: getxAxis,\n        getSeries: getSeries\n      });\n    };\n\n    Info.get(\"../localdb/simulate.json\", getInfo_back);\n  };\n});"],"sourceRoot":"/source/"}