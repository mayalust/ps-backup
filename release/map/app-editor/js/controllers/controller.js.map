{"version":3,"sources":["app-editor/js/controllers/controller.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","define","app","dom","codeMirror","profile","commonlib","controller","scope","rootScope","lm","loading","undefined","loginList","name","password","sitem","login","item","window","timeout","styleList","timeformatList","toolBarList","optionType","dm","userInfo","units","viewFlexService","solutionUIService","resourceUIService","currentTarget","viewId","themeChangesUnbind","optionChangesUnbind","codesourceChangesUnbind","resourceChanged_callback","target","event","mid","modelId","resourceId","$","val","findKpis","modelSelect","kpis","getData","filter","element","checked","findNodes","resources","id","applyChart_run","formatStr","timeformat","format","value","category","dataType","timespan","parseInt","_option_","baseOption","data","nodes","savefile","dataPass","saveData","solutionId","groupId","smodelId","errorMsg","msg","title","content","btnlist","text","fn","setFocus","i","allMyView","viewTitle","saveloading","code","callbackmsg","dirty","alert","location","href","message","updateView","saveSolution","elements","saveModelDashboardViewContent","JSON","stringify","applylistView","selectData","modelShow","j","label","length","slice","inx","first","end","str","push","nodeId","kpiId","mainTitle","type","subTitle","nodeslist","Array","kpislist","option","rs","findresources","elem","setNodeKpiList","startloading","getOptionData","stoploading","legend","show","changeOption","theme","renderDataChanges","optionChanges","newVal","oldVal","tmp","parse","renderDataTarget","codesourceChanges","themeChanges","changeTheme","toolbarDetail","oldNodeId","oldUnit","chartTab","select","psetting","newopen","codeView","ci","text1","text2","limit","kpi","modelnum","kpinum","optionEdit","subList","sub","settingClick","pagesetting","submitDataChange","getValue","enableScroll","codeSource","cancelDataChange","toolbarClick","toolbar","chartPop_click","clickMainTitle","clickSubTitle","subtitle","testClick","subresourceClick","sub_res","filterByType","display","indexOf","back","disableScroll","timeoutFn","saveData_callback","updateView_callback","resourceClick","resource","findChecked","modelClick","model","kpiClick","onlyDifferentKpi","unit","find","each","kpiClickByModel","checkSelected","ciok","kpiok","applyChart","sub_resources","selectNum","substep","tabClick","newProfile","themeClick","returnBtnClick","renderToolbarIcon","image","style","renderToolbarIcon_class","toolDetailClick","createChart","docClick","newfile","newProf","openfile","newFileclose","openTo","openProf","pageCloseBtn","psetting_close_click","applyPage","previewClick","result","row","layout","col","children","domData","renderPreview","domPos","width","widthheightPortion","height","previewClose","resourceClass","res","resourceSelect","datasettingClick","checkTab","nodeNum","num","checkKpiTab","kpiNum","kpiClassFun","kpiMax","Infinity","checkEnabled","subres","kpi_compo","ci_compo","kpiSelected","ciSelected","refreshGraph","dropdownChange","modelPanelData","modelKeyword","getAllModels","then","mrdata","views","findView","modelStructure","root","traverse","ms","modleLabel","modelLabel","lb","newProfLabel","appendix","split","fd","sort","getModelDashboardViewContent","renderGraphList","getKpisByModelId","modelloaded","viewList","k","getResourceByModelId","ArrayHandler","addNewLabel","modelAndResourseComplete_callback","error","$watch","disableBodyScroll","enableBodyScroll","timeCat","on","applyFinished","$apply","step","some","setCurrentSelect","ele","inner","datasource","setValue","config","applied","cancelDataFn","saveDataFn","imgType","toolbox","feature","saveAsImage","myChart","isConnected","getConnectedDataURL","zr","toDataURL","backgroundColor","replace","openImage","getUserInfo","route","current","pathParams","viewData","calculatePos","wh"],"mappings":"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","file":"app-editor/js/controllers/controller.js","sourcesContent":["function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\ndefine([\"app\", \"dom\", \"codeMirrorEditor\", \"profile\", \"commonlib\"], function (app, dom, codeMirror, profile, commonlib) {\n  app.controller(\"loginController\", [\"$scope\", \"$rootScope\", \"loginManagement\", function (scope, rootScope, lm) {\n    rootScope.loading = undefined; //http://123.56.150.95:48080/app/index_machine.html#/machine\n\n    scope.loginList = [{\n      \"name\": \"18701650256\",\n      \"password\": \"@WSX3edc\"\n    }, {\n      \"name\": \"15652797278\",\n      \"password\": \"@WSX3edc\"\n    }, {\n      \"name\": \"zhaoyanping@proudsmart.com\",\n      \"password\": \"@WSX3edc\"\n    }, {\n      \"name\": \"standard\",\n      \"password\": \"abc123\"\n    }, {\n      \"name\": \"394160008@qq.com\",\n      \"password\": \"@WSX3edc\"\n    }, {\n      \"name\": \"zhangjiang79@qq.com\",\n      \"password\": \"1q2w3e4r\"\n    }, {\n      \"name\": \"adomain@test.com\",\n      \"password\": \"1q2w3e4r\"\n    }, {\n      \"name\": \"1203538033@qq.com\",\n      \"password\": \"lin664181\"\n    }, {\n      \"name\": \"18611560122\",\n      \"password\": \"abc123\"\n    }];\n    scope.sitem = scope.loginList[0];\n\n    scope.login = function (item) {\n      lm.login(item);\n    };\n  }]);\n  app.controller(\"mainController\", [\"$scope\", \"$rootScope\", \"$window\", \"$timeout\", \"styleList\", \"timeformatList\", \"toolBarList\", \"optionType\", \"loginManagement\", \"dataManagement\", \"userInfo\", \"units\", \"viewFlexService\", \"solutionUIService\", \"resourceUIService\", function (scope, rootScope, window, timeout, styleList, timeformatList, toolBarList, optionType, lm, dm, userInfo, units, viewFlexService, solutionUIService, resourceUIService) {\n    var currentTarget;\n    var viewId;\n    var themeChangesUnbind;\n    var optionChangesUnbind;\n    var codesourceChangesUnbind;\n    rootScope.loading = false;\n    scope.callbackmsg = \"获取资源列表\";\n    scope.toolbarDetail = '';\n    scope.modelShow = '';\n    scope.mainTitle = '';\n    scope.subTitle = '';\n    scope.oldNodeId = undefined;\n    scope.oldUnit = undefined;\n    scope.selectData = [];\n    scope.chartTab = \"MAIN\";\n    scope.callbackmsg = false;\n    scope.dirty = false;\n    scope.select = false;\n    scope.psetting = false;\n    scope.newopen = false;\n    scope.codeView = false;\n    scope.errorMsg = errorMsg;\n    scope.toolBarList = toolBarList;\n    scope.optionEdit = optionType;\n    scope.subList = optionType[0].sub;\n    scope.content = optionType[0].sub[0].content;\n    scope.timeformat = timeformatList[0];\n    scope.timeformatList = timeformatList;\n    scope.styleList = styleList;\n    scope.settingClick = settingClick;\n    scope.submitDataChange = submitDataChange;\n    scope.cancelDataChange = cancelDataChange;\n    scope.toolbarClick = toolbarClick;\n    scope.chartPop_click = chartPop_click;\n    scope.clickMainTitle = clickMainTitle;\n    scope.clickSubTitle = clickSubTitle;\n    scope.testClick = testClick;\n    scope.subresourceClick = subresourceClick;\n    scope.filterByType = filterByType;\n    scope.back = back;\n    scope.resourceClick = resourceClick;\n    scope.modelClick = modelClick;\n    scope.kpiClick = kpiClick;\n    scope.kpiClickByModel = kpiClickByModel;\n    scope.checkSelected = checkSelected;\n    scope.applyChart = applyChart_btn_click;\n    scope.selectNum = selectNum;\n    scope.tabClick = tabClick;\n    scope.newProfile = newProfile;\n    scope.themeClick = themeClick;\n    scope.returnBtnClick = returnBtnClick;\n    scope.renderToolbarIcon = renderToolbarIcon;\n    scope.renderToolbarIcon_class = renderToolbarIcon_class;\n    scope.toolDetailClick = toolDetailClick;\n    scope.docClick = docClick;\n    scope.newfile = newfile;\n    scope.openfile = openfile;\n    scope.newFileclose = newFileclose;\n    scope.openTo = openTo;\n    scope.pageCloseBtn = pageCloseBtn;\n    scope.psetting_close_click = psetting_close_click;\n    scope.applyPage = applyPage;\n    scope.previewClick = previewClick;\n    scope.domPos = domPos;\n    scope.previewClose = previewClose;\n    scope.resourceClass = resourceClass;\n    scope.substep = 0;\n    scope.datasettingClick = datasettingClick;\n    scope.checkTab = checkTab;\n    scope.checkKpiTab = checkKpiTab;\n    scope.kpiClassFun = kpiClassFun;\n    scope.checkEnabled = checkEnabled;\n    scope.refreshGraph = refreshGraph;\n    scope.dropdownChange = dropdownChange;\n    scope.modelKeyword = {};\n    /* before 2016.3.15\n     rootScope.$on(\"modelAndResourceComplete\", modelAndResourseComplete_callback);\n     */\n\n    dm.getAllModels().then(function success(event) {\n      modelAndResourseComplete_callback(event);\n    }, function error(error) {});\n    scope.$watch(\"msg\", msgWatcher);\n    scope.$watch(\"dataType\", dataTypeWatcher);\n    timeout(onDomReady); //dm.init();\n\n    function checkTab(resources, dataType, oldNodeId) {\n      if (_typeof(dataType) == 'object' && dataType != null) {\n        var res = oldNodeId ? 1 : 0;\n\n        var nodeNum = res + function (data) {\n          var num = 0;\n\n          for (var i in data) {\n            if (data[i].checked) {\n              num++;\n            }\n          }\n\n          return num;\n        }(resources);\n\n        if (dataType.limit) {\n          if (dataType.limit.ci) {\n            return nodeNum != dataType.limit.ci;\n          } else {\n            return false;\n          }\n        } else {\n          return false;\n        }\n      } else {\n        return false;\n      }\n    }\n\n    function checkKpiTab(kpis, dataType) {\n      if (_typeof(dataType) == 'object' && dataType != null) {\n        var kpiNum = function (data) {\n          var num = 0;\n\n          for (var i in data) {\n            if (data[i].checked) {\n              num++;\n            }\n          }\n\n          return num;\n        }(kpis);\n\n        if (dataType.limit) {\n          if (dataType.limit.kpi) {\n            return kpiNum != dataType.limit.kpi;\n          } else {\n            return false;\n          }\n        } else {\n          return false;\n        }\n      } else {\n        return false;\n      }\n    }\n\n    function dropdownChange(value) {\n      scope.modelPanelData.children.each(function (model) {\n        if (model.resources) {\n          model.resources.each(function (element) {\n            element.checked = false;\n          });\n        }\n\n        model.kpis.each(function (element) {\n          element.checked = false;\n        });\n      });\n      scope.modelSelect = value;\n      scope.oldUnit = undefined;\n    }\n\n    function refreshGraph() {\n      var modelId, kpis, nodes;\n\n      if (scope.solutionId) {\n        modelId = scope.modelSelect.id;\n        kpis = scope.modelSelect.kpis.getData().filter(function (element) {\n          return element.checked;\n        });\n      } else {\n        nodes = scope.modelSelect.resources.getData().filter(function (element) {\n          return element.checked;\n        });\n\n        if (nodes.length > 0) {\n          modelId = nodes[0].modelId;\n        }\n\n        kpis = scope.modelSelect.kpis.getData().filter(function (elem) {\n          return elem.checked;\n        });\n      }\n\n      var result = {\n        formatStr: scope.timeformat.formatStr,\n        format: scope.timeformat.value,\n        category: scope.category,\n        dataType: scope.dataType,\n        modelId: modelId,\n        timespan: parseInt(scope.timespan),\n        _option_: JSON.parse(JSON.stringify(scope.baseOption)),\n        data: {\n          nodes: nodes,\n          kpis: kpis\n        }\n      };\n\n      if (nodes == undefined || nodes.length == 0) {\n        delete result.data.nodes;\n      }\n\n      applyChart_run(result);\n    }\n\n    function checkEnabled(subres, dataType) {\n      var kpi_compo,\n          ci_compo,\n          kpiSelected = 0,\n          ciSelected = 0;\n\n      if (dataType) {\n        if (dataType.limit) {\n          kpi_compo = dataType.limit.kpi;\n          ci_compo = dataType.limit.ci;\n        }\n      }\n\n      for (var i in scope.resources) {\n        (function (resource) {\n          for (var i in resource.kpis) {\n            (function (kpi) {\n              if (kpi.checked) {\n                kpiSelected++;\n              }\n            })(resource.kpis[i]);\n          }\n        })(scope.resources[i]);\n      }\n\n      ;\n\n      if (kpiSelected > 0) {\n        ciSelected++;\n      } else {\n        return true;\n      }\n\n      for (var j in subres) {\n        (function (res) {\n          if (res.checked) {\n            ciSelected++;\n          }\n        })(subres[j]);\n      }\n\n      if (kpi_compo) {\n        if (kpiSelected != kpi_compo) {\n          return true;\n        }\n\n        ;\n      }\n\n      if (ci_compo) {\n        if (ciSelected != ci_compo) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n\n    function datasettingClick() {\n      scope.substep = scope.substep == 0 ? 1 : 0;\n    }\n\n    function domPos(width, widthheightPortion) {\n      return {\n        width: width + \"%\",\n        height: 1200 * width / 100 * widthheightPortion + \"px\"\n      };\n    }\n\n    function dataTypeWatcher(newVal, oldVal, scope) {\n      if (newVal) {\n        var result = [];\n\n        for (var i in newVal.category) {\n          var name;\n\n          if (i == 'time') {\n            name = '时间';\n          } else if (i == 'ci') {\n            name = '设备';\n          } else {\n            name = i;\n          }\n\n          result.push({\n            name: name,\n            value: i\n          });\n        }\n\n        scope.timeCat = result;\n      }\n    }\n\n    function resourceClass(res, resource) {\n      var str = '';\n      var id = res.id;\n\n      if (scope.resourceSelect) {\n        if (id == scope.resourceSelect.id) {\n          str += \"current \";\n        }\n      }\n\n      var find = function (data) {\n        for (var i in data) {\n          if (data[i].checked) {\n            return true;\n          }\n        }\n\n        return false;\n      }(res.kpis);\n\n      if (find) {\n        str += \"active \";\n      }\n\n      return str;\n    }\n\n    function kpiClassFun(kpi, unit, kpis, dataType) {\n      if (dataType != null) {\n        if (dataType.limit) {\n          var kpiMax = dataType.limit.kpi ? dataType.limit.kpi : Infinity;\n        } else {\n          var kpiMax = Infinity;\n        }\n      } else {\n        var kpiMax = Infinity;\n      }\n\n      var kpiNum = function (data) {\n        var num = 0;\n\n        for (var i in data) {\n          if (data[i].checked) {\n            num++;\n          }\n        }\n\n        return num;\n      }(kpis);\n\n      if (kpi.checked) {\n        return \"\";\n      }\n\n      if (kpiNum >= kpiMax) {\n        return \"disabled\";\n      }\n\n      if (unit ? kpi.unit != unit : false) {\n        return \"disabled\";\n      }\n\n      return \"\";\n    }\n\n    function previewClick() {\n      var result = [];\n      var data = dom.saveData();\n\n      for (var i in data.data) {\n        var row = data.data[i].layout.row;\n        var col = data.data[i].layout.col;\n\n        if (!result[row]) {\n          result[row] = {};\n          result[row].children = [];\n        }\n\n        result[row].children[col] = data.data[i];\n      }\n\n      scope.domData = result;\n      dom.disableScroll();\n      dom.renderPreview(result);\n    }\n\n    function previewClose() {\n      scope.domData = undefined;\n      dom.enableScroll();\n    }\n\n    function resourceChanged_callback(target, event) {\n      currentTarget = target;\n      var mid = target.modelId;\n      var resourceId = $(event.target).val();\n      var findKpis = scope.modelSelect.kpis.getData().filter(function (element) {\n        return element.checked;\n      });\n      var findNodes = scope.resources.filter(function (element) {\n        return element.id == resourceId;\n      });\n      applyChart_run({\n        formatStr: scope.timeformat.formatStr,\n        format: scope.timeformat.value,\n        category: scope.category,\n        dataType: scope.dataType,\n        modelId: mid,\n        timespan: parseInt(scope.timespan),\n        _option_: currentTarget.baseOption,\n        data: {\n          nodes: findNodes,\n          kpis: findKpis\n        }\n      });\n    }\n\n    function onDomReady() {\n      dom.fn(toolBarList);\n      dom.on(\"optionUpdated\", editBtnClick_callback);\n      dom.on(\"resBtn_click\", dataBtnClick_callback);\n      dom.on(\"codeBtn_click\", codeBtn_click_callback);\n      dom.on(\"saveImage\", saveImage_callback);\n      dom.on(\"resourceChanged\", resourceChanged_callback);\n      profile.on(\"chartChanged\", chartChanged_callback);\n      profile.on(\"onError\", onError_callback);\n      scope.userInfo = userInfo.getUserInfo();\n\n      function onError_callback(event) {\n        scope.$apply(applied);\n\n        function applied() {\n          scope.msg = {\n            title: event.errorMsg,\n            content: event.error.message,\n            btnlist: [{\n              text: \"关闭\",\n              fn: function fn() {\n                scope.msg = undefined;\n              }\n            }]\n          };\n        }\n      }\n\n      function chartChanged_callback(event) {\n        scope.dirty = true;\n      }\n\n      function saveImage_callback(target, config) {\n        scope.$apply(applied);\n\n        function applied() {\n          scope.msg = {\n            title: \"是否保存此视图\",\n            content: \"点击确认，则在新页面开启图片，之后请用右键另存为保存图片。点击取消，放弃保存。\",\n            btnlist: [{\n              text: \"取消\",\n              fn: cancelDataFn\n            }, {\n              text: \"保存\",\n              fn: saveDataFn\n            }]\n          };\n\n          function cancelDataFn() {\n            scope.msg = undefined;\n          }\n\n          function saveDataFn() {\n            scope.msg = undefined;\n            timeout(timeoutFn, 1000);\n            var saveOption = target.option.toolbox.feature.saveAsImage;\n            var imgType = saveOption.type || 'png';\n\n            if (imgType != 'png' && imgType != 'jpeg') {\n              imgType = 'png';\n            }\n\n            var image;\n\n            if (!target.myChart.isConnected()) {\n              image = target.zr.toDataURL('image/' + imgType, target.option.backgroundColor && target.option.backgroundColor.replace(' ', '') === 'rgba(0,0,0,0)' ? '#fff' : target.option.backgroundColor);\n            } else {\n              image = target.myChart.getConnectedDataURL(imgType);\n            }\n\n            dom.openImage(image);\n\n            function timeoutFn() {\n              scope.callbackmsg = \"视图保存成功\";\n              timeout(timeoutFn, 1000);\n\n              function timeoutFn() {\n                scope.callbackmsg = \"\";\n              }\n            }\n          }\n        }\n      }\n\n      function dataBtnClick_callback(event) {\n        scope.$apply(applyFinished);\n\n        function applyFinished() {\n          scope.option = undefined;\n          var timespan = event.timespan;\n          var stepToStr;\n          var nodes = event.nodes;\n          var kpis = event.kpis;\n          var modelId = event.modelId;\n          var result = [];\n          stepToStr = \"MODEL\";\n          scope.baseOption = event.baseOption;\n          scope.type = event.type;\n          scope.theme = event.theme;\n          scope.step = \"\";\n          scope.substep = 0;\n          scope.timespan = timespan ? timespan : 360;\n          scope.category = event.category;\n          scope.dataType = event.dataType;\n          scope.step = stepToStr;\n          scope.oldNodeId = nodes ? nodes[0] : undefined;\n          scope.oldUnit = undefined;\n\n          if (scope.solutionId) {\n            if (scope.smodelId != 0) {\n              scope.modelSelect = {\n                id: scope.smodelId\n              };\n              resourceUIService.getKpisByModelId(scope.smodelId, function (event) {\n                if (event.code == '0') {\n                  scope.modelSelect.kpis = new commonlib.ArrayHandler(event.data);\n                  scope.modelSelect.kpis.each(function (element) {\n                    var find;\n\n                    if (kpis instanceof Array) {\n                      find = kpis.some(function (elem) {\n                        return elem == element.id;\n                      });\n                    }\n\n                    if (find) {\n                      element.checked = true;\n                    } else {\n                      element.checked = false;\n                    }\n                  });\n                }\n              });\n            } else if (scope.groupId != 0) {\n              scope.modelSelect = {\n                id: scope.groupId\n              };\n              resourceUIService.getKpisByModelId(scope.groupId, function (event) {\n                if (event.code == '0') {\n                  scope.modelSelect.kpis = new commonlib.ArrayHandler(event.data);\n                  scope.modelSelect.kpis.each(function (element) {\n                    var find = kpis.some(function (elem) {\n                      return elem == element.id;\n                    });\n\n                    if (find) {\n                      element.checked = true;\n                    } else {\n                      element.checked = false;\n                    }\n                  });\n                }\n              });\n            }\n          } else if (nodes instanceof Array && nodes.length > 0) {\n            scope.modelSelect = scope.modelPanelData.children.getData().find(function (element) {\n              return element.id == modelId;\n            });\n            scope.modelKeyword.setCurrentSelect(scope.modelSelect);\n            scope.modelSelect = scope.modelSelect ? scope.modelSelect : scope.modelPanelData.children.first();\n            scope.modelSelect.resources.each(function (element) {\n              element.checked = false;\n            });\n            scope.modelSelect.kpis.each(function (element) {\n              element.checked = false;\n            });\n            var findNodes = scope.modelSelect.resources.getData().filter(function (element) {\n              return nodes.indexOf(element.id) != -1;\n            });\n            var findKpis = scope.modelSelect.kpis.getData().filter(function (element) {\n              return kpis.indexOf(element.id) != -1;\n            });\n\n            for (var i in findNodes) {\n              findNodes[i].checked = true;\n            }\n\n            for (var j in findKpis) {\n              findKpis[j].checked = true;\n            }\n            /*\n            for(var i in scope.modelSelect.kpis){\n            \tvar nodeId = scope.resources[i].id;\n            \tif((modelId == scope.resources[i].modelId)&&(nodeId != nodes[0])){\n            \t\tvar clone = JSON.parse(JSON.stringify(scope.resources[i]));\n            \t\tvar find = (function(id, nodes){\n            \t\t\tfor(var i in nodes){\n            \t\t\t\tif(id == nodes[i]){\n            \t\t\t\t\treturn true;\n            \t\t\t\t}\n            \t\t\t}\n            \t\t\treturn false;\n            \t\t})(scope.resources[i].id, nodes);\n            \t\tif(find){\n            \t\t\tclone.checked = true;\n            \t\t}\n            \t\telse\n            \t\t{\n            \t\t\tclone.checked = false;\n            \t\t}\n            \t\tresult.push(clone);\n            \t}\n            \tif(nodeId == nodes[0]){\n            \t\tscope.resourceSelect = scope.resources[i];\n            \t}\n            \tfor(var j in scope.resources[i].kpis){\n            \t\tif(nodeId == nodes[0]){\n            \t\t\tvar find = (function(id, kpis){\n            \t\t\t\tfor(var i in kpis){\n            \t\t\t\t\tif(id == kpis[i]){\n            \t\t\t\t\t\treturn true;\n            \t\t\t\t\t}\n            \t\t\t\t}\n            \t\t\t\treturn false;\n            \t\t\t})(scope.resources[i].kpis[j].id, kpis);\n            \t\t\tscope.resources[i].kpis[j].checked = find;\n            \t\t\tif(find)\n            \t\t\t{\n            \t\t\t\tscope.oldUnit = scope.resources[i].kpis[j].unit;\n            \t\t\t}\n             \t\t}\n            \t\telse\n            \t\t{\n            \t\t\tscope.resources[i].kpis[j].checked = false;\n            \t\t}\n            \t}\n            }\n            var find = (function(data){\n            \tfor(var i in data){\n            \t\tfor(var j in data[i].kpis){\n            \t\t\tif(data[i].kpis[j].checked){\n            \t\t\t\treturn data[i];\n            \t\t\t}\n            \t\t}\n            \t}\n            \treturn undefined;\n            })(scope.resources);\n             */\n\n\n            if (findKpis.length > 0) {\n              scope.oldUnit = scope.oldUnit ? scope.oldUnit : findKpis[0].unit; //scope.oldNodeId = find.id;\n\n              /*\n              var result = [];\n              for(var i in scope.resources)\n              {\n              \tif((scope.resources[i].modelId == find.modelId)&&(scope.resources[i].id != find.id)){\n              \t\tresult.push(JSON.parse(JSON.stringify(scope.resources[i])))\n              \t}\n              }\n              scope.sub_resources = scope.sub_resources ? scope.sub_resources : result;\n               \n              */\n            } else {\n              scope.oldUnit = undefined;\n              /*\n              scope.oldNodeId = undefined;\n              scope.sub_resources = undefined;\n              */\n            }\n          } else if (modelId != undefined && modelId != null && modelId != \"\") {\n            if (kpis instanceof Array && kpis.length > 0) {\n              var kpiId = kpis[0];\n              scope.oldUnit = kpis[0];\n            } else {\n              delete scope.oldUnit;\n            }\n\n            scope.modelSelect = scope.modelPanelData.children.getData().find(function (element) {\n              return element.id == modelId;\n            });\n            scope.modelSelect.kpis.each(function (element) {\n              var find = kpis.some(function (ele) {\n                return ele == element.id;\n              });\n\n              if (find) {\n                element.checked = true;\n              } else {\n                element.checked = false;\n              }\n            });\n          } else {\n            if (scope.solutionId) {\n              scope.modelSelect = undefined;\n\n              for (var i in scope.modelPanelData.children.getData()) {\n                (function (index, elem) {\n                  elem.kpis.each(function (inner) {\n                    inner.checked = false;\n                  });\n                })(i, scope.modelPanelData.children.getData()[i]);\n              }\n            } else {\n              scope.modelSelect = scope.modelPanelData.children.first();\n\n              if (scope.modelSelect.resources) {\n                scope.modelSelect.resources.each(function (element) {\n                  element.checked = false;\n                });\n              }\n\n              scope.modelSelect.kpis.each(function (element) {\n                element.checked = false;\n              });\n            }\n          }\n\n          scope.sub_resources = result.length > 0 ? result : undefined;\n          applylistView();\n          currentTarget = event.target;\n          scope.type = event.type;\n          scope.datasource = event.option;\n        }\n      }\n\n      function editBtnClick_callback(event) {\n        scope.$apply(applyFinished);\n\n        function applyFinished() {\n          if (themeChangesUnbind) {\n            themeChangesUnbind();\n          }\n\n          ;\n\n          if (optionChangesUnbind) {\n            optionChangesUnbind();\n          }\n\n          ;\n          currentTarget = event.target;\n          scope.option = JSON.parse(JSON.stringify(event.option));\n          scope.type = event.type;\n          scope.theme = event.theme;\n        }\n\n        themeChangesUnbind = scope.$watch(\"theme\", themeChanges, true);\n        optionChangesUnbind = scope.$watch(\"option\", optionChanges, true);\n      }\n\n      function codeBtn_click_callback(event) {\n        scope.$apply(applyFinished);\n\n        function applyFinished() {\n          if (codesourceChangesUnbind) {\n            codesourceChangesUnbind();\n          }\n\n          dom.disableScroll();\n          scope.codeView = true;\n          scope.theme = event.theme;\n          currentTarget = event.target;\n          scope.codeSource = JSON.parse(JSON.stringify(event.option));\n          codeMirror.setValue(scope.codeSource);\n        }\n\n        codesourceChangesUnbind = scope.$watch(\"codeSource\", codesourceChanges, true);\n      }\n    }\n\n    function psetting_close_click() {\n      scope.psetting = false;\n    }\n\n    function pageCloseBtn() {\n      scope.psetting = false;\n    }\n\n    function settingClick() {\n      dom.pagesetting();\n      scope.psetting = true;\n    }\n\n    function applyPage() {\n      scope.psetting = false;\n      dom.applyPage();\n    }\n\n    function newfile() {\n      lm.newProf();\n    }\n\n    function submitDataChange() {\n      var value = JSON.parse(codeMirror.getValue());\n      dom.enableScroll();\n      scope.codeSource = value;\n      scope.codeView = false;\n    }\n\n    function docClick() {\n      scope.newopen = false;\n    }\n\n    function cancelDataChange() {\n      dom.enableScroll();\n      scope.codeView = false;\n    }\n\n    function openfile() {\n      scope.newopen = false;\n      scope.select = true;\n    }\n\n    function newFileclose() {\n      scope.select = false;\n    }\n\n    function savefile() {\n      var dataPass = dom.saveData();\n\n      if (scope.solutionId) {\n        dataPass.solutionId = scope.solutionId;\n        dataPass.groupId = scope.groupId;\n        dataPass.smodelId = scope.smodelId;\n      }\n\n      if (dataPass.errorMsg) {\n        var cancelDataFn = function cancelDataFn() {\n          scope.msg = \"\";\n          dom.setFocus();\n        };\n\n        scope.msg = {\n          title: \"未绑定数据\",\n          content: \"有视图未绑定数据\",\n          btnlist: [{\n            text: \"关闭\",\n            fn: cancelDataFn\n          }]\n        };\n      } else {\n        var find = function (data) {\n          var title = data.title;\n\n          for (var i in scope.allMyView) {\n            if (title == scope.allMyView[i].viewTitle && viewId != scope.allMyView[i].viewId) {\n              return true;\n            }\n          }\n\n          return false;\n        }(dataPass);\n\n        if (find) {\n          var _cancelDataFn = function _cancelDataFn() {\n            scope.msg = \"\";\n            dom.setFocus();\n          };\n\n          scope.msg = {\n            title: \"视图重名\",\n            content: \"当前视图名称已被占用，请修改\",\n            btnlist: [{\n              text: \"关闭\",\n              fn: _cancelDataFn\n            }]\n          };\n        } else {\n          var saveData_callback = function saveData_callback(event) {\n            if (event.code == 0) {\n              timeout(function () {\n                scope.saveloading = false;\n                scope.callbackmsg = \"数据保存成功\";\n                scope.dirty = false;\n                timeout(function () {\n                  scope.callbackmsg = undefined;\n                }, 1000);\n              }, 1000);\n              viewId = event.data.viewId;\n            } else if (event.code == 10020) {\n              alert(\"需要用户登录才能使用\");\n              window.location.href = event.data;\n            } else {\n              var timeoutFn = function timeoutFn() {\n                scope.saveloading = false;\n                scope.callbackmsg = event.message;\n                timeout(timeoutFinished, 1000);\n\n                function timeoutFinished() {\n                  scope.callbackmsg = undefined;\n                }\n              };\n\n              timeout(timeoutFn, 1000);\n            }\n          };\n\n          var updateView_callback = function updateView_callback(event) {\n            if (event.code == 0) {\n              viewId = event.data.viewId;\n              timeout(function () {\n                scope.saveloading = false;\n                scope.callbackmsg = \"数据更新成功\";\n                scope.dirty = false;\n                timeout(function () {\n                  scope.callbackmsg = undefined;\n                }, 1000);\n              }, 1000);\n            } else if (event.code == 10020) {\n              alert(\"需要用户登录才能使用\");\n              window.location.href = event.data;\n            } else {\n              timeout(function () {\n                scope.saveloading = false;\n                scope.callbackmsg = event.message;\n                timeout(function () {\n                  scope.callbackmsg = undefined;\n                }, 1000);\n              }, 1000);\n            }\n          };\n\n          scope.saveloading = true;\n\n          if (viewId == undefined) {\n            dm.saveData(dataPass, saveData_callback);\n          } else {\n            dm.updateView(viewId, dataPass, updateView_callback);\n          }\n        }\n      }\n    }\n\n    function saveSolution() {\n      var dataPass = dom.saveData();\n      var content = {\n        title: \"title\",\n        elements: dataPass.data\n      };\n      /*\n      if(scope.solutionId)\n      {\n      \tdataPass.solutionId = scope.solutionId;\n      \tdataPass.groupId = scope.groupId;\n      \tdataPass.smodelId = scope.smodelId;\n      }\n      */\n      //var modelId = dataPass.data[0].modelId;\n\n      solutionUIService.saveModelDashboardViewContent(scope.solutionId, scope.groupId, scope.smodelId, JSON.stringify(content), function (event) {\n        window.location.href = \"../app-ac/index.html#/myView\";\n      });\n    }\n\n    function modelAndResourseComplete_callback(mrdata) {\n      scope.callbackmsg = undefined;\n      scope.solutionId = mrdata.solutionId;\n      scope.groupId = mrdata.groupId;\n      scope.smodelId = mrdata.smodelId;\n      scope.allMyView = mrdata.views;\n\n      if (mrdata.viewId) {\n        viewId = parseInt(mrdata.viewId);\n        var findView = scope.allMyView.find(function (element) {\n          return element.viewId == viewId;\n        });\n\n        if (findView) {\n          findView.JSON = JSON.parse(findView.content);\n        }\n      }\n\n      if (scope.solutionId) {\n        scope.savefile = saveSolution;\n      } else {\n        scope.savefile = savefile;\n      }\n\n      scope.modelPanelData = function (data) {\n        var result = {\n          label: '企业',\n          children: data\n          /* before 2016.3.15\n           var result = [{id:'', label : '所有模型'}];\n           for(var i in data){\n           if(data[i].resources ? data[i].resources.length > 0 : false){\n           result.push(data[i]);\n           }\n           }*/\n\n        };\n        return result;\n      }(mrdata.modelStructure.root);\n\n      scope.resources = function (data) {\n        var result = [];\n        mrdata.modelStructure.traverse.each(function (ms) {\n          var modelId = ms.id;\n          var modleLabel = ms.label;\n          var kpis = ms.kpis;\n\n          if (ms.resources) {\n            ms.resources.each(function (resource) {\n              resource.modelId = modelId;\n              resource.modelLabel = modleLabel;\n              resource.kpis = JSON.parse(JSON.stringify(kpis.getData()));\n              result.push(resource);\n            });\n          }\n        });\n        /* before 2016.3.15\n         for(var i in data){\n         for(var j in data[i].resources){\n         var clone = data[i].resources[j];\n         clone.modelId = data[i].id;\n         clone.modelLabel = data[i].label;\n         clone.kpis = JSON.parse(JSON.stringify(data[i].kpis));\n         result.push(data[i].resources[j]);\n         }\n         }\n         }*/\n\n        return result;\n      }(mrdata.modelStructure);\n\n      scope.modelShow = \"\";\n      scope.timespan = (scope.modelShow ? scope.modelShow.timespan != undefined ? scope.modelShow.timespan : 3600 * 24 * 30 : 3600 * 24 * 30) / 60 / 1000;\n      var lb = [];\n\n      var newProfLabel = function (obj) {\n        for (var i in obj) {\n          var title = obj[i].viewTitle;\n          var find = title.indexOf(\"新建运营分析视图\");\n\n          if (find != -1) {\n            var appendix = title.split(\"新建运营分析视图\")[1];\n            var fd = appendix.indexOf(\"(\");\n\n            if (fd != -1) {\n              var inx = parseInt(appendix.split(\"(\")[1].split(\")\")[0]);\n              lb.push(inx);\n            } else {\n              lb.push(0);\n            }\n          }\n        }\n\n        lb = lb.sort();\n\n        if (lb.length > 0) {\n          return \"新建运营分析视图(\" + (lb[lb.length - 1] + 1) + \")\";\n        } else {\n          return \"新建运营分析视图\";\n        }\n      }(scope.allMyView);\n\n      if (scope.solutionId) {\n        solutionUIService.getModelDashboardViewContent(scope.solutionId, scope.groupId, scope.smodelId, function (event) {\n          var result = [];\n\n          if (event.data != null) {\n            var views = JSON.parse(event.data);\n\n            for (var i in views.elements) {\n              var row = views.elements[i].layout ? views.elements[i].layout.row : i + 1;\n              var col = views.elements[i].layout ? views.elements[i].layout.col : 1;\n\n              if (!result[row]) {\n                result[row] = {};\n                result[row].children = [];\n              }\n\n              result[row].children[col] = views.elements[i];\n            }\n\n            dom.renderGraphList(views.elements.title, result, function (target) {\n              target.startloading();\n              var nodeslist;\n              var option = target.option;\n              var dataType = target.dataType;\n              var category = target.category;\n              var format = timeformatList.find(function (element) {\n                return element.formatStr == target.formatStr;\n              });\n              var timespan = target.timespan;\n              var modelId = scope.smodelId == 0 ? scope.groupId : scope.smodelId;\n              var model = scope.modelPanelData.children.find(\"id\", modelId);\n\n              if (model == undefined) {\n                model = {\n                  id: modelId\n                };\n                resourceUIService.getKpisByModelId(modelId, function (event) {\n                  if (event.code == 0) {}\n                });\n              } else {\n                modelloaded();\n              }\n\n              function modelloaded() {\n                if (model.resources) {\n                  nodeslist = model.resources.getData().filter(function (element) {\n                    if (target.nodes instanceof Array) {\n                      return target.nodes.indexOf(element.id) != -1;\n                    } else {\n                      return false;\n                    }\n                  });\n                }\n\n                var kpislist = model.kpis.getData().filter(function (element) {\n                  if (target.kpis) {\n                    return target.kpis.indexOf(element.id) != -1;\n                  } else {\n                    return false;\n                  }\n                });\n\n                if (nodeslist) {\n                  if (!nodeslist instanceof Array || nodeslist.length == 0) {\n                    nodeslist = undefined;\n                  }\n                }\n\n                dm.getOptionData(dataType, category, format ? format.value : 'hh:mm', option, nodeslist, kpislist, timespan * 60 * 1000, getOptionData_callback);\n\n                function getOptionData_callback(event, data) {\n                  target.stoploading();\n                  renderDataTarget(event.option, target, data);\n                }\n              }\n            });\n          } else {}\n        });\n      } else {\n        if (mrdata.viewList != undefined) {\n          var result = [];\n          var data = mrdata.viewList;\n\n          for (var k in mrdata.viewList) {}\n\n          for (var i in data) {\n            var row = data[i].layout ? data[i].layout.row : i + 1;\n            var col = data[i].layout ? data[i].layout.col : 1;\n\n            if (!result[row]) {\n              result[row] = {};\n              result[row].children = [];\n            }\n\n            result[row].children[col] = data[i];\n          }\n\n          dom.renderGraphList(mrdata.viewTitle, result, function (target) {\n            target.startloading();\n            var option = target.option;\n            var nodeslist = [];\n            var dataType = target.dataType;\n            var category = target.category;\n            var format = timeformatList.find(function (element) {\n              return element.formatStr == target.formatStr;\n            });\n            var timespan = target.timespan;\n            var modelId = target.modelId;\n            var model = scope.modelPanelData.children.find(\"id\", modelId);\n\n            if (model == undefined) {\n              model = {\n                id: modelId\n              };\n              resourceUIService.getResourceByModelId(modelId, function (event) {\n                if (event.code == 0) {\n                  resourceUIService.getKpisByModelId(modelId, function (event) {\n                    if (event.code == 0) {\n                      model.kpis = new commonlib.ArrayHandler(event.data);\n                      modelloaded();\n                    }\n                  });\n                  model.resources = new commonlib.ArrayHandler(event.data);\n                }\n              });\n            } else {\n              modelloaded();\n            }\n\n            function modelloaded() {\n              if (model.resources) {\n                nodeslist = model.resources.getData().filter(function (element) {\n                  if (target.nodes instanceof Array) {\n                    return target.nodes.indexOf(element.id) != -1;\n                  } else {\n                    return false;\n                  }\n                });\n              }\n\n              var kpislist = model.kpis.getData().filter(function (element) {\n                return target.kpis.indexOf(element.id) != -1;\n              });\n\n              if (nodeslist.length == 0) {\n                if (model.resources) {\n                  var first = model.resources.first();\n\n                  if (first) {\n                    nodeslist = [model.resources.first()];\n                  } else {\n                    nodeslist = undefined;\n                  }\n                } else {\n                  nodeslist = undefined;\n                }\n              }\n\n              dm.getOptionData(dataType, category, format.value, option, nodeslist, kpislist, timespan * 60 * 1000, getOptionData_callback);\n\n              function getOptionData_callback(event, data) {\n                target.stoploading();\n                renderDataTarget(event.option, target, data);\n              }\n            }\n          }); //add new\n        } else {\n          dom.addNewLabel(newProfLabel);\n        }\n\n        ;\n      }\n    }\n\n    function themeClick(value) {\n      if (value != \"customer\") {\n        scope.theme = value;\n      } else {\n        //scope.theme = \"default\";\n        scope.chartTab = \"DETAIL\";\n      }\n    }\n\n    function returnBtnClick() {\n      scope.chartTab = \"MAIN\";\n    }\n\n    function openTo(viewId) {\n      lm.openProf(viewId);\n      scope.select = false;\n    }\n\n    function newProfile() {\n      //lm.newProf();\n      scope.newopen = !scope.newopen;\n    }\n\n    function tabClick(value) {\n      scope.substep = value;\n    }\n\n    function selectNum(model, substep) {\n      var inx = 0;\n\n      if (model) {\n        if (substep == 0) {\n          for (var i in model.resources) {\n            if (model.resources[i].checked == true) {\n              inx++;\n            }\n          }\n        } else if (substep == 1) {\n          for (var i in model.kpis) {\n            if (model.kpis[i].checked == true) {\n              inx++;\n            }\n          }\n        }\n      }\n\n      return inx;\n    }\n\n    function msgWatcher(newVal, oldVal, scope) {\n      if (newVal) {\n        dom.disableBodyScroll();\n      } else {\n        dom.enableBodyScroll();\n      }\n    }\n\n    function applylistView() {\n      scope.selectData = [];\n      var modelShow = scope.modelShow;\n\n      for (var i in modelShow.resources) {\n        for (var j in modelShow.kpis) {\n          if (modelShow.resources[i].checked && modelShow.kpis[j].checked) {\n            var findSame = function findSame(name) {\n              var find = function (obj) {\n                for (var i in obj) {\n                  if (obj[i].value == name) {\n                    return true;\n                  }\n                }\n\n                return false;\n              }(scope.selectData);\n\n              return find;\n            };\n\n            var name = modelShow.resources[i].label + \"(\" + modelShow.kpis[j].label + \")\";\n\n            if (name.length > 6) {\n              name = name.slice(0, 4) + \"...\";\n            }\n\n            var inx = 1;\n\n            while (findSame(name)) {\n              var first = name.slice(-3, -2);\n              var end = name.slice(-1);\n\n              if (first == \"(\" && end == \")\") {\n                var str = name.slice(0, -3);\n                str += \"(\" + inx + \")\";\n                name = str;\n              } else {\n                name += \"(\" + inx + \")\";\n              }\n\n              inx++;\n            }\n\n            scope.selectData.push({\n              nodeId: modelShow.resources[i].id,\n              name: modelShow.kpis[j].name,\n              kpiId: modelShow.kpis[j].id,\n              value: name\n            });\n          }\n        }\n      }\n\n      scope.mainTitle = scope.modelShow.label;\n\n      switch (scope.type) {\n        case \"line\":\n          scope.subTitle = \"线状视图\";\n          break;\n\n        case \"bar\":\n          scope.subTitle = \"柱状视图\";\n          break;\n\n        case \"pie\":\n          scope.subTitle = \"饼状视图\";\n          break;\n\n        case \"gauge\":\n          scope.subTitle = \"告警视图\";\n          break;\n      }\n    }\n\n    function applyChart_btn_click(resources) {\n      var nodes = [];\n      var kpis = [];\n      var modelId;\n\n      for (var i in resources) {\n        var find = false;\n\n        for (var j in resources[i].kpis) {\n          if (resources[i].kpis[j].checked) {\n            find = true;\n            modelId = resources[i].modelId;\n            kpis.push({\n              id: resources[i].kpis[j].id,\n              name: resources[i].kpis[j].name,\n              label: resources[i].kpis[j].label,\n              units: resources[i].kpis[j].unit\n            });\n          }\n        }\n\n        if (find) {\n          nodes.push({\n            modelId: resources[i].modelId,\n            id: resources[i].id,\n            label: resources[i].label\n          });\n        }\n      }\n\n      for (var i in scope.sub_resources) {\n        if (scope.sub_resources[i].checked) {\n          nodes.push({\n            modelId: scope.sub_resources[i].modelId,\n            id: scope.sub_resources[i].id,\n            label: scope.sub_resources[i].label\n          });\n        }\n      }\n\n      applyChart_run({\n        formatStr: scope.timeformat.formatStr,\n        format: scope.timeformat.value,\n        category: scope.category,\n        dataType: scope.dataType,\n        modelId: modelId,\n        timespan: parseInt(scope.timespan),\n        _option_: JSON.parse(JSON.stringify(scope.baseOption)),\n        data: {\n          nodes: nodes,\n          kpis: kpis\n        }\n      });\n    }\n\n    function applyChart_run(event) {\n      var nodeslist = event.data.nodes;\n\n      if (nodeslist) {\n        if (!nodeslist instanceof Array || nodeslist.length == 0) {\n          nodeslist = undefined;\n        }\n      }\n\n      var kpislist = event.data.kpis;\n      var formatStr = event.formatStr;\n      var format = event.format;\n      var category = event.category;\n      var modelId = event.modelId;\n      var timespan = event.timespan;\n      var dataType = event.dataType;\n      var option = event._option_; //var oldSeries = JSON.parse(JSON.stringify(scope.datasource.series[0]));\n\n      var nodes = function (obj) {\n        var rs = [];\n\n        for (var i in obj) {\n          rs.push(obj[i].id);\n        }\n\n        return rs;\n      }(nodeslist);\n\n      var kpis = function (obj) {\n        var rs = [];\n\n        for (var i in obj) {\n          rs.push(obj[i].id);\n        }\n\n        return rs;\n      }(kpislist);\n\n      var findresources = scope.resources.filter(function (elem) {\n        return elem.modelId == modelId;\n      });\n      currentTarget.setNodeKpiList({\n        formatStr: formatStr,\n        category: category,\n        modelId: modelId,\n        nodes: nodes,\n        kpis: kpis,\n        resources: findresources,\n        timespan: timespan\n      });\n      currentTarget.startloading();\n      dm.getOptionData(dataType, category, format, option, nodeslist, kpislist, timespan * 60 * 1000, getOptionData_callback);\n\n      function getOptionData_callback(event) {\n        currentTarget.stoploading();\n        renderDataChanges(event.option);\n      }\n    }\n\n    ;\n\n    function errorMsg(modelShow, dataType) {\n      var ci;\n      var kpi;\n      var text1 = '';\n      var text2 = '';\n\n      if (dataType ? dataType.limit : false) {\n        ci = dataType.limit.ci;\n        kpi = dataType.limit.kpi;\n      }\n\n      modelnum = function (obj) {\n        var inx = 0;\n\n        if (obj) {\n          for (var i in obj.resources) {\n            if (obj.resources[i].checked == true) {\n              inx++;\n            }\n          }\n        }\n\n        return inx;\n      }(modelShow);\n\n      kpinum = function (obj) {\n        var inx = 0;\n\n        if (obj) {\n          for (var i in obj.kpis) {\n            if (obj.kpis[i].checked == true) {\n              inx++;\n            }\n          }\n        }\n\n        return inx;\n      }(modelShow);\n\n      if (modelnum > 0) {\n        if (ci) {\n          text1 = ci == modelnum ? '' : ' [ 此视图需要' + ci + '个设备 ] ';\n        }\n      } else {\n        text1 = ' [ 设备不能为空 ] ';\n      }\n\n      if (kpinum > 0) {\n        if (ci) {\n          text2 = ci == kpinum ? '' : ' [ 此视图需要' + ci + '个指标 ] ';\n        }\n      } else {\n        text2 = ' [ 指标不能为空 ] ';\n      }\n\n      if (text1 != '' && text2 != '') {\n        return text1 + \",\" + text2;\n      } else if (text1 == '' && text2 != '') {\n        return text2;\n      } else if (text1 != '' && text2 == '') {\n        return text1;\n      } else {\n        return '';\n      }\n    }\n\n    function checkSelected(modelShow, dataType) {\n      var ci;\n      var kpi;\n\n      if (dataType ? dataType.limit : false) {\n        ci = dataType.limit.ci;\n        kpi = dataType.limit.kpi;\n      }\n\n      modelnum = function (obj) {\n        var inx = 0;\n\n        if (obj) {\n          for (var i in obj.resources) {\n            if (obj.resources[i].checked == true) {\n              inx++;\n            }\n          }\n        }\n\n        return inx;\n      }(modelShow);\n\n      kpinum = function (obj) {\n        var inx = 0;\n\n        if (obj) {\n          for (var i in obj.kpis) {\n            if (obj.kpis[i].checked == true) {\n              inx++;\n            }\n          }\n        }\n\n        return inx;\n      }(modelShow);\n\n      var ciok;\n      var kpiok;\n\n      if (ci) {\n        if (modelnum == ci) {\n          ciok = true;\n        } else {\n          ciok = false;\n        }\n      } else {\n        ciok = true;\n      }\n\n      if (kpi) {\n        if (kpinum == kpi) {\n          kpiok = true;\n        } else {\n          kpiok = false;\n        }\n      } else {\n        kpiok = true;\n      }\n\n      return !(ciok && kpiok && modelnum > 0 && kpinum > 0);\n    }\n\n    function kpiClick(kpi, onlyDifferentKpi, model) {\n      if (onlyDifferentKpi == true) {\n        if (scope.oldUnit ? scope.oldUnit == kpi.unit : true) {\n          kpi.checked = !kpi.checked;\n          scope.oldUnit = kpi.unit;\n        } else {\n          scope.callbackmsg = \"请选择相同单位数据\";\n          timeout(function () {\n            scope.callbackmsg = undefined;\n          }, 1000);\n        }\n\n        var find = function (data) {\n          for (var i in data) {\n            for (var j in data[i].kpis) {\n              if (data[i].kpis[j].checked) {\n                return data[i];\n              }\n            }\n          }\n\n          return undefined;\n        }(scope.resources);\n\n        if (find) {\n          scope.oldUnit = scope.oldUnit ? scope.oldUnit : kpi.unit;\n          scope.oldNodeId = find.nodeId;\n        } else {\n          scope.oldUnit = undefined;\n          scope.oldNodeId = undefined;\n        }\n\n        applylistView();\n      } else {\n        if (scope.oldUnit ? scope.oldUnit == kpi.unit : true) {\n          kpi.checked = !kpi.checked;\n          scope.oldUnit = kpi.unit;\n        } else {\n          scope.callbackmsg = \"单位不同，原先选择将被重置。\";\n          scope.modelSelect.kpis.each(function (element) {\n            if (kpi != element) {\n              element.checked = false;\n            } else {\n              element.checked = true;\n              scope.oldUnit = element.unit;\n            }\n          });\n          timeout(function () {\n            scope.callbackmsg = undefined;\n          }, 1000);\n        }\n\n        applylistView();\n        nodes = scope.modelSelect.resources.getData().filter(function (elem) {\n          return elem.checked;\n        });\n        var findChecked = scope.modelSelect.kpis.getData().filter(function (elem) {\n          return elem.checked;\n        });\n\n        if (nodes.length > 0 && findChecked.length > 0) {\n          applyChart_run({\n            formatStr: scope.timeformat.formatStr,\n            format: scope.timeformat.value,\n            category: scope.category,\n            dataType: scope.dataType,\n            modelId: scope.modelSelect.id,\n            timespan: parseInt(scope.timespan),\n            _option_: JSON.parse(JSON.stringify(scope.baseOption)),\n            data: {\n              nodes: nodes,\n              kpis: findChecked\n            }\n          });\n        }\n      }\n    }\n\n    function kpiClickByModel(kpi, onlyDifferentKpi, model) {\n      if (onlyDifferentKpi == true) {\n        if (scope.oldUnit ? scope.oldUnit == kpi.unit : true) {\n          kpi.checked = !kpi.checked;\n        } else {\n          scope.callbackmsg = \"请选择相同单位数据\";\n          timeout(function () {\n            scope.callbackmsg = undefined;\n          }, 1000);\n        }\n\n        var find = function (data) {\n          for (var i in data) {\n            for (var j in data[i].kpis) {\n              if (data[i].kpis[j].checked) {\n                return data[i];\n              }\n            }\n          }\n\n          return undefined;\n        }(scope.resources);\n\n        if (find) {\n          scope.oldUnit = scope.oldUnit ? scope.oldUnit : kpi.unit;\n          scope.oldNodeId = find.nodeId;\n        } else {\n          scope.oldUnit = undefined;\n          scope.oldNodeId = undefined;\n        }\n\n        applylistView();\n      } else {\n        /*\n         if(scope.oldUnit == undefined){\n         scope.callbackmsg = \"其它指标只能选择与此单位相同者\"\n         timeout(function(){\n         scope.callbackmsg = undefined;\n         },3000);\n         }\n         */\n        if (scope.oldUnit ? scope.oldUnit == kpi.unit : true) {\n          kpi.checked = !kpi.checked;\n          scope.oldUnit = kpi.unit;\n        } else {\n          scope.oldUnit = kpi.unit;\n          scope.callbackmsg = \"单位不同，已勾选项将被清除。\";\n          timeout(function () {\n            scope.callbackmsg = undefined;\n          }, 1000);\n\n          for (var i in scope.modelSelect.kpis.getData()) {\n            (function (index, element) {\n              if (element.id == kpi.id) {\n                element.checked = true;\n                scope.oldUnit = kpi.unit;\n              } else {\n                element.checked = false;\n              }\n            })(i, scope.modelSelect.kpis.getData()[i]);\n          }\n        }\n\n        applylistView();\n      }\n\n      var findChecked = scope.modelSelect.kpis.getData().filter(function (elem) {\n        return elem.checked;\n      });\n\n      if (findChecked.length > 0) {\n        applyChart_run({\n          formatStr: scope.timeformat.formatStr,\n          format: scope.timeformat.value,\n          category: scope.category,\n          dataType: scope.dataType,\n          modelId: model.id,\n          timespan: parseInt(scope.timespan),\n          _option_: JSON.parse(JSON.stringify(scope.baseOption)),\n          data: {\n            kpis: findChecked\n          }\n        });\n      }\n    }\n    /*\n    function modelClick(model){\n    \tscope.modelShow = model == scope.modelShow ? \"\" : model;\n    \tscope.step = \"NODE\";\n    }\n    */\n\n\n    function modelClick(model) {\n      scope.modelSelect = model;\n      var findKpis = scope.modelSelect.kpis.getData().filter(function (element) {\n        return element.checked;\n      });\n\n      if (findKpis.length > 0) {\n        applyChart_run({\n          formatStr: scope.timeformat.formatStr,\n          format: scope.timeformat.value,\n          category: scope.category,\n          dataType: scope.dataType,\n          modelId: model.id,\n          timespan: parseInt(scope.timespan),\n          _option_: JSON.parse(JSON.stringify(scope.baseOption)),\n          data: {\n            kpis: findKpis\n          }\n        });\n      }\n    }\n\n    function resourceClick(resource) {\n      //scope.resourceSelect = resource;\n      if (resource.checked) {\n        resource.checked = false;\n      } else {\n        resource.checked = true;\n      }\n\n      var nodes = scope.modelSelect.resources.getData().filter(function (elem) {\n        return elem.checked;\n      });\n      var findChecked = scope.modelSelect.kpis.getData().filter(function (elem) {\n        return elem.checked;\n      });\n\n      if (nodes.length > 0 && findChecked.length > 0) {\n        applyChart_run({\n          formatStr: scope.timeformat.formatStr,\n          format: scope.timeformat.value,\n          category: scope.category,\n          dataType: scope.dataType,\n          modelId: scope.modelSelect.id,\n          timespan: parseInt(scope.timespan),\n          _option_: JSON.parse(JSON.stringify(scope.baseOption)),\n          data: {\n            nodes: nodes,\n            kpis: findChecked\n          }\n        });\n      }\n\n      applylistView();\n    }\n\n    function subresourceClick(sub_res) {\n      sub_res.checked = sub_res.checked ? !sub_res.checked : true;\n    }\n\n    function back() {\n      if (scope.dirty) {\n        var cancelDataFn = function cancelDataFn() {\n          scope.msg = undefined;\n        };\n\n        var saveDataFn = function saveDataFn() {\n          scope.msg = {\n            loading: \"数据保存中请稍后\"\n          };\n          timeout(timeoutFn, 1000);\n\n          function timeoutFn() {\n            if (scope.solutionId) {\n              saveSolution();\n            } else if (viewId == undefined) {\n              dm.saveData(dataPass, saveData_callback);\n            } else {\n              dm.updateView(viewId, dataPass, updateView_callback);\n            }\n\n            function saveData_callback(event) {\n              scope.msg = undefined;\n              lm.back();\n            }\n\n            function updateView_callback(event) {\n              scope.msg = undefined;\n              lm.back();\n            }\n          }\n        };\n\n        var dataPass = dom.saveData();\n        dom.disableScroll();\n        scope.msg = {\n          title: \"当前视图尚未保存\",\n          content: \"是否不保存，直接退出！\",\n          btnlist: [{\n            text: \"取消\",\n            fn: cancelDataFn\n          }, {\n            text: \"保存退出\",\n            fn: saveDataFn\n          }, {\n            text: \"直接退出\",\n            fn: function fn() {\n              if (scope.solutionId) {\n                window.location.href = \"../app-ac/index.html#/myView\";\n              } else {\n                lm.back();\n              }\n\n              scope.msg = '';\n            }\n          }]\n        };\n        ;\n      } else {\n        if (scope.solutionId) {\n          window.location.href = \"../app-ac/index.html#/myView\";\n        } else {\n          lm.back();\n        }\n      }\n    }\n\n    function filterByType(item) {\n      if (scope.type) {\n        return item.display.indexOf(scope.type) != -1;\n      } else {\n        return true;\n      }\n    }\n\n    function testClick() {\n      scope.option.title.text = \"asdasd\";\n    }\n\n    function clickSubTitle(subtitle) {\n      scope.subTitle = subtitle.id;\n      scope.content = subtitle.content;\n    }\n\n    function clickMainTitle(mainTitle) {\n      scope.mainTitle = mainTitle.id;\n      scope.subList = mainTitle.sub;\n      scope.subTitle = 0;\n      scope.content = scope.subList[0].content;\n    }\n\n    function optionChanges(newVal, oldVal, scope) {\n      if (currentTarget && newVal) {\n        var tmp = JSON.parse(JSON.stringify(newVal));\n\n        if (tmp.legend) {\n          if (tmp.legend.show == 'false') {\n            delete tmp.legend;\n          }\n        }\n\n        currentTarget.changeOption(tmp, scope.theme, true);\n      }\n    }\n\n    function renderDataTarget(option, target, data) {\n      if (option.legend) {\n        if (option.legend.show == 'false') {\n          delete option.legend;\n        }\n      }\n\n      target.changeOption(option, scope.theme, true, data);\n    }\n\n    function renderDataChanges(option) {\n      if (option.legend) {\n        if (option.legend.show == 'false') {\n          delete option.legend;\n        }\n      }\n\n      currentTarget.changeOption(option, scope.theme, true);\n    }\n\n    function codesourceChanges(newVal, oldVal, scope) {\n      if (currentTarget && newVal) {\n        var tmp = JSON.parse(JSON.stringify(newVal));\n\n        if (tmp.legend) {\n          if (tmp.legend.show == 'false') {\n            delete tmp.legend;\n          }\n        }\n\n        currentTarget.changeOption(tmp, scope.theme, true);\n      }\n    }\n\n    function themeChanges(newVal, oldVal, scope) {\n      if (currentTarget && newVal) {\n        currentTarget.changeTheme(newVal, scope.option);\n      }\n    }\n\n    function renderToolbarIcon(image) {\n      var style = {};\n      style[\"background-image\"] = \"url(images/icons/\" + image + \".svg)\";\n      return style;\n    }\n\n    function renderToolbarIcon_class(image) {\n      var style = {};\n      style[\"background-image\"] = \"url(images/icons/\" + image + \".svg)\";\n      return style;\n    }\n\n    function toolbarClick(toolbar) {\n      scope.toolbarDetail = toolbar;\n    }\n\n    function chartPop_click() {\n      scope.toolbarDetail = '';\n    }\n\n    function toolDetailClick(type, option, dataType) {\n      dom.createChart(type, option, dataType);\n      scope.toolbarDetail = '';\n    }\n  }]);\n  app.controller(\"prevController\", [\"$scope\", \"$rootScope\", \"$route\", function (scope, rootScope, route) {\n    var result = [];\n    var data = JSON.parse(route.current.pathParams.viewData);\n\n    for (var i in data.data) {\n      var row = data.data[i].layout.row;\n      var col = data.data[i].layout.col;\n\n      if (!result[row]) {\n        result[row] = {};\n        result[row].children = [];\n      }\n\n      result[row].children[col] = data.data[i];\n    }\n\n    scope.domData = result;\n    scope.calculatePos = calculatePos;\n\n    function calculatePos(width, wh) {\n      return {\n        width: width + \"%\",\n        height: \"100px\"\n      };\n    }\n  }]);\n});"],"sourceRoot":"/source/"}