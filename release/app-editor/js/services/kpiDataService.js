define(["app"],function(e){"use strict";e.factory("kpiDataService",["serviceProxy",function(o){var e={},n="kpiDataFlexService";return e.getRealTimeKpiData=function(e,i,t,r){var a=["psiot",{isRealTimeData:!0,timePeriod:0,nodeIds:e,kpiCodes:i}];o.get(n,"getKpiValueList",a,t,r)},e.getRealTimeKpiDataWithKpiInfo=function(e,i,t,r){var a=["psiot",{category:"ci",isRealTimeData:!0,timePeriod:0,nodeIds:e,kpiCodes:i,startTime:null,endTime:null,timeRange:"",statisticType:"psiot",condList:[]}];o.get(n,"getKpiHierarchyValueList",a,t,r)},e.getKpiHierarchyValueList=function(e,i,t){o.get(n,"getKpiHierarchyValueList",e,i,t)},e.getChartProperty=function(e,i){for(var t in e.properties.item){var r=e.properties.item[t];if(r.name==i)return r}},e.getKpisInfo=function(e){var i=[],t=[],r=e.dataSource.displayKpiSet.displayKpi;if(jQuery.isArray(r))for(var a in r){var n=r[a];i.push(Number(n.code)),t[n.code]=n.name}else i.push(Number(r.code)),t[r.code]=r.name;return[i,t]},e.getNodesInfo=function(e){var i,t=[];for(var r in e.dataSource.filters.filter){var a=e.dataSource.filters.filter[r];if("ci"==a.type){var n=a.nodeIds.split(",");for(var o in n)t.push(Number(n[o]))}else"time"==a.type&&(i=60*Number(a.timePeriod)*1e3)}return[t,i]},e.saveData=function(e,i,t){var r=e.title,a=(e={title:"title",elements:e.data},[{viewTitle:r,viewName:r,viewType:"designView",content:JSON.stringify(e)}]);o.get("viewFlexService","addView",a,i,t)},e.getviews=function(e,i){o.get("viewFlexService","getAllMyViews",[],e,i)},e.getViewById=function(e,i,t){o.get("viewFlexService","getViewById",[e],i,t)},e.getAllUnits=function(e,i){o.get("unitService","getAllUnits",[],e,i)},e.updateView=function(e,i,t,r){var a=i.title,n=(i={title:"title",elements:i.data},[{viewId:e,originalViewId:0,viewTitle:a,viewName:a,viewType:"designView",content:JSON.stringify(i)}]);o.get("viewFlexService","updateView",n,t,r)},e.getViewById=function(e,i,t){var r=[parseInt(e)];o.get("viewFlexService","getViewById",r,i,t)},e}])});
//# sourceMappingURL=../../../map/app-editor/js/services/kpiDataService.js.map
