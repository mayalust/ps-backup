define(["jquery","jquery-ui","profile","setting","codeMirrorEditor"],function(e,r,i,t,o){var a,g,c,d,s,b={};return b.fn=function(e){var n="";$("#startDatePicker"),$("#endDatePicker");$("[toolbar_id*=toolbar_]").on({mouseenter:function(e){e.stopPropagation(),$(".tooltips").css("opacity",0),$(e.target).parent().parent().find(".tooltips").css("opacity",1)},mouseleave:function(e){e.stopPropagation(),$(".tooltips").css("opacity",0)}}),function(e){for(var r in e)for(var t in e[r].sub)n+="<img src='images/"+e[r].sub[t].src+".png' />";$("#img_preload").html(n)}(e),$("#colorPicker_page").spectrum({color:"#fff",showInput:!0,className:"full-spectrum",showInitial:!0,showPalette:!0,showSelectionPalette:!0,maxPaletteSize:10,preferredFormat:"hex",change:function(e){$("[currentProfile*=true]");var r=e.toHexString();$("#page-setting").attr({value_color:r})},palette:[["rgb(0, 0, 0)","rgb(67, 67, 67)","rgb(102, 102, 102)","rgb(153, 153, 153)","rgb(183, 183, 183)","rgb(204, 204, 204)","rgb(217, 217, 217)","rgb(239, 239, 239)","rgb(243, 243, 243)","rgb(255, 255, 255)"],["rgb(152, 0, 0)","rgb(255, 0, 0)","rgb(255, 153, 0)","rgb(255, 255, 0)","rgb(0, 255, 0)","rgb(0, 255, 255)","rgb(74, 134, 232)","rgb(0, 0, 255)","rgb(153, 0, 255)","rgb(255, 0, 255)"],["rgb(230, 184, 175)","rgb(244, 204, 204)","rgb(252, 229, 205)","rgb(255, 242, 204)","rgb(217, 234, 211)","rgb(208, 224, 227)","rgb(201, 218, 248)","rgb(207, 226, 243)","rgb(217, 210, 233)","rgb(234, 209, 220)","rgb(221, 126, 107)","rgb(234, 153, 153)","rgb(249, 203, 156)","rgb(255, 229, 153)","rgb(182, 215, 168)","rgb(162, 196, 201)","rgb(164, 194, 244)","rgb(159, 197, 232)","rgb(180, 167, 214)","rgb(213, 166, 189)","rgb(204, 65, 37)","rgb(224, 102, 102)","rgb(246, 178, 107)","rgb(255, 217, 102)","rgb(147, 196, 125)","rgb(118, 165, 175)","rgb(109, 158, 235)","rgb(111, 168, 220)","rgb(142, 124, 195)","rgb(194, 123, 160)","rgb(166, 28, 0)","rgb(204, 0, 0)","rgb(230, 145, 56)","rgb(241, 194, 50)","rgb(106, 168, 79)","rgb(69, 129, 142)","rgb(60, 120, 216)","rgb(61, 133, 198)","rgb(103, 78, 167)","rgb(166, 77, 121)","rgb(133, 32, 12)","rgb(153, 0, 0)","rgb(180, 95, 6)","rgb(191, 144, 0)","rgb(56, 118, 29)","rgb(19, 79, 92)","rgb(17, 85, 204)","rgb(11, 83, 148)","rgb(53, 28, 117)","rgb(116, 27, 71)","rgb(91, 15, 0)","rgb(102, 0, 0)","rgb(120, 63, 4)","rgb(127, 96, 0)","rgb(39, 78, 19)","rgb(12, 52, 61)","rgb(28, 69, 135)","rgb(7, 55, 99)","rgb(32, 18, 77)","rgb(76, 17, 48)"]]}),i.createNewProfile(),i.on("editBtn_click",function(e){a(e)}),i.on("resBtn_click",function(e){g(e)}),i.on("codeBtn_click",function(e){c(e)}),i.on("saveImage",function(e,r){d(e,r)}),i.on("resourceChanged",function(e,r){s(e,r)}),o.init(),t.init()},b.on=function(e,r){switch(e){case"optionUpdated":a=r;break;case"resBtn_click":g=r;break;case"codeBtn_click":c=r;break;case"onNodeSelect":r;break;case"saveData":r;case"resourceChanged":s=r;break;case"saveImage":d=r}},b.saveData=function(){var r,t={},n=$("[currentProfile=true]");t=[];var e=i.getElementList(),o=i.getChartTitle();return e.each(function(e){widthPersent=(e.width()-2)/(n.width()-20)*100,widthheightPortion=e.height()/e.width(),null!=e.kpis&&null!=e.nodes||(r="有视图尚未绑定数据"),t.push({option:e.option,modelId:""==e.modelId?void 0:e.modelId,category:e.category,type:e.type,formatStr:e.formatStr,kpis:e.kpis,nodes:e.nodes instanceof Array&&0<e.nodes.length?e.nodes:void 0,theme:e.theme,timespan:parseInt(60*e.timespan*1e3),dataType:e.dataType,width_absolute:e.width(),layout:{width:widthPersent,widthheightPortion:widthheightPortion,row:parseInt($(e).attr("row")),col:parseInt($(e).attr("col"))}})}),{title:o,data:t,errorMsg:r}},b.enableScroll=function(){$("body").css("overflow-y","auto")},b.disableScroll=function(){$("body").css("overflow-y","hidden");$(window).height()},b.renderGraphList=function(e,r,t){i.renderGraphList(e,r,t)},b.createChart=function(e,r,t){i.createChart(e,r,t)},b.disableBodyScroll=function(){return $("body").css("overflow-y","hidden"),b},b.enableBodyScroll=function(){return $("body").css("overflow-y","auto"),b},b.addLoadingIcon=function(){var e=$("#saveBtn").offset().left,r=$("#saveBtn").offset().top,t=$("#saveBtn").clone(),n=$("<div class='bgcover' id='loadingIcon'></div>"),o=$("<span class='lodingIcon'></div>");return o.css({"margin-top":5,display:"inline-block",width:45,height:45,"background-size":"cover","background-image":"url(images/loading_spinner.gif)"}),n.attr("id","tempBg").css({"z-index":9999999990,opacity:0}).animate({opacity:.8},100,function(){}),t.attr("id","tempSvBtn").css({"margin-top":r,"margin-left":e,width:90,height:34,position:"absolute","z-index":9999999999,border:"1px solid #888","background-color":"#444"}).animate({"margin-top":r-20,"margin-left":e+10,width:70,height:70,"background-color":"#000"},200,function(){}),t.html("").append(o),$("body").prepend(t),$("body").prepend(n),b},b.removeLoadingIcon=function(){return $("#tempSvBtn").animate({opacity:0},200,function(){$("#tempSvBtn").remove()}),$("#tempBg").animate({opacity:0},100,function(){$("#tempBg").remove()}),b},b.pagesetting=function(){var e=$("[currentProfile*=true]"),r=e.width()/$(window).width(),t=e.height()/$(window).height(),n=parseInt(100*r),o=parseInt(100*t);$("#pageWidth").slider({range:"min",max:100,value:n,slide:function(e,r){$("[currentProfile*=true]");$("#page-setting").attr({value_width:r.value*$(window).width()/100})}}),$("#pageHeight").slider({range:"min",max:100,value:o,slide:function(e,r){$("[currentProfile*=true]");$("#page-setting").attr({value_height:r.value*$(window).width()/100})}})},b.openImage=function(e){for(var r=window.open(e,"","width=1, height=1, top=5000, left=5000");"complete"!=r.document.readyState&&"complete"!=r.document.readyState;);r.document.execCommand("SaveAs"),r.close()},b.addNewLabel=function(e){i.addNewLabel(e)},b.setFocus=function(){$("[currentProfile=true]").find("#HeaderInput").focus()},b.renderPreview=function(e){i.renderPreview(e)},b});
//# sourceMappingURL=../../../map/app-editor/js/toolkit/dom.js.map
