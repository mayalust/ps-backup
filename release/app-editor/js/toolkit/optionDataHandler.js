define([],function(){return function(e,a,r,i,s,n){var t,l,d,u,p,v,o=i.nodes,f=n,h=i.kpis,c=(e=e,a.series.value),g=a.category,m=[],b=[],N=r,S=JSON.parse(JSON.stringify(s));switch("dimensional"==a.series.model?"time"==g?m=function(e,a){var r=[],i=[],s=[];for(var n in a){var t=!1;if("ci"==e?t=function(e){for(var a in r)if(r[a].nodeId==e)return r[a];return!1}(a[n].nodeId):"kpi"==e&&(t=function(e){for(var a in r)if(r[a].kpiId==e)return r[a];return!1}(a[n].kpiId)),t)for(var l in t.data)a[n].data[l]?t.data[l].push(a[n].data[l].value):t.data[l].push(0);else{var d=[],u=[];for(var l in a[n].data)d.push([a[n].data[l].value]),u.push(O(a[n].data[l].time,N));s.push(u),r.push({nodeId:a[n].nodeId,kpiId:a[n].kpiId,name:a[n].cilabel,data:d}),i.push(a[n].cilabel)}}return{series:r,legend:i,axis:s}}(c,i.data):"ci"==g&&(m=function(e,a){var r=[],i=[],s=[],n=[],t=[];for(var l in a){var d=!1;(d=function(e){for(var a in r)if(r[a].nodeId==e)return{series:r[a],series_a:i[a]};return!1}(a[l].nodeId))?(d.series.value.push({name:a[l].label,value:a[l].value?a[l].value:0}),d.series_a.value.push(a[l].value?a[l].value:0)):(r.push({label:a[l].cilabel,nodeId:a[l].nodeId,kpiId:a[l].kpiId,name:a[l].label,value:[{name:a[l].label,value:a[l].value?a[l].value:0}]}),i.push({label:a[l].cilabel,nodeId:a[l].nodeId,kpiId:a[l].kpiId,name:a[l].label,value:[a[l].value?a[l].value:0]}),s.push(a[l].cilabel))}for(var l in a){var d=!1;(d=function(e){for(var a in t)if(t[a].kpiId==e)return!0;return!1}(a[l].kpiId))||(t.push({kpiId:a[l].kpiId,label:a[l].kpilabel}),n.push(a[l].kpilabel))}return{series:r,legend:s,legend_v:n,series_a:i,polar:t}}(0,i.data)):"linear"==a.series.model?"time"==g?m=function(e){var n=[],t=[],l=[],d=[],u=[];for(var a in e)!function(e){var a,r=[],i=[];for(var s in e.data)(a=e.data[s])&&(r.push(a.value),i.push(O(a.time,N)));r.length&&(u.push(i),1==o.length?(n.push({name:e.label,data:r}),t.push({name:e.label,data:r}),l.push(e.label),d.push(e.label)):1==h.length?(n.push({name:e.cilabel,data:r}),t.push({name:e.cilabel,data:r}),l.push(e.cilabel),d.push(e.cilabel)):(n.push({name:e.label,data:r}),t.push({name:e.label,data:r}),l.push(e.label),d.push(e.label)))}(e[a]);return{series:n,series_v:t,legend:l,legend_v:d,axis:u,unit:e[0]?J(e[0].unit):""}}(i.data):"ci"==g&&(m=function(e){var a=[],r=[],i=[];for(var s in i[0]=[],a[0]={},0<e.length&&(a[0].name=e[0].cilabel),a[0].data=[],e)1==o.length?(a[0].data.push({name:e[s].kpilabel,kpiname:e[s].kpilabel,value:e[s].value?e[s].value:0}),r.push(e[s].kpilabel),i[0].push(e[s].kpilabel)):1==h.length?(a[0].data.push({name:e[s].cilabel,kpiname:e[s].cilabel,value:e[s].value?e[s].value:0}),r.push(e[s].cilabel),i[0].push(e[s].cilabel)):(a[0].data.push({name:e[s].label,kpiname:e[s].kpilabel,value:e[s].value?e[s].value:0}),r.push(e[s].label),i[0].push(e[s].label));return{series:a,legend:r,axis:i}}(i.data)):"polar"==a.series.model&&(m=function(e,a){var r=[],i=[],s=[];for(var n in a){var t=!1;(t=function(e){for(var a in r[0])if(r[0][a].nodeId==e)return r[0][a];return!1}(a[n].nodeId))?t.data.push(a[n].value?a[n].value:0):(r[0]=r[0]?r[0]:[],r[0].push({label:a[n].cilabel,nodeId:a[n].nodeId,kpiId:a[n].kpiId,name:a[n].cilabel,data:[a[n].value?a[n].value:0]}),i.push(a[n].cilabel))}for(var n in a){var t=!1;(t=function(e){for(var a in s)if(s[a].kpiId==e)return!0;return!1}(a[n].kpiId))||s.push({kpiId:a[n].kpiId,label:a[n].kpilabel})}return{series:r,legend:i,polar:s}}(0,i.data)),e){case"line":(function(e){var a=[],r=e.series_v,i=e.unit,s=e.legend_v,n=e.axis;for(var t in r){var l=JSON.parse(JSON.stringify(S.series[0]));l.data=r[t].data,l.name=r[t].name,a.push(l)}this.series=a,this.legend.data=s,this.xAxis[0].data=n[0],this.yAxis[0].axisLabel="Amount"!=i&&null!=i?{formatter:"{value} "+i}:{formatter:"{value}"}}).apply(S,[m]);break;case"line_2d":(function(e){var a=e.series;for(var r in a)this.series[r].data=a[r].data;this.legend.data=b}).apply(S,[m]);break;case"line_2axis":t=m,l=JSON.parse(JSON.stringify(S)),d=t.series_v,u=t.legend_v,p=t.axis,(v=JSON.parse(JSON.stringify(l))).series[0].data=d[0].data,v.series[0].name=d[0].name,v.series[1].data=function(){for(var e=d[1].data,a=e.length;a--;)e[a]*=-1;return e}(),v.series[1].name=d[1].name,v.legend.data=u,v.xAxis[0].data=p[0],v.yAxis[0].max=100,v.yAxis[0].name=u[0],delete v.yAxis[1].max,v.yAxis[1].name=u[1],v.yAxis[1].axisLabel={formatter:function(e){return-e}},S=v;break;case"line_log":(function(e){var a=JSON.parse(JSON.stringify(this));this.series=[];var r=e.series_v,i=(J(e.unit),e.legend_v),s=e.axis;for(var n in r){var t=JSON.parse(JSON.stringify(a.series[0]));t.data=r[n].data,t.name=r[n].name,this.series.push(t)}this.legend.data=i,this.xAxis[0].data=s[0]}).apply(S,[m]);break;case"bar":S=function(e,a){var r=JSON.parse(JSON.stringify(a));r.series=[];var i=e.series,s=e.legend,n=e.axis;for(var t in i){var l=JSON.parse(JSON.stringify(a.series[0]));l.data=i[t].data,l.name=i[t].name,r.series.push(l)}return r.legend.data=s,r.xAxis[0].data=n[0],r}(m,JSON.parse(JSON.stringify(S)));break;case"pie":S=function(e,a){var r=JSON.parse(JSON.stringify(a));r.series=[];var i=e.series,s=e.legend;for(var n in e.axis,i){var t=JSON.parse(JSON.stringify(a.series[0]));t.data=i[n].data,t.name=i[n].name,r.series.push(t)}return r.legend.data=s,delete r.xAxis,r}(m,JSON.parse(JSON.stringify(S)));break;case"pie_2chart":S=function(e,a){var r=JSON.parse(JSON.stringify(a)),i=e.series;for(var s in r.legend.data=[],i)for(var n in r.series[s].data=i[s].value,r.series[s].itemStyle=0==s?{normal:{label:{position:"inner",formatter:function(e){return(e.percent-0).toFixed(0)+"%"}},labelLine:{show:!1}}}:{normal:{label:{formatter:function(e){return(e.percent-0).toFixed(0)+"%"}},labelLine:{show:!1}}},i[s].value)r.legend.data.push(i[s].value[n].name);return delete r.xAxis,r}(m,JSON.parse(JSON.stringify(S)));break;case"gauge":S=function(e,a){var r=JSON.parse(JSON.stringify(a)),i=e.series;for(var s in e.legend,e.axis,r.series)i[0].data[s]&&(r.series[0].data[s]={name:i[0].data[s].kpiname,value:i[0].data[s].value});return delete r.legend,delete r.xAxis,r}(m,JSON.parse(JSON.stringify(S)));break;case"scatter":S=function(e,a){var r=JSON.parse(JSON.stringify(a));r.series=[];var i=e.series,s=e.legend;for(var n in e.axis,i){var t=JSON.parse(JSON.stringify(a.series[0]));t.data=i[n].data,t.name=i[n].name,r.series.push(t)}return r.legend.data=s,r}(m,JSON.parse(JSON.stringify(S)));break;case"k":S=function(e,a){var r=JSON.parse(JSON.stringify(a));r.series=[];var i=e.series,s=e.legend,n=e.axis;for(var t in i){var l=JSON.parse(JSON.stringify(a.series[0]));l.data=i[t].data,l.name=i[t].name,r.series.push(l)}return r.legend.data=s,r.xAxis[0].data=n[0],r}(m,JSON.parse(JSON.stringify(S)));break;case"radar":S=function(e,a){var r=JSON.parse(JSON.stringify(a));r.series=[],r.series[0]={},r.series[0].type="radar";var i=e.series,s=e.legend,n=e.polar,t=[];for(var l in i[0]){var d=JSON.parse(JSON.stringify(a.series[0].data[0]));d.value=i[0][l].data,d.name=i[0][l].name,t.push(d)}for(var u in r.polar=[],r.polar[0]={},r.polar[0].indicator=[],n)r.polar[0].indicator.push({text:n[u].label,max:100});return r.series[0].data=t,r.legend.data=s,delete r.xAxis,r}(m,JSON.parse(JSON.stringify(S)));break;case"chord":S=function(e,a){var r=JSON.parse(JSON.stringify(a)),i=e.series_a,s=e.legend;for(var n in r.series[0].data=[],r.series[0].matrix=[],i)r.series[0].data.push({name:i[n].label}),r.series[0].matrix.push(i[n].value);return r.legend.data=s,delete r.xAxis,r}(m,JSON.parse(JSON.stringify(S)));break;case"funnel":S=function(e,a){var r=JSON.parse(JSON.stringify(a)),i=e.series,s=e.legend_v;for(var n in i){for(var t in r.series[n].data=[],i[n].value)r.series[n].data.push({name:s[t],value:i[n].value[t]});r.series[n].name=i[n].name}return r.legend.data=s,r}(m,JSON.parse(JSON.stringify(S)));break;case"treemap":S=function(e,a){var r=JSON.parse(JSON.stringify(a));r.series=[];var i=e.series;for(var s in e.legend,e.axis,i){var n=JSON.parse(JSON.stringify(a.series[0])),t=[];for(var l in i[s].data)t.push({name:i[s].data[l].kpiname,value:i[s].data[l].value});n.data=t,n.name=i[s].name,r.series.push(n)}return delete r.legend,delete r.xAxis,r}(m,JSON.parse(JSON.stringify(S)))}return{option:S};function J(e){for(var a in f)if(e.toUpperCase()==f[a].unitCode.toUpperCase())return f[a].unitName;return""}function O(e,a){var r="",i=e.split(" ")[0],s=e.split(" ")[1],n=i.split("/")[0],t=i.split("/")[1],l=i.split("/")[2],d=s.split(":")[0],u=s.split(":")[1],p=s.split(":")[2]?s.split(":")[2]:"00",v=a.split("-")[0].split("/"),o=a.split("-")[1].split(":");for(var f in v)switch(v[f]){case"yy":r+=n+"年";break;case"mm":r+=t+"月";break;case"dd":r+=l+"日"}for(var f in 1<v.length&&(r+=","),o){switch(o[f]){case"hh":r+=9<d?d:"0"+d;break;case"mm":r+=9<u?u:"0"+u;break;case"ss":r+=9<p?p:"0"+p}f<o.length-1&&(r+=":")}return r}}});
//# sourceMappingURL=../../../map/app-editor/js/toolkit/optionDataHandler.js.map
