define(["directives/directives","datatables.net","datatables.net-bs"],function(i,t){"use strict";i.initDirective("userGroupTable",["$timeout","$compile",function(t,s){return{restrict:"A",controller:["$scope","$element","$attrs",function(l,t,e){var a,n=t;l.$on(Event.USERGROUPINIT,function(t,c){a&&a.destroy(),!1,a=n.DataTable({dom:'<"row"<"col-sm-6"<"special-btn">><"col-sm-6"f>><"row"<"clo-sm-12">>t<"row"<"col-sm-2"i><"col-sm-2"l><"col-sm-8"p>>',language:i.datatable.language,data:c.data,order:[[0,"desc"]],columns:[{title:"用户名称",data:"userName"},{title:"手机/邮箱",data:"userEmail"},{title:"办公电话",data:"officePhone"},{title:"操作",orderable:!1,data:"option"}],columnDefs:[{targets:0,data:"userName",render:function(t,e,n){if(2!=n.isEdit||"display"!=e)return t;for(var a='<select id="userDomainName" name="userName" class="combobox form-control input-sm"><option value="">请选择用户</option>',s=c.data,i=l.enterpriseUser,o=0;o<i.length;o++){for(var r=-1,d=0;d<s.length;++d)s[d].userID==i[o].userID&&(r=d);-1==r&&(a+='<option value="'+i[o].userID+'">'+i[o].userName+"</option>")}return a+="</select>"}},{targets:3,data:"option",render:function(t,e,n){var a="<div class='btn-group btn-group-sm'>";return 2==n.isEdit?(a+="<a id='save-btn'  class='btn btn-default btn-sm' ><i class='fa fa-save hidden-lg hidden-md hidden-sm '></i><span class='hidden-xs'> 保存</span></a>",a+="<a id='cancel-btn' class='btn btn-default btn-sm' ><i class='fa fa-times  hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 取消</span></a>"):a+="<a id='del-btn' class='btn btn-default btn-sm' ><i class='fa fa-minus hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 移出</span></a>",a+="</div>"}}]})}),n.on("init.dt",function(){var t=$(".special-btn").parent();t.html('<a ng-click="addGroupUser()"  ng-disabled="!selectedGroup" class="btn btn-default btn-sm"><i class="fa fa-plus"></i><span class="hidden-xs"> 添加用户组用户</span></a>'),s(t)(l)}),n.on("click","td",function(t){t.preventDefault();var e=$(this).closest("tr"),n=a.row(e).data();if(n){if(4==$(this).context.cellIndex&&0==n.isEdit)return;n.isEdit}}),n.on("click","#save-btn",function(t){t.stopPropagation();$(this).closest("tr"),a.row(".shown");var e=$("#userDomainName").val();l.doAction("saveUser",e)}),n.on("click","#cancel-btn",function(t){t.stopPropagation(),!1;a.row(".shown");l.doAction("cancel")}),n.on("click","#del-btn",function(t){t.preventDefault();var e=$(this).closest("tr"),n=a.row(e);l.doAction("removeUser",n.data())}),n.on("click","#changeDomain-btn",function(t){if(t.preventDefault(),!!1){!0;var e=$(this).closest("tr");a.row(e).data().isEdit=1}}),n.on("click","#removeDomain-btn",function(t){!1;var e=$(this).closest("tr"),n=a.row(e);a.row(".shown");l.doAction("removeDomain",n.data())})}]}}])});
//# sourceMappingURL=../../../map/app-oc/js/directives/usergroup-dom.js.map
