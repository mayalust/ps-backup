define(["directives/directives","datatables.buttons.html5","bootstrap-daterangepicker","jszip"],function(t,e,a,r){"use strict";t.initDirective("inspectionRecordsTable",["$timeout","$compile","$filter","growl",function(t,i,d,e){return{restrict:"A",controller:["$scope","$element","$attrs",function(a,t,e){var o,n=t;a.$on(Event.INSPECTIONRECORDS,function(t,e){o&&o.destroy(),o=n.DataTable({dom:e.data&&0<e.data.length?$.ProudSmart.datatable.footerdom:"",language:$.ProudSmart.datatable.language,data:e.option[0],order:[[0,"asc"]],columns:[{data:"teamName",title:"巡检班组"},{data:"userName",title:"巡检人"},{data:"inspectionDate",title:"巡检日期"},{data:"deviceName",title:"设备名称"},{data:"deviceStatus",title:"设备状态"},{data:"inspectionContext",title:"巡检内容"},{data:"imageUrl",title:"图片"}],columnDefs:[{targets:2,data:"inspectionDate",render:function(t,e,a){return d("date")(t,"yyyy-MM-dd HH:mm:ss")}}]}),n.on("init.dt",function(){var t=$(".special-btn").parent();i(t)(a)}),n.on("click","td",function(t){t.preventDefault();var e=$(this).closest("tr"),a=o.row(e);a.data()&&(a.child.isShown()?(a.child.hide(),e.removeClass("shown")):a.child.show())})})}]}}]),t.initDirective("inspectionStandardTable",["$timeout","$compile","$filter","growl",function(t,n,e,a){return{restrict:"A",controller:["$scope","$element","$attrs",function(d,t,e){var o,a=t;d.$on(Event.INSPECTIONSTANDARD,function(t,e){o&&o.destroy(),o=a.DataTable({dom:e.option[0]&&0<e.option[0].length?$.ProudSmart.datatable.footerdom:"",language:$.ProudSmart.datatable.language,data:e.option[0],order:[[0,"asc"]],columns:[{data:"modelId",title:"设备模板"},{data:"spotCheckCategory",title:"维保类型"},{data:"item",title:"项目名称",visible:d.baseConfig.projectConfig.display},{data:"serialNum",title:"序号"},{data:"spotCheckMethod",title:"方法"},{data:"spotCheckTool",title:"工具"},$.ProudSmart.datatable.optionCol2],columnDefs:[{targets:0,data:"modelId",render:function(t,e,a){var o="",n=d.allModels;for(var i in n)if(n[i].id==t){o=n[i].label;break}return o}},{targets:6,data:"option",render:function(t,e,a){var o="<div class='btn-group btn-group-sm'>";return d.menuitems.A02_S49&&(o+="<button id='update-btn'   class='btn btn-primary' ><i class='fa fa-edit hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 编辑</span></button>"),d.menuitems.A03_S49&&(o+="<button id='delete-btn'   class='btn btn-default' ><i class='fa fa-trash hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 删除</span></button>"),o}}],rowCallback:function(t,e,a){n(t)(d)}})}),a.on("click","td",function(t){var e=$(this).closest("tr");o.row(e).data(),$(this).text()}),a.on("click","#update-btn",function(t){t.stopPropagation(),t.preventDefault();var e=$(this).closest("tr"),a=o.row(e).data();d.updateParam={item:a.item,standardContext:a.standardContext,spotCheckMethod:a.spotCheckMethod,spotCheckTool:a.spotCheckTool,spotCheckCategory:a.spotCheckCategory,position:a.position,modelId:a.modelId,serialNum:a.serialNum,id:a.id,domainPath:a.damainPath},d.addInspection(a)}),a.on("click","#delete-btn",function(t){t.stopPropagation(),t.preventDefault();var e=$(this).closest("tr"),a=o.row(e);d.doAction("delete",a.data())}),a.on("click","#save-btn",function(t){t.preventDefault();var e=$(this).closest("tr"),a=o.row(e);e.removeClass("shown"),d.doAction("save-btn",a.data())}),a.on("click","#cancel-btn",function(t){t.preventDefault();var e=$(this).closest("tr"),a=o.row(e);a.data();e.css("display","none"),d.doAction("cancel-btn",a.data())})}]}}]),t.initDirective("deviceDataTable",["$timeout","$compile","$filter","growl",function(t,e,i,d){return{restrict:"A",controller:["$scope","$element","$attrs",function(o,t,e){var n,a=t;window.JSZip=r,o.$on(Event.DEVICEDATAINIT,function(t,e){n&&(n.destroy(),a.empty()),n=a.DataTable({dom:e.option[0]&&0<e.option[0].length?'<"row"<"col-sm-6 margin-bottom-10">>'+$.ProudSmart.datatable.footerdom:"",columnDefs:[{targets:3,data:"arisingTime",render:function(t,e,a){return i("date")(t,"yyyy-MM-dd HH:mm:ss")}}],language:$.ProudSmart.datatable.language,data:e.option[0],order:[[3,"desc"]],columns:[{data:"deviceName",title:"名称"},{data:"instance",title:"实例"},{data:"kpiName",title:"测点名称"},{data:"arisingTime",title:"上报时间"},{data:"kpiValue",orderable:!1,title:"指标值"}]}),e.option[0]&&0<e.option[0].length&&(new $.fn.dataTable.Buttons(n,{buttons:[{extend:"excel",title:o.selectedItem.modelId?o.rootModelDic[o.selectedItem.modelId].label:"查询结果",text:'<i class="fa fa-download"></i><span class="hidden-xs"> 导出查询结果</span>'}]}),n.buttons().container().appendTo(".dataTables_wrapper .col-sm-6 ")),a.on("click","td",function(t){var e=$(this).closest("tr");n.row(e).data(),$(this).text()}),a.on("click","#cancel-btn",function(t){t.preventDefault();var e=$(this).closest("tr"),a=n.row(e);a.data();e.css("display","none"),o.doAction("cancel-btn",a.data())}),$(".buttons-excel").on("click",function(t){d.info("数据正在导出中，请稍后……",{})})})}]}}])});
//# sourceMappingURL=../../../map/app-oc/js/directives/inspection-dom.js.map
