define(["directives/directives","datatables.net","datatables.net-bs"],function(c,t){"use strict";c.initDirective("team2userTable",function(t,s){return{restrict:"A",controller:["$scope","$element","$attrs",function(r,t,a){var e,n=t;r.$on(Event.TEAM2USERINIT,function(t,l){e&&e.destroy(),!1,e=n.DataTable({dom:'<"row"<"col-sm-6"<"special-btn">><"col-sm-6"f>><"row"<"clo-sm-12">>t<"row"<"col-sm-2"i><"col-sm-2"l><"col-sm-8"p>>',language:c.datatable.language,data:l.option[0],order:[[4,"asc"]],columns:[{title:"用户名称",data:"userName"},{title:"手机/邮箱",data:"userEmail"},{title:"办公电话",data:"officePhone"},{title:"操作",orderable:!1,data:"option"},{title:"",data:"userID",visible:!1}],columnDefs:[{targets:0,data:"userName",render:function(t,a,n){if(2!=n.isEdit||"display"!=a)return t;for(var e='<select id="userDomainName" name="userName" class="combobox form-control"><option value="">请选择用户</option>',s=l.option[0],i=r.enterpriseUser,o=0;o<i.length;o++){for(var c=-1,d=0;d<s.length;++d)s[d].userID==i[o].userID&&(c=d);-1==c&&(e+='<option value="'+i[o].userID+'">'+i[o].userName+"</option>")}return e+="</select>"}},{targets:3,data:"option",render:function(t,a,n){var e="<div class='input-group'>";return 2==n.isEdit?(e+="<a id='save-btn'  class='btn btn-default btn-sm' ><i class='fa fa-save hidden-lg hidden-md hidden-sm '></i><span class='hidden-xs'> 保存</span></a>",e+="<a id='cancel-btn' class='btn btn-default btn-sm' ><i class='fa fa-times  hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 取消</span></a>"):e+="<a id='del-btn' class='btn btn-default btn-sm' ><i class='fa fa-minus hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 移出</span></a>",e+="</div>"}}]})}),n.on("init.dt",function(){var t=$(".special-btn").parent();t.html('<a ng-click="addGroupUser()"  ng-disabled="!selectedGroup" class="btn btn-default btn-sm"><i class="fa fa-plus"></i><span class="hidden-xs"> 添加班组用户</span></a>'),s(t)(r)}),n.on("click","td",function(t){t.preventDefault();var a=$(this).closest("tr"),n=e.row(a).data();if(n){if(4==$(this).context.cellIndex&&0==n.isEdit)return;n.isEdit}}),n.on("click","#save-btn",function(t){t.stopPropagation();$(this).closest("tr"),e.row(".shown");var a=$("#userDomainName").val();r.doActions("saveTeam",a)}),n.on("click","#cancel-btn",function(t){t.stopPropagation(),!1;e.row(".shown");r.doActions("cancel")}),n.on("click","#del-btn",function(t){t.preventDefault();var a=$(this).closest("tr"),n=e.row(a);r.doActions("removeUser",n.data())}),n.on("click","#changeDomain-btn",function(t){if(t.preventDefault(),!!1){!0;var a=$(this).closest("tr");e.row(a).data().isEdit=1}}),n.on("click","#removeDomain-btn",function(t){!1;var a=$(this).closest("tr"),n=e.row(a);e.row(".shown");r.doActions("removeDomain",n.data())})}]}}),c.initDirective("team2deviceTable",function(t,i,o){return{restrict:"A",controller:["$scope","$element","$attrs",function(e,t,a){var s,n=t;e.$on(Event.TEAM2DEVICEINIT,function(t,a){s&&s.destroy(),!1,s=n.DataTable({dom:'<"row"<"col-sm-6"<"special-btn">><"col-sm-6"f>><"row"<"clo-sm-12">>t<"row"<"col-sm-2"i><"col-sm-2"l><"col-sm-8"p>>',language:c.datatable.language,data:a.data[0],order:[[0,"desc"]],columns:[{data:"label",title:"名称"},{data:"createTime",title:"上线时间"},{data:"option",orderable:!1,title:"操作"}],columnDefs:[{targets:1,data:"createTime",render:function(t,a,n){return o("date")(t,"yyyy-MM-dd HH:mm:ss")}},{targets:0,data:"label",render:function(t,a,n){return 2==n.isEdit&&"display"==a?"<input maxlength='20' style='width:100%' class='form-control input-sm' type='text' value='"+escape(t)+"'>":escape(t)}},{targets:2,data:"option",render:function(t,a,n){var e="<div class='input-group'>";return 2==n.isEdit?(e+="<a id='save-btn'  class='btn btn-default btn-sm' ><i class='fa fa-save hidden-lg hidden-md hidden-sm '></i><span class='hidden-xs'> 保存</span></a>",e+="<a id='cancel-btn' class='btn btn-default btn-sm' ><i class='fa fa-times  hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 取消</span></a>"):e+="<a id='del-btn' class='btn btn-default btn-sm' ><i class='fa fa-minus hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 移出</span></a>",e+="</div>"}}]})}),n.on("init.dt",function(){var t=$(".special-btn").parent();t.html('<a ng-click="addDevices()"  ng-disabled="!selectedGroup" class="btn btn-default btn-sm"><i class="fa fa-plus"></i><span class="hidden-xs"> 添加设备</span></a>'),i(t)(e)}),n.on("click","td",function(t){t.preventDefault();var a=$(this).closest("tr");s.row(a).data()}),n.on("click","#save-btn",function(t){t.stopPropagation();$(this).closest("tr"),s.row(".shown");var a=$("#userDomainName").val();e.doAction("saveTeam",a)}),n.on("click","#cancel-btn",function(t){t.stopPropagation(),!1;s.row(".shown");e.doAction("cancel")}),n.on("click","#del-btn",function(t){t.preventDefault();var a=$(this).closest("tr"),n=s.row(a);e.doAction("removeDevice",n.data())}),n.on("click","#changeDomain-btn",function(t){if(t.preventDefault(),!!1){!0;var a=$(this).closest("tr");s.row(a).data().isEdit=1}}),n.on("click","#removeDomain-btn",function(t){!1;var a=$(this).closest("tr"),n=s.row(a);s.row(".shown");e.doAction("removeDomain",n.data())})}]}})});
//# sourceMappingURL=../../../map/app-oc/js/directives/teamgroup-dom.js.map
