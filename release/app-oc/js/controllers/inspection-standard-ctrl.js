define(["controllers/controllers","bootstrap-dialog"],function(e,h){"use strict";e.initController("inspectionStandardCtrl",["$scope","ngDialog","solutionUIService","userInitService","resourceUIService","$location","$routeParams","$timeout","maintenanceUIService","userLoginUIService","Info","growl","userEnterpriseService",function(i,t,e,o,n,a,d,s,c,r,l,p,u){var m=[];function C(){i.inspectStandard={position:"",item:"",standardContext:"",spotCheckMethod:"",spotCheckTool:"",serialNum:"",spotCheckCategory:"",modelId:null}}function I(e){c.getInspectionItemsByCondition(e,function(e){0==e.code&&(m=e.data,s(function(){i.$broadcast(Event.INSPECTIONSTANDARD,{option:[m]})}))})}i.ifAddInspection=!1,i.routePathNodes={},i.InsStandardItem={},i.queryDitem={},i.loaderValue="",i.goSearch=function(){var e={};0<i.queryDitem.state?e[i.queryDitem.attributeName]=i.loaderValue:modelId?e.id=modelId:e.spotCheckCategory=i.loaderValue,I(e)},i.addInspection=function(e){0==e?C():i.inspectStandard=e,i.ifAddInspection=!0,t.open({template:"../partials/dialogue/add_inspection.html",scope:i,className:"ngdialog-theme-plain"})},i.cancelInspection=function(){i.ifAddInspection=!1,p.info("取消添加巡检标准",{})},i.saveInspection=function(){var e={position:i.inspectStandard.position,item:i.inspectStandard.item,standardContext:i.inspectStandard.standardContext,spotCheckMethod:i.inspectStandard.spotCheckMethod,spotCheckTool:i.inspectStandard.spotCheckTool,spotCheckCategory:i.inspectStandard.spotCheckCategory,serialNum:i.inspectStandard.serialNum,modelId:i.inspectStandard.modelId};0<i.inspectStandard.id?c.updateInspectionItem(i.inspectStandard,function(e){0==e.code&&(i.closeDialog(),p.success("维保标准修改成功",{}),I({}))}):c.addInspectionItem(e,function(e){0==e.code&&(i.closeDialog(),i.InsStandardItem=e.data,p.success("添加维保标准成功",{}),i.ifAddInspection=!1,I({}))})};i.doAction=function(e,t){if("update"==e)i.selected={id:t.id,domainPath:t.domainPath};else if("save-btn"==e){var o={id:i.selected.id,item:i.updateParam.item,standardContext:i.updateParam.standardContext,spotCheckMethod:i.updateParam.spotCheckMethod,spotCheckTool:i.updateParam.spotCheckTool,spotCheckCategory:i.updateParam.spotCheckCategory,position:i.updateParam.position,modelId:i.updateParam.modelId,domainPath:i.selected.domainPath},n=(d=null,(a=o).item&&""!=a.item?a.modelId&&""!=a.modelId?a.standardContext&&""!=a.standardContext?a.spotCheckMethod&&""!=a.spotCheckMethod?a.spotCheckTool&&""!=a.spotCheckTool?a.spotCheckCategory&&""!=a.spotCheckCategory?a.position&&""!=a.position||(d="点检部位不能为空"):d="点检类别不能为空":d="点检工具不能为空":d="点检方法不能为空":d="巡检内容不能为空":d="设备模板不能为空":d="巡检项目名称不能为空",d);if(null!=n)return void p.warning(n,{});c.updateInspectionItem(o,function(e){0==e.code&&(p.success("维保标准修改成功",{}),I({}))})}else"cancel-btn"==e?(p.info("取消修改维保标准",{}),i.ifAddInspection=!1):"delete"==e&&h.show({title:"提示",closable:!1,message:"确认删除 "+t.item+" 吗？",buttons:[{label:"确定",cssClass:"btn-success",action:function(e){c.deleteInspectionItemById(t.id,function(e){0==e.code&&(p.success("成功删除维保标准",{}),I({}))}),e.close()}},{label:"取消",action:function(e){e.close()}}]});var a,d};n.getModels(function(e){0==e.code&&(i.allModels=e.data)}),I({}),C()}])});
//# sourceMappingURL=../../../map/app-oc/js/controllers/inspection-standard-ctrl.js.map
