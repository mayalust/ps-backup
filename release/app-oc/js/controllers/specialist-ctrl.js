define(["controllers/controllers","Array"],function(e){"use strict";e.initController("specialistCtrl",["$scope","$q","$rootScope","$location","$routeParams","$timeout","kqiManagerUIService","userRoleUIService","resourceUIService","userLoginUIService","Info","growl","userEnterpriseService","viewFlexService","userDomainService","$window","freeboardservice","dialogue","ngDialog","specialListService",function(c,e,t,o,i,n,l,r,a,d,u,s,p,f,v,M,y,m,T,x){c.addNewClick=function(){o.path("specialist/input/0")},c.expertModelType=i.id;c.expertModelTypes=x(function(){o.path("specialist/"+this.id)}),c.filterExpertType=function(t){return 1==t.expertModelType?!c.kqiModels.some(function(e){return e.originalId==t.id})&&t.expertModelType==c.expertModelType:t.expertModelType==c.expertModelType};var $=function(e,t){l.saveKqiModel(e,function(e){0==e.code&&t(e.data)})};c.publicModel=function(e){e.status=10,$(e,function(e){s.success("专家模型发布成功!!")})},c.editModel=function(e){o.path("specialist/input/"+e.id)},c.applyModel=function(o){var e,t;e=o.id,t=function(e){var t=o.$clone();delete t.$$hashKey,t=t.$extension(e),o.status=10,e.expertModelType=0,c.kqiModels.push(t),s.success("已经成功应用模型!!")},l.applyExpertDataModel(e,function(e){0==e.code&&t(e.data)})},c.removeModel=function(o){var e,t;e=o.id,t=function(e){"0"==e.code&&c.kqiModels.$remove(function(e,t){return t==o})},l.deleteKqiModel(e,function(e){0==e.code&&t(e)})},function r(){var t;t=function(n){var t;t=function(e){var t=[];for(var o in e)e[o].expertModelType=0;var i=n.filter(function(t){return!e.some(function(e){return t.id==e.id})});for(var o in i)i[o].expertModelType=1;0<(t=e.concat(i)).length?c.kqiModels=t.map(function(t){try{t.content=JSON.parse(t.viewContent)}catch(e){t.content=null}finally{return t}}).sort(function(e,t){var o=e.modifyTime?new Date(e.modifyTime).getTime():0;return(t.modifyTime?new Date(t.modifyTime).getTime():0)-o}):u.get("../localdb/specialist.json",function(e){$$.sloop.call(e,function(e,t){$(e,function(e){t()})},function(){r()})})},l.getExpertDataModels(function(e){0==e.code&&t(e.data)})},l.getAllExpertDataModels(function(e){0==e.code&&t(e.data)})}()}])});
//# sourceMappingURL=../../../map/app-oc/js/controllers/specialist-ctrl.js.map
