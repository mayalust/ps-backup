define(["controllers/controllers","Array"],function(e){"use strict";e.initController("viewmanageCtrl",["$scope","$rootScope","$location","$routeParams","$timeout","userLoginUIService","Info","growl","userEnterpriseService","viewFlexService","$window","freeboardservice","freeboardBaseService","dialogue",function(o,i,e,t,c,n,r,a,d,l,u,s,f,v){var w=decodeURIComponent(t.viewId),g=/^\{.*\}$/.test(w);function p(e){this.$clone(e)}o.instance={},p.prototype.click=function(){w=this.viewId,y()},o.addDesignView=function(){u.location.href="../app-freeboard/index.html#/editor/view/editor"};var S=function(n){l.getManagedViewsByTypeAndRole("designView",function(e){if(e.code&&(i.designViews=e.data.map(function(e){return new p(e.$clone())}),o.currentSelect=i.designViews.find(n),o.currentSelect||0<i.designViews.length&&(o.currentSelect=i.designViews[0]),o.currentSelect)){var t=o.currentSelect.viewId;l.getViewById(t,function(e){var t,n,i=function(){c(function(){o.editData={layout:{}},o.instance.setMode(!0),o.instance.renderLayout(o.editData,null,o)})};if(0==e.code){var r=e.$attr("data/content");if(r){var a=JSON.parse(r);n={layout:(t=a).data?t.data:t.layout,setting:t.setting},delete t.data,o.editData=new s.replaceCiKpi(n,function(){c(function(){o.instance.setMode(!0),o.instance.renderLayout(o.editData,null,o)})})}else i()}else i()})}})},y=function(){S(function(e){return e.viewId==w})};g?function(){var e=JSON.parse(w);o.mainlabel=e.label,o.hideNaviBar=!0;var t=e.value;S(function(e){return e.viewTitle==t})}():y()}])});
//# sourceMappingURL=../../../map/app-oc/js/controllers/view-management-ctrl.js.map
