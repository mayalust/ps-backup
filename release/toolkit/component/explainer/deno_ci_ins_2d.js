define(["simulate"],function(n){return function(n,a,v){var e=a.Info,c=a.nodesDes,d=a.kpisDes;a.instance,a.simulate;a.dictionaryService;e.get("../localdb/simulate.json",function(){var s=[],l=[];!function(e){var n,a=[],o=[],f=[];for(var i in e)n=e[i],-1==a.indexOf(n.instance)&&a.push(n.instance);a=a.sort();var t=function(v){var n=function(l){var n=function(a){var e,n;if(a.instance&&(e=a.instance.split(",")[0],n=a.instance.split(",")[1],-1==o.indexOf(e)&&o.push(e),-1==f.indexOf(n)&&f.push(n)),n){var i=s.find(function(n){return n.name.ci==v.label&&n.name.kpi==l.label&&n.name.ins1==e});if(i){a.ins2=n||"企业";var t=i.value.find(function(n){return!!n&&n.instance==a.instance}),r=f.indexOf(n);t||(i.value[r]=a)}else{var u={name:{ci:v.label,kpi:l.label,ins1:e},value:[],total:0};r=f.indexOf(n),a.ins2=n,u.value[r]=a,s.push(u)}}};for(var a in e)n(e[a])};for(var a in d)n(d[a])};for(var i in c)t(c[i]);for(var i in s)for(var r=0;r<f.length;r++)null==s[i].value[r]&&(s[i].value[r]={});for(var i in s[0].value){var u=0;for(var r in s)s[r].value[i]&&s[r].value[i].value&&(u+=s[r].value[i].value);for(var r in s)s[r].value[i]&&(s[r].value[i].total=u)}for(var i in s)s[i].value=s[i].value.sort(function(n,a){return n.total-a.total});for(var i in s)for(r=0;r<f.length;r++)null==l[r]&&null!=s[i].value[r].ins2&&(l[r]=s[i].value[r].ins2);v({getLegend:function(){return o},getxAxis:function(){return[l]},getSeries:function(){return s.map(function(n){var a={};return a.total=n.total,a.name=n.name.ins1,a.data=n.value.map(function(n){return{name:n.ins2?n.ins2:"",value:n.value?n.value:0}}),a})}})}(n)})}});
//# sourceMappingURL=../../../map/toolkit/component/explainer/deno_ci_ins_2d.js.map
