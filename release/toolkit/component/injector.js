define(function(){return function(e){if(null==e)throw new Error("undefined");var c=e.q,o=e.scope,r=e.element,t=r.constructor,n=(e.coldomInner,e.previewMode),a=(e.traverseColumn,e.viewFlexService),d=e.traverseRow,i=(e.rowDom,e.customMethodService,r.style,$("<div></div>")),s=(o=e.scope,e.compile);i.css("width","100%"),i.css("height","100%"),i.css("background-color","rgba(250,250,250,.5)");var u,l=$("<div></div>");return l.addClass("ww"),n||(l.css("opacity",".1"),l.css("pointer-events","none"),l.css("background-color","#eee")),$$.runExpression(r.$attr("advance/expression"),function(e){0==e.code&&(u=e.data),function(e){var n=(e=e||{}).$attr("on/init");if(r.renderJSON=function(e){d(l,e.children,!0)},r.showloading=function(){},r.renderCtrl=function(e){l.innerHTML="",window._newScope&&window._newScope.$destroy(),r.createRenderCtrl(e).then(function(e){window._newScope=o.$new(),l[0].appendChild(e),s(l)(window._newScope),window._newScope.$on("$destroy",function(){})})},r.render=function(e,n){runtime("开始加载视图");var i=[];null==e.layout&&(e.layout=e.groups[0].layout),e.layout=e.layout.$remapByChild(function(e){return new t(e)}),r.children=e.layout.children,r.traveseByChild(function(o){var r=c.defer(),t=function(){o.data?o.getCiKpi(function(e,n){o.data&&(o.data.resource=e,o.data.kpi=n),r.resolve("success")}):r.resolve("success")};if(o.source)if("TOPO"==o.source){var e=o.viewId;$$.cacheAsyncData.call(a.getViewById,[e],function(e){if(0==e.code&&null!=e.data){var n=JSON.parse(e.data.content);o.JSON=n}t()})}else t();else t();i.push(r.promise)}),runtime("完成加载视图"+e.viewTitle),c.all(i).then(function(){e.layout.traverse(function(){}),e.layout.root=e,Object.defineProperty(e.layout,"root",{enumerable:!1}),d.promises=[],l.children().remove(),d(l,e.layout.children,!0),setTimeout(function(){r.trigger("graphicLoaded")},5e3)})},n)try{n({target:r})}catch(e){}}(u)},r),l}});
//# sourceMappingURL=../../map/toolkit/component/injector.js.map
