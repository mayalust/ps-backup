function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}define([],function(){return function(a){var F,P=a.element,Y=a.global,O=a.scope,A=a.rootScope,H=(a.compile,a.growl);delete P.growl;var n,U=a.defer,N=$("<div></div>");return $$.runExpression(P.$attr("advance/expression"),function(t){if("0"==t.code){var e=t.data;n=(n="function"==typeof e?e(a,system):e)||{}}else n={};!function(t){t.format;var e=t.layout||"fixed",a=t.width||"100%",s="bootstrap"==P.$attr("parameters/cgroupstyle")||t.bootstrap||!1;if(s)var n=$("<div></div>");else var n=$("<table></table>");N.append(n),n.css("width",a),n.css("table-layout",e);var o=function(t,e){var a=$("<td></td>"),n=t.style||{},s=t.tdStyle||{},o=t.class||"",r=$("<span></span>"),l=t.$attr("on/click");return r.addClass(t.icon),a.addClass(o),a.css("padding","3px"),"object"==_typeof(n)&&r.css(n),r.css(s),a.on("click",function(t){l&&l()}),a.append(r),a},r=function(t,e){var a=$("<td></td>"),n=t.style||{},s=t.composory||!1,o=t.hide||!1,r=t.labelStyle||{},l=t.linkage,d=$("<span><span>"),i=$("<div>*</div>");d.css("display","inline-block"),d.css("width","10px"),i.css("font-size","20px"),i.css("top","5px"),i.css("position","absolute");var c=t.format||{label:"value"},p=t.class||"";if(l){var u=$("<a></a>");u.attr("target","_blank"),u.attr("href",l),u.css("cursor","pointer")}else var u=$("<span></span>");var f=t.$attr("on/click");a.addClass(p),u.css(r),a.css("padding","3px"),"object"==_typeof(n)&&a.css(n),a.on("click",function(t){f&&f()}),t.hideExtraText&&"undefined"!=t.hideExtraText?(u.css({display:"inline-block",cursor:"pointer",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap",position:"relative",width:t.hideExtraText,top:"2px"}),u.text(t[c.label]),u.attr("title",t[c.label])):u.text(t[c.label]);var v=parseInt(1e4*Math.random());return i.attr("id",v),1==s?(i.css("color","#ff6f64"),i.css("position","relative")):"none"==s?d.css("display","none"):i.css("color","rgba(0,0,0,0)"),d.append(i),a.css("position","relative"),a.append(d),a.append(u),o&&a.hide(),a},l=function(o,n){var r=o.format||{id:"id",label:"label"},l=$("<td></td>"),t=o.style||{},d=o.options||[],e=o.class||"";l.addClass(e),l.css("padding","3px"),"object"==_typeof(t)&&l.css(t);var s=function(){var s=[],t=l.find("ul.dropdown-menu li.active");return t.each(function(t,e){var a=$(e).find("input"),n=d.find(function(t){return t[r.id]==a.attr("value")});s.push(n)}),s},i=$("<select></select>").addClass("multiselect multiselect-all multiselect-search");i.css("display","none"),i.attr("multiple","multiple"),l.append(i);var a=function(t){if(r)var e=r.label,a=r.id;var n=$("<option></option>").attr("value",t[a]).text(t[e]),s=o.value||[];return(t[r.value]||-1<s.join(",").indexOf(t[a]))&&n.attr("selected","selected"),n};for(var c in i.children().remove(),d)i.append(a(d[c]));return setTimeout(function(){var t=function(t){var e=function(t){if(0==t.length)return"无做出任何选择";if(1<t.length)return"已选择"+t.length+"个";var e="";return t.each(function(){e+=$(this).text()+", "}),e.substr(0,e.length-2)},a=function(t,e){var a=o.$attr("on/change");if("function"==typeof a)try{a({row:n,current:o,values:s()})}catch(t){console.error(t)}};i.multiselect("destroy"),i.multiselect({enableFiltering:!0,buttonWidth:l.width(),buttonText:e,onChange:a})};$$.loadExternalJs(["bootstrap-multiselect"],t)}),l},d=function(s,o){var t=$("<td></td>"),e=s.class||"";t.addClass(e);s.value;var a=s.placeholder,r=s.format||{id:"id",label:"label"},n=s.style||{};t.css("padding","3px"),"object"==_typeof(n)&&t.css(n);var l=s.$attr("on/change"),d=$("<input />");return d.attr("placeholder",a),d.addClass("form-control"),t.append(d),$$.loadExternalJs(["jquery-ui"],function(){var n=s.options;d.autocomplete({source:function(t,e){var s=t.term.toUpperCase(),a=n.filter(function(t){var e=t[r.label]+"";return function(t){for(var e=!1,a=function(t){0==t.indexOf(s)&&(e=!0)},n=0;n<t.length-1;n++)a($$.chineseCharacterToPinyin(t.slice(n,-1)));return e}(e)||-1!=e.indexOf(s)}).map(function(t){return{id:t[r.id],label:t[r.label]}});e(a)},change:function(t,e){var a=$(t.currentTarget).val();"function"==typeof l&&l({row:o,current:s,value:a})}})}),t},i=function(e,a){var t=$("<td></td>"),n=e.class||"";t.addClass(n),t.css("padding","3px");var s=e.style||{};t.css("padding","3px"),"object"==_typeof(s)&&t.css(s);var o=$("<textarea >"),r=e.$attr("on/change");if(o.addClass("form-control"),o.val(e.value),e.disabled&&o.attr("disabled","disabled"),e.attrs)for(var l in e.attrs)o.attr(l,e.attrs[l]);return o.on("change",function(t){if("function"==typeof r)try{r({row:a,current:e,value:o.val()})}catch(t){console.error(t)}}),t.append(o),t},c=function(e,a){var t=$("<td></td>"),n=e.class||"";t.addClass(n),t.css("padding","3px");var s=e.style||{};t.css("padding","3px"),"object"==_typeof(s)&&t.css(s);var o=$("<div></div>").addClass("toggle-wrap"),r=$("<div></div>").addClass("toggle-inner");e.value&&o.addClass("active"),o.append(r);var l=e.$attr("on/change");return o.on("click",function(t){if(o.hasClass("active")?o.removeClass("active"):o.addClass("active"),"function"==typeof l)try{l({row:a,current:e,value:o.hasClass("active")})}catch(t){console.error(t)}}),t.append(o),t},p=function(e,a){var t=$("<td></td>"),n=e.class||"";t.addClass(n),t.css("padding","3px");var s=e.style||{};t.css("padding","3px"),"object"==_typeof(s)&&t.css(s);var o=$("<input >"),r=e.$attr("on/change");if(o.addClass("form-control"),o.val(e.value),e.disabled&&o.attr("disabled","disabled"),e.placeholder&&o.attr("placeholder",e.placeholder),e.attrs)for(var l in e.attrs)o.attr(l,e.attrs[l]);return o.on("change",function(t){if("function"==typeof r)try{r({row:a,current:e,value:o.val()})}catch(t){}}),t.append(o),t},u=function(i,c){var a=i.format||{id:"id",label:"label"},p=i.value,u=i.disabled||!1,t=i.options||[],f=$("<td></td>"),e=i.class||"";f.addClass(e);var n=i.style;f.css("padding","3px"),"object"==_typeof(n)&&f.css(n),f.css("padding","3px");var v=t.map(function(t){var e={id:t[a.id],text:t[a.label]};return 0,e});return $$.loadExternalJs(["select2"],function(){p&&setTimeout(function(){n.val(p).trigger("change")},1e3);var t=$("<div style='width:80%'><div>"),n=$("<select></select>");u&&(n=$("<select disabled='disabled'></select>")),n.css({width:"98%"});var e=$('<span class="btn btn-default"><span class="glyphicon glyphicon-plus"></span></span>');t.append(n),t.append(e);var a=$("<div id='customDiv'></div>");a.css({position:"relative",display:"none"});var s=$("<input/ id='inputVal'>");s.css({width:"96%",height:"27px","background-color":"#3a5066",padding:"0 10px"});var o=$("<button class='btn btn-default'> 确认 </button>");a.append(s),a.append(o),t.append(a),i.hide&&t.hide();var r=!1;u||e.click(function(){(r=!r)?$("#customDiv").show():$("#customDiv").hide()}),o.click(function(){r=!r;var t=$("#inputVal").val(),e={id:t,text:t};if(""!=t){var a=new Option(e.text,e.id,!0,!0);n.append(a).trigger("change")}$("#inputVal").val(""),$("#customDiv").hide()});var l=i.$attr("on/change"),d={language:{noResults:function(){return i.noresults||"没有该匹配项"}},placeholder:i.placeholder||"请选择...",data:v,multiple:!0};f.append(t),n.select2(d),setTimeout(function(){n.on("change",function(t){try{l({row:c,current:i,value:$(this).select2("data").map(function(t){return t.text})})}catch(t){console.error(t)}})})}),f},f=function(s,o){var r=s.format||{id:"id",label:"label"},a=(s.disabled,s.value+""),l=s.options||[],n=$("<td></td>"),t=s.class||"",d=$("<div></div>"),i=$("<button></button>"),c=$("<div></div>"),p=$("<input />"),e=$("<button></button>"),u=$("<select></select>"),f=l.map(function(t){var e={id:t[r.id],text:t[r.label]};return e}),v=s.$attr("on/change");n.addClass(t),d.attr("class","input-group").css("width","calc( 100% - 35px )"),i.attr("class","btn btn-primary").text("+"),e.attr("class","btn btn-primary btn-xs").text("确定"),c.attr("class","input-group").css({position:"absolute",padding:"5px","z-index":1e3,"background-color":"#3a5066",border:"1px solid rgb(165, 164, 164)",display:"none"}),c.append(p).append(e);var b=s.style;return n.css("padding","3px"),"object"==_typeof(b)&&n.css(b),i.on("click",function(t){"block"==c.css("display")?c.css("display","none"):c.css("display","block")}),e.on("click",function(){c.css("display","none");var t=p.val(),e={};e[r.id]=t,e[r.value]=t,e[r.label]=t;var a=l.find(function(t){return t.label===e.label});if(a)H.info("该备件类型已存在");else{l.push(e),u.select2({data:l.map(function(t){return{id:t[r.id],text:t[r.label]}})}),u.val(t),u.trigger("change.select2");try{v({row:o,current:s,value:{valueCode:t,label:t}})}catch(t){console.error(t)}setTimeout(function(){p.val(null)})}}),$$.loadExternalJs(["select2"],function(){u.css("width","100%");var t={language:{noResults:function(){return s.noresults||"没有该匹配项"}},placeholder:s.placeholder||"请选择...",data:f};d.append(u),d.append(i),d.append(c),n.append(d),u.select2(t);var e=l.find(function(t){return t.id==a});l.indexOf(e);u.val(a),u.trigger("change.select2"),setTimeout(function(){u.on("change",function(t){var e=$(t.target),a=e.val(),n=l.find(function(t){return t[r.id]==a});try{v({row:o,current:s,value:{valueCode:n[r.id],label:n[r.label]}})}catch(t){console.error(t)}})})}),n},v=function(o,r){var l=o.format||{id:"id",label:"label"},d=o.value+"",i=o.options||[],c=o.disabled||!1,p=$("<td></td>"),t=o.class||"";p.addClass(t);var e=o.style;p.css("padding","3px"),"object"==_typeof(e)&&p.css(e),p.css("padding","3px");var u=function(a,n){var s=[];return i.forEach(function(t){if(null==a||null==n||t[a]==n){var e={id:t[l.id],text:t[l.label]};s.push(e)}}),s};return $$.loadExternalJs(["select2"],function(){var a=$("<select></select>");c&&(a=$("<select disabled='disabled'></select>"));var n=o.$attr("on/change");a.css("width","100%");var s={language:{noResults:function(){return o.noresults||"没有该匹配项"}},placeholder:o.placeholder||"请选择...",data:u()};a.on("select2:select",function(t){if("function"==typeof n){var e=t.params.data.id,a=o.options.find(function(t){return e==t[l.id]});try{n({row:r,current:o,value:a})}catch(t){console.error(t)}}}),p.append(a),a.select2(s);var t,e=i.find(function(t){return t.id==d});i.indexOf(e);a.val(d),a.trigger("change.select2"),l.parentName&&(t&&(t(),t=null),t=O.$on(l.parentName,function(t,e){a.select2("destroy").empty(),s.data=u(l.parentKey,e.value),a.select2(s),a.val(""),a.trigger("change.select2")}))}),p},b=function(t,e){var a=$("<td></td>"),n=t.style||{},s=t.btnStyle||{},o=t.class||"",r=t.btnclass||"",l=t.$attr("on/save"),d=t.disabled;a.addClass(o),a.css("padding","3px"),"object"==_typeof(n)&&a.css(n);var i=$("<button></button>"),c=$("<span></span>"),p=$("<span></span>");t.$attr("on/click");return i.addClass(r),i.attr("type","button"),t.icon&&(p.addClass(t.icon),i.append(p)),d&&i.prop("disabled","disabled"),i.css(s),c.text(t.value||""),i.append(c),i.attr("data-clipboard-text",t.clipboardText||""),$$.loadExternalJs(["clipboard"],function(e){setTimeout(function(){var t=new e(i[0]);t.on("success",function(t){l&&l(t),t.clearSelection()}),t.on("error",function(t){console.error("Action:",t.action),console.error("Trigger:",t.trigger)})})}),a.append(i),a},y=function(e,a){var t=$("<td></td>"),n=e.style||{},s=e.btnStyle||{},o=e.class||"",r=e.btnclass||"",l=e.disabled,d=e.format||{label:"value"};t.addClass(o),t.css("padding","3px"),"object"==_typeof(n)&&t.css(n);var i=$("<button></button>"),c=$("<span></span>"),p=$("<span></span>"),u=e.$attr("on/click");return i.addClass(r),i.attr("type","button"),e.icon&&(p.addClass(e.icon),i.append(p)),l&&i.prop("disabled","disabled"),i.css(s),c.text(e[d.label]||""),i.append(c),i.on("click",function(t){"function"==typeof u&&u({row:a,current:e,ui:t})}),t.append(i),t},g=function(t,e){var a,n,s=$("<div></div>");s.addClass("btn-group");var o=$("<td></td>"),r=t.style||{},l=t.btnStyle||{},d=t.class||"",i=t.disabled,c=$("<button></button>"),p=$("<button></button>"),u=t.$attr("on/submit"),f={};f.group=t.group,c.addClass("btn btn-default"),c.text("预览"),p.addClass("btn btn-primary"),p.text("上传"),o.addClass(d),o.css("padding","3px"),"object"==_typeof(r)&&o.css(r);var v=$("<button></button>"),b=$("<span></span>"),y=$("<span></span>"),g=(t.$attr("on/click"),$("<input />"));return g.attr("type","file"),g.css("display","none"),v.addClass("btn btn-default"),v.attr("type","button"),s.append(v),t.icon&&(y.addClass(t.icon),v.append(y)),i&&v.prop("disabled","disabled"),v.css(l),b.text("选择文件"),v.append(b),c.off("click"),c.on("click",function(t){P.createSystemPopupByJsonName("imagePrev",{title:"图片内容预览",width:"500px",config:a},{file:n})}),p.on("click",function(t){P.uploadFile(n,f,function(e){p.remove(),b.text("文件 : "+n.name+"已经成功上传！"),a=e.data,u&&(u(e.data),c.off("click"),c.on("click",function(t){P.createSystemPopupByJsonName("imagePrev",{title:"图片内容预览",width:"500px"},{url:e.data.value})}))})}),g.on("change",function(t){n=g[0].files[0],b.text("已选择文件 : "+n.name),s.append(c),s.append(p)}),v.on("click",function(t){g.trigger("click")}),o.append(g),o.append(s),o},h=function(s,t){var o=$("<div class='dropdown'></div>");o.addClass("btn-group");var e=$("<td></td>"),r=!s.manual,a=s.style||{},n=s.btnStyle||{},l=s.class||"",d=s.disabled,i=s.text?s.text:"选择文件",c=s.$attr("on/submit"),p={};p.group=s.group,p.fileFormat=s.fileFormat,p.url=s.url,p.formData=s.formData,e.addClass(l),e.css("padding","3px"),"object"==_typeof(a)&&e.css(a);var u,f,v=$("<button></button>"),b=$('<ul class="dropdown-menu" role="menu"></ul>'),y=$("<span></span>"),g=$("<span></span>"),h=(s.$attr("on/click"),$("<input />"));if(h.attr("type","file"),1==s.multiple){if(o.append(b),s.path){var m=s.text.split(",");u=$('<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">'+m[0]+'<span class="caret"></span></button>'),o.prepend(u),v.css("display","none"),m.forEach(function(t){var e=$("<li>"+t+"</li>");b.append(e)})}h.attr("multiple",!0)}h.css("display","none"),v.addClass("btn btn-default"),v.attr("type","button"),s.groupId&&v.attr("id",s.groupId),o.append(v),s.icon&&(g.addClass(s.icon),v.append(g)),d&&v.prop("disabled","disabled"),v.css(n),y.text(i),v.append(y),r||((f=$("<button></button>")).addClass("btn btn-primary"),f.text("上传"));var x,C,w=s.btnstatus;if(!d&&w&&-1<w.search("del")){var k=s.$attr("on/del");(x=$("<button></button>")).addClass("btn btn-default"),x.text("清空"),x.off("click"),x.on("click",function(t){f&&f.remove(),u&&u.remove(),v.css("display","inline-block"),y.text("选择文件"),s.path="",s.text="",k&&k(t,h,s)}),o.append(x)}if(s.path&&d&&w&&-1<w.search("download")){var S=s.$attr("on/download");(C=$("<button></button>")).addClass("btn btn-default"),C.text("下载"),C.off("click"),C.on("click",function(t){S&&S(t,h,s)}),o.append(C)}return h.on("change",function(t){var e="";for(var a in b.empty(),h[0].files)if(h[0].files[a]instanceof File&&!r)if(1==s.multiple){e||(e=h[0].files[a].name,u=$('<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">'+e+'<span class="caret"></span></button>'),o.prepend(u),v.css("display","none"));var n=$("<li>"+h[0].files[a].name+"</li>");b.append(n)}else e=h[0].files[a].name,y.text(e),y.attr("title",e);r?P.uploadFile1(h[0].files,p,function(t){c&&(s.multiple?c(t,h,s):c(t[0],h,s))}):(f.on("click",function(t){P.uploadFile1(h[0].files,p,function(t){f.remove(),c&&(s.multiple?c(t,h,s):c(t[0],h,s))})}),o.append(f))}),v.on("click",function(t){h.trigger("click")}),e.append(h),e.append(o),e},m=function(t,d){var i=$("<td></td>"),e=t.style||{},a=t.groupStyle||{};i.css(e),i.css("padding","3px");var n=$("<div></div>");n.css(a),n.addClass("btn-group");var s=function(e){e.style;var t=e.disabled,a=e.btnStyle||{},n=(e.class,e.btnclass||""),s=$("<button></button>"),o=$("<span></span>"),r=$("<span></span>"),l=e.$attr("on/click");return s.addClass(n),s.attr("type","button"),e.icon&&(r.addClass(e.icon),s.append(r)),t&&s.prop("disabled","disabled"),s.css(a),o.text(e.value||""),s.append(o),i.append(s),s.on("click",function(t){"function"==typeof l&&l({row:d,current:e})}),s},o=function(t){var e=t.style||{},a=t.btnStyle||{},n=(t.class,t.btnclass||""),s=t.$attr("on/save"),o=t.disabled;"object"==_typeof(e)&&i.css(e);var r=$("<button></button>"),l=$("<span></span>"),d=$("<span></span>");return r.addClass(n),r.attr("type","button"),t.icon&&(d.addClass(t.icon),r.append(d)),o&&r.prop("disabled","disabled"),r.css(a),l.text(t.value||""),r.append(l),r.attr("data-clipboard-text",t.clipboardText||""),$$.loadExternalJs(["clipboard"],function(e){setTimeout(function(){var t=new e(r[0]);t.on("success",function(t){s&&s(t),t.clearSelection()}),t.on("error",function(t){console.error("Action:",t.action),console.error("Trigger:",t.trigger)})})}),r};for(var r in t.content)"button"==t.content[r].type?n.append(s(t.content[r])):"clipboardButton"==t.content[r].type&&n.append(o(t.content[r]));return i.append(n),i},x=function(n,s){var t=$("<td></td>"),e=n.style,a=n.value;t.css("padding","3px"),"object"==_typeof(e)&&t.css(e);var o=n.class||"";t.addClass(o);var r=$("<div></div>"),l=Math.uuid(),d=n.$attr("on/change"),i=$("<input id=datePicker"+l+" />").addClass("form-control").attr("type","text"),c=$('<i class="glyphicon glyphicon-calendar fa fa-calendar"></i>').css({position:"absolute",bottom:"10px",right:"14px",top:"auto",cursor:"pointer"});return t.append(r),r.css("position","relative"),r.append(i).append(c),setTimeout(function(){$$.loadExternalJs(["laydate"],function(t){console.assert(i.length,"laydate容器不存在"),t.path="../../toolkit/laydate/",t.render({elem:i[0],theme:"#393D49",value:a?useMomentFormat(a,"YYYY-MM-DD"):"",done:function(t,e,a){d&&d({target:P,global:Y,row:s,current:n,value:{getUTCDateString:""==t?"":formatDatebyMomentToUTC(t),getDateString:t}})}})})}),t},C=function(n,s){var t=$("<td></td>"),e=n.style;t.css("padding","3px"),"object"==_typeof(e)&&t.css(e);var a=n.class||"",o=n.value;t.addClass(a);var r=$("<div></div>"),l=n.$attr("on/change"),d=Math.uuid(),i=$("<input id=dateTime"+d+" />").addClass("form-control").attr("type","text"),c=n.dateType;if("none"==n.icon)t.append(r),r.css("position","relative"),r.append(i);else{var p=$('<i class="glyphicon glyphicon-calendar fa fa-calendar"></i>').css({position:"absolute",bottom:"10px",right:"14px",top:"auto",cursor:"pointer"});t.append(r),r.css("position","relative"),r.append(i).append(p)}return setTimeout(function(){$$.loadExternalJs(["laydate"],function(t){"object"===_typeof(o)&&"DateHandler"===o.CLASS&&("date"==c&&o.trimmToDate(),o=o.getDateString("yy-MM-dd hh:mm:ss")),console.assert(i.length,"laydate容器不存在"),t.path="../../toolkit/laydate/",t.render({elem:i[0],theme:"#393D49",type:c||"datetime",btns:["clear","confirm"],value:o?useMomentFormat(o,"YYYY-MM-DD HH:mm:ss"):"",done:function(t,e,a){l&&l({target:P,global:Y,row:s,current:n,value:{getUTCDateString:""==t?"":formatDatebyMomentToUTC(t),getDateString:t}})}})})}),t},w=function(s,o){var t=$("<td></td>"),e=s.style;t.css("padding","3px"),"object"==_typeof(e)&&t.css(e);var a=s.class||"";t.addClass(a);var n=$("<div></div>"),r=s.$attr("on/change"),l=Math.uuid(),d=$("<input id=dateRange"+l+" />").addClass("form-control").attr("type","text");if("none"==s.icon)t.append(n),n.css("position","relative"),n.css("padding","3px"),n.append(d);else{var i=$('<i class="glyphicon glyphicon-calendar fa fa-calendar"></i>').css({position:"absolute",bottom:"10px",right:"14px",top:"auto",cursor:"pointer"});t.append(n),n.css("position","relative"),n.css("padding","3px"),n.append(d).append(i)}var c=["clear","confirm"];return s.btns&&(c=s.btns),setTimeout(function(){$$.loadExternalJs(["laydate"],function(t){t.path="../../toolkit/laydate/",t.render({elem:d[0],theme:"#393D49",range:!0,btns:c,value:""==s.value||null==s.value?"":P.getDateHandler(s.value[0]).getDateString("yy-MM-dd")+" - "+P.getDateHandler(s.value[1]).getDateString("yy-MM-dd"),done:function(t,e,a){var n=t.split(" - ");r&&r({target:P,global:Y,row:o,current:s,value:{start:""==n[0]?null:formatDatebyMomentToUTC(n[0]),end:""==n[0]?null:formatDatebyMomentToUTC(n[1]),startDateString:n[0],endDateString:n[1]}})}})})}),t},k=function(t,e){var a=$("<td></td>"),n=t.style;a.css("padding","3px"),"object"==_typeof(n)&&a.css(n);var s=t.render;return"function"==typeof s&&a.append(s($)),a},S=function(e,a){var t=$("<td></td>"),n=e.$attr("on/change");t.css("padding","3px");var s=e.style;t.css("padding","3px"),"object"==_typeof(s)&&t.css(s);var o=e.class||"";t.addClass(o);var r=$("<div></div>");return $$.loadExternalJs(["dropdowntree"],function(){r.dropdowntree({value:e.value,options:e.options,format:e.format,change:function(t){"function"==typeof n&&n({row:a,current:e,value:t.data})}})}),t.append(r),t},T=function(t){var s=$("<td></td>"),e=(t.style,t.class||""),o=t.svgAttr||{},r=t.svgStyle||{},l=t.render;return s.addClass(e),s.css("padding","3px"),$$.loadExternalJs(["d3"],function(t){var e=t.select(s[0]),a=e.append("svg");for(var n in o)a.attr(n,o[n]);for(var n in r)a.style(n,r[n]);l(a)}),s},D=function(e){var t=$("<td></td>"),n=$("<div></div>"),a=e.style||{},s=e.class||"",o=e.value||{};o instanceof Array?o.forEach(function(t){var e=t.qualifiedName?t.qualifiedName:t.value,a=$('<a target="_blank" href="'+e+'">'+t.label+"</a><br />");n.append(a)}):n.append(o),t.addClass(s),t.css(a);var r=e.$attr("on/click");return n.on("click",function(t){"function"==typeof r&&r({current:e,ui:t,params:{textContent:$(e.value)[0].textContent}})}),t.append(n),t},j=function(t,e){var a=$("<td></td>"),n=t.style||{},s=t.class||"",o=$("<div></div>");a.addClass(s),a.css("padding","3px"),"object"==_typeof(n)&&o.css(n);var r=t.value||function(t){return t};return $$.loadExternalJs(["clock"],function(t){var e=t.init();e.on("init",function(t,e){o.text(r(t))}),e.on("change",function(t,e){o.text(r(t))}),e.start()}),a.append(o),a},_=function(s,o){var t=$("<td></td>"),e=s.value,r=s.$attr("on/change");t.css("padding","3px");var a=s.style;t.css("padding","3px"),"object"==_typeof(a)&&t.css(a);var n=s.class||"";t.addClass(n);var l=$("<div></div>").addClass("btn-group btn-group-justified");l.css("width","100%");var d=function(a){var n=$("<div></div>").addClass("btn");return a.id==e?n.addClass("btn-primary"):n.addClass("btn-default"),n.on("click",function(t){var e=l.find(".btn-primary");if(e.removeClass("btn-primary"),e.addClass("btn-default"),n.removeClass("btn-default"),n.addClass("btn-primary"),r)try{r({row:o,current:s,value:a.value})}catch(t){console.error(t)}}),n.text(a.label),n};for(var i in s.options)l.append(d(s.options[i]));return t.append(l),t},E=function(o,r){var t=$("<td></td>"),l=null==o.multiselect||o.multiselect;t.css("padding","3px");var e=o.style;"object"==_typeof(e)&&t.css(e);var d=o.format||{id:"id",label:"label"},a=o.class||"",i=o.options,c=o.column||1,p=o.value,u=o.$attr("on/change"),n=function(e){var a=$("<div></div>");a.css("width",parseInt(100/c)+"%"),a.addClass("checkboxlist");var t=$("<span></span>"),n=$("<div></div>");t.addClass("glyphicon glyphicon-ok"),n.addClass("checkbox"),n.append(t),p.some(function(t){return t==e[d.id]})&&a.addClass("checked"),e.hasOwnProperty("dom")?Object.defineProperty(e,"dom",{enumerable:!1,value:a}):e.dom=a;var s=$("<span></span>");return o.hideExtraText&&"undefined"!=o.hideExtraText?(s.css({display:"inline-block",cursor:"pointer",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","vertical-align":"middle",width:o.hideExtraText}),s.text(e[d.label]),s.attr("title",e[d.label])):s.text(e[d.label]),a.append(n),a.append(s),a.on("click",function(t){if(l)a.hasClass("checked")?a.removeClass("checked"):a.addClass("checked");else{for(var e in i)i[e].dom.removeClass("checked");a.addClass("checked")}u({row:r,current:o,value:i.filter(function(t){return t.dom.hasClass("checked")})})}),a};for(var s in i)t.append(n(i[s]));return t.addClass(a),t},M=function(t,e){var a=$("<td></td>");a.css("padding","3px");var n=t.style;"object"==_typeof(n)&&a.css(n);var s=$("<div style='display:table;'><tr></tr></div>"),o=s.find("tr"),r=$("<td></td>"),l=$("<td></td>");o.append(r),o.append(l);var d=t.class||"",i=t.shownumber;a.addClass(d),r.css("vertical-align","middle"),r.css("text-align","right"),l.css("vertical-align","middle");var c=$("<div></div>").addClass("progress sm"),p=t.value,u=$("<div></div>").addClass("progress-bar").css("width",(p||0)+"%");i&&(s.append(r),r.append($('<span style="width:35px;display:inline-block;padding-right:2px;">'+p+"%</span>"))),c.css("margin","auto"),c.append(u),l.append(c),l.css("width","100%"),s.append(l),a.append(s);var f=$("<div></div>");function v(t){f.css("top",t.clientY-f.height()),f.css("left",t.clientX-f.width())}switch(f.text("100"),f.css("padding","5px 10px"),f.css("background-color","#000"),f.css("color","#fff"),f.css("position","fixed"),f.css("z-index",1100),f.css("pointer-events","none"),u.on("mouseenter",function(t){f.css("top",t.clientY-f.height()),f.css("left",t.clientX-f.width()),$("body").append(f),u.on("mousemove",v)}),u.on("mouseleave",function(t){u.off("mousemove"),f.remove()}),!0){case 100==p:u.addClass("progress-bar-aqua");break;case 90<p:u.addClass("progress-bar-green");break;case 80<p:case 70<p:u.addClass("progress-bar-yellow");break;case 60<p:u.addClass("progress-bar-red");break;default:u.addClass("progress-bar-danger")}return a};P.render=function(t){U.resolve("underwatch"),n.children().remove();var e=function(a){var n=$("<tr></tr>");s&&(n.css("display","block"),n.addClass("row"));var t=function(t){var e;return a.refresh=function(){},"label"==t.type?e=r(t,a):"icon"==t.type?e=o(t,a):"toggle"==t.type?e=c(t,a):"autoComplete"==t.type?e=d(t):"input"==t.type?e=p(t,a):"textarea"==t.type?e=i(t,a):"select"==t.type?e=v(t,a):"inputableSelect"==t.type?e=f(t,a):"multipleSelect"==t.type?e=u(t,a):"button"==t.type?e=y(t,a):"uploadFile"==t.type?e=g(t,a):"uploadFile2"==t.type?e=h(t,a):"dropdowntree"==t.type?e=S(t,a):"dateRangePicker"==t.type?e=w(t,a):"datePicker"==t.type?e=x(t,a):"dateTimePicker"==t.type?e=C(t,a):"multiSelect"==t.type?e=l(t,a):"radio"==t.type?e=_(t,a):"buttonGroup"==t.type?e=m(t,a):"jquery"==t.type?e=k(t,a):"clipboardButton"==t.type?e=b(t,a):"clock"==t.type?e=j(t,a):"svg"==t.type?e=T(t):"customHtml"==t.type?e=D(t):"progressbar"==t.type?e=M(t,a):"checkboxlist"==t.type&&(e=E(t,a)),s&&n.css("display","block"),t.colSpan&&e.attr("colSpan",t.colSpan),t.rowSpan&&e.attr("rowSpan",t.rowSpan),t.tdStyle&&e.css(t.tdStyle),P.setSelfDom(e),e};for(var e in a)n.append(t(a[e]));return n};for(var a in t)n.append(e(t[a]));return n},P.parentShow=function(){n.parent().parent().css("display","block")},P.parentHide=function(){n.parent().parent().css("display","none")},P.show=function(){n.css("display","block")},P.hide=function(){n.css("display","none")};var J=t.$attr("on/init");if("function"==typeof J)if(A.cacheAllData)F=A.cacheAllData.on("domainTreeQuery",function(){try{J({target:P,global:Y,scope:O})}catch(t){console.error(t)}});else try{J({target:P,global:Y,scope:O})}catch(t){console.error(t)}else U.resolve("underwatch");n.underWatch=!0}(n)},P),O&&O.$on("$destroy",function(){F&&F()}),N}});
//# sourceMappingURL=../../map/toolkit/component/ctrlgroup.js.map
