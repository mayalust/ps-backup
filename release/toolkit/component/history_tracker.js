define([],function(){return{width:"100%",on:{init:function(N){var L,S=N.target,P=S.getValue("ticketNo"),w=(S.getRootScope("myDicts").specialtyProps,S.getRootScope("myDicts").appName),C=S.getRootScope("myDicts").alertSeverity,I=S.getRootScope("myDicts").statusGrade,E={1:"暂不处理",2:"自行处理",3:"发起委托"},D=function(e){var a=e.getFullYear(),t=(e.getMonth()+1).toString(),s=e.getDate().toString(),i=e.getHours().toString(),l=e.getMinutes().toString(),k=e.getSeconds().toString();return 1==t.length&&(t="0"+t),1==s.length&&(s="0"+s),1==i.length&&(i="0"+i),1==l.length&&(l="0"+l),1==k.length&&(k="0"+k),a+"-"+t+"-"+s+" "+i+":"+l+":"+k};P?(S.postService("deviceResumeUIService","getDeviceCheckTrustByCondition",{ticketNo:P},function(e){0==e.code&&(L=e.data[0]||{})}),S.postService("ticketLogService","getByTicketNo",[P],function(e){if(0==e.code){var s=function(){$(".checking").on("click",function(e){N.target.createSystemPopupByLocalPath("page3",{width:"800px",title:"诊断分析详情"},e.target.value)}),$(".dealing260").on("click",function(e){S.setValue("global/resource",b),S.createSystemPopupByViewId("478671371040000",{width:"80%",title:"处理方案编制"},"onlyRead")}),$(".dealing90").on("click",function(e){S.setValue("global/resource",c),S.createSystemPopupByViewId("475059852490000",{width:"80%",title:"处理方案编制"},"onlyRead")}),$(".trusting").on("click",function(e){N.target.createSystemPopupByLocalPath("page4",{width:"800px",title:"检修委托详情"},e.target.value)}),$(".maintainingProject").on("click",function(a){var e={ticketNo:a.target.value.split(",")[3]};S.postService("deviceResumeUIService","getMaintainStandardListByCondition",e,function(e){0<e.data.length?N.target.createSystemPopupByLocalPath("page5",{width:"800px",title:"维修方案"},a.target.value):S.growl("请先制定维修方案","warning")})}),$(".repairProject").on("click",function(e){N.target.createSystemPopupByLocalPath("page6",{width:"800px",top:"13%",title:"检修实绩"},e.target.value)}),$(".alertItemList").on("click",function(e){t.forEach(function(e){e.deviceName=k}),S.createSystemPopupByViewId("357383633040000",{title:"报警详情",top:"10%",width:"80%"},["alertItemList",t])}),$(".alertEvaluateInfoList").on("click",function(e){S.setValue("alertEvaluateInfoList",f),S.createSystemPopupByLocalPath("page7",{width:"800px",top:"13%",title:"报警评价"})}),$(".taskEvaluate").on("click",function(e){var a=JSON.parse(e.target.value);a.values.alertEvaluateInfoList&&0<a.values.alertEvaluateInfoList.length?(S.setValue("global/resource",a),S.createSystemPopupByLocalPath("page8",{width:"800px",title:"验收评价"},"onlyRead")):(S.setValue("global/resource",a),S.createSystemPopupByLocalPath("page11",{width:"800px",title:"验收"},"onlyRead"))}),$(".assessingAgain").on("click",function(e){var a=JSON.parse(e.target.value);S.setValue("global/resource",a),S.createSystemPopupByLocalPath("page10",{width:"800px",title:"验收评价"},"onlyRead")}),$(".dianjianyichang").on("click",function(e){S.postService("ticketLogService","getByTicketNo",[r],function(e){S.createSystemPopupByLocalPath("page9",{width:"90%",title:"点检实绩登录"},e.data[1].ticketTask)})}),$(".dangridianjian").on("click",function(e){S.createSystemPopupByLocalPath("page9",{width:"90%",title:"点检实绩登录"},y)})},i=e.data;if("start"!=i[0].logType&&"startEvent"!=i[0].logType&&i.unshift({logType:"startEvent"}),0==i.length)return void S.growl("此工单["+P+"]已被删除","error");var l=[];if("50"==i[1].ticketTask.variables.ticket.category)if(i[1].ticketTask.variables.alertItemList&&1==i[1].ticketTask.variables.alertItemList.length){var a=i[1].ticketTask.variables.alertItemList[0].specialtyName;w.forEach(function(e){e.valueCode!=i[1].ticketTask.variables.ticket.values.appName||(u=e.label)}),C.forEach(function(e){e.valueCode!=i[1].ticketTask.variables.ticket.values.severity||(v=e.label)}),l=[{time:D(new Date(i[1].ticketTask.variables.ticket.values.alertArisingTime)),icon:"fa fa-user fa-fw fa-circle-o bg-green",disList:[{value:"<a>报警产生</a>"},{value:"报警类型:  "+(a||"无")},{value:"报警级别:  "+v},{value:"报警描述:  "+i[1].ticketTask.variables.ticket.values.alertTitle},{value:"报警来源: "+u,style:{color:"red"}}]},{time:D(new Date(i[1].ticketTask.sendTime)),icon:"fa fa-user bg-aqua",disList:[{value:"<a>报警处理</a>"},{value:"处理人: "+i[1].ticketTask.variables.ticket.creatorName},{value:"处理方式:  分配"},{value:"处理原因:  "}]}]}else{var t=i[1].ticketTask.variables.alertItemList,k=i[1].ticketTask.variables.devName;l=[{time:D(new Date(i[1].ticketTask.variables.ticket.values.alertArisingTime)),icon:"fa fa-user fa-fw fa-circle-o bg-green",disList:[{value:"<a>报警产生</a>"},{value:"报警描述:  "+i[1].ticketTask.variables.ticket.values.alertTitle},{value:'<button class="btn btn-primary btn-sm alertItemList">合并告警</button>'}]}]}else if("90"==i[1].ticketTask.variables.ticket.category){var c=i[1].ticketTask;if(i[1].ticketTask.variables.alertItemList&&1==i[1].ticketTask.variables.alertItemList.length){a=i[1].ticketTask.variables.alertItemList[0].specialtyName;w.forEach(function(e){e.valueCode!=i[1].ticketTask.variables.ticket.values.appName||(u=e.label)}),I.forEach(function(e){e.valueCode!=i[1].ticketTask.variables.statusGrade||(T=e.label)}),C.forEach(function(e){e.valueCode!=i[1].ticketTask.variables.ticket.values.severity||(v=e.label)}),l=[{time:D(new Date(i[1].ticketTask.variables.ticket.values.alertArisingTime)),icon:"fa fa-user fa-fw fa-circle-o bg-green",disList:[{value:"<a>报警产生</a>"},{value:"报警类型:  "+(a||"无")},{value:"报警级别:  "+v},{value:"报警描述:  "+i[1].ticketTask.variables.ticket.values.alertTitle},{value:"报警来源: "+u,style:{color:"red"}}]},{time:D(new Date(i[1].ticketTask.sendTime)),icon:"fa fa-user bg-aqua",disList:[{value:"<a>综合诊断</a>"},{value:"处理人:  "+i[1].ticketTask.senderName},{value:"<span style='color:#2997bb'>状态诊断<span>"},{value:"综合状态等级:  "+(T||"")},{value:"处理方案建议:  "+(i[1].ticketTask.variables.cessingScheme?i[1].ticketTask.variables.cessingScheme:"")},{value:"<span style='color:#2997bb'>状态处理<span>"},{value:"处理人:  "+i[1].ticketTask.senderName},{value:"处理方式:  "+E[i[1].ticketTask.variables.ticket.values.dealType]},{value:"检修标准编号:  "+(i[1].ticketTask.variables.ticket.values.standardProjectId?i[1].ticketTask.variables.ticket.values.standardProjectId:"")},{value:"标准项目名称:  "+(i[1].ticketTask.variables.ticket.values.standardProjectName?i[1].ticketTask.variables.ticket.values.standardProjectName:"")},{value:'<button class="btn btn-primary btn-sm dealing90" value="'+i[1].ticketTask.ticketNo+'">方案履历</button>'}]}]}else{t=i[1].ticketTask.variables.alertItemList,k=i[1].ticketTask.variables.devName;I.forEach(function(e){e.valueCode!=i[1].ticketTask.variables.statusGrade||(T=e.label)}),l=[{time:D(new Date(i[1].ticketTask.variables.ticket.values.alertArisingTime)),icon:"fa fa-user fa-fw fa-circle-o bg-green",disList:[{value:"<a>报警产生</a>"},{value:"报警描述:  "+i[1].ticketTask.variables.ticket.values.alertTitle},{value:'<button class="btn btn-primary btn-sm alertItemList">合并告警</button>'}]},{time:D(new Date(i[1].ticketTask.sendTime)),icon:"fa fa-user bg-aqua",disList:[{value:"<a>综合诊断</a>"},{value:"处理人:  "+i[1].ticketTask.senderName},{value:"<span style='color:#2997bb'>状态诊断<span>"},{value:"综合状态等级:  "+(T||"")},{value:"处理方案建议:  "+(i[1].ticketTask.variables.cessingScheme?i[1].ticketTask.variables.cessingScheme:"")},{value:"<span style='color:#2997bb'>状态处理<span>"},{value:"处理人:  "+i[1].ticketTask.handlerName},{value:"处理方式:  "+E[i[1].ticketTask.variables.ticket.values.dealType]},{value:"检修标准编号:  "+(i[1].ticketTask.variables.ticket.values.standardProjectId?i[1].ticketTask.variables.ticket.values.standardProjectId:"")},{value:"标准项目名称:  "+(i[1].ticketTask.variables.ticket.values.standardProjectName?i[1].ticketTask.variables.ticket.values.standardProjectName:"")},{value:'<button class="btn btn-primary btn-sm dealing90" value="'+i[1].ticketTask.ticketNo+'">方案履历</button>'}]}]}}else if("260"==i[1].ticketTask.variables.ticket.category){var u,v;a=i[1].ticketTask.variables.alertItemList[0].specialtyName;w.forEach(function(e){e.valueCode!=i[1].ticketTask.variables.ticket.values.appName||(u=e.label)}),C.forEach(function(e){e.valueCode!=i[1].ticketTask.variables.ticket.values.severity||(v=e.label)}),l=[{time:D(new Date(i[1].ticketTask.variables.ticket.values.alertArisingTime)),icon:"fa fa-user fa-fw fa-circle-o bg-green",disList:[{value:"<a>报警产生</a>"},{value:"报警类型:  "+(a||"无")},{value:"报警级别:  "+v},{value:"报警描述:  "+i[1].ticketTask.variables.ticket.values.alertTitle},{value:"报警来源: "+u,style:{color:"red"}}]}]}if("210"==i[1].ticketTask.variables.ticket.category&&(l=[{time:D(new Date(i[1].ticketTask.sendTime)),icon:"fa fa-user fa-fw fa-circle-o bg-green",disList:[{value:"<a>临时委托</a>"},{value:"委托人:  "+i[1].ticketTask.senderName},{value:"检修标准编号:  "+L.standardProjectId},{value:"标准项目名称:  "+L.standardProjectName},{value:"处理方式:  临时委托"},{value:'<button class="btn btn-primary btn-sm trusting" value="'+i[1].ticketTask.variables.devName+","+i[1].ticketTask.variables.deviceCode+","+i[1].ticketTask.ticketNo+'">检修委托详情</button>'}]}]),"130"==i[1].ticketTask.variables.ticket.category){var r=i[1].ticketTask.variables.pointTicketNo;l=[{time:D(new Date(i[1].ticketTask.sendTime)),icon:"fa fa-user fa-fw fa-circle-o bg-green",disList:[{value:"<a>点检计划</a>"},{value:"处理人:  "+i[1].ticketTask.senderName},{value:"处理方式:  录入实绩"},{value:'<button class="btn btn-primary btn-sm dianjianyichang">任务详情</button>'}]},{time:D(new Date(i[1].ticketTask.sendTime)),icon:"fa fa-user fa-fw fa-circle bg-green",disList:[{value:"<a>点检异常</a>"},{value:"处理人:  "+i[1].ticketTask.handlerName},{value:"异常描述:  "+i[1].ticketTask.ticketTitle}]}]}for(var n=1;n<i.length;n++){var o={icon:"",disList:"",time:i[n].ticketTask.values?D(new Date(i[n].ticketTask.finishedTime)):""};if("endEvent"==i[n].logType&&(o.icon="fa fa-fw fa-circle bg-green",o.disList=[{value:i[n].message},{value:"处理人: "+i[n].ticketTask.handlerName}]),"userTask"==i[n].logType){var T;if(200==i[n].ticketTask.taskStatus?o.icon="fa fa-user bg-aqua":o.icon="fa fa-user bg-aqua bg-orange","checking"==i[n].ticketTask.variables.ticket.values.tickeTaskStatus)if(i[n].ticketTask.values)S.getRootScope("myDicts").statusGrade.forEach(function(e){e.valueCode!=i[n].ticketTask.values.statusGrade||(T=e.label)}),o.disList=[{value:"<a>"+i[n].message+"</a>"},{value:"诊断人: "+i[n].ticketTask.handlerName},{value:"综合状态等级: "+(T||"")},{value:"综合判断结论: "+i[n].ticketTask.values.multipleConclusion},{value:"处理方案建议:  "+(i[n].ticketTask.variables.cessingScheme?i[n].ticketTask.variables.cessingScheme:"")},{value:'<button class="btn btn-primary btn-sm checking" value="'+i[n].ticketTask.variables.devName+","+i[n].ticketTask.variables.deviceCode+","+i[n].ticketTask.id+","+i[n].ticketTask.ticketNo+'">详情</button>'}];else o.disList=[{value:"<a>"+i[n].message+"</a>"},{value:"诊断人: "+i[n].ticketTask.handlerName}];if("auditing"==i[n].ticketTask.variables.ticket.values.tickeTaskStatus&&(i[n].ticketTask.values?0==i[n].ticketTask.values.isAudit?o.disList=[{value:"<a>"+i[n].message+"</a>"},{value:"审核人: "+i[n].ticketTask.handlerName},{value:"审核结果:  驳回"},{value:"审核意见: "+i[n].ticketTask.values.auditOpinion}]:o.disList=[{value:"<a>"+i[n].message+"</a>"},{value:"审核人: "+i[n].ticketTask.handlerName},{value:0==i[n].ticketTask.values.isAudit?"审核结果:  驳回":"审核结果:  通过"},{value:"审核意见: "+i[n].ticketTask.values.auditOpinion},{value:'综合诊断报告:   <a target="_blank" href = "/api/rest/download/deviceResumeUIService/getReportBytes/'+i[n].ticketNo+".pdf/"+i[n].ticketNo+'">'+i[n].ticketNo+".pdf</a>"}]:o.disList=[{value:"<a>"+i[n].message+"</a>"},{value:"审核人: "+i[n].ticketTask.handlerName},{value:"审核结果:  待审核"}]),"trusting"==i[n].ticketTask.variables.ticket.values.tickeTaskStatus)if(i[n].ticketTask.values)if(1==i[n].ticketTask.values.dealType?m="暂不处理":2==i[n].ticketTask.values.dealType?m="自行处理":3==i[n].ticketTask.values.dealType&&(m="发起委托"),3==i[n].ticketTask.values.dealType)i[n].ticketTask.values.standardProjectId?o.disList=[{value:"<a>"+i[n].message+"</a>"},{value:"点检人: "+i[n].ticketTask.handlerName},{value:"处理方式: "+m},{value:"标准项目编号: "+i[n].ticketTask.values.standardProjectId},{value:"工程项目名称: "+L.standardProjectName},{value:"定年修主控重点: "+L.isSk},{value:"质量层级: "+L.qualityLevel},{value:"高危等级: "+L.highDangerLevel},{value:'<button class="btn btn-primary btn-sm trusting" value="'+i[n].ticketTask.variables.devName+","+i[n].ticketTask.variables.deviceCode+","+i[n].ticketTask.ticketNo+'">检修委托详情</button>'}]:o.disList=[{value:"<a>"+i[n].message+"</a>"},{value:"点检人: "+i[n].ticketTask.handlerName},{value:"处理方式: "+m},{value:'<button class="btn btn-primary btn-sm trusting" value="'+i[n].ticketTask.variables.devName+","+i[n].ticketTask.variables.deviceCode+","+i[n].ticketTask.ticketNo+'">检修委托详情</button>'}];else if(1==i[n].ticketTask.values.dealType){var d="";i[n].ticketTask.values.tallyCheckboxlist&&i[n].ticketTask.values.tallyCheckboxlist.forEach(function(e){d+=e.label+" ; "}),o.disList=[{value:"<a>"+i[n].message+"</a>"},{value:"点检人: "+i[n].ticketTask.handlerName},{value:"处理方式: "+m},{value:"处理原因: "+d},{value:i[n].ticketTask.values.tallyDealExplain?"处理说明: "+i[n].ticketTask.values.tallyDealExplain:"处理说明: "}]}else 17==i[n].ticketTask.values.dealType?o.disList=[{value:"<a>强制关闭</a>"},{value:"处理人: "+i[n].ticketTask.handlerName}]:o.disList=[{value:"<a>"+i[n].message+"</a>"},{value:"点检人: "+i[n].ticketTask.handlerName},{value:"处理方式: "+m},{value:"处理原因: "+i[n].ticketTask.values.tallyReason},{value:i[n].ticketTask.values.tallyCourseReason?"处理说明: "+i[n].ticketTask.values.tallyCourseReason:"处理说明: "}];else m="待委托",o.disList=[{value:"<a>"+i[n].message+"</a>"},{value:"点检人: "+i[n].ticketTask.handlerName},{value:"处理方式: "+m}];if("dealing"==i[n].ticketTask.variables.ticket.values.tickeTaskStatus&&"260"==i[n].ticketTask.variables.ticket.category){var b=i[n].ticketTask;I.forEach(function(e){e.valueCode!=i[n].ticketTask.variables.ticket.values.statusGrade||e.label}),o.time=D(new Date(i[n].ticketTask.sendTime)),o.disList=[{value:"<a>综合诊断</a>"},{value:"处理人:  "+i[n].ticketTask.senderName},{value:"<span style='color:#2997bb'>状态诊断<span>"},{value:"综合状态等级:  "+(T||"")},{value:"综合判断结论:  "+i[n].ticketTask.variables.ticket.values.multipleConclusion},{value:"处理方案建议:  "+(i[n].ticketTask.variables.ticket.values.cessingScheme?i[n].ticketTask.variables.ticket.values.cessingScheme:"")},{value:'<button class="btn btn-primary btn-sm dealing260" value="'+i[n].ticketTask.ticketNo+'">方案履历</button>'},{value:"<span style='color:#2997bb'>状态处理<span>"},{value:"处理人:  "+i[n].ticketTask.handlerName}],i[n].ticketTask.values&&2==i[n].ticketTask.values.complexDealType?o.disList=[{value:"<a>综合诊断</a>"},{value:"处理人:  "+i[n].ticketTask.senderName},{value:"<span style='color:#2997bb'>状态诊断<span>"},{value:"综合状态等级:  "+(T||"")},{value:"综合判断结论:  "+i[n].ticketTask.variables.ticket.values.multipleConclusion},{value:"处理方案建议:  "+(i[n].ticketTask.variables.ticket.values.cessingScheme?i[n].ticketTask.variables.ticket.values.cessingScheme:"")},{value:'<button class="btn btn-primary btn-sm dealing260" value="'+i[n].ticketTask.ticketNo+'">方案履历</button>'},{value:"<span style='color:#2997bb'>报警关闭<span>"},{value:"处理人:  "+i[n].ticketTask.handlerName},{value:"关闭原因:  "+i[n].ticketTask.values.colseReason}]:i[n].ticketTask.values&&(o.disList=[{value:"<a>综合诊断</a>"},{value:"处理人:  "+i[n].ticketTask.senderName},{value:"<span style='color:#2997bb'>状态诊断<span>"},{value:"综合状态等级:  "+(T||"")},{value:"综合判断结论:  "+i[n].ticketTask.variables.ticket.values.multipleConclusion},{value:"处理方案建议:  "+(i[n].ticketTask.variables.ticket.values.cessingScheme?i[n].ticketTask.variables.ticket.values.cessingScheme:"")},{value:"<span style='color:#2997bb'>状态处理<span>"},{value:"处理人:  "+i[n].ticketTask.handlerName},{value:"处理方式:  "+(E[i[n].ticketTask.values.dealType]?E[i[n].ticketTask.values.dealType]:"待处理")},{value:"检修标准编号:  "+(i[n].ticketTask.values.standardProjectId?i[n].ticketTask.values.standardProjectId:"")},{value:"标准项目名称:  "+(i[n].ticketTask.values.standardProjectName?i[n].ticketTask.values.standardProjectName:"")},{value:'<button class="btn btn-primary btn-sm dealing260" value="'+i[n].ticketTask.ticketNo+'">方案履历</button>'}])}else if("dealing"==i[n].ticketTask.variables.ticket.values.tickeTaskStatus){var m;if(i[n].ticketTask.values)if(1==i[n].ticketTask.values.dealType?m="暂不处理":2==i[n].ticketTask.values.dealType?m="自行处理":3==i[n].ticketTask.values.dealType&&(m="发起委托"),3==i[n].ticketTask.values.dealType)o.disList=[{value:"<a>检修计划</a>"},{value:"处理人:  "+i[n].ticketTask.handlerName},{value:"检修标准编号:  "+L.standardProjectId},{value:"标准项目名称:  "+L.standardProjectName},{value:"处理方式:  "+m},{value:'<button class="btn btn-primary btn-sm trusting" value="'+i[n].ticketTask.variables.devName+","+i[n].ticketTask.variables.deviceCode+","+i[n].ticketTask.ticketNo+'">检修委托详情</button>'}];else if(1==i[n].ticketTask.values.dealType){d="";i[n].ticketTask.values.tallyCheckboxlist&&i[n].ticketTask.values.tallyCheckboxlist.forEach(function(e){d+=e.label+" ; "}),o.disList=[{value:"<a>检修计划</a>"},{value:"点检人: "+i[n].ticketTask.handlerName},{value:"处理方式: "+m},{value:"处理原因: "+d},{value:i[n].ticketTask.values.tallyDealExplain?"处理说明: "+i[n].ticketTask.values.tallyDealExplain:"处理说明: "}]}else o.disList=[{value:"<a>检修计划</a>"},{value:"点检人: "+i[n].ticketTask.handlerName},{value:"处理方式: "+m},{value:"处理原因: "+i[n].ticketTask.values.tallyReason},{value:i[n].ticketTask.values.tallyCourseReason?"处理说明: "+i[n].ticketTask.values.tallyCourseReason:"处理说明: "}];else m="待处理",o.disList=[{value:"<a>"+i[n].message+"</a>"},{value:"点检人: "+i[n].ticketTask.handlerName},{value:"处理方式: "+m}]}if("maintaining"==i[n].ticketTask.variables.ticket.values.tickeTaskStatus&&(i[n].ticketTask.values?1==i[n].ticketTask.values.tempDealType?o.disList=[{value:"<a>检修实绩</a>"},{value:"检修人: "+i[n].ticketTask.handlerName},{value:"状态: 被退回"},{value:"退回说明: "+i[n].ticketTask.values.recallExplain}]:o.disList=[{value:"<a>检修实绩</a>"},{value:"检修人: "+i[n].ticketTask.handlerName},{value:'<button class="btn btn-primary btn-sm maintainingProject" value="'+i[n].ticketTask.variables.deviceCode+","+i[n].ticketTask.variables.standardProjectId+","+i[n].ticketTask.variables.deviceCode+","+i[n].ticketNo+'">维修方案</button>'},{value:"<button class='btn btn-primary btn-sm repairProject' value='"+JSON.stringify(i[n].ticketTask.values)+"'>检修实绩</button>"}]:o.disList=[{value:"<a>"+i[n].message+"</a>"},{value:"检修人: "+i[n].ticketTask.handlerName},{value:'<button class="btn btn-primary btn-sm maintainingProject" value="'+i[n].ticketTask.variables.deviceCode+","+i[n].ticketTask.variables.standardProjectId+","+i[n].ticketTask.variables.deviceCode+","+i[n].ticketNo+'">维修方案</button>'}]),"accepting"==i[n].ticketTask.variables.ticket.values.tickeTaskStatus&&("50"==i[n].ticketTask.variables.ticket.category?i[n].ticketTask.values?o.disList=[{value:"<a>"+i[n].message+"</a>"},{value:"验收人: "+i[n].ticketTask.handlerName},{value:"验收说明:  "+(i[n].ticketTask.values.tallyCheck?i[n].ticketTask.values.tallyCheck:"")},{value:"备注  : "+(i[n].ticketTask.values.tallyRemark?i[n].ticketTask.values.tallyRemark:"")}]:o.disList=[{value:"<a>"+i[n].message+"</a>"},{value:"验收人: "+i[n].ticketTask.handlerName},{value:"验收说明:  待验收"}]:i[n].ticketTask.values?o.disList=[{value:"<a>"+i[n].message+"</a>"},{value:"验收人: "+i[n].ticketTask.handlerName},{value:"<button class='btn btn-primary btn-sm taskEvaluate' value='"+JSON.stringify(i[n].ticketTask)+"'>验收说明</button>"}]:o.disList=[{value:"<a>"+i[n].message+"</a>"},{value:"处理人: "+i[n].ticketTask.handlerName},{value:"评价说明: 待评价"}]),"assessing"==i[n].ticketTask.variables.ticket.values.tickeTaskStatus)if(i[n].ticketTask.values){var g;if(i[n].ticketTask.values.abnormalEvaluateCheckboxlist)0==i[n].ticketTask.values.abnormalEvaluateCheckboxlist?g="有效":1==i[n].ticketTask.values.abnormalEvaluateCheckboxlist&&(g="无效"),o.disList=[{value:"<a>"+i[n].message+"</a>"},{value:"评价人: "+i[n].ticketTask.handlerName},{value:"异常处理等级:  "+g},{value:"评价说明  : "+(i[n].ticketTask.values.abnormalEvaluateDealExplain?i[n].ticketTask.values.abnormalEvaluateDealExplain:"")}];else g=0==i[n].ticketTask.values.tallyEvaluateCheckboxlist?"正确":1==i[n].ticketTask.values.tallyEvaluateCheckboxlist?"基本正确":"不正确",o.disList=[{value:"<a>"+i[n].message+"</a>"},{value:"评价人: "+i[n].ticketTask.handlerName},{value:"评价等级:  "+g},{value:"评价说明  : "+(i[n].ticketTask.values.tallyEvaluateDealExplain?i[n].ticketTask.values.tallyEvaluateDealExplain:"")}];if("50"!=i[n].ticketTask.variables.ticket.category){var p={value:"<button class='btn btn-primary btn-sm taskEvaluate' value='"+JSON.stringify(i[n].ticketTask)+"'>验收说明</button>"};o.disList.push(p)}}else o.disList=[{value:"<a>"+i[n].message+"</a>"},{value:"评价人: "+i[n].ticketTask.handlerName}];if("assessingAgain"==i[n].ticketTask.variables.ticket.values.tickeTaskStatus&&(i[n].ticketTask.values?o.disList=[{value:"<a>报警评价</a>"},{value:"评价人: "+i[n].ticketTask.handlerName},{value:"<button class='btn btn-primary btn-sm assessingAgain'  value='"+JSON.stringify(i[n].ticketTask)+"'>报警评价</button>"}]:o.disList=[{value:"<a>"+i[n].message+"</a>"},{value:"评价人: "+i[n].ticketTask.handlerName}]),"explaining"==i[n].ticketTask.variables.ticket.values.tickeTaskStatus)if(i[n].ticketTask.values){var f=i[n].ticketTask.variables.alertItemList;o.disList=[{value:"<a>"+i[n].message+"</a>"},{value:"说明人  : "+i[n].ticketTask.handlerName},{value:"关闭说明  : "+(i[n].ticketTask.values.diagnoseDeclare?i[n].ticketTask.values.diagnoseDeclare:"")},{value:"<button class='btn btn-primary btn-sm alertEvaluateInfoList'  value='"+JSON.stringify(i[n].ticketTask.values.alertEvaluateInfoList)+"'>报警评价</button>"}]}else o.disList=[{value:"<a>"+i[n].message+"</a>"},{value:"说明人: "+i[n].ticketTask.handlerName}];if("closing"==i[n].ticketTask.variables.ticket.values.tickeTaskStatus&&(i[n].ticketTask.values?o.disList=[{value:"<a>"+i[n].message+"</a>"},{value:"审核人: "+i[n].ticketTask.handlerName},{value:0==i[n].ticketTask.values.isClose?"审核结果:  驳回":"审核结果:  通过"},{value:"审核说明  : "+(i[n].ticketTask.values.auditDeclare?i[n].ticketTask.values.auditDeclare:"")}]:o.disList=[{value:"<a>"+i[n].message+"</a>"},{value:"审核人: "+i[n].ticketTask.handlerName}]),"120"==i[n].ticketTask.variables.ticket.category&&"backing"==i[n].ticketTask.variables.ticket.values.tickeTaskStatus&&(i[n].ticketTask.values&&5==i[n].ticketTask.values.tempDealType?o.disList=[{value:"<a>检修计划</a>"},{value:"处理人:  "+i[n].ticketTask.handlerName},{value:"检修标准编号:  "+i[n].ticketTask.values.standardProjectId},{value:"标准项目名称:  "+i[n].ticketTask.variables.standardInfo.standardProjectName},{value:"处理方式:  重新下发"},{value:'<button class="btn btn-primary btn-sm trusting" value="'+i[n].ticketTask.variables.devName+","+i[n].ticketTask.variables.deviceCode+","+i[n].ticketTask.ticketNo+'">检修委托详情</button>'}]:i[n].ticketTask.values&&4==i[n].ticketTask.values.tempDealType?o.disList=[{value:"<a>检修计划</a>"},{value:"处理人:  "+i[n].ticketTask.handlerName},{value:"检修标准编号:  "+i[n].ticketTask.variables.standardInfo.standardProjectId},{value:"标准项目名称:  "+i[n].ticketTask.variables.standardInfo.standardProjectName},{value:"处理方式:  点检关闭"},{value:"关闭说明:  "+i[n].ticketTask.values.closeReason}]:o.disList=[{value:"<a>检修计划</a>"},{value:"处理人:  "+i[n].ticketTask.handlerName}]),"100"==i[n].ticketTask.variables.ticket.category&&"end"==i[n].ticketTask.variables.ticket.values.tickeTaskStatus&&i[n].ticketTask.values){var y=i[n].ticketTask;o.disList=[{value:"<a>当日点检</a>"},{value:"处理人:  "+i[1].ticketTask.senderName},{value:"处理方式:  录入实绩"},{value:'<button class="btn btn-primary btn-sm dangridianjian">任务详情</button>'}]}"tempTrust"==i[n].ticketTask.variables.ticket.values.theTicketType&&"backing"==i[n].ticketTask.variables.ticket.values.tickeTaskStatus&&(i[n].ticketTask.values&&5==i[n].ticketTask.values.tempDealType?o.disList=[{value:"<a>临时委托</a>"},{value:"处理人:  "+i[n].ticketTask.handlerName},{value:"检修标准编号:  "+i[n].ticketTask.variables.ticket.values.standardProjectId},{value:"标准项目名称:  "+i[n].ticketTask.variables.ticket.values.standardProjectName},{value:"处理方式:  重新下发"},{value:'<button class="btn btn-primary btn-sm trusting" value="'+i[n].ticketTask.variables.devName+","+i[n].ticketTask.variables.deviceCode+","+i[n].ticketTask.ticketNo+'">检修委托详情</button>'}]:i[n].ticketTask.values&&4==i[n].ticketTask.values.tempDealType?o.disList=[{value:"<a>临时委托</a>"},{value:"处理人:  "+i[n].ticketTask.handlerName},{value:"处理方式: 关闭委托"},{value:"关闭说明: "+i[n].ticketTask.values.closeReason}]:o.disList=[{value:"<a>临时委托</a>"},{value:"处理人:  "+i[n].ticketTask.handlerName}])}l.push(o)}var h={validUserFlag:!1,variables:{"paramTicket._id":P}};S.getTicketTasksByCondition(h,function(e){if(0<e.length){var a={time:D(new Date(i[1].ticketTask.sendTime)),icon:10==e[0].taskStatus?"fa fa-user bg-orange":"fa  fa-user bg-aqua",disList:[{value:"<a>知识整理</a>"},{value:"整理人:  "+e[0].handlerName},{value:"审核结果:  "+(10==e[0].taskStatus?"未处理":1==e[0].values.dealType?" 知识整理":"忽略")}]};if(200==e[0].taskStatus&&1==e[0].values.dealType){var t={value:"整理判断依据:  "+e[0].values.typicalBasis.toString()};a.disList.push(t)}l.push(a),N.target.render(l),s()}else N.target.render(l),s()})}})):N.target.render([{time:"2017-11-12 12:30:10",icon:"fa fa-user fa-fw fa-circle-o bg-green",disList:[{value:"<a>报警产生</a>"},{value:"报警类型：振动报警"},{value:"报警级别：警告"},{value:"报警描述：速度有效值:1.250mm/s超出预警范围"}]},{time:"2017-11-12 12:30:10",icon:"fa fa-user bg-aqua bg-orange",disList:[{value:"<a>检修反馈</a>"}]},{time:"2017-11-12 12:30:10",icon:"fa fa-user fa-fw fa-circle-o bg-green",disList:[{value:"<a>检修反馈</a>"}]}])}}}});
//# sourceMappingURL=../../map/toolkit/component/history_tracker.js.map
