function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}define([],function(){return function(t){var p=$("<div></div>"),f=$('<ul class="nav nav-pills"></ul>'),e=$("<thead><th>时间</th><th>数据</th></thead>"),u=$("<tbody></tbody>"),a=$("<table width='100%' class='table table-hover no-margin'>"),v=t.element,g=t.serviceCenterService,r=t.timeout,h=t.global,i={},y=function(t,e){var a,r,n=function(t,a,r){var n;return $$.runExpression(t,function(t){if("0"!=t.code)throw new Error(t.message);var e=t.data;return"function"==typeof e?n=e(a,r):n}),n},o=v.$attr("data/applied")?"bind":"manual";v.$attr("data/legend")&&(a=t,r=n(v.$attr("data/legend")[o],e,i),a.$attr("legend/data",r)),function(n,t){if(t){var e=0<(r=t).length&&0==r[r.length-1].length?r.slice(0,-1):r;for(var a in e)!function(t,e){var a;a=n.series[n.series.length-1]?n.series[n.series.length-1].$clone():{};var r=null==n.series[t]?a:n.series[t].$clone();r.name=e.name,r.data=e.data,null==n.series[t]&&(n.series[t]=r),n.series[t].name=e.name,n.series[t].data=e.data}(a,e[a]);n.series.$remove(function(t,e){return!(e.hasOwnProperty("data")&&0<e.data.length)})}var r}(t,n(v.$attr("data/series")[o],e,i)),function(t,e,a){var r,n=(r=e)?0==r[r.length-1].length?r.slice(0,-1):r:[];if(n.length>=t[a].length){for(var o=0;o<t[a].length;o++)t[a][o].type="category",t[a][o].data=n[o];for(var i=t[a][o-1],s=o;s<n.length;s++)t[a][s]=i,t[a][s].type="category",t[a][s].data=n[s]}else{for(o=0;o<n.length;o++)t[a][o].type="category",t[a][o].data=n[o];for(i=n[o-1],s=o;s<t[a].length;s++)t[a][s].type="category",t[a][s].data=i}}(t,n(v.$attr("data/xAxis")[o],e,i),"xAxis")};1==v.$attr("attributes/vertical")?a.append(e).append(u):a.append(u),p.append(f),p.append(a);var m={series:[{}],legend:{data:[]},xAxis:[{type:"category",data:[]}]};return v.style&&p.css(v.style),r(function(){v.getCiKpi(function(t,e){var a,r,n=v.$attr("data/timespan")?v.$attr("data/timespan"):0,o=v.$attr("data/frequency")?v.$attr("data/frequency"):0,i=v.$attr("data/format")?v.$attr("data/format"):"",s=v.$attr("advance/category")?v.$attr("advance/category"):"";$$.runExpression(v.$attr("advance/expression"),function(t){if("0"!=t.code)throw new Error(t.message);var e=t.data;a=e||{}}),$$.runExpression(v.$attr("advance/condition"),function(t){if("0"!=t.code)throw new Error(t.message);var e=t.data;r=e||{}});var d=v.$attr("advance/getfunction")?v.$attr("advance/getfunction"):"kpiDataService.getValueList",c=v.$attr("advance/paramtype")?v.$attr("advance/paramtype"):"kpi";function l(n){y(m,n),function(a,t){var e=function(t,e){a.on(t,function(t){e({echart:t,global:h,tools:n,ui:v})})};for(var r in t)e(r,t[r])}(p,a.$attr("on")),"object"==_typeof(v.parameters)&&y(m,v.parameters),function(i){if(1==v.$attr("parameters/vertical")){f.children().remove();var t=function(t,e){var a=$("<li><a>"+i.legend.data[t]+"</a></li>"),r=function(t){for(var e in u.children().remove(),t){var a=$("<tr></tr>"),r=$("<td></td>").css("width","50%").text(xAxis[e]),n=$("<td></td>").css("width","50%").text(t[e]);a.append(r).append(n),u.append(a)}};a.css("cursor","pointer"),a.data("inx",t),0==t&&a.addClass("active"),f.append(a),a.on("click",function(){f.find("li").removeClass("active"),$(this).addClass("active"),r(e[t].data)}),r(e[t].data)};for(var e in i.series)t(e,i.series)}else{u.children().remove();var a=function(t,e){var a,r,n=$("<tr></tr>"),o=$("<th></th>").css("color","#3c8dbc").css("text-align","left").text(i.legend.data[t]);for(var t in n.append(o),u.append(n),e.data)n.append((a=e.data[t],r=void 0,r=$("<td></td>").css("color","#777").css("text-align","center").css("font-weight","bold").text(a),t%2==0&&r.css("background-color","#eee"),r))};for(var e in u.append(function(t){var e,a,r,n=$("<tr></tr>");for(var o in n.append($("<th></th>").text("时间")),t)n.append((a=t[e=o],r=void 0,r=$("<th></th>").text(a).css("text-align","center"),e%2==0&&r.css("background-color","#eee"),r));return n}(i.xAxis[0].data)),i.series)u.append(a(e,i.series[e]))}}(m)}v.$attr("data/applied")?g.getValueListBytime(t,e,n,o,i,s,c,d,r).then(function(t){l(t)},function(t){l(t)}):l({})})}),p}});
//# sourceMappingURL=../../map/toolkit/component/datalist.js.map
