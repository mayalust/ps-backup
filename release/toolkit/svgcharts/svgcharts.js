function createCharts(m){return{init:function(t,r){var O,o,l,C=["#00bc79","#ece417","#ee6b1c"],a=m.select(t).append("svg"),u=a.append("defs"),c=a.append("g"),h=1e3,d=a.append("g"),n=r||null,e=function(t,r){t=t;var a=r.color1||"#000",n=r.color2||"#fff",e=r.x1||"0%",i=r.y1||"0%",o=r.x2||"100%",l=r.y2||"0%",s=u.append("linearGradient").attr("id",t).attr("x1",e).attr("y1",i).attr("x2",o).attr("y2",l);s.append("stop").attr("offset","0%").style("stop-color",a),s.append("stop").attr("offset","100%").style("stop-color",n)},i=function(){o=$(t).width(),l=$(t).height(),a.attr("width",o),a.attr("height",l)},f=function(t,r){var a="M0 0 ",n=r/180*Math.PI;return a+="L"+t/2+" -"+t*Math.sin(n)+" ",a+="L"+t+" 0 ",a+="L"+t/2+" "+t*Math.sin(n)+" ",a+="L0 0 "},p=function(t,r,a){var n=a/180*Math.PI,e="M0 "+t*Math.sin(n)+" ";return e+="L-"+t/2+" 0 ",e+="L-"+t/2+" "+r+" ",e+="L0 "+(r+t*Math.sin(n))+" ",e+="L0 0 "},x=function(t,r,a){var n=a/180*Math.PI,e="M0 "+t*Math.sin(n)+" ";return e+="L"+t/2+" 0 ",e+="L"+t/2+" "+r+" ",e+="L0 "+(r+t*Math.sin(n))+" ",e+="L0 0 "},s=function(t,r){var a=[/(\d+)\%/];if(a[0].exec(r)[1])return t*parseInt(a[0].exec(r)[1])/100},g=function(t){var r=t.reduce(function(t,r){if(r.stack)for(var a in t[r.stack]=t[r.stack]||[],r.data)t[r.stack][a]=t[r.stack][a]||0,t[r.stack][a]+=parseInt(r.data[a]);else for(var a in t[r.name]=t[r.name]||[],r.data)t[r.name][a]=t[r.name][a]||0,t[r.name][a]+=parseInt(r.data[a]);return t},{}),a=[];for(var n in r)Array.prototype.push.apply(a,r[n]);return 1.2*Math.max.apply(null,a)},y=function(t){var r,a,n,e=O.width,l=O.height,i=t.xAxis||null,s=t.yAxis||null,B=s&&s.max||g(t.series);!function(){c.selectAll("*").remove();i&&0!=i.show&&(t=i.data,r=c.append("g"),a=m.scaleOrdinal().domain(t).range(function(t,r){if(2<r){for(var a=[],n=t/r,e=0;e<r;e++)a.push(e*n);return a}return[]}(e,t.length)),n=e/t.length,r.call(m.axisBottom(a)),r.selectAll("text").attr("fill",i.$attr("axisLabel/color")||"#333").attr("y",i.$attr("axisLabel/margin")||9).style("display",0==i.$attr("axisLabel/show")?"none":"display"),r.selectAll("line").attr("stroke",i.$attr("axisLine/lineStyle/color")||"#333").style("display",0==i.$attr("axisLine/show")?"none":"display"),r.selectAll("path").attr("stroke",i.$attr("axisTick/color")||"#333").style("display",0==i.$attr("axisTick/show")?"none":"display"),r.attr("transform","translate("+(O.left+n/2)+", "+(l+O.top)+")")),s&&0!=s.show&&function(t){var r=c.append("path"),a=c.append("g"),n=m.scaleLinear().domain([0,B]).range([l,0]),e=s.$attr("base/margin")||-10;r.attr("d","M0 0 L"+O.width+" 0 L"+1.02*O.width+" 25 L-"+.02*O.width+" 25 L0 0"),r.attr("transform","translate("+O.left+","+(O.height+O.top+e)+")"),r.attr("fill","url(#base)");var i=m.axisLeft(n);i.ticks(s.$attr("splitNumber")||5),a.call(i),a.selectAll("text").attr("fill",s.$attr("axisLabel/color")||"#333").attr("x",-s.$attr("axisLabel/margin")||-9).style("display",0==s.$attr("axisLabel/show")?"none":"display");var o=a.selectAll("line").attr("stroke",s.$attr("axisLine/lineStyle/color")||"#333").style("display",0==s.$attr("axisLine/show")?"none":"display");a.selectAll("path").attr("stroke",s.$attr("axisTick/color")||"#333").style("display",0==s.$attr("axisTick/show")?"none":"display"),o.attr("x1",-6),o.attr("x2",O.width),a.attr("transform","translate("+O.left+", "+O.top+")")}(s.data);var t,r,a,n}(),r=t.series,a=r.reduce(function(t,r){return-1==t.indexOf(r.type)&&t.push(r.type),t},[]),n=function(D){var M=O.width/D[0].data.length,T=[],S={};for(var t in D)-1==T.indexOf(D[t].stack)&&(T.push(D[t].stack),S[D[t].stack]=[]);var r={line:[],bar:[]},a=function(c,h){var d=0,f=h.barwidth||.6,t=D.filter(function(t){return t.stack==h.stack}),p=(T.indexOf(h.stack),t.indexOf(h));Array.prototype.push.apply(r.bar,h.data.map(function(t){S[h.stack][d]||(S[h.stack][d]=0),S[h.stack][d]+=t;var r,a,n,e,i,o,l,s=h.$attr("itemStyle/normal/color")||C[c],u=(r=d,a=S[h.stack][d],n=h.data.length,e=p,T.length,i=f,l=M/s*o,{x:O.left+(r+(1-o)/2)*M+e*l,y:O.height*(1-n/B)+O.top,width:l,height:a/B*O.height,color:i});return d++,u}))},n=function(m,k){var A=0,L=k.barwidth||.6,v=k.degree||8,t=D.filter(function(t){return t.stack==k.stack}),$=T.indexOf(k.stack);t.indexOf(k),Array.prototype.push.apply(r.bar,k.data.map(function(t){S[k.stack][A]||(S[k.stack][A]=0),S[k.stack][A]+=parseInt(t);var r,a,n,e,i,o,l,s,u,c,h,d,f=D.slice(m,-1),p=0<m?D.slice(0,m):[],x=f.every(function(t){return t.stack!=k.stack}),g=p.every(function(t){return t.stack!=k.stack}),y=k.colors||[],b=k.$attr("itemStyle/normal/color")||y[A]||C[m],w=(r=A,n=t,e=S[(a=k).stack][A],k.data.length,i=$,o=T.length,l=b,u=v,c=x,h=g,d=M/o*(s=L),{x:O.left+(r+(1-s)/2)*M+i*d,y:0<B?O.height*(1-e/B)+O.top:O.height+O.top,width:d,height:0<B?n/B*O.height:0,stackHeight:0<B?e/B*O.height:0,color:l,degree:u,isTop:c,isBottom:h,value:e,label:{normal:{show:!1}}.$extension(a.label||{})});return A++,w}))};for(var t in D)"bar"==D[t].type?a(t,D[t]):"3dbar"==D[t].type?n(t,D[t]):"line"==D[t].type&&D[t];return r}(r),-1!=a.indexOf("bar")?(d.selectAll("rect#bar").data(n.bar).transition().duration(h).attr("width",function(t){return t.width+"px"}).attr("fill",function(t){return t.color}).attr("height",function(t){return t.height}).attr("transform",function(t){return"translate("+t.x+","+t.y+")"}),d.selectAll("rect#bar").data(n.bar).enter().append("rect").attr("id","bar").attr("width",function(t){return t.width+"px"}).attr("fill",function(t){return t.color}).attr("height",function(t){return 0}).attr("transform",function(t){return"translate("+t.x+","+(O.height+O.top)+")"}).transition().duration(h).attr("height",function(t){return t.height}).attr("transform",function(t){return"translate("+t.x+","+t.y+")"}),d.selectAll("rect#bar").data(n.bar).exit().transition().duration(h).attr("height",function(t){return 0}).attr("transform",function(t){return"translate("+t.x+","+(O.height+O.top)+")"})):-1!=a.indexOf("3dbar")&&(d.selectAll("path#threeDbarBC").data(n.bar).transition().duration(h).attr("d",function(t){return f(1.4*t.width,t.degree)}).attr("transform",function(t){return"translate("+(t.x-.2*t.width)+","+(t.y+t.height)+")"}),d.selectAll("path#threeDbarBC").data(n.bar).enter().append("path").attr("id","threeDbarBC").attr("d",function(t){return f(1.4*t.width,t.degree)}).style("display",function(t){return t.isBottom?"display":"none"}).attr("fill",function(t){return"url(#container)"}).attr("transform",function(t){return"translate("+(t.x-.2*t.width)+","+(O.height+O.top)+")"}).transition().duration(h).attr("transform",function(t){return"translate("+(t.x-.2*t.width)+","+(t.y+t.height)+")"}),d.selectAll("path#threeDbarBC").data(n.bar).exit().transition().duration(h).attr("transform",function(t){return"translate("+t.x+","+(O.height+O.top)+")"}),d.selectAll("rect#threeDbarBottom").data(n.bar).transition().duration(h).attr("width",function(t){return t.width+"px"}).attr("fill",function(t){return t.color}).attr("height",function(t){return t.height}).attr("transform",function(t){return"translate("+t.x+","+t.y+")"}),d.selectAll("rect#threeDbarBottom").data(n.bar).enter().append("rect").attr("id","threeDbarBottom").attr("width",function(t){return t.width+"px"}).attr("fill",function(t){return t.color}).attr("height",function(t){return 0}).attr("transform",function(t){return"translate("+t.x+","+(O.height+O.top)+")"}).transition().duration(h).attr("height",function(t){return t.height}).attr("transform",function(t){return"translate("+t.x+","+t.y+")"}),d.selectAll("rect#threeDbarBottom").data(n.bar).exit().transition().duration(h).attr("height",function(t){return 0}).attr("transform",function(t){return"translate("+t.x+","+(O.height+O.top)+")"}),d.selectAll("path#threeDbarTop").data(n.bar).transition().duration(h).attr("d",function(t){return f(t.width,t.degree)}).attr("fill",function(t){return t.color}).attr("transform",function(t){return"translate("+t.x+","+(t.y+t.height)+")"}),d.selectAll("path#threeDbarTop").data(n.bar).enter().append("path").attr("id","threeDbarTop").attr("d",function(t){return f(t.width,t.degree)}).attr("fill",function(t){return t.color}).attr("transform",function(t){return"translate("+t.x+","+(O.height+O.top)+")"}).transition().duration(h).attr("transform",function(t){return"translate("+t.x+","+(t.y+t.height)+")"}),d.selectAll("path#threeDbarTop").data(n.bar).exit().transition().duration(h).attr("transform",function(t){return"translate("+t.x+","+(O.height+O.top)+")"}),d.selectAll("path#threeDbarShadowRight").data(n.bar).transition().duration(h).attr("d",function(t){return x(t.width,t.stackHeight,t.degree)}).attr("transform",function(t){return"translate("+(t.x+t.width/2)+","+t.y+")"}),d.selectAll("path#threeDbarShadowRight").data(n.bar).enter().append("path").attr("id","threeDbarShadowRight").attr("d",function(t){return x(t.width,0,t.degree)}).attr("fill",function(t){return"url(#shadowGradientRight)"}).attr("transform",function(t){return"translate("+(t.x+t.width/2)+","+(t.y+t.stackHeight)+")"}).style("display",function(t){return t.isTop?"display":"none"}).transition().duration(h).attr("transform",function(t){return"translate("+(t.x+t.width/2)+","+t.y+")"}).attr("d",function(t){return x(t.width,t.stackHeight,t.degree)}),d.selectAll("path#threeDbarShadowRight").data(n.bar).exit().transition().duration(h),d.selectAll("path#threeDbarShadowLeft").data(n.bar).transition().duration(h).attr("d",function(t){return p(t.width,t.stackHeight,t.degree)}).attr("transform",function(t){return"translate("+(t.x+t.width/2)+","+t.y+")"}),d.selectAll("path#threeDbarShadowLeft").data(n.bar).enter().append("path").attr("id","threeDbarShadowLeft").attr("d",function(t){return p(t.width,0,t.degree)}).style("fill",function(t){return"url(#shadowGradientLeft)"}).attr("opacity",function(t){return 1}).attr("transform",function(t){return"translate("+(t.x+t.width/2)+","+(t.y+t.stackHeight)+")"}).style("display",function(t){return t.isTop?"display":"none"}).transition().duration(h).attr("transform",function(t){return"translate("+(t.x+t.width/2)+","+t.y+")"}).attr("d",function(t){return p(t.width,t.stackHeight,t.degree)}),d.selectAll("path#threeDbarShadowLeft").data(n.bar).exit().transition().duration(h),d.selectAll("path#threeDbar").data(n.bar).transition().duration(h).attr("d",function(t){return f(t.width,t.degree)}).attr("fill",function(t){return t.color}).attr("transform",function(t){return"translate("+t.x+","+t.y+")"}),d.selectAll("path#threeDbar").data(n.bar).enter().append("path").attr("id","threeDbar").attr("d",function(t){return f(t.width,t.degree)}).attr("fill",function(t){return t.color}).attr("transform",function(t){return"translate("+t.x+","+(O.height+O.top)+")"}).style("display",function(t){return t.isTop?"display":"none"}).transition().duration(h).attr("transform",function(t){return"translate("+t.x+","+t.y+")"}),d.selectAll("path#threeDbar").data(n.bar).exit().transition().duration(h).attr("transform",function(t){return"translate("+t.x+","+(O.height+O.top)+")"}),d.selectAll("text#instruction").data(n.bar).transition().duration(h).attr("fill",function(t){return t.$attr("label/normal/color")||"#fff"}).attr("x",function(t){return t.x+10}).attr("y",function(t){return t.y-10}).style("display",function(t){return 0!=t.$attr("label/normal/show")}),d.selectAll("text#instruction").data(n.bar).enter().append("text").attr("id","instruction").attr("fill",function(t){return t.$attr("label/normal/color")||"#fff"}).style("font-weight","bold").style("display",function(t){return 0!=t.$attr("label/normal/show")?"block":"none"}).text(function(t){return t.value}).attr("x",function(t){return t.x+10}).attr("y",function(t){return O.height+O.top}).transition().duration(h).attr("x",function(t){return t.x+10}).attr("y",function(t){return t.y-10}),d.selectAll("text#instruction").data(n.bar).exit().transition().duration(h).attr("x",function(t){return t.x+10}).attr("y",function(t){return O.height+O.top}))},b=function(t){var r={top:"10%",left:"10%",width:"80%",height:"80%"}.$extension(t),a=s(l,r.top),n=s(o,r.width),e=s(l,r.height),i=s(o,r.left);O={top:a,width:n,height:e,left:i}},w=function(t,r){setTimeout(function(){i(),r&&(b(r.grid),y(r))})};return w.prototype.setOption=y,w.prototype.refresh=function(){},c.attr("id","axis"),d.attr("id","series"),$(window).on("resize",function(t){setTimeout(function(){i(),b(n.grid),y(n)})}),e("shadowGradientLeft",{color1:"rgba(0,0,0,.1)",color2:"rgba(0,0,0,0)",x1:"0%",y1:"0%",x2:"0%",y2:"1000%"}),e("shadowGradientRight",{color1:"rgba(0,0,0,.5)",color2:"rgba(0,0,0,.3)"}),e("container",{color1:"#aaa",color2:"#ddd"}),e("base",{color1:"rgba(250,250,250,0)",color2:"rgba(250,250,250,.5)",x1:"0%",y1:"0%",x2:"0%",y2:"100%"}),new w(t,n)}}}"function"==typeof define?define(["d3"],createCharts):window.svgcharts=createCharts(d3);
//# sourceMappingURL=../../map/toolkit/svgcharts/svgcharts.js.map
