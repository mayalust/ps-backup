define(["controllers/controllers"],function(t){"use strict";t.controller("userShopCtrl",["$scope","$location","Info","userLoginUIService","unitService","dictionaryService","resourceUIService","modelDefinitionService","growl","configUIService",function(r,i,t,o,s,a,u,c,e,l){r.treeviewIndex="",r.oldTreeviewIndex="",r.currentMenuCode=null,r.firstMenuCode=null,r.localMenuCode="F01",r.showMenu=!1,r.menuitems={},r.$on("$routeChangeSuccess",function(){o.rootHandler(r,i)}),r.shopLoginStatus="";t.get("localdb/info.json",function(t){r.menu=t.menu,r.feature=t.uniqueList});r.myOptionDic={},r.menusFilter=function(t){return"S"===t.functionCode.charAt(0)},r.gotoHomePage=function(){"0"!=o.user.enterprise.logoStatus&&(location.href="http://www.proudsmart.com")},r.logout=function(){o.logout()};r.$on("loginStatusChanged",function(t,e){var n;o.user.isAuthenticated?(r.shopLoginStatus="login",r.userInfo=o.user,r.lastLoginTime=newDateJson(o.user.lastLoginTime).Format(GetDateCategoryStrByLabel()),n=function(){o.initMenus(r,i)},l.getConfigsByGroupName("EnterpriseConfig",function(t){0==t.code&&(t.data&&0<t.data.length?t.data.forEach(function(t){try{r.baseConfig?r.baseConfig=jQuery.extend(!0,r.baseConfig,JSON.parse(t.value)):r.baseConfig=JSON.parse(t.value),r.baseConfig&&(r.baseConfig.title?$("title").html(r.baseConfig.title):$("title").html(""),r.baseConfig.shortcut?$("link[rel='shortcut icon']").attr("href","../"+r.baseConfig.shortcut+"?"+(new Date).getTime()):$("link[rel='shortcut icon']").attr("href","../../login/images/shortcut_null.png?"+(new Date).getTime()))}catch(t){}}):($("title").html(""),$("link[rel='shortcut icon']").attr("href","../../login/images/shortcut_null.png?"+(new Date).getTime())),n())}),s.getAllUnits(function(t){if(0==t.code){for(var e in s.units=t.data,r.myOptions=t.data,r.myOptions)r.myOptionDic[r.myOptions[e].unitCode]=r.myOptions[e].unitName,"NA"!=r.myOptions[e].unitCode&&"Number"!=r.myOptions[e].unitCode||(r.myOptionDic[r.myOptions[e].unitCode]="");s.unitDics=r.myOptionDic}}),a.getAllDicts(function(t){if(0==t.code){a.dicts=t.data,r.myDicts=t.data;var e={};for(var n in t.data){var i=t.data[n];e[i.dictCode]||(e[i.dictCode]=[]),e[i.dictCode].push(i)}for(var o in e)r.myDicts[o]=e[o]}}),u.hasOwnProperty("provinces")||u.getSimpleDistricts(function(t){0==t.code&&(u.provinces=t.data,r.provinces=t.data)}),c.findAllIndustry(function(t){0==t.code&&(r.industries=t.data)})):r.shopLoginStatus="loginOut"})}])});
//# sourceMappingURL=../../../map/app-ac/js/controllers/user-shop-ctrl.js.map
