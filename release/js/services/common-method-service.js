function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}define(["./services.js","bootstrap-dialog","../../toolkit/date-handler.js"],function(pe,fe,ge){"use strict";window;return pe.factory("commonMethodService",["$location","$state","$stateParams","userEnterpriseService","$timeout","$rootScope","$q","$routeParams","Info","customMethodService","projectUIService","serviceCenterService","dictionaryService","energyConsumeUIService","ticketTaskService","resourceUIService","viewFlexService","userLoginUIService","$route","$window","growl","kpiDataService","SwSocket","alertService","userDomainService","thridPartyApiService","freeboardBaseService","configUIService","serviceProxy","FileUploader","maintenanceTaskUIService","sparePartUIService","deviceResumeUIService","rollerPartUIService","$registerService","psTreeData","psUiRouterHandler","psLoading","unitService","commonMethodService2",function(B,w,S,k,e,x,P,A,V,O,M,R,L,j,N,F,E,_,G,H,J,q,U,z,K,W,Q,Y,X,Z,ee,te,ne,oe,ae,ie,t,re,ce,le){var ue,o,n,de=(o=[],(n=function e(t,n){if(void 0===n)return e["_"+t];e["_"+t]=n,o.push(t)}).keys=function(){return o},n),a=new i;function i(){}function se(e,t){return function(){return t.apply(e,arguments)}}return i.prototype.setVal=function(e,t){this[e]=t},i.prototype.getVal=function(e){return this[e]},a.setVal("智能诊断","综合处理"),a.setVal("在线预警","综合处理"),a.setVal("离线诊断","综合处理"),a.setVal("合并报警","综合处理"),a.setVal("智能决策","综合处理"),a.setVal("故障漏报","故障分析"),a.setVal("智能检修标准","计划实施"),a.setVal("状态维护标准","计划实施"),a.setVal("临时检修委托","计划实施"),a.setVal("临时维护委托","计划实施"),function n(e,o){var h,t,a,i,c={},r={},l=new I,u=[];function d(e){var t=b(e);return function e(t){if("[object Array]"==Object.prototype.toString.call(t))for(var n=0;n<t.length;n++)if(t[n].label||t[n].name){var o=t[n].name;999<parseInt(o)&&(t.splice(n,1),n--)}else e(t[n]);else if("[object Object]"==Object.prototype.toString.call(t))for(var n in t)e(t[n])}(t),JSON.stringify(t)}function s(e,t){for(var n in t)e[n]=t[n]}function p(e){return JSON.parse(JSON.stringify(e))}var b=function(e){var t;if("object"==_typeof(e))return e;try{t=JSON.parse(e)}catch(e){t=null}finally{return t}},f={default:"default",Cyborg:"dark",Slate:"dark",Solar:"macarons"},C=function(e){e&&this.$clone(e)},g=C.prototype;g.refresh=le.refresh,g.getTaskJob=se(le,le.getTaskJob),g.getAppSource=se(le,le.getAppSource),C.kpiDic={},C.resourceDic={};var y=function(e,t,n,o){(c=this).setValue("$POPUPDATA",n),t=t||{};var a=$("body"),i=(t.closeBtn,h&&b(h.setting),t.$attr("on/submit")),r=t.$attr("on/cancel"),c=this,l=$('<div id="bootstrap-dialog" class="modal bootstrap-dialog type-primary fade size-normal in" style="display : table-cell;" popup_layer="popup_layer">        <div class="modal-dialog">          <div class="modal-content">          <div class="modal-header bg-f2 padding-bottom-20">          <div class="bootstrap-dialog-header">          <a role="button" class="close">×</a>        <h4 class="modal-title info-box-number"></h4>          </div>          </div>          <div class="modal-body no-pad-top">          </div>          </div>          </div>          </div>'),u=l.find(".modal-dialog");u.addClass("steel"),t.bgOpacity&&$(".bootstrap-dialog").css("background-color","rgba(0, 0, 0, 0.8)"),u.css("height","auto"),l.addClass("block"),u.css("min-height","0");var d=l.find(".modal-dialog");l.find("h4").text(t.title||"标题文字");var s=l.find(".modal-body"),p=($("<div></div>"),$("<div></div>")),f=l.find("a.close");$("<div></div>"),l.css("z-index",o+1||1e4),null!=t.width&&d.css("width",t.width);var g=$("<div></div>");g.addClass("row"),g.append(p),s.append(g),s.attr("id","pp"),p.css("position","relative"),p.addClass("col-md-12"),p.attr("id","popup"),p.css("width","100%"),p.css("padding-top","10px");var y=function(){d.animate({"margin-top":0},300,function(){l.remove(),c.setValue("$POPUPDATA",null)}),l.animate({opacity:0},100)};f.on("click",function(e){r&&r(),y()});var v=Q(p);v.setMode(!0),e.groups&&(e.layout=e.groups[0].layout,delete e.groups),e.layout&&(e.layout=e.layout.$remapByChild(function(e){var t=new C(e);return t.submit=function(e){"cancel"==e.statuc?y():i&&i(e,y)},t.cancel=function(){r&&r(),y()},t}),v.renderLayout(e)),l.addClass("block"),l.attr("id","free-board"),l.css("opacity",0),l.css("position","absolute"),l.css("overflow-y","auto"),l.animate({opacity:1},100),d.css("margin-top",0),d.animate({"margin-top":t.top},300);var m=$("[popup_layer]");return 0<m.size()?m.after(l):a.prepend(l),{destroy:y}},v=function(e,t,n,o){(u=this).setValue("$POPUPDATA",n);var a=(t=t||{}).renderTo||$("body"),i=t.closeBtn,r=t.bgOpacity;null==r&&(r=.1);var c=t.$attr("on/submit"),l=t.$attr("on/cancel"),u=this,d=$("<div></div>");d.attr("popup_layer","popup_layer");var s=$("<div></div>"),p=$("<div></div>"),f=$("<button></button>"),g=$("<div></div>");s.attr("id","popup_background"),s.css("position","fixed"),s.css("width","100vw"),s.css("height","100vh"),s.css("background-color","rgba(0,0,0,"+r+")"),s.css("top",0),s.css("left",0),s.css("z-index",o||9999),d.css("z-index",o+1||1e4),"self"==a&&(a=u.getSelfDom()),null!=t.top&&d.css("top",t.top),null!=t.left&&d.css("left",t.left),null!=t.right&&d.css("right",t.right),null!=t.bottom&&d.css("bottom",t.bottom),f.css("position","absolute"),f.css("right",5),f.css("top",5),f.css("z-index",10),f.addClass("btn-sm btn-default"),f.css({border:"1px solid rgb(67, 133, 187)",color:"#ffffff",backgroundColor:"rgb(67, 133, 187)"}),g.addClass("glyphicon glyphicon-remove"),f.append(g),0!=i&&d.append(f),d.append(p),d.attr("id","pp"),p.css("position","relative"),p.addClass("col-md-12"),p.attr("id","popup"),d.css("position","absolute"),d.css("width",t.width||"400px"),p.css("width","100%"),p.css("background-color","#fff"),p.css("box-shadow","1px 1px 10px 1px rgba(0,0,0,.1)"),f.on("click",function(e){d.remove(),l&&l()}),s.on("click",function(e){l&&l(),d.remove(),s.remove()});var y=Q(p);y.setMode(!0),e.layout=e.layout.$remapByChild(function(e){var t=new C(e);return t.submit=function(e){c&&c(e),d.remove(),s.remove()},t.cancel=function(){l&&l(),d.remove(),s.remove()},t}),y.renderLayout(e),a.prepend(d),d.addClass("block"),d.css("opacity",0),d.animate({opacity:1},100),s.css("opacity",0),s.animate({opacity:1},200),$("body").append(s)},m=function(e){return"function"==typeof e?e.toString():null==typeof e?"null":"object"==_typeof(e)?JSON.stringify(e,null,2):"string"==typeof e?e:"number"==typeof e?e+"":null==_typeof(e)?"undefined":"无效字符"};function I(){}function T(e){var t;try{t=JSON.parse(e)}catch(e){console.error(e)}return t}function T(e){var t;try{t=JSON.parse(e)}catch(e){return}return"object"==_typeof(t)?t:void 0}C.clearEvents=C.prototype.clearEvents=function(){for(var e in r)delete r[e]},g.getView=function(e,o){var a,t=e.item,n=function(e){var t={view:{regex:"^\\s*viewId\\s*\\:\\s*(\\d+)\\s*$",handler:function(e){return{viewId:e}}},ctrl:{regex:"^\\s*viewCtrl\\s*\\:\\s*([-$\\w\\d]+)\\s*$",handler:function(e){return{viewCtrl:e}}},word:{regex:"^\\s*[\\w\\d]+\\s*$",handler:function(e){return{path:e}}}};for(var n in t)if(a=new RegExp(t[n].regex).exec(e))return t[n].handler(a[1]);console.warn("无效配置项，采用默认视图ID")}(e.path),i=n&&n.viewId||t.viewId,r=n&&n.viewCtrl,c=n&&n.path;r?o&&o(g.createInjectorCtrlView(r)):i?g.getViewById(i,function(e){var t=function(e){var t=null;try{t=JSON.parse(e)}catch(e){console.warn(e)}return t}(e.content),n=t.groups;t?(t.layout=c&&n?n.find(function(e){return e.path==c}):t.layout,o&&o(t)):g.Info("../../localdb/echartTemplate/baogang/nographe.json",function(e){o&&o(e)})}):g.Info("../../localdb/echartTemplate/"+t.default+".json",function(e){if(c){var t=e.groups.find(function(e){return e.path==c});e.layout=t.layout}o&&o(e)})},g.createInjectorCtrlView=function(e){return{layout:{type:"column",children:[{label:"视图嵌入",type:"injector",source:"INJECTOR",parameters:{icon:{id:0,perfix:"ion",css:"ion-ios-gear-outline"}},advance:{getfunction:"",expression:'expression = {\n  on : {\n      init : function(event){\n          var target = event.target;\n          target.renderCtrl("'+e+'");\n      }\n  }\n}'},style:{},children:[]}],col:12},setting:'{\n  "theme": "steel"\n}'}},g.createRenderCtrl=function(e){var t=P.defer();H._newScope&&H._newScope.$destroy();var n=document.createElement(e);return psrequire(["../ps-baogang/build/directive/"+e+".js|css"],function(e){try{e(ae)}catch(e){console.error(e)}t.resolve(n)}),t.promise},C.prototype.getRootScope=function(e){return e?x.$$childHead[e]:x.$$childHead},C.prototype.jsonp=function(e,t,n,o){var a=document.createElement("script"),i="fn_"+function(e){for(var t="",n="0123456789abcdefjhijklmnopqrstuvwxyz",o=0;o<e;o++)t+=n[parseInt(Math.random()*(n.length-1))];return t}(16);a.setAttribute("src",e+"&"+t+"="+i),document.body.append(a),H[i]=function(e){n&&n(e),delete H[i]},a.onerror=function(e){o(e),a.remove(),a=null,console.error(e)},a.onload=function(e){a.remove(),a=null}},g.getState=function(e,t){ie(e).getState().then(function(e){t(e)})},g.getChildren=function(e,t){ie(e).getChildren(function(e,t,n){return n<2}).then(function(e){t(e)})},g.resourceClick=function(a,i,r){var c=this;ie(i).getPathAndShowTreeLocation().then(function(e){var t=e.showTree,n=e.location,o={showTree:t,id:i,index:n};r&&(o=s(o,r)),c.navigateTo(n,a,o)})},g.$getKpisByModelId=function(a,i){F.modelLoader().then(function(e){var t=e[a].kpiDic,n=[];for(var o in t)n.push(t[o]);i(n)})},g.getAllUnits=function(t){ce.getAllUnits(function(e){"0"==e.code&&t(e.data)})},C.prototype.nextTick=function(e){setTimeout(e,500)},C.prototype.topDateString=function(e,a){var i=[{exp:/d+/g,divide:864e5},{exp:/h+/g,divide:36e5},{exp:/n+/g,divide:6e4},{exp:/s+/g,divide:60}];return function e(t,n){if(i[t]){if(i[t].exp.exec(a)){var o=Math.floor(n/i[t].divide);n%=i[t].divide,a=a.replace(i[t].exp,o+"")}e(t+1,n)}}(0,e),a},C.prototype.getAttrsByModelId=function(e,n){F.getAttrsByModelId(e,function(e){if(0==e.code){var t="object"===_typeof(e.data)&&e.data.find(function(e){return"MeasurePointLocate"==e.name});"object"===_typeof(t)&&(t.sourceValue=d(t.sourceValue)),n(e.data)}})},C.prototype.getDataItemsByModelIdFromCache=function(t,n){var o={};return F.modelLoader().then(function(e){e[t]&&(o[t]=e[t].kpiDic),n(o)})},C.prototype.getDataItemsByModelId=function(e,t){F.getDataItemsByModelId(e,function(e){0==e.code&&t(e.data)})},C.prototype.saveDomainAreaLineTree=function(e){var t=function(e){return{id:e.id,label:e.label,view:{viewId:e.view.viewId,viewTitle:e.view.viewTitle}}},n=(e.filterNode(function(e){return e.view}),e.filterNode(function(e){return"domain"==e.resourceType&&e.view}).map(t)),o=e.filterNode(function(e){return"customer"==e.resourceType&&e.view}).map(t),a=e.filterNode(function(e){return"project"==e.resourceType&&e.view}).map(t),i=e.filterNode(function(e){return"device"==e.resourceType&&e.view}).map(t),r={};0<n.length&&(r.domains=n),0<o.length&&(r.customers=o),0<a.length&&(r.projects=a),0<i.length&&(r.devices=i),this.saveEditorStatus("DomainAreaLineTree",r)},C.prototype.getAttrsByResource=function(e,t){var n=e.values.MeasurePointLocate;e.values.MeasurePointLocate=d(n),t(e.values)},C.prototype.getAttrsByResourceId=function(e,t){this.getResourceById(e,function(e){t(e.values)})},C.prototype.showLoading=function(){re.showLoading()},C.prototype.closeLoading=function(){re.closeLoading()},g.getDomainAreaLineTree_alertStatus=g.getDomainAreaLineTree=function(t){!function(e){try{JSON.parse(e)}catch(e){return console.warn(e)}}(w.params["#"]);var n=w.params.id;ie.getAlertState().then(function(e){return n?ie(n).getState():ie(e[0].id).getState()}).then(function(e){t(e)})},C.prototype.fillEmpty=function(e){var t=function(e,t){if(!t[e=parseInt(e)]){var n=e,o=e,a={value:0},i={value:0};for(n--;0<=n;){if(null!=t[n]){a=t[n];break}n--}for(o++;o<t.length;){if(null!=t[o]){i=t[o];break}o++}t[e]={value:(a.value+i.value)*(e-n)/(o-n)}}};for(var n in e)t(n,e)},C.prototype.getDateHandler=C.prototype.dateHandler=function(e){return ge.init(e)},C.prototype.reStructSeries=function(t){var e=[];for(var i in t)e.some(function(e){return e.kpiCode==t[i].kpiCode&&e.instance==t[i].instance&&e.arisingTime==t[i].arisingTime})||e.push(t[i]);(t=e.map(function(e){return e.time=ge.init(e.arisingTime),e})).sort(function(e,t){return e.time.getTime()-t.time.getTime()});var r=t.reduce(function(e,t){var n=t.kpiCode+"_"+t.instance;return e[n]=e[n]||[],e[n].push(t),e},{}),n=function(e){var o=1e20;return e.reduce(function(e,t){var n=t.time.minus(e.time);return n<o&&(o=n),t}),o},o=1e19;for(var i in r){var a=n(r[i]);a<o&&(o=a)}for(var c=t[0].time,l=t[t.length-1].time,u=[];c.before(l);)u.push(c.clone()),c.addTimeStamp(o);for(var i in c.addTimeStamp(o),u.push(c.clone()),r){var d=[];u.reduce(function(e,t){var n=e.getTime(),o=t.getTime(),a=r[i].find(function(e){var t=e.time.getTime();return n<=t&&t<o});return a?d.push(a):d.push(null),t}),r[i]=this.fillEmpty(d)}return{series:r,xAxis:u}},C.prototype.off=function(e,t){(r[e]||[]).forEach(function(e){e()})},C.prototype.on=function(e,n){if("tree_resourceChange"!==e)"changeNavString"===e?le.getCurrentParents().then(function(e){n(e.map(function(e){return e.label}).join(" > "))}).catch(function(e){J.error(e.message)}):"$destroy"===e&&o.$on("$destroy",n),r[e]=r[e]||[],r[e].push((o||x).$on(e,function(e,t){n(t)}));else{var t=w.params.id;t&&this.getResourceById(t,function(e){x.$apply(function(){n({resource:e||{}})})})}},C.prototype.getEvents=function(){return r},C.prototype.trigger=function(e,t,n){x.$broadcast(e,t)},C.prototype.uploadFile1=function(n,i,o){(i=i||{}).params=[];var t=i.group,a=this,r=function(){var a=i.fileFormat||x.fileFormat||"|jpg|png|jpeg|bmp|gif|svg|",e="api/rest/upload/resourceFileUIService/uploadResourceFile";i.url&&(e=i.url);var t=new Z({url:Y.origin+"/"+e,withCredentials:!0});t.filters.push({name:"imageFilter",fn:function(e,t){var n=e.name.split("."),o=n[n.length-1];return-1==a.indexOf(o)?(J.warning("文件格式仅支持"+a+"文件，请重新选择",{}),!1):!(1e4<e.size/1024&&(J.warning("您选择的文件大于10M，请重新选择",{}),1))}}),t.onWhenAddingFileFailed=function(e,t,n){console.info("onWhenAddingFileFailed",e,t,n)},t.onCompleteItem=function(e,t,n,o){if(t&&0==t.code){var a={value:{}};a.label=e.file.name,a.qualifiedName=t.data.qualifiedName,a.value.qualifiedName=t.data.qualifiedName,i.params.push(a)}else J.error("操作异常了，尝试重新刷新",{})},t.clearQueue(),t.addToQueue(n),t.queue.forEach(function(e){i.formData?e.formData=[i.formData]:e.formData=[{resourceId:0,value:"images/dashboardImage"}]}),t.onCompleteAll=function(){t.clearQueue(),o(i.params)},t.uploadAll()};t?a.getAllConfigGroups(function(e){e.some(function(e){return e.name==t})?r():a.saveConfigGroup({label:"图片缓存("+t+")",name:t},function(e){r()})}):r()},C.prototype.getKpiTypeByFilter=function(e,t){F.getKpiTypeByFilter(e,function(e){0==e.code&&t(e.data)})},C.prototype.uploadResourceFile=function(){this.postService("resourceFileUIService","uploadResourceFile")},C.prototype.toFix=function(e,t){t=t||4,e=e||"0";var n=Number(e),o=Math.pow(10,t),a=parseInt(n*o)/o+"",i=a.split(".")[1]||"";""==i&&(a+=".");for(var r=0;r<t-i.length;r++)a+="0";return a},C.prototype.uploadFile=function(o,r,c){var l=(r=r||{}).group,t=this,n=function(){var i=r.config||{domainPath:"",groupName:l||"dashboardImage",id:0,invalid:!1,key:"",keyDesc:"",label:"",value:""},e=r.api||{service:"resourceFileUIService",method:"uploadResourceFile",fun:"uploadConfig"};e.fun="upload";var a=r.fileFormat||x.fileFormat||"|jpg|png|jpeg|bmp|gif|svg|",t=new Z({url:Y.origin+"/api/rest/"+e.fun+"/"+e.service+"/"+e.method,withCredentials:!0});if(t.filters.push({name:"imageFilter",fn:function(e,t){var n=e.name.split("."),o=n[n.length-1];return-1==a.indexOf(o)?(J.warning("文件格式仅支持"+a+"文件，请重新选择",{}),!1):!(1e4<e.size/1024&&(J.warning("您选择的文件大于10M，请重新选择",{}),1))}}),t.onWhenAddingFileFailed=function(e,t,n){console.info("onWhenAddingFileFailed",e,t,n)},t.onCompleteItem=function(e,t,n,o){if(console.info("onCompleteItem",t),t)if(0==t.code){var a=t.data;i.value=a,J.success("图片上传成功",{}),Y.saveConfig(i,function(e){c(e)})}else J.error(t.message,{});else J.error("操作异常了，尝试重新刷新",{})},t.clearQueue(),t.addToQueue(o),0<t.queue.length){var n=t.queue[0];i.label=n.file.name,Y.saveConfig(i,function(e){if(0==e.code){var t=e.data.id;i.id=t,n.formData=[{resourceId:t,value:"images/dashboardImage",id:t}],n.upload()}})}};l&&t.getAllConfigGroups(function(e){e.some(function(e){return e.name==l})?n():t.saveConfigGroup({label:"图片缓存("+l+")",name:l},function(e){n()})})},C.prototype.init=function(n,o,e){var a,i,r,c,l=e.render,u=this;if("function"!=typeof l)throw new Error("render function is needed!!");$$.runExpression(u.$attr("advance/expression"),function(e){if("0"==e.code){var t=e.data;a=t||{}}else a={};if(c=a.$attr("on/init"),i=u.$attr("style"),r=u.$attr("parameters"),i&&$(n).css(i),u.render=function(e){n.append(l(e,a,i,r))},c)try{c({target:u,global:o})}catch(e){u.growl(e.message)}else n.append(l({},a,i,r))})},C.prototype.getAlertValueList=function(t){this.postService("kpiDataFlexService","getKpiHierarchyValueList",["alert",{category:"ci",isRealTimeData:!0,timePeriod:0,kpiCodes:["alert_code_count"]}],function(e){0==e.code&&t(e)})},C.prototype.setSelfDom=function(e){this.selfDom=e,Object.defineProperty(this,"selfDom",{enumerable:!1})},C.prototype.getGroups=function(){return h.groups},C.prototype.getTheme=function(e){if(h){var t=b(h.setting)||{theme:"default"};return e="auto"==(e=e||"default")?f[t.theme||"default"]:e}return"default"},C.prototype.getPath=function(t){return h.groups.find(function(e){return t==e.path})||{}},C.prototype.addView=function(t,n){E.addView(t,function(e){0==e.code?"function"==typeof n&&n({code:0,msg:t.viewTitle+"添加成功",data:e.data}):"function"==typeof n&&n({code:e.code,msg:t.viewTitle+"添加失败,"+e.message})})},C.prototype.updateView=function(t,n){E.updateView(t,function(e){0==e.code?"function"==typeof n&&n({code:0,msg:t.viewTitle+"添加成功",data:e.data}):"function"==typeof n&&n({code:e.code,msg:t.viewTitle+"添加失败,"+e.message})})},C.prototype.getSelfDom=function(){return this.selfDom},n.$cache=n.$cache||{},C.prototype.getKpiDic=function(){return C.kpiDic},C.prototype.getResourceDic=function(){return C.resourceDic},C.prototype.getTimesByDay=function(e){return 24*e*3600*100},C.prototype.getEditorStatus=function(e,t){this.getConfigsByGroupName(e,function(e){0<e.length?t(JSON.parse(e[0].value)):t(null)})},C.prototype.getCurrentUser=function(){return _.user},C.prototype.saveEditorStatus=function(n,o,a){var i=this,t=function(e){var t={label:"设计器缓存",value:JSON.stringify(o),groupName:n};e&&(t.id=e.id),i.saveConfig(t,function(e){a&&a(e)})},r=function(){i.getConfigsByGroupName(n,function(e){0==e.length?t():t(e[0])})};i.getAllConfigGroups(function(e){e.some(function(e){return e.name==n})?r():i.saveConfigGroup({label:"设计器缓存",name:n},function(e){r()})})},C.prototype.splitData=function(e){var a=e.map(function(e){return new Date(e.arisingTime).getTime()}),i=a.reduce(function(e,t){return-1==e.indexOf(t)&&e.push(t),e},[]),t=e.reduce(function(e,t){var n=t.nodeId+":"+t.kpiCode;return e[n]?e[n].push({time:new Date(t.arisingTime).getTime(),value:t.value}):e[n]=[],e},{}),n=function(e){var t=[];for(var n in i){var o=e.find(function(e){return e.time==a[n]});o?t.push(o):t.push({value:"-",time:i[n]})}return t};for(var o in t)t[o]=n(t[o]);return t.times=i,t},C.prototype.createMsgBox=function(n){var o=this,a="../localdb/echartTemplate/msgbox.json";V.get(a,function(e){var t;H[a]=e,t=H[a],y.call(o,t,{width:n.width||"600px",title:n.title,on:n.on},{text:n.message},100002)})},C.prototype.setConsoleText=function(e){this.setValue("$CONSOLELOG","")},C.prototype.console=function(e,t){var n=this,o="../../localdb/echartTemplate/console.json",a=n.getValue("$CONSOLELOG")||"",i=function(e){for(var t="",n=0;n<e;n++)t+="-";return t};n.setValue("$CONSOLELOG",a+"//"+i(40)+(t||"")+i(40)+"\nconsole.log = "+m(e)+"\n//"+i(100)+"\n"),V.get(o,function(e){var t;H[o]=e,t=H[o],"freeStyleCtrl"==G.current.$$route.controller&&v.call(n,t,{width:"100vw",bottom:0},n.getValue("$CONSOLELOG"),100002)})},C.prototype.close=function(){ue=ue&&ue.destroy()},C.prototype.submit=function(e){ue&&this.setValue("$POPUPDATA",e),ue=ue&&ue.destroy()},g.createSystemPopupByCtrlView=function(e,t,n){var o=this;this.getView({path:"viewCtrl:"+e,item:{}},function(e){ue=y.call(o,e,{width:t.width||"600px",title:t.title,top:t.top||"40px",on:t.on,bgOpacity:t.bgOpacity||"1"},n,100002)})},C.prototype.createSystemPopupByViewId=function(e,n,o){var a=this;a.getViewById(e,function(e){var t=$$.getViewContent(e);t&&(ue=y.call(a,t,{width:n.width||"600px",title:n.title,top:n.top||"40px",on:n.on,bgOpacity:n.bgOpacity||"1"},o,100002))})},C.prototype.createPopupByViewIdPath=function(e,o,a,i){var r=this;E.getViewById(e,function(e){var t,n=JSON.parse(e.data.content);n.hasOwnProperty("groups")?t=n.groups.find(function(e){return e.path==o})||{}:n.hasOwnProperty("layout")&&(t=n.layout),h=n,y.call(r,t,{width:a.width||"600px",title:a.title,top:a.top||"110px",on:a.on},i,100002)})},C.prototype.createSystemPopupByLocalPath=function(e,t,n){var o=this;!function(e,o,a){function t(){E.getViewById(e,function(e){var t,n=JSON.parse(e.data.content);n.hasOwnProperty("groups")?t=n.groups.find(function(e){return e.path==o})||{}:n.hasOwnProperty("layout")&&(t=n),a(t)})}var n;["localhost","127.0.0.1"].some((n=H.location.hostname,function(e){return e===n}))?psrequire(["../app-views/build/"+e+"."+o],function(e){a(e)},function(e){t()}):t()}(S.viewId,e,function(e){y.call(o,e,{width:t.width||"600px",title:t.title,top:t.top||"110px",on:t.on},n,100002)})},C.prototype.createSystemPopupByJsonName=function(e,t,n){var o=this,a="../localdb/echartTemplate/"+e+".json",i=function(e){y.call(o,e,{width:t.width||"600px",title:t.title,on:t.on},n,100002)};H[a]?i(H[a]):V.get(a,function(e){H[a]=e,i(H[a])})},C.prototype.console=function(e,t){var n=this,o="../localdb/echartTemplate/console.json",a=n.getValue("$CONSOLELOG")||"",i=function(e){for(var t="",n=0;n<e;n++)t+="-";return t};n.setValue("$CONSOLELOG",a+"//"+i(40)+(t||"")+i(40)+"\nconsole.log = "+m(e)+"\n//"+i(100)+"\n"),V.get(o,function(e){var t;H[o]=e,t=H[o],"freeStyleCtrl"==G.current.$$route.controller&&v.call(n,t,{width:"100vw",bottom:0},n.getValue("$CONSOLELOG"),100002)})},C.prototype.Info=function(e,t){V.get(e,function(e){t(e)})},C.prototype.closePopup=function(){},C.prototype.getTimesByMonth=function(e){return 30*e*24*3600*100},C.prototype.setRootTarget=function(e){h=e},C.prototype.getKpiValueList=function(e,t,n,o,a){var i=function(e){var t=[];for(var n in e)-1==t.indexOf(e[n])&&t.push(e[n]);return t},r={nodeIds:i(e),kpiCodes:i(t)};n&&(r.timePeriod=n),0==n&&(r.timePeriod=0),r=r.$extension(a),q.getKpiValList(r,function(e){0==e.code?o(e.data):o([])},"includeFields=kpiCode,value,nodeId,arisingTime,instance")},C.prototype.getKpiValueCi=function(e,t,n,o){R.getValues(e,t,o).then(function(e){n(e)})},C.prototype.createPopupBypath=function(t,e,n,o){for(var a=this;a.parent;)a=a.parent;var i=a.root.groups.find(function(e){return e.path==t})||{};if("freeBoardCtrl"!=G.current.$$route.controller&&i){var r=e.theme||"default";"default"==r?v.call(this,i,e,n):"system"==r?y.call(this,i,e,n):v.call(this,i,e,n)}},C.prototype.readImageFile=function(e,t){if("undefined"!=typeof FileReader&&-1!=e.type.indexOf("image")){var n=new FileReader;n.onload=function(e){t(e.target.result)},n.readAsDataURL(e)}},C.prototype.createOverlayBypath=function(t,e,n,o){var a=this.getRootTarget().groups.find(function(e){return e.path==t});"freeBoardCtrl"!=G.current.$$route.controller&&a&&function(e,t,n,o){(c=this).setValue("$POPUPDATA",n);var a=(t=t||{}).renderTo||"self",i=(t.bgOpacity,t.$attr("on/submit")),r=t.$attr("on/cancel"),c=this,l=$("<div></div>"),u=$("<div></div>"),d=$("<div></div>");$("<button></button>"),$("<div></div>"),l.css("z-index",o+1||50),"self"==a&&(a=c.getSelfDom()),null!=t.top&&l.css("top",t.top),null!=t.left&&l.css("left",t.left),null!=t.right&&l.css("right",t.right),null!=t.bottom&&l.css("bottom",t.bottom),l.append(d),d.css("position","relative"),d.addClass("col-md-12"),d.attr("id","popup"),l.css("position","absolute"),l.css("width",t.width||"400px"),d.css("width","100%"),u.append(l);var s=Q(d);s.setMode(!0),e.layout=e.layout.$remapByChild(function(e){var t=new C(e);return t.submit=function(e){i&&i(e),l.remove(),u.remove()},t.cancel=function(){r&&r(),l.remove(),u.remove()},t}),s.renderLayout(e),l.addClass("block"),a.prepend(l)}.call(this,a,e,n)},C.prototype.getPopupData=function(){return this.getValue("$POPUPDATA")},C.prototype.createPopupByViewId=function(e,n,o){var a=this;a.getViewById(e,function(e){var t=$$.getViewContent(e);t&&v.call(a,t,n,o)})},C.prototype.getDataHandlers=function(e,t,n,o){return[{id:0,label:"不裁剪数据",text:'function init(event){\n    var global = event.global;\n    var resources = event.resourceId;\n    var kpis = event.kpiId;\n    var timePeriod = event.timePeriod;\n    var data = event.data;\n    global.fire("renderList", data);\n}'},{id:1,label:"适合线图的数据",text:"function init(source){\n  var formatter=function(elem){\n    return elem.value;\n   }\n  return source.ci.getSeries(formatter);\n}"},{id:2,label:"适合饼图的数据",text:"function init(source){\n  var formatter=function(elem){\n    return elem.value;\n   }\n  return source.ci.getSeries(formatter);\n}"},{id:3,label:"适合柱图的数据",text:"function init(source){\n  var formatter=function(elem){\n    return elem.value;\n   }\n  return source.ci.getSeries(formatter);\n}"},{id:4,label:"适合柱图的数据",text:"function init(source){\n  var formatter=function(elem){\n    return elem.value;\n   }\n  return source.ci.getSeries(formatter);\n}"}]},C.prototype.barOption=function(){return{title:{text:"ECharts 入门示例"},tooltip:{},legend:{data:["销量"]},xAxis:{data:["衬衫","羊毛衫","雪纺衫","裤子","高跟鞋","袜子"]},yAxis:{},series:[{name:"销量",type:"bar",data:[5,20,36,10,10,20]}]}},C.prototype.polylineOption=function(){return{title:{text:"一天用电量分布",subtext:"纯属虚构"},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},toolbox:{show:!0,feature:{saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:["00:00","01:15","02:30","03:45","05:00","06:15","07:30","08:45","10:00","11:15","12:30","13:45","15:00","16:15","17:30","18:45","20:00","21:15","22:30","23:45"]},yAxis:{type:"value",axisLabel:{formatter:"{value} W"},axisPointer:{snap:!0}},visualMap:{show:!1,dimension:0,pieces:[{lte:6,color:"green"},{gt:6,lte:8,color:"red"},{gt:8,lte:14,color:"green"},{gt:14,lte:17,color:"red"},{gt:17,color:"green"}]},series:[{name:"用电量",type:"line",smooth:!0,data:[300,280,250,260,270,300,550,500,400,390,380,390,400,500,600,750,800,700,600,400],markArea:{data:[[{name:"早高峰",xAxis:"07:30"},{xAxis:"10:00"}],[{name:"晚高峰",xAxis:"17:30"},{xAxis:"21:15"}]]}}]}},C.prototype.pieOption=function(){return{title:{text:"某站点用户访问来源",subtext:"纯属虚构",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:["直接访问","邮件营销","联盟广告","视频广告","搜索引擎"]},series:[{name:"访问来源",type:"pie",radius:"55%",center:["50%","60%"],data:[{value:335,name:"直接访问"},{value:310,name:"邮件营销"},{value:234,name:"联盟广告"},{value:135,name:"视频广告"},{value:1548,name:"搜索引擎"}],itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}},C.prototype.scatter3DOption=function(){return{tooltip:{},visualMap:{right:0,max:20,inRange:{color:["#313695","#4575b4","#74add1","#abd9e9","#e0f3f8","#ffffbf","#fee090","#fdae61","#f46d43","#d73027","#a50026"]}},xAxis3D:{type:"category",data:["12a","1a","2a","3a","4a","5a","6a","7a","8a","9a","10a","11a","12p","1p","2p","3p","4p","5p","6p","7p","8p","9p","10p","11p"]},yAxis3D:{type:"category",data:["1","2","3","4","5","6","7"]},zAxis3D:{type:"value"},grid3D:{boxWidth:160,boxHeight:40,boxDepth:90,viewControl:{},splitLine:{show:!0},axisPointer:{show:!0},light:{main:{intensity:1.4},ambient:{intensity:.3}}},series:[{name:"散点图",type:"scatter3D",symbol:"arrow",data:[[12,0,10],[3,3,15],[4,3,20],[10,1,12],[3,0,14]].map(function(e){return{value:[e[1],e[0],e[2]]}}),shading:"lambert",label:{textStyle:{fontSize:12,borderWidth:1}},emphasis:{label:{textStyle:{fontSize:20,color:"#900"}},itemStyle:{color:"#900"}}}]}},C.prototype.bar3DOption=function(){return{tooltip:{},visualMap:{max:20,inRange:{color:["#313695","#4575b4","#74add1","#abd9e9","#e0f3f8","#ffffbf","#fee090","#fdae61","#f46d43","#d73027","#a50026"]}},xAxis3D:{type:"category",data:["12a","1a","2a","3a","4a","5a","6a","7a","8a","9a","10a","11a","12p","1p","2p","3p","4p","5p","6p","7p","8p","9p","10p","11p"]},yAxis3D:{type:"category",data:["1","2","3","4","5","6","7"]},zAxis3D:{type:"value"},grid3D:{boxWidth:200,boxHeight:40,boxDepth:90,light:{main:{intensity:1.2},ambient:{intensity:.3}}},series:[{type:"bar3D",data:[[12,0,10],[3,3,15],[4,3,20],[10,1,12],[3,0,14]].map(function(e){return{value:[e[1],e[0],e[2]]}}),shading:"color",label:{show:!1,textStyle:{fontSize:16,borderWidth:1}},itemStyle:{opacity:.8},emphasis:{label:{textStyle:{fontSize:20,color:"#900"}},itemStyle:{color:"#900"}}}]}},C.prototype.line3DOption=function(){return{tooltip:{},visualMap:{max:20,inRange:{color:["#313695","#4575b4","#74add1","#abd9e9","#e0f3f8","#ffffbf","#fee090","#fdae61","#f46d43","#d73027","#a50026"]}},xAxis3D:{type:"category",data:["12a","1a","2a","3a","4a","5a","6a","7a","8a","9a","10a","11a","12p","1p","2p","3p","4p","5p","6p","7p","8p","9p","10p","11p"]},yAxis3D:{type:"category",data:["1","2","3","4","5","6","7"]},zAxis3D:{type:"value"},grid3D:{boxWidth:180,boxHeight:40,boxDepth:90,light:{main:{intensity:1.2},ambient:{intensity:.3}}},series:[{type:"line3D",data:[[12,0,10],[3,3,15],[4,3,20],[10,1,12],[3,0,14]].map(function(e){return{value:[e[1],e[0],e[2]]}}),shading:"color",label:{show:!1,textStyle:{fontSize:16,borderWidth:1}},itemStyle:{opacity:.8},emphasis:{label:{textStyle:{fontSize:20,color:"#900"}},itemStyle:{color:"#900"}}}]}},C.prototype.copyToClipBoard=function(n,e,o){n.attr("data-clipboard-text",e),setTimeout(function(){$$.loadExternalJs(["clipboard"],function(e){var t=new e(n[0]);t.on("success",function(e){o&&o(),e.clearSelection()}),t.on("error",function(e){console.error("Action:",e.action),console.error("Trigger:",e.trigger)})})})},C.prototype.getIcons=function(t){V.get("../../localdb/bootstrapIcon.json",function(e){t(e)})},C.prototype.getCtrlGroupDemos=function(){return[{label:"普通文字",expression:'expression = {\n  on : {\n    init : function(event){\n      var target = event.target;\n      var global = event.global;\n      var ctrlGroups = [\n       [{\n          type : "label",\n          value : "普通标签",\n          class : "col-md-12"\n        }]\n      ];\n      event.target.render(ctrlGroups);\n    }\n  }\n}'},{label:"基本按钮",expression:'expression = {\n  on : {\n    init : function(event){\n      var target = event.target;\n      var global = event.global;\n      var ctrlGroups = [\n       [{\n          type : "button",\n          value : "按钮",\n          icon : "glyphicon glyphicon-search",\n          btnclass : "btn btn-primary",\n          class : "col-md-12",\n          on : {\n            click : function(elem){\n              target.console(elem);\n            }\n          }\n        }]\n      ];\n      event.target.render(ctrlGroups);\n    }\n  }\n}'},{label:"按钮组",expression:'expression = {\n  on : {\n    init : function(event){\n      var target = event.target;\n      var global = event.global;\n      var ctrlGroups = [\n        [{\n          type : "buttonGroup",\n          class : "col-md-12",\n          content : [{\n            type : "button",\n            value : "保存",\n            icon : "glyphicon glyphicon-save",\n            btnclass : "btn btn-primary",\n            on : {\n              click : function(elem){\n              }\n            }\n          },{\n            type : "button",\n            value : "取消",\n            icon : "glyphicon glyphicon-remove",\n            btnclass : "btn btn-default",\n            on : {\n              click : function(elem){\n              }\n            }\n          }]\n        }]\n      ];\n      event.target.render(ctrlGroups);\n    }\n  }\n}'},{label:"复制粘贴按钮",expression:'expression = {\n  on : {\n    init : function(event){\n      var target = event.target;\n      var global = event.global;\n      var ctrlGroups = [\n       [{\n          type : "clipboardButton",\n          value : "复制到剪切板",\n          icon : "glyphicon glyphicon-save",\n          btnclass : "btn btn-primary",\n          clipboardText : "123456",\n          class : "col-md-12",\n          on : {\n            save : function(elem){\n              target.growl("保存到剪切板");\n            }\n          }\n        }]\n      ];\n      event.target.render(ctrlGroups);\n    }\n  }\n}'},{label:"单选下拉框",expression:'expression = {\n  on : {\n    init : function(event){\n      var target = event.target;\n      var global = event.global;\n      var options = [{\n        id : 0,\n        label : "第一条"\n      },{\n        id : 1,\n        label : "第二条"\n      }];\n      var ctrlGroups = [\n        [{\n          type : "select",\n          value : 0,\n          class : "col-md-12",\n          options : options,\n          format : {\n            id : "id",\n            label : "label"\n          },\n          on : {\n            change : function(elem){\n'},{label:"多选下拉框",expression:'expression = {\n  on : {\n    init : function(event){\n      var target = event.target;\n      var global = event.global;\n      var options = [{\n        id : 0,\n        label : "第一条"\n      },{\n        id : 1,\n        label : "第二条"\n      }];\n      var ctrlGroups = [\n        [{\n          type : "multiSelect",\n          value : 0,\n          class : "col-md-12",\n          options : options,\n          format : {\n            id : "id",\n            label : "label"\n          },\n          on : {\n            change : function(elem){\n'},{label:"数结构下拉框",expression:'expression = {\n  on : {\n    init : function(event){\n      var target = event.target;\n      var global = event.global;\n      var ctrlGroups = [\n       [{\n          type : "clipboardButton",\n          value : "复制到剪切板",\n          icon : "glyphicon glyphicon-save",\n          btnclass : "btn btn-primary",\n          clipboardText : "123456",\n          class : "col-md-12",\n          on : {\n            save : function(elem){\n              target.growl("保存到剪切板");\n            }\n          }\n        }]\n      ];\n      event.target.render(ctrlGroups);\n    }\n  }\n}'},{label:"自动搜索下拉框",expression:'expression = {\n  on : {\n    init : function(event){\n      var target = event.target;\n      var global = event.global;\n      var ctrlGroups = [\n       [{\n          type : "clipboardButton",\n          value : "复制到剪切板",\n          icon : "glyphicon glyphicon-save",\n          btnclass : "btn btn-primary",\n          clipboardText : "123456",\n          class : "col-md-12",\n          on : {\n            save : function(elem){\n              target.growl("保存到剪切板");\n            }\n          }\n        }]\n      ];\n      event.target.render(ctrlGroups);\n    }\n  }\n}'}]},C.prototype.getRoleByID=function(e,n){var a=e.split(",").map(function(e){return parseInt(e)});k.queryEnterpriseRole(function(e){if(0==e.code){var t=e.data.find(function(e){return-1!=a.indexOf(e.roleID)&&(t=e.values,n=new RegExp("^\\{.*\\}$","g"),o=new RegExp("^\\[.*\\]$","g"),n.test(t)||o.test(t)?JSON.parse(t):null);var t,n,o});n(t)}})},C.prototype.triggerSocket=function(e){U.simuSend(e)},C.prototype.getToolsMenu=function(){return[{label:"API调用",url:"apiCall"},{label:"绘制自定义视图",path:"drawechart"},{label:"SCP路径",url:"scp"},{label:"项目模版",url:"projectlist"},{label:"图标样式",url:"icon"},{label:"JS代码转换字符串",url:"jstostring"},{label:"批量导出导入视图或配置项",url:"export"},{label:"输入框组",url:"ctrlGroupDemo"}]},C.prototype.getHelpMenu=function(){return[{label:"布局设置",pdf:"layout"},{label:"组件",url:"control",children:[{label:"常用组件",url:"common_ctrl",children:[{label:"文字",pdf:"text"},{label:"图片",pdf:"image"},{label:"控制板1",pdf:"control1"},{label:"控制板2",pdf:"control2"},{label:"TAB",pdf:"tab"},{label:"开关",pdf:"switch"}]},{label:"功能组件",url:"functional_ctrl",children:[{label:"天气信息",pdf:"weather"}]},{label:"视图组件",url:"echart_ctrl",children:[{label:"线图",pdf:"line"},{label:"饼图",pdf:"pie"},{label:"柱图",pdf:"bar"},{label:"仪表盘",pdf:"gauge"},{label:"散点图",pdf:"scatter",show:!1}]},{label:"高级组件",url:"advance_ctrl",children:[{label:"地图扩展",pdf:"baidumap"},{label:"视图嵌入",pdf:"injector"},{label:"轮播组件",pdf:"echart_ctrl"},{label:"高级图表",pdf:"advance_ctrl"},{label:"输入框组",pdf:"ctrlgroup"},{label:"伪TAB样式",pdf:"faketab"},{label:"重复单元",pdf:"repeat"}]}]},{label:"功能模块",url:"tool",children:[{label:"数据统计标签",pdf:"advance_ctrl"},{label:"百分比状态条",pdf:"advance_ctrl"},{label:"环比标签",pdf:"advance_ctrl"},{label:"项目组态",pdf:"advance_ctrl"},{label:"设备（列表）",pdf:"advance_ctrl"},{label:"工单（列表）",pdf:"advance_ctrl"},{label:"告警（列表）",pdf:"advance_ctrl"},{label:"线图模板",pdf:"advance_ctrl"},{label:"告警趋势",pdf:"advance_ctrl"},{label:"设备分布",pdf:"advance_ctrl"},{label:"地图分布",pdf:"advance_ctrl"},{label:"设备地图列表",pdf:"advance_ctrl"},{label:"最近一周告警",pdf:"advance_ctrl"}]},{label:"导入视图",pdf:"import"},{label:"实例",url:"example",show:!1},{label:"API",pdf:"commonMethod"}]},C.prototype.getSignalShipInfo=function(e,t){W.getSignalShipInfo(e,function(e){0==e.code&&t(e.data)})},C.prototype.getManyShipInfo=function(e,t){W.getManyShipInfo(e,function(e){0==e.code&&t(e.data)})},C.prototype.getShipTrack=function(e,t,n,o){W.getShipTrack(e,t,n,function(e){0==e.code&&o(e.data)})},C.prototype.getAllConfigs=function(t){Y.getAllConfigs(function(e){0==e.code&&t(e.data)})},C.prototype.getAllConfigGroups=function(t){Y.getAllConfigGroups(function(e){0==e.code&&t(e.data)})},C.prototype.getConfigsByGroupName=function(e,t){Y.getConfigsByGroupName(e,function(e){0==e.code&&t(e.data)})},C.prototype.saveConfig=function(t,n){Y.saveConfig(t,function(e){0==e.code?"function"==typeof n&&n({code:0,msg:t.label+"添加成功"}):"function"==typeof n&&n({code:e.code,msg:t.label+"添加失败,原因"+e.message})})},C.prototype.saveConfigGroup=function(e,t){Y.saveConfigGroup(e,function(e){0==e.code&&t(e.data)})},C.prototype.deleteConfig=function(e,t){Y.deleteConfig(e,function(e){0==e.code&&t(e.data)})},C.prototype.deleteConfigGroup=function(e,t){Y.deleteConfigGroup(e,function(e){0==e.code&&t(e.data)})},C.prototype.createInfoHtml=function(e){var t,n,o,a,i="";for(var r in H.onclickHandler=function(e){var t=e.target.id+"&"+e.target.name;c[t]&&c[t](e.target.name)},e.content)e.content[r].type&&"label"!=e.content[r].type?"button"==e.content[r].type&&(i+=(t=e.content[r],n=t.$attr("on/click"),o=t.label+"&"+t.value,c[o]=n,"<button id='"+t.label+"' name='"+t.value+"' onclick='onclickHandler(event)'>"+t.label+"</button>")):i+="<label><span>"+(a=e.content[r]).label+":</span><span>"+a.value+"</span></label><br>";return i},C.prototype.createShipShape=function(e,t,n,o,a,i){var r=[-e/2*n,-t/2];return[r,[e/2*n,-t/2],[.9*e/2,(o/2-1)*t/2],[e/2,(o-1)*t/2],[e/2*1.4,(.5-i)*t],[a/2*e,(.5-i/3)*t],[.1*e,t/2*.99],[0,t/2],[.1*-e,t/2*.99],[-a/2*e,(.5-i/3)*t],[-e/2*1.4,(.5-i)*t],[-e/2,(o-1)*t/2],[-.9*e/2,(o/2-1)*t/2],r]},C.prototype.renderExcel=function(i,r,c){require(["table2excel"],function(){var e=$("<table></table>");e.attr("id","table2excel");for(var t=$("<thead></thead>"),n=$("<tbody></tbody>"),o=function(e){var t,n,o=$("<tr></tr>");for(var a in e)o.append((t=e[a],n=void 0,(n=$("<td></td>")).text(t),n));return o},a=($("<tr></tr>"),0);a<c.length;a++)n.append(o(c[a]));e.append(t),e.append(n),e.table2excel({exclude:".excludeThisClass",name:i,filename:r})})},C.prototype.asyncRepeat=function(n,o){var a=this;!function e(t){a[t]?n(t,a[t],function(){e(++t)}):o()}(0)},C.prototype.queryDomainTree=function(t,o){var n=C.prototype.queryDomainTree;n.cached?t(p(n.cached)):(n.promise=n.promise||new Promise(function(n){K.queryDomainTree(_.user.userID,function(e){var c,l=function(e){this.$clone(e)};if(e.code)if(o){var t=(e.data[0],c=[],function e(t,n,o){var a=new l(t);for(var i in a.parent=n,a.level=o,c.push(a),t.domainInfos){var r=o+1;e(t.domainInfos[i],t,r)}}(e.data[0],null,0),c);n(t)}else n(e.data)})}),n.promise.then(function(e){n.cached=e,delete n.promise,t(p(n.cached))}))},C.prototype.getAlertWord=function(e){var t="";switch(e){case 4:t="危险";break;case 3:t="警告";break;case 2:t="注意";break;case 1:default:t="正常"}return t},C.prototype.getAlertColorPoint=function(e){var t="";switch(e){case 4:t="e74e53";break;case 3:t="#ee6b1c";break;case 2:t="#efd709";break;default:t="#00bc79"}return t},C.prototype.getAlertColor=function(e){var t="";switch(e){case 4:t="#e74e53";break;case 3:t="#ee6b1c";break;case 2:t="#ece417";break;case 1:default:t="#00bc79"}return t},C.prototype.getdomainListName=function(e){for(var t=[],n=0;n<e.length;n++)C.prototype.getdomainNameHandler(e[n].domains,t);return t},C.prototype.getdomainNameHandler=function(e,t){var n=x.domainListDic;return e.split("/").forEach(function(e){n[e]&&t.push(n[e].label)}),t},C.prototype.getCurrentDomainCi=function(t){var e=_.user.domains;if(e){var n,o=e.split("/");1<o.length&&(n=o[o.length-2]),$$.cacheAsyncData.call(F.getResourceById,[n],function(e){0==e.code&&t(e.data)})}else t(null)},C.prototype.getDevicesByCondition=function(e,t,n,o){var a,i=C.prototype.getDevicesByCondition,r=_.user.currentRoleID||0,c=_.user.roleFunctionCodeMap||{},l="includeFields="+["resourceType","category","customerId","projectId","domainPath","domains","externalDevId","label","id","modelId","values.viewType","values.MeasurePointLocate","value.viewType","values.OfflinePerson","values.JoinPersonList","physicalConfig.accessConfigs.instance","physicalConfig.accessConfigs.dataItemId","physicalConfig.accessConfigs.kpiId","physicalConfig.accessConfigs.kpiName","physicalConfig.accessConfigs.specialtyProp"].toString(),u=c[r]||[],d=-1!==(a=u).indexOf("F08_01")?{}:-1!==a.indexOf("F08_03")?{diagnosticType:"90"}:-1!==a.indexOf("F08_06")?{diagnosticType:"280"}:-1!==a.indexOf("F08_02")?{diagnosticType:{NOT_IN:["90","280"]}}:void 0;!function(e){for(var t in e)return!1;return!0}(e)?(e.values=d,F.getDevicesByCondition(e,function(e){0==e.code&&t(e.data)},n||l)):(e.values=d,o?F.getDevicesByCondition(e,function(e){0==e.code&&t(p(e.data))},n||l):i.cached?t(p(i.cached)):(i.promise=i.promise||new Promise(function(t){F.getDevicesByCondition(e,function(e){0==e.code&&t(e.data)},n||l)}),i.promise.then(function(e){i.cached=e,delete i.promise,t(p(i.cached))})))},C.prototype.getCurrentDevices=function(n){this.getCurrentProject(function(e){if(e){e.domainPath;var t={projectId:e.id};F.getDevicesByCondition(t,function(e){0==e.code&&n(e.data)})}else n([])})},C.prototype.getCurrentResource=function(t){var e=this.getParameter("resourceId");e?F.getResourceById(e,function(e){0==e.code&&t(e.data)}):A.resourceId?(e=A.resourceId,$$.cacheAsyncData.call(F.getResourceById,[e],function(e){0==e.code&&t(e.data)})):t(null)},C.prototype.getCurrentProject=function(t){var e=this.getParameter("projectId");e?$$.cacheAsyncData.call(F.getResourceById,[e],function(e){0==e.code&&t(e.data)}):t(null)},C.prototype.getCurrentCustomer=function(t){var e=this.getParameter("customerId");e?$$.cacheAsyncData.call(F.getResourceById,[e],function(e){0==e.code&&t(e.data)}):t(null)},C.prototype.getCiKpi=function(t){var n=this.$attr("data/model"),e=this.$attr("data/resource"),o=this.$attr("data/modelType"),a=this.$attr("data/resfilltype"),i=this.$attr("data/kpi");i=i||[];var r=this,c=[],l=[],u=[],d=function(){if(i.some(function(e){return"object"!=_typeof(e)})){var e;if(!(e=0==o||null==o?n.id:o))throw new Error("modelId is no avaliable!!!");$$.cacheAsyncData.call(F.getDataItemsByModelId,[e],function(e){0==e.code&&(u=e.data.filter(function(e){return-1!=i.indexOf(e.id)}),t(l,u))})}else t(l,u=i)};if(1==(e=e||[]).length&&"rootCi"==e[0]&&(this.$attr("data/modelType",300),this.$attr("data/resfilltype","parameter"),this.$attr("data/resource",[]),o=300,a="parameter"),"parameter"==a)300==o?C.prototype.getCurrentDomainCi(function(e){l=[e],d()}):0==o?C.prototype.getCurrentResource(function(e){l=e?[e]:[],d()}):301==a?C.prototype.getCurrentCustomer(function(e){l=e?[e]:[],d()}):302==o?C.prototype.getCurrentProject(function(e){l=e?[e]:[],d()}):C.prototype.getCurrentDomainCi(303==o?function(e){l=e?[e]:[],d()}:function(e){l=e?[e]:[],d()});else{var s=function(e){var t=P.defer();return"object"!=_typeof(e)?r.getResourceById(e,function(e){l.push(e),t.resolve("success")}):(l.push(e),t.resolve("success")),t.promise};for(var p in e)c.push(s(e[p]));P.all(c).then(function(e){d()})}},C.prototype.copyJSONFileToClipBoard=function(){JSON.stringify(wholeJSON)},C.prototype.postService=function(e,t,n,o){X.get(e,t,n,o)},C.prototype.getLatestDevices=function(t){F.getLatestDevices(function(e){0==e.code&&t(e.data)})},C.prototype.doTaskCloseAlert=function(e,t,n){N.doTaskCloseAlert(e,t,function(e){0==e.code&&n(e.data)})},C.prototype.getDeviceInfo=function(t){F.getDeviceInfo(function(e){0==e.code&&t(e.data)})},C.prototype.getTicketsByStatus=function(t){N.getTicketsByStatus([100],function(e){0==e.code&&t(e.data)})},C.prototype.getAlertDeviceList=function(e,t){N.getAlertDeviceList(e,function(e){0==e.code&&t(e.data)})},C.prototype.getTicketTasksByCondition=function(e,t){N.getTicketTasksByCondition(e,function(e){0==e.code&&t(e.data)})},C.prototype.getTicketTasksByConditionAndPage=function(e,t,n){N.getTicketTasksByConditionAndPage(e,t,function(e){0==e.code&&n(e.data)})},C.prototype.getDealTicketListByPage=function(e,t,n){N.getDealTicketListByPage(e,t,function(e){0==e.code&&n(e.data)})},C.prototype.claimAlert=function(e,t){N.claimAlert(e,function(e){0==e.code&&t(e.data)})},C.prototype.getDeviceDiagnosticResumeOrTicketByPage=function(e,t,n){N.getDeviceDiagnosticResumeOrTicketByPage(e,t,function(e){0==e.code&&n(e.data)})},C.prototype.getInfoByPage=function(e,t,n){N.getInfoByPage(e,t,function(e){0==e.code&&n(e.data)})},C.prototype.getTicketsByConditionAndPage=function(e,t,n){N.getTicketsByConditionAndPage(e,t,function(e){0==e.code&&n(e.data)})},C.prototype.getUsersByDeviceIdAndRoleAndSpecialty=function(e,t,n,o){N.getUsersByDeviceIdAndRoleAndSpecialty(e,t,n,function(e){0==e.code&&o(e.data)})},C.prototype.complexHandleAgain=function(e,t,n){N.complexHandleAgain(e,t,function(e){0==e.code&&n(e.data)})},C.prototype.getKnowledgeByConditionWithPage=function(e,t,n){N.getKnowledgeByConditionWithPage(e,t,function(e){0==e.code&&n(e.data)})},C.prototype.alertTaskMergeDeal=function(e,t,n){N.alertTaskMergeDeal(e,t,function(e){0==e.code&&n(e.data)})},C.prototype.getTicketTasksByCondition=function(e,t){N.getTicketTasksByCondition(e,function(e){0==e.code&&t(e.data)})},C.prototype.getTicketsByCondition=function(e,t){N.getTicketsByCondition(e,function(e){0==e.code&&t(e.data)})},C.prototype.getDealTicketList=function(e,t){N.getDealTicketList(e,function(e){0==e.code&&t(e.data)})},C.prototype.doTask=function(e,t){N.doTask(e,function(e){0==e.code&&t(e.data)})},C.prototype.doTask4Baogang=function(e,t,n){N.doTask4Baogang(e,t,function(e){0==e.code&&n(e.data)})},C.prototype.getTopicErrorDataList=function(e,t){N.getTopicErrorDataList(e,function(e){0==e.code&&t(e.data)})},C.prototype.getComplexHandleListWithCategorys=function(e,t,n,o){N.getComplexHandleListWithCategorys(e,t,n,function(e){0==e.code&&o(e.data)})},C.prototype.energyTypeList=function(e){var t=L.dicts.energyType;e&&e(t)},C.prototype.getDevicesByFilter=function(e,t){var n={modelId:e.modelId,domainPath:e.domainPath,label:e.deviceName,sn:e.sn};F.getDevicesByCondition(n,function(e){0==e.code&&t(e.data)})},C.prototype.getCurrentAlert=function(t){var e=this.getParameter("resourceId");e?z.queryFromDb({nodeIds:e},function(e){0==e.code&&t(e.data)}):t([])},C.prototype.getAlertByPage=function(e,t,n){z.getAlertByPage(e,t,function(e){0==e.code&&n(e.data)})},C.prototype.getAllAlerts=function(t){z.queryFromDb({},function(e){0==e.code&&t(e.data)})},C.prototype.getAlerts=function(t){var e=_.user.domainPath;z.queryFromDb({domain:e},function(e){0==e.code&&t(e.data)})},C.prototype.queryFromDb=function(e,t){z.queryFromDb(e,function(e){0==e.code&&t(e.data)})},C.prototype.setExpression=function(e){this.$attr("advance/expression",e)},C.prototype.runExpression=function(e){var n;return $$.runExpression(e,function(e){if("0"==e.code){var t=e.data;n=t||{}}else n={}}),n},C.prototype.getCustomerFromCurrentUser=function(t){var e,n=_.user.domains.split("/");2<n.length?(e=n[n.length-2],this.getResourceById(e,function(e){t(e)})):t(resource)},C.prototype.getCurrentAlertByProject=function(t){var e=this.getParameter("projectId");z.queryFromDb({nodeIds:e},function(e){0==e.code&&t(e.data)})},C.prototype.currentDirective=function(n){var e=this.getParameter("resourceId");e?this.getResourceById(e,function(e){if(e){var t=e.modelId;t?F.getDirectivesByModelId(t,function(e){0==e.code&&n(e.data)}):n([])}else n([])}):n([])},C.prototype.getProjectByTYpeId=function(t,o){O.getProjectsType(function(e){if(0==e.code){var n=e.data.find(function(e){return t==e.id});null==n&&(n=e.data[0]),F.getResourceByModelId(302,function(e){if(0==e.code){var t=e.data.find(function(e){return e.values.projectType==n.valueCode});"function"==typeof o&&o(t)}})}})},g.promise=function(e){var t=P.defer();return e(t.resolve,t.reject),t.promise},g.$getViewById=function(n,t){var e=de(n),o=this;e||de(n,o.promise(function(t,e){o.getViewById(n,function(e){e&&t(e)})})),de(n).then(function(e){t(e)})},C.prototype.getViewById=C.prototype.getViewByViewId=function(e,t){if(e){var n=C.prototype.getViewById.views=C.prototype.getViewById.views||{},o=n[e]=n[e]||{};o.cache?t(p(o.cache)):(o.promise=o.promise||new Promise(function(t){E.getViewById(e,function(e){0==e.code&&t(e.data)})}),o.promise.then(function(e){o.cache=e,t(p(o.cache))}))}},C.prototype.getProjectsType=function(t,e){O.getProjectsType(function(e){0==e.code&&"function"==typeof t&&t(e.data)},e)},C.prototype.getCached=function(){return n.$cache},I.prototype.setValue=function(e,t){if(null!=t){var n=e.split("/").filter(function(e){return e}),o=n.shift(),a=n.pop(),i=H.sessionStorage.getItem(o),r=JSON.parse(i)||{},c=0<n.length?n.reduce(function(e,t){return e[t]=e[t]||{},e[t]},r):r;null!=a?(c[a]=t,H.sessionStorage.setItem(o,JSON.stringify(r))):H.sessionStorage.setItem(o,t)}},I.prototype.getValue=function(e){if("string"!=typeof e)return console.warn("无效的参数"),null;var t=e.split("/").filter(function(e){return e}),n=t.shift(),o=H.sessionStorage.getItem(n),a=T(o);return 0<t.length?t.reduce(function(e,t){return e&&e[t]},a):a},C.prototype.setValue=function(e,t){n.$cache.$attr(e,t)},C.prototype._setValue=i=function(e,t){l.setValue(e,t)},C.prototype.getValue=function(e){return n.$cache.$attr(e)},C.prototype._getValue=function(e){return l.getValue(e)},C.prototype.deleteValue=function(e,t){delete n.$cache[e]},C.prototype.findProjectsByCondition=function(e,t){M.findProjectsByCondition(e,function(e){0==e.code&&t&&t(e.data)})},C.prototype.getCurrentProjects=function(t){var e={domainPath:_.user.domainPath};M.findProjectsByCondition(e,function(e){0==e.code&&t&&t(e.data)})},C.prototype.getViewsByOnlyRole=function(e,a,i,r){E.getViewsByOnlyRole(e,function(e){var t,n=e.data;for(var o in n)(t=n[o]).template&&t.template.resourceType==a&&t.template.resourceId==i&&E.getViewById(t.viewId,function(e){0==e.code?r(e.data):r(null)})})},C.prototype.growl=function(e,t){J[t=t||"success"](e)},C.prototype.sendDirective=function(e,t,n,o){F.sendDeviceDirective(e,t,n,function(e){0==e.code&&"function"==typeof o&&o(e)})},C.prototype.sendItemDir=function(t,n){var o={};if(t.value){for(var e in t.params){var a=t.params[e];o[a.name]=t.value}fe.show({title:"提示",closable:!1,message:"您发送的指令将会在设备上执行，状态数据返回会有一段时间，确认要发送指令吗？",buttons:[{label:"确定",cssClass:"btn-success",action:function(e){F.sendDeviceDirective(n||Number(this.getParameter("resourceId")),t.id,o,function(e){0==e.code&&J.success("指令发送成功，请勿重复发送，状态数据返回需要一定时间！",{})}),e.close()}},{label:"取消",action:function(e){e.close()}}]})}else J.warning("请输入指令参数")},C.prototype.sendItemDirAll=function(e){var t={};for(var n in e.params){var o=e.params[n];e.params[n].$value&&(t[o.name]=e.params[n].$value)}F.sendDeviceDirective(Number(this.getParameter("resourceId")),e.id,t,function(e){0==e.code&&J.success("指令发送成功",{})})},C.prototype.sendItemDirByValue=function(e,t){F.sendDeviceDirective(Number(this.getParameter("resourceId")),e,t,function(e){0==e.code&&J.success("指令发送成功",{})})},C.prototype.getAllDevices=function(){},C.prototype.getViewByViewTitle=function(n,o){E.getAllMyViews(function(e){var t=e.data.find(function(e){return e.viewTitle==n});t?E.getViewById(t.viewId,function(e){0==e.code&&o(e.data)}):o(null)})},C.prototype.setTimeInterval=function(e,t){u.push(e,t||1e4)},C.prototype.getResources=function(t,e){var n=C.prototype.getResources;n.cached?t&&t(p(n.cached)):(n.promise=n.promise||new Promise(function(t,n){F.getResources(function(e){0==e.code?t(e.data):n(e)},e)}),n.promise.then(function(e){n.cached=e,t&&t(p(n.cached))}).catch(function(e){console.error(e)}))},C.prototype.navigateToTab=function(e){var t=w.current.name,n=w.params;s(n,e),w.go(t,function(e){for(var t in e)void 0!==e[t]&&null!==e[t]||delete e[t];return e}(n))},C.prototype.analysisDataPrep=function(n,o){var a,i,r=this;n.nodeId,r.setParameter("id",n.nodeId),r.getResourceById(n.nodeId,function(t){r.getDomainAreaLineTree(function(e){i=t.physicalConfig.accessConfigs||{},r.setValue("global/alertTime",n.arisingTime),r.setValue("global/resource",t),a=i.find(function(e){return e.instance===n.instance})||null,r.setValue("global/sensor",a),o(a.name)})})},C.prototype.getProjectsAndKpiValue=function(t){var l=this;l.findProjectsByCondition({},function(e){var a=[],i=[999999],r=function(e){for(var t in e)-1==this.indexOf(e[t])&&this.push(e[t])},c=function(o,a,i){!function e(t){var n=o[t];n?a(n,function(){e(++t)}):i(o)}(0)};c(e,function(n,o){l.getDevicesByCondition({projectId:n.id},function(e){var t=(n.devices=e).map(function(e){return e.id});r.call(a,t),c(e,function(n,o){var e=n.modelId;l.getKpisByModelId(e,function(e){var t=e.map(function(e){return e.id});r.call(i,t),n.kpis=e,o()})},function(){o()})})},function(){l.getKpiValueCi(a,i,function(i){(function(e){for(var t in this)for(var n in this[t].devices)e(this[t],n,this[t].devices[n])}).call(e,function(o,e,a){null==o.detail&&(o.detail=[]);var t=function(t){var e=i.find(function(e){return e.nodeId==a.id&&e.kpiCode==t.id}),n=i.find(function(e){return e.nodeId==a.id&&999999==e.kpiCode&&e.instance==t.id});o.detail.push({ci:{label:a.label},kpi:{label:t.label,icon:t.icon?t.icon:"proudsmart ps-system"},status:n?n.value:0,value:e?e.value:"-"})};for(var n in a.kpis)t(a.kpis[n])}),t(e)},{includeInstance:!0})})})},C.prototype.Synchook=function(){function e(){this.hooks={}}return e.prototype.tap=function(e,t){this.hooks[e]=t},e.prototype.call=function(e,t,n){var o,a=function(e){n(e)};"function"!=typeof this.hooks[e]?n():(o=this.hooks[e](t,a))&&(n(o),a=function(){})},new e},C.prototype.getProTypeByTypeId=function(e,t){O.getProTypeByTypeId(e,function(e){0==e.code&&"function"==typeof t&&t(e.data)})},C.prototype.getParameter=function(e){return"id"!==e?w.params[e]||(t=e,n=B.$$path,o=n&&n.split("/"),a=o&&o.pop(),((T(a)||[]).pop()||{})[t]):w.params[e];var t,n,o,a},C.prototype.setParameter=function(e,t){var n;w.params["#"]="string"!=typeof(n=w.params["#"])||"object"!==_typeof(n)||null==n?{}:"string"==typeof n?T(n)||{}:(_typeof(n),n),w.params["#"][e]=t},C.prototype.getPages=function(e){var t=(A.page||"index").split("|"),n=JSON.parse(A.parameter||"[0]"),o=[],a=this.getRootTarget().groups;for(var i in t)o.push({path:t[i],tabLabel:n[i].tabLabel||a[i].label,parameter:n[i]});return o},g.$getCurrentResource=t=function(e){var t=w.params.id;a(t,e)},g.$getResourceById=a=function(e,t){ie(e).getState().then(t)},C.prototype.getResourceById=function(n,t,e){var o=C.prototype.getResourceById;if(!n)throw new Error("id不可为空");o[n]=o[n]||{},o[n].cached=o[n].cached||{},o[n].cached&&e?t(p(o[n].cached)):(o[n].promise=o[n].promise||new Promise(function(t){F.getResourceById(n,function(e){0==e.code&&t(e.data)})}),o[n].promise.then(function(e){o[n].cached=e,t(p(e)),delete o[n].promise}))},C.prototype.getOnlineByKpiCodes=function(e,t){if(e){var n=["kpi",{includeInstance:!0,isRealTimeData:!0,nodeIds:[e],kpiCodes:[999998],timePeriod:0}];q.getValueList(n,function(e){0==e.code&&t(e.data)})}else t(null)},C.prototype.navigateBackTo=function(){H.location.href=""},C.prototype.navigateBack=function(){var e,t=A.page?A.page:"index",n=A.parameter;n=null==n?["0"]:JSON.parse(n);var o=t.split("|");if(o.pop(),t=(t=o.toString()).replace(",","|"),n[n.length-1].tabLabel,n.pop(),e=encodeURIComponent(JSON.stringify(n)),"viewFreeboardCtrl"==G.current.$$route.controller)""!=t&&(H.location.href="../app-sc/index_freeboard.html#/freeboard/"+t+"/"+e);else if("freeStyleCtrl"==G.current.$$route.controller){var a=A.viewId;""!=t&&(H.location.href="../app-free-style/index.html#/"+a+"/"+t+"/"+e)}else""!=t&&(H.location.href="../app-oc/index.html#/dashboard/"+t+"/"+e)},C.prototype.moveTo=function(e){var t,n=A.page?A.page:"index",o=A.parameter;o=null==o?["0"]:JSON.parse(o);var a,i=(a=n.split("|")).indexOf(e);if(-1!=i){var r=a.slice(0,i+1);if(o=o.slice(0,i+1),a=(a=r.toString()).replace(/\,/g,"|"),t=encodeURIComponent(JSON.stringify(o)),"viewFreeboardCtrl"==G.current.$$route.controller)H.location.href="../app-sc/index_freeboard.html#/freeboard/"+a+"/"+t;else if("freeStyleCtrl"==G.current.$$route.controller){var c=A.viewId;H.location.href="../app-free-style/index.html#/"+c+"/"+a+"/"+t}else H.location.href="../app-oc/index.html#/dashboard/"+a+"/"+t}},g.destroy=function(e){o&&o.$on("$destroy",e)},C.prototype.navigateToJson=function(e,t,n){var o,a=A.page?A.page:"index";null==t&&(t="0");var i=A.parameter;if(i=null==i?["0"]:JSON.parse(i),"self"==n){var r=a.split("|");r.pop(),(a=r.toString()).replace(",","|");var c=i[i.length-1].tabLabel;i.pop(),c&&(t.tabLabel=c),t.$target,i.push(t)}else t.$target,i.push(t);if(o=encodeURIComponent(JSON.stringify(i)),"viewFreeboardCtrl"==G.current.$$route.controller)H.location.href=""!=a?"../app-sc/index_freeboard.html#/freeboard/"+a+"|json:"+e+"/"+o:"../app-sc/index_freeboard.html#/freeboard/"+e+"/"+o;else if("freeStyleCtrl"==G.current.$$route.controller){var l=A.viewId;H.location.href=""!=a?"../app-free-style/index.html#/"+l+"/"+a+"|json:"+e+"/"+o:"../app-free-style/index.html#/"+l+"/"+e+"/"+o}else H.location.href=""!=a?"../app-oc/index.html#/dashboard/"+a+"|json:"+e+"/"+o:"../app-oc/index.html#/dashboard/"+e+"/"+o},C.prototype.navigateToFeature=function(e){var t=this,n=t.getValue("global/ROLE");0==n?t.navigateTo("index",{main:3},"self"):1==n?t.navigateTo("index",{main:2,backHistory:1},"self"):2==n?t.navigateTo("index",{main:2,backHistory:1},"self"):3==n&&t.navigateTo("index",{main:2,backHistory:1},"self")},C.prototype.navigateTo=function(e,t,n){n="object"!=_typeof(n)?{}:n;var o=this.getValue("ticketNo");if(void 0===t&&(t=e,e="index"),void 0===t)throw new Error("invalid parameter found");le.navigateTo(t,n,e,{ticketNo:o})},C.prototype.$state=w,C.prototype.historyBack=function(){H.history.go(-1)},C.prototype.back=function(){H.history.go(-1)},C.prototype.explainDic=function(e,t){return"object"==_typeof(t)?t:{type:"label",value:e,name:t}},C.prototype.getSimulateApi=function(i,e,t){for(var n=[],r={randomText:function(e){var t=e.length-1;return e[Math.round(Math.random()*t)]},random:function(e,t){return parseInt(Math.random()*e*Math.pow(10,t))/Math.pow(10,t)}},o=function(e){var t,n,o={};for(var a in i)n=i[t=a],o[t]="function"==typeof n?n(e,r,t):n;return o},a=0;a<e;a++)n.push(o(a));t&&t(n)},C.prototype.getStartDate=function(){var e=this.getValue("global/alertTime"),t=this.dateHandler();return(e=e?this.dateHandler(e):null)?e.clone().addHour(-2):t.addHour(-4)},C.prototype.getEndDate=function(){var e=this.getValue("global/alertTime"),t=this.dateHandler();return(e=e?this.dateHandler(e):null)?e.addHour(1):t},C.prototype.wait=function(t,n){!function e(){t()?n():setTimeout(function(){e()},10)}()},C.prototype.http=function(e,t){O.http(e,function(e){t(e)})},C.prototype.getScope=function(){for(var e=this;e.parent;)e=e.parent;return e},C.prototype.setScopeValue=function(e,t){var n=this.getScope();n.private||(n.private={},Object.defineProperty(n,"private",{enumerable:!1,value:{}})),n.private.$attr(e,t)},C.prototype.getScopeValue=function(e){return(this.getScope().private||{}).$attr(e)},C.prototype.linkTo=function(e,t){H.open(e,t||"_blank")},C.prototype.findViewHasProjectNameById=function(e,i){this.getResourceById(e,function(e){var t,n,o=e.label,a=(t=_.user.domainPath,"/"+(n=t.split("/"))[1]+"/"+n[2]+"/");E.getViewsOnlyPublishedByTypeAndDomainPath("dashboard",a,function(e){var t=e.data.find(function(e){return-1!=o.indexOf(e.viewTitle)});t?E.getViewById(t.viewId,function(e){0==e.code&&i(e.data)}):i(null)})})},C.prototype.getProjectsByCustomerId=function(e,t){var n={};e&&(n.customerId=e),M.findProjectsByCondition(n,function(e){0==e.code&&t(e.data)})},C.prototype.simulate=function(e,l,s,t,p){var f=[],g=(new Date).getTime(),y=function(e){var t=new Date(e-288e5),n=t.getFullYear(),o=t.getMonth()+1,a=t.getDate(),i=t.getHours(),r=t.getMinutes(),c=t.getSeconds();return o<10&&(o="0"+o),a<10&&(a="0"+a),i<10&&(i="0"+i),r<10&&(r="0"+r),c<10&&(c="0"+c),n+"-"+o+"-"+a+"T"+i+":"+r+":"+c+".000+0000"},n=function(e){var o=t.startTime.getTime(),a=t.period,r=t.frequency,c=t.range;!function e(i){if(i-o<a){var t=function(e){var t,n,o;for(var a in s)t=s[a],n=function(e){if(e){var t=e[1],n=e[0],o=t-n;return Math.round(10*(n+Math.random()*o))/10}return Math.round(100*Math.random())}(c),o={agentId:"0",aggregatePeriod:null,aggregateStatus:null,aggregateType:null,arisingTime:y(i),compressCount:0,computeTaskId:0,dataSerialNumber:0,dataTime:null,insertTime:y(i),kpiCode:t.id,nodeId:e.id,notes:null,numberValue:n,quality:0,resourceId:0,stringValue:null,value:n,valueStr:n+""},f.push(o)};for(var n in l)t(l[n]);e(i+r)}}(o),"function"==typeof p&&p(f)};return"time"==e?n():"ci"==e?n():"ci_2d"==e?function(){var e=pe.dictionaryService,u=["energyType","industryShortType"],t=function(a,i){e.getDictValues(i,function(e){if(0==e.code){var n=[],t=function(t){n.some(function(e){return e.label==t.label})||n.push(t)};for(var o in e.data)t(e.data[o]);u[a]={path:i,status:"finished",data:n},u.every(function(e){return"object"==_typeof(e)})&&function(){var e=function(l){var e=function(r,c){var e=function(i){var e=function(e){var t;ranges&&(t=ranges[r]);var n=function(e){if(e){var t=e[1],n=e[0],o=t-n;return Math.round(10*(n+Math.random()*o))/10}return Math.round(100*Math.random())}(t),o=g,a={agentId:"0",aggregatePeriod:null,aggregateStatus:null,aggregateType:null,arisingTime:y(o),compressCount:0,computeTaskId:0,dataSerialNumber:0,dataTime:null,insertTime:y(o),kpiCode:c.id,nodeId:l.id,notes:null,numberValue:n,instance:i.label+","+e.label,quality:0,resourceId:0,stringValue:null,value:n,valueStr:n+""};f.push(a)};for(var t in u[1].data)e(u[1].data[t])};for(var t in u[0].data)e(u[0].data[t])};for(var t in s)e(t,s[t])};for(var t in l)e(l[t]);"function"==typeof p&&p(f)}()}})};for(var n in u)t(n,u[n])}():"ci_3d"==e&&function(){var r,e=pe.dictionaryService,d=["energyType","industryShortType"],t=function(a,i){e.getDictValues(i,function(e){if(0==e.code){var n=[],t=function(t){n.some(function(e){return e.label==t.label})||n.push(t)};for(var o in e.data)t(e.data[o]);d[a]={path:i,status:"finished",data:n},d.every(function(e){return"object"==_typeof(e)})&&function(){var e=function(u){var e=function(c,l){var e=function(r){var e=function(i){var e=function(e){var t;ranges&&(t=ranges[c]);var n=function(e){if(e){var t=e[1],n=e[0],o=t-n;return Math.round(10*(n+Math.random()*o))/10}return Math.round(100*Math.random())}(t),o=g,a={agentId:"0",aggregatePeriod:null,aggregateStatus:null,aggregateType:r.valueCode,arisingTime:y(o),compressCount:0,computeTaskId:0,dataSerialNumber:0,dataTime:null,insertTime:y(o),kpiCode:l.id,nodeId:u.id,notes:null,numberValue:n,instance:e.label+","+i.label,quality:0,resourceId:0,stringValue:null,value:n,valueStr:n+""};f.push(a)};for(var t in d[1].data)e(d[1].data[t])};for(var t in d[0].data)e(d[0].data[t])};for(var t in r)e(r[t])};for(var t in s)e(t,s[t])};for(var t in l)e(l[t]);"function"==typeof p&&p(f)}()}})};for(var n in d)t(n,d[n]);e.getDictValues("aggregateType",function(e){0==e.code&&(r=e.data.slice(0,2))})}(),f},C.prototype.getModels=function(t){F.getModels(function(e){0==e.code&&t(e.data)})},C.prototype.getModelByIds=function(e,t){F.getModelByIds(e,function(e){0==e.code&&t(e.data)})},C.prototype.getKpisByModelId=function(e,o){e?F.getKpisByModelId(e,function(e){if(0==e.code){for(var t in e.data){var n=e.data[t].id;C.kpiDic[n]||(C.kpiDic[n]=e.data[t].label)}o(e.data)}}):o([])},C.prototype.getResourceByModelId=function(e,t,n,o){var a=C.prototype.getResourceByModelId;a.model=a.model||{},a.model[e]=a.model[e]||{};var i=a.model[e];i.cached&&!o?t(p(i.cached)):(i.promise=i.promise||new Promise(function(t){F.getResourceByModelId(e,function(e){0==e.code&&t(e.data)})},n),i.promise.then(function(e){i.cached=e,t(p(e))}))},C.prototype.getDomainsByFilter=function(e,t){F.getDomainsByFilter(e,function(e){0==e.code&&t(e.data)})},C.prototype.getDomainsByFilters=function(e,t){F.getDomainsByFilters(e,function(e){0==e.code&&t(e.data)})},C.prototype.getDeviceDiagnosticResumeAndAlertStatis=function(e,t){N.getDeviceDiagnosticResumeAndAlertStatis(e,function(e){0==e.code&&t(e.data)})},C.prototype.getDeviceDiagnosticResumeAndAlertBypage=function(e,t,n){N.getDeviceDiagnosticResumeAndAlertBypage(e,t,function(e){0==e.code&&n(e.data)})},C.prototype.queryDomainsByEnterpriseId=function(e,t){j.queryDomainsByEnterpriseId(e,function(e){0==e.code&&t(e.data)})},C.prototype.getProjectsByDomains=function(e,t){var n={};e&&(n.domainPath=e),M.findProjectsByCondition(n,function(e){0==e.code&&t(e.data)})},C.prototype.getProjectsByDomains=function(e,t){var n={};e&&(n.domainPath=e),M.findProjectsByCondition(n,function(e){0==e.code&&t(e.data)})},C.prototype.getCurrentProjectsFromDomain=function(t){_.user.domains,F.getDomainsByFilter({domains:_.user.domains,modelId:302},function(e){0==e.code&&t(e.data)})},C.prototype.findProjectById=function(e,t){M.findProjectById(e,function(e){0==e.code&&t&&t(e.data)})},C.prototype.getCurrentProjectsByCustom=function(t){if(_.user.subDomain){var e=_.user.subDomain.split("/"),n={customerId:e[e.length-2]};M.findProjectsByCondition(n,function(e){0==e.code&&t&&t(e.data)})}else t([])},C.prototype.getViewByProjectId=function(n,o){var e,t,a=(e=_.user.domainPath,"/"+(t=e.split("/"))[1]+"/"+t[2]+"/");E.getViewsOnlyPublishedByTypeAndDomainPath("configure",a,function(e){var t=e.data.find(function(e){return!(!e.template||"project"!=e.template.resourceType||e.template.resourceId!=n)});t?E.getViewById(t.viewId,function(e){0==e.code&&o(e.data)}):o(null)})},C.prototype.getAllMyViews=function(n){E.getAllMyViews(function(e){if(0==e.code){var t=e.data;n(t)}else n(null)})},C.prototype.deleteView=function(e,n){E.deleteView(e,function(e){if(0==e.code){var t=e.data;n(t)}else n(null)})},C.prototype.getDefaultView=function(e,n){E.getDefaultView(e,function(e){if(0==e.code){var t=e.data;n(t)}else n(null)})},C.prototype.getManagedViewsByTypeAndRole=function(e,n){E.getManagedViewsByTypeAndRole(e,function(e){if(0==e.code){var t=e.data;n(t)}else n(null)})},C.prototype.getViewsOnlyPublishedByTypeAndDomainPath=function(e,t,n){E.getViewsOnlyPublishedByTypeAndDomainPath(e,t,function(e){if(0==e.code){var t=e.data;n(t)}else n(null)})},g.getRoot=function(e){ie.getRoot().then(e)},C.prototype.getViewByModelId=function(n,o){var e,t,a=(e=_.user.domainPath,"/"+(t=e.split("/"))[1]+"/"+t[2]+"/");E.getViewsOnlyPublishedByTypeAndDomainPath("configure",a,function(e){var t=e.data.find(function(e){return!(!e.template||"device"!=e.template.resourceType||e.template.resourceId!=n)});t?E.getViewById(t.viewId,function(e){0==e.code&&o(e.data)}):o(null)})},C.prototype.getSimulateList=function(e,t){O.getSimulateList(e,t)};var D=Math.uuid();return C.prototype.webSocket=function(e,t,n,o){if(0!=e.length&&0!=t.length){D=o||Math.uuid(),U.unregister(D);var a={ciid:e.toString(),kpi:t.toString()},i="register";U.register(D,i,function(e){"function"==typeof n&&n(e.data)}),U.send(D,i,"kpi",a)}},C.prototype.getKpiFromViewByTypeAndRole=function(e,t,n,i,r){var c=[],l=[Number(this.getParameter("resourceId"))],u={},d=Math.uuid();this.getViewsByOnlyRole(e,t,n,function(e){var t=JSON.parse(e.content);t.cells.sort(function(e,t){return parseInt(e.z)-parseInt(t.z)}),t.cells.forEach(function(e){if("basic.Rect"==e.type&&e.kpiId&&8<e.kpiId.length&&e.nodeId&&8<e.nodeId.length){var t,n;t="string"==typeof e.kpiId&&-1<e.kpiId.search("number:")?Number(e.kpiId.split(":")[1]):Number(e.kpiId),n="string"==typeof e.modelId&&-1<e.modelId.search("number:")?Number(e.modelId.split(":")[1]):Number(e.modelId);var o={};F.rootModelsDic&&F.rootModelsDic[n]&&F.rootModelsDic[n].kpiDic&&F.rootModelsDic[n].kpiDic[t]&&(o=F.rootModelsDic[n].kpiDic[t]),c.push(t),u[t]={kpiName:e.attrs.text.text?e.attrs.text.text:o.label,kpiUnit:"number:1"==e.unitType&&o.unitLabel?o.unitLabel:"",value:"无",kpiCode:o.id,rangeObj:o.rangeObj}}});var n=["kpi",{category:"ci",isRealTimeData:!0,nodeIds:l,kpiCodes:c,startTime:null,endTime:null,timeRange:"",statisticType:"psiot",condList:[]}];q.getValueList(n,function(e){if(0==e.code){e.data.forEach(function(e){u[e.kpiCode].value=e.value,u[e.kpiCode].rangeObj&&(u[e.kpiCode].value=u[e.kpiCode].rangeObj[u[e.kpiCode].value])});var t=[];for(var n in u)t.push(u[n]);i(t)}});var o={ciid:l.toString(),kpi:c.toString()};U.unregister(d);var a="register";U.register(d,a,function(e){"function"==typeof r&&(u[e.data.kpiCode].rangeObj&&(e.data.value=u[e.data.kpiCode].rangeObj[e.data.value]),r(e.data))}),U.send(d,a,"kpi",o)})},C.prototype.filterEnterprises=function(t){var e=_.user.domains;j.findEnterpriseInfoByDomainPath(e,function(e){0==e.code&&(e.data.valueCode=e.data.industryType,C.prototype.queryEnterpriseListByHis(e.data,function(e){t(e)}))})},C.prototype.queryEnterpriseListByHis=function(e,t){if(e){var n=e.valueCode,o=[];j.findEnterpriseInfos(function(e){0==e.code&&(e.data.forEach(function(e){e.industryType==n&&(e.label=e.name,o.push(e))}),t(o))})}else J.warning("请选择行业")},C.prototype.queryDomains=function(n,o){var a=[],i=0;n.enterpriseList.forEach(function(e){var t;t=e,j.queryDomainsByEnterpriseId(t,function(e){0==e.code&&(i++,e.data.filter(function(e){return e.modelDefinitionId==n.modelId}).forEach(function(e){a.push(e.id)}),i==n.enterpriseList.length&&(o(a),i=0))})})},C.prototype.navigateToTracker=function(e){this.refresh("prod_tracker",{ticketNo:e})},C.prototype.getDirectivesByTypeAndRole=function(e,t,n,o){var a={},i=this;i.getManagedViewsByTypeAndRole(e,t,n,function(e){JSON.parse(e.content).cells.forEach(function(e){e.directiveIds&&e.directiveIds.forEach(function(e){"string"==typeof e?a[e.split(":")[1]]=!0:a[e]=!0})}),i.getDirectivesByModelId(n,function(e){var t=[];e.forEach(function(e){a[e.id]&&t.push(e)}),t.sort(doubleCompare(["values","index"],"desc")),o(t)})})},C.prototype.getDirectivesByTypeAndRoleAndValue=function(e,t,n,a){var i={},r=this.getParameter("resourceId"),c=this;c.getViewsByOnlyRole(e,t,n,function(e){JSON.parse(e.content).cells.forEach(function(e){e.directiveIds&&e.directiveIds.forEach(function(e){"string"==typeof e?i[e.split(":")[1]]=!0:i[e]=!0})}),c.getDirectivesByModelId(n,function(e){var o=[];e.forEach(function(e){i[e.id]&&o.push(e)}),o.sort(doubleCompare(["values","index"],"desc"));var t=o.map(function(e){return e.params&&e.params[0]?e.params[0].id:0}),n=[parseInt(r)];c.getKpiValueCi(n,t,function(e){var t=function(t){var e=o.find(function(e){return!!e.params[0]&&e.params[0].id==t.kpiCode});e&&(e.value=t.value)};for(var n in e)t(e[n]);a(o)})})})},C.prototype.getDirectivesByModelId=function(e,t){e?F.getDirectivesByModelId(e,function(e){0==e.code&&t(e.data)}):t([])},C.prototype.getRootTarget=function(){return h},C.prototype.queryBenchmarkByShortName=function(o,a){var i={},r={},c=[],l=[];L.getAllDicts(function(e){var n,t;0==e.code&&(e.data.forEach(function(e){"industryShortType"==e.dictCode?c.push(e):"energyType"==e.dictCode&&l.push(e)}),c.forEach(function(e){i[e.label]=e}),l.forEach(function(e){r[e.label]=e}),n=[],t=["kpi",{isRealTimeData:!0,nodeIds:[_.user.domainID],kpiCodes:[3327],granularityUnit:"MONTH",aggregateType:["VALENTWEIGHT"],timeRange:"",statisticType:"psiot",includeInstance:!0,condList:[],timePeriod:1,dataType:1}],q.getValueList(t,function(e){0==e.code&&(e.data.forEach(function(e){var t=e.instance.split(",");e.instanceName=i[t[0]].param,e.instanceCode=i[t[0]].valueCode,e.energyName=t[1],e.energyCode=r[t[1]].valueCode,o.label==t[0]&&n.push(e)}),a(n))}))})},C.prototype.getTaskBySimpleConditionAndPage=function(e,t,n){var o={start:0,length:1e6,sort:"standardNo",sortType:"desc"};n&&(o=n),ee.getTaskBySimpleConditionAndPage(e,o,function(e){0==e.code?t(e.data):t(null)})},C.prototype.getDeviceFaultInfoList=function(e,t){ne.getDeviceFaultInfoList(e,function(e){0==e.code?t(e.data):t(null)})},C.prototype.Info=V.get,C.prototype.saveDeviceFaultInfo=function(e,t){ne.saveDeviceFaultInfo(e,function(e){0==e.code?t(e.data):t(null)})},C.prototype.deleteDeviceFaultInfoById=function(e,t){ne.deleteDeviceFaultInfoById(e,function(e){t(e)})},C.prototype.getDeviceFaultBookList=function(e,t){ne.getDeviceFaultBookList(e,function(e){0==e.code?t(e.data):t(null)})},C.prototype.saveDeviceFaultBook=function(e,t){ne.saveDeviceFaultBook(e,function(e){0==e.code?t(e.data):t(null)})},C.prototype.deleteDeviceFaultBookById=function(e,t){ne.deleteDeviceFaultBookById(e,function(e){t(e)})},C.prototype.getDeviceDiagnosticResumeListBypage=function(e,t,n){ne.getDeviceDiagnosticResumeListBypage(e,t,function(e){n(e)})},C.prototype.exportBGExcel=function(e,t,n,o,a,i){ne.exportBGExcel(e,t,n,o,a,function(e){i(e)})},C.prototype.exportHBExcel=function(e,t,n,o,a){ne.exportHBExcel(e,t,n,o,function(e){a(e)})},C.prototype.getRollerPartActionLogByCondition=function(e,t){oe.getRollerPartActionLogByCondition(e,function(e){0==e.code?t(e.data):t(null)})},C.prototype.getRollerPartByCondition=function(e,t){oe.getRollerPartByCondition(e,function(e){0==e.code?t(e.data):t(null)})},C.prototype.rollerTrust=function(e,t,n){oe.rollerTrust(e,t,function(e){0==e.code?n(e.data):n(null)})},C.prototype.rollerReelTrustReplace=function(e,t,n,o){oe.rollerReelTrustReplace(e,t,n,function(e){0==e.code?o(e.data):o(null)})},C.prototype.getFactorySettlementByConditonAndPage=function(e,t,n){oe.getFactorySettlementByConditonAndPage(e,t,function(e){0==e.code?n(e.data):n(null)})},C.prototype.rollerReelTrust=function(e,t,n,o){oe.rollerReelTrust(e,t,n,function(e){0==e.code?o(e.data):o(null)})},C.prototype.pointCheckBatchDeal=function(e,t){oe.pointCheckBatchDeal(e,function(e){0==e.code?t(e.data):t(null)})},C.prototype.createTempPointCheckTask=function(e,t,n,o){oe.createTempPointCheckTask(e,t,n,function(e){0==e.code?o(e.data):o(null)})},C.prototype.changeTaskPlanTime=function(e,t,n,o){oe.changeTaskPlanTime(e,t,n,function(e){0==e.code?o(e.data):o(null)})},C.prototype.getPointCheckStatis=function(e,t){oe.getPointCheckStatis(e,function(e){0==e.code?t(e.data):t(null)})},C.prototype.getRollerPartByCondition=function(e,t){oe.getRollerPartByCondition(e,function(e){0==e.code?t(e.data):t(null)})},C.prototype.rollerOnBoard=function(e,t){oe.rollerOnBoard(e,function(e){0==e.code?t(e.data):t(null)})},C.prototype.createCycleReport=function(e,t){oe.createCycleReport(e,function(e){0==e.code?t(e.data):t(null)})},C.prototype.getCycleKpiList=function(e,t){oe.getCycleKpiList(e,function(e){0==e.code?t(e.data):t(null)})},C.prototype.sendCycleReportByTicket=function(e,t){oe.sendCycleReportByTicket(e,function(e){0==e.code?t(e.data):t(null)})},C.prototype.getDeviceCycleReportReumeListByPage=function(e,t,n){ne.getDeviceCycleReportReumeListByPage(e,t,function(e){n(e)})},C.prototype.getDatePickerListByCondition=function(e,t,n){oe.getDatePickerListByCondition(e,t,function(e){0==e.code?n(e.data):n(null)})},C.prototype.getPlanTaskTime=function(e,t){oe.getPlanTaskTime(e,function(e){0==e.code?t(e.data):t(null)})},C.prototype.setPlanTaskTime=function(e,t){oe.setPlanTaskTime(e,function(e){0==e.code?t(e.data):t(null)})},C.prototype.changeDatePickerBatch=function(e,t,n,o){oe.changeDatePickerBatch(e,t,n,function(e){0==e.code?o(e.data):o(null)})},C.prototype.saveDeviceWorkInfoList=function(e,t,n){ne.saveDeviceWorkInfoList(e,t,function(e){0==e.code?n(e.data):n(null)})},C.prototype.getWorkInfoByDeviceId=function(e,t){ne.getWorkInfoByDeviceId(e,function(e){0==e.code?t(e.data):t(null)})},C.prototype.getDeviceConditionStatus=function(e,t){ne.getDeviceConditionStatus(e,function(e){0==e.code?t(e.data):t(null)})},C.prototype.getModelAnalysisResultByConditionAndPage=function(e,t,n){ne.getModelAnalysisResultByConditionAndPage(e,t,function(e){0==e.code?n(e.data):n(null)})},C.prototype.getDailyReportByCondtionAndPage=function(e,t,n){oe.getDailyReportByCondtionAndPage(e,t,function(e){0==e.code?n(e.data):n(null)})},C.prototype.getFaultDiagnosisModelByConditionAndPage=function(e,t,n){oe.getFaultDiagnosisModelByConditionAndPage(e,t,function(e){0==e.code?n(e.data):n(null)})},C.prototype.addFaultDiagnosisModel=function(e,t){oe.addFaultDiagnosisModel(e,function(e){e.code,t(e)})},C.prototype.deleteFaultDiagnosisModel=function(e,t){oe.deleteFaultDiagnosisModel(e,function(e){0==e.code?t(e.data):t(null)})},C.prototype.getCrackRateModelByConditionAndPage=function(e,t,n){oe.getCrackRateModelByConditionAndPage(e,t,function(e){0==e.code?n(e.data):n(null)})},C.prototype.addCrackRateModel=function(e,t){oe.addCrackRateModel(e,function(e){0==e.code?t(e.data):t(null)})},C.prototype.deleteFaultCrackRateModel=function(e,t){oe.deleteFaultCrackRateModel(e,function(e){0==e.code?t(e.data):t(null)})},C.prototype.getCrackDiffModelByConditionAndPage=function(e,t,n){oe.getCrackDiffModelByConditionAndPage(e,t,function(e){0==e.code?n(e.data):n(null)})},C.prototype.addCrackDiffModel=function(e,t){oe.addCrackDiffModel(e,function(e){0==e.code?t(e.data):t(null)})},C.prototype.deleteCrackDiffModel=function(e,t){oe.deleteCrackDiffModel(e,function(e){0==e.code?t(e.data):t(null)})},C.prototype.getDiagnosisModel=function(e,t){oe.getDiagnosisModel(e,function(e){0==e.code?t(e.data):t(null)})},C.prototype.sendModelAnalysis=function(e,t,n){ne.sendModelAnalysis(e,t,function(e){0==e.code?n(e.data):n(null)})},C.prototype.sendModelAnalysisTrain=function(e,t,n,o,a){ne.sendModelAnalysisTrain(e,t,n,o,function(e){0==e.code?a(e.data):a(null)})},C.prototype.getTaskByCondition=function(e,t){ee.getTaskByCondition(e,function(e){0==e.code?t(e.data):t(null)})},C.prototype.addPointCheckStanard=function(e,t){ee.addPointCheckStanard(e,function(e){0==e.code?t(e.data):t(null)})},C.prototype.addMaintainStandardTask=function(e,t){ee.addMaintainStandardTask(e,function(e){0==e.code?t(e.data):t(null)})},C.prototype.addOfflineStandard=function(e,t){ee.addOfflineStandard(e,function(e){0==e.code?t(e.data):t(null)})},C.prototype.deleteTask=function(e,t){ee.deleteTask(e,function(e){t(e)})},C.prototype.deleteMaintainStandardTask=function(e,t){ee.deleteMaintainStandardTask(e,function(e){t(e)})},C.prototype.addPreparedMaintainTrust=function(e,t){ee.addPreparedMaintainTrust(e,function(e){0==e.code?t(e.data):t(null)})},C.prototype.deleteSparePart=function(e,t){te.deleteSparePart(e,function(e){t(e)})},C.prototype.saveSparePart=function(e,t){te.saveSparePart(e,function(e){0==e.code?t(e.data):t(null)})},C.prototype.getSparePartByDeviceId=function(e,t){te.getSparePartByDeviceId(e,function(e){0==e.code?t(e.data):t(null)})},t(function(e){i("global/resource",e)}),new C(e)}}]),pe});
//# sourceMappingURL=../../map/js/services/common-method-service.js.map
