function _typeof(o){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(o)}!function(o,t){"function"==typeof define&&"function"==typeof require?define(["../services/services.js"],t):o==window&&(o.wSocket=t())}(this,function(o){"use strict";function t(o,t,n){var e,r,i,c,u={},f=(i=n.protocol,c=n.host,i=i||"ws:",c?i+"//"+c+"/websocket/message":"wss://192.168.1.121/websocket/message");function s(o){f=o||f,e=new WebSocket(f),r=new Promise(function(t,o){e.onopen=function(o){r=void 0,t("success")}}),e.onmessage=function(o){var t,n=(t=o.data,new RegExp("^\\{.*\\}$","g").test(t)?JSON.parse(t):null),e=n.uuid,i=(n.nodeId,n.kpiCode,n.data);for(var r in u[e]){(0,u[e][r])(i)}},e.onclose=function(o){},e.onerror=function(o){}}function p(o){return new p.init(o)}function a(o,t){var n={uuid:o,operation:"register",type:"kpi",param:t};e.send(JSON.stringify(n))}function y(o){var t={uuid:o,operation:"unRegister"};e.send(JSON.stringify(t))}function d(o){return"object"==_typeof(o)?o.id:o}return function(o,t){for(var n in t)o[n]=t[n]}((p.init=s).prototype,{connect:function(o,t,n,e){(u[o]=u[o]||[]).push(e);var i={ciid:t.map(d).toString(),kpi:n.map(d).toString()};"object"==_typeof(r)?r.then(function(){a(o,i)}):a(o,i)},disconnect:function(o){for(var t in u[o])delete u[o][t];delete u[o],"object"==_typeof(r)?r.then(function(){y(o)}):y(o)}}),p}if(!o)return t(setTimeout,0,{protocol:"ws:",host:"localhost:8082"});o.service("SwSocketBaogang",["$timeout","growl","serviceProxy",t])});
//# sourceMappingURL=../../map/js/services/websocket-service-baogang.js.map
