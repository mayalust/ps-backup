function _typeof(o){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(o)}!function(o,t){if("function"==typeof define)define(["angular","../../../js/services/service_factory"],t);else{var e={module:function(){}};"object"==("undefined"==typeof module?"undefined":_typeof(module))?module.exports&&(module.exports=t(e,require(["./service_factory.js"]))):o==window&&(window.$services=t(e,{}))}}(this,function(S,c){"use strict";var b=[],o=S.module("services",["ngResource"]);function j(o){this.addStr(o)}function t(w,o,t,y,v){var e=function(){var o=location.search,t=new Object;if(-1!=o.indexOf("?"))for(var e=o.substr(1),n=e.split("&"),r=0;r<n.length;r++)t[n[r].split("=")[0]]=unescape(n[r].split("=")[1]);return t}(),g=e.token,n=e.version?e.version:"V2";c.version=n,window.location.host&&-1==window.location.host.search("localhost")&&-1==window.location.host.search("127.0.0.1")&&-1==window.location.host.search("192.168.199.223")&&(c.host=window.location.host,null!=window.location.origin?c.origin=window.location.origin:c.origin="https://"+window.location.host,"https:"==window.location.protocol?c.protocol="wss:":c.protocol="ws:");var r,i,s,m=(r=window.location,s=r.host,i=s,new RegExp("localhost","g").test(i)&&"63342"==window.location.port?c.origin+"/":r.origin+"/");c.get=function(o,t,e,n,r,i){var s=new j((t=j.getMethod(t)).search);t=t.method,s.addStr(i),null!=g&&s.setAttr("token",g);var c=y.defer();S.isString(e)||(e=S.copy(e),e=JSON.stringify(e));var l="nodejsapi"==o?"api/node":-1<o.indexOf("/")?"api/rest/":"api/rest/post/",a=m+l+(o="nodejsapi"==o?"":o)+"/"+t+s.string(),u={timeout:c.promise},f=w.post(a,e,u);function p(){return null}function d(o){if(o=200==o.status?o.data:o,f.kill=p,null!=n)if(0==o.code)n(o);else if(-1<o.message.search("需要用户登录才能使用")){var t=o.data;t="/"==t[0]&&t.slice(1)||t,location.href="../"+t,n({code:0,data:{}})}else 9999<o.code?console.error(o.message,{}):(console.error(a,"方法调用发生错误"),console.error("参数：",JSON.stringify(e,null,2)),console.error("错误编码"+o.code+":"+o.message)),n(o)}function h(o){var t="";t=-1==status?"(HTTP status:"+status+")服务器连接已中断，请刷新页面":"网络链接异常，请刷新页面",f.kill==p&&v.error(t,{}),f.kill=p}return f.success&&f.success(d)||f.then(d),f.error&&f.error(h)||f.catch(h),f.kill=function(){var o=b.indexOf(this);b.splice(o,1)},b.push(f),f};(new Date).getTimezoneOffset();return c.removeAllRequest=function(){for(var o in b)b[o].kill()},c}return j.getMethod=function(o){var t=o.split("?");return{method:t[0],search:t[1]}},j.prototype.addStr=function(o){var t,e;"string"==typeof o&&o.split("&").forEach((t=this,e=function(o){var t=o.split("=");this[t[0]]=t[1]},function(){return e.apply(t,arguments)}))},j.prototype.setAttr=function(o,t){this[o]=t},j.prototype.string=function(){var o=[];for(var t in this)this.hasOwnProperty(t)&&o.push(t+"="+this[t]);return"?"+o.join("&")},t.$inject=["$http","$rootScope","$location","$q","growl"],o.factory("serviceProxy",t),o});
//# sourceMappingURL=../../map/js/services/services.js.map
