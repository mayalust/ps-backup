define(["directives/directives"],function(e){"use strict";e.initDirective("historyTimeline",function(e){return{restrict:"A",controller:["$scope","$element","$attrs",function(e,a,i){e.$on("deviceHistoryInit",function(e,i){for(var s="",r='<ul class="timeline" >',t=0;t<i.length;t++)0==t&&(s=i[t].update_date.substring(0,10),r+=l(s)),s!=i[t].update_date.substring(0,10)&&(s=i[t].update_date.substring(0,10),r+=l(s)),r+=c(i[t]);r+='<li><i class="fa fa-clock-o bg-gray"></i></li>',r+="</ul>",a.html(r)});var l=function(e){var i="",s=Math.random();return i+='<li class="time-label"><span class='+(.75<s?"bg-red":.5<s?"bg-orange":.25<s?"bg-yellow":"bg-green")+">",i+=e.replace(/-/,"年").replace(/-/,"月"),i+="</span></li>"},c=function(e){var i="",s="";return 1==e.resource_type&&(s="fa-envelope bg-blue"),2==e.resource_type&&(s="fa-picture-o bg-yellow"),3==e.resource_type&&(s="fa-video-camera bg-maroon"),e.file_url,i+='<li><i class="fa '+s+'"></i>',i+='<div class="timeline-item">',i+='<span class="time"><i class="fa fa-clock-o"></i>',i+=e.update_date.substring(0,19).replace(/-/,"年").replace(/-/,"月").replace(/T/," "),i+="</span>",i+='<h3 class="timeline-header"><a href="#">'+e.author+"</a>&nbsp;"+e.subject+"</h3>",1==e.resource_type&&(i+='<div class="timeline-body">'+e.content+"</div>"),2==e.resource_type&&(i+='<div class="timeline-body"><img src="../'+e.file_url+'" alt="..." class="margin"></div>'),3==e.resource_type&&(i+='<div class="timeline-body">',i+='<div class="embed-responsive embed-responsive-16by9">',i+='<video src="../'+e.file_url+'" controls="controls"></video>',i+="</div></div>"),i+="</li>"}}]}})});
//# sourceMappingURL=../../map/js/directives/timeline-dom.js.map
