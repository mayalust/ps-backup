define(["directives/directives","bootstrap-dialog","datatables.net","datatables.net-bs","datatables.net-select"],function(t,e,a){"use strict";t.initDirective("resourceListTable",["$timeout","$compile","growl",function(t,i,e){return{restrict:"A",controller:["$scope","$element","$attrs",function(r,t,e){var d,n=t;r.$on("RESOURCE",function(t,e){d&&(d.destroy(),n.empty()),!1,d=n.DataTable({dom:e.data&&0<e.data.length?$.ProudSmart.datatable.footerdom:"",language:$.ProudSmart.datatable.language,select:$.ProudSmart.datatable.select,data:e.data,order:[[5,"desc"]],columns:[{data:"label",title:"模板名称"},{data:"desc",title:"模板描述"},{data:"values.series",title:"产品系列"},{data:"values.TYPE_SPEC",title:"设备型号"},$.ProudSmart.datatable.optionCol3,{data:"createTime",title:"",visible:!1}],columnDefs:[{targets:1,data:"desc",render:function(t,e,a){return t}},{targets:2,data:"values.series",render:function(t,e,a){return a.values.series?a.values.series:""}},{targets:3,data:"values.TYPE_SPEC",render:function(t,e,a){return a.values.TYPE_SPEC?a.values.TYPE_SPEC:""}},{targets:4,data:"option",render:function(t,e,a){var n="<div class='btn-group btn-group-sm'>";return r.menuitems.A04_S01&&(n+="<button id='edit-btn'  ng-click='addMod("+a.id+");'  class='btn btn-primary' ><i class='fa fa-edit hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 管理</span></button>"),r.menuitems.A05_S01&&(n+="<button id='del-btn'   class='btn btn-default' ><i class='fa fa-trash hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 删除</span></button>"),r.menuitems.A06_S01&&(n+="<button type='button' class='btn btn-default dropdown-toggle' data-toggle='dropdown'> 更多<span class='caret'></span></button>",n+="<ul class='dropdown-menu' role='menu'>",r.menuitems.A06_S01&&(n+="<li><a role='button' ng-click='modelViewEdit("+a.id+");' id='disable-btn'>设计仪表板</a></li>"),r.menuitems.A12_S01&&(n+="<li><a id='xml-btn' role='button' >导出SDK模板</a></li>"),n+="</ul>"),n+="</div>"}}],rowCallback:function(t,e,a){i(t)(r)}})}),n.on("click","#xml-btn",function(t){t.preventDefault();var e=$(this).closest("tr");e.addClass("selected");var a=d.row(e);r.writeXml(a.data())}),n.on("click","td",function(t){t.preventDefault(),$(n).find("tbody tr").removeClass("selected");var e=$(this).closest("tr");e.addClass("selected");var a=d.row(e);r.selectTr=a.data().id,r.selectObj=a.data(),r.$apply()}),n.on("click","#del-btn",function(t){t.preventDefault();var e=$(this).closest("tr"),a=d.row(e),n=a.data();r.delMod(n,function(t){t&&a.remove().draw(!1)})})}]}}]),t.initDirective("kpiListTable",["$timeout","$compile","growl",function(t,i,e){return{restrict:"A",controller:["$scope","$element","$attrs",function(r,t,a){var d,n=t;r.$on("KPI",function(t,e){d&&(d.destroy(),n.empty()),!1,d=n.DataTable({dom:e&&0<e.length?$.ProudSmart.datatable.footerdom:"",language:$.ProudSmart.datatable.language,bAutoWidth:!0,data:e,bProcessing:!0,bPaginate:!1,bSort:!1,bInfo:!1,columns:[{data:"serial",title:"序号"},{data:"name",title:"数据项"},{data:"id",title:"数据编码"},{data:"label",title:"名称"},{data:"unit",title:"单位"},{data:"number",title:"是否数值"},{data:"values",title:"检测专业"},{data:"range",title:"取值范围"},{data:"icon",title:"图标"},$.ProudSmart.datatable.optionCol2],columnDefs:[{targets:0,data:"serial",render:function(t,e,a){return r.isIndexEdit&&"display"==e?"<input style='width:40px' class='form-control input-sm index-edit-input' type='number' value='"+t+"'>":t}},{targets:1,data:"name",render:function(t,e,a){return escape(t)}},{targets:2,data:"id",render:function(t,e,a){return escape(t)}},{targets:3,data:"label",render:function(t,e,a){return escape(t)}},{targets:4,data:"unit",render:function(t,e,a){return t}},{targets:5,data:"number",render:function(t,e,a){return t?"是":"否"}},{targets:6,data:"values",render:function(t,e,a){var n="";return t&&(n=r.specialtyPropsDic[t.specialtyProp]),n}},{targets:7,data:"range",render:function(t,e,a){return t}},{targets:8,data:"icon",render:function(t,e,a){var n="";return t&&(n='<div  class="btn btn-social-icon btn-bitbucket btn-sm"><i  class="'+t+'"></i>'),n}},{targets:9,data:"option",render:function(t,e,a){var n="<div class='btn-group btn-group-sm'>";return r.menuitems.D04_A08&&(n+="<button id='edit-btn' class='btn btn-primary' ><i class='fa fa-edit hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 修改</span></button>"),r.menuitems.D03_A08&&(n+="<button id='del-btn' class='btn btn-default' ><i class='fa fa-minus hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 删除</span></button>"),n+="</div>"}}],rowCallback:function(t,e,a){i(t)(r)}})}),r.$on("table-search-handle",function(t,e){e.name==a.name&&d.search(e.value).draw()}),n.on("click","#edit-btn",function(t){t.preventDefault(),!0;var e=$(this).closest("tr"),a=d.row(e);r.addData("upd",a.data())}),n.on("click","#del-btn",function(t){t.preventDefault();var e=$(this).closest("tr"),a=d.row(e),n=a.data();r.deleteAction("kpi",n,function(t){t&&a.remove().draw(!1)})}),n.on("change",".index-edit-input",function(t){t.stopPropagation();var e=$(this).closest("tr");d.row(e).data().index=$(this).val()})}]}}])});
//# sourceMappingURL=../../map/js/directives/resource-dom.js.map
