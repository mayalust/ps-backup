define(["directives/directives"],function(s){"use strict";function r(s,v,r,e){var i={scope:{change:"&",selector:"="},restrict:"A"};return i.link=function(f,m){var l;f.$watch("selector",function(s,r,e){s&&(s.setValue=function(s){for(var r=-1,e=0;e<11;e++){l.find("#pointer_"+e).css("opacity","0")}for(var i in s){if((r+=s[i])<12)l.find("#pointer_"+r).css("opacity","1")}!function(){var s=[],r=1;$(document).off("mouseup.freeboard");for(var e=0;e<11;e++)i=e,"1"==l.find("#pointer_"+i).css("opacity")?(s.push(r),r=1):r++;var i;s.push(r),f.change({cols:s,reset:!1})}()})}),v(function(){var p,o=[],s=$("<div class='wrap'></div>");l=$("<div class='pointers'></div>");var t=$("<div class='actives'></div>");$(m).append(t),$(m).append(l),$(m).append(s),$(m)[0].ondragstart=function(){return!1};for(var r=0;r<12;r++)s.append($("<div class='block'></div>"));for(var e=0;e<11;e++)i=e,l.append($("<div id='pointer_"+i+"' class='pointer'></div>"));var i;for(var a=0;a<11;a++)!function(r){var s=$("<div id='active_"+r+"' class='active'></div>");t.append(s),s.on({mousedown:function(s){n(r)},mouseover:function(s){c(r)}})}(a);function c(s){if("MOUSEDOWN"==p){for(var r=l.find("#pointer_"+s),e=0;e<11;e++){var i=l.find("#pointer_"+e);-1==o.indexOf(e)&&i.css("opacity","0")}r.css("opacity","1")}}function n(s){p="MOUSEDOWN";var r,e=l.find("#pointer_"+s);t.find("#active_"+s);"0"==e.css("opacity")?($(document).off("mouseup.freeboard_click"),$(document).on("mouseup.freeboard",d)):(v(function(){$(document).off("mouseup.freeboard_click"),$(document).on("mouseup.freeboard",d)},400),$(document).off("mouseup.freeboard"),$(document).on("mouseup.freeboard_click",function(){!function(s){var r=l.find("#pointer_"+s);p=void 0,0==r.css("opacity")?r.css("opacity",1):r.css("opacity",0);u()}(s)})),e.css("opacity","1"),o=[];for(var i=0;i<11;i++)r=i,1==l.find("#pointer_"+r).css("opacity")&&s!=r&&o.push(r)}function d(){u()}function u(){var s,r=[],e=1;p=void 0,$(document).off("mouseup.freeboard");for(var i=0;i<11;i++)s=i,"1"==l.find("#pointer_"+s).css("opacity")?(r.push(e),e=1):e++;r.push(e),f.$apply(function(){f.change({cols:r,reset:!0})})}})},i}function e(s,t){var r={restrict:"A",scope:{drag:"=",handle:"="},link:function(p,s,r){var e={cursor:"move",revert:!0,appendTo:"body",scroll:!1,containment:$("body"),helper:function(s){var r,o;if("add_grid"==$(this).attr("id"))for(var e in r=$("<div class='colDrag row'><div class='col-xs-12'><div class='row title'>创建一个栅格</div><div class='row' id='grid'></div></div></div>"),p.drag){var i=$("<div class='col-xs-"+p.drag[e].col+"'><div class='block'>"+parseInt(p.drag[e].col/12*100)+"%</div></div>");r.find("#grid").append(i)}else r=(o=$(this),function(s){var p=$("<div class='colDrag row'><div class='col-xs-12'><div class='row title'>创建自定义组件</div><div class='row' id='grid'></div></div></div>");return p.find("#grid").append($("<div class='col-xs-12'><div class='block'>创建自定义组件</div></div>")),function s(r){for(var e in r)r[e].sub?s(r[e].sub):"add_"+r[e].type==o.attr("id")&&(i=r[e],(p=$("<div class='colDrag row'><div class='col-xs-12'><div class='row title'>创建"+i.label+"</div><div class='row' id='grid'></div></div></div>")).find("#grid").append($("<div class='col-xs-12'><div class='block'>创建"+i.label+"</div></div>")));var i}(s),p})(t);return r},revertDuration:0,zIndex:9999999};0!=p.handle&&(e.handle=$(s).find(".moveBtn")),$(s).draggable(e)}};return r}function i(e){var s={restrict:"A",scope:{input:"="},link:function(t,a,s){function r(){var s=$(a).parent().width(),r="",e=0;for(var i in t.input){var p=new RegExp("[\\u4E00-\\u9FFF]+","g"),o=t.input[i];if(p.test(o)?e+=6:e+=12,s<e)break;r+=o}i<t.input.length-1&&(r+="..."),$(a).val(r)}e(function(){r()}),$(window).on("resize",function(){r()})}};return s}function p(s){var r={restrict:"A",scope:{ngModel:"=",target:"=",change:"&"},link:function(p,o,s){p.$watch("ngModel",function(s,r,e){if(s){$(o).find("#icon_"+s.id).addClass("active");var i=p.target.find(function(s){return"bgcolor"==s.$name});i&&($(o).find("#icon_"+s.id).css("background-color",i.value),$(o).find("#icon_"+s.id).css("border-color",i.value))}});var r=[{perfix:"ion",css:"ion-ios-gear-outline"},{perfix:"fa",css:"fa-connectdevelop"},{perfix:"fa",css:"fa-warning"},{perfix:"fa",css:"fa-edit"},{perfix:"fa",css:"fa-birthday-cake"},{perfix:"fa",css:"fa-user"},{perfix:"fa",css:"fa-envelope-o"},{perfix:"fa",css:"fa-file-code-o"},{perfix:"fa",css:"fa-clock-o"},{perfix:"fa",css:"fa-warning"},{perfix:"proudsmart",css:"ps-align-center"},{perfix:"proudsmart",css:"ps-align-left"},{perfix:"proudsmart",css:"ps-arrow-down"},{perfix:"proudsmart",css:"ps-arrow-up"},{perfix:"proudsmart",css:"ps-add"},{perfix:"proudsmart",css:"ps-address"},{perfix:"proudsmart",css:"ps-air-humidity"},{perfix:"proudsmart",css:"ps-air-temperature"},{perfix:"proudsmart",css:"ps-align-bottom"},{perfix:"proudsmart",css:"ps-align-middle"},{perfix:"proudsmart",css:"ps-align-right"},{perfix:"proudsmart",css:"ps-align-top"},{perfix:"proudsmart",css:"ps-app"},{perfix:"proudsmart",css:"ps-back-01"},{perfix:"proudsmart",css:"ps-back"},{perfix:"proudsmart",css:"ps-battery"},{perfix:"proudsmart",css:"ps-beixunpanjilu"},{perfix:"proudsmart",css:"ps-business-change"},{perfix:"proudsmart",css:"ps-camera"},{perfix:"proudsmart",css:"ps-center"},{perfix:"proudsmart",css:"ps-certificate"},{perfix:"proudsmart",css:"ps-chart-brokenline"},{perfix:"proudsmart",css:"ps-co2"},{perfix:"proudsmart",css:"ps-collection-point"},{perfix:"proudsmart",css:"ps-copy"},{perfix:"proudsmart",css:"ps-copyright"},{perfix:"proudsmart",css:"ps-court-announcement"},{perfix:"proudsmart",css:"ps-court-ruling"},{perfix:"proudsmart",css:"ps-current-production_p"},{perfix:"proudsmart",css:"ps-current-production"},{perfix:"proudsmart",css:"ps-customer"},{perfix:"proudsmart",css:"ps-daily-output"},{perfix:"proudsmart",css:"ps-delete-02"},{perfix:"proudsmart",css:"ps-delete"},{perfix:"proudsmart",css:"ps-domain"},{perfix:"proudsmart",css:"ps-download"},{perfix:"proudsmart",css:"ps-duration"},{perfix:"proudsmart",css:"ps-dust"},{perfix:"proudsmart",css:"ps-edit"},{perfix:"proudsmart",css:"ps-electric-motor"},{perfix:"proudsmart",css:"ps-electric-motor02"},{perfix:"proudsmart",css:"ps-email"},{perfix:"proudsmart",css:"ps-equipment-number"},{perfix:"proudsmart",css:"ps-estimated-output"},{perfix:"proudsmart",css:"ps-excel"},{perfix:"proudsmart",css:"ps-exclamation"},{perfix:"proudsmart",css:"ps-exit"},{perfix:"proudsmart",css:"ps-expense-center"},{perfix:"proudsmart",css:"ps-fail"},{perfix:"proudsmart",css:"ps-fan"},{perfix:"proudsmart",css:"ps-fax"},{perfix:"proudsmart",css:"ps-focus"},{perfix:"proudsmart",css:"ps-gis"},{perfix:"proudsmart",css:"ps-gongdanguanli"},{perfix:"proudsmart",css:"ps-group"},{perfix:"proudsmart",css:"ps-guzhangfenxi"},{perfix:"proudsmart",css:"ps-help"},{perfix:"proudsmart",css:"ps-horizontal-distribution"},{perfix:"proudsmart",css:"ps-information"},{perfix:"proudsmart",css:"ps-irrigation"},{perfix:"proudsmart",css:"ps-item-number"},{perfix:"proudsmart",css:"ps-kehufuwu"},{perfix:"proudsmart",css:"ps-layer-down"},{perfix:"proudsmart",css:"ps-layer-up"},{perfix:"proudsmart",css:"ps-link"},{perfix:"proudsmart",css:"ps-linked-data"},{perfix:"proudsmart",css:"ps-login"},{perfix:"proudsmart",css:"ps-management"},{perfix:"proudsmart",css:"ps-market"},{perfix:"proudsmart",css:"ps-message"},{perfix:"proudsmart",css:"ps-more"},{perfix:"proudsmart",css:"ps-move"},{perfix:"proudsmart",css:"ps-mushroom"},{perfix:"proudsmart",css:"ps-nav_icon_01"},{perfix:"proudsmart",css:"ps-nav_icon_02"},{perfix:"proudsmart",css:"ps-nav_icon_03"},{perfix:"proudsmart",css:"ps-nav_icon_04"},{perfix:"proudsmart",css:"ps-nav_icon_05"},{perfix:"proudsmart",css:"ps-nav_icon_06"},{perfix:"proudsmart",css:"ps-nav_icon_07"},{perfix:"proudsmart",css:"ps-nav_icon_08"},{perfix:"proudsmart",css:"ps-nav_icon_09"},{perfix:"proudsmart",css:"ps-nav_icon_10"},{perfix:"proudsmart",css:"ps-nav_icon_11"},{perfix:"proudsmart",css:"ps-nav_icon_12"},{perfix:"proudsmart",css:"ps-negative"},{perfix:"proudsmart",css:"ps-neutral"},{perfix:"proudsmart",css:"ps-number"},{perfix:"proudsmart",css:"ps-pai_logo"},{perfix:"proudsmart",css:"ps-patent"},{perfix:"proudsmart",css:"ps-pattern"},{perfix:"proudsmart",css:"ps-pay"},{perfix:"proudsmart",css:"ps-pdf"},{perfix:"proudsmart",css:"ps-peizhiguanli"},{perfix:"proudsmart",css:"ps-phone"},{perfix:"proudsmart",css:"ps-planting"},{perfix:"proudsmart",css:"ps-positive"},{perfix:"proudsmart",css:"ps-publish"},{perfix:"proudsmart",css:"ps-qiyerongyu"},{perfix:"proudsmart",css:"ps-qiyexinxi"},{perfix:"proudsmart",css:"ps-qq"},{perfix:"proudsmart",css:"ps-qqspace"},{perfix:"proudsmart",css:"ps-recommend"},{perfix:"proudsmart",css:"ps-renewal"},{perfix:"proudsmart",css:"ps-review"},{perfix:"proudsmart",css:"ps-safety"},{perfix:"proudsmart",css:"ps-sandglass"},{perfix:"proudsmart",css:"ps-save"},{perfix:"proudsmart",css:"ps-search"},{perfix:"proudsmart",css:"ps-sequence"},{perfix:"proudsmart",css:"ps-server"},{perfix:"proudsmart",css:"ps-shebeigaojing"},{perfix:"proudsmart",css:"ps-shebeiguanli"},{perfix:"proudsmart",css:"ps-shebeijiance"},{perfix:"proudsmart",css:"ps-shebeimuban"},{perfix:"proudsmart",css:"ps-smoke-no"},{perfix:"proudsmart",css:"ps-smoke-yes"},{perfix:"proudsmart",css:"ps-software-copyright"},{perfix:"proudsmart",css:"ps-soil-humidity"},{perfix:"proudsmart",css:"ps-soil-temperature"},{perfix:"proudsmart",css:"ps-spraying"},{perfix:"proudsmart",css:"ps-success"},{perfix:"proudsmart",css:"ps-sunshine"},{perfix:"proudsmart",css:"ps-system"},{perfix:"proudsmart",css:"ps-task"},{perfix:"proudsmart",css:"ps-team"},{perfix:"proudsmart",css:"ps-tianjiaanli"},{perfix:"proudsmart",css:"ps-time"},{perfix:"proudsmart",css:"ps-tongjifenxi"},{perfix:"proudsmart",css:"ps-top"},{perfix:"proudsmart",css:"ps-trademark"},{perfix:"proudsmart",css:"ps-unlink"},{perfix:"proudsmart",css:"ps-upload-02"},{perfix:"proudsmart",css:"ps-upload"},{perfix:"proudsmart",css:"ps-user"},{perfix:"proudsmart",css:"ps-userinfo"},{perfix:"proudsmart",css:"ps-vertical-distribution"},{perfix:"proudsmart",css:"ps-video-camera"},{perfix:"proudsmart",css:"ps-video"},{perfix:"proudsmart",css:"ps-water-no"},{perfix:"proudsmart",css:"ps-water-yes"},{perfix:"proudsmart",css:"ps-water"},{perfix:"proudsmart",css:"ps-web"},{perfix:"proudsmart",css:"ps-website"},{perfix:"proudsmart",css:"ps-weibaofuwu"},{perfix:"proudsmart",css:"ps-weibo"},{perfix:"proudsmart",css:"ps-weixin"},{perfix:"proudsmart",css:"ps-wodefangan"},{perfix:"proudsmart",css:"ps-wodeqiye"},{perfix:"proudsmart",css:"ps-wodexunpanjilu"},{perfix:"proudsmart",css:"ps-xitongxiaoxi"},{perfix:"proudsmart",css:"ps-xunpanxiaoxi"},{perfix:"proudsmart",css:"ps-yunyingshouye"}],e=function(s,r){r.id=s;var e=$("<div id='icon_"+s+"' class='block'></div>"),i=$("<div class='"+r.perfix+" "+r.css+"'></div>");e.append(i),$(o).append(e);e.on("click",function(s){p.$apply(function(){$(o).find(".block").removeAttr("style"),$(o).find(".active").removeClass("active"),$(s.currentTarget).addClass("active"),$(s.currentTarget).css("background-color",$("input[color-picker]").val()),$(s.currentTarget).css("border-color",$("input[color-picker]").val()),p.ngModel=r,p.change()})})};for(var i in r)e(i,r[i])}};return r}function o(s,p){var o,r={};return r.restrict="A",r.scope={range:"=",ngModel:"=",min:"=",max:"=",step:"=",unit:"="},r.link=function(e,i,s){p(function(){e.$watch("ngModel",function(s,r,e){s&&(s instanceof Array?$(i).slider("values",s):$(i).slider("value",s))}),$(i).slider({step:e.step?parseInt(e.step):1,min:e.min?e.min:0,max:e.max?e.max:100,range:!!e.range&&e.range,start:function(s,r){o=r.values},slide:function(s,r){e.$apply(function(){e.ngModel instanceof Array?r.values[0]!=r.values[1]?e.ngModel=r.values:r.values[0]==o[0]?p(function(){$(i).slider("values",[r.values[0],r.values[0]+1]),e.ngModel=[r.values[0],r.values[0]+1]},0):r.values[1]==o[1]&&p(function(){$(i).slider("values",[r.values[1]-1,r.values[1]]),e.ngModel=[r.values[1]-1,r.values[1]]},0):e.ngModel=r.value})},stop:function(s,r){e.$apply(function(){e.ngModel instanceof Array?r.values[0]!=r.values[1]?e.ngModel=r.values:r.values[0]==o[0]?($(i).slider("values",[r.values[0],r.values[0]+1]),e.ngModel=[r.values[0],r.values[0]+1]):r.values[1]==o[1]&&($(i).slider("values",[r.values[1]-1,r.values[1]]),e.ngModel=[r.values[1]-1,r.values[1]]):e.ngModel=r.value})}})})},r}function t(s,r,e,i,p,o,t,a,c,n,d,u,f,m){var l={};return l.restrict="A",l.scope={edit:"=",drop:"=",onDelete:"&",onCut:"&",onCopy:"&",onInsert:"&",onPaste:"&",onSetting:"&",onDataChange:"&",onDrop:"&",onTabClick:"&",instance:"=",onInsertjson:"&",onPastejson:"&"},l.link=function(i,s,r){i.$watch("instance",function(s,r,e){s&&"function"==typeof s.addEvents&&s.addEvents({wholeJSON:i.wholeJSON,onDelete:i.onDelete,onCut:i.onCut,onCopy:i.onCopy,onInsert:i.onInsert,onPaste:i.onPaste,onSetting:i.onSetting,onDataChange:i.onDataChange,onDrop:i.onDrop,onInsertJSON:i.onInsertjson,onPasteJSON:i.onPastejson,onTabClick:i.onTabClick})})},l}function a(t){var s={restrict:"A",scope:{instance:"="},link:function(i,p,s){var o=i.$watch("instance",function(s,r,e){s&&(i.instance=t($(p)),i.instance.b=1,o())})}};return s}"function"==typeof s.registerDirective?s.registerDirective("gridSelector",r):s.directive("gridSelector",r),r.$inject=["$q","$timeout","$compile","serviceCenterService"],"function"==typeof s.registerDirective?s.registerDirective("boardDrag",e):s.directive("boardDrag",e),e.$inject=["$timeout","toolbarListService"],"function"==typeof s.registerDirective?s.registerDirective("textRepresent",i):s.directive("textRepresent",i),i.$inject=["$timeout"],"function"==typeof s.registerDirective?s.registerDirective("iconSelector",p):s.directive("iconSelector",p),p.$inject=["$timeout"],"function"==typeof s.registerDirective?s.registerDirective("fbSlider",o):s.directive("fbSlider",o),o.$inject=["$q","$timeout"],"function"==typeof s.registerDirective?s.registerDirective("boardDrop",t):s.directive("boardDrop",t),t.$inject=["$q","$timeout","serviceCenterService","$route","$routeParams","chartOptionService","resourceUIService","ticketTaskService","$window","$location","Info","growl","alertService","angular-style"],"function"==typeof s.registerDirective?s.registerDirective("fBoard",a):s.directive("fBoard",a),a.$inject=["freeboardBaseService"]});
//# sourceMappingURL=../../map/js/directives/free-board-dom.js.map
