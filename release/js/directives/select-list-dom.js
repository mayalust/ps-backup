define(["directives/directives"],function(e){"use strict";e.initDirective("selectList",["$timeout","$compile",function(n,e){return{templateUrl:"../partials/select_list.html",restrict:"A",scope:{source:"=",name:"=",titles:"="},link:function(s,e,t){n(function(){s.$watch("source",function(c,e,t){var n,l=[];if(c){var f=!1,u=!1,i=function(e){16==e.keyCode&&(f=!1,$("body").off("keyup.shift"),$("body").on("keydown.shift",r))},o=function(e){91==e.keyCode&&(u=!1,$("body").off("keyup.ctrl"),$("body").on("keydown.ctrl",a))},r=function(e){16==e.keyCode&&(f=!0,$("body").off("keydown.shift"),$("body").on("keyup.shift",i))},a=function(e){91==e.keyCode&&(u=!0,$("body").off("keydown.ctrl"),$("body").on("keyup.ctrl",o))};$("body").on("keydown.shift",r),$("body").on("keydown.ctrl",a),$("body").on("click.whole",function(e){t.$apply(function(){for(var e in c)c[e].selected=!1})}),s.dropRight=function(){d(!0)},s.dropLeft=function(){d(!1)},s.leftFilter=function(e){return 1!=e.applied&&1!=e.leaveplace},s.rightFilter=function(e){return 1==e.applied&&1!=e.leaveplace},s.rightFilterNoCheck=function(){return!c.every(function(e){return 1!=e.applied||1!=e.selected})},s.leftFilterNoCheck=function(){return!c.every(function(e){return 1==e.applied||1!=e.selected})};var d=function(e){l=[];var t,n=c.filter(function(e){return 1==e.selected});for(var i in n)(t=n[i]).applied=e,t.selected=!1,t.renew=!0};for(var p in s.leftToRight=function(){d(!0)},s.rightToLeft=function(){d(!1)},c)(n=c[p]).start=function(){var e=this;for(var t in 1!=e.selected&&(e.selected=!0,l=[e]),c)1==c[t].selected&&(c[t].leaveplace=!0)},n.stop=function(){for(var e in c)1==c[e].leaveplace&&(c[e].leaveplace=!1)},n.click=function(){var e,n=this,t=c.filter(function(e){return n.applied?n.applied==e.applied:0==e.applied||null==e.applied});for(var i in c)c[i].renew=!1;if(u||f)if(f){if(l.$remove(function(e,t){return t==n}),l.push(n),1<l.length){var o,r=l[l.length-2];for(var i in t)e=t[i],null==o?e!=n&&e!=r||(e.selected=!0,o=function(e){e.selected=!0,e!=n&&e!=r||(o=void 0)}):"function"==typeof o&&o(e)}}else 1!=n.selected?(n.selected=!0,l.push(this)):(n.selected=!1,l.$remove(function(e,t){return t==this}));else{for(var i in c)c[i].selected=!1;n.selected=!0,l=[n]}}}})})}}}]),e.initDirective("selectDrag",["$timeout","$compile",function(t,e){return{restrict:"A",scope:{target:"=",start:"&",stop:"&",name:"="},link:function(r,n,e){t(function(){r.$watch("target",function(o,e,t){o&&$$.loadExternalJs(["jquery-ui"],function(){$(n).draggable({cursor:"move",cursorAt:{top:5,left:5},appendTo:"body",revert:!0,containment:"body",scroll:!1,revertDuration:0,zIndex:9999999,helper:function(e){var t,n=o.filter(function(e){return 1==e.selected}).map(function(e){return e[r.name]});if(2<n.length)(i=n.slice(0,2)).push("等"+n.length+"个"),t=$("<div></div>").text(i.toString());else if(0<n.length){var i=n;t=$("<div></div>").text(i.toString())}else 0==n.length&&(i=$(e.target),t=$("<div></div>").append(i));return t.attr("id","select-helper"),t.addClass("item"),t},start:function(){t.$apply(function(){t.start()})},stop:function(){t.$apply(function(){t.stop()})}})})})})}}}]),e.initDirective("selectDrop",["$timeout","$compile",function(e,t){return{restrict:"A",scope:{target:"=",drop:"&"},link:function(t,e,n){var i=function(e){e.stopPropagation(),t.$apply(function(){t.drop()})};$$.loadExternalJs(["jquery-ui"],function(){$(e).droppable({drop:i})})}}}])});
//# sourceMappingURL=../../map/js/directives/select-list-dom.js.map
