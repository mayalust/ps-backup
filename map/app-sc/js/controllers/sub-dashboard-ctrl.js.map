{"version":3,"sources":["app-sc/js/controllers/sub-dashboard-ctrl.js"],"names":["define","controllers","initController","$scope","$state","$stateParams","userEnterpriseService","$rootScope","routeParams","resourceUIService","timeout","growl","q","window","location","viewFlexService","freeboardservice","userLoginUIService","roleViewService","psTreeData","commonMethodService2","psUiRouterHandler","getCurrentParents","then","parents","$root","treeStr","map","d","label","join","viewId","params","catch","e","error","message","getSubTabs","subtabs","$emit","main_active_index","sub_active_index","showTree","subNavToPage","index","console","log","go","apply"],"mappings":"AAAAA,OAAO,CAAC,0BAA2B,SAAU,SAAUC,GACrD,aAEAA,EAAYC,eAAe,mBAAoB,CAAC,SAAU,SAAU,eAAgB,wBAAyB,aAAc,eAAgB,oBAAqB,WAAY,QAAS,KAAM,UAAW,YAAa,kBAAmB,mBAAoB,qBAAsB,kBAAmB,aAAc,uBAAwB,oBAAqB,SAAUC,EAAQC,EAAQC,EAAcC,EAAuBC,EAAYC,EAAaC,EAAmBC,EAASC,EAAOC,EAAGC,EAAQC,EAAUC,EAAiBC,EAAkBC,EAAoBC,EAAiBC,EAAYC,EAAsBC,GActlBD,EAAqBE,oBAAoBC,KAAK,SAAUC,GACtDrB,EAAOsB,MAAMC,QAAUF,EAAQG,IAAI,SAAUC,GAC3C,OAAOA,EAAEC,QACRC,KAAK,OACR3B,EAAOsB,MAAMM,OAAS3B,EAAO4B,OAAOD,SACnCE,MAAM,SAAUC,GACjBvB,EAAMwB,MAAMD,EAAEE,WAEhBf,EAAkBgB,aAAad,KAAK,SAAUe,GAC5CnC,EAAOmC,QAAUA,IAChBL,MAAM,SAAUC,GACjBvB,EAAMwB,MAAMD,EAAEE,WAEhBjC,EAAOoC,MAAM,oBAAqBlC,EAAamC,mBAC/CrC,EAAOsC,iBAAmBpC,EAAaoC,iBACvCtC,EAAOsB,MAAMiB,SAAoC,GAAzBrC,EAAaqC,SAErCvC,EAAOwC,aAAe,SAAUX,GAC9B7B,EAAOsC,iBAAmBT,EAAOY,MACjCvB,EAAkBW,GAAQT,KAAK,SAAUK,GACvCiB,QAAQC,IAAIlB,GACZxB,EAAO2C,GAAGC,MAAM5C,EAAQwB","file":"app-sc/js/controllers/sub-dashboard-ctrl.js","sourcesContent":["define(['controllers/controllers', 'Array'], function (controllers) {\n  'use strict';\n\n  controllers.initController('subDashboardCtrl', ['$scope', '$state', '$stateParams', 'userEnterpriseService', '$rootScope', '$routeParams', 'resourceUIService', '$timeout', 'growl', '$q', '$window', '$location', 'viewFlexService', 'freeboardservice', 'userLoginUIService', 'roleViewService', 'psTreeData', 'commonMethodService2', 'psUiRouterHandler', function ($scope, $state, $stateParams, userEnterpriseService, $rootScope, routeParams, resourceUIService, timeout, growl, q, window, location, viewFlexService, freeboardservice, userLoginUIService, roleViewService, psTreeData, commonMethodService2, psUiRouterHandler) {\n    // 隐藏左边视图的多余部位\n\n    /**\n    var watch = $scope.$watch('baseConfig', function (newValue, oldValue, scope) {\n      if ($scope.baseConfig) {\n        if (!$scope.baseConfig.openSidebar) {\n          $(\".sidebar-toggle\").css(\"display\", \"none\");\n          $(\".main-sidebar\").css(\"display\", \"none\");\n          $(\".sidebar-mini.sidebar-collapse .content-wrapper\").css(\"cssText\", \"margin-left: 0px!important\");\n        }\n        watch();\n      }\n    });**/\n    commonMethodService2.getCurrentParents().then(function (parents) {\n      $scope.$root.treeStr = parents.map(function (d) {\n        return d.label;\n      }).join(\" > \");\n      $scope.$root.viewId = $state.params.viewId;\n    }).catch(function (e) {\n      growl.error(e.message);\n    });\n    psUiRouterHandler.getSubTabs().then(function (subtabs) {\n      $scope.subtabs = subtabs;\n    }).catch(function (e) {\n      growl.error(e.message);\n    });\n    $scope.$emit(\"main_active_index\", $stateParams.main_active_index);\n    $scope.sub_active_index = $stateParams.sub_active_index;\n    $scope.$root.showTree = $stateParams.showTree == 0 ? false : true;\n\n    $scope.subNavToPage = function (params) {\n      $scope.sub_active_index = params.index;\n      psUiRouterHandler(params).then(function (d) {\n        console.log(d);\n        $state.go.apply($state, d);\n      });\n      /**\n       * 判断有没有三级标题，有的话继续分路由\n       */\n\n      /**\n      if (params.children && params.children.length > 0) {\n        window.location.href = \"../app-sc/index_freeboard.html#/prod_sub_dashboard/\" + params.showTree + \"/\" + $stateParams.main_active_index + \"/minor_dashboard/\" + params.index+ \"/minor_view/\" + params.children[0].viewId + \"/\" +params.children[0].index ;\n      } else {\n        window.location.href = \"../app-sc/index_freeboard.html#prod_sub_dashboard/\" + params.showTree + \"/\" + $stateParams.main_active_index + \"/subview/\" + params.viewId + \"/\" + $scope.sub_active_index + \"/index\";\n      }**/\n    };\n    /**\n     * 判断是否要显示树\n     * 0 不显示 1 显示\n     */\n\n    /**\n    var showTree = $stateParams.showTree;\n    if (showTree == 0) {\n      $scope.showTree = false;\n    } else {\n      $scope.showTree = true;\n    }**/\n\n  } // 获取到二级标题到名称\n\n  /**\n   $scope.subtabs = ( $rootScope.tabs && $rootScope.tabs[$stateParams.main_active_index] )\n   ? $rootScope.tabs[$stateParams.main_active_index].children : [];\n   **/\n  ]);\n});"],"sourceRoot":"/source/"}