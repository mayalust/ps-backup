{"version":3,"sources":["app-uc/js/directives/table-dom.js"],"names":["define","directives","BootstrapDialog","datatables","directive","$timeout","$compile","growl","restrict","controller","$scope","$element","$attrs","table","domMain","$on","Event","APPROVEINIT","event","args","destroy","empty","DataTable","dom","data","length","$","ProudSmart","datatable","footerdom","language","columns","rowCallback","nRow","aData","iDataIndex","aaSorting","columnDefs","name","search","value","draw","on","parentDom","parent","html","e","stopPropagation","tr","this","closest","row","checkPass","protocol","find","val","version","addClass","removeClass","each","children","j","val1","jqob1","has","txt","trim","cell","doAction","versions","protocolVersions","i","append","protocolVersion","preventDefault","isEditing","parents","approveGridData","isEdit","warning","cells","invalidate","USERINFOSINIT","rowData","location","href","orderNo","USERCENTERINIT","select","order","selected","target","checked","rows","tableRows","nodes","deselect","count","attr","prop","msgStatus","is","ck2","o","document","getElementsByName","num","console","log","d","returnStr","readMsgStatus","message","msgType","statusUpdate","status","child","isShown","hide","content","show"],"mappings":"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","file":"app-uc/js/directives/table-dom.js","sourcesContent":["define(['directives/directives', 'bootstrap-dialog', 'datatables.net', 'datatables.net-bs', 'datatables.net-select'], function (directives, BootstrapDialog, datatables) {\n  'use strict';\n\n  directives.directive('approveTable', function ($timeout, $compile, growl) {\n    return {\n      restrict: 'A',\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        var domMain = $element;\n        var table;\n        $scope.$on(Event.APPROVEINIT, function (event, args) {\n          if (table) {\n            table.destroy();\n            domMain.empty();\n          }\n\n          table = domMain.DataTable({\n            dom: args.data && args.data.length > 0 ? $.ProudSmart.datatable.footerdom : '',\n            language: $.ProudSmart.datatable.language,\n            data: args.data,\n            columns: args.columns,\n            rowCallback: function rowCallback(nRow, aData, iDataIndex) {\n              $compile(nRow)($scope);\n            },\n            \"aaSorting\": [[0, \"desc\"]],\n            columnDefs: args.columnDefs\n          });\n        });\n        $scope.$on(\"table-search-handle\", function (event, args) {\n          if (args.name == $attrs.name) table.search(args.value).draw();\n        });\n        /**\n         * 监听表格初始化后，添加按钮\n         */\n\n        domMain.on('init.dt', function () {\n          var parentDom = $(\".special-btn\").parent();\n          parentDom.html('<a ng-click=\"addProve()\" class=\"pull-right btn btn-default btn-sm\"><i class=\"fa fa-plus\"></i><span class=\"hidden-xs\"> 新增</span></a>');\n          $compile(parentDom)($scope);\n        });\n        domMain.on('click', '#save-btn', function (e) {\n          e.stopPropagation();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          var checkPass = true;\n          var protocol = $(\"#protocols\").find(\"option:selected\").val();\n          var version = $(\"#version\").find(\"option:selected\").val();\n\n          if (protocol != '请选择...' && protocol != '') {\n            row.data()[\"protocol\"] = protocol;\n            $(\"#protocols\").parent(\"td\").removeClass('danger');\n          } else {\n            $(\"#protocols\").parent(\"td\").addClass('danger');\n            checkPass = false;\n            return false;\n          }\n\n          if (version != '请选择...' && version != '') {\n            row.data()[\"protocolVersion\"] = version;\n            $(\"#version\").parent(\"td\").removeClass('danger');\n          } else {\n            $(\"#version\").parent(\"td\").addClass('danger');\n            return false;\n          }\n\n          $.each(tr.children(), function (j, val1) {\n            var jqob1 = $(val1); //把input变为字符串\n\n            if (!jqob1.has('button').length && jqob1.has('input').length) {\n              var txt = $.trim(jqob1.children(\"input\").val());\n\n              if (txt) {\n                //if (j == 2) {\n                //\n                //    var reg = /^[\\u4e00-\\u9fa5a-zA-Z][u4e00-\\u9fa5a-za-zA-Z0-9_]{1,30}$/;\n                //    if (!reg.test(txt)) {\n                //        $(val1).addClass('danger');\n                //        checkPass = false\n                //        return false;\n                //    }\n                //}\n                //if (j == 3) {\n                //\n                //    var reg = /^[a-za-zA-Z0-9_]{1,30}$/;\n                //    if (!reg.test(txt)) {\n                //        $(val1).addClass('danger');\n                //        checkPass = false\n                //        return false;\n                //    }\n                //}\n                $(val1).removeClass('danger');\n                table.cell(jqob1).data(txt); //修改DataTables对象的数据\n              } else {\n                if (j == 2 || j == 3) {\n                  table.cell(jqob1).data(txt);\n                  $(val1).addClass('danger');\n                  checkPass = false;\n                  return false;\n                }\n              }\n            }\n          });\n\n          if (checkPass) {\n            $scope.doAction('save', row.data());\n          }\n        });\n        domMain.on(\"click\", '#protocols', function (e) {\n          var tr = $(this).closest('tr');\n          var name = $(\"#protocols  option:selected\").val();\n          var count = $(\"#version option\").length;\n          var versions = $scope.protocolVersions;\n\n          if (name != '') {\n            $(\"#version\").html(\"\");\n\n            for (var i in versions) {\n              if (versions[i].protocol == name) {\n                $(\"#version\").append('<option  value=\"' + versions[i].protocolVersion + '\" selected = \"selected\" >' + versions[i].protocolVersion + '</option>');\n              }\n            }\n          } else {\n            $(\"#version\").html(\"\");\n            $(\"#version\").append('<option  value=\"\" selected = \"selected\" >请选择...</option>');\n          }\n        });\n        domMain.on('click', '#cancel-btn', function (e) {\n          e.stopPropagation();\n          $scope.doAction('cancel');\n        });\n        domMain.on('click', '#edit-btn', function (e) {\n          e.preventDefault();\n          var isEditing = false;\n          var tds = $(this).parents(\"tbody\").children();\n\n          if (!isEditing) {\n            for (var j in $scope.approveGridData.data) {\n              if ($scope.approveGridData.data[j].isEdit == 2 || $scope.approveGridData.data[j].isEdit == 3) {\n                growl.warning(\"请保存后再操作！\", {});\n                return;\n              }\n            }\n\n            isEditing = true;\n            var tr = $(this).closest('tr');\n            var row = table.row(tr);\n            var row1 = row.data();\n            row.data().isEdit = 2;\n            row.cells().invalidate();\n          }\n        });\n        domMain.on('click', '#del-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          $scope.doAction('delete', row.data());\n        });\n      }]\n    };\n  });\n  directives.directive('recordTable', function ($timeout, $compile) {\n    return {\n      restrict: 'A',\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        var domMain = $element;\n        var table;\n        var isEditing = false;\n        $scope.$on(Event.USERINFOSINIT + \"_record\", function (event, args) {\n          if (table) {\n            table.destroy();\n            domMain.empty();\n          }\n\n          isEditing = false;\n          table = domMain.DataTable({\n            dom: args.data && args.data.length > 0 ? $.ProudSmart.datatable.footerdom : '',\n            language: $.ProudSmart.datatable.language,\n            data: args.data,\n            columns: args.columns,\n            \"aaSorting\": [[5, \"asc\"]],\n            columnDefs: args.columnDefs\n          });\n        });\n        /**\n         * 监听表格初始化后，添加按钮\n         */\n\n        domMain.on('init.dt', function () {\n          var parentDom = $(\".special-btn\").parent();\n          parentDom.html('<a  href=\"#/renew\" class=\"btn btn-default btn-sm\"><i  style=\"float: left;margin-top: 4px;margin-right: 3px;\" class=\"proudsmart ps-renewal\"></i><span class=\"hidden-xs\"> 缴费</span></a>');\n          $compile(parentDom)($scope);\n        });\n        domMain.on('click', \"#price-btn\", function (e) {\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          var rowData = row.data();\n          location.href = '#/renew/' + rowData.orderNo + '';\n        });\n      }]\n    };\n  });\n  directives.directive('messageTable', function ($timeout, $compile) {\n    return {\n      restrict: 'A',\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        var domMain = $element;\n        var table;\n        $scope.$on(Event.USERCENTERINIT + '_msg', function (event, args) {\n          if (table) {\n            table.destroy();\n            domMain.empty();\n          }\n\n          table = domMain.DataTable({\n            dom: args.data && args.data.length > 0 ? $.ProudSmart.datatable.footerdom : '',\n            language: $.ProudSmart.datatable.language,\n            select: $.ProudSmart.datatable.select,\n            order: [[2, \"desc\"]],\n            data: args.data,\n            columns: args.columns,\n            columnDefs: args.columnDefs,\n            rowCallback: function rowCallback(nRow, aData, iDataIndex) {\n              if (aData.selected) {\n                $(nRow).addClass(\"selected\");\n              } else {\n                $(nRow).removeClass(\"selected\");\n              }\n\n              $compile(nRow)($scope);\n            }\n          });\n        });\n        $scope.$on(\"table-search-handle\", function (event, args) {\n          if (args.name == $attrs.name) table.search(args.value).draw();\n        });\n\n        function format(d) {\n          var returnStr = \"\";\n          returnStr += \"<div>\" + d.message.content + \"</div>\";\n          return returnStr;\n        }\n\n        ;\n        domMain.on('change', '#allselect-btn', function (e) {\n          e.stopPropagation();\n\n          if (e.target.checked) {\n            table.rows().select();\n            var tableRows = table.rows({\n              selected: true\n            });\n\n            for (var i = 0; i < tableRows.nodes().length; i++) {\n              var row = table.row(tableRows.nodes()[i]);\n              row.data().selected = true;\n            }\n\n            ;\n            table.rows().invalidate().draw(false);\n          } else {\n            var tableRows = table.rows({\n              selected: true\n            });\n\n            for (var i = 0; i < tableRows.nodes().length; i++) {\n              var row = table.row(tableRows.nodes()[i]);\n              row.data().selected = false;\n            }\n\n            ;\n            table.rows().deselect();\n            table.rows().invalidate().draw(false);\n          }\n        });\n        domMain.on('change', '.itemCheckBox', function (e) {\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n\n          if (e.target.checked) {\n            row.data().selected = true;\n          } else {\n            row.data().selected = false;\n          }\n\n          var tableRows = table.rows({\n            selected: true\n          });\n\n          if (tableRows.count() != table.rows()[0].length) {\n            $('#allselect-btn').attr('checked', false);\n            $('#allselect-btn').prop('checked', false);\n          } else if (tableRows.count() == table.rows()[0].length) {\n            $('#allselect-btn').attr('checked', true);\n            $('#allselect-btn').prop('checked', true);\n          }\n        });\n        domMain.on('click', \"th:eq(0)\", function (e) {\n          var msgStatus = $(\"input[name='allClick']\").is(':checked');\n          $(\"input[name='msgClick']\").prop(\"checked\", msgStatus);\n        });\n        domMain.on('click', \"#msgClick\", function (e) {\n          //var ck=$(this).is(':checked')\n          var ck2 = $(\"input[name='allClick']\").is(':checked');\n          var o = document.getElementsByName(\"msgClick\");\n          var count = 0;\n          var num = 0;\n\n          for (var i = 0; i < o.length; i++) {\n            if (o[i].checked == true) {\n              count++;\n            }\n\n            if (o[i].checked == false) {\n              num++;\n            }\n          }\n\n          if (count == o.length) {\n            //o[0].checked=true;\n            console.log(\"true==\");\n            $(\"input[name='allClick']\").prop(\"checked\", true);\n          }\n\n          if (num > 0) {\n            if (ck2 == true) {\n              //o[0].checked=false;\n              console.log(\"false==\");\n              $(\"input[name='allClick']\").attr(\"checked\", false);\n            }\n          }\n        });\n        domMain.on('click', \"td:nth-child(2)\", function (e) {\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          var rowData = row.data();\n\n          if ($scope.readMsgStatus != \"/read\" && rowData.message.msgType != \"ticket_service_message\") {\n            $scope.statusUpdate(rowData);\n          }\n\n          if (rowData.message.msgType == \"ticket_service_message\") {\n            if (rowData.status == 0) {\n              $scope.statusUpdate(rowData);\n            }\n\n            if (row.child.isShown()) {\n              row.child.hide();\n              tr.removeClass('shown');\n            } else {\n              row.child(format(row.data())).show();\n            }\n          } //orderdetail/2016062914233500001/manage/doing\n\n        });\n        domMain.on('click', \"td:nth-child(1)\", function (e) {\n          if ($scope.readMsgStatus == \"/read\") {\n            var tr = $(this).closest('tr');\n            var row = table.row(tr);\n            var rowData = row.data();\n            $scope.statusUpdate(rowData);\n          } //orderdetail/2016062914233500001/manage/doing\n\n        });\n      }]\n    };\n  });\n});"],"sourceRoot":"/source/"}