{"version":3,"sources":["app-uc/js/controllers/user-manger-ctrl.js"],"names":["define","controllers","BootstrapDialog","controller","$scope","$location","Info","userLoginUIService","route","growl","configUIService","dialogInstance","treeviewIndex","oldTreeviewIndex","currentMenuCode","firstMenuCode","localMenuCode","showMenu","menuitems","publicTableSearch","tabelname","value","$broadcast","name","$on","rootHandler","current","params","mode","detailshow","gotoHomePage","user","enterprise","logoStatus","location","href","gotoAppPage","showMenuFun","logout","onViewLoad","console","log","menusFilter","item","functionCode","charAt","initUserObjects","callbackFun","initMenus","getConfigsByGroupName","returnObj","code","data","length","forEach","baseConfig","jQuery","extend","JSON","parse","title","$","html","shortcut","attr","Date","getTime","e","evt","d","isAuthenticated","close","userInfo","lastLoginTime","newDateJson","Format","GetDateCategoryStrByLabel","enterpriseType","localmodel","show","closable","message","dialog","$message","pageToLoad","getData","load","buttons","label","cssClass","action","dialogRef","userInput","document","getElementById","psdInput","login","userIdentifyService","userUIService","$interval","forgetClick","emailOnly","passwordConfig","interval","get","info","forgetList","emailAddress","verify","verifyEmail","newPwd","confimPwd","hideValidate","phoneEmail","statusCheck","verifySuccess","$watch","newValue","oldValue","undefined","getIdentify","identifyData","imgCode","codeCheck","val","identifyNum","res","modeCheck","match","repeatEmail","emailExist","checkMobilePhone","blindClick","t","emailSend","text","disabled","sendPasswordSMS","address","time","cancel","removeAttr","sendEmailPassword","forgetAjax","forgetPassword","stringify","css","addClass","secTip","seed","tip","window","setTimeout","forgetStep","forNumber","identifyPasswordSMS","codeData","emailCheckPassword","checkName","removeClass","$rootScope","passwordEdit","pwdList","configPwd","regPwd","confirmShow","codeMessage","identifyName","configError","userId","logoImg","websiteUrl","userID","enterpriseLogo","indexOf","mobilePhone","split","initPwd","modifyPassword","initDate","warning","tuichu","updatePassWord","$http","mobile","codeError","industry","industryList","provinceList","url","origin","search","querySolution","loginSave","identifySMS","weChatLogin","obj","codeClick","sendSMS","modelDefinitionService","regShow","confirmPassword","statusShow","safeMsg","editData","formData","password","roleID","userName","countryRegion","city","province","business","mail_num","enterpriseManager","urlCode","areaList","cityList","findAllIndustry","arr","arr1","newData","i","j","id","parentModelId","push","belongList","onMouseOver","actor","event","renewal","reload","statusClick","statusId","noEmail","sendEmail","phoneCode","timeCode","phoneSumbit","formData1","individualUserRegister","vv","staffName","emailHref","hrefName","emailSpile","open","passCheck","eve","currentTarget","identCheck","userCheck","checkClick","nextStep","regId","statusCode","identifyEmail","hide"],"mappings":"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","file":"app-uc/js/controllers/user-manger-ctrl.js","sourcesContent":["define(['controllers/controllers', 'bootstrap-dialog'], function (controllers, BootstrapDialog) {\n  'use strict';\n\n  controllers.controller('userMangerCtrl', ['$scope', '$location', 'Info', 'userLoginUIService', '$route', 'growl', 'configUIService', function ($scope, $location, Info, userLoginUIService, route, growl, configUIService) {\n    var dialogInstance;\n    $scope.treeviewIndex = \"\";\n    $scope.oldTreeviewIndex = \"\";\n    $scope.currentMenuCode = null; //当前的菜单编码\n\n    $scope.firstMenuCode = null; //第一层的菜单编码\n\n    $scope.localMenuCode = \"F01\"; //判断使用哪一个服务中心，用来替代localIndex\n\n    $scope.showMenu = false;\n    $scope.menuitems = {};\n\n    $scope.publicTableSearch = function (tabelname, value) {\n      $scope.$broadcast('table-search-handle', {\n        name: tabelname,\n        value: value\n      });\n    }; // 路由跳转成功后触发\n\n\n    $scope.$on('$routeChangeSuccess', function () {\n      userLoginUIService.rootHandler($scope, $location);\n\n      if (route.current.params.mode == 'detail') {\n        $scope.detailshow = true;\n      } else {\n        $scope.detailshow = false;\n      }\n    });\n    /**\r\n     * 判断未登录后如何处理\r\n     * localmodel＝true 本地测试使用\r\n     */\n\n    var showLogin = function showLogin() {\n      if (!localmodel) {\n        return;\n      }\n\n      dialogInstance = BootstrapDialog.show({\n        title: '欢迎来到普奥的世界',\n        closable: false,\n        //size:BootstrapDialog.SIZE_WIDE,\n        message: function message(dialog) {\n          var $message = $('<div></div>');\n          var pageToLoad = dialog.getData('pageToLoad');\n          $message.load(pageToLoad);\n          return $message;\n        },\n        data: {\n          'pageToLoad': 'partials/login.html'\n        },\n        buttons: [{\n          label: '登录',\n          cssClass: 'btn-success',\n          action: function action(dialogRef) {\n            var userInput = document.getElementById('username');\n            var psdInput = document.getElementById('password');\n            userLoginUIService.login(userInput.value, psdInput.value);\n          }\n        }, {\n          label: '退出',\n          action: function action(dialogRef) {\n            dialogRef.close();\n            location.href = \"../index.html\";\n          }\n        }]\n      });\n    };\n\n    $scope.gotoHomePage = function () {\n      if (userLoginUIService.user.enterprise.logoStatus != '0') {\n        location.href = \"http://www.proudsmart.com\";\n      }\n    };\n\n    $scope.gotoAppPage = function () {\n      location.href = \"index.html\";\n    };\n\n    $scope.showMenuFun = function () {\n      $scope.showMenu = !$scope.showMenu;\n    };\n\n    $scope.logout = function () {\n      userLoginUIService.logout();\n    };\n\n    $scope.onViewLoad = function () {\n      console.log('view changed');\n    }; //    $scope.powers = {};\n    //    var setPower = function(pow, len) {\n    //      pow = pow.substring(0, len);\n    //      $scope.powers[pow] = true;\n    //      if(len > 5) {\n    //        setPower(pow, len - 2);\n    //      }\n    //    }\n    //    var initPower = function() {\n    //      for(var i in userLoginUIService.user.functionCodeSet) {\n    //        var funCode = userLoginUIService.user.functionCodeSet[i];\n    //        $scope.powers[funCode] = true;\n    //        if(funCode.length > 5) {\n    //          setPower(funCode, funCode.length - 2);\n    //        }\n    //      }\n    //    };\n\n\n    $scope.menusFilter = function (item) {\n      return item.functionCode.charAt(0) === \"S\";\n    };\n\n    var initConfigManager = function initConfigManager(callbackFun) {\n      configUIService.getConfigsByGroupName(\"EnterpriseConfig\", function (returnObj) {\n        if (returnObj.code == 0) {\n          if (returnObj.data && returnObj.data.length > 0) {\n            returnObj.data.forEach(function (item) {\n              try {\n                if ($scope.baseConfig) {\n                  $scope.baseConfig = jQuery.extend(true, $scope.baseConfig, JSON.parse(item.value));\n                } else {\n                  $scope.baseConfig = JSON.parse(item.value);\n                }\n\n                if ($scope.baseConfig) {\n                  //拥有企业设置\n                  if ($scope.baseConfig.title) $(\"title\").html($scope.baseConfig.title);else $(\"title\").html(\"\");\n                  if ($scope.baseConfig.shortcut) $(\"link[rel='shortcut icon']\").attr(\"href\", \"../\" + $scope.baseConfig.shortcut + \"?\" + new Date().getTime());else $(\"link[rel='shortcut icon']\").attr(\"href\", \"../../login/images/shortcut_null.png\" + \"?\" + new Date().getTime());\n                }\n              } catch (e) {}\n            });\n          } else {\n            $(\"title\").html(\"\");\n            $(\"link[rel='shortcut icon']\").attr(\"href\", \"../../login/images/shortcut_null.png\" + \"?\" + new Date().getTime());\n          }\n\n          callbackFun();\n        }\n      });\n    };\n\n    function initUserObjects() {\n      initConfigManager(function () {\n        userLoginUIService.initMenus($scope, $location);\n      }); //      initPower();\n    }\n\n    ; // 监听用户登录状态\n\n    $scope.$on('loginStatusChanged', function (evt, d) {\n      if (userLoginUIService.user.isAuthenticated) {\n        if (dialogInstance) {\n          dialogInstance.close();\n        }\n\n        $scope.userInfo = userLoginUIService.user;\n        $scope.lastLoginTime = newDateJson(userLoginUIService.user.lastLoginTime).Format(GetDateCategoryStrByLabel());\n        if (userLoginUIService.user.enterprise) $scope.enterpriseType = userLoginUIService.user.enterprise.enterpriseType;\n        initUserObjects();\n      } else {\n        $scope.userInfo = {};\n        $scope.lastLoginTime = \"\";\n        showLogin();\n      }\n    });\n  }]); //忘记密码\n\n  controllers.controller(\"forgetCtrl\", ['$scope', 'userIdentifyService', 'Info', 'userUIService', '$interval', 'growl', function ($scope, userIdentifyService, Info, userUIService, $interval, growl) {\n    $scope.forgetClick = \"1\";\n    $scope.emailOnly = \"\";\n    $scope.passwordConfig; //通过json获取忘记密码配置\n\n    var info = Info.get(\"localdb/password.json\", function (info) {\n      $scope.passwordConfig = info.passwordConfig;\n    });\n    $scope.forgetList = {\n      'emailAddress': '',\n      'verify': '',\n      \"verifyEmail\": '',\n      'newPwd': '',\n      'confimPwd': ''\n    };\n    $scope.hideValidate = \"\";\n    $scope.phoneEmail = \"\";\n    $scope.verify = \"\";\n    $scope.statusCheck = \"\";\n    $scope.verifySuccess = \"0\";\n    $scope.$watch(\"forgetList.confimPwd\", function (newValue, oldValue) {\n      if (newValue != $scope.forgetList.newPwd) {\n        $scope.emailOnly = 4;\n      } else {\n        $scope.emailOnly = 0;\n      }\n    });\n    $scope.$watch(\"forgetList.newPwd\", function (newValue, oldValue) {\n      if (newValue == undefined) {\n        $scope.emailOnly = 333;\n      } else {\n        $scope.emailOnly = 0;\n      }\n    });\n    $scope.$watch(\"forgetList.verify\", function (newValue, oldValue) {\n      $scope.emailOnly = 0;\n    });\n    $scope.$watch(\"forgetList.verifyEmail\", function (newValue, oldValue) {\n      $scope.emailOnly = 0;\n    }); //生成验证码\n\n    userIdentifyService.getIdentify(function (identifyData) {\n      if (identifyData.code == 0) {\n        $scope.imgCode = identifyData.data;\n      }\n    });\n\n    $scope.codeCheck = function () {\n      var val = $scope.forgetList.verify;\n      var valLength = val.length;\n\n      if (valLength == 5) {\n        //验证码校验\n        userIdentifyService.identifyNum(val, function (res) {\n          if (res.code == 0 && res.data == true) {\n            $scope.verify = 'success';\n            $scope.emailOnly = \"0\";\n            $scope.verifySuccess = \"1\";\n          } else {\n            $scope.emailOnly = 2;\n            $scope.verify = \"error\";\n            $scope.verifySuccess = \"0\";\n            userIdentifyService.getIdentify(function (identifyData) {\n              if (identifyData.code == 0) {\n                $scope.imgCode = identifyData.data;\n              }\n            });\n          }\n        });\n      } else {\n        $scope.emailOnly = 2;\n        $scope.verifySuccess = \"0\";\n        $scope.verify = \"error\";\n      }\n    };\n\n    $scope.modeCheck = function () {\n      var val = $scope.forgetList.emailAddress;\n\n      if (val.match(/^([a-zA-Z0-9_\\.\\-])+\\@(([a-zA-Z0-9\\-])+\\.)+([a-zA-Z0-9]{2,4})+$/)) {\n        //校验邮箱是否存在\n        userIdentifyService.repeatEmail($scope.forgetList.emailAddress, function (emailExist) {\n          $scope.statusCheck = \"email\";\n\n          if (emailExist.code == 0 && emailExist.data == false) {\n            $scope.phoneEmail = \"\";\n          } else {\n            $scope.phoneEmail = 1001;\n            $scope.emailOnly = 1;\n          }\n        });\n      } else if (val.match(/^((1[3,5,8][0-9])|(14[5,7])|(17[0,6,7,8]))\\d{8}$/)) {\n        //校验手机号码是否存在\n        userUIService.checkMobilePhone($scope.forgetList.emailAddress, function (data) {\n          $scope.statusCheck = \"phone\";\n\n          if (data.code == 0 && data.data == true) {\n            $scope.emailOnly = 1;\n            $scope.phoneEmail = 1002;\n          } else {\n            $scope.phoneEmail = \"\";\n          }\n        });\n      } else if (val == '') {\n        $scope.emailOnly = 11; // $scope.phoneEmail=\"\";\n\n        $scope.statusCheck = '';\n        $scope.phoneEmail = \"\";\n      } else {\n        $scope.emailOnly = '111';\n        $scope.statusCheck = '';\n        $scope.phoneEmail = \"\";\n      }\n    };\n\n    $scope.blindClick = function () {\n      //生成验证码\n      $scope.imgCode = null;\n      userIdentifyService.getIdentify(function (identifyData) {\n        if (identifyData.code == 0) {\n          $scope.imgCode = identifyData.data;\n        }\n      });\n    };\n\n    $scope.t = 60;\n    var interval;\n    $scope.$watch(\"forgetList.emailAddress\", function (newValue, oldValue) {\n      $scope.emailOnly = \"0\";\n    });\n\n    $scope.emailSend = function () {\n      if ($scope.forgetList.emailAddress == \"\") {\n        $scope.emailOnly = 11;\n        return;\n      }\n\n      if ($scope.statusCheck == '') {\n        $scope.emailOnly = '111';\n        return;\n      }\n\n      if ($scope.phoneEmail == 1002 || $scope.phoneEmail == 1001) {\n        $scope.emailOnly = '1';\n        return;\n      }\n\n      if ($scope.forgetList.verify == \"\") {\n        $scope.emailOnly = '200';\n        return;\n      }\n\n      if ($scope.verify == \"error\") {\n        $scope.emailOnly = '2';\n        return;\n      }\n\n      if ($(\"#charge\").text() == \"获取验证码\") {\n        $(\"#charge\").attr({\n          \"disabled\": \"disabled\"\n        });\n\n        if ($scope.statusCheck == \"phone\") {\n          //手机发重置密码邮件\n          userIdentifyService.sendPasswordSMS($scope.forgetList.emailAddress, function (address) {\n            if (address.code == 0 && address.data == true) {\n              $scope.time = 60;\n              $interval.cancel();\n              interval = $interval(function () {\n                $scope.time--;\n\n                if ($scope.time == 0) {\n                  $(\"#charge\").removeAttr(\"disabled\");\n                  $(\"#charge\").text(\"获取验证码\");\n                  $scope.time = 60;\n                  $interval.cancel(interval); //$scope.emailSend = false;\n                } else {\n                  $(\"#charge\").text(\"\" + $scope.time + \"秒后，重新获取验证码\");\n                }\n              }, 1000);\n            } else if (address.code == 10008) {\n              $scope.emailOnly = \"1\";\n            }\n          });\n        } else if ($scope.statusCheck == \"email\") {\n          //发重置密码邮件\n          userIdentifyService.sendEmailPassword($scope.forgetList.emailAddress, function (address) {\n            if (address.code == 0 && address.data == true) {\n              $scope.time = 60;\n              $interval.cancel();\n              interval = $interval(function () {\n                $scope.time--;\n\n                if ($scope.time == 0) {\n                  $(\"#charge\").text(\"获取验证码\");\n                  $(\"#charge\").removeAttr(\"disabled\");\n                  $scope.time = 60;\n                  $interval.cancel(interval); //$scope.emailSend = false;\n                } else {\n                  $(\"#charge\").text(\"\" + $scope.time + \"秒后，重新获取验证码\");\n                }\n              }, 1000);\n            }\n          });\n        }\n      }\n    }; //runTiming();\n\n\n    $scope.forgetAjax = function () {\n      if ($scope.forgetList.newPwd == \"\") {\n        $scope.emailOnly = 311;\n        return;\n      }\n\n      if ($scope.forgetList.newPwd == undefined) {\n        return;\n      }\n\n      if ($scope.forgetList.confimPwd == \"\") {\n        $scope.emailOnly = 312;\n        return;\n      }\n\n      if ($scope.forgetList.confimPwd == undefined) {\n        return;\n      }\n\n      if ($scope.emailOnly == 4) {\n        return;\n      }\n\n      if ($scope.forgetList.newPwd != $scope.forgetList.confimPwd) {\n        $scope.emailOnly = 4;\n        return;\n      }\n\n      userIdentifyService.forgetPassword($scope.forgetList.emailAddress, $scope.hideValidate, $scope.forgetList.newPwd, function (emailExist) {\n        console.log(\"忘记密码保存--\" + JSON.stringify(emailExist));\n\n        if (emailExist.code == 0 && emailExist.data == true) {\n          $scope.forgetClick = \"4\";\n          $(\"#barvader\").css(\"width\", \"100%\");\n          $(\".steps >ol >li:eq(2)\").addClass(\"active\");\n          secTip();\n        }\n      });\n    };\n\n    var seed = 5; //60秒\n\n    var tip = function tip() {\n      seed--;\n\n      if (seed > 0) {\n        $(\"#sec\").text(seed);\n        secTip();\n      } else {\n        window.location.href = \"../#/index\";\n      }\n    };\n\n    var secTip = function secTip() {\n      setTimeout(tip, 1000);\n    };\n\n    $scope.forgetStep = function (forNumber) {\n      if (forNumber == 2) {\n        if ($scope.forgetList.emailAddress == \"\") {\n          $scope.emailOnly = 11;\n          return;\n        }\n\n        if ($scope.statusCheck == '') {\n          $scope.emailOnly = '111';\n          return;\n        }\n\n        if ($scope.phoneEmail == 1002 || $scope.phoneEmail == 1001) {\n          $scope.emailOnly = '1';\n          return;\n        }\n\n        if ($scope.forgetList.verify == \"\") {\n          $scope.emailOnly = '200';\n          return;\n        }\n\n        if ($scope.verify == \"error\") {\n          $scope.emailOnly = '2';\n          return;\n        }\n\n        if ($scope.forgetList.verifyEmail != undefined && $scope.forgetList.verifyEmail != \"\") {\n          if ($scope.statusCheck == 'phone') {\n            userIdentifyService.identifyPasswordSMS($scope.forgetList.verifyEmail, function (codeData) {\n              if (codeData.code == 0) {\n                $scope.hideValidate = codeData.data;\n                $(\".steps >ol >li:eq(1)\").addClass(\"active\");\n                $(\"#barvader\").css(\"width\", \"50%\");\n                $scope.forgetClick = \"2\";\n              } else {\n                $scope.emailOnly = 3;\n              }\n            });\n          } else if ($scope.statusCheck == 'email') {\n            userIdentifyService.emailCheckPassword($scope.forgetList.verifyEmail, function (checkName) {\n              if (checkName.code == 0) {\n                $scope.hideValidate = checkName.data;\n                $scope.forgetClick = forNumber;\n                $(\".steps >ol >li:eq(1)\").addClass(\"active\");\n                $(\"#barvader\").css(\"width\", \"50%\");\n                $scope.forgetClick = \"2\";\n              } else {\n                $scope.emailOnly = 3;\n              }\n            });\n          }\n        } else {\n          $scope.emailOnly = 30001;\n        }\n      } else if (forNumber == 3) {\n        userLoginUIService.emailCheckPassword($scope.forgetList.verifyEmail, function (checkName) {\n          if (checkName.code == 0) {\n            $scope.hideValidate = checkName.data;\n            $scope.forgetClick = forNumber;\n            $(\".mod-sub-nav > li\").removeClass(\"list2-active\");\n            $(\".mod-sub-nav > li:eq(2)\").addClass(\"list3-active\");\n          } else {\n            $scope.emailOnly = 3;\n          }\n        });\n      }\n    };\n  }]); //初始化密码\n\n  controllers.controller('passwordController', ['$scope', '$rootScope', 'userLoginUIService', 'userIdentifyService', 'growl', function ($scope, $rootScope, userLoginUIService, userIdentifyService, growl) {\n    $scope.passwordEdit = userLoginUIService.user;\n    $scope.pwdList = {\n      \"emailAddress\": \"\",\n      \"newPwd\": \"\",\n      \"configPwd\": \"\",\n      \"regPwd\": \"\"\n    };\n    $scope.imgCode = \"\";\n    $scope.confirmShow = \"0\";\n    $scope.codeMessage = \"\";\n    $scope.emailAddress = \"\";\n    $scope.identifyName = \"\";\n    $scope.configError = \"\";\n    $scope.userId = \"\";\n    $scope.enterprise = {};\n    $scope.logoImg = '';\n    $scope.websiteUrl = '';\n    $scope.$on('loginStatusChanged', function (evt, d) {\n      if (userLoginUIService.user.isAuthenticated) {\n        $scope.userId = userLoginUIService.user.userID;\n        $scope.enterprise = userLoginUIService.user.enterprise;\n\n        if ($scope.enterprise.enterpriseLogo.indexOf(\"http\") < 0) {\n          $scope.logoImg = 'images/logo.svg';\n        } else {\n          $scope.logoImg = $scope.enterprise.enterpriseLogo;\n        }\n\n        if ($scope.enterprise.websiteUrl == '' || $scope.enterprise.websiteUrl == null) {\n          $scope.websiteUrl = 'http://www.proudsmart.com/';\n        } else {\n          $scope.websiteUrl = $scope.enterprise.websiteUrl;\n        }\n\n        if (userLoginUIService.user.emailAddress) {\n          $scope.emailAddress = userLoginUIService.user.emailAddress;\n        } else if (userLoginUIService.user.mobilePhone) {\n          $scope.emailAddress = userLoginUIService.user.mobilePhone;\n        }\n      }\n    }); //生成验证码\n\n    userIdentifyService.getIdentify(function (identifyData) {\n      if (identifyData.code == 0) {\n        $scope.imgCode = identifyData.data;\n      }\n    }); //更新验证码\n\n    $scope.blindClick = function () {\n      $scope.imgCode = null;\n      userIdentifyService.getIdentify(function (identifyData) {\n        if (identifyData.code == 0) {\n          $scope.imgCode = identifyData.data;\n        }\n      });\n    };\n\n    $scope.$watch(\"pwdList.regPwd\", function (newValue, oldValue) {\n      if (newValue != $scope.pwdList.newPwd) {\n        $scope.confirmShow = 1;\n      } else {\n        $scope.confirmShow = 0;\n      }\n    });\n    $scope.$watch(\"identifyName\", function (newValue, oldValue) {\n      $scope.confirmShow = 0;\n    });\n    $scope.$watch(\"pwdList.newPwd\", function (newValue, oldValue) {\n      if (newValue != '') {//if (newValue == $scope.pwdList.configPwd) {\n        //  $scope.configError = 2022;\n        //} else {\n        //  $scope.configError = 0;\n        //}\n      }\n    });\n    $scope.$watch(\"pwdList.configPwd\", function (newValue, oldValue) {\n      $scope.confirmShow = 0;\n    });\n    var currentUrl = document.location.href;\n    var currentPage = currentUrl.split(\"/\")[5]; // if(currentPage == \"personal\") {\n    //   userLoginUIService.logout();\n    // }\n\n    $scope.initPwd = function () {\n      if ($scope.emailAddress != \"\") {\n        if ($scope.pwdList.configPwd == \"\") {\n          $scope.confirmShow = 1010;\n          return;\n        }\n\n        if ($scope.pwdList.newPwd == \"\") {\n          $scope.confirmShow = 1011;\n          return;\n        }\n\n        if ($scope.pwdList.regPwd == \"\") {\n          $scope.confirmShow = 1016;\n          return;\n        }\n\n        if ($scope.identifyName == \"\") {\n          $scope.confirmShow = 1017;\n          return;\n        }\n\n        if ($scope.configError == 2022) {\n          return;\n        } //验证码校验\n\n\n        userIdentifyService.identifyNum($scope.identifyName, function (res) {\n          if (res.code == 0 && res.data == true) {\n            // $scope.pwdList.emailAddress=userLoginUIService.user.emailAddress;\n            if ($scope.pwdList.regPwd == $scope.pwdList.newPwd) {\n              if ($scope.userId == \"\" || $scope.userId == null) {\n                $scope.userId = userLoginUIService.user.userID;\n              }\n\n              userLoginUIService.modifyPassword($scope.userId, $scope.pwdList.configPwd, $scope.pwdList.newPwd, function (initDate) {\n                if (initDate.code == 0 && initDate.data == true) {\n                  BootstrapDialog.show({\n                    title: '提示',\n                    message: '修改密码成功,请重新登录',\n                    closable: false,\n                    buttons: [{\n                      label: '确定',\n                      action: function action(dialogRef) {\n                        userLoginUIService.logout();\n                        dialogRef.close();\n                      }\n                    }]\n                  });\n                } else if (initDate.data == false) {\n                  $scope.confirmShow = \"2011\";\n                  $scope.blindClick();\n                  return;\n                } else {\n                  $scope.confirmShow = \"10010\";\n                  $scope.blindClick();\n                  $scope.codeMessage = initDate.message; //$scope.codeMessage = '旧密码输入错误';\n                }\n\n                console.log(\"initDate-----\" + JSON.stringify(initDate));\n              });\n            } else {\n              $scope.confirmShow = 1;\n            }\n          } else {\n            $scope.confirmShow = 3;\n          }\n        });\n      } else {\n        growl.warning(\"您的账号没有邮箱或者手机号码，不能修改密码\", {});\n        return; //window.location.href = \"login.html\";\n      }\n    };\n\n    $scope.tuichu = function () {\n      userLoginUIService.logout(function (res) {\n        if (res.code == 0) {\n          window.location.href = \"../#/index\";\n        }\n      });\n    };\n  }]); //修改密码\n\n  controllers.controller('forgetPwdController', ['$scope', '$rootScope', 'userLoginUIService', 'userIdentifyService', 'growl', function ($scope, $rootScope, userLoginUIService, userIdentifyService, growl) {\n    $scope.passwordEdit = userLoginUIService.user;\n    $scope.pwdList = {\n      \"emailAddress\": \"\",\n      \"newPwd\": \"\",\n      \"configPwd\": \"\",\n      \"regPwd\": \"\"\n    };\n    $scope.imgCode = \"\";\n    $scope.confirmShow = \"0\";\n    $scope.codeMessage = \"\";\n    $scope.emailAddress = \"\";\n    $scope.identifyName = \"\";\n    $scope.configError = \"\";\n    $scope.userId = \"\";\n\n    if (userLoginUIService.user.emailAddress) {\n      $scope.emailAddress = userLoginUIService.user.emailAddress;\n    } else if (userLoginUIService.user.mobilePhone) {\n      $scope.emailAddress = userLoginUIService.user.mobilePhone;\n    } //生成验证码\n\n\n    userIdentifyService.getIdentify(function (identifyData) {\n      if (identifyData.code == 0) {\n        $scope.imgCode = identifyData.data;\n      }\n    }); //更新验证码\n\n    $scope.blindClick = function () {\n      $scope.imgCode = null;\n      userIdentifyService.getIdentify(function (identifyData) {\n        if (identifyData.code == 0) {\n          $scope.imgCode = identifyData.data;\n        }\n      });\n    };\n\n    $scope.$watch(\"pwdList.regPwd\", function (newValue, oldValue) {\n      if (newValue != $scope.pwdList.newPwd) {\n        $scope.confirmShow = 1;\n      } else {\n        $scope.confirmShow = 0;\n      }\n    });\n    $scope.$watch(\"identifyName\", function (newValue, oldValue) {\n      $scope.confirmShow = 0;\n    });\n    $scope.$watch(\"pwdList.newPwd\", function (newValue, oldValue) {\n      if (newValue != '') {//if (newValue == $scope.pwdList.configPwd) {\n        //  $scope.configError = 2022;\n        //} else {\n        //  $scope.configError = 0;\n        //}\n      }\n    });\n    $scope.$watch(\"pwdList.configPwd\", function (newValue, oldValue) {\n      $scope.confirmShow = 0;\n    });\n    var currentUrl = document.location.href;\n    var currentPage = currentUrl.split(\"/\")[5]; // if(currentPage == \"personal\") {\n    //   userLoginUIService.logout();\n    // }\n\n    $scope.updatePassWord = function () {\n      if ($scope.emailAddress != \"\") {\n        if ($scope.pwdList.configPwd == \"\") {\n          growl.warning(\"旧密码不能为空\", {});\n          return;\n        }\n\n        if ($scope.pwdList.newPwd == \"\") {\n          growl.warning(\"新密码不能为空\", {});\n          return;\n        }\n\n        if ($scope.pwdList.regPwd == \"\") {\n          growl.warning(\"确认密码不能为空\", {});\n          return;\n        }\n\n        if ($scope.identifyName == \"\") {\n          growl.warning(\"验证码不能为空\", {});\n          return;\n        }\n\n        if ($scope.configError == 2022) {\n          return;\n        } //验证码校验\n\n\n        userIdentifyService.identifyNum($scope.identifyName, function (res) {\n          if (res.code == 0 && res.data == true) {\n            // $scope.pwdList.emailAddress=userLoginUIService.user.emailAddress;\n            if ($scope.pwdList.regPwd == $scope.pwdList.newPwd) {\n              if ($scope.userId == \"\" || $scope.userId == null) {\n                $scope.userId = userLoginUIService.user.userID;\n              }\n\n              userLoginUIService.modifyPassword($scope.userId, $scope.pwdList.configPwd, $scope.pwdList.newPwd, function (initDate) {\n                if (initDate.code == 0 && initDate.data == true) {\n                  BootstrapDialog.show({\n                    title: '提示',\n                    message: '修改密码成功,请重新登录',\n                    closable: false,\n                    buttons: [{\n                      label: '确定',\n                      action: function action(dialogRef) {\n                        userLoginUIService.logout();\n                        dialogRef.close();\n                      }\n                    }]\n                  });\n                } else if (initDate.data == false) {\n                  $scope.confirmShow = \"2011\";\n                  $scope.blindClick();\n                  return;\n                } else {\n                  $scope.confirmShow = \"10010\";\n                  $scope.blindClick();\n                  $scope.codeMessage = initDate.message; //$scope.codeMessage = '旧密码输入错误';\n                }\n\n                console.log(\"initDate-----\" + JSON.stringify(initDate));\n              });\n            } else {\n              $scope.confirmShow = 1;\n            }\n          } else {\n            $scope.confirmShow = 3;\n          }\n        });\n      } else {\n        growl.warning(\"您的账号没有邮箱或者手机号码，不能修改密码\", {});\n        return; //window.location.href = \"login.html\";\n      }\n    };\n\n    $scope.tuichu = function () {\n      userLoginUIService.logout(function (res) {\n        if (res.code == 0) {\n          window.location.href = \"../#/index\";\n        }\n      });\n    };\n  }]); //展会登录页面\n\n  controllers.controller('loginController', ['$scope', \"$http\", '$rootScope', 'Info', 'userIdentifyService', '$interval', function ($scope, $http, $rootScope, Info, userIdentifyService, $interval) {\n    $scope.mobile = \"\"; //手机号码\n\n    $scope.codeError = \"\"; //错误提示标志\n\n    $scope.verify = \"\"; //验证码输入\n\n    $scope.industry = \"\"; //解决方案\n\n    $scope.industryList = \"\"; //解决方案集合\n    //通过json获取解决方案\n\n    var info = Info.get(\"localdb/info.json\", function (info) {\n      $scope.provinceList = info.industry;\n    });\n    var url = window.location.origin;\n\n    if (url.search('localhost') > -1 || url.search('127.0.0.1') > -1) {\n      url = \"http://192.168.1.121\";\n    }\n\n    userIdentifyService.querySolution(function (res) {\n      if (res.code == 0) {\n        $scope.industryList = res.data;\n      }\n    });\n    $scope.$watch(\"mobile\", function (newValue, oldValue) {\n      $scope.codeError = \"0\";\n    });\n    $scope.$watch(\"verify\", function (newValue, oldValue) {\n      $scope.codeError = \"0\";\n    });\n    $scope.$watch(\"industry\", function (newValue, oldValue) {\n      $scope.codeError = \"0\";\n    });\n\n    $scope.loginSave = function () {\n      if ($scope.mobile == \"\" && $scope.mobile == null && typeof $scope.mobile == \"undefined\") {\n        $scope.codeError = \"1003\";\n        return;\n      }\n\n      if ($scope.verify == \"\" && $scope.verify == null && typeof $scope.verify == \"undefined\") {\n        $scope.codeError = \"1004\";\n        return;\n      }\n\n      if ($scope.industry == \"\" && $scope.industry == null && typeof $scope.industry == \"undefined\") {\n        $scope.codeError = \"1005\";\n        return;\n      }\n\n      userIdentifyService.identifySMS($scope.verify, function (res) {\n        if (res.code == 0 && res.data == true) {\n          userIdentifyService.weChatLogin($scope.mobile, $scope.industry, function (obj) {\n            if (obj.code == 0) {\n              window.location.href = \"../app-oc/index.html#/dashboard\";\n            }\n          });\n        } else {\n          $scope.codeError = \"2001\";\n        }\n      });\n    };\n\n    var interval;\n\n    $scope.codeClick = function () {\n      if ($scope.mobile == \"\" && $scope.mobile == null && typeof $scope.mobile == \"undefined\") {\n        $scope.codeError = \"1003\";\n        return;\n      }\n\n      if ($(\"#charge\").text() == \"发送验证码\") {\n        $(\"#charge\").attr({\n          \"disabled\": \"disabled\"\n        }); //手机发重置密码邮件\n\n        userIdentifyService.sendSMS($scope.mobile, function (address) {\n          if (address.code == 0 && address.data == true) {\n            $scope.time = 60;\n            $interval.cancel();\n            interval = $interval(function () {\n              $scope.time--;\n\n              if ($scope.time == 0) {\n                $(\"#charge\").removeAttr(\"disabled\");\n                $(\"#charge\").text(\"发送验证码\");\n                $scope.time = 60;\n                $interval.cancel(interval);\n              } else {\n                $(\"#charge\").text(\"\" + $scope.time + \"秒后，重新获取验证码\");\n              }\n            }, 1000);\n          }\n        });\n      }\n    };\n  }]); //用户注册\n\n  controllers.controller('registerCtrl', ['$scope', '$rootScope', 'Info', 'userUIService', 'modelDefinitionService', 'userIdentifyService', '$interval', function ($scope, $rootScope, Info, userUIService, modelDefinitionService, userIdentifyService, $interval) {\n    $scope.regShow = \"1\";\n    $scope.confirmPassword = \"\";\n    $scope.confirmShow = \"false\";\n    $scope.statusShow = \"1\";\n    $scope.emailOnly = \"0\";\n    $scope.imgCode = \"\";\n    $scope.identifyName = \"\";\n    $scope.safeMsg = false;\n    $scope.phoneEmail = \"1001\";\n    $scope.editData = {};\n    $scope.formData = {\n      'emailAddress': '',\n      'password': '',\n      'roleID': '1',\n      'mobilePhone': '',\n      'userName': '',\n      'countryRegion': '中国大陆',\n      'address': '',\n      'industry': '',\n      'city': '北京',\n      'province': '北京',\n      'business': '',\n      'mail_num': ''\n    };\n    $scope.enterpriseManager = {\n      \"name\": \"\"\n    };\n    $scope.show = false;\n    var urlCode = location.href.split(\"?\");\n    var info = Info.get(\"localdb/info.json\", function (info) {\n      $scope.areaList = info.areaList;\n      $scope.provinceList = info.cityList;\n    }); // $scope.$on('loginStatusChanged', function(evt, d) {\n    //     if (userLoginUIService.user.isAuthenticated) {\n    //         $rootScope.staffName = userLoginUIService.user.userName;\n    //         $scope.userInfo = userLoginUIService.user;\n    //     }\n    // });\n    //生成验证码\n\n    userIdentifyService.getIdentify(function (e) {\n      if (e.code == 0) {\n        $scope.imgCode = e.data;\n      }\n    });\n    modelDefinitionService.findAllIndustry(function (industry) {\n      var arr = industry.data;\n      var arr1 = industry.data;\n      var newData = [];\n\n      for (var i = 0; i < arr.length; i++) {\n        for (var j = 0; j < arr1.length; j++) {\n          if (arr[i].id == arr1[j].parentModelId) {\n            newData.push(arr1[j]);\n          }\n        }\n      }\n\n      $scope.belongList = newData;\n    });\n\n    $scope.blindClick = function () {\n      //生成验证码\n      userIdentifyService.getIdentify(function (e) {\n        if (e.code == 0) {\n          $scope.imgCode = e.data;\n        }\n      });\n    };\n\n    $scope.$watch(\"formData.emailAddress\", function (newValue, oldValue) {\n      $scope.emailOnly = \"0\";\n    });\n    $scope.$watch(\"identifyName\", function (newValue, oldValue) {\n      $scope.emailOnly = \"0\";\n    });\n    $scope.$watch(\"formData.industry\", function (newValue, oldValue) {\n      $scope.emailOnly = \"0\";\n    });\n    $scope.$watch(\"formData.password\", function (newValue, oldValue) {\n      $scope.emailOnly = \"0\";\n    });\n    $scope.$watch(\"formData.mobilePhone\", function (newValue, oldValue) {\n      $scope.emailOnly = \"0\";\n    });\n    $scope.$watch(\"formData.userName\", function (newValue, oldValue) {\n      $scope.emailOnly = \"0\";\n    });\n    $scope.$watch(\"confirmPassword\", function (newValue, oldValue) {\n      $scope.emailOnly = \"0\";\n\n      if (newValue != $scope.formData.password) {\n        $scope.confirmShow = 1;\n      } else {\n        $scope.confirmShow = 0;\n      }\n    });\n\n    $scope.onMouseOver = function (actor, event) {\n      $scope.show = true;\n    };\n\n    $scope.renewal = function () {\n      //$scope.regShow=\"1\";\n      window.location.reload(); //刷新当前页面.\n    };\n\n    $scope.statusClick = function (statusId) {\n      if (statusId == 1) {\n        $scope.statusShow = 1;\n      } else if (statusId == 2) {\n        $scope.statusShow = 2;\n      }\n    };\n\n    var interval;\n\n    $scope.noEmail = function () {\n      console.log(\"username==\" + $(\"#emailBtn\").text());\n\n      if ($(\"#emailBtn\").text() == \"重新发送邮件\") {\n        userIdentifyService.sendEmail($scope.formData.emailAddress, $scope.formData.password, function (address) {\n          if (address.code == 0 && address.data == true) {\n            $scope.time = 60;\n            $interval.cancel();\n            interval = $interval(function () {\n              $scope.time--;\n\n              if ($scope.time == 0) {\n                $(\"#emailBtn\").text(\"重新发送邮件\");\n                $scope.time = 60;\n                $interval.cancel(interval);\n              } else {\n                $(\"#emailBtn\").text(\"\" + $scope.time + \"秒后，重新获取\");\n              }\n            }, 1000);\n          }\n\n          $scope.regShow = 2;\n        });\n      }\n    };\n\n    $scope.phoneCode = function () {\n      if ($scope.formData.emailAddress == \"\") {\n        $scope.emailOnly = 11;\n        return;\n      }\n\n      if ($scope.statusCheck == '') {\n        $scope.emailOnly = '1003';\n        return;\n      }\n\n      if ($scope.formData.password == \"\") {\n        $scope.emailOnly = 'pass10';\n        return;\n      }\n\n      if ($scope.formData.password == undefined) {\n        return;\n      }\n\n      if ($(\"#phoneCode\").text() == \"发送验证码\") {\n        $(\"#phoneCode\").attr({\n          \"disabled\": \"disabled\"\n        });\n        userIdentifyService.sendSMS($scope.formData.emailAddress, function (codeData) {\n          if (codeData.code == 0 && codeData.data == true) {\n            $scope.timeCode = 60;\n            $interval.cancel();\n            interval = $interval(function () {\n              $scope.timeCode--;\n\n              if ($scope.timeCode == 0) {\n                $(\"#phoneCode\").text(\"发送验证码\");\n                $(\"#phoneCode\").removeAttr(\"disabled\");\n                $scope.timeCode = 60;\n                $interval.cancel(interval); //$scope.emailSend = false;\n              } else {\n                $(\"#phoneCode\").text(\"\" + $scope.timeCode + \"秒后，重新获取\");\n              }\n            }, 1000);\n          } else {\n            if (codeData.code == 10017) {\n              $scope.emailOnly = 1;\n              $(\"#phoneCode\").removeAttr(\"disabled\");\n            }\n          }\n        });\n      }\n    };\n\n    var seed = 5; //60秒\n\n    var tip = function tip() {\n      seed--;\n\n      if (seed > 0) {\n        $(\"#sec\").text(seed);\n        secTip();\n      } else {\n        window.location.href = \"index.html\";\n      }\n    };\n\n    var secTip = function secTip() {\n      setTimeout(tip, 1000);\n    }; //注册只支持企业用户注册\n\n\n    $scope.phoneSumbit = function () {\n      if ($scope.formData.userName == \"\") {\n        $scope.emailOnly = \"01012\";\n        return;\n      }\n\n      if ($scope.formData.userName == undefined) {\n        return;\n      }\n\n      if ($scope.statusCheck == \"phone\") {\n        $scope.formData1 = {\n          'password': $scope.formData.password,\n          'mobilePhone': $scope.formData.emailAddress,\n          'userName': $scope.formData.userName,\n          'countryRegion': '中国大陆',\n          'address': $scope.formData.address,\n          'city': '北京',\n          'business': $scope.formData.business,\n          'province': '北京'\n        };\n        $scope.editData[\"name\"] = $scope.formData.business;\n        $scope.editData[\"address\"] = $scope.formData.address;\n        $scope.editData[\"contactPhone\"] = $scope.formData.emailAddress;\n      } else {\n        $scope.formData1 = {\n          'password': $scope.formData.password,\n          'emailAddress': $scope.formData.emailAddress,\n          'userName': $scope.formData.userName,\n          'countryRegion': '中国大陆',\n          'address': $scope.formData.address,\n          'city': '北京',\n          'business': $scope.formData.business,\n          'province': '北京'\n        };\n        $scope.editData[\"name\"] = $scope.formData.business;\n        $scope.editData[\"address\"] = $scope.formData.address;\n        $scope.editData[\"contactEmail\"] = $scope.formData.emailAddress;\n      }\n\n      userUIService.individualUserRegister($scope.editData, $scope.formData1, function (vv) {\n        if (vv.code == 0) {\n          $scope.regShow = \"4\";\n\n          if ($scope.statusCheck == \"phone\") {\n            $scope.$on('loginStatusChanged', function (evt, d) {\n              if (userLoginUIService.user.isAuthenticated) {\n                $rootScope.staffName = userLoginUIService.user.userName;\n                $scope.userInfo = userLoginUIService.user;\n                console.log(\"注册用户登录成功\");\n              } else {\n                console.log(\"注册失败,原因\" + vv.message + \"\");\n                window.location.href = \"login.html\";\n              }\n            }); // userLoginUIService.login($scope.formData.emailAddress, $scope.formData.password);\n          } // setTimeout(function () {\n          // window.location.href=\"app/index.html\";\n          // }, 5000);\n\n\n          secTip();\n          $(\"#barvader\").css(\"width\", \"100%\");\n          $(\".steps >ol >li:eq(2)\").addClass(\"active\");\n        } else {\n          if (vv.code == -3) {\n            $scope.emailOnly = \"2\";\n          } else {\n            console.log(\"注册失败,原因\" + vv.message + \"\"); // window.location.href=\"login.html\";\n          }\n        }\n      });\n    };\n\n    $scope.emailHref = function (hrefName) {\n      var emailSpile = hrefName.split(\"@\")[1].split(\".\")[0];\n      window.open(\"http://mail.\" + emailSpile + \".com/\");\n    };\n\n    $scope.passCheck = function (eve) {\n      var val = '' + eve.currentTarget.value + '';\n\n      if (val == '') {\n        $scope.emailOnly = \"pass10\";\n      } else {\n        if (!val.match(/^(?![^a-zA-Z]+$)(?!\\D+$).{6,20}$/)) {\n          $scope.emailOnly = \"pass11\";\n        }\n      } //  if(!val.match(/^(?![^a-zA-Z]+$)(?!\\D+$).{6,20}$/)){\n      //    $scope.emailOnly =\"pass11\";\n      //  }else if(){\n      //    $scope.emailOnly =\"pass10\";\n      // }\n\n    };\n\n    $scope.identCheck = function (eve) {\n      var val = '' + eve.currentTarget.value + '';\n\n      if (val == '') {\n        $scope.emailOnly = \"30001\";\n      }\n    };\n\n    $scope.userCheck = function (eve) {\n      var val = '' + eve.currentTarget.value + '';\n\n      if (val == '') {\n        $scope.emailOnly = \"01012\";\n      }\n    };\n\n    $scope.modeCheck = function () {\n      var val = $scope.formData.emailAddress;\n\n      if (val.match(/^([a-zA-Z0-9_\\.\\-])+\\@(([a-zA-Z0-9\\-])+\\.)+([a-zA-Z0-9]{2,4})+$/)) {\n        $scope.phoneEmail = 1002;\n        $scope.statusCheck = \"email\";\n      } else if (val.match(/^((1[3,5,8][0-9])|(14[5,7])|(17[0,6,7,8]))\\d{8}$/)) {\n        $scope.phoneEmail = 1001;\n        $scope.statusCheck = \"phone\";\n      } else if (val == '') {\n        $scope.emailOnly = 11; // $scope.phoneEmail=\"\";\n\n        $scope.statusCheck = ''; // $(\"#phone\").addClass(\"error-boder\");\n      } else {\n        $scope.emailOnly = '1003';\n        $scope.statusCheck = ''; // $(\"#phone\").addClass(\"error-boder\");\n      }\n    };\n\n    $scope.checkClick = function () {\n      $scope.emailOnly = \"0\";\n\n      if ($(\"#regCheck\").attr(\"checked\") == \"checked\") {\n        $(\"#regCheck\").attr(\"checked\", false);\n      } else {\n        $(\"#regCheck\").attr(\"checked\", true);\n      }\n    };\n\n    $scope.nextStep = function (regId) {\n      if ($scope.formData.emailAddress == \"\") {\n        $scope.emailOnly = 11;\n        return;\n      }\n\n      if ($scope.formData.password == \"\") {\n        $scope.emailOnly = 'pass10';\n        return;\n      }\n\n      if ($scope.identifyName == \"\") {\n        $scope.emailOnly = '30001';\n        return;\n      }\n\n      if (regId == 2) {\n        console.log(\"regCheck----\" + $(\"#regCheck\").attr(\"checked\"));\n\n        if ($(\"#regCheck\").attr(\"checked\") == \"checked\") {\n          if ($scope.statusCheck == \"phone\") {\n            //校验手机号码是否存在\n            userUIService.checkMobilePhone($scope.formData.emailAddress, function (data) {\n              if (data.code == 0 && data.data == true) {\n                userIdentifyService.identifySMS($scope.identifyName, function (codeData) {\n                  if (codeData.code == 0 && codeData.data == true) {\n                    $scope.regShow = '20000';\n                    $(\"#barvader\").css(\"width\", \"50%\");\n                    $(\".steps >ol >li:eq(1)\").addClass(\"active\");\n                  } else {\n                    $scope.emailOnly = 2;\n                  }\n                });\n              } else {\n                $scope.emailOnly = 1;\n              }\n            });\n          } else if ($scope.statusCheck == \"email\") {\n            //校验邮箱是否存在\n            userIdentifyService.repeatEmail($scope.formData.emailAddress, function (emailExist) {\n              if (emailExist.code == 0 && emailExist.data == true) {\n                //验证码校验\n                userIdentifyService.identifyNum($scope.identifyName, function (res) {\n                  if (res.code == 0 && res.data == true) {\n                    userIdentifyService.sendEmail($scope.formData.emailAddress, $scope.formData.password, function (address) {\n                      $scope.regShow = regId;\n                      console.log(\"发送邮件返回值---\" + JSON.stringify(address));\n                    });\n                  } else {\n                    $scope.emailOnly = 2; //生成验证码\n\n                    userIdentifyService.getIdentify(function (e) {\n                      if (e.code == 0) {\n                        $scope.imgCode = e.data;\n                      }\n                    });\n                  }\n                });\n              } else {\n                $scope.emailOnly = 1;\n              }\n            });\n          }\n        } else {\n          $scope.emailOnly = 2099;\n        }\n      }\n    };\n\n    if (urlCode[1] != undefined) {\n      var statusCode = urlCode[1];\n      console.log(\"code---\" + urlCode[1]);\n      userIdentifyService.identifyEmail(statusCode.split(\"=\")[1], function (identifyData) {\n        if (identifyData.code == 0) {\n          userIdentifyService.repeatEmail(identifyData.data.emailAddress, function (emailExist) {\n            console.log(\"emailExist---\" + JSON.stringify(emailExist));\n\n            if (emailExist.code == 0 && emailExist.data == false) {\n              //window.location.href=\"index.html#/index\";\n              $scope.regShow = 6;\n              $(\".steps\").hide();\n            } else {\n              console.log(\"countryRegion--\" + identifyData.data.countryRegion);\n              $scope.formData.emailAddress = identifyData.data.emailAddress;\n              $scope.formData.password = identifyData.data.countryRegion;\n              $(\".steps >ol >li:eq(1)\").addClass(\"active\");\n              $(\"#barvader\").css(\"width\", \"50%\");\n              $scope.regShow = '20000';\n            }\n          });\n        } else {\n          $scope.regShow = 5;\n        }\n      });\n    }\n  }]);\n});"],"sourceRoot":"/source/"}