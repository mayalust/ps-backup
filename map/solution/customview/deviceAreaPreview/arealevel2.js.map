{"version":3,"sources":["solution/customview/deviceAreaPreview/arealevel2.js"],"names":["define","on","init","event","target","getParameter","getDomainAreaLineTree_alertStatus","find","getChildren","n","i","l","then","children","viewId","$attr","getViewById","view","content","json","JSON","parse","render","cells","attr","filter","el","attributes","type","createMarker","index","node","position","cell","text","label","x","Math","floor","random","y","ins","setAlarmStatus","state","setPos","getPathLocation","path","navigateToTab","id"],"mappings":"AAAAA,OAAO,CACLC,GAAM,CACJC,KAAQ,SAAcC,GACpB,IAAIC,EAASD,EAAMC,OACVA,EAAOC,aAAa,MAClBD,EAAOC,aAAa,QAC/BD,EAAOE,kCAAkC,SAAUC,GACjDA,EAAKC,YAAY,SAAUC,EAAGC,EAAGC,GAC/B,OAAOA,EAAI,IACVC,KAAK,SAAUC,GAChB,IAAIC,EAASP,EAAKQ,MAAM,sBACxBX,EAAOY,YAAYF,EAAQ,SAAUG,GACnC,IAAIC,EAAUD,EAAKC,QACfC,EAAOC,KAAKC,MAAMH,GACtBd,EAAOkB,OAAOH,GACdf,EAAOH,GAAG,qBAAsB,SAAUsB,GACxC,IAAK,IAAIb,KAAKa,EACZA,EAAMb,GAAGc,KAAK,iBAAkB,GAChCD,EAAMb,GAAGc,KAAK,eAAgB,GAIrBD,EAAME,OAAO,SAAUC,GAChC,MAA6B,gBAAtBA,EAAGC,WAAWC,OADvB,IAIIC,EAAe,SAAsBC,EAAOC,GAC9C,IAIIC,EAJAC,EAAOV,EAAMhB,KAAK,SAAU0B,GAC9B,IAAIC,EAAOD,EAAKT,KAAK,aACrB,OAAOO,EAAKI,OAASD,KACjBX,EAAMO,IAAU,GAIpBE,EADEC,EACSA,EAAKN,WAAWK,SAEhB,CACTI,EAAGC,KAAKC,MAAM,IAAsB,IAAhBD,KAAKE,UACzBC,EAAGH,KAAKC,MAAM,IAAsB,IAAhBD,KAAKE,WAI7BnC,EAAOyB,aAAaE,EAAKI,MAAO,SAAUM,GACxCA,EAAIC,eAAeX,EAAKY,OACxBF,EAAIG,OAAOZ,GACXS,EAAIxC,GAAG,QAAS,SAAUE,GACxB4B,EAAKc,kBAAkBjC,KAAK,SAAUkC,GACpC1C,EAAO2C,cAAc,CACnBjB,MAAOgB,EACPE,GAAIjB,EAAKiB,YAOnB,IAAK,IAAItC,KAAKG,EACZgB,EAAanB,EAAGG,EAASH","file":"solution/customview/deviceAreaPreview/arealevel2.js","sourcesContent":["define({\n  \"on\": {\n    \"init\": function init(event) {\n      var target = event.target;\n      var id = target.getParameter(\"id\");\n      var main = target.getParameter(\"main\");\n      target.getDomainAreaLineTree_alertStatus(function (find) {\n        find.getChildren(function (n, i, l) {\n          return l < 2;\n        }).then(function (children) {\n          var viewId = find.$attr(\"values/view/viewId\");\n          target.getViewById(viewId, function (view) {\n            var content = view.content;\n            var json = JSON.parse(content);\n            target.render(json);\n            target.on(\"$loadCiKpiComplete\", function (cells) {\n              for (var i in cells) {\n                cells[i].attr(\"circle/opacity\", 0);\n                cells[i].attr(\"text/opacity\", 0);\n              }\n\n              ;\n              var list = cells.filter(function (el) {\n                return el.attributes.type == \"basic.Circle\";\n              });\n\n              var createMarker = function createMarker(index, node) {\n                var cell = cells.find(function (cell) {\n                  var text = cell.attr(\"text/text\");\n                  return node.label == text;\n                }) || cells[index] || {};\n                var position;\n\n                if (cell) {\n                  position = cell.attributes.position;\n                } else {\n                  position = {\n                    x: Math.floor(100 + Math.random() * 300),\n                    y: Math.floor(100 + Math.random() * 200)\n                  };\n                }\n\n                target.createMarker(node.label, function (ins) {\n                  ins.setAlarmStatus(node.state);\n                  ins.setPos(position);\n                  ins.on(\"click\", function (event) {\n                    node.getPathLocation().then(function (path) {\n                      target.navigateToTab({\n                        index: path,\n                        id: node.id\n                      });\n                    });\n                  });\n                });\n              };\n\n              for (var i in children) {\n                createMarker(i, children[i]);\n              }\n            });\n          });\n        });\n      });\n    }\n  }\n});"],"sourceRoot":"/source/"}