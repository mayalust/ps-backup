{"version":3,"sources":["js/directives/base-dom.js"],"names":["define","directives","directive","timeout","scope","restrict","link","element","attr","$","AdminLTE","pushMenu","activate","templateUrl","controller","$scope","$element","console","info","el","compile","attributes","pre","post","$timeout","$last","$emit","$on","ngRepeatFinishedEvent","each","$this","this","sparkline","type","height","data","barColor","sliceColors","width","lineColor","fillColor","spotColor","attrs","click","e","preventDefault","tab","$compile","template","replace","iElem","iAttr","ngmodel","$location","SwSocket","growl","$attrs","psMessageService","configUIService","msgSty","userMessage","uuid","Math","messageTypeArr","configGroupsArr","alertStatus","configList","getAllConfigs","returnObj","code","forEach","item","groupName","length","undefined","value","messageType","eval","queryMessage","messageTypeReturn","obj","message","msgType","senderTxt","msgTxt","background-color","callback","evendata","dataObj","play","error","title","search","msgObj","taskShow","status","unread","dataMsg","j","push","unshift","$apply","messageClick","messageData","modifyMsgStatus","messageId","res","i","splice","trim","content","location","href","param","operation","register","send","queryMessageByStatusAndUserIDWithPage","start","sortType","sort","total","unregister","append","$watch","newVal","oldVal","addClass","removeClass"],"mappings":"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","file":"js/directives/base-dom.js","sourcesContent":["define(['directives/directives'], function (directives) {\n  'use strict';\n\n  directives.directive(\"adminLiteToggle\", [\"$timeout\", function (timeout) {\n    var directive = {};\n    directive.scope = {};\n    directive.restrict = \"A\";\n    directive.link = link;\n\n    function link(scope, element, attr) {\n      timeout(function () {\n        $.AdminLTE.pushMenu.activate(element);\n      });\n    }\n\n    return directive;\n  }]);\n  directives.directive('viewDiv', function () {\n    return {\n      restrict: 'AEC',\n      templateUrl: 'partials/chart.html',\n      controller: function controller($scope, $element) {\n        console.info(\"进入viewDIv：controller\");\n      },\n      link: function link(scope, el, attr) {\n        console.info(\"进入viewDIv：link\");\n      },\n      compile: function compile(element, attributes) {\n        return {\n          pre: function preLink(scope, element, attributes) {\n            console.info(\"进入viewDIv：preLink\");\n          },\n          post: function postLink(scope, element, attributes) {\n            console.info(\"进入viewDIv：postLink\");\n          }\n        };\n      }\n    };\n  });\n  directives.directive('onFinishRenderFilters', function ($timeout) {\n    return {\n      restrict: 'A',\n      link: function link(scope, element, attr) {\n        if (scope.$last === true) {\n          $timeout(function () {\n            scope.$emit('ngRepeatFinished');\n          });\n        }\n      }\n    };\n  });\n  directives.directive('sparkline', ['$timeout', function ($timeout) {\n    return {\n      restrict: 'A',\n      link: function link(scope, element, attr) {\n        var init = function init() {\n          $('.sparkbar').each(function () {\n            var $this = $(this);\n            $this.sparkline('html', {\n              type: 'bar',\n              height: $this.data('height') ? $this.data('height') : '30',\n              barColor: $this.data('color')\n            });\n          }); //-----------------\n          //- SPARKLINE PIE -\n          //-----------------\n\n          $('.sparkpie').each(function () {\n            var $this = $(this);\n            $this.sparkline('html', {\n              type: 'pie',\n              height: $this.data('height') ? $this.data('height') : '90',\n              sliceColors: $this.data('color')\n            });\n          }); //------------------\n          //- SPARKLINE LINE -\n          //------------------\n\n          $('.sparkline').each(function () {\n            var $this = $(this);\n            $this.sparkline('html', {\n              type: 'line',\n              height: $this.data('height') ? $this.data('height') : '90',\n              width: '100%',\n              lineColor: $this.data('linecolor'),\n              fillColor: $this.data('fillcolor'),\n              spotColor: $this.data('spotcolor')\n            });\n          });\n        };\n\n        scope.$on('ngRepeatFinished', function (ngRepeatFinishedEvent) {\n          init();\n        });\n      }\n    };\n  }]);\n  directives.directive('showtab', function () {\n    return {\n      link: function link(scope, element, attrs) {\n        element.click(function (e) {\n          e.preventDefault();\n          $(element).tab('show');\n        });\n      }\n    };\n  });\n  directives.directive('menuMessages', function ($compile, $timeout) {\n    return {\n      restrict: 'EA',\n      template: '<li  ng-show=\"menuitems[&quot;F06&quot;]\"  class=\"dropdown notifications-menu\"><a  href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\">' + '<i class=\"fa fa-bell-o\"></i>' + '<span ng-class=\"{true:&quot;label label-warning&quot;,false:&quot; label btn-twinkle&quot;}[alertStatus==&quot;default&quot;]\" ng-show=\"unread != 0\" ng-bind=\"unread\"></span>' + '</a>' + '<ul style=\"width: 300px;max-height: 327px;overflow: hidden;\" class=\"dropdown-menu\" ng-slimscroll >' + '<li style=\"background-color:#cdcdcd;\" class=\"header align-center info-box-number\">消息通知</li>' + '<li ng-if=\"unread != 0\" style=\"height: 260px;overflow: hidden;\">' + '<ul class=\"menu\" style=\"max-height: 255px;overflow-y: auto;\">' + '<li class=\"msg-li\" ng-repeat=\"msg in userMessage\">' + '<p style=\"margin: 0 0 0px;\"><a href class=\"msg-title \" ng-click=\"messageClick(msg);\"  title=\"{{msg.message.title}}\">{{msg.message.title}}</a><span class=\"pull-right msg-txt\" ng-style=\"msg.msgSty\"  ng-click=\"messageClick(msg);\"  title=\"{{msg.senderTxt}}\">{{msg.msgTxt}}</span></p>' + '<p style=\"margin: 0 0 0px;color: #cacaca;\">{{msg.message.content}}</p>' + '<p style=\"margin: 0 0 0px;color: #cacaca;\">{{msg.message.insertTime | date:\"yyyy-MM-dd HH:mm:ss\"}}</p>' + '</li>' + '</ul>' + '<li  ng-if=\"unread == 0\"  style=\"height: 260px;text-align: center;line-height: 260px;\">' + '您暂时没有新的消息' + '</li>' + '</li>' + //宝钢暂时不用\n      // '<li class=\"footer\"><a style=\"color: #3c8dbc !important;\" href=\"../app-uc/index.html#/message\">查看更多</a></li>' +\n      '</ul>' + '<audio id=\"noticeAudio\" preload=\"auto\">' + '<source src=\"../music/song.mp3\" type=\"audio/mpeg\">' + '</audio>' + '</li>',\n      replace: true,\n      link: function link(scope, iElem, iAttr, ngmodel) {},\n      controller: ['$scope', '$location', 'SwSocket', 'growl', '$element', '$attrs', 'psMessageService', 'configUIService', function ($scope, $location, SwSocket, growl, $element, $attrs, psMessageService, configUIService) {\n        $scope.msgSty;\n        $scope.userMessage = [];\n        var uuid = Math.uuid();\n        $scope.messageTypeArr = {};\n        $scope.configGroupsArr = {};\n        $scope.alertStatus = \"default\"; //获取所有的全局配置\n\n        var configList = function configList() {\n          configUIService.getAllConfigs(function (returnObj) {\n            if (returnObj.code == 0) {\n              returnObj.data.forEach(function (item) {\n                $scope.configGroupsArr[item.groupName] = item;\n              });\n\n              if (returnObj.data.length > 0 && $scope.configGroupsArr[\"messageType\"] != undefined && $scope.configGroupsArr[\"messageType\"].value) {\n                var messageType = eval(\"(\" + $scope.configGroupsArr[\"messageType\"].value + \")\");\n                $scope.messageTypeArr = messageType;\n              }\n\n              queryMessage();\n            }\n          });\n        };\n\n        var messageTypeReturn = function messageTypeReturn(obj) {\n          if (obj.message) {\n            if ($scope.messageTypeArr[obj.message.msgType] != undefined) {\n              obj[\"senderTxt\"] = $scope.messageTypeArr[obj.message.msgType].senderTxt;\n              obj[\"msgTxt\"] = $scope.messageTypeArr[obj.message.msgType].msgTxt;\n              obj[\"msgSty\"] = {\n                \"background-color\": $scope.messageTypeArr[obj.message.msgType].msgSty\n              };\n            }\n          }\n\n          ;\n          return obj;\n        }; //消息返回处理\n\n\n        var callback = function callback(evendata) {\n          var dataObj = messageTypeReturn(evendata.data);\n\n          if (dataObj.message) {\n            if (dataObj.message.msgType == \"alert_message_insystem\" || dataObj.message.msgType == \"gateway_message\" || dataObj.message.msgType == \"payment_message\") {\n              /**\n               *\n               * 宝钢告警添加消息通知 加入声音提醒\n               * hanxing 2018-12-21\n               */\n              if (dataObj.message.msgType == \"alert_message_insystem\") {\n                $(\"#noticeAudio\")[0].play();\n              }\n\n              growl.error(\"您有一条新的\" + dataObj.senderTxt + \"\", {});\n            } else if (dataObj.message.msgType == \"command_message\" || dataObj.message.msgType == \"energyconsume_message\" || dataObj.message.msgType == \"datareport_message\" || dataObj.message.msgType == \"devicereport_message\") {\n              if (dataObj.message.title.search(\"失败\") > -1) {\n                growl.error(dataObj.senderTxt + \":\" + dataObj.message.title, {});\n              } else {\n                growl.info(dataObj.senderTxt + \":\" + dataObj.message.title, {});\n              }\n            } else {\n              growl.info(\"您有一条新的\" + dataObj.senderTxt + \"\", {});\n            }\n\n            var msgObj = evendata.data;\n            taskShow(msgObj, 1);\n          }\n\n          ;\n        }; //status 1是从websocket上推送上来2是直接查询\n\n\n        var taskShow = function taskShow(message, status, unread) {\n          var msgObj = message;\n\n          if (message) {\n            if (status == 1) {\n              msgObj = [message];\n            }\n\n            var dataMsg = [];\n\n            for (var j in msgObj) {\n              // if(j < 4) {\n              var dataObj = messageTypeReturn(msgObj[j]);\n              dataMsg.push(dataObj); // }\n            }\n\n            if (status == 2) {\n              $scope.userMessage = dataMsg;\n              $scope.unread = unread;\n            } else {\n              $scope.userMessage.unshift(message);\n\n              if ($scope.unread > 0) {\n                $scope.unread = $scope.unread + 1;\n              } else {\n                $scope.unread = 1;\n              }\n\n              $scope.$apply();\n            }\n          }\n        };\n\n        $scope.messageClick = function (messageData) {\n          if (messageData.message.msgType == \"ticket_message\" || messageData.message.msgType == \"alert_message_insystem\") {\n            psMessageService.modifyMsgStatus([messageData.message.messageId], function (res) {\n              if (res.code == 0) {\n                for (var i in $scope.userMessage) {\n                  if ($scope.userMessage[i].messageId == messageData.messageId) {\n                    $scope.userMessage.splice(i, 1);\n                  }\n                }\n\n                $scope.unread = $scope.unread - 1; // $scope.$apply();\n              }\n            });\n          } else {\n            psMessageService.modifyMsgStatus([messageData.message.messageId], function (res) {\n              if (res.code == 0) {\n                queryMessage();\n                var str2 = $.trim(messageData.message.content);\n\n                if (messageData.message.msgType == \"ticket_message\") {//工单任务\n                  // var orderId = str2.split(\"任务ID：\")[1];\n                  // var orderAddress = str2.split(\"任务地址：\")[1];\n                  // if (orderAddress) {\n                  //   location.href = orderAddress.split(\",\")[0] + \"/\" + orderId.split(\",\")[0];\n                  // } else {\n                  //   location.href = '../app-oc/index.html#/orderdetail/' + orderId.split(\",\")[0] + '/task/message';\n                  // }\n                } else if (messageData.message.msgType == \"ticket_maintenance_message\") {//工单任务\n                  // var orderId = str2.split(\"任务ID：\")[1];\n                  // location.href = '../app-oc/index.html#/deviceTask/' + orderId.split(\",\")[0] + '';\n                } else if (messageData.message.msgType == \"payment_message\") {\n                  location.href = '../app-uc/index.html#/expenses';\n                } else if (messageData.message.msgType == \"alert_message_insystem\") {//设备告警\n                  // location.href = '../app-oc/index.html#/configAlert/' + $.trim(messageData.message.content) + '/alert';\n                } else if (messageData.message.msgType == \"maintenance_msg\") {\n                  location.href = '../app-oc/index.html#/maintenance/' + $.trim(messageData.message.content) + '';\n                } else {\n                  location.href = '../app-uc/index.html#/messageDetail/' + messageData.message.messageId + '';\n                }\n              }\n            });\n          }\n        };\n\n        var param = {};\n        var operation = \"register\";\n        SwSocket.register(uuid, operation, callback); //websocket发送请求\n\n        SwSocket.send(uuid, operation, 'msg', param);\n\n        var queryMessage = function queryMessage() {\n          psMessageService.queryMessageByStatusAndUserIDWithPage([0, {\n            \"start\": 0,\n            \"length\": 10000,\n            \"sortType\": \"DESC\",\n            \"sort\": \"_id\"\n          }], function (obj) {\n            if (obj.code == 0) {\n              /* 前端加日期排序功能\n              obj.data.sort(function(a, b) {\n                return a.message.insertTime < b.message.insertTime ? 1 : -1;\n              });\n              */\n              taskShow(obj.data.data, 2, obj.data.total);\n            }\n          });\n        };\n\n        configList(); //注销scope时注销方法heartBeat，回调函数callback\n\n        $scope.$on(\"$destroy\", function () {\n          SwSocket.unregister(uuid);\n        });\n      }]\n    };\n  });\n  directives.directive(\"loading\", [\"$timeout\", function (timeout) {\n    return {\n      replace: true,\n      restrict: 'EA',\n      link: function link($scope, $element, attrs) {\n        var htmlStr = '<div id=\"warpShow\" class=\"modal-backdrop fade in display-none\"   style=\"z-index: 1040;\"></div>' + '<div id=\"loadingShow\" class=\"modal bootstrap-dialog type-primary fade size-normal in display-none\"  role=\"dialog\" aria-hidden=\"true\" id=\"ad822433-1650-4880-8b58-ed07a2bae88f\"' + 'aria-labelledby=\"ad822433-1650-4880-8b58-ed07a2bae88f_title\"  tabindex=\"-1\" style=\"z-index: 1050;  padding-left: 17px;  text-align: center;\">' + '<img style=\"width: 200px;margin-top: 10%;\" src=\"../app-editor/images/loading_spinner.gif\">' + ' </div>';\n        $element.append(htmlStr);\n      },\n      controller: ['$scope', '$location', 'SwSocket', 'growl', '$element', '$attrs', 'psMessageService', function ($scope, $location, SwSocket, growl, $element, $attrs, psMessageService) {\n        $scope.$watch(\"loadingShow\", function (newVal, oldVal) {\n          if (newVal) {\n            if (newVal) {\n              $(\"#warpShow\").addClass(\"menu-open\").removeClass(\"display-none\");\n              $(\"#loadingShow\").addClass(\"menu-open\").removeClass(\"display-none\");\n            } else {\n              $(\"#warpShow\").removeClass(\"menu-open\").addClass(\"display-none\");\n              $(\"#loadingShow\").removeClass(\"menu-open\").addClass(\"display-none\");\n            }\n          } else {\n            if (newVal) {\n              $(\"#warpShow\").addClass(\"menu-open\").removeClass(\"display-none\");\n              $(\"#loadingShow\").addClass(\"menu-open\").removeClass(\"display-none\");\n            } else {\n              $(\"#warpShow\").removeClass(\"menu-open\").addClass(\"display-none\");\n              $(\"#loadingShow\").removeClass(\"menu-open\").addClass(\"display-none\");\n            }\n          }\n        });\n      }]\n    };\n  }]);\n});"],"sourceRoot":"/source/"}