{"version":3,"sources":["js/directives/cmdb-dom.js"],"names":["define","directives","datatables","daterangepicker","initDirective","$timeout","$compile","$filter","restrict","controller","$scope","$element","$attrs","table","itemAttrs","domMain","isEditing","format","d","returnStr","isEdit","i","attr","label","dataType","name","values","hasOwnProperty","addsIcon","iconList","icon","title","adds","split","provinces","length","citys","children","id","districts","$on","Event","CMDBINFOSINIT","event","args","destroy","option","DataTable","order","dom","language","datatable","data","columns","orderable","columnDefs","targets","render","type","full","escape","modelId","rowCallback","nRow","aData","iDataIndex","selected","className","on","e","tr","$","this","closest","row","context","cellIndex","child","isShown","hide","removeClass","show","addClass","each","temp_html","oProvince","find","oCity","oDistrict","district","n","get","selectedIndex","html","change","city","stopPropagation","preventDefault","ipts","val","singleDatePicker","showDropdowns","timePicker","minDate","maxDate","locale","applyLabel","cancelLabel","daysOfWeek","monthNames","firstDay","start","end","click","doAction","checkPass","selectRow","rows","j","val1","jqob1","has","txt","cell","parent","attrname","cells","invalidate","str","userGridData","forEach","user","domainPath","customerName","domainListDic","selectDomain","gatewayDomainPath","rootModelDic","selectModel","growl","visible","parentDom","domainSelect","warning"],"mappings":"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","file":"js/directives/cmdb-dom.js","sourcesContent":["define(['directives/directives', 'datatables.net', 'datatables.net-bs', 'bootstrap-daterangepicker'], function (directives, datatables, daterangepicker) {\n  'use strict';\n\n  directives.initDirective('cmdbTable', ['$timeout', '$compile', '$filter', function ($timeout, $compile, $filter) {\n    return {\n      restrict: 'A',\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        var domMain = $element;\n        var table;\n        var isEditing = false;\n        var itemAttrs;\n        $scope.$on(Event.CMDBINFOSINIT, function (event, args) {\n          if (table) {\n            table.destroy();\n          }\n\n          isEditing = false;\n          itemAttrs = args.option[1];\n          table = domMain.DataTable({\n            order: [[0, \"desc\"]],\n            dom: '<\"row\"<\"col-sm-6\"<\"special-btn\">><\"col-sm-6\"f>><\"row\"<\"clo-sm-12\">>t<\"row\"<\"col-sm-2\"i><\"col-sm-2\"l><\"col-sm-8\"p>>',\n            language: directives.datatable.language,\n            data: args.option[0],\n            columns: [{\n              data: \"createTime\",\n              title: \"上线时间\"\n            }, {\n              data: \"externalDevId\",\n              title: \"设备地址\"\n            }, {\n              data: \"label\",\n              title: \"名称\"\n            }, {\n              data: \"onlineStatus\",\n              title: \"在线状态\"\n            }, {\n              data: \"health\",\n              title: \"健康度\"\n            }, {\n              data: \"option\",\n              orderable: false,\n              title: \"操作\"\n            }],\n            columnDefs: [{\n              targets: 0,\n              data: \"createTime\",\n              render: function render(data, type, full) {\n                // 返回自定义内容\t\t\n                var str = $filter('date')(data, 'yyyy-MM-dd HH:mm:ss'); //                var str = \"<date-label value=\" + data + \" format='yyyy-MM-dd HH:mm:ss'>\";\n\n                return str;\n              }\n            }, {\n              targets: 2,\n              data: \"label\",\n              render: function render(data, type, full) {\n                // 返回自定义内容    \n                if (full.isEdit == 2 && type == \"display\") return \"<input maxlength='20' style='width:100%' class='form-control input-sm' type='text' value='\" + escape(data) + \"'>\";else return escape(data);\n              }\n            }, {\n              targets: 3,\n              data: \"onlineStatus\",\n              render: function render(data, type, full) {\n                // 返回自定义内容\t\t\n                return \"<span class='label \" + (data == 'online' ? \"label-primary\" : \"label-warning\") + \"'>\" + (data == 'online' ? \"在线\" : \"离线\") + \"</span>\";\n              }\n            }, {\n              targets: 4,\n              data: \"health\",\n              render: function render(data, type, full) {\n                // 返回自定义内容\t\t\n                return \"<div class='progress progress-xs progress-striped active'><div class='progress-bar \" + (data > 90 ? \"progress-bar-success\" : data > 79 ? \"progress-bar-warning\" : data > 59 ? \"progress-bar-minor\" : data > 39 ? \"progress-bar-major\" : \"progress-bar-red\") + \"' style='width:\" + data + \"%'></div></div>\";\n              }\n            }, {\n              targets: 5,\n              data: \"option\",\n              render: function render(data, type, full) {\n                // 返回自定义内容\t\t\n                var str = \"\";\n\n                if (full.isEdit == 2) {\n                  str = '<div class=\"btn-group  btn-group-sm\">' + '<a id=\"save-btn\" class=\"btn btn-default\" ><i class=\"fa fa-check  hidden-lg hidden-md hidden-sm\"></i><span class=\"hidden-xs ng-binding\">保存</span></a>' + '<a id=\"cancel-btn\" class=\"btn btn-default\" ><i class=\"fa fa-close hidden-lg hidden-md hidden-sm\"></i><span class=\"hidden-xs ng-binding\">取消</span></a></div>';\n                } else {\n                  str = \"<div class='btn-group  table-option-group btn-group-sm'>\" + \"<button type='button' class='btn btn-default'>操作</button>\" + \"<button type='button' class='btn btn-default dropdown-toggle' data-toggle='dropdown'>\" + \"<span class='caret'></span>\" + \"<span class='sr-only'>Toggle Dropdown</span>\" + \"</button>\" + \"<ul class='dropdown-menu' role='menu'>\" + \"<li><a href='#/configAlert/\" + full.id + \"/node'>告警</a></li>\" + //\"<li><a href='#/emcsView/\" + full.viewId + \"/\" + full.id + \"'>性能</a></li>\" +\n                  \"<li><a href='#/emcsView/\" + full.id + \"'>性能</a></li>\" + // \"<li><a href='#/timeline/\" + full.id + \"'>大事件</a></li>\" +\n                  \"<li><a href='#/directiveview/\" + full.data.modelId + \"/\" + full.id + \"'>发送指令</a></li>\" + // \"<li><a href='#/force/\" + full.id + \"'>关系图</a></li>\" +\n                  \"<li><a href id='export-btn'>导出模板</a></li>\" + \"<li><a href id='edit-btn'>编辑</a></li>\" + \"</ul>\" + \"</div>\";\n                }\n\n                return str;\n              }\n            }],\n            rowCallback: function rowCallback(nRow, aData, iDataIndex) {\n              if (aData.selected) {\n                nRow.className = \"success\";\n              }\n\n              $compile(nRow)($scope);\n            }\n          });\n        });\n        /* Formatting function for row details - modify as you need */\n\n        function format(d) {\n          // `d` is the original data object for the row\n          var returnStr;\n\n          if (d.isEdit > 0) {\n            returnStr = '<table width=\"100%\" class=\"table table-inner\">';\n\n            for (var i in itemAttrs) {\n              var attr = itemAttrs[i];\n              returnStr += '<tr role=\"row\">' + '<td class=\"col-xs-3\">' + attr.label + ':</td>';\n\n              if (attr.dataType == \"numberic\") {\n                returnStr += '<td><input datatype=\"' + attr.dataType + '\" class=\"form-control input-sm\" type=\"number\" name=\"' + attr.name + '\" value=\"' + (d.values.hasOwnProperty(attr.name) ? d.values[attr.name] : '') + '\"></td>';\n              } else if (attr.dataType == \"icon\") {\n                var addsIcon = \"\";\n\n                if (d.values.hasOwnProperty(attr.name)) {\n                  addsIcon = d.values[attr.name];\n                }\n\n                returnStr += '<td><div name=\"' + attr.name + '\" datatype=\"' + attr.dataType + '\" class=\"col-sm-12 no-padding iconSelect\">' + '<select class=\"combobox form-control input-sm iconShow\">' + '<option value=\"\">请选择...</option>';\n\n                for (var i in $scope.iconList) {\n                  if ($scope.iconList[i].icon == addsIcon) {\n                    returnStr += '<option selected=\"true\" value=\"' + $scope.iconList[i].icon + '\">' + $scope.iconList[i].title + '</option>';\n                  } else {\n                    returnStr += '<option value=\"' + $scope.iconList[i].icon + '\">' + $scope.iconList[i].title + '</option>';\n                  }\n                }\n\n                returnStr += '</select>';\n                returnStr += '</div></td>';\n              } else if (attr.dataType == \"standardAddress\") {\n                var adds = [];\n\n                if (d.values.hasOwnProperty(attr.name)) {\n                  adds = d.values[attr.name].split(\",\");\n                }\n\n                returnStr += '<td><div name=\"' + attr.name + '\" datatype=\"' + attr.dataType + '\" class=\"col-sm-12 no-padding selectList\">' + '<select class=\"combobox form-control input-sm province\">' + '<option value=\"\">请选择...</option>';\n\n                for (var i in $scope.provinces) {\n                  if (adds.length > 0 && $scope.provinces[i].label == adds[0]) {\n                    $scope.citys = $scope.provinces[i].children;\n                    returnStr += '<option selected=\"true\" value=\"' + $scope.provinces[i].id + '\">' + $scope.provinces[i].label + '</option>';\n                  } else {\n                    returnStr += '<option value=\"' + $scope.provinces[i].id + '\">' + $scope.provinces[i].label + '</option>';\n                  }\n                }\n\n                returnStr += '</select>';\n                returnStr += '<select class=\"combobox form-control input-sm city ' + (adds.length > 1 ? '' : 'ng-hide') + '\">' + '<option value=\"\">请选择...</option>';\n\n                for (var i in $scope.citys) {\n                  if (adds.length > 1 && $scope.citys[i].label == adds[1]) {\n                    $scope.districts = $scope.citys[i].children;\n                    returnStr += '<option selected=\"true\" value=\"' + $scope.citys[i].id + '\">' + $scope.citys[i].label + '</option>';\n                  } else {\n                    returnStr += '<option value=\"' + $scope.citys[i].id + '\">' + $scope.citys[i].label + '</option>';\n                  }\n                }\n\n                returnStr += '</select>';\n                returnStr += '<select class=\"combobox form-control input-sm district ' + (adds.length > 2 ? '' : 'ng-hide') + '\">' + '<option value=\"\">请选择...</option>';\n\n                for (var i in $scope.districts) {\n                  if (adds.length == 3 && $scope.districts[i].label == adds[2]) {\n                    returnStr += '<option selected=\"true\" value=\"' + $scope.districts[i].id + '\">' + $scope.districts[i].label + '</option>';\n                  } else {\n                    returnStr += '<option value=\"' + $scope.districts[i].id + '\">' + $scope.districts[i].label + '</option>';\n                  }\n                }\n\n                returnStr += '</select>';\n                returnStr += '</div></td>';\n              } else if (attr.dataType == \"datetime\") {\n                returnStr += '<td><input datatype=\"' + attr.dataType + '\" class=\"form-control input-sm\" type=\"text\" name=\"' + attr.name + '\" value=\"' + (d.values.hasOwnProperty(attr.name) ? $filter('date')(d.values[attr.name], 'yyyy-MM-dd HH:mm:ss') : '') + '\"></td>';\n              } else if (attr.dataType == \"date\") {\n                returnStr += '<td><input datatype=\"' + attr.dataType + '\" class=\"form-control input-sm\" type=\"text\" name=\"' + attr.name + '\" value=\"' + (d.values.hasOwnProperty(attr.name) ? $filter('date')(d.values[attr.name], 'yyyy-MM-dd') : '') + '\"></td>';\n              } else {\n                returnStr += '<td><input datatype=\"' + attr.dataType + '\" class=\"form-control input-sm\" type=\"text\" name=\"' + attr.name + '\" value=\"' + (d.values.hasOwnProperty(attr.name) ? d.values[attr.name] : '') + '\"></td>';\n              }\n\n              returnStr += '</tr>';\n            }\n\n            returnStr += '<tr>' + '<td><div class=\"btn-group btn-group-sm\">' + '<a id=\"save-btn\" class=\"btn btn-default\"><i class=\"fa fa-check  hidden-lg hidden-md hidden-sm\"></i><span class=\"hidden-xs ng-binding\">保存</span></a>' + '<a id=\"cancel-btn\" class=\"btn btn-default\"><i class=\"fa fa-close hidden-lg hidden-md hidden-sm\"></i><span class=\"hidden-xs ng-binding\">取消</span></a></div></td>' + '</tr>' + '</table>';\n          } else {\n            returnStr = '<table width=\"100%\" class=\"table table-inner\">';\n\n            for (var i in itemAttrs) {\n              var attr = itemAttrs[i];\n              returnStr += '<tr role=\"row\">' + '<td class=\"col-xs-3\">' + attr.label + ':</td>';\n\n              if (attr.dataType == \"datetime\") {\n                returnStr += '<td>' + (d.values.hasOwnProperty(attr.name) ? $filter('date')(d.values[attr.name], 'yyyy-MM-dd hh:mm:ss') : '') + '</td>';\n              } else if (attr.dataType == \"date\") {\n                returnStr += '<td>' + (d.values.hasOwnProperty(attr.name) ? $filter('date')(d.values[attr.name], 'yyyy-MM-dd') : '') + '</td>';\n              } else {\n                returnStr += '<td>' + (d.values.hasOwnProperty(attr.name) ? d.values[attr.name] : '') + '</td>';\n              }\n\n              returnStr += '</tr>';\n            }\n\n            returnStr += '</table>';\n          }\n\n          return returnStr;\n        }\n\n        domMain.on('click', 'td', function (e) {\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          var rowData = row.data();\n\n          if (rowData) {\n            if ($(this).context.cellIndex == 5 && row.data().isEdit == 0) {\n              return;\n            }\n\n            if (row.child.isShown()) {\n              // This row is already open - close it\n              if (row.data().isEdit == 0) {\n                row.child.hide();\n                tr.removeClass('shown');\n              } else if (row.data().isEdit == 2 || row.data().isEdit == 3) {\n                row.child(format(row.data())).show();\n                tr.addClass('shown');\n              }\n            } else {\n              // Open this row\n              row.child(format(row.data())).show();\n              tr.addClass('shown');\n            }\n\n            if (row.data().isEdit == 2) {\n              $(\".selectList\").each(function () {\n                var temp_html;\n                var oProvince = $(this).find(\".province\");\n                var oCity = $(this).find(\".city\");\n                var oDistrict = $(this).find(\".district\"); //赋值市\n\n                var city = function city() {\n                  temp_html = '<option value=\"\">请选择...</option>';\n                  var n = oProvince.get(0).selectedIndex;\n\n                  if (n == 0) {\n                    oCity.addClass(\"ng-hide\");\n                  } else {\n                    $scope.citys = $scope.provinces[n - 1].children;\n                    oCity.removeClass(\"ng-hide\");\n                    $.each($scope.citys, function (i, city) {\n                      temp_html += \"<option value='\" + city.id + \"'>\" + city.label + \"</option>\";\n                    });\n                    oCity.html(temp_html);\n                    district();\n                  }\n                }; //赋值县\n\n\n                var district = function district() {\n                  temp_html = '<option value=\"\">请选择...</option>';\n                  var n = oCity.get(0).selectedIndex;\n\n                  if (n == 0) {\n                    oDistrict.addClass(\"ng-hide\");\n                  } else {\n                    $scope.districts = $scope.citys[n - 1].children;\n                    oDistrict.removeClass(\"ng-hide\");\n                    $.each($scope.districts, function (i, district) {\n                      temp_html += \"<option value='\" + district.id + \"'>\" + district.label + \"</option>\";\n                    });\n                    oDistrict.html(temp_html);\n                  }\n\n                  ;\n                }; //选择省改变市\n\n\n                oProvince.change(function () {\n                  city();\n                }); //选择市改变县\n\n                oCity.change(function () {\n                  district();\n                });\n              });\n            }\n          } else {\n            e.stopPropagation();\n            e.preventDefault();\n            var ipts = $(this).find('input');\n            $.each(ipts, function (i, val) {\n              if ($(val).attr(\"datatype\") == 'datetime') {\n                $(val).daterangepicker({\n                  singleDatePicker: true,\n                  showDropdowns: true,\n                  timePicker: true,\n                  minDate: '2000-01-01 00:00:00',\n                  maxDate: '2025-12-31 23:59:59',\n                  locale: {\n                    format: \"YYYY-MM-DD HH:mm:ss\",\n                    applyLabel: \"确定\",\n                    cancelLabel: \"取消\",\n                    daysOfWeek: [\"日\", \"一\", \"二\", \"三\", \"四\", \"五\", \"六\"],\n                    monthNames: [\"一月\", \"二月\", \"三月\", \"四月\", \"五月\", \"六月\", \"七月\", \"八月\", \"九月\", \"十月\", \"十一月\", \"十二月\"],\n                    firstDay: 1\n                  }\n                }, function (start, end, label) {});\n                $(val).attr(\"datatype\", \"\");\n                $(val).click();\n              } else if ($(val).attr(\"datatype\") == 'date') {\n                $(val).daterangepicker({\n                  singleDatePicker: true,\n                  showDropdowns: true,\n                  timePicker: false,\n                  minDate: '2000-01-01',\n                  maxDate: '2025-12-31',\n                  locale: {\n                    format: \"YYYY-MM-DD\",\n                    applyLabel: \"确定\",\n                    cancelLabel: \"取消\",\n                    daysOfWeek: [\"日\", \"一\", \"二\", \"三\", \"四\", \"五\", \"六\"],\n                    monthNames: [\"一月\", \"二月\", \"三月\", \"四月\", \"五月\", \"六月\", \"七月\", \"八月\", \"九月\", \"十月\", \"十一月\", \"十二月\"],\n                    firstDay: 1\n                  }\n                }, function (start, end, label) {});\n                $(val).attr(\"datatype\", \"\");\n                $(val).click();\n              }\n            });\n          }\n        });\n        domMain.on('click', '#export-btn', function (e) {\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          $scope.doAction('export', row.data());\n        });\n        domMain.on('click', '#save-btn', function (e) {\n          e.stopPropagation();\n          var tr = $(this).closest('tr');\n          var checkPass = true;\n          var selectRow = null;\n\n          for (var i in table.rows('.shown').data()) {\n            if (table.rows('.shown').data()[i].isEdit == 2) selectRow = table.rows('.shown').data()[i];\n          }\n\n          $.each($('.shown').children(), function (j, val1) {\n            var jqob1 = $(val1); //把input变为字符串\n\n            if (!jqob1.has('button').length && jqob1.has('input').length) {\n              var txt = jqob1.children(\"input\").val();\n\n              if (txt) {\n                $(val1).removeClass('danger'); //\t\t\t\t\t\t\t\t\tjqob1.html(txt);\n\n                table.cell(jqob1).data(txt); //修改DataTables对象的数据\n              } else {\n                if (j == 1 || j == 2) {\n                  $(val1).addClass('danger');\n                  checkPass = false;\n                  return false;\n                }\n              }\n            }\n          });\n          var ipts = tr.parent().find('input');\n          $.each(ipts, function (i, val) {\n            var txt = $(val).val();\n            var attrname = $(val).attr('name');\n            selectRow.values[attrname] = txt;\n          });\n          $(\".iconSelect\").each(function () {\n            var iconList = $(this).find(\".iconShow\");\n            var id = $(iconList).val();\n            var attrname = $(this).attr('name');\n            selectRow.values[attrname] = id;\n          });\n          $(\".selectList\").each(function () {\n            var oProvince = $(this).find(\".province\");\n            var oCity = $(this).find(\".city\");\n            var oDistrict = $(this).find(\".district\");\n            var id = $(oDistrict).val();\n\n            if (!id) {\n              id = $(oCity).val();\n            }\n\n            if (!id) {\n              id = $(oProvince).val();\n            }\n\n            var attrname = $(this).attr('name');\n            selectRow.values[attrname] = id;\n          });\n\n          if (checkPass) {\n            selectRow.isEdit = 0;\n            $scope.doAction('save', selectRow);\n          }\n        });\n        domMain.on('click', '#cancel-btn', function (e) {\n          e.stopPropagation();\n          isEditing = false;\n          var row = table.row('.shown');\n\n          if (row) {\n            row.data().isEdit = 0;\n            row.child.hide();\n            row.cells().invalidate();\n          }\n        });\n        domMain.on('click', '#edit-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n\n          if (!isEditing) {\n            isEditing = true;\n            row.data().isEdit = 2;\n            row.cells().invalidate();\n          } else {\n            if (row.data().isEdit == 0) $scope.doAction('eidterror');\n          }\n        });\n        domMain.on('click', '#del-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          $scope.doAction('delete', row.data());\n        });\n        domMain.on('click', '#change-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          $scope.doAction('change', row.data());\n        });\n        domMain.on('click', '#dir-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          $scope.doAction('directive', row.data());\n        });\n      }]\n    };\n  }]);\n  directives.initDirective('shadowsTable', ['$timeout', '$compile', '$filter', function ($timeout, $compile, $filter) {\n    return {\n      restrict: 'A',\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        var domMain = $element;\n        var table;\n        var isEditing = false;\n        var itemAttrs;\n        $scope.$on(Event.CMDBINFOSINIT + \"_shadows\", function (event, args) {\n          if (table) {\n            table.destroy();\n          }\n\n          isEditing = false;\n          table = domMain.DataTable({\n            order: [[0, \"desc\"]],\n            dom: '<\"row\"<\"clo-sm-12\">>t<\"row\"<\"col-sm-2\"i><\"col-sm-2\"l><\"col-sm-8\"p>>',\n            language: directives.datatable.language,\n            data: args.option,\n            columns: [{\n              data: \"physicalDeviceDomain\",\n              title: \"客户名称\"\n            }, {\n              data: \"label\",\n              title: \"设备名称\"\n            }, {\n              data: \"externalDevId\",\n              title: \"设备地址\"\n            }, {\n              data: \"createTime\",\n              title: \"上线时间\"\n            }, {\n              data: \"onlineStatus\",\n              title: \"在线状态\"\n            }, {\n              data: \"modelId\",\n              title: \"设备模板\"\n            }, {\n              data: \"domainPath\",\n              title: \"所属域\"\n            }, {\n              data: \"health\",\n              title: \"健康度\"\n            }, {\n              data: \"option\",\n              orderable: false,\n              title: \"操作\"\n            }],\n            columnDefs: [{\n              targets: 3,\n              data: \"createTime\",\n              render: function render(data, type, full) {\n                // 返回自定义内容    \n                var str = \"<date-label value=\" + data + \" format='yyyy-MM-dd HH:mm:ss'>\";\n                return str;\n              }\n            }, {\n              targets: 4,\n              data: \"onlineStatus\",\n              render: function render(data, type, full) {\n                // 返回自定义内容    \n                return \"<span class='label \" + (data == 'online' ? \"label-primary\" : \"label-warning\") + \"'>\" + (data == 'online' ? \"在线\" : \"离线\") + \"</span>\";\n              }\n            }, {\n              targets: 7,\n              data: \"health\",\n              render: function render(data, type, full) {\n                // 返回自定义内容    \n                return \"<div class='progress progress-xs progress-striped active'><div class='progress-bar \" + (data > 90 ? \"progress-bar-success\" : data > 79 ? \"progress-bar-warning\" : data > 59 ? \"progress-bar-minor\" : data > 39 ? \"progress-bar-major\" : \"progress-bar-red\") + \"' style='width:\" + data + \"%'></div></div>\";\n              }\n            }, {\n              targets: 0,\n              data: \"physicalDeviceDomain\",\n              render: function render(data, type, full) {\n                var str = \"\";\n                $scope.userGridData.forEach(function (user) {\n                  if (user.domainPath == data) {\n                    str = user.customerName;\n                  }\n                });\n                return str;\n              }\n            }, {\n              targets: 6,\n              data: \"domainPath\",\n              render: function render(data, type, full) {\n                var str = \"\";\n\n                if (full.isEdit == 2 && type == \"display\") {\n                  if (data != null && data != \"\" && $scope.domainListDic) {\n                    var selectDomain = $scope.domainListDic[data].name;\n                    if (selectDomain) str += '<input name=\"domainPath\" domain-Picker class=\"form-control domainClass\" type=\"text\" value=\"' + selectDomain + '\" gatewayDomainPath=\"' + full.gatewayDomainPath + '\" domainPath=\"' + data + '\" model=\"\">';\n                  }\n\n                  if (!str) {\n                    str += \"<input  name='domainPath'  domain-Picker class='form-control domainClass' type='text' gatewayDomainPath='\" + full.gatewayDomainPath + \"' domainPath='' value='请选择...'>\";\n                  }\n                } else {\n                  str += $scope.domainListDic[data].name;\n                }\n\n                return str;\n              }\n            }, {\n              targets: 5,\n              data: \"modelId\",\n              render: function render(data, type, full) {\n                var str = \"\";\n\n                if (full.isEdit == 2 && type == \"display\") {\n                  if (data != null && data != \"\" && $scope.rootModelDic) {\n                    var selectModel = $scope.rootModelDic[data];\n                    if (selectModel) str += '<input name=\"modelId\" model-Picker class=\"form-control domainClass\" type=\"text\" value=\"' + selectModel.label + '\" modelId=\"' + data + '\" model=\"\">';\n                  }\n\n                  if (!str) {\n                    str += \"<input  name='modelId'  model-Picker class='form-control domainClass' type='text' modelId='' value='请选择...'>\";\n                  }\n                } else {\n                  if ($scope.rootModelDic && $scope.rootModelDic[data]) str += $scope.rootModelDic[data].name;else str += \"无法识别模型\";\n                }\n\n                return str;\n              }\n            }, {\n              targets: 8,\n              data: \"option\",\n              render: function render(data, type, full) {\n                // 返回自定义内容    \n                return \"<div class='btn-group table-option-group'>\" + \"<button type='button' class='btn btn-default btn-sm'>操作</button>\" + \"<button type='button' class='btn btn-default btn-sm dropdown-toggle' data-toggle='dropdown'>\" + \"<span class='caret'></span>\" + \"<span class='sr-only'>Toggle Dropdown</span>\" + \"</button>\" + \"<ul class='dropdown-menu' role='menu'>\" + \"<li><a href='#/configAlert/\" + full.id + \"/node'>告警</a></li>\" + //\"<li><a href='#/emcsView/\" + full.viewId + \"/\" + full.id + \"'>性能</a></li>\" +\n                \"<li><a href='#/emcsView/\" + full.id + \"'>性能</a></li>\" + // \"<li><a href='#/timeline/\" + full.id + \"'>大事件</a></li>\" +\n                \"</ul>\" + \"</div>\";\n              }\n            }],\n            rowCallback: function rowCallback(nRow, aData, iDataIndex) {\n              if (aData.selected) {\n                nRow.className = \"success\";\n              }\n\n              $compile(nRow)($scope);\n            }\n          });\n        });\n        /* Formatting function for row details - modify as you need */\n\n        function format(d) {\n          // `d` is the original data object for the row\n          var returnStr;\n\n          if (d.isEdit > 0) {\n            returnStr = '<table width=\"100%\" class=\"table table-inner\">';\n\n            for (var i in itemAttrs) {\n              var attr = itemAttrs[i];\n              returnStr += '<tr role=\"row\">' + '<td>' + attr.label + ':</td>';\n\n              if (attr.dataType == \"numberic\") {\n                returnStr += '<td><input datatype=\"' + attr.dataType + '\" class=\"form-control input-sm\" type=\"number\" name=\"' + attr.name + '\" value=\"' + (d.values.hasOwnProperty(attr.name) ? d.values[attr.name] : '') + '\"></td>';\n              } else if (attr.dataType == \"icon\") {\n                var addsIcon = \"\";\n\n                if (d.values.hasOwnProperty(attr.name)) {\n                  addsIcon = d.values[attr.name];\n                }\n\n                returnStr += '<td><div name=\"' + attr.name + '\" datatype=\"' + attr.dataType + '\" class=\"col-sm-12 no-padding iconSelect\">' + '<select class=\"combobox form-control input-sm iconShow\">' + '<option value=\"\">请选择...</option>';\n\n                for (var i in $scope.iconList) {\n                  if ($scope.iconList[i].icon == addsIcon) {\n                    returnStr += '<option selected=\"true\" value=\"' + $scope.iconList[i].icon + '\">' + $scope.iconList[i].title + '</option>';\n                  } else {\n                    returnStr += '<option value=\"' + $scope.iconList[i].icon + '\">' + $scope.iconList[i].title + '</option>';\n                  }\n                }\n\n                returnStr += '</select>';\n                returnStr += '</div></td>';\n              } else if (attr.dataType == \"standardAddress\") {\n                var adds = [];\n\n                if (d.values.hasOwnProperty(attr.name)) {\n                  adds = d.values[attr.name].split(\",\");\n                }\n\n                returnStr += '<td><div name=\"' + attr.name + '\" datatype=\"' + attr.dataType + '\" class=\"col-sm-12 no-padding selectList\">' + '<select class=\"combobox form-control input-sm province\">' + '<option value=\"\">请选择...</option>';\n\n                for (var i in $scope.provinces) {\n                  if (adds.length > 0 && $scope.provinces[i].label == adds[0]) {\n                    $scope.citys = $scope.provinces[i].children;\n                    returnStr += '<option selected=\"true\" value=\"' + $scope.provinces[i].id + '\">' + $scope.provinces[i].label + '</option>';\n                  } else {\n                    returnStr += '<option value=\"' + $scope.provinces[i].id + '\">' + $scope.provinces[i].label + '</option>';\n                  }\n                }\n\n                returnStr += '</select>';\n                returnStr += '<select class=\"combobox form-control input-sm city ' + (adds.length > 1 ? '' : 'ng-hide') + '\">' + '<option value=\"\">请选择...</option>';\n\n                for (var i in $scope.citys) {\n                  if (adds.length > 1 && $scope.citys[i].label == adds[1]) {\n                    $scope.districts = $scope.citys[i].children;\n                    returnStr += '<option selected=\"true\" value=\"' + $scope.citys[i].id + '\">' + $scope.citys[i].label + '</option>';\n                  } else {\n                    returnStr += '<option value=\"' + $scope.citys[i].id + '\">' + $scope.citys[i].label + '</option>';\n                  }\n                }\n\n                returnStr += '</select>';\n                returnStr += '<select class=\"combobox form-control input-sm district ' + (adds.length > 2 ? '' : 'ng-hide') + '\">' + '<option value=\"\">请选择...</option>';\n\n                for (var i in $scope.districts) {\n                  if (adds.length == 3 && $scope.districts[i].label == adds[2]) {\n                    returnStr += '<option selected=\"true\" value=\"' + $scope.districts[i].id + '\">' + $scope.districts[i].label + '</option>';\n                  } else {\n                    returnStr += '<option value=\"' + $scope.districts[i].id + '\">' + $scope.districts[i].label + '</option>';\n                  }\n                }\n\n                returnStr += '</select>';\n                returnStr += '</div></td>';\n              } else if (attr.dataType == \"datetime\") {\n                returnStr += '<td><input datatype=\"' + attr.dataType + '\" class=\"form-control input-sm\" type=\"text\" name=\"' + attr.name + '\" value=\"' + (d.values.hasOwnProperty(attr.name) ? $filter('date')(d.values[attr.name], 'yyyy-MM-dd HH:mm:ss') : '') + '\"></td>';\n              } else if (attr.dataType == \"date\") {\n                returnStr += '<td><input datatype=\"' + attr.dataType + '\" class=\"form-control input-sm\" type=\"text\" name=\"' + attr.name + '\" value=\"' + (d.values.hasOwnProperty(attr.name) ? $filter('date')(d.values[attr.name], 'yyyy-MM-dd') : '') + '\"></td>';\n              } else {\n                returnStr += '<td><input datatype=\"' + attr.dataType + '\" class=\"form-control input-sm\" type=\"text\" name=\"' + attr.name + '\" value=\"' + (d.values.hasOwnProperty(attr.name) ? d.values[attr.name] : '') + '\"></td>';\n              }\n\n              returnStr += '</tr>';\n            }\n\n            returnStr += '<tr>' + '<td><div class=\"btn-group btn-group-sm\">' + '<a id=\"save-btn\" class=\"btn btn-default\"><i class=\"fa fa-check  hidden-lg hidden-md hidden-sm \"></i><span class=\"hidden-xs ng-binding\">保存</span></a>' + '<a id=\"cancel-btn\" class=\"btn btn-default\" ><i class=\"fa fa-close hidden-lg hidden-md hidden-sm\"></i><span class=\"hidden-xs ng-binding\">取消</span></a></div></td>' + '</tr>' + '</table>';\n          } else {\n            returnStr = '<table width=\"100%\" class=\"table table-inner\">';\n\n            for (var i in itemAttrs) {\n              var attr = itemAttrs[i];\n              returnStr += '<tr role=\"row\">' + '<td>' + attr.label + ':</td>';\n\n              if (attr.dataType == \"datetime\") {\n                returnStr += '<td>' + (d.values.hasOwnProperty(attr.name) ? $filter('date')(d.values[attr.name], 'yyyy-MM-dd hh:mm:ss') : '') + '</td>';\n              } else if (attr.dataType == \"date\") {\n                returnStr += '<td>' + (d.values.hasOwnProperty(attr.name) ? $filter('date')(d.values[attr.name], 'yyyy-MM-dd') : '') + '</td>';\n              } else {\n                returnStr += '<td>' + (d.values.hasOwnProperty(attr.name) ? d.values[attr.name] : '') + '</td>';\n              }\n\n              returnStr += '</tr>';\n            }\n\n            returnStr += '</table>';\n          }\n\n          return returnStr;\n        }\n\n        domMain.on('click', 'td', function (e) {});\n        domMain.on('click', '#save-btn', function (e) {\n          e.stopPropagation();\n          var tr = $(this).closest('tr');\n          var checkPass = true;\n          var selectRow = null;\n\n          for (var i in table.rows('.shown').data()) {\n            if (table.rows('.shown').data()[i].isEdit == 2) selectRow = table.rows('.shown').data()[i];\n          }\n\n          $.each($('.shown').children(), function (j, val1) {\n            var jqob1 = $(val1); //把input变为字符串\n\n            if (!jqob1.has('button').length && jqob1.has('input').length) {\n              var txt = jqob1.children(\"input\").val();\n\n              if (txt) {\n                $(val1).removeClass('danger'); //                  jqob1.html(txt);\n\n                table.cell(jqob1).data(txt); //修改DataTables对象的数据\n              } else {\n                if (j == 1) {\n                  $(val1).addClass('danger');\n                  checkPass = false;\n                  return false;\n                }\n              }\n            }\n          });\n          var ipts = tr.parent().find('input');\n          $.each(ipts, function (i, val) {\n            var txt = $(val).val();\n            var attrname = $(val).attr('name');\n            selectRow.values[attrname] = txt;\n          });\n          $(\".iconSelect\").each(function () {\n            var iconList = $(this).find(\".iconShow\");\n            var id = $(iconList).val();\n            var attrname = $(this).attr('name');\n            selectRow.values[attrname] = id;\n          });\n          $(\".selectList\").each(function () {\n            var oProvince = $(this).find(\".province\");\n            var oCity = $(this).find(\".city\");\n            var oDistrict = $(this).find(\".district\");\n            var id = $(oDistrict).val();\n\n            if (!id) {\n              id = $(oCity).val();\n            }\n\n            if (!id) {\n              id = $(oProvince).val();\n            }\n\n            var attrname = $(this).attr('name');\n            selectRow.values[attrname] = id;\n          });\n\n          if (checkPass) {\n            selectRow.isEdit = 0;\n            $scope.doAction('save', selectRow);\n          }\n        });\n        domMain.on('click', '#cancel-btn', function (e) {\n          e.stopPropagation();\n          isEditing = false;\n          var row = table.row('.shown');\n\n          if (row) {\n            row.data().isEdit = 0;\n            row.child.hide();\n            row.cells().invalidate();\n          }\n        });\n        domMain.on('click', '#edit-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n\n          if (!isEditing) {\n            isEditing = true;\n            row.data().isEdit = 1;\n          } else {\n            if (row.data().isEdit == 0) $scope.doAction('eidterror');\n          }\n        });\n        domMain.on('click', '#del-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          $scope.doAction('delete', row.data());\n        });\n        domMain.on('click', '#change-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          $scope.doAction('change', row.data());\n        });\n        domMain.on('click', '#dir-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          $scope.doAction('directive', row.data());\n        });\n      }]\n    };\n  }]);\n  directives.initDirective('cmdbGroupTable', ['$timeout', '$compile', '$filter', function ($timeout, $compile, $filter, growl) {\n    return {\n      restrict: 'A',\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        var domMain = $element;\n        var table;\n        var isEditing = false;\n        var itemAttrs;\n        $scope.$on(Event.CMDBINFOSINIT, function (event, args) {\n          if (table) {\n            table.destroy();\n          }\n\n          isEditing = false;\n          itemAttrs = args.option[1];\n          table = domMain.DataTable({\n            dom: '<\"row\"<\"col-sm-6\"<\"special-btn\">><\"col-sm-6\"f>><\"row\"<\"clo-sm-12\">>t<\"row\"<\"col-sm-2\"i><\"col-sm-2\"l><\"col-sm-8\"p>>',\n            language: directives.datatable.language,\n            data: args.option[0],\n            order: [[4, \"asc\"]],\n            columns: [{\n              data: \"label\",\n              title: \"名称\"\n            }, {\n              data: \"onlineStatus\",\n              title: \"在线状态\"\n            }, {\n              data: \"health\",\n              title: \"健康度\"\n            }, {\n              data: \"domainPath\",\n              title: \"资源域\"\n            }, {\n              data: \"id\",\n              title: \"编码\",\n              visible: true\n            }, {\n              data: \"option\",\n              orderable: false,\n              title: \"操作\"\n            }],\n            columnDefs: [{\n              targets: 0,\n              data: \"label\",\n              render: function render(data, type, full) {\n                // 返回自定义内容    \n                if (full.isEdit == 2 && type == \"display\") return \"<input maxlength='20' style='width:100%' class='form-control input-sm' type='text' value='\" + escape(data) + \"'>\";else return escape(data);\n              }\n            }, {\n              targets: 1,\n              data: \"onlineStatus\",\n              render: function render(data, type, full) {\n                // 返回自定义内容    \n                return \"<span class='label \" + (data == 'online' ? \"label-primary\" : \"label-warning\") + \"'>\" + (data == 'online' ? \"在线\" : \"离线\") + \"</span>\";\n              }\n            }, {\n              targets: 2,\n              data: \"health\",\n              render: function render(data, type, full) {\n                // 返回自定义内容    \n                return \"<div class='progress progress-xs progress-striped active'><div class='progress-bar \" + (data > 90 ? \"progress-bar-success\" : data > 79 ? \"progress-bar-warning\" : data > 59 ? \"progress-bar-minor\" : data > 39 ? \"progress-bar-major\" : \"progress-bar-red\") + \"' style='width:\" + data + \"%'></div></div>\";\n              }\n            }, {\n              \"targets\": 3,\n              \"data\": \"domainPath\",\n              \"render\": function render(data, type, full) {\n                var str = \"\";\n                var selectDomain = $scope.domainListDic[data].name;\n\n                if (full.isEdit == 2 && type == \"display\") {\n                  str += \"<input name='domainPath' domain-Picker class='form-control input-sm' type='text' value='\" + selectDomain + \"' domainPath='\" + data + \"'>\";\n\n                  if (!str) {\n                    str += \"<input name='domainPath'  domain-Picker class='form-control input-sm' type='text' domainPath='' value='请选择...'>\";\n                  }\n                } else {\n                  str += selectDomain;\n                }\n\n                return str;\n              }\n            }, {\n              targets: 5,\n              data: \"option\",\n              render: function render(data, type, full) {\n                // 返回自定义内容    \n                var str = \"\";\n\n                if (full.isEdit == 2) {\n                  str = '<div class=\"btn-group  btn-group-sm\">' + '<a id=\"save-btn\" class=\"btn btn-default\"><i class=\"fa fa-check  hidden-lg hidden-md hidden-sm\"></i><span class=\"hidden-xs ng-binding\">保存</span></a>' + '<a id=\"cancel-btn\" class=\"btn btn-default\" ><i class=\"fa fa-close hidden-lg hidden-md hidden-sm\"></i><span class=\"hidden-xs ng-binding\">取消</span></a></div>';\n                } else {\n                  str = \"<div class='btn-group  table-option-group btn-group-sm'>\" + \"<button type='button' class='btn btn-default'>操作</button>\" + \"<button type='button' class='btn btn-default dropdown-toggle' data-toggle='dropdown'>\" + \"<span class='caret'></span>\" + \"<span class='sr-only'>Toggle Dropdown</span>\" + \"</button>\" + \"<ul class='dropdown-menu' role='menu'>\" + \"<li><a href='#/configAlert/\" + full.id + \"/node'>告警</a></li>\" + //\"<li><a href='#/emcsView/\" + full.viewId + \"/\" + full.id + \"'>性能</a></li>\" +\n                  \"<li><a href='#/emcsView/\" + full.id + \"'>性能</a></li>\" + //                    \"<li><a href='#/timeline/\" + full.id + \"'>大事件</a></li>\" +\n                  //                    \"<li><a href='#/directiveview/\" + full.data.modelId + \"/\" + full.id + \"'>发送指令</a></li>\" +\n                  // \"<li><a href='#/force/\" + full.id + \"'>关系图</a></li>\" +\n                  //                    \"<li><a href id='export-btn'>导出模板</a></li>\" +\n                  \"<li><a href id='edit-btn'>编辑</a></li>\" + \"<li><a href id='del-btn'>删除</a></li>\" + \"</ul>\" + \"</div>\";\n                }\n\n                return str;\n              }\n            }],\n            rowCallback: function rowCallback(nRow, aData, iDataIndex) {\n              $compile(nRow)($scope);\n            }\n          });\n        });\n        /* Formatting function for row details - modify as you need */\n\n        function format(d) {\n          // `d` is the original data object for the row\n          var returnStr;\n\n          if (d.isEdit > 0) {\n            returnStr = '<table width=\"100%\" class=\"table table-inner\">';\n\n            for (var i in itemAttrs) {\n              var attr = itemAttrs[i];\n              returnStr += '<tr role=\"row\">' + '<td class=\"col-xs-3\">' + attr.label + ':</td>';\n\n              if (attr.dataType == \"numberic\") {\n                returnStr += '<td><input datatype=\"' + attr.dataType + '\" class=\"form-control input-sm\" type=\"number\" name=\"' + attr.name + '\" value=\"' + (d.values.hasOwnProperty(attr.name) ? d.values[attr.name] : '') + '\"></td>';\n              } else if (attr.dataType == \"icon\") {\n                var addsIcon = \"\";\n\n                if (d.values.hasOwnProperty(attr.name)) {\n                  addsIcon = d.values[attr.name];\n                }\n\n                returnStr += '<td><div name=\"' + attr.name + '\" datatype=\"' + attr.dataType + '\" class=\"col-sm-12 no-padding iconSelect\">' + '<select class=\"combobox form-control input-sm iconShow\">' + '<option value=\"\">请选择...</option>';\n\n                for (var i in $scope.iconList) {\n                  if ($scope.iconList[i].icon == addsIcon) {\n                    returnStr += '<option selected=\"true\" value=\"' + $scope.iconList[i].icon + '\">' + $scope.iconList[i].title + '</option>';\n                  } else {\n                    returnStr += '<option value=\"' + $scope.iconList[i].icon + '\">' + $scope.iconList[i].title + '</option>';\n                  }\n                }\n\n                returnStr += '</select>';\n                returnStr += '</div></td>';\n              } else if (attr.dataType == \"standardAddress\") {\n                var adds = [];\n\n                if (d.values.hasOwnProperty(attr.name)) {\n                  adds = d.values[attr.name].split(\",\");\n                }\n\n                returnStr += '<td><div name=\"' + attr.name + '\" datatype=\"' + attr.dataType + '\" class=\"col-sm-12 no-padding selectList\">' + '<select class=\"combobox form-control input-sm province\">' + '<option value=\"\">请选择...</option>';\n\n                for (var i in $scope.provinces) {\n                  if (adds.length > 0 && $scope.provinces[i].label == adds[0]) {\n                    $scope.citys = $scope.provinces[i].children;\n                    returnStr += '<option selected=\"true\" value=\"' + $scope.provinces[i].id + '\">' + $scope.provinces[i].label + '</option>';\n                  } else {\n                    returnStr += '<option value=\"' + $scope.provinces[i].id + '\">' + $scope.provinces[i].label + '</option>';\n                  }\n                }\n\n                returnStr += '</select>';\n                returnStr += '<select class=\"combobox form-control input-sm city ' + (adds.length > 1 ? '' : 'ng-hide') + '\">' + '<option value=\"\">请选择...</option>';\n\n                for (var i in $scope.citys) {\n                  if (adds.length > 1 && $scope.citys[i].label == adds[1]) {\n                    $scope.districts = $scope.citys[i].children;\n                    returnStr += '<option selected=\"true\" value=\"' + $scope.citys[i].id + '\">' + $scope.citys[i].label + '</option>';\n                  } else {\n                    returnStr += '<option value=\"' + $scope.citys[i].id + '\">' + $scope.citys[i].label + '</option>';\n                  }\n                }\n\n                returnStr += '</select>';\n                returnStr += '<select class=\"combobox form-control input-sm district ' + (adds.length > 2 ? '' : 'ng-hide') + '\">' + '<option value=\"\">请选择...</option>';\n\n                for (var i in $scope.districts) {\n                  if (adds.length == 3 && $scope.districts[i].label == adds[2]) {\n                    returnStr += '<option selected=\"true\" value=\"' + $scope.districts[i].id + '\">' + $scope.districts[i].label + '</option>';\n                  } else {\n                    returnStr += '<option value=\"' + $scope.districts[i].id + '\">' + $scope.districts[i].label + '</option>';\n                  }\n                }\n\n                returnStr += '</select>';\n                returnStr += '</div></td>';\n              } else if (attr.dataType == \"datetime\") {\n                returnStr += '<td><input datatype=\"' + attr.dataType + '\" class=\"form-control input-sm\" type=\"text\" name=\"' + attr.name + '\" value=\"' + (d.values.hasOwnProperty(attr.name) ? $filter('date')(d.values[attr.name], 'yyyy-MM-dd HH:mm:ss') : '') + '\"></td>';\n              } else if (attr.dataType == \"date\") {\n                returnStr += '<td><input datatype=\"' + attr.dataType + '\" class=\"form-control input-sm\" type=\"text\" name=\"' + attr.name + '\" value=\"' + (d.values.hasOwnProperty(attr.name) ? $filter('date')(d.values[attr.name], 'yyyy-MM-dd') : '') + '\"></td>';\n              } else {\n                returnStr += '<td><input datatype=\"' + attr.dataType + '\" class=\"form-control input-sm\" type=\"text\" name=\"' + attr.name + '\" value=\"' + (d.values.hasOwnProperty(attr.name) ? d.values[attr.name] : '') + '\"></td>';\n              }\n\n              returnStr += '</tr>';\n            }\n\n            returnStr += '<tr>' + '<td><div class=\"btn-group btn-group-sm\">' + '<a id=\"save-btn\" class=\"btn btn-default\"><i class=\"fa fa-check  hidden-lg hidden-md hidden-sm\"></i><span class=\"hidden-xs ng-binding\">保存</span></a>' + '<a id=\"cancel-btn\" class=\"btn btn-default\" ><i class=\"fa fa-close hidden-lg hidden-md hidden-sm\"></i><span class=\"hidden-xs ng-binding\">取消</span></a></div></td>' + '</tr>' + '</table>';\n          } else {\n            returnStr = '<table width=\"100%\" class=\"table table-inner\">';\n\n            for (var i in itemAttrs) {\n              var attr = itemAttrs[i];\n              returnStr += '<tr role=\"row\">' + '<td class=\"col-xs-3\">' + attr.label + ':</td>';\n\n              if (attr.dataType == \"datetime\") {\n                returnStr += '<td>' + (d.values.hasOwnProperty(attr.name) ? $filter('date')(d.values[attr.name], 'yyyy-MM-dd hh:mm:ss') : '') + '</td>';\n              } else if (attr.dataType == \"date\") {\n                returnStr += '<td>' + (d.values.hasOwnProperty(attr.name) ? $filter('date')(d.values[attr.name], 'yyyy-MM-dd') : '') + '</td>';\n              } else {\n                returnStr += '<td>' + (d.values.hasOwnProperty(attr.name) ? d.values[attr.name] : '') + '</td>';\n              }\n\n              returnStr += '</tr>';\n            }\n\n            returnStr += '</table>';\n          }\n\n          return returnStr;\n        }\n        /**\n         * 监听表格初始化后，添加按钮\n         */\n\n\n        domMain.on('init.dt', function () {\n          var parentDom = $(\".special-btn\").parent();\n          parentDom.html('<a ng-click=\"addIns()\" class=\"btn btn-default btn-sm\"><i class=\"fa fa-plus\"></i><span class=\"hidden-xs\"> 添加设备组</span></a>');\n          $compile(parentDom)($scope);\n        });\n        domMain.on('click', 'td', function (e) {\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          var rowData = row.data();\n\n          if (rowData) {\n            if ($(this).context.cellIndex == 5 && row.data().isEdit == 0) {\n              return;\n            }\n\n            if (row.child.isShown()) {\n              // This row is already open - close it\n              if (row.data().isEdit == 0) {\n                row.child.hide();\n                tr.removeClass('shown');\n              } else if (row.data().isEdit == 2 || row.data().isEdit == 3) {\n                row.child(format(row.data())).show();\n                tr.addClass('shown');\n              }\n            } else {\n              // Open this row\n              row.child(format(row.data())).show();\n              tr.addClass('shown');\n            }\n\n            if (row.data().isEdit == 2) {\n              $(\".selectList\").each(function () {\n                var temp_html;\n                var oProvince = $(this).find(\".province\");\n                var oCity = $(this).find(\".city\");\n                var oDistrict = $(this).find(\".district\"); //赋值市\n\n                var city = function city() {\n                  temp_html = '<option value=\"\">请选择...</option>';\n                  var n = oProvince.get(0).selectedIndex;\n\n                  if (n == 0) {\n                    oCity.addClass(\"ng-hide\");\n                  } else {\n                    $scope.citys = $scope.provinces[n - 1].children;\n                    oCity.removeClass(\"ng-hide\");\n                    $.each($scope.citys, function (i, city) {\n                      temp_html += \"<option value='\" + city.id + \"'>\" + city.label + \"</option>\";\n                    });\n                    oCity.html(temp_html);\n                    district();\n                  }\n                }; //赋值县\n\n\n                var district = function district() {\n                  temp_html = '<option value=\"\">请选择...</option>';\n                  var n = oCity.get(0).selectedIndex;\n\n                  if (n == 0) {\n                    oDistrict.addClass(\"ng-hide\");\n                  } else {\n                    $scope.districts = $scope.citys[n - 1].children;\n                    oDistrict.removeClass(\"ng-hide\");\n                    $.each($scope.districts, function (i, district) {\n                      temp_html += \"<option value='\" + district.id + \"'>\" + district.label + \"</option>\";\n                    });\n                    oDistrict.html(temp_html);\n                  }\n\n                  ;\n                }; //选择省改变市\n\n\n                oProvince.change(function () {\n                  city();\n                }); //选择市改变县\n\n                oCity.change(function () {\n                  district();\n                });\n              });\n            }\n          } else {\n            e.stopPropagation();\n            e.preventDefault();\n            var ipts = $(this).find('input');\n            $.each(ipts, function (i, val) {\n              if ($(val).attr(\"datatype\") == 'datetime') {\n                $(val).daterangepicker({\n                  singleDatePicker: true,\n                  showDropdowns: true,\n                  timePicker: true,\n                  minDate: '2000-01-01 00:00:00',\n                  maxDate: '2025-12-31 23:59:59',\n                  locale: {\n                    format: \"YYYY-MM-DD HH:mm:ss\",\n                    applyLabel: \"确定\",\n                    cancelLabel: \"取消\",\n                    daysOfWeek: [\"日\", \"一\", \"二\", \"三\", \"四\", \"五\", \"六\"],\n                    monthNames: [\"一月\", \"二月\", \"三月\", \"四月\", \"五月\", \"六月\", \"七月\", \"八月\", \"九月\", \"十月\", \"十一月\", \"十二月\"],\n                    firstDay: 1\n                  }\n                }, function (start, end, label) {});\n                $(val).attr(\"datatype\", \"\");\n                $(val).click();\n              } else if ($(val).attr(\"datatype\") == 'date') {\n                $(val).daterangepicker({\n                  singleDatePicker: true,\n                  showDropdowns: true,\n                  timePicker: false,\n                  minDate: '2000-01-01',\n                  maxDate: '2025-12-31',\n                  locale: {\n                    format: \"YYYY-MM-DD HH:mm:ss\",\n                    applyLabel: \"确定\",\n                    cancelLabel: \"取消\",\n                    daysOfWeek: [\"日\", \"一\", \"二\", \"三\", \"四\", \"五\", \"六\"],\n                    monthNames: [\"一月\", \"二月\", \"三月\", \"四月\", \"五月\", \"六月\", \"七月\", \"八月\", \"九月\", \"十月\", \"十一月\", \"十二月\"],\n                    firstDay: 1\n                  }\n                }, function (start, end, label) {});\n                $(val).attr(\"datatype\", \"\");\n                $(val).click();\n              }\n            });\n          }\n        });\n        domMain.on('click', '#export-btn', function (e) {\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          $scope.doAction('export', row.data());\n        });\n        domMain.on('click', '#save-btn', function (e) {\n          e.stopPropagation();\n          if ($('save-btn').attr('disabled')) return;\n          var tr = $(this).closest('tr');\n          var checkPass = true;\n          var selectRow = null;\n          var domainSelect;\n\n          for (var i in table.rows('.shown').data()) {\n            if (table.rows('.shown').data()[i].isEdit == 2) selectRow = table.rows('.shown').data()[i];\n          }\n\n          $.each($('.shown').children(), function (j, val1) {\n            var jqob1 = $(val1); //把input变为字符串\n\n            if (!jqob1.has('button').length && jqob1.has('input').length) {\n              if (j != 0 && j != 3) return;\n              var txt = jqob1.children(\"input\").val();\n\n              if (j == 3) {\n                txt = jqob1.children(\"input\").attr(\"domainPath\");\n                domainSelect = txt;\n              }\n\n              if (txt) {\n                $(val1).removeClass('danger');\n                table.cell(jqob1).data(txt); //修改DataTables对象的数据\n\n                $(tr).removeClass('danger');\n                checkPass = true;\n              } else {\n                $(val1).addClass('danger');\n                checkPass = false;\n                if (j == 0) growl.warning('请输入名称', {});\n                if (j == 3) growl.warning('请选择一个设备域', {});\n              }\n            }\n          });\n\n          if (!selectRow) {\n            var row = table.row(tr);\n            selectRow = row.data();\n            var domainSelect = $(tr).find('input[name=\"domainPath\"]').attr(\"domainPath\");\n            var domainSelectName = $(tr).find('input[name=\"domainPath\"]').val();\n\n            if (!domainSelect) {\n              $(tr).addClass('danger');\n              checkPass = false;\n              growl.warning('请选择一个设备域', {});\n              return;\n            } else {\n              $(tr).removeClass('danger');\n              checkPass = true;\n            }\n          }\n\n          if (checkPass) {\n            var ipts = tr.parent().find('input');\n            $.each(ipts, function (i, val) {\n              var txt = $(val).val();\n              var attrname = $(val).attr('name');\n              selectRow.values[attrname] = txt;\n            });\n            $(\".iconSelect\").each(function () {\n              var iconList = $(this).find(\".iconShow\");\n              var id = $(iconList).val();\n              var attrname = $(this).attr('name');\n              selectRow.values[attrname] = id;\n            });\n            $(\".selectList\").each(function () {\n              var oProvince = $(this).find(\".province\");\n              var oCity = $(this).find(\".city\");\n              var oDistrict = $(this).find(\".district\");\n              var id = $(oDistrict).val();\n\n              if (!id) {\n                id = $(oCity).val();\n              }\n\n              if (!id) {\n                id = $(oProvince).val();\n              }\n\n              var attrname = $(this).attr('name');\n              selectRow.values[attrname] = id;\n            });\n          }\n\n          if (checkPass) {\n            $('save-btn').attr('disabled', true); //            if (selectRow.id != 0 && selectRow['domainPath'] != domainSelect) {\n            //              selectRow['domainPath'] = domainSelect;\n            //              $scope.doAction('saveChangedDomain', selectRow, function(flg) {\n            //                if (flg) {\n            //                  isEditing = false;\n            //                  selectRow.isEdit = 0;\n            //                  $scope.doAction('save', selectRow);\n            //                }\n            //              });\n            //            } else {\n            //              selectRow['domainPath'] = domainSelect;\n\n            $scope.doAction('save', selectRow); //            }\n          }\n        });\n        domMain.on('click', '#cancel-btn', function (e) {\n          e.stopPropagation();\n          isEditing = false;\n          var row = table.row('.shown');\n\n          if (row.data()) {\n            row.data().isEdit = 0;\n            row.child.hide();\n            row.cells().invalidate();\n            $scope.doAction('cancel', row.data());\n          } else {\n            var tr = $(this).closest('tr');\n            var row = table.row(tr);\n            row.data().isEdit = 0;\n            row.child.hide();\n            row.cells().invalidate();\n            $scope.doAction('cancel', row.data());\n          } //          var tr = $(this).closest('tr');\n          //          var row = table.row(tr);\n          //          isEditing = false;\n          //          $scope.doAction('cancel', row.data());\n\n        });\n        domMain.on('click', '#edit-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n\n          if (!isEditing) {\n            isEditing = true;\n            row.data().isEdit = 2;\n            row.cells().invalidate();\n            $compile(tr)($scope);\n          } else {\n            if (row.data().isEdit == 0) $scope.doAction('eidterror');\n          }\n        });\n        domMain.on('click', '#del-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          $scope.doAction('delete', row.data());\n        });\n        domMain.on('click', '#change-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          $scope.doAction('change', row.data());\n        });\n        domMain.on('click', '#dir-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          $scope.doAction('directive', row.data());\n        });\n      }]\n    };\n  }]);\n});"],"sourceRoot":"/source/"}