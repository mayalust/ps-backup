{"version":3,"sources":["js/directives/fb-tools-dom.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","define","directives","arrayLike","objectLike","functionLike","test","str","regExp","condition","i","isArrayLike","string","isObjectLike","isFunctionLike","objToString","toString","JSON","stringify","stringToObj","rs","eval","parse","e","initDirective","q","timeout","directive","restrict","link","scope","element","attr","tooltip","$","css","text","fbTitle","on","append","remove","label","click","options","type","btnGroup","addClass","button","drop","caret","ul","event","hasClass","removeClass","$apply","$watch","n","o","s","find","value","name","loop","item","li","a","renderOption","$window","_loading","id","replace","ngModule","placeholder","noresults","init","change","attributes","select","el","select2Ins","select2Dom","loading","this","create","d","view","baseSelect2","language","noResults","data","$$","loadExternalJs","select2","evt","params","destroy","children","Array","length","helper","FileReader","CanvasRenderingContext2D","angular","isObject","File","file","slice","lastIndexOf","indexOf","template","$eval","ngThumb","canvas","reader","onload","img","Image","onLoadImage","src","target","result","readAsDataURL","width","height","getContext","drawImage","FileUploader","configUIService","growl","ngModel","fileFormat","require","param","domainPath","groupName","invalid","key","keyDesc","queueLimit","fileMaxSize","$scope","uploader","url","origin","withCredentials","filters","push","fn","nameAry","split","warning","size","onWhenAddingFileFailed","filter","console","info","onAfterAddingFile","fileItem","queue","removeFromQueue","saveConfig","resultObj","trigger","code","formData","onAfterAddingAll","addedFileItems","onBeforeUploadItem","onProgressItem","progress","onProgressAll","onSuccessItem","response","status","headers","onErrorItem","onCancelItem","onCompleteItem","success","error","message","onCompleteAll","fuploader","format","eventName","callback","_updatePreview","_setOption","singleSelect","imageDrag","dropDown","prev","upload","ss","log","setOption","setValue","imageprev","imgDrg","uploadFile","returnObj","concat","reset","unshift","icon","Clipboard","clipboard","clearSelection","action","units","selectClick","unit","input","val","self","render","toggleClick","multiple","config","undefined","multiselect","valueOnly","disp","removeAttr","findModel","elem","option","$remove","index","selectAll","enableFiltering","buttonWidth","buttonText","selected","each","substr","onChange","checked","resourceId","ele","excelDom","ht","handsontable","rowHeaders","colHeaders","manualColumnResize","manualRowResize","minSpareCols","minSpareRows","source","window","Handsontable","commonMethodService","show","style","editor","ace","lnTools","completions","caption","metal","addCompleter","addComplete","getCompletions","session","pos","prefix","edit","setMode","setTheme","setOptions","enableBasicAutocompletion","enableSnippets","enableLiveAutocompletion","insert","getValue","rootScope","commonMethod","open","rootTarget","popWrap","addOn","prevBtn","editBtn","copyBtn","createPop","targetData","closeBtn","applyBtn","runBtn","tidyBtn","jsToBeautify","jtb","pop","h","line","wrap","bg","echartContent","rightContainer","preview","advance","getAdvance","getStyle","getSource","parameter","getParameters","createRigthContent","resize","background","z-index","position","right","top","padding-top","cursor","oBox","parent","onmousedown","ev","iEvent","dx","clientX","dw","offsetWidth","disright","offsetLeft","document","onmousemove","left","onmouseup","setTimeout","json","runExpression","prepend","divRow","colLeft","colRight","bottom","table","content","createRow","createOption","op","j","maxRows","cronGen","ngMaxlength","numberInput","numberMax","keydown","keyCode","preventDefault","run","spectrum","allowEmpty","showPalette","showInput","hideAfterPaletteSelect","color","colorCode","toRgbString","palette","nmax","switchToNumber","transclude","contentHeight","innerHeight","scrollTop","handleTop","draggable","containment","axis","drag","stopEvent","ui","parentTop","offset","totalHeight"],"mappings":"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","file":"js/directives/fb-tools-dom.js","sourcesContent":["function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\ndefine(['directives/directives'], function (directives) {\n  'use strict';\n\n  var arrayLike = [/^\\[.*/, /.*\\]$/];\n  var objectLike = [/^\\{.*/, /.*\\}$/];\n  var functionLike = [/^function\\(.*\\)\\{/, /.*\\}$/];\n\n  var test = function test(str, regExp) {\n    var condition = true;\n\n    for (var i in regExp) {\n      condition = condition && regExp[i].test(str);\n    }\n\n    return condition;\n  };\n\n  function isArrayLike(string) {\n    return test(string, arrayLike);\n  }\n\n  function isObjectLike(string) {\n    return test(string, objectLike);\n  }\n\n  function isFunctionLike(string) {\n    return test(string, functionLike);\n  }\n\n  var objToString = function objToString(obj) {\n    if (typeof obj == \"function\") {\n      return obj.toString();\n    } else if (_typeof(obj) == \"object\") {\n      return JSON.stringify(obj, null, 2);\n    } else {\n      return obj + \"\";\n    }\n  };\n\n  var stringToObj = function stringToObj(string) {\n    var rs;\n\n    try {\n      if (isArrayLike(string) || isFunctionLike(string)) {\n        rs = eval(string);\n      } else if (isObjectLike(string)) {\n        rs = JSON.parse(string);\n      } else {\n        rs = string;\n      }\n    } catch (e) {//console.log(string, \"不能被转化为对象\");\n    } finally {\n      return rs;\n    }\n  };\n  /** 下拉单选框**/\n\n\n  directives.initDirective(\"fbTitle\", [\"$q\", \"$timeout\", function (q, timeout) {\n    var directive = {};\n    /**\n         directive.scope = {\n      fbTitle : \"=\",\n    };*/\n\n    directive.restrict = \"A\";\n\n    directive.link = function (scope, element, attr) {\n      var tooltip = $(\"<div></div>\");\n      $(element).css(\"position\", \"relative\");\n      tooltip.css(\"position\", \"absolute\");\n      tooltip.css(\"background-color\", \"rgba(0,0,0,.7)\");\n      tooltip.css(\"padding\", \"5px\");\n      tooltip.css(\"color\", \"#fff\");\n      tooltip.css(\"border-radius\", \"3px\");\n      tooltip.css(\"left\", \"0px\");\n      tooltip.css(\"top\", \"40px\");\n      tooltip.text(\"scope.fbTitle\");\n      tooltip.css(\"pointer-events\", \"none\");\n      tooltip.text(attr.fbTitle); //$(element).append(tooltip);\n\n      $(element).on(\"mouseenter\", function () {\n        $(element).append(tooltip);\n      });\n      $(element).on(\"click\", function () {\n        tooltip.remove();\n      });\n      $(element).on(\"mouseleave\", function () {\n        tooltip.remove();\n      });\n    };\n\n    return directive;\n  }]);\n  directives.initDirective(\"buttonGroup\", [\"$q\", \"$timeout\", function (q, timeout) {\n    var directive = {};\n    directive.scope = {\n      label: \"=\",\n      click: \"&\",\n      options: \"=\"\n    };\n    directive.restrict = \"A\";\n\n    directive.link = function (scope, element, attr) {\n      var btnGroup = $(\"<div></div>\").addClass(\"btn-group btn-group-sm\");\n      var button = $(\"<button></button>\").addClass(\"btn btn-default\");\n      var drop = $(\"<button></button>\").addClass(\"btn btn-default dropdown-toggle\");\n      var caret = $(\"<span></span>\").addClass(\"caret\");\n      var ul = $(\"<ul></ul>\").addClass(\"dropdown-menu\");\n      var type;\n      drop.append(caret);\n      btnGroup.append(button).append(drop).append(ul);\n      $(element).append(btnGroup);\n      drop.on(\"click\", function (event) {\n        if (btnGroup.hasClass(\"open\")) {\n          btnGroup.removeClass(\"open\");\n        } else {\n          btnGroup.addClass(\"open\");\n        }\n      });\n      button.on(\"click\", function (event) {\n        scope.$apply(function () {\n          scope.click({\n            type: type\n          });\n        });\n      });\n\n      var renderOption = function renderOption() {\n        var loop = function loop(item) {\n          var li = $(\"<li></li>\");\n          var a = $(\"<a></a>\").text(item.name);\n          li.append(a);\n          li.on(\"click\", function (event) {\n            btnGroup.removeClass(\"open\");\n            type = item.value;\n            button.text(\"添加\" + item.name + \"样式\");\n          });\n          return li;\n        };\n\n        for (var i in scope.options) {\n          ul.append(loop(scope.options[i]));\n        }\n      };\n\n      timeout(function () {\n        scope.$watch(\"label\", function (n, o, s) {\n          if (n) {\n            var find = s.options.find(function (element) {\n              return element.value == n;\n            });\n            type = find.value;\n            button.text(\"添加\" + find.name + \"样式\");\n          }\n        });\n        renderOption();\n      });\n    };\n\n    return directive;\n  }]);\n  directives.initDirective(\"selectTwo\", [\"$q\", \"$window\", \"$timeout\", function (q, $window, timeout) {\n    var _loading = [{\n      id: 0,\n      text: '加载中，请稍后。。。'\n    }];\n    return {\n      replace: true,\n      scope: {\n        ngModule: \"=\",\n        options: \"=\",\n        placeholder: \"=\",\n        noresults: \"=\",\n        init: \"&\",\n        change: \"&\"\n      },\n      restrict: 'A',\n      link: function link(scope, element, attributes) {\n        var el = $(element);\n        var select2Ins = new select2Dom();\n        var select;\n\n        function select2Dom() {}\n\n        ;\n\n        function isNoEmptyArray(n) {\n          if (_typeof(n) == \"object\") {\n            if (n instanceof Array) {\n              if (n.length > 0) {\n                return true;\n              }\n            }\n          }\n\n          return false;\n        }\n\n        function loading() {\n          this.create(_loading);\n        }\n\n        function create(d) {\n          //console.log(\"----------create----------\", d);\n          select = $(\"<select></select>\");\n          select.css(\"width\", \"100%\");\n          select.css(\"display\", \"none\");\n          el.append(select);\n          scope.init({\n            view: d[0]\n          });\n          var baseSelect2 = {\n            language: {\n              noResults: function noResults() {\n                return scope.noresults || \"没有该匹配项\";\n              }\n            },\n            placeholder: scope.placeholder || \"请选择...\",\n            data: d\n          };\n          $$.loadExternalJs(['select2'], function () {\n            el.css(\"border\", 0);\n            el.css(\"padding\", 0); //console.log(baseSelect2);\n\n            select.select2(baseSelect2);\n            select.on(\"select2:select\", function (evt) {\n              var id = evt.params.data.id;\n              var find = scope.options.find(function (e) {\n                return e.id == id;\n              });\n              scope.$apply(function () {\n                scope.change({\n                  view: find\n                });\n              });\n            });\n          });\n        }\n\n        function destroy() {\n          //console.log(\"----------destroy----------\")\n          if (_typeof(select) == \"object\") {\n            if (select.select2) {\n              select.select2('destroy');\n              select = null;\n            }\n          }\n\n          el.children().remove();\n          return this;\n        }\n\n        select2Dom.prototype.loading = loading;\n        select2Dom.prototype.create = create;\n        select2Dom.prototype.destroy = destroy;\n        scope.$watch(\"options\", function (n, o, s) {\n          if (isNoEmptyArray(n)) {\n            select2Ins.destroy();\n            select2Ins.create(n);\n          }\n        });\n      }\n    };\n  }]);\n  directives.initDirective(\"ngThumb\", [\"$q\", \"$window\", \"$timeout\", function (q, $window, timeout) {\n    var helper = {\n      support: !!($window.FileReader && $window.CanvasRenderingContext2D),\n      isFile: function isFile(item) {\n        return angular.isObject(item) && item instanceof $window.File;\n      },\n      isImage: function isImage(file) {\n        var type = '|' + file.type.slice(file.type.lastIndexOf('/') + 1) + '|';\n        return '|jpg|png|jpeg|bmp|gif|'.indexOf(type) !== -1;\n      }\n    };\n    return {\n      restrict: 'A',\n      template: '<canvas/>',\n      link: function link(scope, element, attributes) {\n        if (!helper.support) return;\n        var params = scope.$eval(attributes.ngThumb);\n        if (!helper.isFile(params.file)) return;\n        if (!helper.isImage(params.file)) return;\n        var canvas = element.find('canvas');\n        var reader = new FileReader();\n        reader.onload = onLoadFile;\n        reader.readAsDataURL(params.file);\n\n        function onLoadFile(event) {\n          var img = new Image();\n          img.onload = onLoadImage;\n          img.src = event.target.result;\n        }\n\n        function onLoadImage() {\n          var width = params.width || this.width / this.height * params.height;\n          var height = params.height || this.height / this.width * params.width;\n          canvas.attr({\n            width: width,\n            height: height\n          });\n          canvas[0].getContext('2d').drawImage(this, 0, 0, width, height);\n        }\n      }\n    };\n  }]);\n  directives.initDirective(\"fileInput\", [\"$q\", \"$timeout\", \"FileUploader\", \"configUIService\", \"growl\", function (q, timeout, FileUploader, configUIService, growl) {\n    var directive = {};\n    directive.scope = {\n      ngModel: \"=\",\n      fileFormat: \"=\"\n    };\n    directive.restrict = \"A\";\n    directive.template = '<div  ng-if=\"uploader\" style=\"border:1px solid #ddd; background-color:#eee; padding : 5px;\">' + '<input id=\"nv-file-select\" class=\"form-control\" type=\"file\" nv-file-select uploader=\"uploader\">' + '<table class=\"table\" style=\"margin-bottom: 0;\" ng-show=\"uploader.queue.length > 0\">' + '<thead>' + '<tr>' + ' <th width=\"50%\">图片名称</th>' + '<th ng-show=\"uploader.isHTML5\">尺寸</th>' + '<th>操作</th>' + ' </tr>' + ' </thead>' + '<tbody>' + ' <tr ng-repeat=\"item in uploader.queue\">' + ' <td>' + '<strong>{{ item.file.name }}</strong>' + '<div ng-show=\"uploader.isHTML5\" ng-thumb=\"{ file: item._file, height: 70 }\"></div>' + '</td>' + '<td ng-show=\"uploader.isHTML5\" nowrap>{{ item.file.size/1024/1024|number:2 }} MB</td>' + '</td>' + '<td nowrap>' + '<button type=\"button\" class=\"btn btn-success btn-xs\" ng-click=\"item.upload()\" ng-disabled=\"item.isReady || item.isUploading || item.isSuccess\">' + '<span class=\"glyphicon glyphicon-upload\"></span> 上传 </button>' + '</td>' + '</tr>' + '</tbody>' + ' </table>' + '</div>';\n\n    directive.link = function (scope, element, attr) {\n      //console.log(scope.ngModel);\n      require(['angular-file-upload'], function () {\n        timeout(function () {\n          var param = {\n            domainPath: \"\",\n            groupName: \"dashboardImage\",\n            id: 0,\n            invalid: false,\n            key: \"\",\n            keyDesc: \"\",\n            label: \"\",\n            value: \"\"\n          };\n          var fileFormat = scope.fileFormat && scope.fileFormat.fileFormat ? scope.fileFormat.fileFormat : \"|jpg|png|jpeg|bmp|gif|svg|\";\n          var queueLimit = scope.fileFormat && scope.fileFormat.queueLimit ? scope.fileFormat.queueLimit : 1;\n          var fileMaxSize = scope.fileFormat && $scope.fileFormat.fileMaxSize ? $scope.fileFormat.fileMaxSize : 1;\n          var uploader = scope.uploader = new FileUploader({\n            url: configUIService.origin + '/api/rest/uploadConfig/configUIService/uploadConfigFile',\n            withCredentials: true\n          });\n          uploader.filters.push({\n            name: 'imageFilter',\n            fn: function fn(item\n            /*{File|FileLikeObject}*/\n            , options) {\n              var nameAry = item.name.split(\".\");\n              var type = nameAry[nameAry.length - 1];\n\n              if (fileFormat.indexOf(type) == -1) {\n                growl.warning(\"文件格式仅支持\" + fileFormat + \"文件，请重新选择\", {});\n                return false;\n              }\n\n              if (item.size / 1024 > fileMaxSize * 1000) {\n                growl.warning(\"您选择的文件大于\" + fileMaxSize + \"M，请重新选择\", {});\n                return false;\n              }\n\n              return true;\n            }\n          }); // CALLBACKS\n\n          uploader.onWhenAddingFileFailed = function (item\n          /*{File|FileLikeObject}*/\n          , filter, options) {\n            console.info('onWhenAddingFileFailed', item, filter, options);\n          };\n\n          uploader.onAfterAddingFile = function (fileItem) {\n            if (uploader.queue.length > queueLimit) {\n              uploader.removeFromQueue(queueLimit);\n              growl.info(\"已达上传图片张数\", {});\n              return;\n            }\n\n            ;\n            param.label = fileItem.file.name;\n            configUIService.saveConfig(param, function (resultObj) {\n              scope.ngModel.trigger(\"imageFileUploaded\", resultObj.data);\n\n              if (resultObj.code == 0) {\n                param.id = resultObj.data.id;\n                fileItem.formData.push({\n                  value: 'images/dashboardImage',\n                  id: param.id\n                });\n              }\n            });\n          };\n\n          uploader.onAfterAddingAll = function (addedFileItems) {//console.info('onAfterAddingAll', addedFileItems);\n          };\n\n          uploader.onBeforeUploadItem = function (item) {//console.info('onBeforeUploadItem', item);\n          };\n\n          uploader.onProgressItem = function (fileItem, progress) {//console.info('onProgressItem', fileItem, progress);\n          };\n\n          uploader.onProgressAll = function (progress) {//console.info('onProgressAll', progress);\n          };\n\n          uploader.onSuccessItem = function (fileItem, response, status, headers) {//console.info('onSuccessItem', fileItem, response, status, headers);\n          };\n\n          uploader.onErrorItem = function (fileItem, response, status, headers) {//console.info('onErrorItem', fileItem, response, status, headers);\n          };\n\n          uploader.onCancelItem = function (fileItem, response, status, headers) {//console.info('onCancelItem', fileItem, response, status, headers);\n          };\n\n          uploader.onCompleteItem = function (fileItem, response, status, headers) {\n            console.info('onCompleteItem', response);\n\n            if (response) {\n              if (response.code == 0) {\n                var url = response.data;\n                scope.ngModel = url;\n                growl.success(\"图片上传成功\", {});\n              } else {\n                growl.error(response.message, {});\n              }\n\n              ;\n            } else {\n              growl.error(\"操作异常了，尝试重新刷新\", {});\n            }\n          };\n\n          uploader.onCompleteAll = function () {//console.info('onCompleteAll');\n          }; //console.info('uploader', uploader);\n\n        });\n      });\n    };\n\n    return directive;\n  }]);\n  directives.initDirective(\"selectImage\", [\"$q\", \"$timeout\", \"FileUploader\", \"configUIService\", \"fuploader\", \"growl\", function (q, timeout, FileUploader, configUIService, fuploader, growl) {\n    var directive = {};\n    directive.scope = {\n      ngModel: \"=\",\n      options: \"=\",\n      format: \"=\",\n      change: \"&\"\n    };\n    directive.restrict = \"A\";\n\n    directive.link = function (scope, element, attr) {\n      var format = scope.format || {\n        label: \"label\",\n        value: \"value\"\n      };\n      timeout(function () {\n        var event = {};\n\n        var on = function on(eventName, callback) {\n          event[eventName] = callback;\n        };\n\n        var _updatePreview = function updatePreview(n) {\n          on(\"updated\", function () {\n            _updatePreview(n);\n          });\n        };\n\n        var _setOption = function setOption(options) {\n          on(\"toolLoaded\", function () {\n            _setOption(options);\n          });\n        };\n\n        $$.loadExternalJs(['toolkit/single-select', 'toolkit/image-drag'], function (singleSelect, imageDrag) {\n          var dropDown = $(\"<div></div>\");\n          var prev = $(\"<div></div>\");\n          var upload = $(\"<div></div>\");\n          var ss = singleSelect.init(dropDown, format);\n\n          _setOption = function _setOption(options) {\n            console.log(options, scope.ngModel);\n            ss.setOption(options);\n            ss.setValue(scope.ngModel);\n            prev.imageprev();\n          };\n\n          _updatePreview = function _updatePreview(src) {\n            prev.imageprev(\"option\", \"changeSrc\", configUIService.origin + \"/\" + src);\n          };\n\n          if (typeof event['toolLoaded'] == \"function\") {\n            event['toolLoaded']();\n          }\n\n          ;\n\n          if (typeof event['updated'] == \"function\") {\n            event['updated']();\n          }\n\n          ;\n          var imgDrg = imageDrag.init(upload);\n          $(element).children().remove();\n          $(element).append(dropDown).append(prev).append(upload);\n          imgDrg.on(\"submit\", function (file) {\n            fuploader.uploadFile(file, function (returnObj) {\n              _setOption(scope.options.concat({\n                label: returnObj.data.label,\n                value: returnObj.data.value\n              }));\n\n              scope.ngModel = returnObj.data.value;\n              ss.setValue(returnObj.data.value);\n              upload.css(\"display\", \"none\");\n              prev.css(\"display\", \"block\");\n              prev.imageprev(\"option\", \"changeSrc\", configUIService.origin + \"/\" + returnObj.data.value);\n              imgDrg.reset();\n            });\n          });\n          imgDrg.on(\"change\", function (file) {\n            growl.success(\"图片更新后需要点击上传按钮保存后才可使用！\");\n          });\n          ss.on(\"click\", function (value) {\n            if (value != 'upload') {\n              scope.$apply(function () {\n                scope.ngModel = value;\n              });\n              prev.css(\"display\", \"block\");\n              upload.css(\"display\", \"none\");\n            } else {\n              prev.css(\"display\", \"none\");\n              upload.css(\"display\", \"block\");\n            }\n\n            ;\n          });\n        });\n        scope.$watch(\"ngModel\", function (n, o, s) {\n          if (n) {\n            _updatePreview(n);\n          }\n        });\n        scope.$watch(\"options\", function (n, o, s) {\n          if (n) {\n            if (n[0].value != \"upload\") {\n              n.unshift({\n                label: \"上传图片\",\n                value: \"upload\"\n              });\n            }\n\n            ;\n\n            _setOption(n);\n          }\n        });\n      });\n    };\n\n    return directive;\n  }]);\n  directives.initDirective(\"selectSingle\", [\"$q\", \"$timeout\", function (q, timeout) {\n    var directive = {};\n    directive.scope = {\n      ngModel: \"=\",\n      options: \"=\",\n      format: \"=\",\n      change: \"&\"\n    };\n    directive.restrict = \"A\";\n\n    directive.link = function (scope, element, attr) {\n      timeout(function () {\n        $$.loadExternalJs(['toolkit/single-select'], function (singleSelect) {\n          var format = scope.format || {\n            label: \"label\",\n            value: \"value\"\n          };\n          var ss = singleSelect.init(element, format);\n          ss.on(\"click\", function (value) {\n            scope.$apply(function () {\n              scope.ngModel = value;\n            });\n          });\n\n          var setOption = function setOption(options) {\n            ss.setOption(options);\n            ss.setValue(scope.ngModel);\n          };\n\n          scope.$watch(\"options\", function (n, o, s) {\n            if (n) {\n              setOption(n);\n            }\n          });\n        });\n      });\n    };\n\n    return directive;\n  }]);\n  directives.initDirective(\"copyButton\", [\"$q\", \"$timeout\", \"growl\", function (q, timeout, growl) {\n    var directive = {};\n    directive.scope = {\n      ngModel: \"=\"\n    };\n    directive.restrict = \"E\";\n\n    directive.link = function (scope, element, attr) {\n      var button = $(\"<button></button>\").addClass(\"btn btn-primary\");\n      var icon = $(\"<span></span>\");\n      var text = $(\"<span></span>\").text(\"复制到剪切版\");\n      icon.addClass(\"glyphicon glyphicon-copy\");\n      button.append(icon);\n      button.append(text); //button.text(\"复制到剪切版\");\n\n      element.append(button);\n      $$.loadExternalJs(['clipboard'], function (Clipboard) {\n        var clipboard = new Clipboard(button[0]);\n        clipboard.on('success', function (e) {\n          /**\n           console.info('Action:', e.action);\n           console.info('Text:', e.text);\n           console.info('Trigger:', e.trigger);\n           */\n          growl.success(\"成功复制到剪切版\");\n          e.clearSelection();\n        });\n        clipboard.on('error', function (e) {\n          console.error('Action:', e.action);\n          console.error('Trigger:', e.trigger);\n        });\n      });\n      /**\n             $$.loadExternalJs(['zeroclipboard'], function(ZeroClipboard){\n        var client = new ZeroClipboard(button[0]);\n        client.on( \"ready\", function( readyEvent ) {\n          client.on( \"aftercopy\", function( event ) {\n            growl.success(\"成功复制到剪切版\");\n          });\n        });\n      });*/\n\n      scope.$watch(\"ngModel\", function (n, o, s) {\n        button.attr(\"data-clipboard-text\", n);\n      });\n    };\n\n    return directive;\n  }]);\n  directives.initDirective(\"timeselect\", [\"$q\", \"$timeout\", function (q, timeout) {\n    var directive = {};\n    directive.scope = {\n      ngModel: \"=\",\n      change: \"&\"\n    };\n    directive.restrict = \"E\";\n    directive.template = \"\\\n      <div class='row'>\\\n        <div class='col-md-6'>\\\n          <input ng-model='ngModel.value' class='form-control'/>\\\n        </div>\\\n        <div class='col-md-6'>\\\n          <div class='btn-group btn-group-sm' role='group'>\\\n            <a ng-repeat='unit in units'\\\n              ng-click = 'selectClick(unit)'\\\n              class='btn btn-default'\\\n              ng-class='{true : \\\"active\\\", false : \\\"\\\"}[ngModel.unit==unit.value]'\\\n              ng-bind='unit.label'>\\\n            </a>\\\n          </div>\\\n        </div>\\\n      </div>\";\n\n    directive.link = function (scope, element, attr) {\n      timeout(function () {\n        scope.units = [{\n          label: \"月\",\n          value: \"month\"\n        }, {\n          label: \"天\",\n          value: \"day\"\n        }, {\n          label: \"小时\",\n          value: \"hour\"\n        }, {\n          label: \"分钟\",\n          value: \"minute\"\n        }, {\n          label: \"秒\",\n          value: \"second\"\n        }];\n\n        scope.selectClick = function (unit) {\n          scope.change();\n          scope.ngModel.unit = unit.value;\n        };\n      });\n    };\n\n    return directive;\n  }]);\n  directives.initDirective(\"evalinput\", [\"$q\", \"$timeout\", function (q, timeout) {\n    var directive = {};\n    directive.restrict = \"A\";\n    directive.scope = {\n      ngModel: \"=\",\n      change: \"&\"\n    };\n\n    directive.link = function (scope, element, attr) {\n      timeout(function () {\n        var input = $(\"<input class='form-control' />\");\n        input.val(objToString(scope.ngModel));\n        input.on(\"change\", function (event) {\n          var self = this;\n          scope.$apply(function () {\n            scope.change();\n            scope.ngModel = $(self).val();\n          });\n        });\n        $(element).append(input);\n      });\n    };\n\n    return directive;\n  }]);\n  directives.initDirective(\"fbToggle\", [\"$q\", \"$timeout\", function (q, timeout) {\n    var directive = {};\n    directive.restrict = \"A\";\n    directive.template = \"<div class='toggle-wrap' ng-click='toggleClick();$event.stopPropagation();'><div class='toggle-inner'></div></div>\";\n    directive.scope = {\n      ngModel: \"=\",\n      change: \"&\"\n    };\n\n    directive.link = function (scope, element, attr) {\n      timeout(function () {\n        var render = function render() {\n          if (scope.ngModel) {\n            $(element).find('.toggle-wrap').addClass(\"active\");\n          } else {\n            $(element).find('.toggle-wrap').removeClass(\"active\");\n          }\n        };\n\n        render();\n\n        scope.toggleClick = function () {\n          scope.ngModel = !scope.ngModel;\n          scope.change({\n            value: scope.ngModel\n          });\n          render();\n        };\n      });\n    };\n\n    return directive;\n  }]);\n  directives.initDirective(\"autoMultiselect\", [\"$q\", \"$timeout\", function (q, timeout) {\n    var directive = {};\n    directive.restrict = \"A\";\n    directive.scope = {\n      ngModel: \"=\",\n      multiple: \"=\",\n      options: \"=\",\n      config: \"=\",\n      change: \"&\"\n    };\n\n    directive.link = function (scope, element, attr) {\n      var select = $(\"<select class='multiselect' multiple='multiple'></select>\");\n\n      if (scope.ngModel == undefined) {\n        scope.ngModel = [];\n      }\n\n      timeout(function () {\n        $$.loadExternalJs([\"bootstrap-multiselect\"], function (multiselect) {\n          timeout(ready);\n\n          function ready() {\n            var disp = \"label\",\n                id = \"id\",\n                valueOnly;\n\n            if (scope.multiple == false) {\n              select.removeAttr(\"multiple\");\n            } else {\n              select.attr(\"multiple\", \"multiple\");\n            }\n\n            ;\n\n            if (scope.config) {\n              disp = scope.config.disp;\n              id = scope.config.id;\n              valueOnly = scope.config.valueOnly;\n            }\n\n            ;\n            $(element).append(select);\n            scope.$watch(\"options\", function (n, o, s) {\n              function findModel(elem, callback) {\n                var find = scope.options.find(function (element) {\n                  if (valueOnly) {\n                    return elem == element[id];\n                  } else {\n                    return elem[id] == element[id];\n                  }\n\n                  ;\n                });\n\n                if (find) {\n                  if (valueOnly) {\n                    callback(elem);\n                  } else {\n                    callback(elem[id]);\n                  }\n                } else {\n                  callback(null);\n                }\n              }\n\n              if (n) {\n                select.children().remove();\n\n                var renderOption = function renderOption(option) {\n                  return $(\"<option value='\" + option[id] + \"'>\" + option[disp] + \"</option>\");\n                };\n\n                if (scope.options.length == 0) {\n                  select.multiselect('rebuild');\n                  select.multiselect('disable');\n                } else {\n                  for (var i in scope.options) {\n                    select.append(renderOption(scope.options[i]));\n                  }\n\n                  select.multiselect('rebuild');\n\n                  for (var i in scope.options) {\n                    select.multiselect(\"deselect\", scope.options[i].id);\n                  }\n\n                  ;\n\n                  if (scope.multiple == false) {\n                    if (scope.ngModel.length == 0) {\n                      if (valueOnly) {\n                        scope.ngModel = [scope.options[0].id];\n                      } else {\n                        scope.ngModel = [scope.options[0]];\n                      }\n                    }\n\n                    ;\n                  }\n\n                  for (var i in scope.ngModel) {\n                    findModel(scope.ngModel[i], function (id) {\n                      if (id) {\n                        select.multiselect(\"select\", id);\n                      } else {\n                        scope.ngModel.$remove(function (index, element) {\n                          return index == i;\n                        });\n                      }\n                    });\n                  }\n\n                  ;\n                }\n              }\n            });\n\n            var buttonText = function buttonText(options) {\n              if (options.length == 0) {\n                return '没有选择';\n              } else if (options.length > 1) {\n                return \"已选择\" + options.length + \"个\";\n              } else {\n                var selected = '';\n                options.each(function () {\n                  selected += $(this).text() + ', ';\n                });\n                return selected.substr(0, selected.length - 2);\n              }\n            };\n\n            var onChange = function onChange(element, checked) {\n              scope.$apply(function () {\n                var resourceId = $(element).val();\n                var target;\n\n                if (checked) {\n                  var find = scope.options.find(function (ele) {\n                    return ele[id] == resourceId;\n                  });\n\n                  if (scope.multiple == false) {\n                    if (valueOnly) {\n                      scope.ngModel = [find.id];\n                    } else {\n                      scope.ngModel = [find];\n                    }\n                  } else {\n                    if (valueOnly) {\n                      scope.ngModel.push(find[id]);\n                    } else {\n                      scope.ngModel.push(find);\n                    }\n                  }\n                } else {\n                  if (valueOnly) {\n                    scope.ngModel.$remove(function (index, elem) {\n                      return elem == resourceId;\n                    });\n                  } else {\n                    scope.ngModel.$remove(function (index, elem) {\n                      return elem.id == resourceId;\n                    });\n                  }\n                }\n              });\n            };\n\n            select.multiselect({\n              selectAll: true,\n              enableFiltering: true,\n              buttonWidth: \"100%\",\n              buttonText: buttonText,\n              onChange: onChange\n            });\n          }\n        });\n      });\n    };\n\n    return directive;\n  }]);\n  directives.initDirective(\"select\", [\"$timeout\", function (timeout) {\n    var directive = {};\n    directive.scope = {\n      ngModel: \"=\",\n      options: \"=\",\n      change: \"&\"\n    };\n    directive.template = \"\\\n    <div class='btn-group btn-group-sm' role='group'>\\\n      <a ng-repeat='value in options'\\\n        ng-click = 'selectClick(value)'\\\n        class='btn btn-default'\\\n        ng-class='{true : \\\"active\\\", false : \\\"\\\"}[ngModel==value.value]'\\\n        ng-bind='value.label'>\\\n      </a>\\\n    </div>\";\n    directive.restrict = \"A\";\n    directive.link = link;\n\n    function link(scope, element, attr) {\n      scope.selectClick = function (value) {\n        scope.ngModel = value.value;\n        scope.change();\n      };\n    }\n\n    return directive;\n  }]);\n  directives.initDirective(\"excel\", [\"$timeout\", function (timeout) {\n    var directive = {};\n    directive.scope = {\n      ngModel: \"=\"\n    };\n    directive.restrict = \"A\";\n    directive.link = link;\n\n    function link(scope, element, attr) {\n      var excelDom = $(\"<div></div>\");\n      timeout(function () {\n        element.append(excelDom);\n        $(element).css(\"overflow\", \"auto\");\n        $(element).css(\"margin\", \"5px auto\");\n        $(element).css(\"height\", \"100px\");\n        $(element).css(\"background-color\", \"#eee\");\n        $$.loadExternalJs([\"handsontable\"], function (ht) {\n          //window.Handsontable = ht;\n          excelDom.handsontable({\n            data: scope.ngModel,\n            rowHeaders: true,\n            colHeaders: true,\n            manualColumnResize: true,\n            manualRowResize: true,\n            minSpareCols: 1,\n            minSpareRows: 1\n          });\n        });\n      });\n    }\n\n    return directive;\n  }]);\n  directives.initDirective(\"excelPrev\", [\"$timeout\", function (timeout) {\n    var directive = {};\n    directive.scope = {\n      source: \"=\"\n    };\n    directive.restrict = \"A\";\n    directive.link = link;\n\n    function link(scope, element, attr) {\n      var excelDom = $(\"<div></div>\"),\n          handt;\n      timeout(function () {\n        element.append(excelDom);\n        $(element).css(\"overflow\", \"auto\");\n        $(element).css(\"margin\", \"5px auto\");\n        $(element).css(\"height\", \"100px\");\n        $(element).css(\"background-color\", \"#eee\");\n        $$.loadExternalJs([\"handsontable\"], function (ht) {\n          window.Handsontable = ht;\n          excelDom.handsontable({\n            data: [],\n            rowHeaders: true,\n            colHeaders: true,\n            manualColumnResize: true,\n            manualRowResize: true,\n            minSpareCols: 0,\n            minSpareRows: 0\n          });\n          scope.$watch(\"source\", function (n, o, s) {\n            if (n) {\n              excelDom.handsontable(\"loadData\", n);\n            }\n          });\n        });\n      });\n    }\n\n    return directive;\n  }]);\n  /**\n   * 更换编辑器\n   */\n\n  directives.initDirective(\"codeMirrorEditor\", [\"$timeout\", \"growl\", \"commonMethodService\", function (timeout, growl, commonMethodService) {\n    var directive = {};\n    directive.scope = {\n      ngModel: \"=\",\n      options: \"=\",\n      target: \"=\",\n      show: \"=\",\n      style: \"=\"\n    };\n    directive.restrict = \"A\";\n    directive.link = link;\n\n    function link(scope, element, attr) {\n      scope.height = attr.height;\n      /**\n       * 替换编辑器ace以前的在下面注释着\n       * @type {ace}\n       */\n\n      var code = $(\"<div></div>\");\n      var editor;\n      $(element).append(code);\n      code.css(\"position\", \"relative\");\n      code.css(\"width\", \"100%\");\n\n      if (scope.height) {\n        code.css(\"height\", scope.height);\n      } else {\n        code.css(\"height\", \"250px\");\n      }\n\n      code.css(\"border\", \"1px solid #ddd\");\n      code.css(\"overflow\", \"auto\");\n\n      require([\"ace\", 'ace-language'], function (ace, lnTools) {\n        var completions = [{\n          caption: 'target',\n          value: 'target',\n          metal: 'local'\n        }, {\n          caption: 'event',\n          value: 'event',\n          metal: 'local'\n        }];\n\n        for (var key in commonMethodService.prototype) {\n          completions.push({\n            caption: key,\n            value: key,\n            metal: 'local'\n          });\n        }\n\n        ;\n        lnTools && typeof lnTools.addCompleter === \"function\" && lnTools.addComplete({\n          getCompletions: function getCompletions(editor, session, pos, prefix, callback) {\n            callback(null, completions);\n          }\n        });\n        editor = ace.edit(code[0]);\n        editor.session.setMode(\"ace/mode/html\");\n        editor.setTheme(\"ace/theme/tomorrow\"); // enable autocompletion and snippets\n\n        editor.setOptions({\n          enableBasicAutocompletion: true,\n          enableSnippets: true,\n          enableLiveAutocompletion: true\n        });\n        editor.session.setMode(\"ace/mode/javascript\"); // insert someting\n\n        if (scope.ngModel) {\n          editor.insert(scope.ngModel);\n        }\n\n        editor.on(\"change\", function (event) {\n          scope.$apply(function () {\n            scope.ngModel = editor.getValue();\n          });\n        });\n      });\n    }\n\n    return directive;\n  }]);\n  directives.initDirective(\"codeMirror\", [\"$timeout\", \"growl\", \"$rootScope\", \"commonMethodService\", function (timeout, growl, rootScope, commonMethod) {\n    var directive = {};\n    directive.scope = {\n      ngModel: \"=\",\n      options: \"=\",\n      target: \"=\",\n      show: \"=\",\n      config: \"=\",\n      change: \"&\",\n      open: \"&\",\n      rootTarget: \"=\"\n    };\n    directive.restrict = \"A\";\n    directive.link = link;\n\n    function link(scope, element, attr) {\n      var editor;\n      var btnGroup = $(\"<div></div>\").addClass(\"input-group\");\n      var addOn = $(\"<div></div>\").addClass(\"input-group-btn\");\n      var prevBtn = $(\"<button></button>\").addClass(\"btn btn-default\").text(\"预览\");\n      var editBtn = $(\"<button></button>\").addClass(\"btn btn-primary\").text(\"编辑\");\n      var copyBtn = $(\"<button></button>\").addClass(\"btn btn-default\").text(\"复制代码\");\n      var pasteBtn = $(\"<button></button>\").addClass(\"btn btn-default\").text(\"粘贴代码\");\n      var input = $(\"<input />\").addClass(\"form-control\").css(\"pointer-events\", \"none\");\n      copyBtn.on(\"click\", function (event) {});\n\n      if (scope.target) {\n        scope.target.open = function () {\n          editBtn.trigger(\"click\");\n        };\n      }\n\n      ;\n      addOn.append(editBtn);\n      /**\n      if(scope.$attr(\"config/showCopy\") != false) {\n        addOn.append(copyBtn);\n      }\n      if(scope.$attr(\"config/showPaste\") != false) {\n        addOn.append(pasteBtn);\n      }*/\n\n      $(element).append(btnGroup);\n      btnGroup.append(input);\n      btnGroup.append(addOn);\n      scope.$watch(\"ngModel\", function (n, o, s) {\n        if (n) {\n          var val = objToString(n);\n          input.val(val);\n        }\n      });\n      scope.$watch(\"show\", function (n, o, s) {\n        if (n != undefined) {\n          $(element).css(\"display\", n ? \"block\" : \"none\");\n        }\n      });\n      var popWrap, json;\n\n      var createPop = function createPop(type) {\n        var val = objToString(scope.ngModel);\n        var closeBtn = $(\"<button></button>\");\n        var applyBtn = $(\"<button></button>\");\n        var targetData;\n        var error = $(\"<div></div>\").css(\"padding\", \"10px 40px\").css(\"color\", \"red\").css(\"display\", \"none\").text(\"代码输入错误！\");\n        var copyBtn = $(\"<button></button>\").addClass(\"btn btn-default\").text(\"复制代码\");\n        var pasteBtn = $(\"<button></button>\").addClass(\"btn btn-default\").text(\"粘贴代码\");\n        var btnGroup = $(\"<div></div>\").addClass(\"btn-group btn-group-sm\");\n        var runBtn = $(\"<button></button>\").addClass(\"btn btn-primary\").text(\"运行\");\n\n        var resizeFn = function resizeFn() {\n          var width = echartContent.parent().parent().width() - 30;\n          echartContent.width(width);\n\n          if (typeof targetData.element.resize == \"function\") {\n            targetData.element.resize();\n          }\n\n          ;\n        };\n\n        btnGroup.css(\"position\", \"absolute\");\n        btnGroup.css(\"right\", \"20px\");\n        btnGroup.css(\"top\", \"30px\");\n        btnGroup.css(\"z-index\", 1);\n        closeBtn.addClass(\"btn btn-default\");\n        closeBtn.text(\"关闭\");\n        applyBtn.addClass(\"btn btn-primary\");\n        applyBtn.text(\"应用(ctrl+o)\");\n        var tidyBtn = $(\"<button><i class='fa fa-align-left'></i>整理代码</button>\").addClass(\"btn btn-primary\"); // 整理代码\n\n        tidyBtn.click(function () {\n          require([\"jsToBeautify\"], function (jsToBeautify) {\n            var jtb = jsToBeautify(scope.ngModel);\n            editor.session.setValue(\"\");\n            editor.insert(jtb);\n          });\n        });\n        btnGroup.append(tidyBtn);\n        btnGroup.append(runBtn);\n        /**\n        btnGroup.append(copyBtn);\n         */\n\n        btnGroup.append(applyBtn);\n        var pop = $(\"<div></div>\").css(\"position\", \"fixed\").css(\"z-index\", 99999);\n        var h = $(\"<div></div>\").text(type == \"prev\" ? \"预览代码\" : \"编辑代码\").css(\"font-size\", \"16px\").css(\"line-height\", \"50px\").css(\"font-weight\", \"bold\").css(\"text-align\", \"center\").css(\"width\", \"100%\");\n        var text = $(\"<pre></pre>\").css(\"margin\", \"0px 10px\");\n        var line = $(\"<div></div>\").css(\"height\", \"1px\").css(\"width\", \"100%\");\n        var wrap = $(\"<div></div>\").css(\"width\", \"calc(100vw - 20px)\").css(\"height\", \"calc(100vh - 20px)\").css(\"position\", \"relative\").css(\"margin\", \"10px 10px 0 10px\").css(\"background-color\", \"#fff\").css(\"border\", \"1px solid #eee\");\n        var bg = $(\"<div></div>\").css(\"background-color\", \"rgba(0,0,0,.8)\").css(\"width\", \"100vw\").css(\"height\", \"100vh\");\n        var echartContent = $(\"<div id='echartContent' style='padding: 30px 20px 0; position:relative; overflow:hidden;'></div>\");\n        var rightContainer = $(\"<div></div>\");\n        var code = $(\"<div id='editor'></div>\");\n        code.css(\"width\", \"100%\");\n        code.css(\"height\", \"90%\");\n        code.css(\"border\", \"1px solid #ddd\");\n        text.text(val);\n        pop.append(bg);\n        bg.append(line);\n        bg.append(btnGroup);\n        bg.append(wrap);\n        wrap.append(h);\n        wrap.append(line);\n        wrap.append(code);\n\n        var createEditor = function createEditor() {\n          require([\"ace\", 'ace-language'], function (ace, lnTools) {\n            var completions = [{\n              caption: 'target',\n              value: 'target',\n              metal: 'local'\n            }, {\n              caption: 'event',\n              value: 'event',\n              metal: 'local'\n            }];\n\n            for (var key in commonMethod.prototype) {\n              completions.push({\n                caption: key,\n                value: key,\n                metal: 'local'\n              });\n            }\n\n            ;\n            lnTools && typeof lnTools.addCompleter === \"function\" && lnTools.addComplete({\n              getCompletions: function getCompletions(editor, session, pos, prefix, callback) {\n                callback(null, completions);\n              }\n            });\n            editor = ace.edit(code[0]);\n            editor.session.setMode(\"ace/mode/html\");\n            editor.setTheme(\"ace/theme/tomorrow\"); // enable autocompletion and snippets\n\n            editor.setOptions({\n              enableBasicAutocompletion: true,\n              enableSnippets: true,\n              enableLiveAutocompletion: true\n            });\n            editor.on(\"change\", function (event) {\n              var json = editor.getValue(); //scope.ngModel = editor.getValue();\n\n              $$.runExpression(json, function (event) {\n                if (event.code != 0) console.error(event);\n              });\n              scope.$apply(function () {\n                scope.change();\n                scope.ngModel = editor.getValue();\n              });\n            });\n            editor.session.setMode(\"ace/mode/javascript\"); // insert someting\n\n            scope.ngModel = scope.ngModel || \"\";\n\n            if (_typeof(scope.ngModel) == \"object\") {\n              editor.insert(JSON.stringify(scope.ngModel, null, 2));\n            } else {\n              editor.insert(scope.ngModel);\n            }\n          });\n        };\n\n        var render = function render() {\n          echartContent.width(width);\n          $$.loadExternalJs(['../../toolkit/component/' + scope.rootTarget.type], function (preview) {\n            var advance = scope.rootTarget.getAdvance();\n            var style = scope.rootTarget.getStyle();\n            var data = scope.rootTarget.getSource();\n            var parameter = scope.rootTarget.getParameters();\n            rightContainer.find('#echartContent').children().remove();\n            var obj = new commonMethod({\n              advance: advance.data,\n              style: style.data,\n              parameter: parameter.data,\n              data: data.data\n            });\n            targetData = {\n              element: obj\n            };\n            rightContainer.find('#echartContent').append(preview(targetData));\n          });\n        };\n\n        var createRigthContent = function createRigthContent() {\n          if (type == \"prev\") {\n            wrap.append(text);\n          } else {\n            /**\n             * 替换编辑器ace以前的在下面注释着\n             * 右侧做一个预览图\n             * 需求1.运行代码会变\n             * 需求2.可以拖拽边沿缩放\n             * @type {ace}\n             */\n            var resize = $(\"<div></div>\");\n            rightContainer.css({\n              \"width\": \"60%\",\n              \"height\": \"calc(90% - 2px)\",\n              \"background\": \"#f3f3f3\",\n              \"z-index\": \"30\",\n              \"position\": \"absolute\",\n              \"right\": \"0\",\n              \"top\": \"52px\"\n            });\n            resize.css({\n              \"width\": \"2px\",\n              \"height\": \"100%\",\n              \"padding-top\": \"60px\",\n              \"cursor\": \"col-resize\",\n              \"background\": \"#ccc\"\n            });\n            resize.append(echartContent);\n            rightContainer.append(resize);\n            wrap.append(rightContainer);\n            /**\n             * div可以边框是实现滑动\n             */\n\n            var oBox = rightContainer[0];\n            var resize = resize[0];\n            var width = echartContent.parent().parent().width() - 30;\n\n            resize.onmousedown = function (ev) {\n              var iEvent = ev || event;\n              var dx = iEvent.clientX; //当你第一次单击的时候，存储x轴的坐标。\n\n              var dw = oBox.offsetWidth; //存储默认的div的宽度。\n\n              var disright = oBox.offsetLeft + oBox.offsetWidth; //存储默认div右边距离屏幕左边的距离。\n\n              document.onmousemove = function (ev) {\n                var iEvent = ev || event;\n                oBox.style.width = dw - (iEvent.clientX - dx) + 'px';\n                oBox.style.left = disright - oBox.offsetWidth + 'px';\n\n                if (oBox.offsetWidth <= 400) {\n                  oBox.style.width = \"400px\";\n                  oBox.style.left = disright - oBox.offsetWidth + 'px'; //防止抖动\n                } else {\n                  resizeFn();\n                }\n              };\n\n              document.onmouseup = function () {\n                document.onmousedown = null;\n                document.onmousemove = null;\n              };\n\n              render();\n              return false;\n            };\n          }\n        };\n\n        applyBtn.on(\"click\", function () {\n          popWrap.remove();\n        });\n        closeBtn.on(\"click\", function () {\n          popWrap.remove();\n        });\n        /**\n         * 点击运行按钮运行echart图\n         * 获取右边区域的宽度和高度\n         * 拖动边框大小echart跟着变动\n         * 页面加载进来echart加载成功\n         */\n\n        runBtn.on(\"click\", render);\n        setTimeout(function () {\n          if (scope.rootTarget) {\n            createRigthContent();\n          }\n\n          createEditor();\n        });\n        return pop;\n      };\n\n      prevBtn.on(\"click\", function (event) {\n        popWrap = createPop(\"prev\");\n        $(\"body\").prepend(popWrap);\n      });\n      editBtn.on(\"click\", function (event) {\n        popWrap = createPop(\"edit\");\n        $(\"body\").prepend(popWrap);\n      });\n    }\n\n    return directive;\n  }]);\n  directives.initDirective(\"kpiSelector\", [\"$timeout\", \"growl\", function (timeout, growl) {\n    var directive = {};\n    directive.scope = {\n      ngModel: \"=\",\n      options: \"=\",\n      target: \"=\",\n      show: \"=\",\n      config: \"=\"\n    };\n    directive.restrict = \"A\";\n    directive.link = link;\n\n    function link(scope, element, attr) {\n      timeout(function () {\n        var createHeader = function createHeader(item) {\n          var divRow = $(\"<div></div>\");\n          var colLeft = $(\"<div></div>\");\n          var colRight = $(\"<div></div>\");\n          var bottom = $(\"<div></div>\");\n          bottom.css(\"height\", \"1px\");\n          bottom.css(\"clear\", \"both\");\n          colLeft.text(\"变量名\");\n          colLeft.css(\"width\", \"50px\");\n          colLeft.css(\"float\", \"left\");\n          colLeft.css(\"text-align\", \"center\");\n          colLeft.css(\"line-height\", \"30px\");\n          colLeft.css(\"background-color\", \"#eee\");\n          colLeft.css(\"padding\", \"2px\");\n          colRight.css(\"width\", \"calc(100% - 50px)\");\n          colRight.css(\"float\", \"left\");\n          colRight.css(\"line-height\", \"30px\");\n          colRight.text(\"对应KPI指标\");\n          colRight.css(\"text-align\", \"center\");\n          colRight.css(\"background-color\", \"#eee\");\n          colRight.css(\"padding\", \"2px\");\n          divRow.append(colLeft);\n          divRow.append(colRight);\n          divRow.append(bottom);\n          return divRow;\n        };\n\n        var table = $(\"<div></div>\");\n        var content = $(\"<div></div>\");\n        table.css(\"width\", \"100%\");\n        table.css(\"border\", \"1px solid #ddd\");\n        table.append(createHeader());\n        table.append(content);\n        $(element).append(table);\n\n        var createPop = function createPop() {\n          content.children().remove();\n\n          var createRow = function createRow(attr, item) {\n            var divRow = $(\"<div></div>\");\n            var colLeft = $(\"<div></div>\");\n            var colRight = $(\"<div></div>\");\n            var select = $(\"<select></select>\");\n\n            var createEmpty = function createEmpty(op) {\n              var option = $(\"<option></option>\");\n              option.text(\"--请选择--\");\n              option.attr(\"value\", 0);\n              return option;\n            };\n\n            var createOption = function createOption(op) {\n              var option = $(\"<option></option>\");\n              option.text(op.label);\n              option.attr(\"value\", op.id);\n              return option;\n            };\n\n            if (!item) {\n              select.append(createEmpty());\n            }\n\n            ;\n\n            for (var j in scope.options) {\n              select.append(createOption(scope.options[j]));\n            }\n\n            ;\n            var bottom = $(\"<div></div>\");\n            bottom.css(\"height\", \"1px\");\n            bottom.css(\"clear\", \"both\");\n            select.addClass(\"form-control\");\n            select.attr(\"id\", \"kpi_\" + item.id);\n            colLeft.text(attr);\n            colLeft.css(\"width\", \"50px\");\n            colLeft.css(\"float\", \"left\");\n            colLeft.css(\"text-align\", \"center\");\n            colLeft.css(\"line-height\", \"30px\");\n            colLeft.css(\"padding\", \"2px\");\n            colRight.css(\"width\", \"calc(100% - 50px)\");\n            colRight.css(\"float\", \"left\");\n            colRight.css(\"padding\", \"2px\");\n            colRight.append(select);\n            divRow.append(colLeft);\n            divRow.append(colRight);\n            divRow.append(bottom);\n\n            if (item) {\n              select.val(item);\n            }\n\n            select.on(\"change\", function (event) {\n              var find = select.find(\"option[value=0]\");\n              find.remove();\n              scope.$apply(function () {\n                scope.ngModel[attr] = $(event.target).val();\n              });\n            });\n            return divRow;\n          };\n\n          for (var i in scope.ngModel) {\n            content.append(createRow(i, scope.ngModel[i]));\n          }\n\n          ;\n        };\n\n        scope.$watch(\"ngModel\", function (n, o, s) {\n          table.append(createPop());\n        });\n        scope.$watch(\"options\", function (n, o, s) {\n          table.append(createPop());\n        });\n      });\n    }\n\n    return directive;\n  }]);\n  directives.initDirective(\"exceloneline\", [\"$timeout\", function (timeout) {\n    var directive = {};\n    directive.scope = {\n      ngModel: \"=\"\n    };\n    directive.restrict = \"A\";\n    directive.link = link;\n\n    function link(scope, element, attr) {\n      var excelDom = $(\"<div></div>\");\n      timeout(function () {\n        element.append(excelDom);\n        $(element).css(\"overflow\", \"auto\");\n        $(element).css(\"margin\", \"5px auto\");\n        $(element).css(\"height\", \"100px\");\n        $(element).css(\"background-color\", \"#eee\");\n        $$.loadExternalJs([\"handsontable\"], function (ht) {\n          window.Handsontable = ht;\n          excelDom.handsontable({\n            data: [scope.ngModel],\n            rowHeaders: true,\n            colHeaders: true,\n            manualColumnResize: true,\n            manualRowResize: true,\n            minSpareCols: 1,\n            maxRows: 1\n          });\n        });\n      });\n    }\n\n    return directive;\n  }]);\n  directives.initDirective(\"cronGen\", [\"$timeout\", function (timeout) {\n    var directive = {};\n    directive.scope = {\n      ngModel: \"=\",\n      options: \"=\",\n      target: \"=\",\n      show: \"=\",\n      config: \"=\"\n    };\n    directive.restrict = \"A\";\n    directive.link = link;\n\n    function link(scope, element, attr) {\n      var editor;\n      var btnGroup = $(\"<div></div>\").addClass(\"input-group\");\n      var addOn = $(\"<div></div>\").addClass(\"input-group-btn\");\n      var prevBtn = $(\"<button></button>\").addClass(\"btn btn-default\").text(\"预览\");\n      var editBtn = $(\"<button></button>\").addClass(\"btn btn-primary\").text(\"编辑\");\n      var copyBtn = $(\"<button></button>\").addClass(\"btn btn-default\").text(\"复制代码\");\n      var pasteBtn = $(\"<button></button>\").addClass(\"btn btn-default\").text(\"粘贴代码\");\n      var input = $(\"<input />\").addClass(\"form-control\").css(\"pointer-events\", \"none\");\n      copyBtn.on(\"click\", function (event) {});\n      addOn.append(editBtn);\n      $(element).append(btnGroup);\n      btnGroup.append(input);\n      btnGroup.append(addOn);\n      scope.$watch(\"ngModel\", function (n, o, s) {\n        if (n) {\n          var val = objToString(n);\n          input.val(val);\n        }\n      });\n      scope.$watch(\"show\", function (n, o, s) {\n        if (n != undefined) {\n          $(element).css(\"display\", n ? \"block\" : \"none\");\n        }\n      });\n      var popWrap;\n\n      var createPop = function createPop(type) {\n        var val = objToString(scope.ngModel);\n        var code = $(\"<div></div>\");\n        var closeBtn = $(\"<button></button>\");\n        var applyBtn = $(\"<button></button>\");\n        var btnGroup = $(\"<div></div>\").addClass(\"btn-group btn-group-sm\");\n        btnGroup.css(\"position\", \"absolute\");\n        btnGroup.css(\"right\", \"27px\");\n        btnGroup.css(\"top\", \"20px\");\n        btnGroup.css(\"z-index\", 1);\n        closeBtn.addClass(\"btn btn-default\");\n        closeBtn.text(\"关闭\");\n        applyBtn.addClass(\"btn btn-primary\");\n        applyBtn.text(\"应用\");\n        btnGroup.append(applyBtn);\n        var pop = $(\"<div></div>\").css(\"position\", \"fixed\").css(\"z-index\", 99999);\n        var h = $(\"<div></div>\").text(\"编辑CRON表达式\").css(\"font-size\", \"16px\").css(\"line-height\", \"50px\").css(\"font-weight\", \"bold\").css(\"text-align\", \"center\").css(\"width\", \"100%\");\n        var text = $(\"<pre></pre>\").css(\"margin\", \"0px 10px\");\n        var line = $(\"<div></div>\").css(\"height\", \"1px\").css(\"width\", \"100%\");\n        var wrap = $(\"<div></div>\").css(\"width\", \"980px\").css(\"height\", \"750px\").css(\"position\", \"relative\").css(\"margin\", \"10px auto\").css(\"background-color\", \"#eee\").css(\"border\", \"1px solid #fff\").css(\"border-radius\", \"3px\");\n        var bg = $(\"<div></div>\").css(\"background-color\", \"rgba(0,0,0,.8)\").css(\"width\", \"100vw\").css(\"height\", \"100vh\");\n        text.text(val);\n        pop.append(bg);\n        bg.append(line);\n        bg.append(wrap);\n        wrap.append(btnGroup);\n        wrap.append(h);\n        wrap.append(line);\n\n        if (type == \"prev\") {\n          wrap.append(text);\n        } else {\n          wrap.append(code);\n          timeout(function () {\n            var requires = ['cronGen'];\n            code.css(\"position\", \"relative\");\n            code.css(\"width\", \"100%\");\n            code.css(\"border\", \"1px solid #ddd\");\n            code.css(\"overflow\", \"auto\");\n            $$.loadExternalJs(requires, function () {\n              var init = function init() {\n                code.cronGen({\n                  value: scope.ngModel,\n                  change: function change(event) {\n                    scope.$apply(function () {\n                      scope.ngModel = event.value;\n                    });\n                  }\n                });\n              };\n\n              init();\n            });\n          });\n        }\n\n        applyBtn.on(\"click\", function () {\n          popWrap.remove();\n        });\n        closeBtn.on(\"click\", function () {\n          popWrap.remove();\n        });\n        return pop;\n      };\n\n      prevBtn.on(\"click\", function (event) {\n        popWrap = createPop(\"prev\");\n        $(\"body\").prepend(popWrap);\n      });\n      editBtn.on(\"click\", function (event) {\n        popWrap = createPop(\"edit\");\n        $(\"body\").prepend(popWrap);\n      });\n    }\n\n    return directive;\n  }]);\n  directives.initDirective(\"numberInput\", [\"$timeout\", function (timeout) {\n    var directive = {};\n    directive.scope = {\n      \"ngModel\": \"=\",\n      \"ngMaxlength\": \"=\",\n      \"numberInput\": \"=\"\n    };\n    directive.restrict = \"A\";\n    directive.link = link;\n\n    function link(scope, element, attr) {\n      timeout(function () {\n        var numberMax = scope.numberInput;\n        $(element).on({\n          \"keydown\": function keydown(event) {\n            var keyCode = event.keyCode;\n\n            if (keyCode < 37 && keyCode != 8 && keyCode != 9 || keyCode > 40 && keyCode < 48 || keyCode > 57 && keyCode < 96 || keyCode > 105) {\n              event.preventDefault();\n            }\n\n            if (numberMax > 0) {\n              if ($(element).val().length > numberMax) {\n                event.preventDefault();\n              }\n            }\n          },\n          \"change\": function change(event) {\n            if (numberMax > 0) {\n              if ($(element).val().length > numberMax) {\n                $(element).val($(element).val().slice(0, numberMax));\n              }\n            }\n          }\n        });\n      });\n    }\n\n    return directive;\n  }]);\n  directives.initDirective(\"colorPicker\", [\"$timeout\", function (timeout) {\n    var directive = {};\n    directive.restrict = \"A\";\n    directive.scope = {\n      ngModel: \"=\",\n      change: \"&\"\n    };\n\n    directive.link = function (scope, element, attr) {\n      if ($(element).spectrum == undefined) {\n        require(['spectrum'], function () {\n          run();\n        });\n      } else {\n        run();\n      }\n\n      function run() {\n        scope.$watch(\"ngModel\", function (n, o, s) {\n          if (n) {\n            $(element).spectrum(\"set\", n);\n          }\n        });\n        $(element).spectrum({\n          allowEmpty: true,\n          showPalette: true,\n          showInput: true,\n          hideAfterPaletteSelect: true,\n          color: null,\n          change: function change(color) {\n            var colorCode;\n\n            if (color != null) {\n              colorCode = color.toRgbString();\n              $(\".block.active\").css(\"background-color\", colorCode);\n              $(\".block.active\").css(\"border-color\", colorCode);\n            } else {\n              colorCode = color;\n            }\n\n            scope.$apply(function () {\n              scope.ngModel = colorCode;\n            });\n          },\n          palette: [[null, \"#000\", \"#444\", \"#666\", \"#999\", \"#ccc\", \"#eee\", \"#f3f3f3\", \"#fff\"], [\"#f00\", \"#f90\", \"#ff0\", \"#0f0\", \"#0ff\", \"#00f\", \"#90f\", \"#f0f\"], [\"#f4cccc\", \"#fce5cd\", \"#fff2cc\", \"#d9ead3\", \"#d0e0e3\", \"#cfe2f3\", \"#d9d2e9\", \"#ead1dc\"], [\"#ea9999\", \"#f9cb9c\", \"#ffe599\", \"#b6d7a8\", \"#a2c4c9\", \"#9fc5e8\", \"#b4a7d6\", \"#d5a6bd\"], [\"#e06666\", \"#f6b26b\", \"#ffd966\", \"#93c47d\", \"#76a5af\", \"#6fa8dc\", \"#8e7cc3\", \"#c27ba0\"], [\"#c00\", \"#e69138\", \"#f1c232\", \"#6aa84f\", \"#45818e\", \"#3d85c6\", \"#674ea7\", \"#a64d79\"], [\"#900\", \"#b45f06\", \"#bf9000\", \"#38761d\", \"#134f5c\", \"#0b5394\", \"#351c75\", \"#741b47\"], [\"#600\", \"#783f04\", \"#7f6000\", \"#274e13\", \"#0c343d\", \"#073763\", \"#20124d\", \"#4c1130\"]]\n        });\n      }\n    };\n\n    return directive;\n  }]);\n  directives.initDirective(\"numberMax\", [\"$timeout\", function (timeout) {\n    var directive = {};\n    directive.scope = {};\n    directive.restrict = \"A\";\n    directive.link = link;\n\n    function link(scope, element, attr) {\n      var nmax = $$.switchToNumber(attr['numberMax']);\n\n      if (nmax > 0) {\n        timeout(function () {\n          $(element).on({\n            \"keydown\": function keydown(event) {\n              var keyCode = event.keyCode;\n\n              if ($(element).val().length > nmax) {\n                if (keyCode >= 48 && keyCode < 57 || keyCode >= 65 && keyCode < 90 || keyCode >= 96 && keyCode < 117) {\n                  event.preventDefault();\n                }\n              }\n            },\n            \"change\": function change(event) {\n              if ($(element).val().length > nmax) {\n                $(element).val($(element).val().slice(0, nmax));\n              }\n\n              scope.ngModel = $(element).val().slice(0, nmax);\n            }\n          });\n        });\n      }\n    }\n\n    return directive;\n  }]);\n  directives.initDirective(\"scrollableDiv\", [\"$timeout\", function (timeout) {\n    var directive = {};\n    directive.scope = {};\n    directive.template = \"<div class='scrollable-div'>\" + \"<div class='scrollable-div-wrap'>\" + \"<div class='scrollable-div-scroll-x'></div>\" + \"<div class='scrollable-div-scroll-y'>\" + \"<div class='scrollable-div-handler'></div>\" + \"</div>\" + \"</div>\" + \"<div class='scrollable-div-wrap-content'>\" + \"<div ng-transclude class='scrollable-div-content'></div>\" + \"</div>\" + \"</div>\";\n    directive.transclude = true;\n    directive.restrict = \"A\";\n    directive.link = link;\n\n    function link(scope, element, attr) {\n      var height, contentHeight, innerHeight, scrollTop, handleTop;\n      timeout(run);\n      $(window).on(\"resize\", run);\n\n      function run() {\n        scrollTop = $(element).find(\".scrollable-div-wrap-content\").scrollTop();\n        height = $(element).parent().height();\n        contentHeight = $(element).find('.scrollable-div-content').height();\n        $(element).find(\".scrollable-div\").css(\"height\", height);\n\n        if (contentHeight > height) {\n          innerHeight = height * height / contentHeight;\n          handleTop = scrollTop / (contentHeight - height) * (height - innerHeight);\n          $(element).find(\".scrollable-div-handler\").css({\n            height: innerHeight,\n            top: handleTop\n          });\n          $(element).find(\".scrollable-div-handler\").draggable({\n            containment: $(element).find(\".scrollable-div-scroll-y\"),\n            axis: \"y\",\n            cursor: \"pointer\",\n            drag: stopEvent\n          });\n        } else {\n          $(element).find(\".scrollable-div-scroll-y\").css(\"display\", \"none\");\n        }\n      }\n\n      function stopEvent(event, ui) {\n        var parentTop = $(element).offset().top;\n        var top = ui.offset.top;\n        var totalHeight = height - innerHeight;\n        var pos = top - parentTop;\n        $(element).find(\".scrollable-div-wrap-content\").css(\"overflow\", \"scroll\").scrollTop((contentHeight - height) * (pos / totalHeight)).css(\"overflow\", \"hidden\");\n      }\n    }\n\n    return directive;\n  }]);\n});"],"sourceRoot":"/source/"}