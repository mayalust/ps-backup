{"version":3,"sources":["js/services/common-method-service.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","define","services","BootstrapDialog","dateHandler","window","factory","location","$state","$stateParams","userEnterpriseService","timeout","rootScope","q","routeParam","Info","customMethodService","projectUIService","serviceCenterService","dictionaryService","energyConsumeUIService","ticketTaskService","resourceUIService","viewFlexService","userLoginUIService","route","growl","kpiDataService","SwSocket","alertService","userDomainService","thridPartyApiService","freeboardBaseService","configUIService","serviceProxy","FileUploader","maintenanceTaskUIService","sparePartUIService","deviceResumeUIService","rollerPartUIService","registerService","psTreeData","psUiRouterHandler","psLoading","unitService","cms2","popIns","keys","cache","viewCache","key","val","push","cms","mydata","scope","rootTarget","$getCurrentResource","$getResourceById","setValue","clickFnDic","events","timeIntervals","convertMeasureLoc","a","json","JSONparse","traverse","Object","toString","call","i","length","n","parseInt","splice","JSON","stringify","extend","b","clone","parse","str","e","themeCompare","default","Cyborg","Slate","Solar","cmethod","data","this","$clone","_proto_","kpiDic","resourceDic","createSystemPopup","object","config","depth","cur","renderTo","$","submitFn","closeBtn","setting","$attr","cancelFn","modelDia","contentDom","find","addClass","bgOpacity","css","content","text","title","outter","wrap","undefined","width","row","append","attr","destroy","animate","margin-top","remove","opacity","on","event","instance","setMode","groups","layout","$remapByChild","element","rs","submit","statuc","cancel","renderLayout","top","popupLayer","size","after","prepend","createPopup","showcloseBtn","bg","span","getSelfDom","left","right","bottom","border","color","backgroundColor","getParamsFromHash","hash","$$path","params","split","pop","clearEvents","refresh","getView","callback","match","view","item","path","testObj","regex","handler","d","viewId","ctrl","viewCtrl","word","RegExp","exec","console","warn","getConfig","createInjectorCtrlView","getViewById","elem","nographe","name","type","children","label","source","parameters","icon","id","perfix","advance","getfunction","expression","style","col","createRenderCtrl","ctrlname","defer","_newScope","$destroy","div","document","createElement","psrequire","render","error","resolve","promise","getRootScope","$$childHead","jsonp","url","funcname","script","num","Math","random","setAttribute","body","onerror","onload","getState","then","res","getChildren","l","resourceClick","paths","ext","self","getPathAndShowTreeLocation","showTree","index","navigateTo","$getKpisByModelId","modelId","modelLoader","models","kpiDics","getAllUnits","code","nextTick","fn","setTimeout","topDateString","diff","format","regexp","exp","divide","repeat","inx","rest","floor","replace","getAttrsByModelId","measureLocation","sourceValue","getDataItemsByModelId","saveDomainAreaLineTree","domaintree","mapFun","node","viewTitle","domains","filterNode","resourceType","map","customers","projects","devices","saveEditorStatus","getAttrsByResource","resource","values","MeasurePointLocate","getAttrsByResourceId","getResourceById","showLoading","closeLoading","getDomainAreaLineTree_alertStatus","getDomainAreaLineTree","toJSON","getAlertState","root","fillEmpty","arr","loop","binx","einx","start","value","end","getDateHandler","dateString","init","reStructSeries","returnData","removeDuplicate","some","kpiCode","arisingTime","time","sort","getTime","reduce","getMinGap","min","m","minus","step","minGap","startTime","endTime","xAxis","before","addTimeStamp","dt","time1","time2","series","off","eventname","forEach","getCurrentParents","parents","join","catch","message","$on","log","$apply","getEvents","trigger","$broadcast","uploadFile1","file","group","fileFormat","urlParam","uploader","origin","withCredentials","filters","options","nameAry","indexOf","warning","fileMaxSize","onWhenAddingFileFailed","filter","info","onCompleteItem","fileItem","response","status","headers","qualifiedName","clearQueue","addToQueue","queue","que","formData","resourceId","onCompleteAll","uploadAll","getAllConfigGroups","configGroups","saveConfigGroup","getKpiTypeByFilter","param","uploadResourceFile","postService","toFix","number","Number","le","pow","len","uploadFile","domainPath","groupName","invalid","keyDesc","api","service","method","fun","success","saveConfig","resultObj","upload","dom","global","initFn","Error","$$","runExpression","funRes","fnResult","target","getAlertValueList","category","isRealTimeData","timePeriod","kpiCodes","setSelfDom","selfDom","defineProperty","enumerable","getGroups","getTheme","themeStr","themeObj","theme","getPath","addView","msg","updateView","$cache","getKpiDic","getResourceDic","getTimesByDay","getEditorStatus","getConfigsByGroupName","configs","getCurrentUser","user","splitData","valueList","times","Date","timeSplit","structure","nodeId","inputEmpty","createMsgBox","get","template","setConsoleText","commontery","oldConsole","getValue","createUnderscore","current","$$route","controller","close","createSystemPopupByCtrlView","createSystemPopupByViewId","getViewContent","createPopupByViewIdPath","curl","hasOwnProperty","createSystemPopupByLocalPath","createSystemPopupByJsonName","jsonName","run","closePopup","getTimesByMonth","setRootTarget","rt","getKpiValueList","ci","kpi","extension","removeSameValue","nodeIds","$extension","getKpiValList","getKpiValueCi","getValues","createPopupBypath","isLocal","parent","readImageFile","FileReader","reader","evt","result","readAsDataURL","createOverlayBypath","getRootTarget","getPopupData","createPopupByViewId","getDataHandlers","barOption","tooltip","legend","yAxis","polylineOption","subtext","axisPointer","toolbox","show","feature","saveAsImage","boundaryGap","axisLabel","formatter","snap","visualMap","dimension","pieces","lte","gt","smooth","markArea","pieOption","x","orient","radius","center","itemStyle","emphasis","shadowBlur","shadowOffsetX","shadowColor","scatter3DOption","max","inRange","xAxis3D","yAxis3D","zAxis3D","grid3D","boxWidth","boxHeight","boxDepth","viewControl","splitLine","light","main","intensity","ambient","symbol","shading","textStyle","fontSize","borderWidth","bar3DOption","line3DOption","copyToClipBoard","loadExternalJs","Clipboard","clipboard","clearSelection","action","getIcons","icons","getCtrlGroupDemos","getRoleByID","roleID","roleArr","queryEnterpriseRole","returnObj","role","objLike","arrLike","test","triggerSocket","simuSend","getToolsMenu","getHelpMenu","pdf","getSignalShipInfo","getManyShipInfo","ids","getShipTrack","getAllConfigs","configGroupName","configGroup","deleteConfig","configId","deleteConfigGroup","groupId","createInfoHtml","cont","clickFn","onclickHandler","createShipShape","trailWidth","trailLength","headWidth","headLength","leftBottomPoint","renderExcel","filename","require","table","thead","tbody","loopTr","td","tr","table2excel","exclude","asyncRepeat","repeatCall","finish","queryDomainTree","isArryLike","cached","Promise","userID","$TreeObj","to","level","domainInfos","dtree","getAlertWord","getAlertColorPoint","getAlertColor","getdomainListName","domainPathList","domainList","getdomainNameHandler","domainPathListStr","domainListDic","domainId","getCurrentDomainCi","cacheAsyncData","getDevicesByCondition","extendstr","noCache","menuitems","currentRoleID","roleFunctionCodeMap","includeFields","vals","diagnosticType","NOT_IN","isEmptyObject","getCurrentDevices","getCurrentProject","project","projectId","getCurrentResource","getParameter","getCurrentCustomer","getCiKpi","model","resources","modelType","resfilltype","kpis","defers","ks","getKpis","getResource","all","copyJSONFileToClipBoard","wholeJSON","getLatestDevices","doTaskCloseAlert","ticketNo","getDeviceInfo","getTicketsByStatus","getAlertDeviceList","getTicketTasksByCondition","getTicketTasksByConditionAndPage","pageRequest","getDealTicketListByPage","claimAlert","getDeviceDiagnosticResumeOrTicketByPage","getTicketsByConditionAndPage","getUsersByDeviceIdAndRoleAndSpecialty","deviceId","roleId","specialty","complexHandleAgain","taskId","complexHandel","getKnowledgeByConditionWithPage","alertTaskMergeDeal","taskIds","getTicketsByCondition","getDealTicketList","doTask","doTask4Baogang","getTopicErrorDataList","topicErrorQueryModel","getComplexHandleListWithCategorys","selector","ticketTaskQueryModel","energyTypeList","dicts","getDevicesByFilter","deviceName","sn","getCurrentAlert","queryFromDb","getAlertByPage","pages","getAllAlerts","getAlerts","domain","setExpression","getCustomerFromCurrentUser","customerId","getCurrentAlertByProject","currentDirective","resId","getDirectivesByModelId","getProjectByTYpeId","projectTypeId","getProjectsType","projectType","getResourceByModelId","el","valueCode","reject","$getViewById","cv","rej","getViewByViewId","views","getCached","deleteValue","findProjectsByCondition","getCurrentProjects","getViewsByOnlyRole","viewType","sendDirective","dirId","sendDeviceDirective","sendItemDir","dir","itemDirValues","closable","buttons","cssClass","dialogRef","sendItemDirAll","$value","sendItemDirByValue","getAllDevices","getViewByViewTitle","getAllMyViews","setTimeInterval","getResources","navigateToTab","p","go","removeNull","analysisDataPrep","sensor","accessConfigs","setParameter","domainTree","physicalConfig","getProjectsAndKpiValue","cis","pushDiff","sloop","rptback","callback1","devis","device","callback2","getKpisByModelId","kpiDes","kpiMaps","valuelist","j","detail","alertFind","includeInstance","Synchook","hooks","tap","next","getProTypeByTypeId","getPages","pageArr","page","parameter","tabLabel","fromCache","getOnlineByKpiCodes","getValueList","navigateBackTo","href","navigateBack","para","oldParam","encodeURIComponent","moveTo","pageStr","slice","navigateToJson","$target","navigateToFeature","ROLE","backHistory","dic","D","Z","analType","moveToNodeByCondition","sub","minor","moveToNodeByIndex","historyBack","history","back","explainDic","getSimulateApi","simulate","randomText","strs","round","digital","getStartDate","alertTime","currentDate","addHour","getEndDate","wait","condition","http","getScope","setScopeValue","t","getScopeValue","linkTo","open","findViewHasProjectNameById","rootPath","getViewsOnlyPublishedByTypeAndDomainPath","getProjectsByCustomerId","nodesDes","kpisDes","simulateFn","timeStamp","timeStampToStr","nDate","year","getFullYear","month","getMonth","dat","getDate","hour","getHours","getMinutes","sec","getSeconds","renderData","period","frequency","range","getData","curTime","loopNodes","sampleData","ran","calcRandom","agentId","aggregatePeriod","aggregateStatus","aggregateType","compressCount","computeTaskId","dataSerialNumber","dataTime","insertTime","notes","numberValue","quality","stringValue","valueStr","loadArray","loadType","getDictValues","itm","every","loopKpis","loopInstance","ins1","loopInstance2","ins2","ranges","newTime","nextStep","renderData2D","aggr_type","loopAggrType","atype","renderData3D","getModels","getModelByIds","kpiId","md","getDomainsByFilter","getDomainsByFilters","getDeviceDiagnosticResumeAndAlertStatis","getDeviceDiagnosticResumeAndAlertBypage","queryDomainsByEnterpriseId","getProjectsByDomains","getCurrentProjectsFromDomain","findProjectById","getCurrentProjectsByCustom","subDomain","getViewByProjectId","deleteView","getDefaultView","getManagedViewsByTypeAndRole","getRoot","getViewByModelId","getSimulateList","uuid","webSocket","fixedid","unregister","paramSocket","ciid","operation","register","send","getKpiFromViewByTypeAndRole","socketCallback","valueDic","cells","z","cell","search","kpiDef","rootModelsDic","kpiName","attrs","kpiUnit","unitType","unitLabel","rangeObj","timeRange","statisticType","condList","returnAry","filterEnterprises","findEnterpriseInfoByDomainPath","industryType","queryEnterpriseListByHis","eventData","shortName","industryShortType","queryEnterprises","findEnterpriseInfos","queryDomains","nodeIdAry","enterpriseList","enterpriseId","modelDefinitionId","navigateToTracker","original","getDirectivesByTypeAndRole","directiveIds","dirctiveId","doubleCompare","getDirectivesByTypeAndRoleAndValue","directives","directive","queryBenchmarkByShortName","industryDic","energyDic","energyType","getAllDicts","dictCode","domainID","granularityUnit","dataType","instanceAry","instanceName","instanceCode","energyName","energyCode","getTaskBySimpleConditionAndPage","sortType","getDeviceFaultInfoList","saveDeviceFaultInfo","deleteDeviceFaultInfoById","getDeviceFaultBookList","saveDeviceFaultBook","deleteDeviceFaultBookById","getDeviceDiagnosticResumeListBypage","exportBGExcel","pageRequset","exportHBExcel","getRollerPartActionLogByCondition","getRollerPartByCondition","rollerTrust","rollerPartList","paramValues","rollerReelTrustReplace","actionLog","taskValues","getFactorySettlementByConditonAndPage","condtion","rollerReelTrust","pointCheckBatchDeal","ticketTaskList","createTempPointCheckTask","srcTaskList","changeDate","changeReason","changeTaskPlanTime","getPointCheckStatis","rollerOnBoard","createCycleReport","getCycleKpiList","sendCycleReportByTicket","getDeviceCycleReportReumeListByPage","getDatePickerListByCondition","pageSize","getPlanTaskTime","setPlanTaskTime","changeDatePickerBatch","srcDatePickerList","targetDate","saveDeviceWorkInfoList","deviceWorkInfoList","getWorkInfoByDeviceId","getDeviceConditionStatus","getModelAnalysisResultByConditionAndPage","PageRequest","getDailyReportByCondtionAndPage","getFaultDiagnosisModelByConditionAndPage","addFaultDiagnosisModel","deleteFaultDiagnosisModel","getCrackRateModelByConditionAndPage","addCrackRateModel","deleteFaultCrackRateModel","getCrackDiffModelByConditionAndPage","addCrackDiffModel","deleteCrackDiffModel","getDiagnosisModel","sendModelAnalysis","analysisTime","sendModelAnalysisTrain","trainType","endTim","getTaskByCondition","addPointCheckStanard","addMaintainStandardTask","addOfflineStandard","deleteTask","deleteMaintainStandardTask","addPreparedMaintainTrust","deleteSparePart","saveSparePart","getSparePartByDeviceId"],"mappings":"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","file":"js/services/common-method-service.js","sourcesContent":["function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/**\n * Created by leonlin on 16/11/3.\n */\ndefine(['./services.js', 'bootstrap-dialog', '../../toolkit/date-handler.js'], function (services, BootstrapDialog, dateHandler) {\n  'use strict';\n\n  var WIN = window || {};\n  services.factory('commonMethodService', ['$location', '$state', '$stateParams', 'userEnterpriseService', '$timeout', '$rootScope', '$q', '$routeParams', 'Info', 'customMethodService', 'projectUIService', 'serviceCenterService', 'dictionaryService', 'energyConsumeUIService', 'ticketTaskService', 'resourceUIService', 'viewFlexService', 'userLoginUIService', '$route', '$window', 'growl', 'kpiDataService', 'SwSocket', 'alertService', 'userDomainService', 'thridPartyApiService', 'freeboardBaseService', 'configUIService', 'serviceProxy', 'FileUploader', 'maintenanceTaskUIService', 'sparePartUIService', 'deviceResumeUIService', 'rollerPartUIService', '$registerService', 'psTreeData', 'psUiRouterHandler', 'psLoading', 'unitService', 'commonMethodService2', function (location, $state, $stateParams, userEnterpriseService, timeout, rootScope, q, routeParam, Info, customMethodService, projectUIService, serviceCenterService, dictionaryService, energyConsumeUIService, ticketTaskService, resourceUIService, viewFlexService, userLoginUIService, route, window, growl, kpiDataService, SwSocket, alertService, userDomainService, thridPartyApiService, freeboardBaseService, configUIService, serviceProxy, FileUploader, maintenanceTaskUIService, sparePartUIService, deviceResumeUIService, rollerPartUIService, registerService, psTreeData, psUiRouterHandler, psLoading, unitService, cms2) {\n    var popIns,\n        events = {};\n    var viewCache = createCache(),\n        resourceMap;\n\n    function createCache() {\n      var keys = [];\n\n      var cache = function cache(key, val) {\n        if (typeof val === \"undefined\") {\n          return cache[\"_\" + key];\n        }\n\n        cache[\"_\" + key] = val;\n        keys.push(key);\n      };\n\n      cache.keys = function () {\n        return keys;\n      };\n\n      return cache;\n    }\n\n    function cms(mydata, scope) {\n      var clickFnDic = {}; //按钮的返回集合\n\n      var alertMode = false;\n      var rootTarget;\n      var events = {};\n      var oldURL = \"\";\n      var setValue;\n      var timeIntervals = [];\n      var $getCurrentResource, $getResourceById, setValue; //window.addEventListener( \"hashchange\", hashkeyChangeListener );\n\n      function convertMeasureLoc(a) {\n        var json = JSONparse(a);\n\n        function traverse(a) {\n          if (Object.prototype.toString.call(a) == \"[object Array]\") {\n            for (var i = 0; i < a.length; i++) {\n              if (!a[i]['label'] && !a[i]['name']) {\n                traverse(a[i]);\n              } else {\n                var n = a[i]['name'];\n\n                if (parseInt(n) > 999) {\n                  a.splice(i, 1);\n                  i--;\n                }\n              }\n            }\n          } else if (Object.prototype.toString.call(a) == \"[object Object]\") {\n            for (var i in a) {\n              traverse(a[i]);\n            }\n          }\n        }\n\n        ;\n        traverse(json);\n        return JSON.stringify(json);\n      }\n\n      function extend(a, b) {\n        for (var i in b) {\n          a[i] = b[i];\n        }\n      }\n\n      function clone(obj) {\n        return JSON.parse(JSON.stringify(obj));\n      }\n\n      var routeStack = [];\n\n      var JSONparse = function JSONparse(str) {\n        var json;\n\n        if (_typeof(str) == \"object\") {\n          return str;\n        } else {\n          try {\n            json = JSON.parse(str);\n          } catch (e) {\n            json = null;\n          } finally {\n            return json;\n          }\n        }\n      };\n\n      var themeCompare = {\n        default: \"default\",\n        Cyborg: \"dark\",\n        Slate: \"dark\",\n        Solar: \"macarons\"\n      };\n\n      var cmethod = function cmethod(data) {\n        if (data) {\n          this.$clone(data);\n        }\n      };\n\n      var _proto_ = cmethod.prototype;\n      cmethod.kpiDic = {};\n      cmethod.resourceDic = {};\n      /**\n       * //  2D视图：柱状图（barOption）、折线图（polylineOption）、饼图（pieOption）\n       *     3D视图：散点图（scatter3DOption）、柱状图（bar3DOption）、折线图（line3DOption）\n       * @returns {option}\n       */\n\n      var createSystemPopup = function createSystemPopup(object, config, data, depth) {\n        var cur = this;\n        cur.setValue(\"$POPUPDATA\", data);\n        config = config || {};\n        var renderTo = $(\"body\");\n        var showcloseBtn = config.closeBtn;\n        var themeObj = rootTarget ? JSONparse(rootTarget.setting) : {\n          theme: \"default\"\n        }; // var theme = themeObj.theme || \"default\";\n\n        var theme = \"steel\";\n        var submitFn = config.$attr(\"on/submit\");\n        var cancelFn = config.$attr(\"on/cancel\");\n        var cur = this;\n        var modelDia = $('<div id=\"bootstrap-dialog\" class=\"modal bootstrap-dialog type-primary fade size-normal in\" style=\"display : table-cell;\" popup_layer=\"popup_layer\">\\\n        <div class=\"modal-dialog\">\\\n          <div class=\"modal-content\">\\\n          <div class=\"modal-header bg-f2 padding-bottom-20\">\\\n          <div class=\"bootstrap-dialog-header\">\\\n          <a role=\"button\" class=\"close\">×</a>\\\n        <h4 class=\"modal-title info-box-number\"></h4>\\\n          </div>\\\n          </div>\\\n          <div class=\"modal-body no-pad-top\">\\\n          </div>\\\n          </div>\\\n          </div>\\\n          </div>');\n        var contentDom = modelDia.find(\".modal-dialog\");\n        contentDom.addClass(theme); // 设置背景的透明度\n\n        var bgOpacity = config.bgOpacity;\n\n        if (bgOpacity) {\n          $(\".bootstrap-dialog\").css('background-color', \"rgba(0, 0, 0, 0.8)\");\n        }\n\n        contentDom.css(\"height\", \"auto\");\n        modelDia.addClass(\"block\");\n        contentDom.css(\"min-height\", \"0\");\n        var content = modelDia.find(\".modal-dialog\");\n        var title = modelDia.find(\"h4\");\n        title.text(config.title || \"标题文字\");\n        var outter = modelDia.find(\".modal-body\");\n        var bg = $(\"<div></div>\");\n        var wrap = $(\"<div></div>\");\n        var closeBtn = modelDia.find(\"a.close\");\n        var span = $(\"<div></div>\");\n        modelDia.css(\"z-index\", depth + 1 || 10000);\n\n        if (config.width != undefined) {\n          content.css(\"width\", config.width);\n        }\n\n        var row = $(\"<div></div>\");\n        row.addClass(\"row\");\n        row.append(wrap);\n        outter.append(row);\n        outter.attr(\"id\", \"pp\");\n        wrap.css(\"position\", \"relative\");\n        wrap.addClass(\"col-md-12\");\n        wrap.attr(\"id\", \"popup\");\n        wrap.css(\"width\", \"100%\");\n        wrap.css(\"padding-top\", \"10px\");\n\n        var destroy = function destroy() {\n          content.animate({\n            \"margin-top\": 0\n          }, 300, function () {\n            modelDia.remove();\n            cur.setValue(\"$POPUPDATA\", null);\n          });\n          modelDia.animate({\n            opacity: 0\n          }, 100);\n        };\n\n        closeBtn.on(\"click\", function (event) {\n          if (cancelFn) {\n            cancelFn();\n          }\n\n          destroy();\n        });\n        var instance = freeboardBaseService(wrap);\n        instance.setMode(true);\n\n        if (object.groups) {\n          object.layout = object.groups[0].layout;\n          delete object.groups;\n        }\n\n        if (object.layout) {\n          object.layout = object.layout.$remapByChild(function (element) {\n            var rs = new cmethod(element);\n\n            rs.submit = function (obj) {\n              if (obj.statuc == \"cancel\") {\n                destroy();\n              } else {\n                if (submitFn) {\n                  submitFn(obj, destroy);\n                }\n              }\n            };\n\n            rs.cancel = function () {\n              if (cancelFn) {\n                cancelFn();\n              }\n\n              destroy();\n            };\n\n            return rs;\n          });\n          instance.renderLayout(object);\n        }\n\n        modelDia.addClass(\"block\");\n        modelDia.attr(\"id\", \"free-board\");\n        modelDia.css(\"opacity\", 0);\n        modelDia.css(\"position\", \"absolute\");\n        modelDia.css(\"overflow-y\", \"auto\");\n        modelDia.animate({\n          opacity: 1\n        }, 100);\n        content.css(\"margin-top\", 0);\n        content.animate({\n          \"margin-top\": config.top\n        }, 300);\n        var popupLayer = $(\"[popup_layer]\");\n\n        if (popupLayer.size() > 0) {\n          popupLayer.after(modelDia);\n        } else {\n          renderTo.prepend(modelDia);\n        }\n\n        return {\n          destroy: destroy\n        };\n      };\n\n      var createPopup = function createPopup(object, config, data, depth) {\n        var cur = this;\n        cur.setValue(\"$POPUPDATA\", data);\n        config = config || {};\n        var renderTo = config.renderTo || $(\"body\");\n        var showcloseBtn = config.closeBtn;\n        var bgOpacity = config.bgOpacity;\n\n        if (bgOpacity == undefined) {\n          bgOpacity = .1;\n        }\n\n        var submitFn = config.$attr(\"on/submit\");\n        var cancelFn = config.$attr(\"on/cancel\");\n        var cur = this;\n        var outter = $(\"<div></div>\");\n        outter.attr(\"popup_layer\", \"popup_layer\");\n        var bg = $(\"<div></div>\");\n        var wrap = $(\"<div></div>\");\n        var closeBtn = $(\"<button></button>\");\n        var span = $(\"<div></div>\");\n        bg.attr(\"id\", \"popup_background\");\n        bg.css(\"position\", \"fixed\");\n        bg.css(\"width\", \"100vw\");\n        bg.css(\"height\", \"100vh\");\n        bg.css(\"background-color\", \"rgba(0,0,0,\" + bgOpacity + \")\");\n        bg.css(\"top\", 0);\n        bg.css(\"left\", 0);\n        bg.css(\"z-index\", depth || 9999);\n        outter.css(\"z-index\", depth + 1 || 10000);\n\n        if (renderTo == \"self\") {\n          renderTo = cur.getSelfDom();\n        }\n\n        if (config.top != undefined) {\n          outter.css(\"top\", config.top);\n        }\n\n        if (config.left != undefined) {\n          outter.css(\"left\", config.left);\n        }\n\n        if (config.right != undefined) {\n          outter.css(\"right\", config.right);\n        }\n\n        if (config.bottom != undefined) {\n          outter.css(\"bottom\", config.bottom);\n        }\n\n        closeBtn.css(\"position\", \"absolute\");\n        closeBtn.css(\"right\", 5);\n        closeBtn.css(\"top\", 5);\n        closeBtn.css(\"z-index\", 10);\n        closeBtn.addClass(\"btn-sm btn-default\");\n        closeBtn.css({\n          \"border\": \"1px solid rgb(67, 133, 187)\",\n          \"color\": \"#ffffff\",\n          \"backgroundColor\": \"rgb(67, 133, 187)\"\n        });\n        span.addClass(\"glyphicon glyphicon-remove\");\n        closeBtn.append(span);\n\n        if (showcloseBtn != false) {\n          outter.append(closeBtn);\n        }\n\n        outter.append(wrap);\n        outter.attr(\"id\", \"pp\");\n        wrap.css(\"position\", \"relative\");\n        wrap.addClass(\"col-md-12\");\n        wrap.attr(\"id\", \"popup\");\n        outter.css(\"position\", \"absolute\");\n        outter.css(\"width\", config.width || \"400px\");\n        wrap.css(\"width\", \"100%\");\n        wrap.css(\"background-color\", \"#fff\");\n        wrap.css(\"box-shadow\", \"1px 1px 10px 1px rgba(0,0,0,.1)\");\n\n        var remove = function remove() {\n          outter.animate({\n            opacity: 0\n          }, 200);\n          outter.remove();\n          bg.remove();\n          cur.setValue(\"$POPUPDATA\", null);\n        };\n\n        closeBtn.on(\"click\", function (event) {\n          outter.remove();\n\n          if (cancelFn) {\n            cancelFn();\n          }\n        });\n        bg.on(\"click\", function (event) {\n          if (cancelFn) {\n            cancelFn();\n          }\n\n          outter.remove();\n          bg.remove();\n        });\n        var instance = freeboardBaseService(wrap);\n        instance.setMode(true);\n        object.layout = object.layout.$remapByChild(function (element) {\n          var rs = new cmethod(element);\n\n          rs.submit = function (obj) {\n            if (submitFn) {\n              submitFn(obj);\n            }\n\n            outter.remove();\n            bg.remove();\n          };\n\n          rs.cancel = function () {\n            if (cancelFn) {\n              cancelFn();\n            }\n\n            outter.remove();\n            bg.remove();\n          };\n\n          return rs;\n        });\n        instance.renderLayout(object);\n        renderTo.prepend(outter);\n        outter.addClass(\"block\");\n        outter.css(\"opacity\", 0);\n        outter.animate({\n          opacity: 1\n        }, 100);\n        bg.css(\"opacity\", 0);\n        bg.animate({\n          opacity: 1\n        }, 200);\n        $(\"body\").append(bg);\n      };\n\n      var createOverlay = function createOverlay(object, config, data, depth) {\n        var cur = this;\n        cur.setValue(\"$POPUPDATA\", data);\n        config = config || {};\n        var renderTo = config.renderTo || \"self\";\n        var bgOpacity = config.bgOpacity;\n        var submitFn = config.$attr(\"on/submit\");\n        var cancelFn = config.$attr(\"on/cancel\");\n        var cur = this;\n        var outter = $(\"<div></div>\");\n        var bg = $(\"<div></div>\");\n        var wrap = $(\"<div></div>\");\n        var closeBtn = $(\"<button></button>\");\n        var span = $(\"<div></div>\");\n        outter.css(\"z-index\", depth + 1 || 50);\n\n        if (renderTo == \"self\") {\n          renderTo = cur.getSelfDom();\n        }\n\n        if (config.top != undefined) {\n          outter.css(\"top\", config.top);\n        }\n\n        if (config.left != undefined) {\n          outter.css(\"left\", config.left);\n        }\n\n        if (config.right != undefined) {\n          outter.css(\"right\", config.right);\n        }\n\n        if (config.bottom != undefined) {\n          outter.css(\"bottom\", config.bottom);\n        }\n\n        outter.append(wrap);\n        wrap.css(\"position\", \"relative\");\n        wrap.addClass(\"col-md-12\");\n        wrap.attr(\"id\", \"popup\");\n        outter.css(\"position\", \"absolute\");\n        outter.css(\"width\", config.width || \"400px\");\n        wrap.css(\"width\", \"100%\");\n        bg.append(outter);\n        var instance = freeboardBaseService(wrap);\n        instance.setMode(true);\n        object.layout = object.layout.$remapByChild(function (element) {\n          var rs = new cmethod(element);\n\n          rs.submit = function (obj) {\n            if (submitFn) {\n              submitFn(obj);\n            }\n\n            outter.remove();\n            bg.remove();\n          };\n\n          rs.cancel = function () {\n            if (cancelFn) {\n              cancelFn();\n            }\n\n            outter.remove();\n            bg.remove();\n          };\n\n          return rs;\n        });\n        instance.renderLayout(object);\n        outter.addClass(\"block\");\n        renderTo.prepend(outter);\n      };\n\n      var toString = function toString(obj) {\n        if (typeof obj == \"function\") {\n          return obj.toString();\n        } else if (typeof obj == null) {\n          return \"null\";\n        } else if (_typeof(obj) == \"object\") {\n          return JSON.stringify(obj, null, 2);\n        } else if (typeof obj == \"string\") {\n          return obj;\n        } else if (typeof obj == \"number\") {\n          return obj + \"\";\n        } else if (_typeof(obj) == undefined) {\n          return \"undefined\";\n        } else {\n          return \"无效字符\";\n        }\n      };\n\n      cmethod.clearEvents = cmethod.prototype.clearEvents = function () {\n        for (var i in events) {\n          delete events[i];\n        }\n      };\n\n      _proto_.refresh = cms2.refresh;\n\n      _proto_.getView = function (data, callback) {\n        var view = data.item,\n            config = getConfig(data.path),\n            viewId = config && config.viewId || view.viewId,\n            viewCtrl = config && config.viewCtrl,\n            path = config && config.path,\n            match;\n\n        function getConfig(path) {\n          var testObj = {\n            view: {\n              regex: \"^\\\\s*viewId\\\\s*\\\\:\\\\s*(\\\\d+)\\\\s*$\",\n              handler: function handler(d) {\n                return {\n                  viewId: d\n                };\n              }\n            },\n            ctrl: {\n              regex: \"^\\\\s*viewCtrl\\\\s*\\\\:\\\\s*([-$\\\\w\\\\d]+)\\\\s*$\",\n              handler: function handler(d) {\n                return {\n                  viewCtrl: d\n                };\n              }\n            },\n            word: {\n              regex: \"^\\\\s*[\\\\w\\\\d]+\\\\s*$\",\n              handler: function handler(d) {\n                return {\n                  path: d\n                };\n              }\n            }\n          };\n\n          for (var i in testObj) {\n            match = new RegExp(testObj[i].regex).exec(path);\n\n            if (match) {\n              return testObj[i].handler(match[1]);\n            }\n          }\n\n          console.warn(\"无效配置项，采用默认视图ID\");\n        }\n\n        function parse(str) {\n          var json = null;\n\n          try {\n            json = JSON.parse(str);\n          } catch (e) {\n            console.warn(e);\n          }\n\n          return json;\n        }\n\n        if (viewCtrl) {\n          callback && callback(_proto_.createInjectorCtrlView(viewCtrl));\n        } else if (viewId) {\n          _proto_.getViewById(viewId, function (view) {\n            var json = parse(view.content),\n                groups = json.groups;\n\n            if (json) {\n              json.layout = path && groups ? groups.find(function (elem) {\n                return elem.path == path;\n              }) : json.layout;\n              callback && callback(json);\n            } else {\n              _proto_.Info('../../localdb/echartTemplate/baogang/nographe.json', function (nographe) {\n                callback && callback(nographe);\n              });\n            }\n          });\n        } else {\n          _proto_.Info('../../localdb/echartTemplate/' + view.default + \".json\", function (json) {\n            if (path) {\n              var find = json.groups.find(function (elem) {\n                return elem.path == path;\n              });\n              json.layout = find.layout;\n            }\n\n            callback && callback(json);\n          });\n        }\n      };\n\n      _proto_.createInjectorCtrlView = function (name) {\n        var json = {\n          \"layout\": {\n            \"type\": \"column\",\n            \"children\": [{\n              \"label\": \"视图嵌入\",\n              \"type\": \"injector\",\n              \"source\": \"INJECTOR\",\n              \"parameters\": {\n                \"icon\": {\n                  \"id\": 0,\n                  \"perfix\": \"ion\",\n                  \"css\": \"ion-ios-gear-outline\"\n                }\n              },\n              \"advance\": {\n                \"getfunction\": \"\",\n                \"expression\": \"expression = {\\n  on : {\\n      init : function(event){\\n          var target = event.target;\\n          target.renderCtrl(\\\"\" + name + \"\\\");\\n      }\\n  }\\n}\"\n              },\n              \"style\": {},\n              \"children\": []\n            }],\n            \"col\": 12\n          },\n          \"setting\": \"{\\n  \\\"theme\\\": \\\"steel\\\"\\n}\"\n        };\n        return json;\n      };\n\n      _proto_.createRenderCtrl = function (ctrlname) {\n        var defer = q.defer();\n        window._newScope ? window._newScope.$destroy() : null;\n        var div = document.createElement(ctrlname),\n            deps = [\"../ps-baogang/build/directive/\" + ctrlname + \".js|css\"];\n        psrequire(deps, function (render) {\n          try {\n            render(registerService);\n          } catch (e) {\n            console.error(e);\n          }\n\n          defer.resolve(div);\n        });\n        return defer.promise;\n      };\n\n      cmethod.prototype.getRootScope = function (attr) {\n        if (attr) {\n          return rootScope.$$childHead[attr];\n        } else {\n          return rootScope.$$childHead;\n        }\n      }; //解决跨域\n\n\n      cmethod.prototype.jsonp = function (url, funcname, callback, error) {\n        function random(num) {\n          var rs = \"\",\n              str = \"0123456789abcdefjhijklmnopqrstuvwxyz\";\n\n          for (var i = 0; i < num; i++) {\n            rs += str[parseInt(Math.random() * (str.length - 1))];\n          }\n\n          ;\n          return rs;\n        }\n\n        ;\n        var script = document.createElement(\"script\"),\n            name = \"fn_\" + random(16);\n        script.setAttribute(\"src\", url + \"&\" + funcname + \"=\" + name);\n        document.body.append(script);\n\n        window[name] = function (d) {\n          callback && callback(d);\n          delete window[name];\n        };\n\n        script.onerror = function (e) {\n          error(e);\n          script.remove();\n          script = null;\n          console.error(e);\n        };\n\n        script.onload = function (e) {\n          script.remove();\n          script = null;\n        };\n      };\n\n      _proto_.getState = function (id, callback) {\n        psTreeData(id).getState().then(function (res) {\n          callback(res);\n        });\n      };\n\n      _proto_.getChildren = function (id, callback) {\n        psTreeData(id).getChildren(function (n, i, l) {\n          return l < 2;\n        }).then(function (children) {\n          callback(children);\n        });\n      };\n\n      _proto_.resourceClick = function (paths, id, ext) {\n        var self = this;\n        psTreeData(id).getPathAndShowTreeLocation().then(function (d) {\n          var showTree = d.showTree,\n              location = d.location,\n              params = {\n            showTree: showTree,\n            id: id,\n            index: location\n          };\n\n          if (ext) {\n            params = extend(params, ext);\n          }\n\n          self.navigateTo(location, paths, params);\n        });\n      };\n\n      _proto_.$getKpisByModelId = function (modelId, callback) {\n        resourceUIService.modelLoader().then(function (models) {\n          var kpiDics = models[modelId].kpiDic,\n              rs = [];\n\n          for (var i in kpiDics) {\n            rs.push(kpiDics[i]);\n          }\n\n          callback(rs);\n        });\n      };\n\n      _proto_.getAllUnits = function (callback) {\n        unitService.getAllUnits(function (d) {\n          if (d.code == \"0\") {\n            callback(d.data);\n          }\n        });\n      };\n\n      cmethod.prototype.nextTick = function (fn) {\n        setTimeout(fn, 500);\n      };\n\n      cmethod.prototype.topDateString = function (diff, format) {\n        var cur = this;\n        var regexp = [{\n          exp: /d+/g,\n          divide: 24 * 3600 * 1000\n        }, {\n          exp: /h+/g,\n          divide: 3600 * 1000\n        }, {\n          exp: /n+/g,\n          divide: 60 * 1000\n        }, {\n          exp: /s+/g,\n          divide: 60\n        }];\n        var inx = 0;\n\n        var repeat = function repeat(inx, rest) {\n          if (regexp[inx]) {\n            var fd = regexp[inx].exp.exec(format);\n\n            if (fd) {\n              var num = Math.floor(rest / regexp[inx].divide);\n              rest = rest % regexp[inx].divide;\n              format = format.replace(regexp[inx].exp, num + \"\");\n            }\n\n            repeat(inx + 1, rest);\n          }\n        };\n\n        repeat(inx, diff);\n        return format;\n      };\n      /**\n       * 获得模板的属性\n       * 注意：首先查看缓存中是否存在\n       * @param {Object} modelId\n       * @param {Object} callback\n       */\n\n\n      cmethod.prototype.getAttrsByModelId = function (modelId, callback) {\n        resourceUIService.getAttrsByModelId(modelId, function (data) {\n          if (data.code == 0) {\n            var measureLocation = _typeof(data.data) === \"object\" && data.data.find(function (e) {\n              return e.name == \"MeasurePointLocate\";\n            });\n\n            if (_typeof(measureLocation) === \"object\") {\n              measureLocation.sourceValue = convertMeasureLoc(measureLocation.sourceValue);\n            }\n\n            callback(data.data);\n          }\n        });\n      };\n      /**\n       * 获得模板的数据项\n       * 注意：首先查看缓存中是否存在\n       * @param {Object} modelId\n       * @param {Object} callback\n       */\n\n\n      cmethod.prototype.getDataItemsByModelId = function (modelId, callback) {\n        resourceUIService.getDataItemsByModelId(modelId, function (data) {\n          if (data.code == 0) {\n            callback(data.data);\n          }\n        });\n      };\n      /**\n       * 全局配置中保存域、客户、项目和设备同视图之间的关系\n       * @param {Object} domaintree\n       */\n\n\n      cmethod.prototype.saveDomainAreaLineTree = function (domaintree) {\n        var cur = this;\n\n        var mapFun = function mapFun(node) {\n          return {\n            id: node.id,\n            label: node.label,\n            view: {\n              viewId: node.view.viewId,\n              viewTitle: node.view.viewTitle\n            }\n          };\n        };\n\n        var view = domaintree.filterNode(function (node) {\n          return node.view;\n        });\n        var domains = domaintree.filterNode(function (node) {\n          return node.resourceType == \"domain\" && node.view;\n        }).map(mapFun);\n        var customers = domaintree.filterNode(function (node) {\n          return node.resourceType == \"customer\" && node.view;\n        }).map(mapFun);\n        var projects = domaintree.filterNode(function (node) {\n          return node.resourceType == \"project\" && node.view;\n        }).map(mapFun);\n        var devices = domaintree.filterNode(function (node) {\n          return node.resourceType == \"device\" && node.view;\n        }).map(mapFun);\n        var rs = {};\n\n        if (domains.length > 0) {\n          rs['domains'] = domains;\n        }\n\n        if (customers.length > 0) {\n          rs['customers'] = customers;\n        }\n\n        if (projects.length > 0) {\n          rs['projects'] = projects;\n        }\n\n        if (devices.length > 0) {\n          rs['devices'] = devices;\n        }\n\n        cur.saveEditorStatus(\"DomainAreaLineTree\", rs);\n      };\n      /**\n       * 获得域、客户、项目和设备的告警状态\n       * 更重要的是这里缓存了所有的设备\n       * @param {Object} callback\n       */\n\n\n      cmethod.prototype.getAttrsByResource = function (resource, callback) {\n        var measureLocation = resource.values.MeasurePointLocate;\n        resource.values.MeasurePointLocate = convertMeasureLoc(measureLocation);\n        callback(resource.values);\n      };\n\n      cmethod.prototype.getAttrsByResourceId = function (id, callback) {\n        this.getResourceById(id, function (resource) {\n          callback(resource.values);\n        });\n      }; // 打开请求转圈\n\n\n      cmethod.prototype.showLoading = function () {\n        psLoading.showLoading();\n      }; // 关闭请求转圈\n\n\n      cmethod.prototype.closeLoading = function () {\n        psLoading.closeLoading();\n      };\n\n      function toJSON(str) {\n        var obj = null;\n\n        try {\n          obj = JSON.parse(str);\n        } catch (e) {\n          console.error(e);\n          return null;\n        }\n\n        return obj;\n      }\n\n      _proto_.getDomainAreaLineTree_alertStatus = _proto_.getDomainAreaLineTree = function (callback) {\n        var param = toJSON($state.params[\"#\"]) || {},\n            id = $state.params[\"id\"];\n        psTreeData.getAlertState().then(function (root) {\n          return id ? psTreeData(id).getState() : psTreeData(root[0].id).getState();\n        }).then(function (node) {\n          callback(node);\n        });\n      };\n\n      cmethod.prototype.fillEmpty = function (arr) {\n        var loop = function loop(inx, arr) {\n          inx = parseInt(inx);\n\n          if (!arr[inx]) {\n            var binx = inx;\n            var einx = inx;\n            var start = {\n              value: 0\n            };\n            var end = {\n              value: 0\n            };\n            binx--;\n\n            while (binx >= 0) {\n              if (arr[binx] != null) {\n                start = arr[binx];\n                break;\n              } else {\n                binx--;\n              }\n            }\n\n            einx++;\n\n            while (einx < arr.length) {\n              if (arr[einx] != null) {\n                end = arr[einx];\n                break;\n              } else {\n                einx++;\n              }\n            }\n\n            arr[inx] = {\n              value: (start.value + end.value) * (inx - binx) / (einx - binx)\n            };\n          }\n        };\n\n        for (var i in arr) {\n          loop(i, arr);\n        }\n      };\n\n      cmethod.prototype.getDateHandler = cmethod.prototype.dateHandler = function (dateString) {\n        var dh = dateHandler.init(dateString);\n        return dh;\n      };\n\n      cmethod.prototype.reStructSeries = function (returnData) {\n        var cur = this;\n        var removeDuplicate = [];\n\n        for (var i in returnData) {\n          var some = removeDuplicate.some(function (elem) {\n            return elem.kpiCode == returnData[i].kpiCode && elem.instance == returnData[i].instance && elem.arisingTime == returnData[i].arisingTime;\n          });\n\n          if (!some) {\n            removeDuplicate.push(returnData[i]);\n          }\n        }\n\n        returnData = removeDuplicate.map(function (elem) {\n          elem.time = dateHandler.init(elem.arisingTime);\n          return elem;\n        });\n\n        var sortByTIme = function sortByTIme(a, b) {\n          var t1 = a.time.getTime();\n          var t2 = b.time.getTime();\n          return t1 - t2;\n        };\n\n        returnData.sort(sortByTIme);\n        var rs = returnData.reduce(function (a, b) {\n          var kpiCode = b.kpiCode;\n          var ins = b.instance;\n          var attr = kpiCode + \"_\" + ins;\n          a[attr] = a[attr] || [];\n          a[attr].push(b);\n          return a;\n        }, {});\n\n        var getMinGap = function getMinGap(arr) {\n          var min = 100000000000000000000;\n          arr.reduce(function (a, b) {\n            var m = b.time.minus(a.time);\n\n            if (m == 0) {}\n\n            if (m < min) {\n              min = m;\n            }\n\n            return b;\n          });\n          return min;\n        };\n\n        var step = 10000000000000000000;\n\n        for (var i in rs) {\n          var minGap = getMinGap(rs[i]);\n\n          if (minGap < step) {\n            step = minGap;\n          }\n        }\n\n        var startTime = returnData[0].time;\n        var endTime = returnData[returnData.length - 1].time;\n        var xAxis = [];\n\n        while (startTime.before(endTime)) {\n          xAxis.push(startTime.clone());\n          startTime.addTimeStamp(step);\n        }\n\n        startTime.addTimeStamp(step);\n        xAxis.push(startTime.clone());\n\n        for (var i in rs) {\n          var dt = [];\n          xAxis.reduce(function (a, b) {\n            var time1 = a.getTime();\n            var time2 = b.getTime();\n            var find = rs[i].find(function (elem) {\n              var time = elem.time.getTime();\n              return time >= time1 && time < time2;\n            });\n\n            if (find) {\n              dt.push(find);\n            } else {\n              dt.push(null);\n            }\n\n            return b;\n          });\n          rs[i] = cur.fillEmpty(dt);\n        }\n\n        return {\n          series: rs,\n          xAxis: xAxis\n        };\n      };\n\n      cmethod.prototype.off = function (eventname, callback) {\n        var arr = events[eventname] || [];\n        arr.forEach(function (destroy) {\n          destroy();\n        });\n      };\n\n      cmethod.prototype.on = function on(eventname, callback) {\n        if (eventname === \"tree_resourceChange\") {\n          var id = $state.params.id;\n          id ? this.getResourceById(id, function (res) {\n            rootScope.$apply(function () {\n              callback({\n                resource: res || {}\n              });\n            });\n          }) : null;\n          return;\n        } else if (eventname === \"changeNavString\") {\n          cms2.getCurrentParents().then(function (parents) {\n            callback(parents.map(function (d) {\n              return d.label;\n            }).join(\" > \"));\n          }).catch(function (e) {\n            growl.error(e.message);\n          });\n        } else if (eventname === \"$destroy\") {\n          scope.$on(\"$destroy\", callback);\n        }\n\n        events[eventname] = events[eventname] || [];\n        events[eventname].push((scope || rootScope).$on(eventname, function (event, data) {\n          console.log(\"on : \" + eventname);\n          callback(data);\n        }));\n      };\n\n      cmethod.prototype.getEvents = function () {\n        return events;\n      };\n\n      cmethod.prototype.trigger = function (eventname, data, callback) {\n        rootScope.$broadcast(eventname, data);\n      };\n\n      cmethod.prototype.uploadFile1 = function (file, config, callback) {\n        config = config || {};\n        config.params = []; //设置一个队列，存放返回的内容\n\n        var group = config.group;\n        var cur = this;\n\n        var start = function start() {\n          var fileFormat = config.fileFormat || rootScope.fileFormat || \"|jpg|png|jpeg|bmp|gif|svg|\";\n          var queueLimit = 1;\n          var fileMaxSize = 1;\n          var urlParam = 'api/rest/upload/resourceFileUIService/uploadResourceFile'; //改成可以定义上传路径的接口\n\n          if (config.url) {\n            urlParam = config.url;\n          }\n\n          var uploader = new FileUploader({\n            url: configUIService.origin + '/' + urlParam + '',\n            withCredentials: true\n          });\n          uploader.filters.push({\n            name: 'imageFilter',\n            fn: function fn(item\n            /*{File|FileLikeObject}*/\n            , options) {\n              var nameAry = item.name.split(\".\");\n              var type = nameAry[nameAry.length - 1];\n\n              if (fileFormat.indexOf(type) == -1) {\n                growl.warning(\"文件格式仅支持\" + fileFormat + \"文件，请重新选择\", {});\n                return false;\n              }\n\n              if (item.size / 1024 > fileMaxSize * 10000) {\n                growl.warning(\"您选择的文件大于\" + fileMaxSize + \"0M，请重新选择\", {});\n                return false;\n              }\n\n              return true;\n            }\n          });\n\n          uploader.onWhenAddingFileFailed = function (item\n          /*{File|FileLikeObject}*/\n          , filter, options) {\n            console.info('onWhenAddingFileFailed', item, filter, options);\n          };\n\n          uploader.onCompleteItem = function (fileItem, response, status, headers) {\n            if (response && response.code == 0) {\n              var obj = {\n                value: {}\n              };\n              obj.label = fileItem.file.name;\n              obj.qualifiedName = response.data.qualifiedName;\n              obj.value.qualifiedName = response.data.qualifiedName;\n              config.params.push(obj);\n            } else {\n              growl.error(\"操作异常了，尝试重新刷新\", {});\n            }\n          };\n\n          uploader.clearQueue();\n          uploader.addToQueue(file);\n          uploader.queue.forEach(function (que) {\n            if (config.formData) {\n              que.formData = [config.formData];\n            } else {\n              que.formData = [{\n                resourceId: 0,\n                value: 'images/dashboardImage'\n              }];\n            }\n          });\n\n          uploader.onCompleteAll = function () {\n            uploader.clearQueue();\n            callback(config.params);\n          };\n\n          uploader.uploadAll();\n        };\n\n        if (group) {\n          cur.getAllConfigGroups(function (configGroups) {\n            var some = configGroups.some(function (elem) {\n              return elem.name == group;\n            });\n\n            if (some) {\n              start();\n            } else {\n              cur.saveConfigGroup({\n                label: \"图片缓存(\" + group + \")\",\n                name: group\n              }, function (event) {\n                start();\n              });\n            }\n          });\n        } else {\n          start();\n        }\n      };\n\n      cmethod.prototype.getKpiTypeByFilter = function (param, callback) {\n        resourceUIService.getKpiTypeByFilter(param, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.uploadResourceFile = function () {\n        var cur = this;\n        var service = \"\";\n        cur.postService(\"resourceFileUIService\", \"uploadResourceFile\");\n      };\n\n      cmethod.prototype.toFix = function (str, num) {\n        num = num || 4;\n        str = str || \"0\";\n        var cur = this;\n        var number = Number(str);\n        var le = Math.pow(10, num);\n        var res = parseInt(number * le) / le + \"\";\n        var len = res.split(\".\")[1] || \"\";\n\n        if (len == \"\") {\n          res += \".\";\n        }\n\n        for (var i = 0; i < num - len.length; i++) {\n          res += \"0\";\n        }\n\n        return res;\n      };\n\n      cmethod.prototype.uploadFile = function (file, config, callback) {\n        config = config || {};\n        var group = config.group;\n        var cur = this;\n\n        var start = function start() {\n          var param = config.config || {\n            domainPath: \"\",\n            groupName: group || \"dashboardImage\",\n            id: 0,\n            invalid: false,\n            key: \"\",\n            keyDesc: \"\",\n            label: \"\",\n            value: \"\"\n          };\n          var api = config.api || {\n            service: \"resourceFileUIService\",\n            method: \"uploadResourceFile\",\n            fun: \"uploadConfig\"\n          };\n          api.fun = \"upload\"; //宝钢用\n\n          var fileFormat = config.fileFormat || rootScope.fileFormat || \"|jpg|png|jpeg|bmp|gif|svg|\";\n          var queueLimit = 1;\n          var fileMaxSize = 10;\n          var uploader = new FileUploader({\n            url: configUIService.origin + '/api/rest/' + api.fun + '/' + api.service + '/' + api.method,\n            withCredentials: true\n          });\n          uploader.filters.push({\n            name: 'imageFilter',\n            fn: function fn(item\n            /*{File|FileLikeObject}*/\n            , options) {\n              var nameAry = item.name.split(\".\");\n              var type = nameAry[nameAry.length - 1];\n\n              if (fileFormat.indexOf(type) == -1) {\n                growl.warning(\"文件格式仅支持\" + fileFormat + \"文件，请重新选择\", {});\n                return false;\n              }\n\n              if (item.size / 1024 > fileMaxSize * 1000) {\n                growl.warning(\"您选择的文件大于\" + fileMaxSize + \"M，请重新选择\", {});\n                return false;\n              }\n\n              return true;\n            }\n          });\n\n          uploader.onWhenAddingFileFailed = function (item\n          /*{File|FileLikeObject}*/\n          , filter, options) {\n            console.info('onWhenAddingFileFailed', item, filter, options);\n          };\n\n          uploader.onCompleteItem = function (fileItem, response, status, headers) {\n            console.info('onCompleteItem', response);\n\n            if (response) {\n              if (response.code == 0) {\n                var url = response.data;\n                param.value = url;\n                growl.success(\"图片上传成功\", {});\n                configUIService.saveConfig(param, function (resultObj) {\n                  callback(resultObj);\n                });\n              } else {\n                growl.error(response.message, {});\n              }\n            } else {\n              growl.error(\"操作异常了，尝试重新刷新\", {});\n            }\n          };\n\n          uploader.clearQueue();\n          uploader.addToQueue(file);\n\n          if (uploader.queue.length > 0) {\n            var que = uploader.queue[0];\n            param.label = que.file.name;\n            configUIService.saveConfig(param, function (resultObj) {\n              if (resultObj.code == 0) {\n                var id = resultObj.data.id;\n                param.id = id;\n                que.formData = [{\n                  resourceId: id,\n                  value: 'images/dashboardImage',\n                  id: id\n                }];\n                que.upload();\n              }\n            });\n          }\n        };\n\n        if (group) {\n          cur.getAllConfigGroups(function (configGroups) {\n            var some = configGroups.some(function (elem) {\n              return elem.name == group;\n            });\n\n            if (some) {\n              start();\n            } else {\n              cur.saveConfigGroup({\n                label: \"图片缓存(\" + group + \")\",\n                name: group\n              }, function (event) {\n                start();\n              });\n            }\n          });\n        }\n      };\n\n      cmethod.prototype.init = function (dom, global, config) {\n        var render = config.render;\n        var cur = this;\n\n        if (typeof render !== \"function\") {\n          throw new Error(\"render function is needed!!\");\n        }\n\n        var expression, style, parameters, initFn;\n        $$.runExpression(cur.$attr(\"advance/expression\"), function (funRes) {\n          if (funRes.code == \"0\") {\n            var fnResult = funRes.data;\n            expression = fnResult ? fnResult : {};\n          } else {\n            expression = {}; // console.log(funRes.message);\n            //throw new Error(funRes.message);\n          }\n\n          initFn = expression.$attr(\"on/init\");\n          style = cur.$attr(\"style\");\n          parameters = cur.$attr(\"parameters\");\n\n          if (style) {\n            $(dom).css(style);\n          }\n\n          cur.render = function (data) {\n            dom.append(render(data, expression, style, parameters));\n          };\n\n          if (initFn) {\n            try {\n              initFn({\n                target: cur,\n                global: global\n              });\n            } catch (e) {\n              cur.growl(e.message);\n            }\n          } else {\n            dom.append(render({}, expression, style, parameters));\n          }\n        });\n      };\n\n      cmethod.prototype.getAlertValueList = function (callback) {\n        var param = ['alert', {\n          category: 'ci',\n          isRealTimeData: true,\n          timePeriod: 0,\n          kpiCodes: [\"alert_code_count\"]\n        }];\n        this.postService(\"kpiDataFlexService\", \"getKpiHierarchyValueList\", param, function (returnData) {\n          if (returnData.code == 0) {\n            callback(returnData);\n          }\n        });\n      };\n\n      cmethod.prototype.setSelfDom = function (dom) {\n        this.selfDom = dom;\n        Object.defineProperty(this, \"selfDom\", {\n          enumerable: false\n        });\n      };\n\n      cmethod.prototype.getGroups = function () {\n        // console.log(rootTarget);\n        return rootTarget.groups;\n      };\n\n      cmethod.prototype.getTheme = function (themeStr) {\n        if (rootTarget) {\n          var themeObj = JSONparse(rootTarget.setting) || {\n            theme: \"default\"\n          };\n          themeStr = themeStr || \"default\";\n          themeStr = themeStr == \"auto\" ? themeCompare[themeObj.theme || \"default\"] : themeStr;\n          return themeStr;\n        } else {\n          return \"default\";\n        }\n      };\n\n      cmethod.prototype.getPath = function (path) {\n        var find = rootTarget.groups.find(function (elem) {\n          return path == elem.path;\n        }) || {};\n        return find;\n      };\n\n      cmethod.prototype.addView = function (param, callback) {\n        viewFlexService.addView(param, function (event) {\n          if (event.code == 0) {\n            if (typeof callback == \"function\") {\n              callback({\n                code: 0,\n                msg: param.viewTitle + \"添加成功\",\n                data: event.data\n              });\n            }\n          } else {\n            if (typeof callback == \"function\") {\n              callback({\n                code: event.code,\n                msg: param.viewTitle + \"添加失败,\" + event.message\n              });\n            }\n          }\n        });\n      };\n\n      cmethod.prototype.updateView = function (param, callback) {\n        viewFlexService.updateView(param, function (event) {\n          if (event.code == 0) {\n            if (typeof callback == \"function\") {\n              callback({\n                code: 0,\n                msg: param.viewTitle + \"添加成功\",\n                data: event.data\n              });\n            }\n          } else {\n            if (typeof callback == \"function\") {\n              callback({\n                code: event.code,\n                msg: param.viewTitle + \"添加失败,\" + event.message\n              });\n            }\n          }\n        });\n      };\n\n      cmethod.prototype.getSelfDom = function () {\n        return this.selfDom;\n      };\n\n      cms.$cache = cms.$cache || {};\n\n      cmethod.prototype.getKpiDic = function () {\n        return cmethod.kpiDic;\n      };\n\n      cmethod.prototype.getResourceDic = function () {\n        return cmethod.resourceDic;\n      };\n\n      cmethod.prototype.getTimesByDay = function (num) {\n        return num * 24 * 3600 * 100;\n      };\n      /**\n       * 获得全局配置\n       * @param {Object} str\n       * @param {Object} callback\n       */\n\n\n      cmethod.prototype.getEditorStatus = function (str, callback) {\n        var cur = this;\n        cur.getConfigsByGroupName(str, function (configs) {\n          if (configs.length > 0) {\n            callback(JSON.parse(configs[0].value));\n          } else {\n            callback(null);\n          }\n        });\n      };\n\n      cmethod.prototype.getCurrentUser = function () {\n        return userLoginUIService.user;\n      };\n      /**\n       * 保存并返回全局配置\n       * @param {Object} str\n       * @param {Object} val\n       */\n\n\n      cmethod.prototype.saveEditorStatus = function (str, val, callback) {\n        var cur = this;\n\n        var saveConfig = function saveConfig(config) {\n          var param = {\n            label: \"设计器缓存\",\n            value: JSON.stringify(val),\n            groupName: str\n          };\n\n          if (config) {\n            param.id = config.id;\n          }\n\n          cur.saveConfig(param, function (event) {\n            callback && callback(event);\n          });\n        };\n\n        var start = function start() {\n          cur.getConfigsByGroupName(str, function (configs) {\n            if (configs.length == 0) {\n              saveConfig();\n            } else {\n              saveConfig(configs[0]);\n            }\n          });\n        };\n\n        cur.getAllConfigGroups(function (configGroups) {\n          var some = configGroups.some(function (elem) {\n            return elem.name == str;\n          });\n\n          if (!some) {\n            cur.saveConfigGroup({\n              label: \"设计器缓存\",\n              name: str\n            }, function (event) {\n              start();\n            });\n          } else {\n            start();\n          }\n        });\n      };\n\n      cmethod.prototype.splitData = function (valueList) {\n        var times = valueList.map(function (elem) {\n          return new Date(elem.arisingTime).getTime();\n        });\n        var timeSplit = times.reduce(function (a, b) {\n          if (a.indexOf(b) == -1) {\n            a.push(b);\n          }\n\n          return a;\n        }, []);\n        var structure = valueList.reduce(function (a, b) {\n          var attr = b.nodeId + \":\" + b.kpiCode;\n\n          if (!a[attr]) {\n            a[attr] = [];\n          } else {\n            a[attr].push({\n              time: new Date(b.arisingTime).getTime(),\n              value: b.value\n            });\n          }\n\n          return a;\n        }, {});\n\n        var inputEmpty = function inputEmpty(arr) {\n          var rs = [];\n\n          for (var i in timeSplit) {\n            var find = arr.find(function (elem) {\n              return elem.time == times[i];\n            });\n\n            if (find) {\n              rs.push(find);\n            } else {\n              rs.push({\n                value: '-',\n                time: timeSplit[i]\n              });\n            }\n          }\n\n          return rs;\n        };\n\n        for (var i in structure) {\n          structure[i] = inputEmpty(structure[i]);\n        }\n\n        structure.times = timeSplit;\n        return structure;\n      };\n\n      cmethod.prototype.createMsgBox = function (config) {\n        var cur = this;\n        var path = \"../localdb/echartTemplate/msgbox.json\";\n\n        var run = function run(data) {\n          createSystemPopup.call(cur, data, {\n            width: config.width || \"600px\",\n            title: config.title,\n            on: config.on\n          }, {\n            text: config.message\n          }, 100002);\n        };\n\n        Info.get(path, function (template) {\n          window[path] = template;\n          run(window[path]);\n        });\n      };\n\n      cmethod.prototype.setConsoleText = function (str) {\n        var cur = this;\n        cur.setValue(\"$CONSOLELOG\", \"\");\n      };\n\n      cmethod.prototype.console = function (obj, commontery) {\n        var cur = this;\n        var path = \"../../localdb/echartTemplate/console.json\";\n        var oldConsole = cur.getValue(\"$CONSOLELOG\") || \"\";\n\n        var createUnderscore = function createUnderscore(num) {\n          var rs = \"\";\n\n          for (var i = 0; i < num; i++) {\n            rs += \"-\";\n          }\n\n          return rs;\n        };\n\n        cur.setValue(\"$CONSOLELOG\", oldConsole + \"//\" + createUnderscore(40) + (commontery || \"\") + createUnderscore(40) + \"\\n\" + \"console.log = \" + toString(obj) + \"\\n//\" + createUnderscore(100) + \"\\n\");\n\n        var run = function run(data) {\n          if (route.current.$$route.controller == \"freeStyleCtrl\") {\n            createPopup.call(cur, data, {\n              width: \"100vw\",\n              bottom: 0\n            }, cur.getValue(\"$CONSOLELOG\"), 100002);\n          }\n        };\n\n        Info.get(path, function (template) {\n          window[path] = template;\n          run(window[path]);\n        });\n      };\n\n      cmethod.prototype.close = function () {\n        popIns = popIns && popIns.destroy();\n      };\n\n      cmethod.prototype.submit = function (d) {\n        popIns && this.setValue(\"$POPUPDATA\", d);\n        popIns = popIns && popIns.destroy();\n      };\n\n      _proto_.createSystemPopupByCtrlView = function (viewCtrl, config, dt) {\n        var cur = this;\n        this.getView({\n          path: \"viewCtrl:\" + viewCtrl,\n          item: {}\n        }, function (json) {\n          popIns = createSystemPopup.call(cur, json, {\n            width: config.width || \"600px\",\n            title: config.title,\n            top: config.top || \"40px\",\n            on: config.on,\n            bgOpacity: config.bgOpacity || \"1\"\n          }, dt, 100002);\n        });\n      };\n\n      cmethod.prototype.createSystemPopupByViewId = function (viewId, config, dt) {\n        var cur = this;\n        cur.getViewById(viewId, function (view) {\n          var json = $$.getViewContent(view);\n\n          if (json) {\n            popIns = createSystemPopup.call(cur, json, {\n              width: config.width || \"600px\",\n              title: config.title,\n              top: config.top || \"40px\",\n              on: config.on,\n              bgOpacity: config.bgOpacity || \"1\"\n            }, dt, 100002);\n          }\n        });\n      };\n\n      cmethod.prototype.createPopupByViewIdPath = function (viewId, path, config, dt) {\n        var curl = this; // 根据viewId查询当前的视图\n\n        viewFlexService.getViewById(viewId, function (d) {\n          var content = JSON.parse(d.data.content);\n          var find;\n\n          if (content.hasOwnProperty(\"groups\")) {\n            find = content.groups.find(function (elem) {\n              return elem.path == path;\n            }) || {};\n          } else if (content.hasOwnProperty(\"layout\")) {\n            find = content.layout;\n          } else {\n            console.log(\"没有找到视图！\");\n          }\n\n          rootTarget = content;\n          createSystemPopup.call(curl, find, {\n            width: config.width || \"600px\",\n            title: config.title,\n            top: config.top || \"110px\",\n            on: config.on\n          }, dt, 100002);\n        });\n      };\n\n      cmethod.prototype.createSystemPopupByLocalPath = function (path, config, dt) {\n        var curl = this; // 根据viewId查询当前的视图\n\n        var viewId = $stateParams.viewId;\n        viewFlexService.getViewById(viewId, function (d) {\n          var content = JSON.parse(d.data.content);\n          var find;\n\n          if (content.hasOwnProperty(\"groups\")) {\n            find = content.groups.find(function (elem) {\n              return elem.path == path;\n            }) || {};\n          } else if (content.hasOwnProperty(\"layout\")) {\n            find = content.layout;\n          } else {\n            console.log(\"没有找到视图！\");\n          }\n\n          createSystemPopup.call(curl, find, {\n            width: config.width || \"600px\",\n            title: config.title,\n            top: config.top || \"110px\",\n            on: config.on\n          }, dt, 100002);\n        });\n      };\n\n      cmethod.prototype.createSystemPopupByJsonName = function (jsonName, config, dt) {\n        var cur = this;\n        var path = \"../localdb/echartTemplate/\" + jsonName + \".json\";\n\n        var run = function run(data) {\n          createSystemPopup.call(cur, data, {\n            width: config.width || \"600px\",\n            title: config.title,\n            on: config.on\n          }, dt, 100002);\n        };\n\n        if (!window[path]) {\n          Info.get(path, function (template) {\n            window[path] = template;\n            run(window[path]);\n          });\n        } else {\n          run(window[path]);\n        }\n      };\n\n      cmethod.prototype.console = function (obj, commontery) {\n        var cur = this;\n        var path = \"../localdb/echartTemplate/console.json\";\n        var oldConsole = cur.getValue(\"$CONSOLELOG\") || \"\";\n\n        var createUnderscore = function createUnderscore(num) {\n          var rs = \"\";\n\n          for (var i = 0; i < num; i++) {\n            rs += \"-\";\n          }\n\n          return rs;\n        };\n\n        cur.setValue(\"$CONSOLELOG\", oldConsole + \"//\" + createUnderscore(40) + (commontery || \"\") + createUnderscore(40) + \"\\n\" + \"console.log = \" + toString(obj) + \"\\n//\" + createUnderscore(100) + \"\\n\");\n\n        var run = function run(data) {\n          if (route.current.$$route.controller == \"freeStyleCtrl\") {\n            createPopup.call(cur, data, {\n              width: \"100vw\",\n              bottom: 0\n            }, cur.getValue(\"$CONSOLELOG\"), 100002);\n          }\n        };\n\n        Info.get(path, function (template) {\n          window[path] = template;\n          run(window[path]);\n        });\n      };\n\n      cmethod.prototype.Info = function (path, callback) {\n        Info.get(path, function (template) {\n          callback(template);\n        });\n      };\n\n      cmethod.prototype.closePopup = function () {};\n\n      cmethod.prototype.getTimesByMonth = function (num) {\n        return num * 30 * 24 * 3600 * 100;\n      };\n\n      cmethod.prototype.setRootTarget = function (rt) {\n        rootTarget = rt;\n      };\n\n      cmethod.prototype.getKpiValueList = function (ci, kpi, time, callback, extension) {\n        /**\n         var nodeIds = removeSameValue(ci);\n         var kpiCodes = removeSameValue(kpi);\n         var queryInstances = extension.queryInstances;\n         var rs = [];\n         var cur = this;\n         function removeSameValue(arr) {\n        var rs = [];\n        for (var i in arr) {\n          if (rs.indexOf(arr[i]) == -1) {\n            rs.push(arr[i]);\n          }\n        }\n        return rs;\n        }\n         for(var i = 0; i < nodeIds.length; i++){\n        for(var j = 0; j < kpiCodes.length; j++){\n          var d = new Date().getTime();\n          for(var k = 0; k < 1000; k++){\n            rs.push({\n              nodeId : nodeIds[i],\n              kpiCode : kpiCodes[j],\n              instance : queryInstances,\n              value : parseInt(Math.random() * 100),\n              arisingTime : cur.getDateHandler(d).addSecond(k * 10).getDateString()\n            })\n          }\n        }\n        }\n         console.log(rs);\n         setTimeout(function(){\n        callback(rs);\n        }, 1000 * kpiCodes.length);\n         */\n        var removeSameValue = function removeSameValue(arr) {\n          var rs = [];\n\n          for (var i in arr) {\n            if (rs.indexOf(arr[i]) == -1) {\n              rs.push(arr[i]);\n            }\n          }\n\n          return rs;\n        };\n\n        var param = {\n          nodeIds: removeSameValue(ci),\n          kpiCodes: removeSameValue(kpi)\n        };\n\n        if (time) {\n          param.timePeriod = time;\n        }\n\n        if (0 == time) {\n          param.timePeriod = 0;\n        }\n\n        param = param.$extension(extension);\n        var extendstr = \"includeFields=kpiCode,value,nodeId,arisingTime,instance\"; // var extendstr = \"includeFields=kpiCode,values.view,nodeId,arisingTime,instance\";\n\n        kpiDataService.getKpiValList(param, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback([]);\n          }\n        }, extendstr);\n      };\n\n      cmethod.prototype.getKpiValueCi = function (ci, kpi, callback, extension) {\n        serviceCenterService.getValues(ci, kpi, extension).then(function (data) {\n          callback(data);\n        });\n      };\n\n      cmethod.prototype.createPopupBypath = function (path, config, data, isLocal) {\n        var cur = this; // var targetRoot = cur.getRootTarget();\n        // var find = targetRoot.groups.find(function (elem) {\n        //   return elem.path == path;\n        // });\n\n        var root = cur;\n\n        while (root.parent) {\n          root = root.parent;\n        }\n\n        var groups = root.root.groups;\n        var find = groups.find(function (elem) {\n          return elem.path == path;\n        }) || {};\n\n        if (route.current.$$route.controller != \"freeBoardCtrl\") {\n          if (find) {\n            var type = config.theme || \"default\";\n\n            if (type == \"default\") {\n              createPopup.call(cur, find, config, data);\n            } else if (type == \"system\") {\n              createSystemPopup.call(cur, find, config, data);\n            } else {\n              createPopup.call(cur, find, config, data);\n            }\n          }\n        }\n      };\n\n      cmethod.prototype.readImageFile = function (file, callback) {\n        if (typeof FileReader !== \"undefined\" && file.type.indexOf(\"image\") != -1) {\n          var reader = new FileReader();\n\n          reader.onload = function (evt) {\n            callback(evt.target.result);\n          };\n\n          reader.readAsDataURL(file);\n        }\n      };\n\n      cmethod.prototype.createOverlayBypath = function (path, config, data, isLocal) {\n        var cur = this;\n        var targetRoot = cur.getRootTarget();\n        var find = targetRoot.groups.find(function (elem) {\n          return elem.path == path;\n        });\n\n        if (route.current.$$route.controller != \"freeBoardCtrl\") {\n          if (find) {\n            createOverlay.call(cur, find, config, data);\n          }\n        }\n      };\n\n      cmethod.prototype.getPopupData = function () {\n        return this.getValue(\"$POPUPDATA\");\n      };\n\n      cmethod.prototype.createPopupByViewId = function (id, config, data) {\n        var cur = this;\n        cur.getViewById(id, function (view) {\n          var json = $$.getViewContent(view);\n\n          if (json) {\n            createPopup.call(cur, json, config, data);\n          }\n        });\n      };\n\n      cmethod.prototype.getDataHandlers = function (ci, kpi, callback, extension) {\n        return [{\n          id: 0,\n          label: \"不裁剪数据\",\n          text: \"function init(event){\\n    var global = event.global;\\n    var resources = event.resourceId;\\n    var kpis = event.kpiId;\\n    var timePeriod = event.timePeriod;\\n    var data = event.data;\\n    global.fire(\\\"renderList\\\", data);\\n}\"\n        }, {\n          id: 1,\n          label: \"适合线图的数据\",\n          text: \"function init(source){\\n  var formatter=function(elem){\\n    return elem.value;\\n   }\\n  return source.ci.getSeries(formatter);\\n}\"\n        }, {\n          id: 2,\n          label: \"适合饼图的数据\",\n          text: \"function init(source){\\n  var formatter=function(elem){\\n    return elem.value;\\n   }\\n  return source.ci.getSeries(formatter);\\n}\"\n        }, {\n          id: 3,\n          label: \"适合柱图的数据\",\n          text: \"function init(source){\\n  var formatter=function(elem){\\n    return elem.value;\\n   }\\n  return source.ci.getSeries(formatter);\\n}\"\n        }, {\n          id: 4,\n          label: \"适合柱图的数据\",\n          text: \"function init(source){\\n  var formatter=function(elem){\\n    return elem.value;\\n   }\\n  return source.ci.getSeries(formatter);\\n}\"\n        }];\n      };\n\n      cmethod.prototype.barOption = function () {\n        return {\n          title: {\n            text: 'ECharts 入门示例'\n          },\n          tooltip: {},\n          legend: {\n            data: ['销量']\n          },\n          xAxis: {\n            data: [\"衬衫\", \"羊毛衫\", \"雪纺衫\", \"裤子\", \"高跟鞋\", \"袜子\"]\n          },\n          yAxis: {},\n          series: [{\n            name: '销量',\n            type: 'bar',\n            data: [5, 20, 36, 10, 10, 20]\n          }]\n        };\n      };\n\n      cmethod.prototype.polylineOption = function () {\n        return {\n          title: {\n            text: '一天用电量分布',\n            subtext: '纯属虚构'\n          },\n          tooltip: {\n            trigger: 'axis',\n            axisPointer: {\n              type: 'cross'\n            }\n          },\n          toolbox: {\n            show: true,\n            feature: {\n              saveAsImage: {}\n            }\n          },\n          xAxis: {\n            type: 'category',\n            boundaryGap: false,\n            data: ['00:00', '01:15', '02:30', '03:45', '05:00', '06:15', '07:30', '08:45', '10:00', '11:15', '12:30', '13:45', '15:00', '16:15', '17:30', '18:45', '20:00', '21:15', '22:30', '23:45']\n          },\n          yAxis: {\n            type: 'value',\n            axisLabel: {\n              formatter: '{value} W'\n            },\n            axisPointer: {\n              snap: true\n            }\n          },\n          visualMap: {\n            show: false,\n            dimension: 0,\n            pieces: [{\n              lte: 6,\n              color: 'green'\n            }, {\n              gt: 6,\n              lte: 8,\n              color: 'red'\n            }, {\n              gt: 8,\n              lte: 14,\n              color: 'green'\n            }, {\n              gt: 14,\n              lte: 17,\n              color: 'red'\n            }, {\n              gt: 17,\n              color: 'green'\n            }]\n          },\n          series: [{\n            name: '用电量',\n            type: 'line',\n            smooth: true,\n            data: [300, 280, 250, 260, 270, 300, 550, 500, 400, 390, 380, 390, 400, 500, 600, 750, 800, 700, 600, 400],\n            markArea: {\n              data: [[{\n                name: '早高峰',\n                xAxis: '07:30'\n              }, {\n                xAxis: '10:00'\n              }], [{\n                name: '晚高峰',\n                xAxis: '17:30'\n              }, {\n                xAxis: '21:15'\n              }]]\n            }\n          }]\n        };\n      };\n\n      cmethod.prototype.pieOption = function () {\n        return {\n          title: {\n            text: '某站点用户访问来源',\n            subtext: '纯属虚构',\n            x: 'center'\n          },\n          tooltip: {\n            trigger: 'item',\n            formatter: \"{a} <br/>{b} : {c} ({d}%)\"\n          },\n          legend: {\n            orient: 'vertical',\n            left: 'left',\n            data: ['直接访问', '邮件营销', '联盟广告', '视频广告', '搜索引擎']\n          },\n          series: [{\n            name: '访问来源',\n            type: 'pie',\n            radius: '55%',\n            center: ['50%', '60%'],\n            data: [{\n              value: 335,\n              name: '直接访问'\n            }, {\n              value: 310,\n              name: '邮件营销'\n            }, {\n              value: 234,\n              name: '联盟广告'\n            }, {\n              value: 135,\n              name: '视频广告'\n            }, {\n              value: 1548,\n              name: '搜索引擎'\n            }],\n            itemStyle: {\n              emphasis: {\n                shadowBlur: 10,\n                shadowOffsetX: 0,\n                shadowColor: 'rgba(0, 0, 0, 0.5)'\n              }\n            }\n          }]\n        };\n      };\n\n      cmethod.prototype.scatter3DOption = function () {\n        var hours = ['12a', '1a', '2a', '3a', '4a', '5a', '6a', '7a', '8a', '9a', '10a', '11a', '12p', '1p', '2p', '3p', '4p', '5p', '6p', '7p', '8p', '9p', '10p', '11p'];\n        var days = ['1', '2', '3', '4', '5', '6', '7'];\n        var data = [[12, 0, 10], [3, 3, 15], [4, 3, 20], [10, 1, 12], [3, 0, 14]];\n        var option = {\n          tooltip: {},\n          visualMap: {\n            right: 0,\n            max: 20,\n            inRange: {\n              color: ['#313695', '#4575b4', '#74add1', '#abd9e9', '#e0f3f8', '#ffffbf', '#fee090', '#fdae61', '#f46d43', '#d73027', '#a50026']\n            }\n          },\n          xAxis3D: {\n            type: 'category',\n            data: hours\n          },\n          yAxis3D: {\n            type: 'category',\n            data: days\n          },\n          zAxis3D: {\n            type: 'value'\n          },\n          grid3D: {\n            boxWidth: 160,\n            boxHeight: 40,\n            boxDepth: 90,\n            viewControl: {// projection: 'orthographic'\n            },\n            // environment: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n            //   offset: 0, color: '#00aaff' // 天空颜色\n            // }, {\n            //   offset: 0.7, color: '#998866' // 地面颜色\n            // }, {\n            //   offset: 1, color: '#998866' // 地面颜色\n            // }], false),\n            splitLine: {\n              show: true\n            },\n            axisPointer: {\n              show: true\n            },\n            light: {\n              main: {\n                intensity: 1.4 //                    shadow: true\n\n              },\n              ambient: {\n                intensity: 0.3\n              }\n            }\n          },\n          series: [{\n            name: \"散点图\",\n            type: 'scatter3D',\n            symbol: 'arrow',\n            //            data: [{\n            //                // 数据项的名称\n            //                name: '数据1',\n            //                // 数据项值\n            //                value: [12, 3, 10]\n            //            }, {\n            //                name: '数据2',\n            //                value: [3, 5, 15],\n            //                itemStyle:{\n            //                    color:[255, 233, 1, 0.5]\n            //                }\n            //            }],\n            data: data.map(function (item) {\n              return {\n                value: [item[1], item[0], item[2]]\n              };\n            }),\n            shading: 'lambert',\n            label: {\n              textStyle: {\n                fontSize: 12,\n                borderWidth: 1\n              } //                formatter: '{a}: {b}'\n\n            },\n            emphasis: {\n              label: {\n                textStyle: {\n                  fontSize: 20,\n                  color: '#900'\n                }\n              },\n              itemStyle: {\n                color: '#900'\n              }\n            }\n          }]\n        };\n        return option;\n      };\n\n      cmethod.prototype.bar3DOption = function () {\n        var hours = ['12a', '1a', '2a', '3a', '4a', '5a', '6a', '7a', '8a', '9a', '10a', '11a', '12p', '1p', '2p', '3p', '4p', '5p', '6p', '7p', '8p', '9p', '10p', '11p'];\n        var days = ['1', '2', '3', '4', '5', '6', '7'];\n        var data = [[12, 0, 10], [3, 3, 15], [4, 3, 20], [10, 1, 12], [3, 0, 14]];\n        var option = {\n          tooltip: {},\n          visualMap: {\n            max: 20,\n            inRange: {\n              color: ['#313695', '#4575b4', '#74add1', '#abd9e9', '#e0f3f8', '#ffffbf', '#fee090', '#fdae61', '#f46d43', '#d73027', '#a50026']\n            }\n          },\n          xAxis3D: {\n            type: 'category',\n            data: hours\n          },\n          yAxis3D: {\n            type: 'category',\n            data: days\n          },\n          zAxis3D: {\n            type: 'value'\n          },\n          grid3D: {\n            boxWidth: 200,\n            boxHeight: 40,\n            boxDepth: 90,\n            light: {\n              main: {\n                intensity: 1.2\n              },\n              ambient: {\n                intensity: 0.3\n              }\n            }\n          },\n          series: [{\n            type: 'bar3D',\n            data: data.map(function (item) {\n              return {\n                value: [item[1], item[0], item[2]]\n              };\n            }),\n            shading: 'color',\n            label: {\n              show: false,\n              textStyle: {\n                fontSize: 16,\n                borderWidth: 1\n              }\n            },\n            itemStyle: {\n              opacity: 0.8\n            },\n            emphasis: {\n              label: {\n                textStyle: {\n                  fontSize: 20,\n                  color: '#900'\n                }\n              },\n              itemStyle: {\n                color: '#900'\n              }\n            }\n          }]\n        };\n        return option;\n      };\n\n      cmethod.prototype.line3DOption = function () {\n        var hours = ['12a', '1a', '2a', '3a', '4a', '5a', '6a', '7a', '8a', '9a', '10a', '11a', '12p', '1p', '2p', '3p', '4p', '5p', '6p', '7p', '8p', '9p', '10p', '11p'];\n        var days = ['1', '2', '3', '4', '5', '6', '7'];\n        var data = [[12, 0, 10], [3, 3, 15], [4, 3, 20], [10, 1, 12], [3, 0, 14]];\n        var option = {\n          tooltip: {},\n          visualMap: {\n            max: 20,\n            inRange: {\n              color: ['#313695', '#4575b4', '#74add1', '#abd9e9', '#e0f3f8', '#ffffbf', '#fee090', '#fdae61', '#f46d43', '#d73027', '#a50026']\n            }\n          },\n          xAxis3D: {\n            type: 'category',\n            data: hours\n          },\n          yAxis3D: {\n            type: 'category',\n            data: days\n          },\n          zAxis3D: {\n            type: 'value'\n          },\n          grid3D: {\n            boxWidth: 180,\n            boxHeight: 40,\n            boxDepth: 90,\n            light: {\n              main: {\n                intensity: 1.2\n              },\n              ambient: {\n                intensity: 0.3\n              }\n            }\n          },\n          series: [{\n            type: 'line3D',\n            data: data.map(function (item) {\n              return {\n                value: [item[1], item[0], item[2]]\n              };\n            }),\n            shading: 'color',\n            label: {\n              show: false,\n              textStyle: {\n                fontSize: 16,\n                borderWidth: 1\n              }\n            },\n            itemStyle: {\n              opacity: 0.8\n            },\n            emphasis: {\n              label: {\n                textStyle: {\n                  fontSize: 20,\n                  color: '#900'\n                }\n              },\n              itemStyle: {\n                color: '#900'\n              }\n            }\n          }]\n        };\n        return option;\n      };\n\n      cmethod.prototype.copyToClipBoard = function (dom, str, callback) {\n        dom.attr(\"data-clipboard-text\", str);\n        setTimeout(function () {\n          $$.loadExternalJs(['clipboard'], function (Clipboard) {\n            var clipboard = new Clipboard(dom[0]);\n            clipboard.on('success', function (e) {\n              if (callback) {\n                callback();\n              }\n\n              e.clearSelection();\n            });\n            clipboard.on('error', function (e) {\n              console.error('Action:', e.action);\n              console.error('Trigger:', e.trigger);\n            });\n          });\n        });\n      };\n\n      cmethod.prototype.getIcons = function (callback) {\n        var path = \"../../localdb/bootstrapIcon.json\";\n        Info.get(path, function (icons) {\n          callback(icons);\n        });\n      };\n\n      cmethod.prototype.getCtrlGroupDemos = function () {\n        return [{\n          label: \"普通文字\",\n          expression: \"expression = {\\n  on : {\\n    init : function(event){\\n      var target = event.target;\\n      var global = event.global;\\n      var ctrlGroups = [\\n       [{\\n          type : \\\"label\\\",\\n          value : \\\"普通标签\\\",\\n          class : \\\"col-md-12\\\"\\n        }]\\n      ];\\n      event.target.render(ctrlGroups);\\n    }\\n  }\\n}\"\n        }, {\n          label: \"基本按钮\",\n          expression: 'expression = {\\n  on : {\\n    init : function(event){\\n      var target = event.target;\\n      var global = event.global;\\n      var ctrlGroups = [\\n       [{\\n          type : \"button\",\\n          value : \"按钮\",\\n          icon : \"glyphicon glyphicon-search\",\\n          btnclass : \"btn btn-primary\",\\n          class : \"col-md-12\",\\n          on : {\\n            click : function(elem){\\n              target.console(elem);\\n            }\\n          }\\n        }]\\n      ];\\n      event.target.render(ctrlGroups);\\n    }\\n  }\\n}'\n        }, {\n          label: \"按钮组\",\n          expression: \"expression = {\\n  on : {\\n    init : function(event){\\n      var target = event.target;\\n      var global = event.global;\\n      var ctrlGroups = [\\n        [{\\n          type : \\\"buttonGroup\\\",\\n          class : \\\"col-md-12\\\",\\n          content : [{\\n            type : \\\"button\\\",\\n            value : \\\"保存\\\",\\n            icon : \\\"glyphicon glyphicon-save\\\",\\n            btnclass : \\\"btn btn-primary\\\",\\n            on : {\\n              click : function(elem){\\n              }\\n            }\\n          },{\\n            type : \\\"button\\\",\\n            value : \\\"取消\\\",\\n            icon : \\\"glyphicon glyphicon-remove\\\",\\n            btnclass : \\\"btn btn-default\\\",\\n            on : {\\n              click : function(elem){\\n              }\\n            }\\n          }]\\n        }]\\n      ];\\n      event.target.render(ctrlGroups);\\n    }\\n  }\\n}\"\n        }, {\n          label: \"复制粘贴按钮\",\n          expression: \"expression = {\\n  on : {\\n    init : function(event){\\n      var target = event.target;\\n      var global = event.global;\\n      var ctrlGroups = [\\n       [{\\n          type : \\\"clipboardButton\\\",\\n          value : \\\"复制到剪切板\\\",\\n          icon : \\\"glyphicon glyphicon-save\\\",\\n          btnclass : \\\"btn btn-primary\\\",\\n          clipboardText : \\\"123456\\\",\\n          class : \\\"col-md-12\\\",\\n          on : {\\n            save : function(elem){\\n              target.growl(\\\"保存到剪切板\\\");\\n            }\\n          }\\n        }]\\n      ];\\n      event.target.render(ctrlGroups);\\n    }\\n  }\\n}\"\n        }, {\n          label: \"单选下拉框\",\n          expression: \"expression = {\\n  on : {\\n    init : function(event){\\n      var target = event.target;\\n      var global = event.global;\\n      var options = [{\\n        id : 0,\\n        label : \\\"第一条\\\"\\n      },{\\n        id : 1,\\n        label : \\\"第二条\\\"\\n      }];\\n      var ctrlGroups = [\\n        [{\\n          type : \\\"select\\\",\\n          value : 0,\\n          class : \\\"col-md-12\\\",\\n          options : options,\\n          format : {\\n            id : \\\"id\\\",\\n            label : \\\"label\\\"\\n          },\\n          on : {\\n            change : function(elem){\\n              console.log(elem.value)\\n            }\\n          }\\n        }]\\n      ];\\n      event.target.render(ctrlGroups);\\n    }\\n  }\\n}\"\n        }, {\n          label: \"多选下拉框\",\n          expression: \"expression = {\\n  on : {\\n    init : function(event){\\n      var target = event.target;\\n      var global = event.global;\\n      var options = [{\\n        id : 0,\\n        label : \\\"第一条\\\"\\n      },{\\n        id : 1,\\n        label : \\\"第二条\\\"\\n      }];\\n      var ctrlGroups = [\\n        [{\\n          type : \\\"multiSelect\\\",\\n          value : 0,\\n          class : \\\"col-md-12\\\",\\n          options : options,\\n          format : {\\n            id : \\\"id\\\",\\n            label : \\\"label\\\"\\n          },\\n          on : {\\n            change : function(elem){\\n              console.log(elem.value)\\n            }\\n          }\\n        }]\\n      ];\\n      event.target.render(ctrlGroups);\\n    }\\n  }\\n}\"\n        }, {\n          label: \"数结构下拉框\",\n          expression: \"expression = {\\n  on : {\\n    init : function(event){\\n      var target = event.target;\\n      var global = event.global;\\n      var ctrlGroups = [\\n       [{\\n          type : \\\"clipboardButton\\\",\\n          value : \\\"复制到剪切板\\\",\\n          icon : \\\"glyphicon glyphicon-save\\\",\\n          btnclass : \\\"btn btn-primary\\\",\\n          clipboardText : \\\"123456\\\",\\n          class : \\\"col-md-12\\\",\\n          on : {\\n            save : function(elem){\\n              target.growl(\\\"保存到剪切板\\\");\\n            }\\n          }\\n        }]\\n      ];\\n      event.target.render(ctrlGroups);\\n    }\\n  }\\n}\"\n        }, {\n          label: \"自动搜索下拉框\",\n          expression: \"expression = {\\n  on : {\\n    init : function(event){\\n      var target = event.target;\\n      var global = event.global;\\n      var ctrlGroups = [\\n       [{\\n          type : \\\"clipboardButton\\\",\\n          value : \\\"复制到剪切板\\\",\\n          icon : \\\"glyphicon glyphicon-save\\\",\\n          btnclass : \\\"btn btn-primary\\\",\\n          clipboardText : \\\"123456\\\",\\n          class : \\\"col-md-12\\\",\\n          on : {\\n            save : function(elem){\\n              target.growl(\\\"保存到剪切板\\\");\\n            }\\n          }\\n        }]\\n      ];\\n      event.target.render(ctrlGroups);\\n    }\\n  }\\n}\"\n        }];\n      };\n\n      function parseJson(str) {\n        var objLike = new RegExp(\"^\\\\{.*\\\\}$\", \"g\");\n        var arrLike = new RegExp(\"^\\\\[.*\\\\]$\", \"g\");\n\n        if (objLike.test(str) || arrLike.test(str)) {\n          return JSON.parse(str);\n        } else {\n          return null;\n        }\n      }\n\n      cmethod.prototype.getRoleByID = function (roleID, callback) {\n        var roleArr = roleID.split(\",\").map(function (e) {\n          return parseInt(e);\n        });\n        userEnterpriseService.queryEnterpriseRole(function (returnObj) {\n          if (returnObj.code == 0) {\n            var role = returnObj.data.find(function (item) {\n              // console.log(roleArr, item.roleID, roleArr.indexOf(item.roleID));\n              if (roleArr.indexOf(item.roleID) != -1) {\n                return parseJson(item.values);\n              }\n\n              ;\n              return false;\n            });\n            callback(role);\n          }\n        });\n      };\n\n      cmethod.prototype.triggerSocket = function (config) {\n        SwSocket.simuSend(config);\n      };\n\n      cmethod.prototype.getToolsMenu = function () {\n        /**\n         return [{\n        label: \"API调用\",\n        path: \"apicall\"\n        }, {\n        label: \"绘制自定义视图\",\n        path: \"drawechart\"\n        }, {\n        label: \"根据ID查询设备模型信息\",\n        path: \"idSelector\"\n        }, {\n        label: \"SCP路径\",\n        path: \"scp\"\n        },{\n        label: \"项目模版\",\n        url: \"projectlist\"\n        },{\n        label: \"图标样式\",\n        url: \"icon\"\n        }];*/\n        return [{\n          label: \"API调用\",\n          url: \"apiCall\"\n        }, {\n          label: \"绘制自定义视图\",\n          path: \"drawechart\"\n        },\n        /*{\n        label: \"根据ID查询设备模型信息\",\n        path: \"idSelector\"\n        }, */\n        {\n          label: \"SCP路径\",\n          url: \"scp\"\n        }, {\n          label: \"项目模版\",\n          url: \"projectlist\"\n        }, {\n          label: \"图标样式\",\n          url: \"icon\"\n        }, {\n          label: \"JS代码转换字符串\",\n          url: \"jstostring\"\n        }, {\n          label: \"批量导出导入视图或配置项\",\n          url: \"export\"\n        }, {\n          label: \"输入框组\",\n          url: \"ctrlGroupDemo\"\n        }];\n      };\n\n      cmethod.prototype.getHelpMenu = function () {\n        return [{\n          label: \"布局设置\",\n          pdf: \"layout\"\n        }, {\n          label: \"组件\",\n          url: \"control\",\n          children: [{\n            label: \"常用组件\",\n            url: \"common_ctrl\",\n            children: [{\n              label: \"文字\",\n              pdf: \"text\"\n            }, {\n              label: \"图片\",\n              pdf: \"image\"\n            }, {\n              label: \"控制板1\",\n              pdf: \"control1\"\n            }, {\n              label: \"控制板2\",\n              pdf: \"control2\"\n            }, {\n              label: \"TAB\",\n              pdf: \"tab\"\n            }, {\n              label: \"开关\",\n              pdf: \"switch\"\n            }]\n          }, {\n            label: \"功能组件\",\n            url: \"functional_ctrl\",\n            children: [{\n              label: \"天气信息\",\n              pdf: \"weather\"\n            }]\n          }, {\n            label: \"视图组件\",\n            url: \"echart_ctrl\",\n            children: [{\n              label: \"线图\",\n              pdf: \"line\"\n            }, {\n              label: \"饼图\",\n              pdf: \"pie\"\n            }, {\n              label: \"柱图\",\n              pdf: \"bar\"\n            }, {\n              label: \"仪表盘\",\n              pdf: \"gauge\"\n            }, {\n              label: \"散点图\",\n              pdf: \"scatter\",\n              show: false\n            }]\n          }, {\n            label: \"高级组件\",\n            url: \"advance_ctrl\",\n            children: [{\n              label: \"地图扩展\",\n              pdf: \"baidumap\"\n            }, {\n              label: \"视图嵌入\",\n              pdf: \"injector\"\n            }, {\n              label: \"轮播组件\",\n              pdf: \"echart_ctrl\"\n            }, {\n              label: \"高级图表\",\n              pdf: \"advance_ctrl\"\n            }, {\n              label: \"输入框组\",\n              pdf: \"ctrlgroup\"\n            }, {\n              label: \"伪TAB样式\",\n              pdf: \"faketab\"\n            }, {\n              label: \"重复单元\",\n              pdf: \"repeat\"\n            }]\n          }]\n        }, {\n          label: \"功能模块\",\n          url: \"tool\",\n          children: [{\n            label: \"数据统计标签\",\n            pdf: \"advance_ctrl\"\n          }, {\n            label: \"百分比状态条\",\n            pdf: \"advance_ctrl\"\n          }, {\n            label: \"环比标签\",\n            pdf: \"advance_ctrl\"\n          }, {\n            label: \"项目组态\",\n            pdf: \"advance_ctrl\"\n          }, {\n            label: \"设备（列表）\",\n            pdf: \"advance_ctrl\"\n          }, {\n            label: \"工单（列表）\",\n            pdf: \"advance_ctrl\"\n          }, {\n            label: \"告警（列表）\",\n            pdf: \"advance_ctrl\"\n          }, {\n            label: \"线图模板\",\n            pdf: \"advance_ctrl\"\n          }, {\n            label: \"告警趋势\",\n            pdf: \"advance_ctrl\"\n          }, {\n            label: \"设备分布\",\n            pdf: \"advance_ctrl\"\n          }, {\n            label: \"地图分布\",\n            pdf: \"advance_ctrl\"\n          }, {\n            label: \"设备地图列表\",\n            pdf: \"advance_ctrl\"\n          }, {\n            label: \"最近一周告警\",\n            pdf: \"advance_ctrl\"\n          }]\n        }, {\n          label: \"导入视图\",\n          pdf: \"import\"\n        }, {\n          label: \"实例\",\n          url: \"example\",\n          show: false\n        }, {\n          label: \"API\",\n          pdf: \"commonMethod\"\n        }];\n      };\n\n      cmethod.prototype.getSignalShipInfo = function (id, callback) {\n        thridPartyApiService.getSignalShipInfo(id, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getManyShipInfo = function (ids, callback) {\n        thridPartyApiService.getManyShipInfo(ids, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getShipTrack = function (id, start, end, callback) {\n        thridPartyApiService.getShipTrack(id, start, end, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getAllConfigs = function (callback) {\n        configUIService.getAllConfigs(function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getAllConfigGroups = function (callback) {\n        configUIService.getAllConfigGroups(function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getConfigsByGroupName = function (configGroupName, callback) {\n        configUIService.getConfigsByGroupName(configGroupName, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.saveConfig = function (config, callback) {\n        configUIService.saveConfig(config, function (event) {\n          if (event.code == 0) {\n            if (typeof callback == \"function\") {\n              callback({\n                code: 0,\n                msg: config.label + \"添加成功\"\n              });\n            }\n          } else {\n            if (typeof callback == \"function\") {\n              callback({\n                code: event.code,\n                msg: config.label + \"添加失败,原因\" + event.message\n              });\n            }\n          }\n        });\n      };\n\n      cmethod.prototype.saveConfigGroup = function (configGroup, callback) {\n        configUIService.saveConfigGroup(configGroup, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.deleteConfig = function (configId, callback) {\n        configUIService.deleteConfig(configId, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.deleteConfigGroup = function (groupId, callback) {\n        configUIService.deleteConfigGroup(groupId, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.createInfoHtml = function (obj) {\n        var str = \"\"; // var str = obj.label + \"<br><hr/>\";\n\n        window.onclickHandler = function (event) {\n          var key = event.target.id + \"&\" + event.target.name;\n\n          if (clickFnDic[key]) {\n            clickFnDic[key](event.target.name);\n          }\n        };\n\n        var createContent = function createContent(cont) {\n          return \"<label><span>\" + cont.label + \":</span><span>\" + cont.value + \"</span></label><br>\";\n        };\n\n        var createButton = function createButton(cont) {\n          var clickFn = cont.$attr(\"on/click\");\n          var key = cont.label + \"&\" + cont.value;\n          clickFnDic[key] = clickFn;\n          var dataBtn = \"<button id='\" + cont.label + \"' name='\" + cont.value + \"' onclick='onclickHandler(event)'>\" + cont.label + \"</button>\"; //var dataBtn = \"<button id='\"+cont.label+\"' onclick='fnOK(\"+cont.value+\")'>\"+cont.label +\"</button>\";\n\n          return dataBtn;\n        };\n\n        for (var i in obj.content) {\n          if (!obj.content[i].type || obj.content[i].type == \"label\") {\n            str += createContent(obj.content[i]);\n          } else if (obj.content[i].type == \"button\") {\n            str += createButton(obj.content[i]);\n          }\n        }\n\n        return str;\n      };\n\n      cmethod.prototype.createShipShape = function (width, length, trailWidth, trailLength, headWidth, headLength) {\n        var RIGHTOFFSET = .1;\n        var leftBottomPoint = [-width / 2 * trailWidth, -length / 2];\n        var rightBottomPoint = [width / 2 * trailWidth, -length / 2];\n        var rightBottomPoint_1 = [(1 - RIGHTOFFSET) * width / 2, (trailLength / 2 - 1) * length / 2];\n        var rightlowerPoint = [width / 2, (trailLength - 1) * length / 2];\n        var rightupperPoint = [width / 2 * 1.4, (1 / 2 - headLength) * length];\n        var rightupperPoint_1 = [headWidth / 2 * width, (1 / 2 - headLength / 3) * length];\n        var topPoint1 = [width * .1, length / 2 * .99];\n        var topPoint = [0, length / 2];\n        var topPoint2 = [-width * .1, length / 2 * .99];\n        var leftupperPoint_1 = [-headWidth / 2 * width, (1 / 2 - headLength / 3) * length];\n        var leftupperPoint = [-width / 2 * 1.4, (1 / 2 - headLength) * length];\n        var leftlowerPoint = [-width / 2, (trailLength - 1) * length / 2];\n        var leftBottomPoint_1 = [-(1 - RIGHTOFFSET) * width / 2, (trailLength / 2 - 1) * length / 2];\n        return [leftBottomPoint, rightBottomPoint, rightBottomPoint_1, rightlowerPoint, rightupperPoint, rightupperPoint_1, topPoint1, topPoint, topPoint2, leftupperPoint_1, leftupperPoint, leftlowerPoint, leftBottomPoint_1, leftBottomPoint];\n      };\n\n      cmethod.prototype.renderExcel = function (name, filename, json) {\n        require(['table2excel'], function () {\n          var table = $(\"<table></table>\");\n          table.attr(\"id\", \"table2excel\");\n          var thead = $(\"<thead></thead>\");\n          var tbody = $(\"<tbody></tbody>\");\n\n          var loopTr = function loopTr(dt) {\n            var tr = $(\"<tr></tr>\");\n\n            var loopTd = function loopTd(elem) {\n              var td = $(\"<td></td>\");\n              td.text(elem);\n              return td;\n            };\n\n            for (var i in dt) {\n              tr.append(loopTd(dt[i]));\n            }\n\n            return tr;\n          };\n\n          var tr = $(\"<tr></tr>\");\n\n          var loopTh = function loopTh(number) {\n            var th = $(\"<th></th>\");\n            th.text(number);\n            return th;\n          };\n          /**\n           for(var i in json[0]){\n          thead.append(loopTh(json[0][i]));\n          };*/\n\n\n          for (var i = 0; i < json.length; i++) {\n            tbody.append(loopTr(json[i]));\n          }\n\n          table.append(thead);\n          table.append(tbody); //$(\"body\").append(table);\n\n          table.table2excel({\n            exclude: \".excludeThisClass\",\n            name: name,\n            filename: filename\n          });\n        });\n      };\n\n      cmethod.prototype.asyncRepeat = function (repeatCall, finish) {\n        var self = this;\n        var inx = 0;\n\n        var repeat = function repeat(inx) {\n          if (self[inx]) {\n            repeatCall(inx, self[inx], function () {\n              inx++;\n              repeat(inx);\n            });\n          } else {\n            finish();\n          }\n        };\n\n        repeat(inx);\n      };\n      /**\n       * 获得域结构\n       * @param {Object} callback\n       * @param {Object} isArryLike\n       */\n\n\n      cmethod.prototype.queryDomainTree = function (callback, isArryLike) {\n        /** queryDomainTree方法第一次从后台取得，之后通过缓存取*/\n        var fn = cmethod.prototype.queryDomainTree;\n\n        if (fn.cached) {\n          callback(clone(fn.cached));\n        } else {\n          fn.promise = fn.promise || new Promise(function (resolve) {\n            userDomainService.queryDomainTree(userLoginUIService.user.userID, function (event) {\n              var $TreeObj = function $TreeObj(data) {\n                this.$clone(data);\n              };\n\n              var treeObjToArr = function treeObjToArr(data) {\n                var result = [];\n\n                var traverse = function traverse(item, parent, level) {\n                  var to = new $TreeObj(item);\n                  to.parent = parent;\n                  to.level = level;\n                  result.push(to);\n\n                  for (var i in item.domainInfos) {\n                    var m = level + 1;\n                    traverse(item.domainInfos[i], item, m);\n                  }\n                };\n\n                traverse(event.data[0], null, 0);\n                return result;\n              };\n\n              if (event.code) {\n                if (isArryLike) {\n                  var to = treeObjToArr(event.data[0]);\n                  resolve(to);\n                } else {\n                  resolve(event.data);\n                }\n              }\n            });\n          });\n          fn.promise.then(function (dtree) {\n            fn.cached = dtree;\n            delete fn.promise;\n            callback(clone(fn.cached));\n          });\n        }\n      };\n\n      cmethod.prototype.getAlertWord = function (str) {\n        var color = \"\";\n\n        switch (str) {\n          case 4:\n            color = \"危险\";\n            break;\n\n          case 3:\n            color = \"警告\";\n            break;\n\n          case 2:\n            color = \"注意\";\n            break;\n\n          case 1:\n            color = \"正常\";\n            break;\n\n          default:\n            color = \"正常\";\n            break;\n        } //console.log(color);\n\n\n        return color;\n      };\n\n      cmethod.prototype.getAlertColorPoint = function (status) {\n        var color = \"\";\n\n        switch (status) {\n          case 4:\n            color = \"e74e53\";\n            break;\n\n          case 3:\n            color = \"#ee6b1c\";\n            break;\n\n          case 2:\n            color = \"#efd709\";\n            break;\n\n          default:\n            color = \"#00bc79\";\n            break;\n        }\n\n        return color;\n      };\n\n      cmethod.prototype.getAlertColor = function (status) {\n        var color = \"\";\n\n        switch (status) {\n          case 4:\n            color = \"#e74e53\";\n            break;\n\n          case 3:\n            color = \"#ee6b1c\";\n            break;\n\n          case 2:\n            color = \"#ece417\";\n            break;\n\n          case 1:\n            color = \"#00bc79\";\n            break;\n\n          default:\n            color = \"#00bc79\";\n            break;\n        }\n\n        return color;\n      };\n      /**\n       * 查出基地/厂部/产线/设备名称\n       * 韩星 2018.01.16\n       * @param domainPathList 传入domainPath\n       */\n\n\n      cmethod.prototype.getdomainListName = function (domainPathList) {\n        var domainList = [];\n\n        for (var i = 0; i < domainPathList.length; i++) {\n          cmethod.prototype.getdomainNameHandler(domainPathList[i].domains, domainList);\n        }\n\n        return domainList;\n      };\n\n      cmethod.prototype.getdomainNameHandler = function (domainPathListStr, domainList) {\n        var domainListDic = rootScope.domainListDic;\n        var domainPathListSplit = domainPathListStr.split(\"/\");\n        domainPathListSplit.forEach(function (domainId) {\n          if (domainListDic[domainId]) {\n            domainList.push(domainListDic[domainId].label);\n          }\n        });\n        return domainList;\n      };\n\n      cmethod.prototype.getCurrentDomainCi = function (callback) {\n        var domainPath = userLoginUIService.user.domains;\n\n        if (!domainPath) {\n          callback(null);\n          return;\n        }\n\n        var domainId;\n        var arr = domainPath.split(\"/\");\n\n        if (arr.length > 1) {\n          domainId = arr[arr.length - 2];\n        }\n\n        $$.cacheAsyncData.call(resourceUIService.getResourceById, [domainId], function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n        /**\n         resourceUIService.getResourceById(domainId, function(event){\n        if(event.code == 0){\n        callback(event.data)\n        }\n        })*/\n      };\n\n      function isEmptyObject(obj) {\n        for (var i in obj) {\n          return false;\n        }\n\n        return true;\n      }\n\n      cmethod.prototype.getDevicesByCondition = function (params, callback, extendstr, noCache) {\n        var fn = cmethod.prototype.getDevicesByCondition;\n        var include = [\"resourceType\", \"category\", \"customerId\", \"projectId\", \"domainPath\", \"domains\", \"externalDevId\", \"label\", \"id\", \"modelId\", \"values.viewType\", \"values.MeasurePointLocate\", \"value.viewType\", \"values.OfflinePerson\", \"values.JoinPersonList\", \"physicalConfig.accessConfigs.instance\", \"physicalConfig.accessConfigs.dataItemId\", \"physicalConfig.accessConfigs.kpiId\", \"physicalConfig.accessConfigs.kpiName\", \"physicalConfig.accessConfigs.specialtyProp\"];\n        var currentRoleID = userLoginUIService.user.currentRoleID || 0;\n        var roleFunctionCodeMap = userLoginUIService.user.roleFunctionCodeMap || {};\n\n        var includeFields = \"includeFields=\" + include.toString(),\n            menuitems = roleFunctionCodeMap[currentRoleID] || [],\n            vals = function (menuitems) {\n          if (menuitems.indexOf(\"F08_01\") !== -1) return {};\n          if (menuitems.indexOf(\"F08_03\") !== -1) return {\n            diagnosticType: \"90\"\n          };\n          if (menuitems.indexOf(\"F08_06\") !== -1) return {\n            diagnosticType: \"280\"\n          };\n          if (menuitems.indexOf(\"F08_02\") !== -1) return {\n            diagnosticType: {\n              \"NOT_IN\": [\"90\", \"280\"]\n            }\n          };\n        }(menuitems);\n        /** 当参数为空的时候缓存DEVICES列表,不空的时候不进行缓存*/\n\n\n        if (!isEmptyObject(params)) {\n          params.values = vals;\n          resourceUIService.getDevicesByCondition(params, function (event) {\n            if (event.code == 0) {\n              callback(event.data);\n            }\n          }, extendstr || includeFields);\n        } else {\n          params.values = vals;\n\n          if (!noCache) {\n            if (fn.cached) {\n              callback(clone(fn.cached));\n            } else {\n              fn.promise = fn.promise || new Promise(function (resolve) {\n                resourceUIService.getDevicesByCondition(params, function (event) {\n                  if (event.code == 0) {\n                    resolve(event.data);\n                  }\n                }, extendstr || includeFields);\n              });\n              fn.promise.then(function (devices) {\n                fn.cached = devices;\n                delete fn.promise;\n                callback(clone(fn.cached));\n              });\n            }\n          } else {\n            resourceUIService.getDevicesByCondition(params, function (event) {\n              if (event.code == 0) {\n                callback(clone(event.data));\n              }\n            }, extendstr || includeFields);\n          }\n        }\n      };\n\n      cmethod.prototype.getCurrentDevices = function (callback) {\n        this.getCurrentProject(function (project) {\n          if (project) {\n            var domainPath = project.domainPath;\n            var params = {\n              projectId: project.id\n            };\n            resourceUIService.getDevicesByCondition(params, function (event) {\n              if (event.code == 0) {\n                callback(event.data);\n              }\n            });\n            /*\n            $$.cacheAsyncData.call(resourceUIService.getDevicesByCondition, [params], function(event){\n            if(event.code == 0){\n            callback(event.data)\n            }\n            });*/\n\n            /**\n             resourceUIService.getDevicesByCondition(params, function(event){\n            if(event.code == 0){\n            callback(event.data);\n            }\n            });*/\n          } else {\n            callback([]);\n          }\n        });\n      };\n\n      cmethod.prototype.getCurrentResource = function (callback) {\n        var id = this.getParameter(\"resourceId\");\n\n        if (id) {\n          resourceUIService.getResourceById(id, function (event) {\n            if (event.code == 0) {\n              callback(event.data);\n            }\n          });\n        } else {\n          if (routeParam.resourceId) {\n            id = routeParam.resourceId;\n            $$.cacheAsyncData.call(resourceUIService.getResourceById, [id], function (event) {\n              if (event.code == 0) {\n                callback(event.data);\n              }\n            });\n          } else {\n            callback(null);\n          }\n        }\n      };\n\n      cmethod.prototype.getCurrentProject = function (callback) {\n        var id = this.getParameter(\"projectId\");\n\n        if (id) {\n          $$.cacheAsyncData.call(resourceUIService.getResourceById, [id], function (event) {\n            if (event.code == 0) {\n              callback(event.data);\n            }\n          });\n        } else {\n          callback(null);\n        }\n      };\n\n      cmethod.prototype.getCurrentCustomer = function (callback) {\n        var id = this.getParameter(\"customerId\");\n\n        if (id) {\n          $$.cacheAsyncData.call(resourceUIService.getResourceById, [id], function (event) {\n            if (event.code == 0) {\n              callback(event.data);\n            }\n          });\n        } else {\n          callback(null);\n        }\n      };\n\n      cmethod.prototype.getCiKpi = function (callback) {\n        var model = this.$attr(\"data/model\");\n        var resources = this.$attr(\"data/resource\");\n        var modelType = this.$attr(\"data/modelType\");\n        var resfilltype = this.$attr(\"data/resfilltype\");\n        var kpis = this.$attr(\"data/kpi\");\n        resources = resources ? resources : [];\n        kpis = kpis ? kpis : [];\n        var cur = this,\n            defers = [],\n            res = [],\n            ks = [];\n\n        var getKpis = function getKpis() {\n          var some = kpis.some(function (element) {\n            return _typeof(element) != \"object\";\n          });\n\n          if (some) {\n            var modelId;\n\n            if (modelType == 0 || modelType == undefined) {\n              modelId = model.id;\n            } else {\n              modelId = modelType;\n            }\n\n            if (modelId) {\n              $$.cacheAsyncData.call(resourceUIService.getDataItemsByModelId, [modelId], function (event) {\n                if (event.code == 0) {\n                  ks = event.data.filter(function (elem) {\n                    return kpis.indexOf(elem.id) != -1;\n                  });\n                  callback(res, ks);\n                }\n              });\n              /**\n               resourceUIService.getKpisByModelId(modelId, function(event){\n              if(event.code == 0){\n              ks = event.data.filter(function(elem){\n              return kpis.indexOf(elem.id) != -1;\n              });\n              callback(res, ks);\n              }\n              })*/\n            } else {\n              throw new Error(\"modelId is no avaliable!!!\");\n            }\n          } else {\n            ks = kpis;\n            callback(res, ks);\n          }\n        };\n\n        if (resources.length == 1 && resources[0] == \"rootCi\") {\n          this.$attr(\"data/modelType\", 300);\n          this.$attr(\"data/resfilltype\", \"parameter\");\n          this.$attr(\"data/resource\", []);\n          modelType = 300;\n          resfilltype = \"parameter\";\n        }\n\n        if (resfilltype == \"parameter\") {\n          if (modelType == 300) {\n            cmethod.prototype.getCurrentDomainCi(function (ci) {\n              res = [ci];\n              getKpis();\n            });\n          } else if (modelType == 0) {\n            cmethod.prototype.getCurrentResource(function (ci) {\n              res = ci ? [ci] : [];\n              getKpis();\n            });\n          } else if (resfilltype == 301) {\n            cmethod.prototype.getCurrentCustomer(function (ci) {\n              res = ci ? [ci] : [];\n              getKpis();\n            });\n          } else if (modelType == 302) {\n            cmethod.prototype.getCurrentProject(function (ci) {\n              res = ci ? [ci] : [];\n              getKpis();\n            });\n          } else if (modelType == 303) {\n            cmethod.prototype.getCurrentDomainCi(function (ci) {\n              res = ci ? [ci] : [];\n              getKpis();\n            });\n          } else {\n            cmethod.prototype.getCurrentDomainCi(function (ci) {\n              res = ci ? [ci] : [];\n              getKpis();\n            });\n          }\n        } else {\n          var getResource = function getResource(resource) {\n            var defer = q.defer();\n\n            if (_typeof(resource) != \"object\") {\n              cur.getResourceById(resource, function (data) {\n                res.push(data);\n                defer.resolve(\"success\");\n              });\n            } else {\n              res.push(resource);\n              defer.resolve(\"success\");\n            }\n\n            return defer.promise;\n          };\n\n          for (var i in resources) {\n            defers.push(getResource(resources[i]));\n          }\n\n          q.all(defers).then(function (event) {\n            getKpis();\n          });\n        }\n      };\n\n      cmethod.prototype.copyJSONFileToClipBoard = function () {\n        var json = JSON.stringify(wholeJSON);\n      };\n\n      cmethod.prototype.postService = function (service, method, param, callback) {\n        serviceProxy.get(service, method, param, callback);\n      };\n\n      cmethod.prototype.getLatestDevices = function (callback) {\n        resourceUIService.getLatestDevices(function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.doTaskCloseAlert = function (ticketNo, obj, callback) {\n        ticketTaskService.doTaskCloseAlert(ticketNo, obj, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getDeviceInfo = function (callback) {\n        resourceUIService.getDeviceInfo(function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getTicketsByStatus = function (callback) {\n        ticketTaskService.getTicketsByStatus([100], function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getAlertDeviceList = function (params, callback) {\n        ticketTaskService.getAlertDeviceList(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getTicketTasksByCondition = function (params, callback) {\n        ticketTaskService.getTicketTasksByCondition(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getTicketTasksByConditionAndPage = function (params, pageRequest, callback) {\n        ticketTaskService.getTicketTasksByConditionAndPage(params, pageRequest, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getDealTicketListByPage = function (params, pageRequest, callback) {\n        ticketTaskService.getDealTicketListByPage(params, pageRequest, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.claimAlert = function (params, callback) {\n        ticketTaskService.claimAlert(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getDeviceDiagnosticResumeOrTicketByPage = function (params, pageRequest, callback) {\n        ticketTaskService.getDeviceDiagnosticResumeOrTicketByPage(params, pageRequest, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getTicketsByConditionAndPage = function (params, pageRequest, callback) {\n        ticketTaskService.getTicketsByConditionAndPage(params, pageRequest, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getUsersByDeviceIdAndRoleAndSpecialty = function (deviceId, roleId, specialty, callback) {\n        ticketTaskService.getUsersByDeviceIdAndRoleAndSpecialty(deviceId, roleId, specialty, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.complexHandleAgain = function (taskId, complexHandel, callback) {\n        ticketTaskService.complexHandleAgain(taskId, complexHandel, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getKnowledgeByConditionWithPage = function (params, pageRequest, callback) {\n        ticketTaskService.getKnowledgeByConditionWithPage(params, pageRequest, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.alertTaskMergeDeal = function (taskIds, values, callback) {\n        ticketTaskService.alertTaskMergeDeal(taskIds, values, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getTicketTasksByCondition = function (params, callback) {\n        ticketTaskService.getTicketTasksByCondition(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getTicketsByCondition = function (params, callback) {\n        ticketTaskService.getTicketsByCondition(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getDealTicketList = function (params, callback) {\n        ticketTaskService.getDealTicketList(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.doTask = function (params, callback) {\n        ticketTaskService.doTask(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.doTask4Baogang = function (ticketNo, values, callback) {\n        ticketTaskService.doTask4Baogang(ticketNo, values, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getTopicErrorDataList = function (topicErrorQueryModel, callback) {\n        ticketTaskService.getTopicErrorDataList(topicErrorQueryModel, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getComplexHandleListWithCategorys = function (selector, ticketTaskQueryModel, pageRequest, callback) {\n        ticketTaskService.getComplexHandleListWithCategorys(selector, ticketTaskQueryModel, pageRequest, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.energyTypeList = function (callback) {\n        var data = dictionaryService.dicts['energyType'];\n\n        if (callback) {\n          callback(data);\n        }\n      };\n\n      cmethod.prototype.getDevicesByFilter = function (filter, callback) {\n        var params = {\n          modelId: filter.modelId,\n          domainPath: filter.domainPath,\n          label: filter.deviceName,\n          sn: filter.sn\n        };\n        resourceUIService.getDevicesByCondition(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getCurrentAlert = function (callback) {\n        var resourceId = this.getParameter(\"resourceId\");\n\n        if (resourceId) {\n          alertService.queryFromDb({\n            nodeIds: resourceId\n          }, function (event) {\n            if (event.code == 0) {\n              callback(event.data);\n            }\n          });\n        } else {\n          callback([]);\n        }\n      };\n\n      cmethod.prototype.getAlertByPage = function (params, pages, callback) {\n        alertService.getAlertByPage(params, pages, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getAllAlerts = function (callback) {\n        alertService.queryFromDb({}, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getAlerts = function (callback) {\n        var domainPath = userLoginUIService.user.domainPath;\n        alertService.queryFromDb({\n          domain: domainPath\n        }, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.queryFromDb = function (param, callback) {\n        alertService.queryFromDb(param, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.setExpression = function (str) {\n        this.$attr(\"advance/expression\", str);\n      };\n\n      cmethod.prototype.runExpression = function (str) {\n        var expression;\n        $$.runExpression(str, function (funRes) {\n          if (funRes.code == \"0\") {\n            var fnResult = funRes.data;\n            expression = fnResult ? fnResult : {};\n          } else {\n            expression = {}; //throw new Error(funRes.message);\n          }\n        });\n        return expression;\n      };\n\n      cmethod.prototype.getCustomerFromCurrentUser = function (callback) {\n        var cur = this;\n        var domains = userLoginUIService.user.domains;\n        var customerId;\n        var arr = domains.split(\"/\");\n\n        if (arr.length > 2) {\n          customerId = arr[arr.length - 2];\n          cur.getResourceById(customerId, function (resource) {\n            callback(resource);\n          });\n        } else {\n          callback(resource);\n        }\n      };\n\n      cmethod.prototype.getCurrentAlertByProject = function (callback) {\n        var resourceId = this.getParameter(\"projectId\");\n        alertService.queryFromDb({\n          nodeIds: resourceId\n        }, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.currentDirective = function (callback) {\n        var resId = this.getParameter(\"resourceId\");\n\n        if (resId) {\n          this.getResourceById(resId, function (resource) {\n            if (resource) {\n              var modelId = resource.modelId;\n\n              if (modelId) {\n                resourceUIService.getDirectivesByModelId(modelId, function (event) {\n                  if (event.code == 0) {\n                    callback(event.data);\n                  }\n                });\n              } else {\n                callback([]);\n              }\n            } else {\n              callback([]);\n            }\n          });\n        } else {\n          callback([]);\n        }\n      };\n\n      cmethod.prototype.getProjectByTYpeId = function (projectTypeId, callback) {\n        customMethodService.getProjectsType(function (event) {\n          if (event.code == 0) {\n            var projectType = event.data.find(function (elem) {\n              return projectTypeId == elem.id;\n            });\n\n            if (projectType == undefined) {\n              projectType = event.data[0];\n            }\n\n            resourceUIService.getResourceByModelId(302, function (event) {\n              if (event.code == 0) {\n                var find = event.data.find(function (el) {\n                  return el.values.projectType == projectType.valueCode;\n                });\n\n                if (typeof callback == \"function\") {\n                  callback(find);\n                } else {\n                  console.log(\"请配置回调函数\");\n                }\n              }\n            });\n          }\n        });\n      };\n\n      _proto_.promise = function (fn) {\n        var defer = q.defer();\n        fn(defer.resolve, defer.reject);\n        return defer.promise;\n      };\n\n      _proto_.$getViewById = function (id, callback) {\n        var cv = viewCache(id),\n            self = this;\n\n        if (!cv) {\n          viewCache(id, self.promise(function (res, rej) {\n            self.getViewById(id, function (e) {\n              if (e) {\n                res(e);\n              }\n            });\n          }));\n        }\n\n        viewCache(id).then(function (d) {\n          callback(d);\n        });\n      };\n\n      cmethod.prototype.getViewById = cmethod.prototype.getViewByViewId = function (viewId, callback) {\n        if (!viewId) {\n          return;\n          throw new Error(\"viewId不存在\");\n        }\n\n        var views = cmethod.prototype.getViewById.views = cmethod.prototype.getViewById.views || {};\n        var view = views[viewId] = views[viewId] || {};\n\n        if (view.cache) {\n          callback(clone(view.cache));\n        } else {\n          view.promise = view.promise || new Promise(function (resolve) {\n            viewFlexService.getViewById(viewId, function (event) {\n              if (event.code == 0) {\n                resolve(event.data);\n              }\n            });\n          });\n          view.promise.then(function (d) {\n            view.cache = d;\n            callback(clone(view.cache));\n          });\n        }\n      };\n\n      cmethod.prototype.getProjectsType = function (callback, domains) {\n        customMethodService.getProjectsType(function (event) {\n          if (event.code == 0) {\n            if (typeof callback == \"function\") {\n              callback(event.data);\n            } else {\n              console.log(\"请配置回调函数\");\n            }\n          }\n        }, domains);\n      };\n\n      cmethod.prototype.getCached = function () {\n        return cms.$cache;\n      };\n\n      cmethod.prototype.setValue = setValue = function setValue(attr, value) {\n        //console.log(\"setValue\", attr, value);\n        cms.$cache.$attr(attr, value);\n      };\n\n      cmethod.prototype.getValue = function (attr) {\n        //console.log(\"getValue\", attr);\n        if (typeof attr !== \"string\") {\n          console.warn(\"无效的参数\");\n          return null;\n        } else {\n          return cms.$cache.$attr(attr);\n        }\n      };\n\n      cmethod.prototype.deleteValue = function (attr, value) {\n        delete cms.$cache[attr];\n      };\n\n      cmethod.prototype.findProjectsByCondition = function (param, callback) {\n        projectUIService.findProjectsByCondition(param, function (event) {\n          if (event.code == 0) {\n            if (callback) {\n              callback(event.data);\n            }\n          }\n        });\n      };\n\n      cmethod.prototype.getCurrentProjects = function (callback) {\n        var param = {\n          domainPath: userLoginUIService.user.domainPath\n        };\n        projectUIService.findProjectsByCondition(param, function (event) {\n          if (event.code == 0) {\n            if (callback) {\n              callback(event.data);\n            }\n          }\n        });\n      };\n\n      cmethod.prototype.getViewsByOnlyRole = function (viewType, resourceType, resourceId, callback) {\n        viewFlexService.getViewsByOnlyRole(viewType, function (event) {\n          var views = event.data;\n          /** 为防止同一模型有相同的视图被授权，在这里取VIEWID */\n\n          var loop = function loop(view) {\n            if (view.template && view.template.resourceType == resourceType && view.template.resourceId == resourceId) {\n              viewFlexService.getViewById(view.viewId, function (event) {\n                if (event.code == 0) {\n                  callback(event.data);\n                } else {\n                  callback(null);\n                }\n              });\n            }\n          };\n\n          for (var i in views) {\n            loop(views[i]);\n          }\n          /**\n           var find = views.find(function(view){\n          return view.template && view.template.resourceType == resourceType && view.template.resourceId == resourceId;\n          });\n           if(find){\n          viewFlexService.getViewById(find.viewId, function(event){\n          if(event.code == 0){\n          callback(event.data);\n          } else {\n          callback(null);\n          }\n          })\n          };*/\n\n        });\n      };\n      /** 这个和下面的getManagedViewsByTypeAndRole的有差别的\n       cmethod.prototype.getManagedViewsByTypeAndRole = function (viewType, resourceType, resourceId, callback) {\n      viewFlexService.getManagedViewsByTypeAndRole(viewType, function (event) {\n        var views = event.data;\n        var loop = function (view) {\n          if (view.template && view.template.resourceType == resourceType && view.template.resourceId == resourceId) {\n            viewFlexService.getViewById(view.viewId, function (event) {\n              if (event.code == 0) {\n                callback(event.data);\n              } else {\n                callback(null);\n              }\n            });\n          }\n        };\n        for (var i in views) {\n          loop(views[i])\n        }\n      });\n      };\n       */\n\n\n      cmethod.prototype.growl = function (str, fun) {\n        fun = fun || \"success\";\n        growl[fun](str);\n      };\n\n      cmethod.prototype.sendDirective = function (nodeId, dirId, data, callback) {\n        resourceUIService.sendDeviceDirective(nodeId, dirId, data, function (returnObj) {\n          if (returnObj.code == 0) {\n            if (typeof callback == \"function\") {\n              callback(returnObj);\n            } else {\n              console.log(\"callback is not defined\");\n            } //growl.success(\"指令发送成功\", {});\n\n          }\n        });\n      };\n\n      cmethod.prototype.sendItemDir = function (dir, nodeId) {\n        var itemDirValues = {};\n\n        if (!dir.value) {\n          growl.warning(\"请输入指令参数\");\n          return;\n        }\n\n        for (var i in dir.params) {\n          var obj = dir.params[i];\n          itemDirValues[obj.name] = dir.value;\n        }\n\n        BootstrapDialog.show({\n          title: '提示',\n          closable: false,\n          message: '您发送的指令将会在设备上执行，状态数据返回会有一段时间，确认要发送指令吗？',\n          buttons: [{\n            label: '确定',\n            cssClass: 'btn-success',\n            action: function action(dialogRef) {\n              resourceUIService.sendDeviceDirective(nodeId ? nodeId : Number(this.getParameter(\"resourceId\")), dir.id, itemDirValues, function (returnObj) {\n                if (returnObj.code == 0) {\n                  growl.success(\"指令发送成功，请勿重复发送，状态数据返回需要一定时间！\", {});\n                }\n              });\n              dialogRef.close();\n            }\n          }, {\n            label: '取消',\n            action: function action(dialogRef) {\n              dialogRef.close();\n            }\n          }]\n        });\n      };\n\n      cmethod.prototype.sendItemDirAll = function (dir) {\n        var itemDirValues = {};\n\n        for (var i in dir.params) {\n          var obj = dir.params[i];\n\n          if (dir.params[i].$value) {\n            itemDirValues[obj.name] = dir.params[i].$value;\n          }\n        }\n\n        resourceUIService.sendDeviceDirective(Number(this.getParameter(\"resourceId\")), dir.id, itemDirValues, function (returnObj) {\n          if (returnObj.code == 0) {\n            growl.success(\"指令发送成功\", {});\n          }\n        });\n      };\n\n      cmethod.prototype.sendItemDirByValue = function (id, params) {\n        resourceUIService.sendDeviceDirective(Number(this.getParameter(\"resourceId\")), id, params, function (returnObj) {\n          if (returnObj.code == 0) {\n            growl.success(\"指令发送成功\", {});\n          }\n        });\n      };\n\n      cmethod.prototype.getAllDevices = function () {};\n\n      cmethod.prototype.getViewByViewTitle = function (viewTitle, callback) {\n        viewFlexService.getAllMyViews(function (event) {\n          var views = event.data;\n          var find = views.find(function (view) {\n            return view.viewTitle == viewTitle;\n          });\n\n          if (find) {\n            viewFlexService.getViewById(find.viewId, function (event) {\n              if (event.code == 0) {\n                callback(event.data);\n              }\n            });\n          } else {\n            callback(null);\n          }\n        });\n      };\n\n      cmethod.prototype.setTimeInterval = function (fn, num) {\n        timeIntervals.push(fn, num || 10000);\n      };\n\n      cmethod.prototype.getResources = function (callback, extendstr) {\n        var fn = cmethod.prototype.getResources;\n\n        if (fn.cached) {\n          callback && callback(clone(fn.cached));\n        } else {\n          fn.promise = fn.promise || new Promise(function (resolve, reject) {\n            resourceUIService.getResources(function (event) {\n              if (event.code == 0) {\n                resolve(event.data);\n              } else {\n                reject(event);\n              }\n            }, extendstr);\n          });\n          fn.promise.then(function (d) {\n            fn.cached = d;\n            callback && callback(clone(fn.cached));\n          }).catch(function (e) {\n            console.error(e);\n          });\n        }\n      };\n      /**\n       * 宝钢针对全局视图的跳转，扩展了一个方法\n       * @param str\n       */\n\n\n      function removeNull(obj) {\n        for (var i in obj) {\n          if (typeof obj[i] === \"undefined\" || obj[i] === null) {\n            delete obj[i];\n          }\n        }\n\n        return obj;\n      }\n\n      cmethod.prototype.navigateToTab = function (p) {\n        var target = $state.current.name,\n            params = $state.params;\n        extend(params, p);\n        $state.go(target, removeNull(params));\n      };\n\n      cmethod.prototype.analysisDataPrep = function (node, callback) {\n        var cur = this,\n            sensor,\n            accessConfigs,\n            id = node.nodeId;\n        cur.setParameter(\"id\", node.nodeId);\n        cur.getResourceById(node.nodeId, function (resource) {\n          cur.getDomainAreaLineTree(function (domainTree) {\n            //extend(dt, resource);\n            accessConfigs = dt.physicalConfig.accessConfigs || {};\n            cur.setValue(\"global/alertTime\", node.arisingTime);\n            cur.setValue(\"global/resource\", dt);\n            sensor = accessConfigs.find(function (n) {\n              return n.instance === node.instance;\n            }) || null;\n            cur.setValue(\"global/sensor\", sensor);\n            callback(sensor.name);\n          });\n        });\n      };\n\n      cmethod.prototype.getProjectsAndKpiValue = function (callback) {\n        var cur = this;\n        cur.findProjectsByCondition({}, function (projects) {\n          var cis = [];\n          var kpis = [999999];\n\n          var pushDiff = function pushDiff(arr) {\n            for (var i in arr) {\n              if (this.indexOf(arr[i]) == -1) {\n                this.push(arr[i]);\n              }\n            }\n          };\n\n          var sloop = function sloop(arr, rptback, callback) {\n            var inx = 0;\n\n            var repeat = function repeat(inx) {\n              var item = arr[inx];\n\n              if (item) {\n                rptback(item, function () {\n                  inx++;\n                  repeat(inx);\n                });\n              } else {\n                callback(arr);\n              }\n            };\n\n            repeat(inx);\n          };\n\n          var traverse = function traverse(callback) {\n            var cur = this;\n\n            for (var i in cur) {\n              for (var j in cur[i].devices) {\n                callback(cur[i], j, cur[i].devices[j]);\n              }\n            }\n          };\n\n          sloop(projects, function (project, callback1) {\n            cur.getDevicesByCondition({\n              projectId: project.id\n            }, function (devices) {\n              project.devices = devices;\n              var devis = devices.map(function (elem) {\n                return elem.id;\n              });\n              pushDiff.call(cis, devis);\n              sloop(devices, function (device, callback2) {\n                var modelId = device.modelId;\n                cur.getKpisByModelId(modelId, function (kpiDes) {\n                  var kpiMaps = kpiDes.map(function (elem) {\n                    return elem.id;\n                  });\n                  pushDiff.call(kpis, kpiMaps);\n                  device.kpis = kpiDes;\n                  callback2();\n                });\n              }, function () {\n                callback1();\n              });\n            });\n          }, function () {\n            cur.getKpiValueCi(cis, kpis, function (valuelist) {\n              traverse.call(projects, function (project, inx, device) {\n                if (project.detail == undefined) {\n                  project.detail = [];\n                }\n\n                var loop = function loop(kpi) {\n                  var find = valuelist.find(function (el) {\n                    return el.nodeId == device.id && el.kpiCode == kpi.id;\n                  });\n                  var alertFind = valuelist.find(function (el) {\n                    return el.nodeId == device.id && el.kpiCode == 999999 && el.instance == kpi.id;\n                  });\n                  project.detail.push({\n                    ci: {\n                      label: device.label\n                    },\n                    kpi: {\n                      label: kpi.label,\n                      icon: kpi.icon ? kpi.icon : \"proudsmart ps-system\"\n                    },\n                    status: alertFind ? alertFind.value : 0,\n                    value: find ? find.value : \"-\"\n                  });\n                };\n\n                for (var i in device.kpis) {\n                  loop(device.kpis[i]);\n                }\n              });\n              callback(projects);\n            }, {\n              \"includeInstance\": true\n            });\n          });\n        });\n      };\n\n      cmethod.prototype.Synchook = function () {\n        function Synchook() {\n          this.hooks = {};\n        }\n\n        Synchook.prototype.tap = function (name, callback) {\n          this.hooks[name] = callback;\n        };\n\n        Synchook.prototype.call = function (name, data, callback) {\n          var rs,\n              next = function next(d) {\n            callback(d);\n          };\n\n          if (typeof this.hooks[name] !== \"function\") {\n            callback();\n          } else {\n            rs = this.hooks[name](data, next);\n\n            if (rs) {\n              callback(rs);\n\n              next = function next() {};\n            }\n          }\n\n          ;\n        };\n\n        return new Synchook();\n      };\n\n      cmethod.prototype.getProTypeByTypeId = function (id, callback) {\n        customMethodService.getProTypeByTypeId(id, function (event) {\n          if (event.code == 0) {\n            if (typeof callback == \"function\") {\n              callback(event.data);\n            } else {\n              console.log(\"请配置回调函数\");\n            }\n          }\n        });\n      };\n\n      function parse(str) {\n        var obj = null;\n\n        try {\n          obj = JSON.parse(str);\n        } catch (e) {\n          return null;\n        }\n\n        return obj;\n      }\n\n      function getParamsFromHash(attr) {\n        var hash = location.$$path,\n            params = hash && hash.split(\"/\"),\n            obj = params && params.pop(),\n            attrs = parse(obj) || [],\n            at = attrs.pop() || {};\n        return at[attr];\n      }\n\n      cmethod.prototype.getParameter = function (str) {\n        if (str === \"id\") {\n          var id = $state.params[str];\n          return id;\n        } else {\n          return $state.params[str] || getParamsFromHash(str);\n        }\n        /** 同时取得PATH和HASH的信息*/\n\n        /**\n        if( str === \"id\" ){\n          return $state.params[ \"id\" ];\n        }\n        var hash = (function (h) {\n          if (!h) return {};\n          var r = decodeURIComponent(h);\n          return JSON.parse(r)\n        })(location.hash());\n        var param = (function (s) {\n          if (!s) return {};\n          var p = decodeURIComponent(s);\n          p = JSON.parse(p);\n          return p.length > 0 ? p[p.length - 1] : {}\n        })(routeParam.parameter);\n        if (typeof param !== \"object\") {\n          param = {};\n        }\n        extend(param, hash);\n        return param.$attr(str);**/\n\n      };\n\n      cmethod.prototype.setParameter = function (attr, val) {\n        /**\n        var hash = (function (h) {\n          if (!h) return {};\n          var r = decodeURIComponent(h);\n          return JSON.parse(r)\n        })(location.hash());\n        if (val) {\n          hash.$attr(attr, val);\n        } else {\n          ;\n          hash.$delete(attr);\n        }**/\n        $state.params[\"#\"] = $state.params[\"#\"] || {};\n        $state.params[\"#\"][attr] = val; //location.hash(JSON.stringify(hash));\n      };\n\n      cmethod.prototype.getPages = function (str) {\n        var pageArr = (routeParam.page || \"index\").split(\"|\");\n        var parameters = JSON.parse(routeParam.parameter || \"[0]\");\n        var rs = [];\n        var rootTarget = this.getRootTarget();\n        var groups = rootTarget.groups;\n\n        for (var i in pageArr) {\n          rs.push({\n            path: pageArr[i],\n            tabLabel: parameters[i].tabLabel || groups[i].label,\n            parameter: parameters[i]\n          });\n        }\n\n        return rs;\n      };\n\n      _proto_.$getCurrentResource = $getCurrentResource = function $getCurrentResource(callback) {\n        var id = $state.params.id;\n        $getResourceById(id, callback);\n      };\n\n      _proto_.$getResourceById = $getResourceById = function $getResourceById(id, callback) {\n        psTreeData(id).getState().then(callback);\n      };\n\n      cmethod.prototype.getResourceById = function (id, callback, fromCache) {\n        var fn = cmethod.prototype.getResourceById;\n\n        if (!id) {\n          throw new Error(\"id不可为空\");\n        }\n\n        fn[id] = fn[id] || {};\n        fn[id].cached = fn[id].cached || {};\n\n        if (fn[id].cached && fromCache) {\n          callback(clone(fn[id].cached));\n        } else {\n          fn[id].promise = fn[id].promise || new Promise(function (resolve) {\n            resourceUIService.getResourceById(id, function (event) {\n              if (event.code == 0) {\n                resolve(event.data);\n              }\n            });\n          });\n          fn[id].promise.then(function (resource) {\n            fn[id].cached = resource;\n            callback(clone(resource));\n            delete fn[id].promise;\n          });\n        }\n      };\n\n      cmethod.prototype.getOnlineByKpiCodes = function (id, callback) {\n        if (id) {\n          var kpiQueryModel = {\n            includeInstance: true,\n            isRealTimeData: true,\n            nodeIds: [id],\n            kpiCodes: [999998],\n            timePeriod: 0\n          };\n          var param = [\"kpi\", kpiQueryModel];\n          kpiDataService.getValueList(param, function (event) {\n            if (event.code == 0) {\n              callback(event.data);\n            }\n          });\n        } else {\n          callback(null);\n        }\n      };\n\n      cmethod.prototype.navigateBackTo = function () {\n        window.location.href = oldURL;\n      };\n\n      cmethod.prototype.navigateBack = function () {\n        var para,\n            page = routeParam.page ? routeParam.page : \"index\";\n        var oldParam = routeParam.parameter;\n\n        if (oldParam == undefined) {\n          oldParam = ['0'];\n        } else {\n          oldParam = JSON.parse(oldParam);\n        }\n\n        var pageArr = page.split(\"|\");\n        pageArr.pop();\n        page = pageArr.toString();\n        page = page.replace(\",\", \"|\");\n        var last = oldParam[oldParam.length - 1];\n        var tabLabel = last.tabLabel;\n        oldParam.pop();\n        para = encodeURIComponent(JSON.stringify(oldParam));\n\n        if (route.current.$$route.controller == \"viewFreeboardCtrl\") {\n          if (page != \"\") {\n            window.location.href = \"../app-sc/index_freeboard.html#/freeboard/\" + page + \"/\" + para;\n          }\n        } else if (route.current.$$route.controller == \"freeStyleCtrl\") {\n          var viewId = routeParam.viewId;\n\n          if (page != \"\") {\n            window.location.href = \"../app-free-style/index.html#/\" + viewId + \"/\" + page + \"/\" + para;\n          }\n        } else {\n          if (page != \"\") {\n            window.location.href = \"../app-oc/index.html#/dashboard/\" + page + \"/\" + para;\n          }\n        }\n      };\n\n      cmethod.prototype.moveTo = function (url) {\n        var para,\n            page,\n            pageStr = routeParam.page ? routeParam.page : \"index\";\n        var oldParam = routeParam.parameter;\n\n        if (oldParam == undefined) {\n          oldParam = ['0'];\n        } else {\n          oldParam = JSON.parse(oldParam);\n        }\n\n        var page = pageStr.split(\"|\");\n        var inx = page.indexOf(url);\n\n        if (inx != -1) {\n          var pageArr = page.slice(0, inx + 1);\n          oldParam = oldParam.slice(0, inx + 1);\n          page = pageArr.toString();\n          page = page.replace(/\\,/g, \"|\");\n          para = encodeURIComponent(JSON.stringify(oldParam));\n\n          if (route.current.$$route.controller == \"viewFreeboardCtrl\") {\n            window.location.href = \"../app-sc/index_freeboard.html#/freeboard/\" + page + \"/\" + para;\n          } else if (route.current.$$route.controller == \"freeStyleCtrl\") {\n            var viewId = routeParam.viewId;\n            window.location.href = \"../app-free-style/index.html#/\" + viewId + \"/\" + page + \"/\" + para;\n          } else {\n            window.location.href = \"../app-oc/index.html#/dashboard/\" + page + \"/\" + para;\n          }\n        }\n      };\n\n      function getRootDir() {\n        var controller = route.current.$$route.controller;\n        var Dic = {\n          viewFreeboardCtrl: \"freeboard\",\n          freeStyleCtrl: routeParam.viewId,\n          others: \"dashboard\"\n        };\n        return Dic[controller] || \"dashboard\";\n      }\n\n      _proto_.destroy = function (fn) {\n        //window.removeEventListener( \"hashchange\", hashkeyChangeListener );\n        scope && scope.$on(\"$destroy\", fn);\n      };\n\n      cmethod.prototype.navigateToJson = function (url, parameter, type) {\n        var para,\n            page = routeParam.page ? routeParam.page : \"index\";\n\n        if (parameter == undefined) {\n          parameter = '0';\n        }\n\n        var oldParam = routeParam.parameter;\n\n        if (oldParam == undefined) {\n          oldParam = ['0'];\n        } else {\n          oldParam = JSON.parse(oldParam);\n        }\n\n        if (type == \"self\") {\n          var pageArr = page.split(\"|\");\n          pageArr.pop();\n          page = pageArr.toString();\n          page.replace(\",\", \"|\");\n          var last = oldParam[oldParam.length - 1];\n          var tabLabel = last.tabLabel;\n          oldParam.pop();\n\n          if (tabLabel) {\n            parameter.tabLabel = tabLabel;\n          }\n\n          parameter.$target == \"self\";\n          oldParam.push(parameter);\n        } else {\n          parameter.$target == \"blank\";\n          oldParam.push(parameter);\n        }\n\n        para = encodeURIComponent(JSON.stringify(oldParam));\n\n        if (route.current.$$route.controller == \"viewFreeboardCtrl\") {\n          if (page != \"\") {\n            window.location.href = \"../app-sc/index_freeboard.html#/freeboard/\" + page + \"|json:\" + url + \"/\" + para;\n          } else {\n            window.location.href = \"../app-sc/index_freeboard.html#/freeboard/\" + url + \"/\" + para;\n          }\n        } else if (route.current.$$route.controller == \"freeStyleCtrl\") {\n          var viewId = routeParam.viewId;\n\n          if (page != \"\") {\n            window.location.href = \"../app-free-style/index.html#/\" + viewId + \"/\" + page + \"|json:\" + url + \"/\" + para;\n          } else {\n            window.location.href = \"../app-free-style/index.html#/\" + viewId + \"/\" + url + \"/\" + para;\n          }\n        } else {\n          if (page != \"\") {\n            window.location.href = \"../app-oc/index.html#/dashboard/\" + page + \"|json:\" + url + \"/\" + para;\n          } else {\n            window.location.href = \"../app-oc/index.html#/dashboard/\" + url + \"/\" + para;\n          }\n        }\n      };\n\n      cmethod.prototype.navigateToFeature = function (callback) {\n        var cur = this;\n        var ROLE = cur.getValue(\"global/ROLE\");\n\n        if (ROLE == 0) {\n          cur.navigateTo(\"index\", {\n            main: 3\n          }, \"self\");\n        } else if (ROLE == 1) {\n          cur.navigateTo(\"index\", {\n            main: 2,\n            backHistory: 1\n          }, \"self\");\n        } else if (ROLE == 2) {\n          cur.navigateTo(\"index\", {\n            main: 2,\n            backHistory: 1\n          }, \"self\");\n        } else if (ROLE == 3) {\n          cur.navigateTo(\"index\", {\n            main: 2,\n            backHistory: 1\n          }, \"self\");\n        }\n      };\n      /** 跳转方法支持以下写法\n      target.navigateTo(\"综合趋势\");\n      target.navigateTo(\"prod_analysis\");\n      target.navigateTo(1);\n      target.navigateTo(\"index\", 1);\n      target.navigateTo([1,0]);\n      target.navigateTo(\"index\", [1,0]);\n      target.navigateTo({\n        main : 1,\n        sub : [0,\"\"]\n      });\n      target.navigateTo(\"index\", {\n        main : 1,\n        sub : 0\n      });\n       target.navigateTo(\"index\", function(node){\n          return node.name == \"综合趋势\";\n       });\n       **/\n\n\n      cmethod.prototype.navigateTo = function (url, parameter, ext) {\n        var viewId;\n        ext = _typeof(ext) === \"object\" ? ext : {};\n        /** consequcency keeping  **/\n\n        if (url == \"index\" && parameter == \"专业分析\" && ext && ext.id) {\n          var id = ext.id,\n              dic = {\n            \"D\": \"电气分析\",\n            \"Z\": \"振动分析\"\n          };\n          var analType = dic[ext.specialty] ? dic[ext.specialty] : \"综合趋势\";\n          psUiRouterHandler.moveToNodeByCondition(function (node) {\n            return node.label == analType || node.name == analType;\n          }, ext);\n          return;\n        }\n        /** consequcency keeping  **/\n\n\n        if (typeof parameter === \"undefined\") {\n          parameter = url;\n          url = \"index\";\n        }\n\n        if (typeof parameter === \"undefined\") {\n          throw new Error(\"invalid parameter found\");\n        }\n\n        if (typeof parameter === \"string\") {\n          if (/\\d+/.test(parameter)) {\n            parameter = {\n              main: parameter - 0\n            };\n          } else {\n            psUiRouterHandler.moveToNodeByCondition(function (node) {\n              return node.name == parameter;\n            }, ext);\n            return;\n          }\n        }\n\n        if (typeof parameter === \"function\") {\n          psUiRouterHandler.moveToNodeByCondition(parameter, ext);\n          return;\n        }\n\n        if (typeof parameter === \"number\") {\n          parameter = {\n            main: parameter\n          };\n        }\n\n        if (_typeof(parameter) === \"object\") {\n          parameter = function (parameter) {\n            var rs = [];\n            rs[0] = parameter.main || parameter[0];\n            rs[1] = parameter.sub || parameter[1];\n            rs[2] = parameter.minor || parameter[2];\n            return rs.reduce(function (a, b) {\n              if (typeof b == \"number\" || typeof b == \"string\") {\n                a.push(b);\n              }\n\n              if (_typeof(b) == \"object\") {\n                a.push(b[0]);\n                var m = /viewId\\:(.*)$/.exec(b[1]);\n\n                if (m) {\n                  ext.viewId = m[1];\n                } else {\n                  url = b[1];\n                }\n              }\n\n              return a;\n            }, []);\n          }(parameter);\n\n          psUiRouterHandler.moveToNodeByIndex(url, parameter, ext);\n        }\n        /**\n         * 目前app-oc支持的是一级模块，暂时只修改了app-sc这个项目\n         * 跳转到新的页面\n         * hx 2019-01-15\n         */\n\n        /**\n        var showTree = typeof parameter.showTree === \"undefined\"\n        ? 1 : !!parameter.showTree - 0;\n        if(parameter.hasOwnProperty(\"main\") &&  parameter.hasOwnProperty(\"sub\") && parameter.hasOwnProperty(\"minor\")){\n        var mainIndex = typeof(parameter.main) == \"number\" ? parameter.main :parameter.main[0];\n        var subIndex = typeof(parameter.sub) == \"number\" ? parameter.sub :parameter.sub[0];\n        var viewId = typeof(parameter.minor) == \"number\" ? parameter.minor : parameter.minor[1].split(\":\")[1];\n         $state.go(\"prod_sub_dashboard.minor_dashboard.minor_view\",{\n          id : $state.params.id,\n          showTree: showTree,\n          main_active_index:mainIndex,\n          sub_active_index:subIndex,\n          subview:viewId,\n          minor_active_index: parameter.minor[0],\n        })\n        }else if(parameter.hasOwnProperty(\"main\") &&  parameter.hasOwnProperty(\"sub\")){\n        var mainIndex = typeof(parameter.main) == \"number\" ? parameter.main :parameter.main[0];\n        var viewId = typeof(parameter.sub) == \"number\" ? parameter.sub : parameter.sub[1].split(\":\")[1];\n        $state.go(\"prod_sub_dashboard.subview\",{\n          id : $state.params.id,\n          showTree: showTree,\n          main_active_index:mainIndex,\n          subview:viewId,\n          sub_active_index:parameter.sub[0] ,\n          index:url\n        })\n        }else if(parameter.hasOwnProperty(\"main\")){\n        var viewId = parameter.main[1].split(\":\")[1];\n        $state.go(\"prod_dashboard\",{\n          id : $state.params.id,\n          showTree:0,\n          main_active_index:parameter.main[0],\n          mainViewId:viewId,\n          index:url,\n        })\n        }**/\n\n      };\n\n      cmethod.prototype.$state = $state;\n\n      cmethod.prototype.historyBack = function () {\n        window.history.go(-1);\n      };\n\n      cmethod.prototype.back = function () {\n        window.history.go(-1);\n      };\n\n      cmethod.prototype.explainDic = function (attr, elem) {\n        var obj;\n\n        if (_typeof(elem) == \"object\") {\n          obj = elem;\n        } else {\n          obj = {\n            type: \"label\",\n            value: attr,\n            name: elem\n          };\n        }\n\n        return obj;\n      };\n\n      cmethod.prototype.getSimulateApi = function (simulate, num, callback) {\n        var rs = [];\n        var target = {\n          randomText: function randomText(strs) {\n            var length = strs.length - 1;\n            var inx = Math.round(Math.random() * length);\n            return strs[inx];\n          },\n          random: function random(max, digital) {\n            var num = parseInt(Math.random() * max * Math.pow(10, digital)) / Math.pow(10, digital);\n            return num;\n          }\n        };\n\n        var repeat = function repeat(inx) {\n          var obj = {};\n\n          var loopAttr = function loopAttr(attr, elem) {\n            if (typeof elem == \"function\") {\n              obj[attr] = elem(inx, target, attr);\n            } else {\n              obj[attr] = elem;\n            }\n          };\n\n          for (var i in simulate) {\n            loopAttr(i, simulate[i]);\n          }\n\n          return obj;\n        };\n\n        for (var i = 0; i < num; i++) {\n          rs.push(repeat(i));\n        }\n\n        if (callback) {\n          callback(rs);\n        }\n      };\n\n      cmethod.prototype.getStartDate = function () {\n        var alertTime = this.getValue(\"global/alertTime\"),\n            currentDate = this.dateHandler();\n        alertMode = true;\n        alertTime = alertTime ? this.dateHandler(alertTime) : null;\n        return alertTime ? alertTime.clone().addHour(-2) : currentDate.addHour(-4);\n      };\n\n      cmethod.prototype.getEndDate = function () {\n        var alertTime = this.getValue(\"global/alertTime\"),\n            currentDate = this.dateHandler();\n        alertMode = true;\n        alertTime = alertTime ? this.dateHandler(alertTime) : null;\n        return alertTime ? alertTime.addHour(1) : currentDate;\n      };\n\n      cmethod.prototype.wait = function (condition, success) {\n        var repeat = function repeat() {\n          if (condition()) {\n            success();\n          } else {\n            setTimeout(function () {\n              repeat();\n            }, 10);\n          }\n        };\n\n        repeat();\n      };\n\n      cmethod.prototype.http = function (url, callback) {\n        customMethodService.http(url, function (event) {\n          callback(event);\n        });\n      };\n\n      cmethod.prototype.getScope = function () {\n        var cur = this;\n        var parent = cur;\n\n        while (parent.parent) {\n          parent = parent.parent;\n        }\n\n        return parent;\n      };\n\n      cmethod.prototype.setScopeValue = function (attr, value) {\n        var t = this.getScope();\n\n        if (!t['private']) {\n          t['private'] = {};\n          Object.defineProperty(t, \"private\", {\n            enumerable: false,\n            value: {}\n          });\n        }\n\n        var obj = t['private'];\n        obj.$attr(attr, value);\n      };\n\n      cmethod.prototype.getScopeValue = function (attr) {\n        var t = this.getScope();\n        var obj = t['private'] || {};\n        return obj.$attr(attr);\n      };\n\n      cmethod.prototype.linkTo = function (url, target) {\n        window.open(url, target ? target : \"_blank\");\n      };\n\n      cmethod.prototype.findViewHasProjectNameById = function (projectId, callback) {\n        this.getResourceById(projectId, function (project) {\n          var label = project.label;\n\n          var getRootPath = function getRootPath(domainPath) {\n            var arr = domainPath.split(\"/\");\n            return \"/\" + arr[1] + \"/\" + arr[2] + \"/\";\n          };\n\n          var rootPath = getRootPath(userLoginUIService.user.domainPath);\n          viewFlexService.getViewsOnlyPublishedByTypeAndDomainPath('dashboard', rootPath, function (event) {\n            var views = event.data;\n            var find = views.find(function (view) {\n              return label.indexOf(view.viewTitle) != -1;\n            });\n\n            if (find) {\n              viewFlexService.getViewById(find.viewId, function (event) {\n                if (event.code == 0) {\n                  callback(event.data);\n                }\n              });\n            } else {\n              callback(null);\n            }\n          });\n        });\n      };\n\n      cmethod.prototype.getProjectsByCustomerId = function (customerId, callback) {\n        var param = {};\n\n        if (customerId) {\n          param.customerId = customerId;\n        }\n\n        projectUIService.findProjectsByCondition(param, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.simulate = function (type, nodesDes, kpisDes, simulateFn, callback) {\n        var result = [];\n        var date = new Date();\n        var timeStamp = date.getTime();\n\n        var timeStampToStr = function timeStampToStr(timeStamp) {\n          var nDate = new Date(timeStamp - 8 * 3600 * 1000);\n          var year = nDate.getFullYear();\n          var month = nDate.getMonth() + 1;\n          var dat = nDate.getDate();\n          var hour = nDate.getHours();\n          var min = nDate.getMinutes();\n          var sec = nDate.getSeconds();\n\n          if (month < 10) {\n            month = \"0\" + month;\n          }\n\n          if (dat < 10) {\n            dat = \"0\" + dat;\n          }\n\n          if (hour < 10) {\n            hour = \"0\" + hour;\n          }\n\n          if (min < 10) {\n            min = \"0\" + min;\n          }\n\n          if (sec < 10) {\n            sec = \"0\" + sec;\n          }\n\n          return year + \"-\" + month + \"-\" + dat + \"T\" + hour + \":\" + min + \":\" + sec + \".000+0000\";\n        };\n\n        var renderData = function renderData(index) {\n          var startTime = simulateFn.startTime.getTime();\n          var period = simulateFn.period;\n          var frequency = simulateFn.frequency;\n          var range = simulateFn.range;\n\n          var getData = function getData(curTime) {\n            if (curTime - startTime < period) {\n              var loopNodes = function loopNodes(node) {\n                var loopKpis = function loopKpis(inx, kpi) {\n                  var calcRandom = function calcRandom(range) {\n                    if (range) {\n                      var max = range[1];\n                      var min = range[0];\n                      var ran = max - min;\n                      return Math.round((min + Math.random() * ran) * 10) / 10;\n                    } else {\n                      return Math.round(Math.random() * 100);\n                    }\n                  };\n\n                  var val = calcRandom(range);\n                  var sampleData = {\n                    \"agentId\": \"0\",\n                    \"aggregatePeriod\": null,\n                    \"aggregateStatus\": null,\n                    \"aggregateType\": null,\n                    \"arisingTime\": timeStampToStr(curTime),\n                    \"compressCount\": 0,\n                    \"computeTaskId\": 0,\n                    \"dataSerialNumber\": 0,\n                    \"dataTime\": null,\n                    \"insertTime\": timeStampToStr(curTime),\n                    \"kpiCode\": kpi.id,\n                    \"nodeId\": node.id,\n                    \"notes\": null,\n                    \"numberValue\": val,\n                    \"quality\": 0,\n                    \"resourceId\": 0,\n                    \"stringValue\": null,\n                    \"value\": val,\n                    \"valueStr\": val + \"\"\n                  };\n                  result.push(sampleData);\n                };\n\n                for (var i in kpisDes) {\n                  loopKpis(i, kpisDes[i]);\n                }\n              };\n\n              for (var i in nodesDes) {\n                loopNodes(nodesDes[i]);\n              }\n\n              getData(curTime + frequency);\n            }\n          };\n\n          getData(startTime);\n\n          if (typeof callback == \"function\") {\n            callback(result);\n          }\n        };\n\n        var renderData2D = function renderData2D() {\n          var dictionaryService = services.dictionaryService;\n          var loadArray = [\"energyType\", \"industryShortType\"];\n\n          var nextStep = function nextStep() {\n            var loopNodes = function loopNodes(node) {\n              var loopKpis = function loopKpis(inx, kpi) {\n                var loopInstance = function loopInstance(ins1) {\n                  var loopInstance2 = function loopInstance2(ins2) {\n                    var range;\n\n                    if (ranges) {\n                      range = ranges[inx];\n                    }\n\n                    var calcRandom = function calcRandom(range) {\n                      if (range) {\n                        var max = range[1];\n                        var min = range[0];\n                        var ran = max - min;\n                        return Math.round((min + Math.random() * ran) * 10) / 10;\n                      } else {\n                        return Math.round(Math.random() * 100);\n                      }\n                    };\n\n                    var val = calcRandom(range);\n                    var newTime = timeStamp;\n                    var sampleData = {\n                      \"agentId\": \"0\",\n                      \"aggregatePeriod\": null,\n                      \"aggregateStatus\": null,\n                      \"aggregateType\": null,\n                      \"arisingTime\": timeStampToStr(newTime),\n                      \"compressCount\": 0,\n                      \"computeTaskId\": 0,\n                      \"dataSerialNumber\": 0,\n                      \"dataTime\": null,\n                      \"insertTime\": timeStampToStr(newTime),\n                      \"kpiCode\": kpi.id,\n                      \"nodeId\": node.id,\n                      \"notes\": null,\n                      \"numberValue\": val,\n                      \"instance\": ins1.label + \",\" + ins2.label,\n                      \"quality\": 0,\n                      \"resourceId\": 0,\n                      \"stringValue\": null,\n                      \"value\": val,\n                      \"valueStr\": val + \"\"\n                    };\n                    result.push(sampleData);\n                  };\n\n                  for (var i in loadArray[1].data) {\n                    loopInstance2(loadArray[1].data[i]);\n                  }\n                };\n\n                for (var i in loadArray[0].data) {\n                  loopInstance(loadArray[0].data[i]);\n                }\n              };\n\n              for (var i in kpisDes) {\n                loopKpis(i, kpisDes[i]);\n              }\n            };\n\n            for (var i in nodesDes) {\n              loopNodes(nodesDes[i]);\n            }\n\n            if (typeof callback == \"function\") {\n              callback(result);\n            }\n          };\n\n          var loop = function loop(inx, loadType) {\n            var getEnergyType = function getEnergyType(event) {\n              var checkFinished = function checkFinished() {\n                var every = loadArray.every(function (elem) {\n                  return _typeof(elem) == \"object\";\n                });\n\n                if (every) {\n                  nextStep();\n                }\n              };\n\n              if (event.code == 0) {\n                var rs = [];\n\n                var loop = function loop(el) {\n                  var some = rs.some(function (itm) {\n                    return itm.label == el.label;\n                  });\n\n                  if (!some) {\n                    rs.push(el);\n                  }\n                };\n\n                for (var i in event.data) {\n                  loop(event.data[i]);\n                }\n\n                loadArray[inx] = {\n                  path: loadType,\n                  status: \"finished\",\n                  data: rs\n                };\n                checkFinished();\n              }\n            };\n\n            dictionaryService.getDictValues(loadType, getEnergyType);\n          };\n\n          for (var i in loadArray) {\n            loop(i, loadArray[i]);\n          }\n        };\n\n        var renderData3D = function renderData3D() {\n          var aggr_type;\n          var dictionaryService = services.dictionaryService;\n          var loadArray = [\"energyType\", \"industryShortType\"];\n\n          var nextStep = function nextStep() {\n            var loopNodes = function loopNodes(node) {\n              var loopKpis = function loopKpis(inx, kpi) {\n                var loopAggrType = function loopAggrType(atype) {\n                  var loopInstance = function loopInstance(ins1) {\n                    var loopInstance2 = function loopInstance2(ins2) {\n                      var range;\n\n                      if (ranges) {\n                        range = ranges[inx];\n                      }\n\n                      var calcRandom = function calcRandom(range) {\n                        if (range) {\n                          var max = range[1];\n                          var min = range[0];\n                          var ran = max - min;\n                          return Math.round((min + Math.random() * ran) * 10) / 10;\n                        } else {\n                          return Math.round(Math.random() * 100);\n                        }\n                      };\n\n                      var val = calcRandom(range);\n                      var newTime = timeStamp;\n                      var sampleData = {\n                        \"agentId\": \"0\",\n                        \"aggregatePeriod\": null,\n                        \"aggregateStatus\": null,\n                        \"aggregateType\": atype.valueCode,\n                        \"arisingTime\": timeStampToStr(newTime),\n                        \"compressCount\": 0,\n                        \"computeTaskId\": 0,\n                        \"dataSerialNumber\": 0,\n                        \"dataTime\": null,\n                        \"insertTime\": timeStampToStr(newTime),\n                        \"kpiCode\": kpi.id,\n                        \"nodeId\": node.id,\n                        \"notes\": null,\n                        \"numberValue\": val,\n                        \"instance\": ins2.label + \",\" + ins1.label,\n                        \"quality\": 0,\n                        \"resourceId\": 0,\n                        \"stringValue\": null,\n                        \"value\": val,\n                        \"valueStr\": val + \"\"\n                      };\n                      result.push(sampleData);\n                    };\n\n                    for (var i in loadArray[1].data) {\n                      loopInstance2(loadArray[1].data[i]);\n                    }\n                  };\n\n                  for (var i in loadArray[0].data) {\n                    loopInstance(loadArray[0].data[i]);\n                  }\n                };\n\n                for (var i in aggr_type) {\n                  loopAggrType(aggr_type[i]);\n                }\n              };\n\n              for (var i in kpisDes) {\n                loopKpis(i, kpisDes[i]);\n              }\n            };\n\n            for (var i in nodesDes) {\n              loopNodes(nodesDes[i]);\n            }\n\n            if (typeof callback == \"function\") {\n              callback(result);\n            }\n          };\n\n          var loop = function loop(inx, loadType) {\n            var getEnergyType = function getEnergyType(event) {\n              var checkFinished = function checkFinished() {\n                var every = loadArray.every(function (elem) {\n                  return _typeof(elem) == \"object\";\n                });\n\n                if (every) {\n                  nextStep();\n                }\n              };\n\n              if (event.code == 0) {\n                var rs = [];\n\n                var loop = function loop(el) {\n                  var some = rs.some(function (itm) {\n                    return itm.label == el.label;\n                  });\n\n                  if (!some) {\n                    rs.push(el);\n                  }\n                };\n\n                for (var i in event.data) {\n                  loop(event.data[i]);\n                }\n\n                loadArray[inx] = {\n                  path: loadType,\n                  status: \"finished\",\n                  data: rs\n                };\n                checkFinished();\n              }\n            };\n\n            dictionaryService.getDictValues(loadType, getEnergyType);\n          };\n\n          for (var i in loadArray) {\n            loop(i, loadArray[i]);\n          }\n\n          dictionaryService.getDictValues(\"aggregateType\", function (event) {\n            if (event.code == 0) {\n              aggr_type = event.data.slice(0, 2);\n            }\n          });\n        };\n\n        if (type == \"time\") {\n          renderData();\n        } else if (type == \"ci\") {\n          renderData(0);\n        } else if (type == \"ci_2d\") {\n          renderData2D();\n        } else if (type == \"ci_3d\") {\n          renderData3D();\n        }\n\n        return result;\n      };\n\n      cmethod.prototype.getModels = function (callback) {\n        resourceUIService.getModels(function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getModelByIds = function (ids, callback) {\n        resourceUIService.getModelByIds(ids, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getKpisByModelId = function (modelId, callback) {\n        if (modelId) {\n          resourceUIService.getKpisByModelId(modelId, function (event) {\n            if (event.code == 0) {\n              for (var i in event.data) {\n                var kpiId = event.data[i].id;\n\n                if (!cmethod.kpiDic[kpiId]) {\n                  cmethod.kpiDic[kpiId] = event.data[i].label;\n                }\n              }\n\n              callback(event.data);\n            }\n          });\n        } else {\n          callback([]);\n        }\n      };\n      /**\n       * 根据不同的modelId获得资源\n       * 300域 301客户 302项目\n       * @param {Object} modelId\n       * @param {Object} callback\n       */\n\n\n      cmethod.prototype.getResourceByModelId = function (modelId, callback, extendstr, noCache) {\n        var fn = cmethod.prototype.getResourceByModelId;\n        fn.model = fn.model || {};\n        fn.model[modelId] = fn.model[modelId] || {};\n        var md = fn.model[modelId];\n\n        if (md.cached && !noCache) {\n          callback(clone(md.cached));\n        } else {\n          md.promise = md.promise || new Promise(function (resolve) {\n            resourceUIService.getResourceByModelId(modelId, function (event) {\n              if (event.code == 0) {\n                resolve(event.data);\n              }\n            });\n          }, extendstr);\n          md.promise.then(function (resource) {\n            md.cached = resource;\n            callback(clone(resource));\n          });\n        }\n      };\n\n      cmethod.prototype.getDomainsByFilter = function (filter, callback) {\n        resourceUIService.getDomainsByFilter(filter, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getDomainsByFilters = function (filter, callback) {\n        resourceUIService.getDomainsByFilters(filter, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getDeviceDiagnosticResumeAndAlertStatis = function (params, callback) {\n        ticketTaskService.getDeviceDiagnosticResumeAndAlertStatis(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getDeviceDiagnosticResumeAndAlertBypage = function (params, pageRequest, callback) {\n        ticketTaskService.getDeviceDiagnosticResumeAndAlertBypage(params, pageRequest, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.queryDomainsByEnterpriseId = function (filter, callback) {\n        energyConsumeUIService.queryDomainsByEnterpriseId(filter, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getProjectsByDomains = function (domains, callback) {\n        var param = {};\n\n        if (domains) {\n          param.domainPath = domains;\n        }\n\n        projectUIService.findProjectsByCondition(param, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getProjectsByDomains = function (domains, callback) {\n        var param = {};\n\n        if (domains) {\n          param.domainPath = domains;\n        }\n\n        projectUIService.findProjectsByCondition(param, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.getCurrentProjectsFromDomain = function (callback) {\n        var cur = this;\n        var domains = userLoginUIService.user.domains;\n        resourceUIService.getDomainsByFilter({\n          domains: userLoginUIService.user.domains,\n          modelId: 302\n        }, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          }\n        });\n      };\n\n      cmethod.prototype.findProjectById = function (id, callback) {\n        projectUIService.findProjectById(id, function (event) {\n          if (event.code == 0) {\n            if (callback) {\n              callback(event.data);\n            }\n          }\n        });\n      };\n\n      cmethod.prototype.getCurrentProjectsByCustom = function (callback) {\n        var cur = this; //如果没有subDomain的话，那就不是客户用户，没有customerId的\n\n        if (!userLoginUIService.user.subDomain) {\n          callback([]);\n          return;\n        }\n\n        var arr = userLoginUIService.user.subDomain.split(\"/\");\n        var customerId = arr[arr.length - 2];\n        var param = {\n          customerId: customerId\n        };\n        projectUIService.findProjectsByCondition(param, function (event) {\n          if (event.code == 0) {\n            if (callback) {\n              callback(event.data);\n            }\n          }\n        });\n      };\n\n      cmethod.prototype.getViewByProjectId = function (resId, callback) {\n        var getRootPath = function getRootPath(domainPath) {\n          var arr = domainPath.split(\"/\");\n          return \"/\" + arr[1] + \"/\" + arr[2] + \"/\";\n        };\n\n        var rootPath = getRootPath(userLoginUIService.user.domainPath);\n        viewFlexService.getViewsOnlyPublishedByTypeAndDomainPath('configure', rootPath, function (event) {\n          var views = event.data;\n          var find = views.find(function (view) {\n            if (view.template) {\n              if (view.template.resourceType == \"project\") {\n                if (view.template.resourceId == resId) {\n                  return true;\n                }\n              }\n            }\n\n            return false;\n          });\n\n          if (find) {\n            viewFlexService.getViewById(find.viewId, function (event) {\n              if (event.code == 0) {\n                callback(event.data);\n              }\n            });\n          } else {\n            callback(null);\n          }\n        });\n      };\n\n      cmethod.prototype.getAllMyViews = function (callback) {\n        viewFlexService.getAllMyViews(function (event) {\n          if (event.code == 0) {\n            var views = event.data;\n            callback(views);\n          } else {\n            callback(null);\n          }\n        });\n      };\n\n      cmethod.prototype.deleteView = function (viewId, callback) {\n        viewFlexService.deleteView(viewId, function (event) {\n          if (event.code == 0) {\n            var views = event.data;\n            callback(views);\n          } else {\n            callback(null);\n          }\n        });\n      };\n\n      cmethod.prototype.getDefaultView = function (modelId, callback) {\n        viewFlexService.getDefaultView(modelId, function (event) {\n          if (event.code == 0) {\n            var views = event.data;\n            callback(views);\n          } else {\n            callback(null);\n          }\n        });\n      };\n\n      cmethod.prototype.getManagedViewsByTypeAndRole = function (type, callback) {\n        viewFlexService.getManagedViewsByTypeAndRole(type, function (event) {\n          if (event.code == 0) {\n            var views = event.data;\n            callback(views);\n          } else {\n            callback(null);\n          }\n        });\n      };\n\n      cmethod.prototype.getViewsOnlyPublishedByTypeAndDomainPath = function (type, rootPath, callback) {\n        viewFlexService.getViewsOnlyPublishedByTypeAndDomainPath(type, rootPath, function (event) {\n          if (event.code == 0) {\n            var views = event.data;\n            callback(views);\n          } else {\n            callback(null);\n          }\n        });\n      };\n\n      _proto_.getRoot = function (callback) {\n        psTreeData.getRoot().then(callback);\n      };\n\n      cmethod.prototype.getViewByModelId = function (resId, callback) {\n        var getRootPath = function getRootPath(domainPath) {\n          var arr = domainPath.split(\"/\");\n          return \"/\" + arr[1] + \"/\" + arr[2] + \"/\";\n        };\n\n        var rootPath = getRootPath(userLoginUIService.user.domainPath);\n        viewFlexService.getViewsOnlyPublishedByTypeAndDomainPath('configure', rootPath, function (event) {\n          var views = event.data;\n          var find = views.find(function (view) {\n            if (view.template) {\n              if (view.template.resourceType == \"device\") {\n                if (view.template.resourceId == resId) {\n                  return true;\n                }\n              }\n            }\n\n            return false;\n          });\n\n          if (find) {\n            viewFlexService.getViewById(find.viewId, function (event) {\n              if (event.code == 0) {\n                callback(event.data);\n              }\n            });\n          } else {\n            callback(null);\n          }\n        });\n      };\n\n      cmethod.prototype.getSimulateList = function (data, callback) {\n        customMethodService.getSimulateList(data, callback);\n      };\n\n      var uuid = Math.uuid();\n\n      cmethod.prototype.webSocket = function (nodeIds, kpiCodes, callback, fixedid) {\n        if (nodeIds.length == 0 || kpiCodes.length == 0) return;\n\n        if (fixedid) {\n          uuid = fixedid;\n        } else {\n          uuid = Math.uuid();\n        }\n\n        SwSocket.unregister(uuid);\n        var paramSocket = {\n          ciid: nodeIds.toString(),\n          kpi: kpiCodes.toString()\n        };\n        var operation = \"register\";\n        SwSocket.register(uuid, operation, function (event) {\n          if (typeof callback == \"function\") {\n            callback(event.data);\n          }\n        });\n        SwSocket.send(uuid, operation, 'kpi', paramSocket);\n      };\n\n      cmethod.prototype.getKpiFromViewByTypeAndRole = function (viewType, resourceType, resourceId, callback, socketCallback) {\n        var kpiCodes = [];\n        var nodeIds = [Number(this.getParameter(\"resourceId\"))];\n        var valueDic = {};\n        var uuid = Math.uuid();\n        this.getViewsByOnlyRole(viewType, resourceType, resourceId, function (view) {\n          var json = JSON.parse(view.content);\n          json.cells.sort(function (a, b) {\n            return parseInt(a.z) - parseInt(b.z);\n          });\n          json.cells.forEach(function (cell) {\n            if (cell.type == \"basic.Rect\" && cell.kpiId && cell.kpiId.length > 8 && cell.nodeId && cell.nodeId.length > 8) {\n              var kpiId;\n\n              if (typeof cell.kpiId == \"string\" && cell.kpiId.search('number:') > -1) {\n                kpiId = Number(cell.kpiId.split(\":\")[1]);\n              } else {\n                kpiId = Number(cell.kpiId);\n              }\n\n              var modelId;\n\n              if (typeof cell.modelId == \"string\" && cell.modelId.search('number:') > -1) {\n                modelId = Number(cell.modelId.split(\":\")[1]);\n              } else {\n                modelId = Number(cell.modelId);\n              }\n\n              var kpiDef = {};\n\n              if (resourceUIService.rootModelsDic && resourceUIService.rootModelsDic[modelId]) {\n                if (resourceUIService.rootModelsDic[modelId].kpiDic && resourceUIService.rootModelsDic[modelId].kpiDic[kpiId]) {\n                  kpiDef = resourceUIService.rootModelsDic[modelId].kpiDic[kpiId];\n                }\n              }\n\n              kpiCodes.push(kpiId);\n              valueDic[kpiId] = {\n                kpiName: cell.attrs.text.text ? cell.attrs.text.text : kpiDef.label,\n                kpiUnit: cell.unitType == \"number:1\" ? kpiDef.unitLabel ? kpiDef.unitLabel : \"\" : \"\",\n                value: \"无\",\n                kpiCode: kpiDef.id,\n                rangeObj: kpiDef.rangeObj\n              };\n            }\n          });\n          var kpiQueryModel = {\n            category: 'ci',\n            isRealTimeData: true,\n            nodeIds: nodeIds,\n            kpiCodes: kpiCodes,\n            startTime: null,\n            endTime: null,\n            timeRange: \"\",\n            statisticType: \"psiot\",\n            condList: []\n          };\n          var param = [\"kpi\", kpiQueryModel];\n          kpiDataService.getValueList(param, function (event) {\n            if (event.code == 0) {\n              event.data.forEach(function (kpi) {\n                valueDic[kpi.kpiCode].value = kpi.value;\n                if (valueDic[kpi.kpiCode].rangeObj) valueDic[kpi.kpiCode].value = valueDic[kpi.kpiCode].rangeObj[valueDic[kpi.kpiCode].value];\n              });\n              var returnAry = [];\n\n              for (var key in valueDic) {\n                returnAry.push(valueDic[key]);\n              }\n\n              callback(returnAry);\n            }\n          });\n          var paramSocket = {\n            ciid: nodeIds.toString(),\n            kpi: kpiCodes.toString()\n          };\n          SwSocket.unregister(uuid);\n          var operation = \"register\";\n          SwSocket.register(uuid, operation, function (event) {\n            if (typeof socketCallback == \"function\") {\n              if (valueDic[event.data.kpiCode].rangeObj) event.data.value = valueDic[event.data.kpiCode].rangeObj[event.data.value];\n              socketCallback(event.data);\n            }\n          });\n          SwSocket.send(uuid, operation, 'kpi', paramSocket);\n        });\n      };\n\n      cmethod.prototype.filterEnterprises = function (callback) {\n        var domainPath = userLoginUIService.user.domains;\n        energyConsumeUIService.findEnterpriseInfoByDomainPath(domainPath, function (returnObj) {\n          if (returnObj.code == 0) {\n            returnObj.data.valueCode = returnObj.data.industryType;\n            cmethod.prototype.queryEnterpriseListByHis(returnObj.data, function (eventData) {\n              callback(eventData);\n            });\n          }\n        });\n      };\n\n      cmethod.prototype.queryEnterpriseListByHis = function (shortName, callback) {\n        if (!shortName) {\n          growl.warning(\"请选择行业\");\n          return;\n        }\n\n        var industryShortType = shortName.valueCode; //获取所有企业\n\n        var queryEnterprises = [];\n\n        (function queryAllEnterprises() {\n          energyConsumeUIService.findEnterpriseInfos(function (returnObj) {\n            if (returnObj.code == 0) {\n              returnObj.data.forEach(function (item) {\n                if (item.industryType == industryShortType) {\n                  item.label = item.name;\n                  queryEnterprises.push(item);\n                }\n              });\n              callback(queryEnterprises);\n            }\n          });\n        })();\n      };\n\n      cmethod.prototype.queryDomains = function (filter, callback) {\n        var nodeIdAry = [];\n        var index = 0;\n\n        var queryDomainsByEnterpriseId = function queryDomainsByEnterpriseId(enterpriseId) {\n          energyConsumeUIService.queryDomainsByEnterpriseId(enterpriseId, function (returnObj) {\n            if (returnObj.code == 0) {\n              index++;\n              var ary = returnObj.data.filter(function (item) {\n                return item.modelDefinitionId == filter.modelId;\n              });\n              ary.forEach(function (item) {\n                nodeIdAry.push(item.id);\n              });\n\n              if (index == filter.enterpriseList.length) {\n                callback(nodeIdAry);\n                index = 0;\n              }\n            }\n          });\n        };\n\n        filter.enterpriseList.forEach(function (item) {\n          queryDomainsByEnterpriseId(item);\n        });\n      };\n\n      cmethod.prototype.navigateToTracker = function (ticketNo) {\n        var cur = this,\n            all = routeParam.parameter ? JSON.parse(routeParam.parameter) : null,\n            parameter = {}.toString.call(all) == \"Array\" ? all[all.length - 1] : {},\n            main = cur.getParameter(\"main\") || 0,\n            sub = cur.getParameter(\"sub\") || 0;\n        sub = typeof sub == \"number\" ? [sub, \"viewId:9246777620035\"] : [sub[0], \"viewId:9246777620035\"];\n        main = typeof main == \"number\" ? [main, \"viewId:9246777620035\"] : [main[0], \"viewId:9246777620035\"];\n        var param = {\n          main: main,\n          ticketNo: ticketNo,\n          original: parameter\n        };\n        if (sub) param.sub = sub;\n        cur.navigateTo(\"index\", param, \"self\");\n      };\n\n      cmethod.prototype.getDirectivesByTypeAndRole = function (viewType, resourceType, resourceId, callback) {\n        var ids = {};\n        var cur = this;\n        cur.getManagedViewsByTypeAndRole(viewType, resourceType, resourceId, function (view) {\n          var json = JSON.parse(view.content);\n          json.cells.forEach(function (cell) {\n            if (cell.directiveIds) {\n              cell.directiveIds.forEach(function (dirctiveId) {\n                if (typeof dirctiveId == \"string\") ids[dirctiveId.split(\":\")[1]] = true;else ids[dirctiveId] = true;\n              });\n            }\n          });\n          cur.getDirectivesByModelId(resourceId, function (event) {\n            var resources = [];\n            event.forEach(function (dir) {\n              if (ids[dir.id]) resources.push(dir);\n            });\n            resources.sort(doubleCompare([\"values\", \"index\"], \"desc\"));\n            callback(resources);\n          });\n        });\n      };\n\n      cmethod.prototype.getDirectivesByTypeAndRoleAndValue = function (viewType, resourceType, modelId, callback) {\n        var ids = {};\n        var resourceId = this.getParameter(\"resourceId\");\n        var cur = this;\n        cur.getViewsByOnlyRole(viewType, resourceType, modelId, function (view) {\n          var json = JSON.parse(view.content);\n          json.cells.forEach(function (cell) {\n            if (cell.directiveIds) {\n              cell.directiveIds.forEach(function (dirctiveId) {\n                if (typeof dirctiveId == \"string\") ids[dirctiveId.split(\":\")[1]] = true;else ids[dirctiveId] = true;\n              });\n            }\n          });\n          cur.getDirectivesByModelId(modelId, function (event) {\n            var directives = [];\n            event.forEach(function (dir) {\n              if (ids[dir.id]) directives.push(dir);\n            });\n            directives.sort(doubleCompare([\"values\", \"index\"], \"desc\"));\n            var kpis = directives.map(function (elem) {\n              if (elem.params) {\n                if (elem.params[0]) {\n                  return elem.params[0].id;\n                } else {\n                  return 0;\n                }\n              } else {\n                return 0;\n              }\n            });\n            var ci = [parseInt(resourceId)];\n            cur.getKpiValueCi(ci, kpis, function (event) {\n              var loop = function loop(item) {\n                var directive = directives.find(function (elem) {\n                  if (elem.params[0]) {\n                    return elem.params[0].id == item.kpiCode;\n                  } else {\n                    return false;\n                  }\n                });\n\n                if (directive) {\n                  directive.value = item.value;\n                }\n              };\n\n              for (var i in event) {\n                loop(event[i]);\n              }\n\n              callback(directives);\n            });\n          });\n        });\n      };\n\n      cmethod.prototype.getDirectivesByModelId = function (modelId, callback) {\n        if (modelId) {\n          resourceUIService.getDirectivesByModelId(modelId, function (event) {\n            if (event.code == 0) {\n              callback(event.data);\n            }\n          });\n        } else {\n          callback([]);\n        }\n      };\n\n      cmethod.prototype.getRootTarget = function () {\n        return rootTarget;\n      };\n\n      cmethod.prototype.queryBenchmarkByShortName = function (shortName, callback) {\n        var industryDic = {};\n        var energyDic = {};\n        var industryShortType = [];\n        var energyType = [];\n        dictionaryService.getAllDicts(function (returnObj) {\n          if (returnObj.code == 0) {\n            returnObj.data.forEach(function (item) {\n              if (item.dictCode == 'industryShortType') {\n                industryShortType.push(item);\n              } else if (item.dictCode == 'energyType') {\n                energyType.push(item);\n              }\n            });\n            industryShortType.forEach(function (item) {\n              industryDic[item.label] = item;\n            });\n            energyType.forEach(function (item) {\n              energyDic[item.label] = item;\n            });\n            callBack();\n          }\n        });\n\n        function callBack() {\n          var returnAry = [];\n          var param = [\"kpi\", {\n            \"isRealTimeData\": true,\n            \"nodeIds\": [userLoginUIService.user.domainID],\n            \"kpiCodes\": [3327],\n            \"granularityUnit\": 'MONTH',\n            \"aggregateType\": [\"VALENTWEIGHT\"],\n            \"timeRange\": \"\",\n            \"statisticType\": \"psiot\",\n            \"includeInstance\": true,\n            \"condList\": [],\n            \"timePeriod\": 1,\n            \"dataType\": 1\n          }];\n          kpiDataService.getValueList(param, function (returnObj) {\n            if (returnObj.code == 0) {\n              returnObj.data.forEach(function (item) {\n                var instanceAry = item.instance.split(',');\n                item.instanceName = industryDic[instanceAry[0]].param;\n                item.instanceCode = industryDic[instanceAry[0]].valueCode;\n                item.energyName = instanceAry[1];\n                item.energyCode = energyDic[instanceAry[1]].valueCode;\n\n                if (shortName.label == instanceAry[0]) {\n                  returnAry.push(item);\n                }\n              });\n              callback(returnAry);\n            }\n          });\n        }\n      };\n\n      cmethod.prototype.getTaskBySimpleConditionAndPage = function (params, callback, pages) {\n        var pageRequest = {\n          \"start\": 0,\n          \"length\": 1000000,\n          \"sort\": \"standardNo\",\n          \"sortType\": \"desc\"\n        };\n\n        if (pages) {\n          pageRequest = pages;\n        }\n\n        maintenanceTaskUIService.getTaskBySimpleConditionAndPage(params, pageRequest, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; //新增的1\n\n\n      cmethod.prototype.getDeviceFaultInfoList = function (params, callback) {\n        //var pageRequest = {\"start\":0,\"length\":1000000,\"asc\":\"modifyTime\",\"sortType\":\"desc\"};\n        //if (pages) {\n        //  pageRequest = pages;\n        //}\n        deviceResumeUIService.getDeviceFaultInfoList(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      };\n\n      cmethod.prototype.Info = Info.get; //新增的2\n\n      cmethod.prototype.saveDeviceFaultInfo = function (params, callback) {\n        //var pageRequest = {\"start\":0,\"length\":1000000,\"asc\":\"modifyTime\",\"sortType\":\"desc\"};\n        //if (pages) {\n        //  pageRequest = pages;\n        //}\n        deviceResumeUIService.saveDeviceFaultInfo(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; //新增的3\n\n\n      cmethod.prototype.deleteDeviceFaultInfoById = function (id, callback) {\n        deviceResumeUIService.deleteDeviceFaultInfoById(id, function (event) {\n          callback(event);\n        });\n      }; //新增的书1\n\n\n      cmethod.prototype.getDeviceFaultBookList = function (params, callback) {\n        //var pageRequest = {\"start\":0,\"length\":1000000,\"asc\":\"modifyTime\",\"sortType\":\"desc\"};\n        //if (pages) {\n        //  pageRequest = pages;\n        //}\n        deviceResumeUIService.getDeviceFaultBookList(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; //新增的书2\n\n\n      cmethod.prototype.saveDeviceFaultBook = function (params, callback) {\n        //var pageRequest = {\"start\":0,\"length\":1000000,\"asc\":\"modifyTime\",\"sortType\":\"desc\"};\n        //if (pages) {\n        //  pageRequest = pages;\n        //}\n        deviceResumeUIService.saveDeviceFaultBook(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; //新增的书3\n\n\n      cmethod.prototype.deleteDeviceFaultBookById = function (id, callback) {\n        deviceResumeUIService.deleteDeviceFaultBookById(id, function (event) {\n          callback(event);\n        });\n      }; //告警统计\n\n\n      cmethod.prototype.getDeviceDiagnosticResumeListBypage = function (params, pageRequest, callback) {\n        deviceResumeUIService.getDeviceDiagnosticResumeListBypage(params, pageRequest, function (event) {\n          callback(event);\n        });\n      }; // 宝钢的下载表格\n\n\n      cmethod.prototype.exportBGExcel = function (service, method, format, params, pageRequset, callback) {\n        deviceResumeUIService.exportBGExcel(service, method, format, params, pageRequset, function (event) {\n          callback(event);\n        });\n      }; // 宝钢的下载表格\n\n\n      cmethod.prototype.exportHBExcel = function (service, method, format, params, callback) {\n        deviceResumeUIService.exportHBExcel(service, method, format, params, function (event) {\n          callback(event);\n        });\n      }; //新增的备件更换和服役\n\n\n      cmethod.prototype.getRollerPartActionLogByCondition = function (params, callback) {\n        rollerPartUIService.getRollerPartActionLogByCondition(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; //新增的查询所有辊道\n\n\n      cmethod.prototype.getRollerPartByCondition = function (params, callback) {\n        rollerPartUIService.getRollerPartByCondition(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 发起辊道备修委托\n\n\n      cmethod.prototype.rollerTrust = function (rollerPartList, paramValues, callback) {\n        rollerPartUIService.rollerTrust(rollerPartList, paramValues, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 卷筒备修委托-备件更换\n\n\n      cmethod.prototype.rollerReelTrustReplace = function (ticketNo, actionLog, taskValues, callback) {\n        rollerPartUIService.rollerReelTrustReplace(ticketNo, actionLog, taskValues, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 沉降系统\n\n\n      cmethod.prototype.getFactorySettlementByConditonAndPage = function (condtion, pageRequest, callback) {\n        rollerPartUIService.getFactorySettlementByConditonAndPage(condtion, pageRequest, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 卷筒备修委托\n\n\n      cmethod.prototype.rollerReelTrust = function (rollerPartList, message, paramValues, callback) {\n        rollerPartUIService.rollerReelTrust(rollerPartList, message, paramValues, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 发起 点检计划任务更改-批量点检\n\n\n      cmethod.prototype.pointCheckBatchDeal = function (ticketTaskList, callback) {\n        rollerPartUIService.pointCheckBatchDeal(ticketTaskList, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 生成额外计划\n\n\n      cmethod.prototype.createTempPointCheckTask = function (srcTaskList, changeDate, changeReason, callback) {\n        rollerPartUIService.createTempPointCheckTask(srcTaskList, changeDate, changeReason, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 计划日期调整\n\n\n      cmethod.prototype.changeTaskPlanTime = function (srcTaskList, changeDate, changeReason, callback) {\n        rollerPartUIService.changeTaskPlanTime(srcTaskList, changeDate, changeReason, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 点检任务统计\n\n\n      cmethod.prototype.getPointCheckStatis = function (ticketTaskQueryModel, callback) {\n        rollerPartUIService.getPointCheckStatis(ticketTaskQueryModel, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 更换辊道备修委托\n\n\n      cmethod.prototype.getRollerPartByCondition = function (params, callback) {\n        rollerPartUIService.getRollerPartByCondition(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 更换辊道\n\n\n      cmethod.prototype.rollerOnBoard = function (params, callback) {\n        rollerPartUIService.rollerOnBoard(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 总包诊断工程师提交报告:\n\n\n      cmethod.prototype.createCycleReport = function (params, callback) {\n        rollerPartUIService.createCycleReport(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 总包诊断工程师查询kpi:\n\n\n      cmethod.prototype.getCycleKpiList = function (params, callback) {\n        rollerPartUIService.getCycleKpiList(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 诊断分析工程师发起报告流程:\n\n\n      cmethod.prototype.sendCycleReportByTicket = function (params, callback) {\n        rollerPartUIService.sendCycleReportByTicket(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 周期报告查询（真分页接口）\n\n\n      cmethod.prototype.getDeviceCycleReportReumeListByPage = function (params, pageRequest, callback) {\n        deviceResumeUIService.getDeviceCycleReportReumeListByPage(params, pageRequest, function (event) {\n          callback(event);\n        });\n      }; // 查询日期调整\n\n\n      cmethod.prototype.getDatePickerListByCondition = function (params, pageSize, callback) {\n        rollerPartUIService.getDatePickerListByCondition(params, pageSize, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; //  计划预设定时期查询\n\n\n      cmethod.prototype.getPlanTaskTime = function (params, callback) {\n        rollerPartUIService.getPlanTaskTime(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 计划预设定时期设置\n\n\n      cmethod.prototype.setPlanTaskTime = function (params, callback) {\n        rollerPartUIService.setPlanTaskTime(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 工作日调整\n\n\n      cmethod.prototype.changeDatePickerBatch = function (srcDatePickerList, targetDate, changeReason, callback) {\n        rollerPartUIService.changeDatePickerBatch(srcDatePickerList, targetDate, changeReason, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 模型分析保存接口\n\n\n      cmethod.prototype.saveDeviceWorkInfoList = function (deviceId, deviceWorkInfoList, callback) {\n        deviceResumeUIService.saveDeviceWorkInfoList(deviceId, deviceWorkInfoList, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 模型分析查询接口\n\n\n      cmethod.prototype.getWorkInfoByDeviceId = function (deviceId, callback) {\n        deviceResumeUIService.getWorkInfoByDeviceId(deviceId, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 查询设备最新工况\n\n\n      cmethod.prototype.getDeviceConditionStatus = function (deviceId, callback) {\n        deviceResumeUIService.getDeviceConditionStatus(deviceId, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 查询最新模型分析结果\n\n\n      cmethod.prototype.getModelAnalysisResultByConditionAndPage = function (params, PageRequest, callback) {\n        deviceResumeUIService.getModelAnalysisResultByConditionAndPage(params, PageRequest, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 日报下载\n\n\n      cmethod.prototype.getDailyReportByCondtionAndPage = function (params, PageRequest, callback) {\n        rollerPartUIService.getDailyReportByCondtionAndPage(params, PageRequest, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 故障模型-查询\n\n\n      cmethod.prototype.getFaultDiagnosisModelByConditionAndPage = function (params, PageRequest, callback) {\n        rollerPartUIService.getFaultDiagnosisModelByConditionAndPage(params, PageRequest, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 故障模型-新增/编辑\n\n\n      cmethod.prototype.addFaultDiagnosisModel = function (params, callback) {\n        rollerPartUIService.addFaultDiagnosisModel(params, function (event) {\n          if (event.code == 0) {\n            callback(event);\n          } else {\n            callback(event);\n          }\n        });\n      }; // 故障模型-删除\n\n\n      cmethod.prototype.deleteFaultDiagnosisModel = function (params, callback) {\n        rollerPartUIService.deleteFaultDiagnosisModel(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 裂化模型-速率-查询\n\n\n      cmethod.prototype.getCrackRateModelByConditionAndPage = function (params, PageRequest, callback) {\n        rollerPartUIService.getCrackRateModelByConditionAndPage(params, PageRequest, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 裂化模型-速率-新增/编辑\n\n\n      cmethod.prototype.addCrackRateModel = function (params, callback) {\n        rollerPartUIService.addCrackRateModel(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 裂化模型-速率-删除\n\n\n      cmethod.prototype.deleteFaultCrackRateModel = function (params, callback) {\n        rollerPartUIService.deleteFaultCrackRateModel(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 裂化模型-温差-查询\n\n\n      cmethod.prototype.getCrackDiffModelByConditionAndPage = function (params, PageRequest, callback) {\n        rollerPartUIService.getCrackDiffModelByConditionAndPage(params, PageRequest, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 裂化模型-温差-新增/编辑\n\n\n      cmethod.prototype.addCrackDiffModel = function (params, callback) {\n        rollerPartUIService.addCrackDiffModel(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 裂化模型-温差-删除\n\n\n      cmethod.prototype.deleteCrackDiffModel = function (params, callback) {\n        rollerPartUIService.deleteCrackDiffModel(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 查找模型分析对应的字段\n\n\n      cmethod.prototype.getDiagnosisModel = function (modelId, callback) {\n        rollerPartUIService.getDiagnosisModel(modelId, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 发起模型分析\n\n\n      cmethod.prototype.sendModelAnalysis = function (deviceId, analysisTime, callback) {\n        deviceResumeUIService.sendModelAnalysis(deviceId, analysisTime, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      }; // 训练数据同步\n\n\n      cmethod.prototype.sendModelAnalysisTrain = function (deviceId, trainType, startTime, endTim, callback) {\n        deviceResumeUIService.sendModelAnalysisTrain(deviceId, trainType, startTime, endTim, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      };\n\n      cmethod.prototype.getTaskByCondition = function (params, callback) {\n        maintenanceTaskUIService.getTaskByCondition(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      };\n\n      cmethod.prototype.addPointCheckStanard = function (params, callback) {\n        maintenanceTaskUIService.addPointCheckStanard(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      };\n\n      cmethod.prototype.addMaintainStandardTask = function (params, callback) {\n        maintenanceTaskUIService.addMaintainStandardTask(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      };\n\n      cmethod.prototype.addOfflineStandard = function (params, callback) {\n        maintenanceTaskUIService.addOfflineStandard(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      };\n\n      cmethod.prototype.deleteTask = function (id, callback) {\n        maintenanceTaskUIService.deleteTask(id, function (event) {\n          callback(event);\n        });\n      };\n\n      cmethod.prototype.deleteMaintainStandardTask = function (id, callback) {\n        maintenanceTaskUIService.deleteMaintainStandardTask(id, function (event) {\n          callback(event);\n        });\n      };\n\n      cmethod.prototype.addPreparedMaintainTrust = function (id, callback) {\n        maintenanceTaskUIService.addPreparedMaintainTrust(id, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      };\n\n      cmethod.prototype.deleteSparePart = function (id, callback) {\n        sparePartUIService.deleteSparePart(id, function (event) {\n          callback(event);\n        });\n      };\n\n      cmethod.prototype.saveSparePart = function (params, callback) {\n        sparePartUIService.saveSparePart(params, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      };\n\n      cmethod.prototype.getSparePartByDeviceId = function (id, callback) {\n        sparePartUIService.getSparePartByDeviceId(id, function (event) {\n          if (event.code == 0) {\n            callback(event.data);\n          } else {\n            callback(null);\n          }\n        });\n      };\n\n      $getCurrentResource(function (res) {\n        setValue(\"global/resource\", res);\n      });\n      return new cmethod(mydata);\n    }\n\n    return cms;\n  }]);\n  return services;\n});"],"sourceRoot":"/source/"}