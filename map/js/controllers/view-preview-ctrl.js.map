{"version":3,"sources":["js/controllers/view-preview-ctrl.js"],"names":["define","controllers","viewPreviewCtrl","scope","rootScope","viewFlexService","timeout","window","Info","freeboardservice","growl","routeParams","freeboardBaseService","viewId","getViewById","event","instance","code","content","data","clone","JSON","parse","input","layout","setting","editData","replaceCiKpi","setMode","renderLayout","registerController","$inject"],"mappings":"AAAAA,OAAO,CAAC,0BAA2B,SAAU,SAAUC,GACrD,aAKA,SAASC,EAAgBC,EAAOC,EAAWC,EAAiBC,EAASC,EAAQC,EAAMC,EAAkBC,EAAOC,EAAaC,GACvH,IAAIC,EAASF,EAAYE,OACzBR,EAAgBS,YAAYD,EAAQ,SAAUE,GAG5C,GAFAZ,EAAMa,SAAW,GAEC,KAAdD,EAAME,KAAa,CACrB,IAAIC,EAAUH,EAAMI,KAAKD,QAGzB,GAAe,MAAXA,EAAiB,CACnB,IAAIE,EAAQC,KAAKC,MAAMJ,GACnBK,EAAQ,CACVC,OAAQJ,EAAMD,KAAOC,EAAMD,KAAOC,EAAMI,OACxCC,QAASL,EAAMK,gBAEVL,EAAMD,KACb,IAAIO,EAAW,IAAIjB,EAAiBkB,aAAaJ,EAAO,WACtDjB,EAAQ,WACNH,EAAMa,SAASY,SAAQ,GACvBzB,EAAMa,SAASa,aAAaH,WAtBxCzB,EAAY6B,mBAAmB,kBAAmB5B,GAClDA,EAAgB6B,QAAU,CAAC,SAAU,aAAc,kBAAmB,WAAY,UAAW,OAAQ,mBAAoB,QAAS,eAAgB","file":"js/controllers/view-preview-ctrl.js","sourcesContent":["define(['controllers/controllers', 'Array'], function (controllers) {\n  'use strict';\n\n  controllers.registerController('viewPreviewCtrl', viewPreviewCtrl);\n  viewPreviewCtrl.$inject = [\"$scope\", \"$rootScope\", \"viewFlexService\", \"$timeout\", \"$window\", \"Info\", \"freeboardservice\", 'growl', '$routeParams', 'freeboardBaseService'];\n\n  function viewPreviewCtrl(scope, rootScope, viewFlexService, timeout, window, Info, freeboardservice, growl, routeParams, freeboardBaseService) {\n    var viewId = routeParams.viewId;\n    viewFlexService.getViewById(viewId, function (event) {\n      scope.instance = {};\n\n      if (event.code == \"0\") {\n        var content = event.data.content,\n            dt;\n\n        if (content != null) {\n          var clone = JSON.parse(content);\n          var input = {\n            layout: clone.data ? clone.data : clone.layout,\n            setting: clone.setting\n          };\n          delete clone.data;\n          var editData = new freeboardservice.replaceCiKpi(input, function () {\n            timeout(function () {\n              scope.instance.setMode(true);\n              scope.instance.renderLayout(editData);\n            });\n          });\n        }\n      }\n    });\n  }\n});"],"sourceRoot":"/source/"}