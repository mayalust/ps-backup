{"version":3,"sources":["app-editor/js/toolkit/profile.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","callback","jquery","jui","st","ec","grid_controller","lib","$","fn","find","filter","profile","currentProfile","idList","drag_placeholder","editBtn_click_event","resBtn_click_event","codeBtn_click_event","saveImage_event","onErrorEvent","elementList","$Array","idid","oldSelect","chartChangeEvent","resourceChanged","onChartInit","addNewLabel","label","val","createChart","type","option","dataType","gr","document","clone","gridReceiver","handler","li_content","tmpHtml","tmpHtml2","element","element2","row","length","eval","attr","col","css","width","append","undefined","parent","height","chartCreator","push","getElementList","getChartTitle","onEvent","eventName","renderPreview","data","i","html","j","children","layout","widthheightPortion","theme","init","renderGraphList","title","content","changeTitleText","outul","modelId","kpis","nodes","timespan","parseInt","formatStr","series","itemStyle","normal","position","formatter","params","percent","toFixed","event","text","createNewProfile","elementHtml","newProf","window_width","window","window_height","prof_width","prof_height","id","opacity","sortable","grid_receiver","grid_creator","gridCreator","connect","stop","source","target","split","JSON","parse","optionStr","chartTab","delete","each","remove","change","resizeEchart","z-index","profMouseDown","stopPropagation","receiveFromOuter","ui","sender","dragImageEnd","dragTextEnd","dragReturnEnd","dragLineEnd","dragBarEnd","dragPieEnd","dragGaugeEnd","needtoeplace","insertBefore","canvas","addEventListener","evt","preventDefault","files","dataTransfer","file","FileReader","indexOf","reader","onload","background-image","result","readAsDataURL","resizable","helper","innerTxt","editInput","tcontrol","on","tcontrol_click","focus","charCode","blur","off","needtoreplace","createNewChart","elementReplacer","currentItem","hasClass","object","toolbarDraggableCreator","preload","toolbox","extend","category","optionType","eventListener","current","this","ec_element","deleteBtn","codeBtn","startloading","inx","baseOption","_lINECHART_STANDARD_","_BARCHART_STANDARD_","_PIECHART_STANDARD_","_GAUGECHART_STANDARD_","_SCATTERCHART_STANDARD_","_KCHART_STANDARD_","_RADARCHART_STANDARD_","_CHORDCHART_STANDARD_","_FUNNELCHART_STANDARD_","_RIVERCHART_STANDARD_","_VENNCHART_STANDARD_","_TREEMAPCHART_STANDARD_","_TREECHART_STANDARD_","_MAPCHART_STANDARD_","_FORCECHART_STANDARD_","bindEvent","deleteBtnClick","tg","stoploading","error","resize","el","rs","trigger","resBtn_click","returnData","editBtn","resBtn","size","removeClass","addClass","modePlanel_closeBtn_callback","console","log","display","right","animate","editBtn_click","marginLeft","top","closeBtnClick","draggable","handle","margin","setNodeKpiList","resources","Array","changeTheme","setTheme","changeOption","merge","value","setOption","numDom","connectToSortable","revert","start","elem","define"],"mappings":"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","file":"app-editor/js/toolkit/profile.js","sourcesContent":["function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\ndefine([\"jquery\", \"jquery-ui\", \"static\", \"echart_creator\", \"grid_controller\", 'Array'], callback);\n\nfunction callback(jquery, jui, st, ec, grid_controller, lib) {\n  if (typeof $.fn.find != 'function') {\n    $.fn.find = $.fn.filter;\n  }\n\n  var profile = {};\n  var currentProfile;\n  var idList = [];\n  var drag_placeholder;\n  var editBtn_click_event;\n  var resBtn_click_event;\n  var codeBtn_click_event;\n  var saveImage_event;\n  var onErrorEvent;\n  var elementList = new $Array([]);\n  var idid = 0;\n  var oldSelect;\n  var chartChangeEvent;\n  var resourceChanged;\n  var onChartInit;\n  profile.on = onEvent;\n  profile.createNewProfile = createNewProfile;\n  profile.getElementList = getElementList;\n  profile.getChartTitle = getChartTitle;\n  profile.renderGraphList = renderGraphList;\n  profile.createChart = createChart;\n  profile.addNewLabel = addNewLabel;\n  profile.renderPreview = renderPreview;\n  ec.preload();\n  ec.on(\"saveImage\", function (event, toolbox) {\n    saveImage_event(event, toolbox);\n  });\n  ec.on(\"error\", function (event) {\n    onErrorEvent(event);\n  });\n\n  function addNewLabel(label) {\n    var currentProfile = $(\"[currentProfile=true]\");\n    currentProfile.find(\"#HeaderInput\").val(label);\n  }\n\n  ;\n\n  function createChart(type, option, dataType) {\n    var gr = $(document).find(\"#grid_receiver\");\n    var clone = gr.gridReceiver(\"option\", \"addDefaultItem\");\n    var handler = clone.find(\".li_handler\");\n    var li_content = clone.find(\".li_content\");\n    var tmpHtml = '';\n    var tmpHtml2 = '';\n    var element;\n    var element2;\n    var row;\n\n    if (_typeof($(\"ul#all\").find)) {\n      row = $(\"ul#all\").find(\"li.inner:not(.empty)\").length;\n    } else {\n      row = $(\"ul#all li.inner:not(.empty)\").length;\n    }\n\n    eval(\"option = st.\" + option);\n    tmpHtml += \"<div class='coverbg'></div>\";\n    tmpHtml += \"<div class='noData'>\\\n                        <table>\\\n                            <td>没有数据</td>\\\n                        </table>\\\n                    </div>\\\n                    <div class='loading'>\\\n                        <table style='width : 100%; height : 100%'><td style='text-align:center; vertical-align:middle;'><div class='loadingIcon'></div></td></table>\\\n                    </div>\\\n                    <div class='edit'>\\\n                </div>\";\n    tmpHtml += \"</li>\";\n    tmpHtml2 += \"<button class='codeBtn btn btn-default'>代码</button>\\\n                    <button class='editBtn btn btn-default'>样式</button>\\\n                    <button class='resources btn btn-default'>数据</button>\";\n    element = $(tmpHtml);\n    element2 = $(tmpHtml2);\n    clone.attr({\n      row: row,\n      col: 0\n    }).css({\n      width: \"100%\"\n    });\n    handler.append(element2);\n    li_content.append(element);\n    gr.gridReceiver(\"option\", \"add\", undefined, clone);\n    clone.parent().parent().parent().css(\"height\", dataType.height ? dataType.height : 300);\n    clone.chartCreator(type, option, undefined, undefined, undefined, undefined, undefined, dataType);\n    gr.gridReceiver(\"option\", \"rearrangeEmpty\");\n    elementList.push(clone);\n  }\n\n  ;\n\n  function getElementList() {\n    return elementList;\n  }\n\n  function getChartTitle() {\n    var currentProfile = $(\"[currentProfile=true]\");\n\n    if (currentProfile.find) {\n      return currentProfile.find(\"#HeaderInput\").val();\n    } else {\n      return $(\"[currentProfile=true] #HeaderInput\").val();\n    }\n  }\n\n  function onEvent(eventName, callback) {\n    switch (eventName) {\n      case \"editBtn_click\":\n        editBtn_click_event = callback;\n        break;\n\n      case \"resBtn_click\":\n        resBtn_click_event = callback;\n        break;\n\n      case \"codeBtn_click\":\n        codeBtn_click_event = callback;\n        break;\n\n      case \"saveImage\":\n        saveImage_event = callback;\n        break;\n\n      case \"chartChanged\":\n        chartChangeEvent = callback;\n        break;\n\n      case \"resourceChanged\":\n        resourceChanged = callback;\n        break;\n\n      case \"chartInit\":\n        onChartInit = callback;\n        break;\n\n      case \"onError\":\n        onErrorEvent = callback;\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  function renderPreview(data) {\n    $(\"#preview\").html('');\n\n    for (var i in data) {\n      var row = $(\"<div class='rowcls'></div>\");\n      $(\"#preview\").append(row);\n\n      for (var j in data[i].children) {\n        var col = $(\"<div class='colcls'></div>\");\n        var option = data[i].children[j].option;\n        var type = data[i].children[j].type;\n        var width = data[i].children[j].layout.width;\n        var height = 1200 * width / 100 * data[i].children[j].layout.widthheightPortion;\n        var theme = data[i].children[j].theme;\n        col.css({\n          width: width + \"%\",\n          height: height\n        });\n        row.append(col);\n        ec.init(col[0], option, theme, type);\n      }\n    }\n  }\n\n  function renderGraphList(title, content, callback) {\n    var gr = $(\"#grid_receiver\");\n    changeTitleText(title);\n\n    for (var i in content) {\n      var outul;\n\n      for (var j in content[i].children) {\n        (function () {\n          var tmpHtml = '';\n          var tmpHtml2 = '';\n          var element;\n          var element2;\n          var clone = gr.gridReceiver(\"option\", \"addDefaultItem\");\n          var handler, li_content;\n\n          if (typeof clone.find == 'function') {\n            handler = clone.find(\".li_handler\");\n            li_content = clone.find(\".li_content\");\n          } else {\n            handler = clone.filter(\".li_handler\");\n            li_content = clone.filter(\".li_content\");\n          }\n\n          var option = content[i].children[j].option;\n          var modelId = content[i].children[j].modelId;\n          var type = content[i].children[j].type;\n          var data = content[i].children[j].data;\n          var width = content[i].children[j].layout ? content[i].children[j].layout.width : 100;\n          var height = gr.width() * width / 100 * (content[i].children[j].layout ? content[i].children[j].layout.widthheightPortion : .4);\n          var theme = content[i].children[j].theme;\n          var kpis = content[i].children[j].kpis;\n          var nodes = content[i].children[j].nodes;\n          var dataType = content[i].children[j].dataType;\n          var timespan = parseInt(content[i].children[j].timespan / 60000);\n          var formatStr = content[i].children[j].formatStr;\n\n          if (dataType.type == \"pie_2chart\") {\n            option.series[0].itemStyle.normal.label.position = \"inner\";\n\n            option.series[0].itemStyle.normal.label.formatter = function (params) {\n              return (params.percent - 0).toFixed(0) + '%';\n            };\n\n            option.series[1].itemStyle.normal.label.formatter = function (params) {\n              return (params.percent - 0).toFixed(0) + '%';\n            };\n          }\n\n          clone.attr({\n            row: i,\n            col: j\n          }).css({\n            width: width + \"%\",\n            height: height\n          });\n\n          if (j == 0) {\n            outul = gr.gridReceiver(\"option\", \"add\", undefined, clone);\n          } else {\n            gr.gridReceiver(\"option\", \"add\", outul, clone);\n          }\n\n          tmpHtml += \"<div class='coverbg'></div>\";\n          tmpHtml += \"<div class='noData'>\\\n                        <table>\\\n                            <td>没有数据</td>\\\n                        </table>\\\n                    </div>\\\n                    <div class='loading'>\\\n                        <table style='width : 100%; height : 100%'><td style='text-align:center; vertical-align:middle;'><div class='loadingIcon'></div></td></table>\\\n                    </div>\\\n                    <div class='edit'>\\\n                </div>\";\n          tmpHtml += \"</li>\";\n          tmpHtml2 += \"<button class='codeBtn btn btn-default'>代码</button>\\\n                    <button class='editBtn btn btn-default'>样式</button>\\\n                    <button class='resources btn btn-default'>数据</button>\";\n          element = $(tmpHtml);\n          element2 = $(tmpHtml2);\n          handler.append(element2);\n          li_content.append(element);\n          clone.chartCreator(type, option, data, nodes, kpis, theme, timespan, dataType, modelId, formatStr, function (event) {\n            callback(clone);\n          });\n          clone.parent().parent().parent().css(\"height\", height);\n          elementList.push(clone);\n        })();\n      }\n    }\n\n    gr.gridReceiver(\"option\", \"rearrangeEmpty\");\n  }\n\n  function changeTitleText(text) {\n    var target = $(\"[currentprofile=true] input#HeaderInput\");\n    target.val(text);\n  }\n\n  function createNewProfile(data) {\n    var elementHtml;\n    var newProf;\n    var window_width = $(window).width();\n    var window_height = $(window).height();\n    var prof_width = window_width * .6;\n    var prof_height = window_height * .8;\n    var id = idList.length;\n    elementHtml = \"<div id='prof_\" + idList.length + \"' class='prof'>\";\n    elementHtml += \"<div class='prof-header'>\";\n    elementHtml += \"</div>\";\n    elementHtml += \"<div id='chartHeader'>\";\n    elementHtml += \"<input id='HeaderInput' value='新建运营分析视图' placeholder='新建运营分析视图'/>\";\n    elementHtml += \"</div>\";\n    elementHtml += \"<div id='grid_receiver'><ul id='all' class='all'></ul></div>\"; //elementHtml += \"<div id='testtest'><li style='width : 100px; height : 100px; background-color: red;'></li><li style='width : 100px; height : 100px; background-color: red;'></li></div>\";\n\n    elementHtml += \"</div>\";\n    newProf = $(elementHtml);\n    $(\"#draw-area\").append(newProf);\n    newProf.css({\n      \"width\": prof_width,\n      opacity: 1\n    });\n    currentProfile = newProf.attr({\n      \"currentProfile\": true\n    });\n    $(\"#testtest\").sortable();\n    var grid_receiver = $(\"#grid_receiver\");\n    var grid_creator = $(\"#grid_creator\");\n    grid_creator.gridCreator({\n      connect: \"grid_receiver\"\n    });\n    grid_receiver.gridReceiver({\n      stop: function stop(source, target) {\n        var type = source.attr(\"toolbar_id\").split(\"toolbar_\")[1];\n        var handler, content;\n\n        if (typeof target.find == 'function') {\n          var handler = target.find(\".li_handler\");\n          var content = target.find(\".li_content\");\n        } else {\n          var handler = target.find(\".li_handler\");\n          var content = target.find(\".li_content\");\n        }\n\n        var obj = target;\n        var tmpHtml = '';\n        var tmpHtml2 = '';\n        var element;\n        var element2;\n        var dataType = JSON.parse(source.attr(\"dataType\"));\n        var option;\n        var optionStr = source.attr(\"option\");\n        var height = dataType.height ? dataType.height : target.parent().find(\".inner_li\").height();\n        eval(\"option = st.\" + option);\n        tmpHtml += \"<div class='coverbg'></div>\";\n        tmpHtml += \"<div class='noData'>\\\n                        <table>\\\n                            <td>没有数据</td>\\\n                        </table>\\\n                    </div>\\\n                    <div class='reList'>\\\n                    \t<div class='row resourseSel' style='display : none;'>\\\n                    \t\t<div style='width : 20%; float : left; text-align:center;'>\\\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class='addOn'>设备</span>\\\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\\\n\t\t\t\t\t\t\t\t\t\t\t\t<div style='width : 80%; float : left;'>\\\n\t\t\t\t\t\t\t\t\t\t\t\t\t<select id='resourcesList' class='form-control'></select>\\\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\\\n                    \t</div>\\\n                    </div>\\\n                    <div class='loading'>\\\n                        <table style='width : 100%; height : 100%'><td style='text-align:center; vertical-align:middle;'><div class='loadingIcon'></div></td></table>\\\n                    </div>\\\n                    <div class='edit'>\\\n                </div>\";\n        tmpHtml += \"</li>\";\n        tmpHtml2 += \"<button class='codeBtn btn btn-default'>代码</button>\\\n                    <button class='editBtn btn btn-default'>样式</button>\\\n                    <button class='resources btn btn-default'>数据</button>\";\n        element = $(tmpHtml);\n        element2 = $(tmpHtml2);\n        handler.append(element2);\n        content.append(element);\n\n        if (dataType.type == \"tab\") {\n          obj.chartTab(type, option, undefined, undefined, undefined, undefined, undefined, dataType);\n        } else {\n          obj.chartCreator(type, option, undefined, undefined, undefined, undefined, undefined, dataType);\n        }\n\n        elementList.push(obj);\n      },\n      delete: function _delete(event) {\n        for (var i in event) {\n          var id = event[i].attr(\"id\");\n          elementList.each(function (element) {\n            if (id == element.attr(\"id\")) {\n              elementList.remove(element);\n            }\n          });\n        }\n      },\n      change: function change() {\n        elementList.each(function (element) {\n          element.resizeEchart();\n        });\n      }\n    });\n    idList.push(newProf);\n\n    for (var i in idList) {\n      idList[i].css({\n        \"z-index\": i\n      });\n    }\n\n    newProf.on(\"mousedown\", profMouseDown).resizable();\n    $(\"#image\").toolbarDraggableCreator(300, 300);\n    $(\"#text\").toolbarDraggableCreator(250, 50);\n    $(\"#return\").toolbarDraggableCreator(700, 10);\n    $(\"#line\").toolbarDraggableCreator(newProf.width() * .7, newProf.width() * .4);\n    $(\"#bar\").toolbarDraggableCreator(newProf.width() * .7, newProf.width() * .4);\n    $(\"#pie\").toolbarDraggableCreator(newProf.width() * .7, newProf.width() * .4);\n    $(\"#gauge\").toolbarDraggableCreator(newProf.width() * .7, newProf.width() * .4);\n\n    function profMouseDown(event) {\n      event.stopPropagation();\n\n      for (var i in idList) {\n        idList[i].css({\n          \"z-index\": i\n        });\n      }\n\n      ;\n      $(\"#draw-area\").find(\"[id*=prof_]\").attr(\"currentProfile\", false);\n      currentProfile = newProf;\n      newProf.attr(\"currentProfile\", true).css({\n        \"z-index\": 80\n      });\n    }\n\n    function receiveFromOuter(event, ui) {\n      var sender_id = ui.sender.attr(\"id\");\n\n      switch (sender_id) {\n        case \"image\":\n          dragImageEnd();\n          break;\n\n        case \"text\":\n          dragTextEnd();\n          break;\n\n        case \"return\":\n          dragReturnEnd();\n          break;\n\n        case \"line\":\n          dragLineEnd();\n          break;\n\n        case \"bar\":\n          dragBarEnd();\n          break;\n\n        case \"pie\":\n          dragPieEnd();\n          break;\n\n        case \"gauge\":\n          dragGaugeEnd();\n          break;\n\n        default:\n          break;\n      }\n    }\n\n    function dragImageEnd() {\n      var target;\n      var needtoeplace = sortable.find(\".leftBar-item\");\n      var tmpHtml = \"\";\n      tmpHtml += \"<li class='item'>\";\n      tmpHtml += \"<div class='imageControl'>\";\n      tmpHtml += \"<canvas id='uploadImage'></canvas>\";\n      tmpHtml += \"<p class='tips'>您可选择拖拽图片或</p>\";\n      tmpHtml += \"<button class='uploadBtn'>上传图片</button>\";\n      tmpHtml += \"</div>\";\n      tmpHtml += \"</li>\";\n      var element = $(tmpHtml);\n      element.insertBefore(needtoeplace).css({\n        \"width\": \"300px\",\n        \"height\": \"300px\"\n      });\n      var canvas = element.find(\"canvas#uploadImage\")[0];\n      var img = element.find(\"img#getImage\");\n      canvas.addEventListener(\"dragover\", function (evt) {\n        evt.preventDefault();\n      }, false);\n      canvas.addEventListener(\"drop\", function (evt) {\n        evt.preventDefault();\n        evt.stopPropagation();\n        var files = evt.dataTransfer.files;\n\n        if (files.length > 0) {\n          var file = files[0];\n\n          if (typeof FileReader !== \"undefined\" && file.type.indexOf(\"image\") != -1) {\n            var loadComplete = function loadComplete(evt) {\n              element.find(\"div.imageControl\").css({\n                \"background-image\": \"url(\" + evt.target.result + \")\"\n              });\n              $(\".tips\").css(\"display\", \"none\");\n              $(\".uploadBtn\").css(\"display\", \"none\");\n            };\n\n            var reader = new FileReader();\n            reader.onload = loadComplete;\n            reader.readAsDataURL(file);\n          }\n        }\n      }, false);\n      needtoeplace.remove();\n      element.resizable({\n        stop: resizeEnd,\n        helper: \"help-placeholder\"\n      });\n\n      function resizeEnd(event, ui) {}\n    }\n\n    function dragTextEnd() {\n      var target;\n      var needtoeplace = sortable.find(\".leftBar-item\");\n      var tmpHtml = \"\";\n      tmpHtml += \"<li class='item'>\";\n      tmpHtml += \"<table class='textControl'><td>\";\n      tmpHtml += \"</td></table>\";\n      tmpHtml += \"</li>\";\n      var innerTxt = $(\"<p class='innerTxt'>请点击此处编辑文字</p>\");\n      var editInput = $(\"<input class='editInput'/>\");\n      var element = $(tmpHtml);\n      var tcontrol = element.find('table.textControl td');\n      tcontrol.append(innerTxt);\n      tcontrol.on('click', tcontrol_click);\n\n      function tcontrol_click(event) {\n        event.stopPropagation();\n        innerTxt.remove();\n        editInput.val(innerTxt.text());\n        tcontrol.append(editInput);\n        editInput.focus();\n        editInput.on(\"keypress\", function (event) {\n          if (event.charCode == 13) {\n            editInput.blur();\n          }\n        });\n        editInput.on(\"blur\", function () {\n          innerTxt.text(editInput.val());\n          editInput.remove();\n          tcontrol.append(innerTxt);\n          tcontrol.on('click', tcontrol_click);\n        });\n        tcontrol.off(\"click\");\n      }\n\n      element.insertBefore(needtoeplace).css({\n        \"width\": \"250px\",\n        \"height\": \"50px\"\n      });\n      needtoeplace.remove();\n      element.resizable({\n        stop: resizeEnd,\n        helper: \"help-placeholder\"\n      });\n\n      function resizeEnd(event, ui) {}\n    }\n\n    function dragReturnEnd() {\n      var target;\n      var needtoeplace = sortable.find(\".leftBar-item\");\n      var tmpHtml = \"\";\n      tmpHtml += \"<li class='item'>\";\n      tmpHtml += \"<div class='element'></div>\";\n      tmpHtml += \"</li>\";\n      var element = $(tmpHtml);\n      element.insertBefore(needtoeplace).css({\n        \"width\": \"700px\",\n        \"height\": \"10px\"\n      });\n      ;\n      needtoeplace.remove();\n    }\n\n    function dragLineEnd() {\n      var sortable = currentProfile.find(\"ul#sortable\");\n      var needtoreplace = sortable.find(\".leftBar-item\");\n      var newlinechart = createNewChart(\"line\");\n      newlinechart.insertBefore(needtoreplace);\n      needtoreplace.remove();\n    }\n\n    function dragBarEnd() {\n      var sortable = currentProfile.find(\"ul#sortable\");\n      var needtoreplace = sortable.find(\".leftBar-item\");\n      var newlinechart = createNewChart(\"bar\");\n      newlinechart.insertBefore(needtoreplace);\n      needtoreplace.remove();\n    }\n\n    function dragPieEnd() {\n      var target;\n      var sortable = currentProfile.find(\"ul#sortable\");\n      var needtoreplace = sortable.find(\".leftBar-item\");\n      var newlinechart = createNewChart(\"pie\");\n      newlinechart.insertBefore(needtoreplace);\n      needtoreplace.remove();\n    }\n\n    function dragGaugeEnd() {\n      var target;\n      var sortable = currentProfile.find(\"ul#sortable\");\n      var needtoreplace = sortable.find(\".leftBar-item\");\n      var newlinechart = createNewChart(\"gauge\");\n      newlinechart.insertBefore(needtoreplace);\n      needtoreplace.remove();\n    }\n\n    function elementReplacer(currentItem) {\n      if (currentItem.hasClass(\"leftBar-item\")) {\n        return replaceWithOuterElement();\n      } else {\n        return replaceWithInnerElement();\n      }\n\n      ;\n\n      function replaceWithOuterElement() {\n        return drag_placeholder[0];\n      }\n\n      ;\n\n      function replaceWithInnerElement() {\n        var width = currentItem.width();\n        var height = currentItem.height();\n        var object = $(\"<li class='item placeholder'></li>\");\n        object.css({\n          width: width - 8,\n          height: height - 8\n        });\n        return object[0];\n      }\n\n      ;\n    }\n\n    ;\n    return currentProfile;\n  }\n\n  $.fn.extend({\n    id: 0,\n    type: '',\n    option: '',\n    target: '',\n    nodes: '',\n    kpis: '',\n    timespan: '',\n    dataType: {},\n    modelId: '',\n    theme: '',\n    formatStr: '',\n    category: '',\n    optionType: 0,\n    eventListener: function eventListener() {},\n    chartCreator: function chartCreator(type, option, data, nodes, kpis, theme, timespan, dataType, modelId, formatStr, callback) {\n      var current = this;\n      var element = $(\"<div class='element'></div>\");\n      var ec_element = element[0];\n      var deleteBtn = current.find(\"button.deleteBtn\");\n      var codeBtn = current.find(\"button.codeBtn\");\n      var editBtn = current.find(\"button.editBtn\");\n      var resources = current.find(\"button.resources\");\n      current.attr(\"elementId\", this.id);\n      current.type = type;\n      current.id = idid;\n      current.data = data;\n      current.nodes = nodes;\n      current.kpis = kpis;\n      current.theme = theme ? theme : \"macarons\";\n      current.timespan = timespan;\n      current.dataType = dataType;\n      current.modelId = modelId;\n      current.formatStr = formatStr;\n      current.startloading();\n\n      if (typeof onChartInit == 'function') {\n        onChartInit({});\n      }\n\n      idid++;\n      var inx = 0;\n\n      if (dataType) {\n        for (var i in dataType.category) {\n          if (inx == 0) {\n            current.category = i;\n          }\n\n          inx++;\n        }\n      }\n\n      switch (type) {\n        case \"line\":\n          current.baseOption = option ? option : st._lINECHART_STANDARD_;\n          current.option = option ? option : st._lINECHART_STANDARD_;\n          break;\n\n        case \"bar\":\n          current.baseOption = option ? option : st._BARCHART_STANDARD_;\n          current.option = option ? option : st._BARCHART_STANDARD_;\n          break;\n\n        case \"pie\":\n          current.baseOption = option ? option : st._PIECHART_STANDARD_;\n          current.option = option ? option : st._PIECHART_STANDARD_;\n          break;\n\n        case \"gauge\":\n          current.baseOption = option ? option : st._GAUGECHART_STANDARD_;\n          current.option = option ? option : st._GAUGECHART_STANDARD_;\n          break;\n\n        case \"scatter\":\n          current.baseOption = option ? option : st._SCATTERCHART_STANDARD_;\n          current.option = option ? option : st._SCATTERCHART_STANDARD_;\n          break;\n\n        case \"k\":\n          current.baseOption = option ? option : st._KCHART_STANDARD_;\n          current.option = option ? option : st._KCHART_STANDARD_;\n          break;\n\n        case \"radar\":\n          current.baseOption = option ? option : st._RADARCHART_STANDARD_;\n          current.option = option ? option : st._RADARCHART_STANDARD_;\n          break;\n\n        case \"chord\":\n          current.baseOption = option ? option : st._CHORDCHART_STANDARD_;\n          current.option = option ? option : st._CHORDCHART_STANDARD_;\n          break;\n\n        case \"funnel\":\n          current.baseOption = option ? option : st._FUNNELCHART_STANDARD_;\n          current.option = option ? option : st._FUNNELCHART_STANDARD_;\n          break;\n\n        case \"eventRiver\":\n          current.baseOption = option ? option : st._RIVERCHART_STANDARD_;\n          current.option = option ? option : st._RIVERCHART_STANDARD_;\n          break;\n\n        case \"venn\":\n          current.baseOption = option ? option : st._VENNCHART_STANDARD_;\n          current.option = option ? option : st._VENNCHART_STANDARD_;\n          break;\n\n        case \"treemap\":\n          current.baseOption = option ? option : st._TREEMAPCHART_STANDARD_;\n          current.option = option ? option : st._TREEMAPCHART_STANDARD_;\n          break;\n\n        case \"tree\":\n          current.baseOption = option ? option : st._TREECHART_STANDARD_;\n          current.option = option ? option : st._TREECHART_STANDARD_;\n          break;\n\n        case \"map\":\n          current.baseOption = option ? option : st._MAPCHART_STANDARD_;\n          current.option = option ? option : st._MAPCHART_STANDARD_;\n          break;\n\n        case \"force\":\n          current.baseOption = option ? option : st._FORCECHART_STANDARD_;\n          current.option = option ? option : st._FORCECHART_STANDARD_;\n          break;\n\n        default:\n          break;\n      }\n\n      if (chartChangeEvent) {\n        chartChangeEvent({\n          target: current\n        });\n      }\n\n      current.find(\".li_content\").append(element);\n      current.bindEvent();\n      codeBtn.on(\"click\", function () {\n        codeBtn_click_event({\n          target: current,\n          theme: current.theme,\n          option: current.option\n        });\n      });\n      deleteBtn.on(\"click\", current.deleteBtnClick);\n      timeoutFn();\n      current.on(\"click\", current_click);\n      current.resizable({\n        stop: resizeEnd,\n        helper: \"help-placeholder\"\n      });\n\n      function current_click(event) {}\n\n      ;\n\n      function resizeEnd(event, ui) {\n        ec.resize(current.target);\n      }\n\n      ;\n\n      function timeoutFn() {\n        if (current.option.series.length > 0) {\n          ec.init(ec_element, current.option, current.theme, type, function (tg) {\n            current.target = tg;\n            var sortable = current.parent();\n\n            if (typeof callback == 'function') {\n              callback(current);\n            }\n\n            current.stoploading();\n          }, function (error) {\n            current.remove();\n          });\n        }\n      }\n\n      return current;\n    },\n    deleteBtnClick: function deleteBtnClick() {\n      elementList = function (id, el) {\n        var rs = [];\n\n        for (var i in el) {\n          if (el[i].id != id) {\n            rs.push(el[i]);\n          }\n        }\n\n        return rs;\n      }(current.id, elementList);\n\n      current.remove();\n\n      if ($(\"#modelPanel\").css(\"display\") == \"none\") {\n        $(\".chart-setting-closeBtn\").trigger(\"click\");\n      } else {\n        $(\".modePlanel_closeBtn\").trigger(\"click\");\n      }\n\n      current.eventListener({\n        target: current\n      });\n    },\n    resBtn_click: function resBtn_click() {\n      var current = this;\n      var returnData = {};\n      var deleteBtn = current.find(\"button.deleteBtn\");\n      var codeBtn = current.find(\"button.codeBtn\");\n      var editBtn = current.find(\"button.editBtn\");\n      var resBtn = current.find(\"button.resources\");\n      elementList.each(function (element) {\n        if (typeof element != 'function') {\n          if (element.find(\".element.current\").size()) {\n            element.bindEvent();\n            element.find(\".element.current\").removeClass(\"current\");\n          }\n        }\n        /*\n        if( element.find(\".element.current\").size()){\n        \telement.bindEvent();\n        \telement.find(\".element.current\").removeClass(\"current\")\n        }\n        */\n\n      });\n      current.find(\".element\").addClass(\"current\");\n      editBtn.off(\"click.editBtn\");\n      resBtn.off(\"click.resBtn\");\n      current.find(\".edit\").css(\"display\", \"block\");\n      returnData.target = current;\n      returnData.theme = current.theme;\n      returnData.baseOption = current.baseOption;\n      returnData.type = current.type;\n      returnData.option = current.option;\n      returnData.nodes = current.nodes;\n      returnData.kpis = current.kpis;\n      returnData.modelId = current.modelId;\n      returnData.category = current.category;\n      returnData.timespan = current.timespan;\n      returnData.dataType = current.dataType;\n      currentProfile.find(\"button.active\").removeClass('active');\n      resBtn.addClass(\"active\");\n      currentProfile.find(\"ul#sortable li\").removeClass(\"select\");\n      current.addClass(\"select\");\n      $(\".modePlanel_closeBtn\").off(\"click\");\n      $(\".modePlanel_closeBtn\").on(\"click\", function (event) {\n        current.modePlanel_closeBtn_callback();\n      });\n      $(\"#leftContent\").css(\"display\", \"none\");\n\n      if ($(\"#modelPanel\").css(\"display\") == \"none\") {\n        console.log(resBtn_click_event);\n        resBtn_click_event(returnData);\n        $(\"#modelPanel\").css({\n          display: \"block\",\n          right: -300,\n          opacity: 0\n        }).animate({\n          right: 0,\n          opacity: 1\n        }, 600, function () {\n          editBtn.on(\"click.editBtn\", function (event) {\n            current.editBtn_click(event);\n          });\n        });\n      } else {\n        $(\"#modelPanel\").animate({\n          right: -$(\"#modelPanel\").width(),\n          opacity: 0\n        }, 600, function () {\n          resBtn_click_event(returnData);\n        });\n        $(\"#modelPanel\").animate({\n          right: 0,\n          opacity: 1\n        }, 600, function () {\n          editBtn.on(\"click.editBtn\", function (event) {\n            current.editBtn_click(event);\n          });\n        });\n      }\n\n      currentProfile.animate({\n        marginLeft: ($(document).width() - 550 - currentProfile.width()) / 2 + 100\n      }, 600);\n\n      if ($(\"#chart-setting\").css(\"display\") == \"block\") {\n        $(\"#chart-setting\").animate({\n          right: -700\n        }, 500, function () {\n          $(\"#chart-setting\").css(\"display\", \"none\");\n        });\n      }\n    },\n    editBtn_click: function editBtn_click(event) {\n      var returnData = {};\n      var current = this;\n      var currentProfile = $(\"[currentProfile*=true]\");\n      var deleteBtn = current.find(\"button.deleteBtn\");\n      var codeBtn = current.find(\"button.codeBtn\");\n      var editBtn = current.find(\"button.editBtn\");\n      var resBtn = current.find(\"button.resources\");\n      elementList.each(function (element) {\n        if (element.find(\".element.current\").size()) {\n          element.bindEvent();\n          element.find(\".element.current\").removeClass(\"current\");\n        }\n      });\n      current.find(\".element\").addClass(\"current\");\n      editBtn.off(\"click.editBtn\");\n      resBtn.off(\"click.resBtn\");\n      currentProfile.find(\"button.active\").removeClass('active');\n      editBtn.addClass(\"active\");\n      returnData.theme = current.theme;\n      returnData.target = current;\n      returnData.type = current.type;\n      returnData.option = current.option;\n      returnData.dataType = current.dataType;\n      returnData.baseOption = current.baseOption;\n      editBtn_click_event(returnData);\n      current.find(\".edit\").css(\"display\", \"block\");\n      currentProfile.find(\"ul#sortable li\").removeClass(\"select\");\n      current.addClass(\"select\");\n      event.stopPropagation();\n\n      if ($(\"#chart-setting\").css(\"display\") == \"none\") {\n        $(\"#chart-setting\").css({\n          display: \"block\",\n          top: 100,\n          right: -$(\"#chart-setting\").width() - 50,\n          opacity: 0\n        }).animate({\n          right: 0,\n          opacity: 1\n        }, 500, function () {\n          resBtn.on(\"click.resBtn\", function (event) {\n            current.resBtn_click();\n          });\n        });\n      } else {\n        $(\"#chart-setting\").animate({\n          right: -$(\"#chart-setting\").width() - 50,\n          opacity: 0\n        }, 500).animate({\n          right: 0,\n          opacity: 1\n        }, 500, function () {\n          resBtn.on(\"click.resBtn\", function (event) {\n            current.resBtn_click();\n          });\n        });\n      }\n\n      if ($(\"#modelPanel\").css(\"display\") == \"block\") {\n        $(\"#modelPanel\").animate({\n          right: -$(\"#modelPanel\").width() - 50\n        }, 400, function () {\n          $(\"#modelPanel\").css(\"display\", \"none\");\n        });\n      }\n\n      $(\".chart-setting-closeBtn\").off(\"click\");\n      $(\".chart-setting-closeBtn\").on(\"click\", function () {\n        current.closeBtnClick();\n      });\n      currentProfile.animate({\n        marginLeft: ($(document).width() - 550 - currentProfile.width()) / 2 + 100\n      }, 500, function () {});\n      $(\"#chart-setting\").draggable({\n        handle: \".handler\"\n      });\n    },\n    closeBtnClick: function closeBtnClick(event) {\n      var current = this;\n      var currentProfile = $(\"[currentProfile*=true]\");\n      var editBtn = current.find(\"button.editBtn\");\n      $(\".element.current\").removeClass(\"current\");\n      current.find(\".edit\").css(\"display\", \"\");\n      currentProfile.find(\"ul#sortable li\").removeClass(\"select\");\n      currentProfile.animate({\n        \"marginLeft\": ($(window).width() - currentProfile.width()) / 2\n      }, 400, function () {\n        currentProfile.css({\n          'margin': \"120px auto\"\n        });\n      });\n      $(\"#chart-setting\").animate({\n        right: -700,\n        opacity: 0\n      }, 300, function () {\n        $(\"#chart-setting\").css(\"display\", \"none\");\n        editBtn.on(\"click.editBtn\", function (event) {\n          current.editBtn_click(event);\n        });\n        oldSelect = undefined;\n      });\n    },\n    bindEvent: function bindEvent() {\n      var current = this;\n      var editBtn = current.find(\"button.editBtn\");\n      var resBtn = current.find(\"button.resources\");\n      editBtn.off(\"click.editBtn\");\n      resBtn.off(\"click.resBtn\");\n      editBtn.on(\"click.editBtn\", function (event) {\n        current.editBtn_click(event);\n      });\n      resBtn.on(\"click.resBtn\", function (event) {\n        current.resBtn_click();\n      });\n    },\n    modePlanel_closeBtn_callback: function modePlanel_closeBtn_callback(event) {\n      var current = this;\n      var resBtn = current.find(\"button.resources\");\n      $(\".element.current\").removeClass(\"current\");\n      $(\"#modelPanel\").animate({\n        right: -$(\"#modelPanel\").width() - 50\n      }, 600, function () {\n        $(\"#modelPanel\").css(\"display\", \"none\");\n        resBtn.on(\"click.resBtn\", function (event) {\n          current.resBtn_click();\n        });\n      });\n      current.find(\".edit\").css(\"display\", \"\");\n      currentProfile.find(\"ul#sortable li\").removeClass(\"select\");\n      currentProfile.animate({\n        \"marginLeft\": ($(window).width() - currentProfile.width()) / 2\n      }, 400, function () {\n        currentProfile.css({\n          'margin': \"120px auto\"\n        });\n      });\n    },\n    resizeEchart: function resizeEchart() {\n      current = this;\n\n      if (current.target) {\n        ec.resize(current.target);\n      }\n    },\n    startloading: function startloading() {\n      var current = this;\n      var loading = current.find(\".loading\");\n      loading.css(\"display\", \"block\");\n    },\n    stoploading: function stoploading() {\n      var current = this;\n      var loading = current.find(\".loading\");\n      loading.css(\"display\", \"none\");\n    },\n    setNodeKpiList: function setNodeKpiList(data) {\n      var current = this;\n      current.kpis = data.kpis;\n      current.nodes = data.nodes;\n      current.modelId = data.modelId;\n      current.category = data.category;\n      current.formatStr = data.formatStr;\n      current.timespan = data.timespan;\n      current.resources = data.resources;\n      current.find(\"#resourcesList\").children().remove();\n      current.find(\"#resourcesList\").append($(\"<option value=''>模拟数据</option>\"));\n\n      for (var i in current.resources) {\n        var option = $(\"<option value='\" + current.resources[i].id + \"'>\" + current.resources[i].label + \"</option>\");\n        current.find(\"#resourcesList\").append(option);\n        current.find(\".reList\").css(\"display\", \"none\");\n        current.find(\"#resourcesList\").off();\n        current.find(\"#resourcesList\").on(\"change\", function (event) {\n          resourceChanged(current, event);\n        });\n      }\n\n      if (current.nodes instanceof Array && current.nodes.length > 0) {\n        current.find(\"#resourcesList\").val(current.nodes[0]);\n      }\n    },\n    changeTheme: function changeTheme(theme, option) {\n      var current = this;\n      current.theme = theme;\n      ec.setTheme(current.target, theme, current.option, true, function (data) {\n        current.target = data.target;\n      });\n      chartChangeEvent({\n        target: current\n      });\n    },\n    changeOption: function changeOption(option, theme, merge, data) {\n      var current = this;\n\n      var allEmpty = function (obj) {\n        for (var i in obj) {\n          if (obj[i]) {\n            if (obj[i].data) {\n              if (obj[i].data.length > 0) {\n                return false;\n              }\n            } else if (obj[i].value) {\n              if (obj[i].value.length > 0) {\n                return false;\n              }\n            }\n          }\n        }\n\n        return true;\n      }(option.series);\n\n      if (data) {\n        if (data.length == 0) {\n          $(\"[data-zr-dom-id*=_zrender_hover_]\").css(\"display\", \"block\");\n          current.find(\".noData\").css(\"display\", \"block\");\n        } else {\n          $(\"[data-zr-dom-id*=_zrender_hover_]\").css(\"display\", \"none\");\n          current.find(\".noData\").css(\"display\", \"none\");\n          current.option = option;\n\n          if (option.series.length == 0) {\n            ec.setOption(current.target, current.baseOption, true);\n          } else {\n            ec.setOption(current.target, option, true);\n          }\n        }\n      } else {\n        if (option.series.length == 0) {\n          $(\"[data-zr-dom-id*=_zrender_hover_]\").css(\"display\", \"block\");\n          current.find(\".noData\").css(\"display\", \"block\");\n          ec.setOption(current.target, current.baseOption, true);\n        } else {\n          $(\"[data-zr-dom-id*=_zrender_hover_]\").css(\"display\", \"none\");\n          current.find(\".noData\").css(\"display\", \"none\");\n          ec.setOption(current.target, option, true);\n        }\n      }\n\n      chartChangeEvent({\n        target: current\n      });\n    }\n  }); //left-toolbar-draggable-controller\n\n  $.fn.extend({\n    chartTab: function chartTab(type, option, data, nodes, kpis, theme, timespan, dataType) {\n      var current = this;\n      this.type = type;\n      this.option = type;\n      this.data = data;\n      this.nodes = nodes;\n      this.kpis = kpis;\n      this.theme = theme;\n      this.timespan = timespan;\n      this.dataType = dataType;\n      var numDom = $(\"<div>\" + \"<span id='num'>32<span><span id='unit'>个</span>\" + \"</div>\");\n      var label = $(\"<div>监测项目</div>\");\n      var resBtn = current.find(\"button.resources\");\n      current.find(\".li_content\").append(numDom).append(label);\n      current.bindEvent();\n      return this;\n    }\n  });\n  $.fn.extend({\n    toolbarDraggableCreator: function toolbarDraggableCreator(width, height) {\n      var current = this;\n      this.draggable({\n        connectToSortable: \"ul#sortable\",\n        revert: \"invalid\",\n        start: startDrag,\n        helper: createHelper\n      });\n\n      function startDrag(event, ui) {\n        drag_placeholder = $(\"<li class='item placeholder'></li>\").css({\n          width: width,\n          height: height\n        });\n        return drag_placeholder;\n      }\n\n      function createHelper() {\n        var elem = $(\"<div class='chart-handler'></div>\");\n        elem.css({\n          width: width,\n          height: height\n        });\n        return elem;\n      }\n    }\n  });\n  return profile;\n}"],"sourceRoot":"/source/"}