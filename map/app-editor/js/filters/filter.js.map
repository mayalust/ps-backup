{"version":3,"sources":["app-editor/js/filters/filter.js"],"names":["define","app","filter","input","dataType","num","result","limit","node","ci","Infinity","nodeNum","checked","i","push","modelKeyword","nodeKeyword","oldNodeId","data","label","findModel","modelkey","kpis","modelId","id","undefined","indexOf","kpiKeyword","containFilterWord","unitKeyword","unit","console","log","j","error","resources","kpi","category","name","value"],"mappings":"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","file":"app-editor/js/filters/filter.js","sourcesContent":["define([\"app\"], function (app) {\n  app.filter(\"sub_resourcesfilter\", function () {\n    function filter(input, dataType) {\n      var result = [];\n\n      if (input && dataType) {\n        if (dataType.limit) {\n          var node = dataType.limit.ci ? dataType.limit.ci : Infinity;\n        } else {\n          var node = Infinity;\n        }\n\n        var nodeNum = function (data) {\n          var num = 0;\n\n          if (data.checked) {\n            num++;\n          }\n\n          return num;\n        }(input);\n\n        for (var i in input) {\n          if (input[i].checked || nodeNum + 1 < node) {\n            result.push(input[i]);\n          }\n        }\n      }\n\n      return result;\n    }\n\n    return filter;\n  });\n  app.filter(\"resourcesfilter\", function () {\n    function filter(input, modelKeyword, nodeKeyword, oldNodeId) {\n      var result = [];\n\n      for (var i in input) {\n        var find = function (data, label) {\n          var find = function (data) {\n            for (var i in data) {\n              if (data[i].checked) {\n                return true;\n              }\n            }\n\n            return false;\n          }(data.kpis);\n\n          if (find) {\n            return true;\n          }\n\n          var findModel;\n\n          for (var i in modelKeyword) {\n            (function (modelkey) {\n              if (data.modelId == modelkey) {\n                findModel = true;\n              }\n            })(modelKeyword[i]);\n          }\n\n          if (!findModel && modelKeyword != '') {\n            return false;\n          }\n\n          if (oldNodeId != data.id && oldNodeId != undefined) {\n            return false;\n          }\n\n          if (data.label) {\n            if (data.label.indexOf(label) == -1) {\n              return false;\n            }\n          } else {\n            return false;\n          }\n\n          return true;\n        }(input[i], nodeKeyword);\n\n        if (find) {\n          result.push(input[i]);\n        }\n      }\n\n      return result;\n    }\n\n    return filter;\n  });\n  app.filter(\"kpifilter\", function () {\n    function filter(input, kpiKeyword) {\n      var result = [];\n\n      for (var i in input) {\n        if (input[i].label) {\n          var containFilterWord = input[i].label.indexOf(kpiKeyword) != -1;\n        } else {\n          var containFilterWord = -1;\n        }\n\n        var noNeedFilter = kpiKeyword == \"\";\n\n        if (containFilterWord || noNeedFilter || input[i].checked) {\n          result.push(input[i]);\n        }\n      }\n\n      return result;\n    }\n\n    return filter;\n  });\n  app.filter(\"unitfilter\", function () {\n    function filter(input, unitKeyword) {\n      var result = [];\n\n      for (var i in input) {\n        var containFilterWord = input[i].unit == unitKeyword;\n        var noNeedFilter = unitKeyword == \"all\";\n\n        if (containFilterWord || noNeedFilter || input[i].checked) {\n          result.push(input[i]);\n        }\n      }\n\n      return result;\n    }\n\n    return filter;\n  });\n  app.filter(\"listAllUnit\", function () {\n    function filter(input) {\n      var result = ['all'];\n\n      for (var i in input) {\n        var unit = input[i].unit;\n\n        if (result.indexOf(unit) == -1) {\n          result.push(unit);\n        }\n      }\n\n      console.log(result);\n      console.log(\"-----\", result);\n      return result;\n    }\n\n    return filter;\n  });\n  app.filter(\"checkResource\", function () {\n    function filter(input) {\n      var result = [];\n\n      try {\n        if (input != undefined) {\n          for (var i in input) {\n            for (var j in input[i].kpis) {\n              if (input[i].kpis[j].checked) {\n                result.push(input[i].kpis[j]);\n              }\n            }\n          }\n        } else {\n          throw \"input is undefined!!!\";\n        }\n      } catch (error) {\n        console.log(error);\n      }\n\n      return result;\n    }\n\n    return filter;\n  });\n  app.filter(\"getResourcesChecked\", function () {\n    function filter(input) {\n      var result = [];\n\n      try {\n        if (input != undefined) {\n          if (input.resources) {\n            var resources = input.resources;\n\n            for (var i in resources) {\n              var checked = resources[i].checked;\n\n              if (checked) {\n                result.push(resources[i]);\n              }\n            }\n\n            return result;\n          } else {\n            return [];\n          }\n        } else {\n          throw \"input is undefined!!!\";\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    }\n\n    return filter;\n  });\n  app.filter(\"getKpiChecked\", function () {\n    function filter(input) {\n      var result = [];\n\n      try {\n        if (input != undefined) {\n          if (input.kpis) {\n            var kpi = input.kpis;\n\n            for (var i in kpi) {\n              var checked = kpi[i].checked;\n\n              if (checked) {\n                result.push(kpi[i]);\n              }\n            }\n\n            return result;\n          } else {\n            return [];\n          }\n        } else {\n          throw \"input is undefined!!!\";\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    }\n\n    return filter;\n  });\n  app.filter(\"getCatList\", function () {\n    function filter(input) {\n      var result = [];\n\n      if (input) {\n        //console.log(input.category);\n        for (var i in input.category) {\n          result.push({\n            name: i,\n            value: i\n          });\n        }\n\n        ;\n      }\n\n      return result;\n    }\n\n    return filter;\n  });\n});"],"sourceRoot":"/source/"}