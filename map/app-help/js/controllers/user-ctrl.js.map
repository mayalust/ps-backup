{"version":3,"sources":["app-help/js/controllers/user-ctrl.js"],"names":["define","controllers","controller","$scope","$rootScope","Info","userLoginUIService","user","username","password","errorMsg","slide","$watch","newValue","oldValue","errorStatus","loginClick","e","keycode","window","event","keyCode","which","undefined","console","log","login","checkClick","$","attr","show","hide","homeClick","open","indexShow","personalShow","redirectHandler","industry","loginTimes","location","href","appData","isAuthenticated","$on","evt","d","staffName","userName","userInfo","result","message","userEnterpriseService","growl","userIdentifyService","modelDefinitionService","resourceUIService","userUIService","userEdit","provinces","districts","citys","loginname","editUser","pro","getSimpleDistricts","returnObj","code","i","data","label","enterprise","province","children","n","j","city","loginName","proChang","editData","findAllIndustry","arr","arr1","newData","JSON","stringify","length","id","parentModelId","push","belongList","get","info","provinceList","cityList","durationArr","durationList","scaleArr","scaleList","editClick","officePhone","userID","checkLoginName","res","personSave","modifyUser","userData","success","error","newV","oldV","v","editEnterpriseEClick","entArr","enterpriseSize","duration","name","enterpriseID","district","address","website","contact","contactEmail","contactPhone","modifyEnterpriseInfo","passwordEdit","pwdList","emailAddress","newPwd","configPwd","regPwd","imgCode","confirmShow","codeMessage","identifyName","configError","userId","getIdentify","identifyData","blindClick","document","split","logout","initPwd","identifyNum","modifyPassword","initDate","$interval","regShow","confirmPassword","statusShow","emailOnly","safeMsg","phoneEmail","formData","roleID","mobilePhone","countryRegion","business","mail_num","enterpriseManager","interval","urlCode","areaList","onMouseOver","actor","renewal","reload","statusClick","statusId","noEmail","text","sendEmail","time","cancel","phoneCode","statusCheck","disabled","sendSMS","codeData","timeCode","removeAttr","seed","tip","secTip","setTimeout","phoneSumbit","formData1","individualUser","vv","css","addClass","emailHref","hrefName","emailSpile","passCheck","eve","val","currentTarget","value","match","identCheck","userCheck","modeCheck","nextStep","regId","checkMobilePhone","identifySMS","repeatEmail","emailExist","statusCode","identifyEmail","forgetClick","forgetList","verify","verifyEmail","confimPwd","hideValidate","verifySuccess","codeCheck","t","emailSend","sendPasswordSMS","sendEmailPassword","forgetAjax","forgetPassword","forgetStep","forNumber","identifyPasswordSMS","emailCheckPassword","checkName","removeClass"],"mappings":"AAAAA,OAAO,CAAC,2BAA4B,SAAUC,GAC5C,aAGAA,EAAYC,WAAW,WAAY,CAAC,SAAU,aAAc,OAAQ,qBAAsB,SAAUC,EAAQC,EAAYC,EAAMC,GAC5HH,EAAOI,KAAO,CACZC,SAAU,GACVC,SAAU,IAEZN,EAAOO,SAAW,GAClBP,EAAOQ,MAAQ,IACfR,EAAOS,OAAO,gBAAiB,SAAUC,EAAUC,GACjDX,EAAOY,YAAc,IAEvBZ,EAAOS,OAAO,gBAAiB,SAAUC,EAAUC,GACjDX,EAAOY,YAAc,IAGvBZ,EAAOa,WAAa,SAAUC,GAC5B,IAAIC,EAAUC,OAAOC,MAAQH,EAAEI,QAAUJ,EAAEK,MAE3C,GAAe,IAAXJ,GAA4BK,MAAXL,EAAsB,CACzC,GAA4B,IAAxBf,EAAOI,KAAKC,SAGd,OAFAL,EAAOY,YAAc,OACrBZ,EAAOO,SAAW,WAIpB,GAA4B,IAAxBP,EAAOI,KAAKE,SAGd,OAFAN,EAAOY,YAAc,OACrBZ,EAAOO,SAAW,UAIpBc,QAAQC,IAAItB,EAAOI,KAAKC,UAEI,IAAxBL,EAAOI,KAAKC,UAA0C,IAAxBL,EAAOI,KAAKE,SAE5CH,EAAmBoB,MAAMvB,EAAOI,KAAKC,SAAUL,EAAOI,KAAKE,WAI3DN,EAAOO,SAAW,YAClBP,EAAOY,YAAc,KAK3BZ,EAAOwB,WAAa,WACsB,WAApCC,EAAE,eAAeC,KAAK,YACxBD,EAAE,eAAeE,OACjBF,EAAE,cAAcG,OAChBH,EAAE,eAAeC,KAAK,WAAW,KAEjCD,EAAE,eAAeG,OACjBH,EAAE,cAAcE,OAChBF,EAAE,eAAeC,KAAK,WAAW,KAIrC1B,EAAO6B,UAAY,WACjBb,OAAOc,KAAK,8BAGd7B,EAAW8B,WAAY,EACvB9B,EAAW+B,cAAe,EAE1B,IAAIC,EAAkB,WACpB,IAAIC,EAAW/B,EAAmBC,KAAK8B,SAElCA,GAAwB,GAAZA,EAe2B,GAAtC/B,EAAmBC,KAAK+B,WAC1BnB,OAAOoB,SAASC,KAAO,mBAEvBrB,OAAOoB,SAASC,KAAO,iBAjBpBlC,EAAmBC,KAAKkC,QAOe,GAAtCnC,EAAmBC,KAAK+B,WAC1BnB,OAAOoB,SAASC,KAAO,mBAEvBrB,OAAOoB,SAASC,KAAO,iBATiB,GAAtClC,EAAmBC,KAAK+B,WAC1BnB,OAAOoB,SAASC,KAAO,mBAEvBrB,OAAOoB,SAASC,KAAO,aAkB1BlC,EAAmBC,KAAKmC,gBAY3BN,IAXAjC,EAAOwC,IAAI,qBAAsB,SAAUC,EAAKC,GAC1CvC,EAAmBC,KAAKmC,iBAC1BtC,EAAW0C,UAAYxC,EAAmBC,KAAKwC,SAC/C5C,EAAO6C,SAAW1C,EAAmBC,KACrC6B,MAEAjC,EAAOO,SAAWJ,EAAmB2C,OAAOC,QAC5C/C,EAAOY,YAAc,QAQ7Bd,EAAYC,WAAW,qBAAsB,CAAC,SAAU,wBAAyB,QAAS,OAAQ,qBAAsB,aAAc,sBAAuB,yBAA0B,oBAAqB,gBAAiB,SAAUC,EAAQgD,EAAuBC,EAAO/C,EAAMC,EAAoBF,EAAYiD,EAAqBC,EAAwBC,EAAmBC,GACjXrD,EAAOsD,SAAW,GAClBtD,EAAOuD,UAAY,GACnBvD,EAAOwD,UAAY,GACnBxD,EAAOyD,MAAQ,GACfzD,EAAO0D,UAAY,GACnB1D,EAAO2D,SAAW,GAElB,IAAIC,EAAM,WACRR,EAAkBS,mBAAmB,SAAUC,GAC7C,GAAsB,GAAlBA,EAAUC,KAAW,CAGvB,IAAK,IAAIC,KAFThE,EAAOuD,UAAYO,EAAUG,KAEfjE,EAAOuD,UACnB,GAAIvD,EAAOuD,UAAUS,GAAGE,OAASlE,EAAOsD,SAASa,WAAWC,SAAU,CACpE,GAA2C,OAAvCpE,EAAOsD,SAASa,WAAWC,UAA4D,OAAvCpE,EAAOsD,SAASa,WAAWC,UAA4D,OAAvCpE,EAAOsD,SAASa,WAAWC,UAA4D,OAAvCpE,EAAOsD,SAASa,WAAWC,SAAmB,CAChM,IAAIR,EAAM5D,EAAOuD,UAAUS,GAAGK,SAE9B,IAAK,IAAIC,KAAKV,EACRA,EAAIU,GAAGJ,OAASlE,EAAOsD,SAASa,WAAWC,WAC7CpE,EAAOyD,MAAQG,EAAIU,GAAGD,eAI1BrE,EAAOyD,MAAQzD,EAAOuD,UAAUS,GAAGK,SAGrCrE,EAAOwD,UAAY,GAIvB,IAAK,IAAIe,KAAKvE,EAAOyD,MACfzD,EAAOyD,MAAMc,GAAGL,OAASlE,EAAOsD,SAASa,WAAWK,OACtDxE,EAAOwD,UAAYxD,EAAOyD,MAAMc,GAAGF,cAOxClE,EAAmBC,KAAKmC,iBAa3BtC,EAAW0C,UAAYxC,EAAmBC,KAAKwC,SAC/C5C,EAAO6C,SAAW1C,EAAmBC,KACrCJ,EAAOsD,SAAWnD,EAAmBC,KACrCJ,EAAO2D,SAAWxD,EAAmBC,KAAKqE,UAC1Cb,KAhBA5D,EAAOwC,IAAI,qBAAsB,SAAUC,EAAKC,GAC1CvC,EAAmBC,KAAKmC,iBAC1BtC,EAAW0C,UAAYxC,EAAmBC,KAAKwC,SAC/C5C,EAAO6C,SAAW1C,EAAmBC,KACrCJ,EAAOsD,SAAWnD,EAAmBC,KACrCJ,EAAO2D,SAAWxD,EAAmBC,KAAKqE,UAC1Cb,KAEA5C,OAAOoB,SAASC,KAAO,eAW7BrC,EAAO0E,SAAW,WAChBd,KAGF5D,EAAOsD,SAAWnD,EAAmBC,KACrCJ,EAAO2E,SAAW,GAClBxB,EAAuByB,gBAAgB,SAAU1C,GAC/C,IAAI2C,EAAM3C,EAAS+B,KACfa,EAAO5C,EAAS+B,KAChBc,EAAU,GACd1D,QAAQC,IAAI0D,KAAKC,UAAUF,IAE3B,IAAK,IAAIf,EAAI,EAAGA,EAAIa,EAAIK,OAAQlB,IAC9B,IAAK,IAAIO,EAAI,EAAGA,EAAIO,EAAKI,OAAQX,IAC3BM,EAAIb,GAAGmB,IAAML,EAAKP,GAAGa,eACvBL,EAAQM,KAAKP,EAAKP,IAKxBvE,EAAOsF,WAAaP,IAEX7E,EAAKqF,IAAI,oBAAqB,SAAUC,GACjDxF,EAAOyF,aAAeD,EAAKE,SAC3B1F,EAAO2F,YAAcH,EAAKI,aAC1B5F,EAAO6F,SAAWL,EAAKM,YAGzB9F,EAAO+F,UAAY,WAKjB/F,EAAO2E,SAAS,YAAiB3E,EAAOsD,SAAS0C,YAGjDhG,EAAO2E,SAAS,OAAY3E,EAAOsD,SAAS2C,OAC5CjG,EAAO2E,SAAS,SAAc3E,EAAOsD,SAASV,SAE9C5C,EAAO2E,SAAS,UAAe3E,EAAOsD,SAASmB,UAC/CpD,QAAQC,IAAI,UAAYtB,EAAOsD,SAAS0C,kBAIE,IAA/BhG,EAAOsD,SAAS0C,kBAAkE,IAA7BhG,EAAOsD,SAASmB,WAAgD,SAApBzE,EAAO0D,WAChF,IAA7B1D,EAAOsD,SAASmB,WAAgD,MAA7BzE,EAAOsD,SAASmB,YACjDzE,EAAO2D,UAAY3D,EAAOsD,SAASmB,UACG,GAApCzE,EAAOsD,SAASmB,UAAUS,QAC5B7B,EAAc6C,eAAelG,EAAOsD,SAASmB,UAAW,SAAU0B,GAChE,GAAgB,GAAZA,EAAIpC,KAAW,CACjB,GAAgB,GAAZoC,EAAIlC,KAEN,YADAjE,EAAO0D,UAAY,SAGnB0C,EAAWpG,EAAO2E,aAM1ByB,EAAWpG,EAAO2E,YAM1B,IAAIyB,EAAa,SAAoBzB,GACnCtB,EAAcgD,WAAW1B,EAAU,SAAU2B,GACtB,GAAjBA,EAASvC,KACXd,EAAMsD,QAAQ,OAAQ,IAEtBtD,EAAMuD,MAAM,OAAQ,OAK1BxG,EAAOS,OAAO,qBAAsB,SAAUgG,EAAMC,EAAMC,GACxD3G,EAAO0D,UAAY,KAGrB1D,EAAO4G,qBAAuB,WAC5B,IAAIC,EAAS,GACbA,EAAO,eAAoB7G,EAAOsD,SAASa,WAAW2C,eACtDD,EAAO,SAAc7G,EAAOsD,SAASa,WAAW4C,SAChDF,EAAO,KAAU7G,EAAOsD,SAASa,WAAW6C,KAC5CH,EAAO,aAAkB7G,EAAOsD,SAAS2D,aACzCJ,EAAO,SAAc7G,EAAOsD,SAASa,WAAWC,SAChDyC,EAAO,KAAU7G,EAAOsD,SAASa,WAAWK,KAC5CqC,EAAO,SAAc7G,EAAOsD,SAASa,WAAW+C,SAChDL,EAAO,QAAa7G,EAAOsD,SAASa,WAAWgD,QAC/CN,EAAO,QAAa7G,EAAOsD,SAASa,WAAWiD,QAC/CP,EAAO,QAAa7G,EAAOsD,SAASa,WAAWkD,QAC/CR,EAAO,aAAkB7G,EAAOsD,SAASa,WAAWmD,aAAetH,EAAOsD,SAASa,WAAWmD,aAAe,GAC7GT,EAAO,aAAkB7G,EAAOsD,SAASa,WAAWoD,aAAevH,EAAOsD,SAASa,WAAWoD,aAAe,GAC7GlG,QAAQC,IAAI,SAAW0D,KAAKC,UAAU4B,IACtC7D,EAAsBwE,qBAAqBX,EAAQ,SAAUP,GACtC,GAAjBA,EAASvC,MACX5D,EAAmBC,KAAK+D,WAAamC,EAASrC,KAC9ChB,EAAMsD,QAAQ,OAAQ,KAEtBtD,EAAMuD,MAAM,OAAQ,OAK1BvG,EAAW8B,WAAY,EACvB9B,EAAW+B,cAAe,KAG5BlC,EAAYC,WAAW,qBAAsB,CAAC,SAAU,aAAc,qBAAsB,sBAAuB,SAAUC,EAAQC,EAAYE,EAAoB+C,GACnKlD,EAAOyH,aAAetH,EAAmBC,KACzCJ,EAAO0H,QAAU,CACfC,aAAgB,GAChBC,OAAU,GACVC,UAAa,GACbC,OAAU,IAEZ9H,EAAO+H,QAAU,GACjB/H,EAAOgI,YAAc,IACrBhI,EAAOiI,YAAc,GACrBjI,EAAO2H,aAAe,GACtB3H,EAAOkI,aAAe,GACtBlI,EAAOmI,YAAc,GACrBnI,EAAOoI,OAAS,GAChBpI,EAAOwC,IAAI,qBAAsB,SAAUC,EAAKC,GAC1CvC,EAAmBC,KAAKmC,kBAI1BvC,EAAOoI,OAASjI,EAAmBC,KAAK6F,UAG5CjG,EAAO2H,aAAexH,EAAmBC,KAAKuH,aAE9CzE,EAAoBmF,YAAY,SAAUC,GACf,GAArBA,EAAavE,OACf/D,EAAO+H,QAAUO,EAAarE,QAIlCjE,EAAOuI,WAAa,WAClBvI,EAAO+H,QAAU,KACjB7E,EAAoBmF,YAAY,SAAUC,GACf,GAArBA,EAAavE,OACf/D,EAAO+H,QAAUO,EAAarE,SAKpCjE,EAAOS,OAAO,iBAAkB,SAAUC,EAAUC,GAC9CD,GAAYV,EAAO0H,QAAQE,OAC7B5H,EAAOgI,YAAc,EAErBhI,EAAOgI,YAAc,IAGzBhI,EAAOS,OAAO,eAAgB,SAAUC,EAAUC,GAChDX,EAAOgI,YAAc,IAEvBhI,EAAOS,OAAO,iBAAkB,SAAUC,EAAUC,MAQpDX,EAAOS,OAAO,oBAAqB,SAAUC,EAAUC,GACrDX,EAAOgI,YAAc,IAKJ,YAHFQ,SAASpG,SAASC,KACNoG,MAAM,KAAK,IAGtCtI,EAAmBuI,SAGrB1I,EAAO2I,QAAU,WACf,GAA2B,IAAvB3I,EAAO2H,aAAoB,CAC7B,GAAgC,IAA5B3H,EAAO0H,QAAQG,UAEjB,YADA7H,EAAOgI,YAAc,MAIvB,GAA6B,IAAzBhI,EAAO0H,QAAQE,OAEjB,YADA5H,EAAOgI,YAAc,MAIvB,GAA6B,IAAzBhI,EAAO0H,QAAQI,OAEjB,YADA9H,EAAOgI,YAAc,MAIvB,GAA2B,IAAvBhI,EAAOkI,aAET,YADAlI,EAAOgI,YAAc,MAIvB,GAA0B,MAAtBhI,EAAOmI,YACT,OAIFjF,EAAoB0F,YAAY5I,EAAOkI,aAAc,SAAU/B,GAC7C,GAAZA,EAAIpC,MAAyB,GAAZoC,EAAIlC,KAEnBjE,EAAO0H,QAAQI,QAAU9H,EAAO0H,QAAQE,QACrB,IAAjB5H,EAAOoI,QAAiC,MAAjBpI,EAAOoI,SAChCpI,EAAOoI,OAASjI,EAAmBC,KAAK6F,QAG1C9F,EAAmB0I,eAAe7I,EAAOoI,OAAQpI,EAAO0H,QAAQG,UAAW7H,EAAO0H,QAAQE,OAAQ,SAAUkB,GAC1G,GAAqB,GAAjBA,EAAS/E,MAA8B,GAAjB+E,EAAS7E,KACjC9D,EAAmBuI,aACd,CAAA,GAAqB,GAAjBI,EAAS7E,KAGlB,OAFAjE,EAAOgI,YAAc,YACrBhI,EAAOuI,aAGPvI,EAAOgI,YAAc,QACrBhI,EAAOuI,aACPvI,EAAOiI,YAAca,EAAS/F,QAGhC1B,QAAQC,IAAI,gBAAkB0D,KAAKC,UAAU6D,OAG/C9I,EAAOgI,YAAc,EAGvBhI,EAAOgI,YAAc,SAIzBhH,OAAOoB,SAASC,KAAO,iBAK7BvC,EAAYC,WAAW,eAAgB,CAAC,SAAU,aAAc,OAAQ,gBAAiB,yBAA0B,sBAAuB,YAAa,SAAUC,EAAQC,EAAYC,EAAMmD,EAAeF,EAAwBD,EAAqB6F,GACrP/I,EAAOgJ,QAAU,IACjBhJ,EAAOiJ,gBAAkB,GACzBjJ,EAAOgI,YAAc,QACrBhI,EAAOkJ,WAAa,IACpBlJ,EAAOmJ,UAAY,IACnBnJ,EAAO+H,QAAU,GACjB/H,EAAOkI,aAAe,GACtBlI,EAAOoJ,SAAU,EACjBpJ,EAAOqJ,WAAa,OACpBrJ,EAAO2E,SAAW,GAClB3E,EAAOsJ,SAAW,CAChB3B,aAAgB,GAChBrH,SAAY,GACZiJ,OAAU,IACVC,YAAe,GACf5G,SAAY,GACZ6G,cAAiB,OACjBtC,QAAW,GACXjF,SAAY,GACZsC,KAAQ,KACRJ,SAAY,KACZsF,SAAY,GACZC,SAAY,IAEd3J,EAAO4J,kBAAoB,CACzB5C,KAAQ,IAEVhH,EAAO2B,MAAO,EACd,IAuFIkI,EAvFAC,EAAU1H,SAASC,KAAKoG,MAAM,KACvBvI,EAAKqF,IAAI,oBAAqB,SAAUC,GACjDxF,EAAO+J,SAAWvE,EAAKuE,SACvB/J,EAAOyF,aAAeD,EAAKE,WAS7BxC,EAAoBmF,YAAY,SAAUvH,GAC1B,GAAVA,EAAEiD,OACJ/D,EAAO+H,QAAUjH,EAAEmD,QAGvBd,EAAuByB,gBAAgB,SAAU1C,GAK/C,IAJA,IAAI2C,EAAM3C,EAAS+B,KACfa,EAAO5C,EAAS+B,KAChBc,EAAU,GAELf,EAAI,EAAGA,EAAIa,EAAIK,OAAQlB,IAC9B,IAAK,IAAIO,EAAI,EAAGA,EAAIO,EAAKI,OAAQX,IAC3BM,EAAIb,GAAGmB,IAAML,EAAKP,GAAGa,eACvBL,EAAQM,KAAKP,EAAKP,IAKxBvE,EAAOsF,WAAaP,IAGtB/E,EAAOuI,WAAa,WAElBrF,EAAoBmF,YAAY,SAAUvH,GAC1B,GAAVA,EAAEiD,OACJ/D,EAAO+H,QAAUjH,EAAEmD,SAKzBjE,EAAOS,OAAO,wBAAyB,SAAUC,EAAUC,GACzDX,EAAOmJ,UAAY,MAErBnJ,EAAOS,OAAO,eAAgB,SAAUC,EAAUC,GAChDX,EAAOmJ,UAAY,MAErBnJ,EAAOS,OAAO,oBAAqB,SAAUC,EAAUC,GACrDX,EAAOmJ,UAAY,MAErBnJ,EAAOS,OAAO,oBAAqB,SAAUC,EAAUC,GACrDX,EAAOmJ,UAAY,MAErBnJ,EAAOS,OAAO,uBAAwB,SAAUC,EAAUC,GACxDX,EAAOmJ,UAAY,MAErBnJ,EAAOS,OAAO,oBAAqB,SAAUC,EAAUC,GACrDX,EAAOmJ,UAAY,MAErBnJ,EAAOS,OAAO,kBAAmB,SAAUC,EAAUC,GACnDX,EAAOmJ,UAAY,IAEfzI,GAAYV,EAAOsJ,SAAShJ,SAC9BN,EAAOgI,YAAc,EAErBhI,EAAOgI,YAAc,IAIzBhI,EAAOgK,YAAc,SAAUC,EAAOhJ,GACpCjB,EAAO2B,MAAO,GAGhB3B,EAAOkK,QAAU,WAEflJ,OAAOoB,SAAS+H,UAGlBnK,EAAOoK,YAAc,SAAUC,GACb,GAAZA,EACFrK,EAAOkJ,WAAa,EACC,GAAZmB,IACTrK,EAAOkJ,WAAa,IAMxBlJ,EAAOsK,QAAU,WACfjJ,QAAQC,IAAI,aAAeG,EAAE,aAAa8I,QAEb,UAAzB9I,EAAE,aAAa8I,QACjBrH,EAAoBsH,UAAUxK,EAAOsJ,SAAS3B,aAAc3H,EAAOsJ,SAAShJ,SAAU,SAAU6G,GAC1E,GAAhBA,EAAQpD,MAA6B,GAAhBoD,EAAQlD,OAC/BjE,EAAOyK,KAAO,GACd1B,EAAU2B,SACVb,EAAWd,EAAU,WACnB/I,EAAOyK,OAEY,GAAfzK,EAAOyK,MACThJ,EAAE,aAAa8I,KAAK,UACpBvK,EAAOyK,KAAO,GACd1B,EAAU2B,OAAOb,IAEjBpI,EAAE,aAAa8I,KAAUvK,EAAOyK,KAAO,YAExC,MAGLzK,EAAOgJ,QAAU,KAKvBhJ,EAAO2K,UAAY,WACmB,IAAhC3K,EAAOsJ,SAAS3B,aAKM,IAAtB3H,EAAO4K,YAKqB,IAA5B5K,EAAOsJ,SAAShJ,SAKYc,MAA5BpB,EAAOsJ,SAAShJ,UAIU,SAA1BmB,EAAE,cAAc8I,SAClB9I,EAAE,cAAcC,KAAK,CACnBmJ,SAAY,aAEd3H,EAAoB4H,QAAQ9K,EAAOsJ,SAAS3B,aAAc,SAAUoD,GAC7C,GAAjBA,EAAShH,MAA8B,GAAjBgH,EAAS9G,MACjCjE,EAAOgL,SAAW,GAClBjC,EAAU2B,SACVb,EAAWd,EAAU,WACnB/I,EAAOgL,WAEgB,GAAnBhL,EAAOgL,UACTvJ,EAAE,cAAc8I,KAAK,SACrB9I,EAAE,cAAcwJ,WAAW,YAC3BjL,EAAOgL,SAAW,GAClBjC,EAAU2B,OAAOb,IAEjBpI,EAAE,cAAc8I,KAAUvK,EAAOgL,SAAW,YAE7C,MAEkB,OAAjBD,EAAShH,OACX/D,EAAOmJ,UAAY,EACnB1H,EAAE,cAAcwJ,WAAW,gBA/BjCjL,EAAOmJ,UAAY,SALnBnJ,EAAOmJ,UAAY,OALnBnJ,EAAOmJ,UAAY,IAgDvB,IAAI+B,EAAO,EAEPC,EAAM,WAGG,IAFXD,GAGEzJ,EAAE,QAAQ8I,KAAKW,GACfE,KAEApK,OAAOoB,SAASC,KAAO,cAIvB+I,EAAS,WACXC,WAAWF,EAAK,MAqNlB,GAjNAnL,EAAOsL,YAAc,WACa,IAA5BtL,EAAOsJ,SAAS1G,SAKYxB,MAA5BpB,EAAOsJ,SAAS1G,WAIM,SAAtB5C,EAAO4K,aACT5K,EAAOuL,UAAY,CACjBjL,SAAYN,EAAOsJ,SAAShJ,SAC5BkJ,YAAexJ,EAAOsJ,SAAS3B,aAC/B/E,SAAY5C,EAAOsJ,SAAS1G,SAC5B6G,cAAiB,OACjBtC,QAAWnH,EAAOsJ,SAASnC,QAC3B3C,KAAQ,KACRkF,SAAY1J,EAAOsJ,SAASI,SAC5BtF,SAAY,MAEdpE,EAAO2E,SAAS,KAAU3E,EAAOsJ,SAASI,SAC1C1J,EAAO2E,SAAS,QAAa3E,EAAOsJ,SAASnC,QAC7CnH,EAAO2E,SAAS,aAAkB3E,EAAOsJ,SAAS3B,eAElD3H,EAAOuL,UAAY,CACjBjL,SAAYN,EAAOsJ,SAAShJ,SAC5BqH,aAAgB3H,EAAOsJ,SAAS3B,aAChC/E,SAAY5C,EAAOsJ,SAAS1G,SAC5B6G,cAAiB,OACjBtC,QAAWnH,EAAOsJ,SAASnC,QAC3B3C,KAAQ,KACRkF,SAAY1J,EAAOsJ,SAASI,SAC5BtF,SAAY,MAEdpE,EAAO2E,SAAS,KAAU3E,EAAOsJ,SAASI,SAC1C1J,EAAO2E,SAAS,QAAa3E,EAAOsJ,SAASnC,QAC7CnH,EAAO2E,SAAS,aAAkB3E,EAAOsJ,SAAS3B,cAGpDtE,EAAcmI,eAAexL,EAAO2E,SAAU3E,EAAOuL,UAAW,SAAUE,GACzD,GAAXA,EAAG1H,MACL/D,EAAOgJ,QAAU,IAES,SAAtBhJ,EAAO4K,aACT5K,EAAOwC,IAAI,qBAAsB,SAAUC,EAAKC,GAC1CvC,mBAAmBC,KAAKmC,iBAC1BtC,EAAW0C,UAAYxC,mBAAmBC,KAAKwC,SAC/C5C,EAAO6C,SAAW1C,mBAAmBC,KACrCiB,QAAQC,IAAI,cAEZD,QAAQC,IAAI,UAAYmK,EAAG1I,SAC3B/B,OAAOoB,SAASC,KAAO,gBAQ7B+I,IACA3J,EAAE,aAAaiK,IAAI,QAAS,QAC5BjK,EAAE,wBAAwBkK,SAAS,YAEnB,GAAZF,EAAG1H,KACL/D,EAAOmJ,UAAY,IAEnB9H,QAAQC,IAAI,UAAYmK,EAAG1I,YAjE/B/C,EAAOmJ,UAAY,SAuEvBnJ,EAAO4L,UAAY,SAAUC,GAC3B,IAAIC,EAAaD,EAASpD,MAAM,KAAK,GAAGA,MAAM,KAAK,GACnDzH,OAAOc,KAAK,eAAiBgK,EAAa,UAG5C9L,EAAO+L,UAAY,SAAUC,GAC3B,IAAIC,EAAM,GAAKD,EAAIE,cAAcC,MAEtB,IAAPF,EACFjM,EAAOmJ,UAAY,SAEd8C,EAAIG,MAAM,sCACbpM,EAAOmJ,UAAY,WAUzBnJ,EAAOqM,WAAa,SAAUL,GAGjB,IAFD,GAAKA,EAAIE,cAAcC,QAG/BnM,EAAOmJ,UAAY,UAIvBnJ,EAAOsM,UAAY,SAAUN,GAGhB,IAFD,GAAKA,EAAIE,cAAcC,QAG/BnM,EAAOmJ,UAAY,UAIvBnJ,EAAOuM,UAAY,WACjB,IAAIN,EAAMjM,EAAOsJ,SAAS3B,aAEtBsE,EAAIG,MAAM,oEACZpM,EAAOqJ,WAAa,KACpBrJ,EAAO4K,YAAc,SACZqB,EAAIG,MAAM,qDACnBpM,EAAOqJ,WAAa,KACpBrJ,EAAO4K,YAAc,SAIrB5K,EAAO4K,aAFP5K,EAAOmJ,UADS,IAAP8C,EACU,GAIA,OAFE,KAOzBjM,EAAOwB,WAAa,WAClBxB,EAAOmJ,UAAY,IAEmB,WAAlC1H,EAAE,aAAaC,KAAK,WACtBD,EAAE,aAAaC,KAAK,WAAW,GAE/BD,EAAE,aAAaC,KAAK,WAAW,IAInC1B,EAAOwM,SAAW,SAAUC,GACU,IAAhCzM,EAAOsJ,SAAS3B,aAKY,IAA5B3H,EAAOsJ,SAAShJ,SAKO,IAAvBN,EAAOkI,aAKE,GAATuE,IACFpL,QAAQC,IAAI,eAAiBG,EAAE,aAAaC,KAAK,YAEX,WAAlCD,EAAE,aAAaC,KAAK,WACI,SAAtB1B,EAAO4K,YAETvH,EAAcqJ,iBAAiB1M,EAAOsJ,SAAS3B,aAAc,SAAU1D,GACpD,GAAbA,EAAKF,MAA0B,GAAbE,EAAKA,KACzBf,EAAoByJ,YAAY3M,EAAOkI,aAAc,SAAU6C,GACxC,GAAjBA,EAAShH,MAA8B,GAAjBgH,EAAS9G,MACjCjE,EAAOgJ,QAAU,QACjBvH,EAAE,aAAaiK,IAAI,QAAS,OAC5BjK,EAAE,wBAAwBkK,SAAS,WAEnC3L,EAAOmJ,UAAY,IAIvBnJ,EAAOmJ,UAAY,IAGQ,SAAtBnJ,EAAO4K,aAEhB1H,EAAoB0J,YAAY5M,EAAOsJ,SAAS3B,aAAc,SAAUkF,GAC/C,GAAnBA,EAAW9I,MAAgC,GAAnB8I,EAAW5I,KAErCf,EAAoB0F,YAAY5I,EAAOkI,aAAc,SAAU/B,GAC7C,GAAZA,EAAIpC,MAAyB,GAAZoC,EAAIlC,KACvBf,EAAoBsH,UAAUxK,EAAOsJ,SAAS3B,aAAc3H,EAAOsJ,SAAShJ,SAAU,SAAU6G,GAC9FnH,EAAOgJ,QAAUyD,EACjBpL,QAAQC,IAAI,aAAe0D,KAAKC,UAAUkC,OAG5CnH,EAAOmJ,UAAY,EAEnBjG,EAAoBmF,YAAY,SAAUvH,GAC1B,GAAVA,EAAEiD,OACJ/D,EAAO+H,QAAUjH,EAAEmD,WAM3BjE,EAAOmJ,UAAY,IAKzBnJ,EAAOmJ,UAAY,MApDrBnJ,EAAOmJ,UAAY,QALnBnJ,EAAOmJ,UAAY,SALnBnJ,EAAOmJ,UAAY,IAmEL/H,MAAd0I,EAAQ,GAAiB,CAC3B,IAAIgD,EAAahD,EAAQ,GACzBzI,QAAQC,IAAI,UAAYwI,EAAQ,IAChC5G,EAAoB6J,cAAcD,EAAWrE,MAAM,KAAK,GAAI,SAAUH,GAC3C,GAArBA,EAAavE,KACfb,EAAoB0J,YAAYtE,EAAarE,KAAK0D,aAAc,SAAUkF,GACxExL,QAAQC,IAAI,gBAAkB0D,KAAKC,UAAU4H,IAEtB,GAAnBA,EAAW9I,MAAgC,GAAnB8I,EAAW5I,MAErCjE,EAAOgJ,QAAU,EACjBvH,EAAE,UAAUG,SAEZP,QAAQC,IAAI,kBAAoBgH,EAAarE,KAAKwF,eAClDzJ,EAAOsJ,SAAS3B,aAAeW,EAAarE,KAAK0D,aACjD3H,EAAOsJ,SAAShJ,SAAWgI,EAAarE,KAAKwF,cAC7ChI,EAAE,wBAAwBkK,SAAS,UACnClK,EAAE,aAAaiK,IAAI,QAAS,OAC5B1L,EAAOgJ,QAAU,WAIrBhJ,EAAOgJ,QAAU,QAMzBlJ,EAAYC,WAAW,aAAc,CAAC,SAAU,sBAAuB,gBAAiB,YAAa,SAAUC,EAAQkD,EAAqBG,EAAe0F,GAyHzJ,IAAIc,EAxHJ7J,EAAOgN,YAAc,IACrBhN,EAAOmJ,UAAY,GACnBnJ,EAAOiN,WAAa,CAClBtF,aAAgB,GAChBuF,OAAU,GACVC,YAAe,GACfvF,OAAU,GACVwF,UAAa,IAEfpN,EAAOqN,aAAe,GACtBrN,EAAOqJ,WAAa,GACpBrJ,EAAOkN,OAAS,GAChBlN,EAAO4K,YAAc,GACrB5K,EAAOsN,cAAgB,IACvBtN,EAAOS,OAAO,uBAAwB,SAAUC,EAAUC,GACpDD,GAAYV,EAAOiN,WAAWrF,OAChC5H,EAAOmJ,UAAY,EAEnBnJ,EAAOmJ,UAAY,IAGvBnJ,EAAOS,OAAO,oBAAqB,SAAUC,EAAUC,GAEnDX,EAAOmJ,UADO/H,MAAZV,EACiB,IAEA,IAGvBV,EAAOS,OAAO,oBAAqB,SAAUC,EAAUC,GACrDX,EAAOmJ,UAAY,IAErBnJ,EAAOS,OAAO,yBAA0B,SAAUC,EAAUC,GAC1DX,EAAOmJ,UAAY,IAGrBjG,EAAoBmF,YAAY,SAAUC,GACf,GAArBA,EAAavE,OACf/D,EAAO+H,QAAUO,EAAarE,QAIlCjE,EAAOuN,UAAY,WACjB,IAAItB,EAAMjM,EAAOiN,WAAWC,OAGX,GAFDjB,EAAI/G,OAIlBhC,EAAoB0F,YAAYqD,EAAK,SAAU9F,GAC7B,GAAZA,EAAIpC,MAAyB,GAAZoC,EAAIlC,MACvBjE,EAAOkN,OAAS,UAChBlN,EAAOmJ,UAAY,IACnBnJ,EAAOsN,cAAgB,MAEvBtN,EAAOmJ,UAAY,EACnBnJ,EAAOkN,OAAS,QAChBlN,EAAOsN,cAAgB,IACvBpK,EAAoBmF,YAAY,SAAUC,GACf,GAArBA,EAAavE,OACf/D,EAAO+H,QAAUO,EAAarE,YAMtCjE,EAAOmJ,UAAY,EACnBnJ,EAAOsN,cAAgB,IACvBtN,EAAOkN,OAAS,UAIpBlN,EAAOuM,UAAY,WACjB,IAAIN,EAAMjM,EAAOiN,WAAWtF,aAExBsE,EAAIG,MAAM,mEAEZlJ,EAAoB0J,YAAY5M,EAAOiN,WAAWtF,aAAc,SAAUkF,GACxE7M,EAAO4K,YAAc,QAEE,GAAnBiC,EAAW9I,MAAgC,GAAnB8I,EAAW5I,KACrCjE,EAAOqJ,WAAa,IAEpBrJ,EAAOqJ,WAAa,KACpBrJ,EAAOmJ,UAAY,KAGd8C,EAAIG,MAAM,oDAEnB/I,EAAcqJ,iBAAiB1M,EAAOiN,WAAWtF,aAAc,SAAU1D,GACvEjE,EAAO4K,YAAc,QAEJ,GAAb3G,EAAKF,MAA0B,GAAbE,EAAKA,MACzBjE,EAAOmJ,UAAY,EACnBnJ,EAAOqJ,WAAa,MAEpBrJ,EAAOqJ,WAAa,KAOxBrJ,EAAOqJ,YADPrJ,EAAO4K,aAFP5K,EAAOmJ,UADS,IAAP8C,EACU,GAKA,MAHE,IACD,KAQxBjM,EAAOuI,WAAa,WAElBvI,EAAO+H,QAAU,KACjB7E,EAAoBmF,YAAY,SAAUC,GACf,GAArBA,EAAavE,OACf/D,EAAO+H,QAAUO,EAAarE,SAKpCjE,EAAOwN,EAAI,GAEXxN,EAAOS,OAAO,0BAA2B,SAAUC,EAAUC,GAC3DX,EAAOmJ,UAAY,MAGrBnJ,EAAOyN,UAAY,WACqB,IAAlCzN,EAAOiN,WAAWtF,aAKI,IAAtB3H,EAAO4K,YAKc,MAArB5K,EAAOqJ,YAA2C,MAArBrJ,EAAOqJ,WAKR,IAA5BrJ,EAAOiN,WAAWC,OAKD,SAAjBlN,EAAOkN,OAKgB,SAAvBzL,EAAE,WAAW8I,SACf9I,EAAE,WAAWC,KAAK,CAChBmJ,SAAY,aAGY,SAAtB7K,EAAO4K,YAET1H,EAAoBwK,gBAAgB1N,EAAOiN,WAAWtF,aAAc,SAAUR,GACxD,GAAhBA,EAAQpD,MAA6B,GAAhBoD,EAAQlD,MAC/BjE,EAAOyK,KAAO,GACd1B,EAAU2B,SACVb,EAAWd,EAAU,WACnB/I,EAAOyK,OAEY,GAAfzK,EAAOyK,MACThJ,EAAE,WAAWwJ,WAAW,YACxBxJ,EAAE,WAAW8I,KAAK,SAClBvK,EAAOyK,KAAO,GACd1B,EAAU2B,OAAOb,IAEjBpI,EAAE,WAAW8I,KAAUvK,EAAOyK,KAAO,eAEtC,MACsB,OAAhBtD,EAAQpD,OACjB/D,EAAOmJ,UAAY,OAGQ,SAAtBnJ,EAAO4K,aAEhB1H,EAAoByK,kBAAkB3N,EAAOiN,WAAWtF,aAAc,SAAUR,GAC1D,GAAhBA,EAAQpD,MAA6B,GAAhBoD,EAAQlD,OAC/BjE,EAAOyK,KAAO,GACd1B,EAAU2B,SACVb,EAAWd,EAAU,WACnB/I,EAAOyK,OAEY,GAAfzK,EAAOyK,MACThJ,EAAE,WAAW8I,KAAK,SAClB9I,EAAE,WAAWwJ,WAAW,YACxBjL,EAAOyK,KAAO,GACd1B,EAAU2B,OAAOb,IAEjBpI,EAAE,WAAW8I,KAAUvK,EAAOyK,KAAO,eAEtC,SAhDTzK,EAAOmJ,UAAY,IALnBnJ,EAAOmJ,UAAY,MALnBnJ,EAAOmJ,UAAY,IALnBnJ,EAAOmJ,UAAY,MALnBnJ,EAAOmJ,UAAY,IA4EvBnJ,EAAO4N,WAAa,WACc,IAA5B5N,EAAOiN,WAAWrF,OAKUxG,MAA5BpB,EAAOiN,WAAWrF,SAIa,IAA/B5H,EAAOiN,WAAWG,UAKahM,MAA/BpB,EAAOiN,WAAWG,WAIE,GAApBpN,EAAOmJ,YAIPnJ,EAAOiN,WAAWrF,QAAU5H,EAAOiN,WAAWG,UAKlDlK,EAAoB2K,eAAe7N,EAAOiN,WAAWtF,aAAc3H,EAAOqN,aAAcrN,EAAOiN,WAAWrF,OAAQ,SAAUiF,GAC1HxL,QAAQC,IAAI,WAAa0D,KAAKC,UAAU4H,IAEjB,GAAnBA,EAAW9I,MAAgC,GAAnB8I,EAAW5I,OACrCjE,EAAOgN,YAAc,IACrBvL,EAAE,aAAaiK,IAAI,QAAS,QAC5BjK,EAAE,wBAAwBkK,SAAS,UACnCP,OAXFpL,EAAOmJ,UAAY,GAbnBnJ,EAAOmJ,UAAY,KATnBnJ,EAAOmJ,UAAY,KAsCvB,IAAI+B,EAAO,EAEPC,EAAM,WAGG,IAFXD,GAGEzJ,EAAE,QAAQ8I,KAAKW,GACfE,KAEApK,OAAOoB,SAASC,KAAO,cAIvB+I,EAAS,WACXC,WAAWF,EAAK,MAGlBnL,EAAO8N,WAAa,SAAUC,GAC5B,GAAiB,GAAbA,EAAgB,CAClB,GAAsC,IAAlC/N,EAAOiN,WAAWtF,aAEpB,YADA3H,EAAOmJ,UAAY,IAIrB,GAA0B,IAAtBnJ,EAAO4K,YAET,YADA5K,EAAOmJ,UAAY,OAIrB,GAAyB,MAArBnJ,EAAOqJ,YAA2C,MAArBrJ,EAAOqJ,WAEtC,YADArJ,EAAOmJ,UAAY,KAIrB,GAAgC,IAA5BnJ,EAAOiN,WAAWC,OAEpB,YADAlN,EAAOmJ,UAAY,OAIrB,GAAqB,SAAjBnJ,EAAOkN,OAET,YADAlN,EAAOmJ,UAAY,KAIgB/H,MAAjCpB,EAAOiN,WAAWE,aAA6D,IAAjCnN,EAAOiN,WAAWE,YACxC,SAAtBnN,EAAO4K,YACT1H,EAAoB8K,oBAAoBhO,EAAOiN,WAAWE,YAAa,SAAUpC,GAC1D,GAAjBA,EAAShH,MACX/D,EAAOqN,aAAetC,EAAS9G,KAC/BxC,EAAE,wBAAwBkK,SAAS,UACnClK,EAAE,aAAaiK,IAAI,QAAS,OAC5B1L,EAAOgN,YAAc,KAErBhN,EAAOmJ,UAAY,IAGQ,SAAtBnJ,EAAO4K,aAChB1H,EAAoB+K,mBAAmBjO,EAAOiN,WAAWE,YAAa,SAAUe,GACxD,GAAlBA,EAAUnK,MACZ/D,EAAOqN,aAAea,EAAUjK,KAChCjE,EAAOgN,YAAce,EACrBtM,EAAE,wBAAwBkK,SAAS,UACnClK,EAAE,aAAaiK,IAAI,QAAS,OAC5B1L,EAAOgN,YAAc,KAErBhN,EAAOmJ,UAAY,IAKzBnJ,EAAOmJ,UAAY,WAEC,GAAb4E,GACT5N,mBAAmB8N,mBAAmBjO,EAAOiN,WAAWE,YAAa,SAAUe,GACvD,GAAlBA,EAAUnK,MACZ/D,EAAOqN,aAAea,EAAUjK,KAChCjE,EAAOgN,YAAce,EACrBtM,EAAE,qBAAqB0M,YAAY,gBACnC1M,EAAE,2BAA2BkK,SAAS,iBAEtC3L,EAAOmJ,UAAY","file":"app-help/js/controllers/user-ctrl.js","sourcesContent":["define(['controllers/controllers'], function (controllers) {\n  'use strict'; //根据接口调用自定义视图获取\n  //用户登录userLoginUIService\n\n  controllers.controller('loginCtr', ['$scope', '$rootScope', 'Info', 'userLoginUIService', function ($scope, $rootScope, Info, userLoginUIService) {\n    $scope.user = {\n      username: \"\",\n      password: \"\"\n    };\n    $scope.errorMsg = \"\";\n    $scope.slide = \"1\";\n    $scope.$watch(\"user.username\", function (newValue, oldValue) {\n      $scope.errorStatus = 0;\n    });\n    $scope.$watch(\"user.password\", function (newValue, oldValue) {\n      $scope.errorStatus = 0;\n    });\n\n    $scope.loginClick = function (e) {\n      var keycode = window.event ? e.keyCode : e.which;\n\n      if (keycode == 13 || keycode == undefined) {\n        if ($scope.user.username == \"\") {\n          $scope.errorStatus = 1;\n          $scope.errorMsg = \"登录名不能为空\";\n          return;\n        }\n\n        if ($scope.user.password == \"\") {\n          $scope.errorStatus = 2;\n          $scope.errorMsg = \"密码不能为空\";\n          return;\n        }\n\n        console.log($scope.user.username);\n\n        if ($scope.user.username != \"\" && $scope.user.password != \"\") {\n          // if ($(\"#checkServe\").attr(\"checked\") == \"checked\") {\n          userLoginUIService.login($scope.user.username, $scope.user.password); // } else {\n          //     $scope.errorMsg = \"请勾选《普奥云网站服务协议》\";\n          // }\n        } else {\n          $scope.errorMsg = \"请输入用户名或密码\";\n          $scope.errorStatus = 1;\n        }\n      }\n    };\n\n    $scope.checkClick = function () {\n      if ($(\"#checkServe\").attr(\"checked\") == \"checked\") {\n        $(\"#checkServe\").show();\n        $(\"#checkName\").hide();\n        $(\"#checkServe\").attr(\"checked\", false);\n      } else {\n        $(\"#checkServe\").hide();\n        $(\"#checkName\").show();\n        $(\"#checkServe\").attr(\"checked\", true);\n      }\n    };\n\n    $scope.homeClick = function () {\n      window.open(\"http://www.proudsmart.com\");\n    };\n\n    $rootScope.indexShow = false;\n    $rootScope.personalShow = true;\n\n    var redirectHandler = function redirectHandler() {\n      var industry = userLoginUIService.user.industry;\n\n      if (!industry || industry == 0) {\n        if (!userLoginUIService.user.appData) {\n          if (userLoginUIService.user.loginTimes == 0) {\n            window.location.href = \"../password.html\";\n          } else {\n            window.location.href = \"apps.html\";\n          }\n        } else {\n          if (userLoginUIService.user.loginTimes == 0) {\n            window.location.href = \"../password.html\";\n          } else {\n            window.location.href = \"app/index.html\";\n          }\n        }\n      } else {\n        if (userLoginUIService.user.loginTimes == 0) {\n          window.location.href = \"../password.html\";\n        } else {\n          window.location.href = \"app/index.html\";\n        }\n      }\n    };\n\n    if (!userLoginUIService.user.isAuthenticated) {\n      $scope.$on('loginStatusChanged', function (evt, d) {\n        if (userLoginUIService.user.isAuthenticated) {\n          $rootScope.staffName = userLoginUIService.user.userName;\n          $scope.userInfo = userLoginUIService.user;\n          redirectHandler();\n        } else {\n          $scope.errorMsg = userLoginUIService.result.message;\n          $scope.errorStatus = 1;\n        }\n      });\n    } else {\n      redirectHandler();\n    }\n  }]); //个人中心编辑\n\n  controllers.controller('personalController', ['$scope', 'userEnterpriseService', 'growl', 'Info', 'userLoginUIService', '$rootScope', 'userIdentifyService', 'modelDefinitionService', 'resourceUIService', 'userUIService', function ($scope, userEnterpriseService, growl, Info, userLoginUIService, $rootScope, userIdentifyService, modelDefinitionService, resourceUIService, userUIService) {\n    $scope.userEdit = \"\";\n    $scope.provinces = \"\";\n    $scope.districts = \"\";\n    $scope.citys = \"\";\n    $scope.loginname = \"\";\n    $scope.editUser = '';\n\n    var pro = function pro() {\n      resourceUIService.getSimpleDistricts(function (returnObj) {\n        if (returnObj.code == 0) {\n          $scope.provinces = returnObj.data;\n\n          for (var i in $scope.provinces) {\n            if ($scope.provinces[i].label == $scope.userEdit.enterprise.province) {\n              if ($scope.userEdit.enterprise.province == '北京市' || $scope.userEdit.enterprise.province == '天津市' || $scope.userEdit.enterprise.province == '上海市' || $scope.userEdit.enterprise.province == '重庆市') {\n                var pro = $scope.provinces[i].children;\n\n                for (var n in pro) {\n                  if (pro[n].label == $scope.userEdit.enterprise.province) {\n                    $scope.citys = pro[n].children;\n                  }\n                }\n              } else {\n                $scope.citys = $scope.provinces[i].children;\n              }\n\n              $scope.districts = [];\n            }\n          }\n\n          for (var j in $scope.citys) {\n            if ($scope.citys[j].label == $scope.userEdit.enterprise.city) {\n              $scope.districts = $scope.citys[j].children;\n            }\n          }\n        }\n      });\n    };\n\n    if (!userLoginUIService.user.isAuthenticated) {\n      $scope.$on('loginStatusChanged', function (evt, d) {\n        if (userLoginUIService.user.isAuthenticated) {\n          $rootScope.staffName = userLoginUIService.user.userName;\n          $scope.userInfo = userLoginUIService.user;\n          $scope.userEdit = userLoginUIService.user;\n          $scope.editUser = userLoginUIService.user.loginName;\n          pro();\n        } else {\n          window.location.href = \"login.html\";\n        }\n      });\n    } else {\n      $rootScope.staffName = userLoginUIService.user.userName;\n      $scope.userInfo = userLoginUIService.user;\n      $scope.userEdit = userLoginUIService.user;\n      $scope.editUser = userLoginUIService.user.loginName;\n      pro();\n    }\n\n    $scope.proChang = function () {\n      pro();\n    };\n\n    $scope.userEdit = userLoginUIService.user;\n    $scope.editData = {};\n    modelDefinitionService.findAllIndustry(function (industry) {\n      var arr = industry.data;\n      var arr1 = industry.data;\n      var newData = [];\n      console.log(JSON.stringify(newData));\n\n      for (var i = 0; i < arr.length; i++) {\n        for (var j = 0; j < arr1.length; j++) {\n          if (arr[i].id == arr1[j].parentModelId) {\n            newData.push(arr1[j]);\n          }\n        }\n      }\n\n      $scope.belongList = newData;\n    });\n    var info = Info.get(\"localdb/info.json\", function (info) {\n      $scope.provinceList = info.cityList;\n      $scope.durationArr = info.durationList;\n      $scope.scaleArr = info.scaleList;\n    }); //编辑点击事件\n\n    $scope.editClick = function () {\n      //$scope.editData[\"industry\"] = $scope.userEdit.industry;\n      //$scope.editData[\"city\"] = $scope.userEdit.city;\n      //$scope.editData[\"province\"] = $scope.userEdit.province;\n      //$scope.editData[\"address\"] = $scope.userEdit.address;\n      $scope.editData[\"officePhone\"] = $scope.userEdit.officePhone; //$scope.editData[\"business\"] = $scope.userEdit.business;\n      //$scope.editData[\"website\"] = $scope.userEdit.website;\n\n      $scope.editData[\"userID\"] = $scope.userEdit.userID;\n      $scope.editData[\"userName\"] = $scope.userEdit.userName; //$scope.editData[\"business\"] = $scope.userEdit.business;\n\n      $scope.editData[\"loginName\"] = $scope.userEdit.loginName;\n      console.log(\"phone--\" + $scope.userEdit.officePhone); // if($scope.userEdit.officePhone!=\"\" || $scope.userEdit.officePhone != null && $scope.userEdit.officePhone == undefined){\n      //     return;\n      // }\n\n      if (typeof $scope.userEdit.officePhone != \"undefined\" && typeof $scope.userEdit.loginName != \"undefined\" && $scope.loginname != \"error\") {\n        if ($scope.userEdit.loginName != '' && $scope.userEdit.loginName != null) {\n          if ($scope.editUser != $scope.userEdit.loginName) {\n            if ($scope.userEdit.loginName.length >= 4) {\n              userUIService.checkLoginName($scope.userEdit.loginName, function (res) {\n                if (res.code == 0) {\n                  if (res.data == false) {\n                    $scope.loginname = 'error';\n                    return;\n                  } else {\n                    personSave($scope.editData);\n                  }\n                }\n              });\n            }\n          } else {\n            personSave($scope.editData);\n          }\n        }\n      }\n    };\n\n    var personSave = function personSave(editData) {\n      userUIService.modifyUser(editData, function (userData) {\n        if (userData.code == 0) {\n          growl.success(\"保存成功\", {});\n        } else {\n          growl.error(\"保存失败\", {});\n        }\n      });\n    };\n\n    $scope.$watch(\"userEdit.loginName\", function (newV, oldV, v) {\n      $scope.loginname = '';\n    }); //企业修改点击事件\n\n    $scope.editEnterpriseEClick = function () {\n      var entArr = {};\n      entArr[\"enterpriseSize\"] = $scope.userEdit.enterprise.enterpriseSize;\n      entArr[\"duration\"] = $scope.userEdit.enterprise.duration;\n      entArr[\"name\"] = $scope.userEdit.enterprise.name;\n      entArr[\"enterpriseID\"] = $scope.userEdit.enterpriseID;\n      entArr[\"province\"] = $scope.userEdit.enterprise.province;\n      entArr[\"city\"] = $scope.userEdit.enterprise.city;\n      entArr[\"district\"] = $scope.userEdit.enterprise.district;\n      entArr[\"address\"] = $scope.userEdit.enterprise.address;\n      entArr[\"website\"] = $scope.userEdit.enterprise.website;\n      entArr[\"contact\"] = $scope.userEdit.enterprise.contact;\n      entArr[\"contactEmail\"] = $scope.userEdit.enterprise.contactEmail ? $scope.userEdit.enterprise.contactEmail : \"\";\n      entArr[\"contactPhone\"] = $scope.userEdit.enterprise.contactPhone ? $scope.userEdit.enterprise.contactPhone : \"\";\n      console.log(\"Arr---\" + JSON.stringify(entArr));\n      userEnterpriseService.modifyEnterpriseInfo(entArr, function (userData) {\n        if (userData.code == 0) {\n          userLoginUIService.user.enterprise = userData.data;\n          growl.success(\"保存成功\", {});\n        } else {\n          growl.error(\"保存失败\", {});\n        }\n      });\n    };\n\n    $rootScope.indexShow = false;\n    $rootScope.personalShow = true;\n  }]); //初始化密码\n\n  controllers.controller('passwordController', ['$scope', '$rootScope', 'userLoginUIService', 'userIdentifyService', function ($scope, $rootScope, userLoginUIService, userIdentifyService) {\n    $scope.passwordEdit = userLoginUIService.user;\n    $scope.pwdList = {\n      \"emailAddress\": \"\",\n      \"newPwd\": \"\",\n      \"configPwd\": \"\",\n      \"regPwd\": \"\"\n    };\n    $scope.imgCode = \"\";\n    $scope.confirmShow = \"0\";\n    $scope.codeMessage = \"\";\n    $scope.emailAddress = \"\";\n    $scope.identifyName = \"\";\n    $scope.configError = \"\";\n    $scope.userId = \"\";\n    $scope.$on('loginStatusChanged', function (evt, d) {\n      if (userLoginUIService.user.isAuthenticated) {\n        // $rootScope.staffName = userLoginUIService.user.userName;\n        // $scope.userInfo = userLoginUIService.user;\n        // $scope.emailAddress = userLoginUIService.user.emailAddress;\n        $scope.userId = userLoginUIService.user.userID;\n      }\n    });\n    $scope.emailAddress = userLoginUIService.user.emailAddress; //生成验证码\n\n    userIdentifyService.getIdentify(function (identifyData) {\n      if (identifyData.code == 0) {\n        $scope.imgCode = identifyData.data;\n      }\n    }); //更新验证码\n\n    $scope.blindClick = function () {\n      $scope.imgCode = null;\n      userIdentifyService.getIdentify(function (identifyData) {\n        if (identifyData.code == 0) {\n          $scope.imgCode = identifyData.data;\n        }\n      });\n    };\n\n    $scope.$watch(\"pwdList.regPwd\", function (newValue, oldValue) {\n      if (newValue != $scope.pwdList.newPwd) {\n        $scope.confirmShow = 1;\n      } else {\n        $scope.confirmShow = 0;\n      }\n    });\n    $scope.$watch(\"identifyName\", function (newValue, oldValue) {\n      $scope.confirmShow = 0;\n    });\n    $scope.$watch(\"pwdList.newPwd\", function (newValue, oldValue) {\n      if (newValue != '') {//if (newValue == $scope.pwdList.configPwd) {\n        //  $scope.configError = 2022;\n        //} else {\n        //  $scope.configError = 0;\n        //}\n      }\n    });\n    $scope.$watch(\"pwdList.configPwd\", function (newValue, oldValue) {\n      $scope.confirmShow = 0;\n    });\n    var currentUrl = document.location.href;\n    var currentPage = currentUrl.split(\"/\")[5];\n\n    if (currentPage == \"personal\") {\n      userLoginUIService.logout();\n    }\n\n    $scope.initPwd = function () {\n      if ($scope.emailAddress != \"\") {\n        if ($scope.pwdList.configPwd == \"\") {\n          $scope.confirmShow = 1010;\n          return;\n        }\n\n        if ($scope.pwdList.newPwd == \"\") {\n          $scope.confirmShow = 1011;\n          return;\n        }\n\n        if ($scope.pwdList.regPwd == \"\") {\n          $scope.confirmShow = 1016;\n          return;\n        }\n\n        if ($scope.identifyName == \"\") {\n          $scope.confirmShow = 1017;\n          return;\n        }\n\n        if ($scope.configError == 2022) {\n          return;\n        } //验证码校验\n\n\n        userIdentifyService.identifyNum($scope.identifyName, function (res) {\n          if (res.code == 0 && res.data == true) {\n            // $scope.pwdList.emailAddress=userLoginUIService.user.emailAddress;\n            if ($scope.pwdList.regPwd == $scope.pwdList.newPwd) {\n              if ($scope.userId == \"\" || $scope.userId == null) {\n                $scope.userId = userLoginUIService.user.userID;\n              }\n\n              userLoginUIService.modifyPassword($scope.userId, $scope.pwdList.configPwd, $scope.pwdList.newPwd, function (initDate) {\n                if (initDate.code == 0 && initDate.data == true) {\n                  userLoginUIService.logout();\n                } else if (initDate.data == false) {\n                  $scope.confirmShow = \"2011\";\n                  $scope.blindClick();\n                  return;\n                } else {\n                  $scope.confirmShow = \"10010\";\n                  $scope.blindClick();\n                  $scope.codeMessage = initDate.message; //$scope.codeMessage = '旧密码输入错误';\n                }\n\n                console.log(\"initDate-----\" + JSON.stringify(initDate));\n              });\n            } else {\n              $scope.confirmShow = 1;\n            }\n          } else {\n            $scope.confirmShow = 3;\n          }\n        });\n      } else {\n        window.location.href = \"login.html\";\n      }\n    };\n  }]); //用户注册\n\n  controllers.controller('registerCtrl', ['$scope', '$rootScope', 'Info', 'userUIService', 'modelDefinitionService', 'userIdentifyService', '$interval', function ($scope, $rootScope, Info, userUIService, modelDefinitionService, userIdentifyService, $interval) {\n    $scope.regShow = \"1\";\n    $scope.confirmPassword = \"\";\n    $scope.confirmShow = \"false\";\n    $scope.statusShow = \"1\";\n    $scope.emailOnly = \"0\";\n    $scope.imgCode = \"\";\n    $scope.identifyName = \"\";\n    $scope.safeMsg = false;\n    $scope.phoneEmail = \"1001\";\n    $scope.editData = {};\n    $scope.formData = {\n      'emailAddress': '',\n      'password': '',\n      'roleID': '1',\n      'mobilePhone': '',\n      'userName': '',\n      'countryRegion': '中国大陆',\n      'address': '',\n      'industry': '',\n      'city': '北京',\n      'province': '北京',\n      'business': '',\n      'mail_num': ''\n    };\n    $scope.enterpriseManager = {\n      \"name\": \"\"\n    };\n    $scope.show = false;\n    var urlCode = location.href.split(\"?\");\n    var info = Info.get(\"localdb/info.json\", function (info) {\n      $scope.areaList = info.areaList;\n      $scope.provinceList = info.cityList;\n    }); // $scope.$on('loginStatusChanged', function(evt, d) {\n    //     if (userLoginUIService.user.isAuthenticated) {\n    //         $rootScope.staffName = userLoginUIService.user.userName;\n    //         $scope.userInfo = userLoginUIService.user;\n    //     }\n    // });\n    //生成验证码\n\n    userIdentifyService.getIdentify(function (e) {\n      if (e.code == 0) {\n        $scope.imgCode = e.data;\n      }\n    });\n    modelDefinitionService.findAllIndustry(function (industry) {\n      var arr = industry.data;\n      var arr1 = industry.data;\n      var newData = [];\n\n      for (var i = 0; i < arr.length; i++) {\n        for (var j = 0; j < arr1.length; j++) {\n          if (arr[i].id == arr1[j].parentModelId) {\n            newData.push(arr1[j]);\n          }\n        }\n      }\n\n      $scope.belongList = newData;\n    });\n\n    $scope.blindClick = function () {\n      //生成验证码\n      userIdentifyService.getIdentify(function (e) {\n        if (e.code == 0) {\n          $scope.imgCode = e.data;\n        }\n      });\n    };\n\n    $scope.$watch(\"formData.emailAddress\", function (newValue, oldValue) {\n      $scope.emailOnly = \"0\";\n    });\n    $scope.$watch(\"identifyName\", function (newValue, oldValue) {\n      $scope.emailOnly = \"0\";\n    });\n    $scope.$watch(\"formData.industry\", function (newValue, oldValue) {\n      $scope.emailOnly = \"0\";\n    });\n    $scope.$watch(\"formData.password\", function (newValue, oldValue) {\n      $scope.emailOnly = \"0\";\n    });\n    $scope.$watch(\"formData.mobilePhone\", function (newValue, oldValue) {\n      $scope.emailOnly = \"0\";\n    });\n    $scope.$watch(\"formData.userName\", function (newValue, oldValue) {\n      $scope.emailOnly = \"0\";\n    });\n    $scope.$watch(\"confirmPassword\", function (newValue, oldValue) {\n      $scope.emailOnly = \"0\";\n\n      if (newValue != $scope.formData.password) {\n        $scope.confirmShow = 1;\n      } else {\n        $scope.confirmShow = 0;\n      }\n    });\n\n    $scope.onMouseOver = function (actor, event) {\n      $scope.show = true;\n    };\n\n    $scope.renewal = function () {\n      //$scope.regShow=\"1\";\n      window.location.reload(); //刷新当前页面.\n    };\n\n    $scope.statusClick = function (statusId) {\n      if (statusId == 1) {\n        $scope.statusShow = 1;\n      } else if (statusId == 2) {\n        $scope.statusShow = 2;\n      }\n    };\n\n    var interval;\n\n    $scope.noEmail = function () {\n      console.log(\"username==\" + $(\"#emailBtn\").text());\n\n      if ($(\"#emailBtn\").text() == \"重新发送邮件\") {\n        userIdentifyService.sendEmail($scope.formData.emailAddress, $scope.formData.password, function (address) {\n          if (address.code == 0 && address.data == true) {\n            $scope.time = 60;\n            $interval.cancel();\n            interval = $interval(function () {\n              $scope.time--;\n\n              if ($scope.time == 0) {\n                $(\"#emailBtn\").text(\"重新发送邮件\");\n                $scope.time = 60;\n                $interval.cancel(interval);\n              } else {\n                $(\"#emailBtn\").text(\"\" + $scope.time + \"秒后，重新获取\");\n              }\n            }, 1000);\n          }\n\n          $scope.regShow = 2;\n        });\n      }\n    };\n\n    $scope.phoneCode = function () {\n      if ($scope.formData.emailAddress == \"\") {\n        $scope.emailOnly = 11;\n        return;\n      }\n\n      if ($scope.statusCheck == '') {\n        $scope.emailOnly = '1003';\n        return;\n      }\n\n      if ($scope.formData.password == \"\") {\n        $scope.emailOnly = 'pass10';\n        return;\n      }\n\n      if ($scope.formData.password == undefined) {\n        return;\n      }\n\n      if ($(\"#phoneCode\").text() == \"发送验证码\") {\n        $(\"#phoneCode\").attr({\n          \"disabled\": \"disabled\"\n        });\n        userIdentifyService.sendSMS($scope.formData.emailAddress, function (codeData) {\n          if (codeData.code == 0 && codeData.data == true) {\n            $scope.timeCode = 60;\n            $interval.cancel();\n            interval = $interval(function () {\n              $scope.timeCode--;\n\n              if ($scope.timeCode == 0) {\n                $(\"#phoneCode\").text(\"发送验证码\");\n                $(\"#phoneCode\").removeAttr(\"disabled\");\n                $scope.timeCode = 60;\n                $interval.cancel(interval); //$scope.emailSend = false;\n              } else {\n                $(\"#phoneCode\").text(\"\" + $scope.timeCode + \"秒后，重新获取\");\n              }\n            }, 1000);\n          } else {\n            if (codeData.code == 10017) {\n              $scope.emailOnly = 1;\n              $(\"#phoneCode\").removeAttr(\"disabled\");\n            }\n          }\n        });\n      }\n    };\n\n    var seed = 5; //60秒  \n\n    var tip = function tip() {\n      seed--;\n\n      if (seed > 0) {\n        $(\"#sec\").text(seed);\n        secTip();\n      } else {\n        window.location.href = \"index.html\";\n      }\n    };\n\n    var secTip = function secTip() {\n      setTimeout(tip, 1000);\n    }; //注册只支持企业用户注册\n\n\n    $scope.phoneSumbit = function () {\n      if ($scope.formData.userName == \"\") {\n        $scope.emailOnly = \"01012\";\n        return;\n      }\n\n      if ($scope.formData.userName == undefined) {\n        return;\n      }\n\n      if ($scope.statusCheck == \"phone\") {\n        $scope.formData1 = {\n          'password': $scope.formData.password,\n          'mobilePhone': $scope.formData.emailAddress,\n          'userName': $scope.formData.userName,\n          'countryRegion': '中国大陆',\n          'address': $scope.formData.address,\n          'city': '北京',\n          'business': $scope.formData.business,\n          'province': '北京'\n        };\n        $scope.editData[\"name\"] = $scope.formData.business;\n        $scope.editData[\"address\"] = $scope.formData.address;\n        $scope.editData[\"contactPhone\"] = $scope.formData.emailAddress;\n      } else {\n        $scope.formData1 = {\n          'password': $scope.formData.password,\n          'emailAddress': $scope.formData.emailAddress,\n          'userName': $scope.formData.userName,\n          'countryRegion': '中国大陆',\n          'address': $scope.formData.address,\n          'city': '北京',\n          'business': $scope.formData.business,\n          'province': '北京'\n        };\n        $scope.editData[\"name\"] = $scope.formData.business;\n        $scope.editData[\"address\"] = $scope.formData.address;\n        $scope.editData[\"contactEmail\"] = $scope.formData.emailAddress;\n      }\n\n      userUIService.individualUser($scope.editData, $scope.formData1, function (vv) {\n        if (vv.code == 0) {\n          $scope.regShow = \"4\";\n\n          if ($scope.statusCheck == \"phone\") {\n            $scope.$on('loginStatusChanged', function (evt, d) {\n              if (userLoginUIService.user.isAuthenticated) {\n                $rootScope.staffName = userLoginUIService.user.userName;\n                $scope.userInfo = userLoginUIService.user;\n                console.log(\"注册用户登录成功\");\n              } else {\n                console.log(\"注册失败,原因\" + vv.message + \"\");\n                window.location.href = \"login.html\";\n              }\n            }); // userLoginUIService.login($scope.formData.emailAddress, $scope.formData.password);\n          } // setTimeout(function () {\n          // window.location.href=\"app/index.html\";\n          // }, 5000);\n\n\n          secTip();\n          $(\"#barvader\").css(\"width\", \"100%\");\n          $(\".steps >ol >li:eq(2)\").addClass(\"active\");\n        } else {\n          if (vv.code == -3) {\n            $scope.emailOnly = \"2\";\n          } else {\n            console.log(\"注册失败,原因\" + vv.message + \"\"); // window.location.href=\"login.html\";\n          }\n        }\n      });\n    };\n\n    $scope.emailHref = function (hrefName) {\n      var emailSpile = hrefName.split(\"@\")[1].split(\".\")[0];\n      window.open(\"http://mail.\" + emailSpile + \".com/\");\n    };\n\n    $scope.passCheck = function (eve) {\n      var val = '' + eve.currentTarget.value + '';\n\n      if (val == '') {\n        $scope.emailOnly = \"pass10\";\n      } else {\n        if (!val.match(/^(?![^a-zA-Z]+$)(?!\\D+$).{6,20}$/)) {\n          $scope.emailOnly = \"pass11\";\n        }\n      } //  if(!val.match(/^(?![^a-zA-Z]+$)(?!\\D+$).{6,20}$/)){\n      //    $scope.emailOnly =\"pass11\";\n      //  }else if(){\n      //    $scope.emailOnly =\"pass10\";\n      // }\n\n    };\n\n    $scope.identCheck = function (eve) {\n      var val = '' + eve.currentTarget.value + '';\n\n      if (val == '') {\n        $scope.emailOnly = \"30001\";\n      }\n    };\n\n    $scope.userCheck = function (eve) {\n      var val = '' + eve.currentTarget.value + '';\n\n      if (val == '') {\n        $scope.emailOnly = \"01012\";\n      }\n    };\n\n    $scope.modeCheck = function () {\n      var val = $scope.formData.emailAddress;\n\n      if (val.match(/^([a-zA-Z0-9_\\.\\-])+\\@(([a-zA-Z0-9\\-])+\\.)+([a-zA-Z0-9]{2,4})+$/)) {\n        $scope.phoneEmail = 1002;\n        $scope.statusCheck = \"email\";\n      } else if (val.match(/^((1[3,5,8][0-9])|(14[5,7])|(17[0,6,7,8]))\\d{8}$/)) {\n        $scope.phoneEmail = 1001;\n        $scope.statusCheck = \"phone\";\n      } else if (val == '') {\n        $scope.emailOnly = 11; // $scope.phoneEmail=\"\";\n\n        $scope.statusCheck = ''; // $(\"#phone\").addClass(\"error-boder\");\n      } else {\n        $scope.emailOnly = '1003';\n        $scope.statusCheck = ''; // $(\"#phone\").addClass(\"error-boder\");\n      }\n    };\n\n    $scope.checkClick = function () {\n      $scope.emailOnly = \"0\";\n\n      if ($(\"#regCheck\").attr(\"checked\") == \"checked\") {\n        $(\"#regCheck\").attr(\"checked\", false);\n      } else {\n        $(\"#regCheck\").attr(\"checked\", true);\n      }\n    };\n\n    $scope.nextStep = function (regId) {\n      if ($scope.formData.emailAddress == \"\") {\n        $scope.emailOnly = 11;\n        return;\n      }\n\n      if ($scope.formData.password == \"\") {\n        $scope.emailOnly = 'pass10';\n        return;\n      }\n\n      if ($scope.identifyName == \"\") {\n        $scope.emailOnly = '30001';\n        return;\n      }\n\n      if (regId == 2) {\n        console.log(\"regCheck----\" + $(\"#regCheck\").attr(\"checked\"));\n\n        if ($(\"#regCheck\").attr(\"checked\") == \"checked\") {\n          if ($scope.statusCheck == \"phone\") {\n            //校验手机号码是否存在\n            userUIService.checkMobilePhone($scope.formData.emailAddress, function (data) {\n              if (data.code == 0 && data.data == true) {\n                userIdentifyService.identifySMS($scope.identifyName, function (codeData) {\n                  if (codeData.code == 0 && codeData.data == true) {\n                    $scope.regShow = '20000';\n                    $(\"#barvader\").css(\"width\", \"50%\");\n                    $(\".steps >ol >li:eq(1)\").addClass(\"active\");\n                  } else {\n                    $scope.emailOnly = 2;\n                  }\n                });\n              } else {\n                $scope.emailOnly = 1;\n              }\n            });\n          } else if ($scope.statusCheck == \"email\") {\n            //校验邮箱是否存在\n            userIdentifyService.repeatEmail($scope.formData.emailAddress, function (emailExist) {\n              if (emailExist.code == 0 && emailExist.data == true) {\n                //验证码校验\n                userIdentifyService.identifyNum($scope.identifyName, function (res) {\n                  if (res.code == 0 && res.data == true) {\n                    userIdentifyService.sendEmail($scope.formData.emailAddress, $scope.formData.password, function (address) {\n                      $scope.regShow = regId;\n                      console.log(\"发送邮件返回值---\" + JSON.stringify(address));\n                    });\n                  } else {\n                    $scope.emailOnly = 2; //生成验证码\n\n                    userIdentifyService.getIdentify(function (e) {\n                      if (e.code == 0) {\n                        $scope.imgCode = e.data;\n                      }\n                    });\n                  }\n                });\n              } else {\n                $scope.emailOnly = 1;\n              }\n            });\n          }\n        } else {\n          $scope.emailOnly = 2099;\n        }\n      }\n    };\n\n    if (urlCode[1] != undefined) {\n      var statusCode = urlCode[1];\n      console.log(\"code---\" + urlCode[1]);\n      userIdentifyService.identifyEmail(statusCode.split(\"=\")[1], function (identifyData) {\n        if (identifyData.code == 0) {\n          userIdentifyService.repeatEmail(identifyData.data.emailAddress, function (emailExist) {\n            console.log(\"emailExist---\" + JSON.stringify(emailExist));\n\n            if (emailExist.code == 0 && emailExist.data == false) {\n              //window.location.href=\"index.html#/index\";\n              $scope.regShow = 6;\n              $(\".steps\").hide();\n            } else {\n              console.log(\"countryRegion--\" + identifyData.data.countryRegion);\n              $scope.formData.emailAddress = identifyData.data.emailAddress;\n              $scope.formData.password = identifyData.data.countryRegion;\n              $(\".steps >ol >li:eq(1)\").addClass(\"active\");\n              $(\"#barvader\").css(\"width\", \"50%\");\n              $scope.regShow = '20000';\n            }\n          });\n        } else {\n          $scope.regShow = 5;\n        }\n      });\n    }\n  }]); //忘记密码\n\n  controllers.controller(\"forgetCtrl\", ['$scope', 'userIdentifyService', 'userUIService', '$interval', function ($scope, userIdentifyService, userUIService, $interval) {\n    $scope.forgetClick = \"1\";\n    $scope.emailOnly = \"\";\n    $scope.forgetList = {\n      'emailAddress': '',\n      'verify': '',\n      \"verifyEmail\": '',\n      'newPwd': '',\n      'confimPwd': ''\n    };\n    $scope.hideValidate = \"\";\n    $scope.phoneEmail = \"\";\n    $scope.verify = \"\";\n    $scope.statusCheck = \"\";\n    $scope.verifySuccess = \"0\";\n    $scope.$watch(\"forgetList.confimPwd\", function (newValue, oldValue) {\n      if (newValue != $scope.forgetList.newPwd) {\n        $scope.emailOnly = 4;\n      } else {\n        $scope.emailOnly = 0;\n      }\n    });\n    $scope.$watch(\"forgetList.newPwd\", function (newValue, oldValue) {\n      if (newValue == undefined) {\n        $scope.emailOnly = 333;\n      } else {\n        $scope.emailOnly = 0;\n      }\n    });\n    $scope.$watch(\"forgetList.verify\", function (newValue, oldValue) {\n      $scope.emailOnly = 0;\n    });\n    $scope.$watch(\"forgetList.verifyEmail\", function (newValue, oldValue) {\n      $scope.emailOnly = 0;\n    }); //生成验证码\n\n    userIdentifyService.getIdentify(function (identifyData) {\n      if (identifyData.code == 0) {\n        $scope.imgCode = identifyData.data;\n      }\n    });\n\n    $scope.codeCheck = function () {\n      var val = $scope.forgetList.verify;\n      var valLength = val.length;\n\n      if (valLength == 5) {\n        //验证码校验\n        userIdentifyService.identifyNum(val, function (res) {\n          if (res.code == 0 && res.data == true) {\n            $scope.verify = 'success';\n            $scope.emailOnly = \"0\";\n            $scope.verifySuccess = \"1\";\n          } else {\n            $scope.emailOnly = 2;\n            $scope.verify = \"error\";\n            $scope.verifySuccess = \"0\";\n            userIdentifyService.getIdentify(function (identifyData) {\n              if (identifyData.code == 0) {\n                $scope.imgCode = identifyData.data;\n              }\n            });\n          }\n        });\n      } else {\n        $scope.emailOnly = 2;\n        $scope.verifySuccess = \"0\";\n        $scope.verify = \"error\";\n      }\n    };\n\n    $scope.modeCheck = function () {\n      var val = $scope.forgetList.emailAddress;\n\n      if (val.match(/^([a-zA-Z0-9_\\.\\-])+\\@(([a-zA-Z0-9\\-])+\\.)+([a-zA-Z0-9]{2,4})+$/)) {\n        //校验邮箱是否存在\n        userIdentifyService.repeatEmail($scope.forgetList.emailAddress, function (emailExist) {\n          $scope.statusCheck = \"email\";\n\n          if (emailExist.code == 0 && emailExist.data == false) {\n            $scope.phoneEmail = \"\";\n          } else {\n            $scope.phoneEmail = 1001;\n            $scope.emailOnly = 1;\n          }\n        });\n      } else if (val.match(/^((1[3,5,8][0-9])|(14[5,7])|(17[0,6,7,8]))\\d{8}$/)) {\n        //校验手机号码是否存在\n        userUIService.checkMobilePhone($scope.forgetList.emailAddress, function (data) {\n          $scope.statusCheck = \"phone\";\n\n          if (data.code == 0 && data.data == true) {\n            $scope.emailOnly = 1;\n            $scope.phoneEmail = 1002;\n          } else {\n            $scope.phoneEmail = \"\";\n          }\n        });\n      } else if (val == '') {\n        $scope.emailOnly = 11; // $scope.phoneEmail=\"\";\n\n        $scope.statusCheck = '';\n        $scope.phoneEmail = \"\";\n      } else {\n        $scope.emailOnly = '111';\n        $scope.statusCheck = '';\n        $scope.phoneEmail = \"\";\n      }\n    };\n\n    $scope.blindClick = function () {\n      //生成验证码\n      $scope.imgCode = null;\n      userIdentifyService.getIdentify(function (identifyData) {\n        if (identifyData.code == 0) {\n          $scope.imgCode = identifyData.data;\n        }\n      });\n    };\n\n    $scope.t = 60;\n    var interval;\n    $scope.$watch(\"forgetList.emailAddress\", function (newValue, oldValue) {\n      $scope.emailOnly = \"0\";\n    });\n\n    $scope.emailSend = function () {\n      if ($scope.forgetList.emailAddress == \"\") {\n        $scope.emailOnly = 11;\n        return;\n      }\n\n      if ($scope.statusCheck == '') {\n        $scope.emailOnly = '111';\n        return;\n      }\n\n      if ($scope.phoneEmail == 1002 || $scope.phoneEmail == 1001) {\n        $scope.emailOnly = '1';\n        return;\n      }\n\n      if ($scope.forgetList.verify == \"\") {\n        $scope.emailOnly = '200';\n        return;\n      }\n\n      if ($scope.verify == \"error\") {\n        $scope.emailOnly = '2';\n        return;\n      }\n\n      if ($(\"#charge\").text() == \"获取验证码\") {\n        $(\"#charge\").attr({\n          \"disabled\": \"disabled\"\n        });\n\n        if ($scope.statusCheck == \"phone\") {\n          //手机发重置密码邮件\n          userIdentifyService.sendPasswordSMS($scope.forgetList.emailAddress, function (address) {\n            if (address.code == 0 && address.data == true) {\n              $scope.time = 60;\n              $interval.cancel();\n              interval = $interval(function () {\n                $scope.time--;\n\n                if ($scope.time == 0) {\n                  $(\"#charge\").removeAttr(\"disabled\");\n                  $(\"#charge\").text(\"获取验证码\");\n                  $scope.time = 60;\n                  $interval.cancel(interval); //$scope.emailSend = false;\n                } else {\n                  $(\"#charge\").text(\"\" + $scope.time + \"秒后，重新获取验证码\");\n                }\n              }, 1000);\n            } else if (address.code == 10008) {\n              $scope.emailOnly = \"1\";\n            }\n          });\n        } else if ($scope.statusCheck == \"email\") {\n          //发重置密码邮件\n          userIdentifyService.sendEmailPassword($scope.forgetList.emailAddress, function (address) {\n            if (address.code == 0 && address.data == true) {\n              $scope.time = 60;\n              $interval.cancel();\n              interval = $interval(function () {\n                $scope.time--;\n\n                if ($scope.time == 0) {\n                  $(\"#charge\").text(\"获取验证码\");\n                  $(\"#charge\").removeAttr(\"disabled\");\n                  $scope.time = 60;\n                  $interval.cancel(interval); //$scope.emailSend = false;\n                } else {\n                  $(\"#charge\").text(\"\" + $scope.time + \"秒后，重新获取验证码\");\n                }\n              }, 1000);\n            }\n          });\n        }\n      }\n    }; //runTiming();\n\n\n    $scope.forgetAjax = function () {\n      if ($scope.forgetList.newPwd == \"\") {\n        $scope.emailOnly = 311;\n        return;\n      }\n\n      if ($scope.forgetList.newPwd == undefined) {\n        return;\n      }\n\n      if ($scope.forgetList.confimPwd == \"\") {\n        $scope.emailOnly = 312;\n        return;\n      }\n\n      if ($scope.forgetList.confimPwd == undefined) {\n        return;\n      }\n\n      if ($scope.emailOnly == 4) {\n        return;\n      }\n\n      if ($scope.forgetList.newPwd != $scope.forgetList.confimPwd) {\n        $scope.emailOnly = 4;\n        return;\n      }\n\n      userIdentifyService.forgetPassword($scope.forgetList.emailAddress, $scope.hideValidate, $scope.forgetList.newPwd, function (emailExist) {\n        console.log(\"忘记密码保存--\" + JSON.stringify(emailExist));\n\n        if (emailExist.code == 0 && emailExist.data == true) {\n          $scope.forgetClick = \"4\";\n          $(\"#barvader\").css(\"width\", \"100%\");\n          $(\".steps >ol >li:eq(2)\").addClass(\"active\");\n          secTip();\n        }\n      });\n    };\n\n    var seed = 5; //60秒  \n\n    var tip = function tip() {\n      seed--;\n\n      if (seed > 0) {\n        $(\"#sec\").text(seed);\n        secTip();\n      } else {\n        window.location.href = \"../#/index\";\n      }\n    };\n\n    var secTip = function secTip() {\n      setTimeout(tip, 1000);\n    };\n\n    $scope.forgetStep = function (forNumber) {\n      if (forNumber == 2) {\n        if ($scope.forgetList.emailAddress == \"\") {\n          $scope.emailOnly = 11;\n          return;\n        }\n\n        if ($scope.statusCheck == '') {\n          $scope.emailOnly = '111';\n          return;\n        }\n\n        if ($scope.phoneEmail == 1002 || $scope.phoneEmail == 1001) {\n          $scope.emailOnly = '1';\n          return;\n        }\n\n        if ($scope.forgetList.verify == \"\") {\n          $scope.emailOnly = '200';\n          return;\n        }\n\n        if ($scope.verify == \"error\") {\n          $scope.emailOnly = '2';\n          return;\n        }\n\n        if ($scope.forgetList.verifyEmail != undefined && $scope.forgetList.verifyEmail != \"\") {\n          if ($scope.statusCheck == 'phone') {\n            userIdentifyService.identifyPasswordSMS($scope.forgetList.verifyEmail, function (codeData) {\n              if (codeData.code == 0) {\n                $scope.hideValidate = codeData.data;\n                $(\".steps >ol >li:eq(1)\").addClass(\"active\");\n                $(\"#barvader\").css(\"width\", \"50%\");\n                $scope.forgetClick = \"2\";\n              } else {\n                $scope.emailOnly = 3;\n              }\n            });\n          } else if ($scope.statusCheck == 'email') {\n            userIdentifyService.emailCheckPassword($scope.forgetList.verifyEmail, function (checkName) {\n              if (checkName.code == 0) {\n                $scope.hideValidate = checkName.data;\n                $scope.forgetClick = forNumber;\n                $(\".steps >ol >li:eq(1)\").addClass(\"active\");\n                $(\"#barvader\").css(\"width\", \"50%\");\n                $scope.forgetClick = \"2\";\n              } else {\n                $scope.emailOnly = 3;\n              }\n            });\n          }\n        } else {\n          $scope.emailOnly = 30001;\n        }\n      } else if (forNumber == 3) {\n        userLoginUIService.emailCheckPassword($scope.forgetList.verifyEmail, function (checkName) {\n          if (checkName.code == 0) {\n            $scope.hideValidate = checkName.data;\n            $scope.forgetClick = forNumber;\n            $(\".mod-sub-nav > li\").removeClass(\"list2-active\");\n            $(\".mod-sub-nav > li:eq(2)\").addClass(\"list3-active\");\n          } else {\n            $scope.emailOnly = 3;\n          }\n        });\n      }\n    };\n  }]);\n});"],"sourceRoot":"/source/"}