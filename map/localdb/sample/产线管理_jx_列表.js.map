{"version":3,"sources":["localdb/sample/产线管理_jx_列表.js"],"names":["expression","theme","on","init","event","target","scope","getRootScope","resource","getValue","getAllUserInfo","roleList","forEach","ele","roleID","indexOf","push","taskStatusAry","id","label","format","name","composory","index","render","data","type","full","item","myDicts","constructionType","find","valueCode","popuptype","selectId","selectLabel","options","baowuProjectCategory","executionCycle","msWorkType","highDangerLevel","qualityLevel","msTheMark","hide","userID","userName","stretch","content","icon","click","row","columnIndex","popupHandler","deleteMaintainStandardTask","returnObj","code","growl","readerData","format2","manual","text","path","btnstatus","inputparam","status","maintainStandard","elem","fileList","fmt","fileName","filePath","obj","filter","undefined","colnum","createSystemPopupByLocalPath","width","title","submit","destroy","statuc","fileObj","hasOwnProperty","i","length","splice","value","qualifiedName","addMaintainStandardTask","extendParam","paras4list","deviceId","ticketCategory","standardProjectId","projectCategory","getTaskBySimpleConditionAndPage","workArray","tablefmt","map","popupaddclick","$on","listsearchclick","param","args"],"mappings":"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","file":"localdb/sample/产线管理_jx_列表.js","sourcesContent":["expression = {\n  \"theme\": \"dark\",\n  \"on\": {\n    \"init\": function init(event) {\n      var target = event.target;\n      var scope = target.getRootScope();\n      var resource = target.getValue(\"global/resource\"); // 获取所有的用户\n\n      var values = {\n        \"totalUseTime\": \"\"\n      };\n      var getAllUserInfo = target.getRootScope(\"getAllUserInfo\");\n      var roleList = [];\n      getAllUserInfo.forEach(function (ele) {\n        if (ele.roleID) {\n          if (ele.roleID.indexOf(\"127260997560018\") > -1) {\n            roleList.push(ele);\n          }\n        }\n      });\n      var taskStatusAry = [{\n        id: 0,\n        label: \"启用\"\n      }, {\n        id: 1,\n        label: \"停用\"\n      }];\n      var format = [{\n        name: \"standardProjectId\",\n        //values.totalPerpsonNum   standardProjectId\n        label: \"标准项目编号\",\n        composory: true,\n        index: 0\n      }, {\n        name: \"standardProjectName\",\n        label: \"标准项目名称\",\n        composory: true,\n        index: 1\n      }, {\n        name: \"constructionType\",\n        label: \"施工类别\",\n        composory: true,\n        render: function render(data, type, full) {\n          var item;\n\n          if (scope.myDicts.constructionType) {\n            item = scope.myDicts.constructionType.find(function (item) {\n              if (item.valueCode == data) return item;\n            });\n          }\n\n          if (item) {\n            return item.label;\n          }\n\n          return data;\n        },\n        popuptype: \"select\",\n        selectId: \"valueCode\",\n        selectLabel: \"label\",\n        options: scope.myDicts.constructionType,\n        index: 3\n      }, {\n        name: \"projectCategory\",\n        label: \"项目类别\",\n        composory: true,\n        render: function render(data, type, full) {\n          var item;\n\n          if (scope.myDicts.baowuProjectCategory) {\n            item = scope.myDicts.baowuProjectCategory.find(function (item) {\n              if (item.valueCode == data) return item;\n            });\n          }\n\n          if (item) {\n            return item.label;\n          }\n\n          return data;\n        },\n        popuptype: \"select\",\n        selectId: \"valueCode\",\n        selectLabel: \"label\",\n        options: scope.myDicts.baowuProjectCategory,\n        index: 5\n      }, {\n        name: \"executionCycle\",\n        label: \"周期单位\",\n        composory: true,\n        popuptype: \"select\",\n        selectId: \"valueCode\",\n        selectLabel: \"label\",\n        options: scope.myDicts.executionCycle,\n        render: function render(data, type, full) {\n          var item;\n\n          if (scope.myDicts.executionCycle) {\n            item = scope.myDicts.executionCycle.find(function (item) {\n              if (item.valueCode == data) return item;\n            });\n          }\n\n          if (item) {\n            return item.label;\n          }\n\n          return data;\n        },\n        index: 12\n      }, {\n        name: \"cycleNum\",\n        label: \"周期间隔\",\n        composory: true,\n        index: 13\n      }, {\n        name: \"workType\",\n        label: \"工事分类\",\n        composory: true,\n        render: function render(data, type, full) {\n          var item;\n\n          if (scope.myDicts.msWorkType) {\n            item = scope.myDicts.msWorkType.find(function (item) {\n              if (item.valueCode == data) return item;\n            });\n          }\n\n          if (item) {\n            return item.label;\n          }\n\n          return data;\n        },\n        popuptype: \"select\",\n        selectId: \"valueCode\",\n        selectLabel: \"label\",\n        options: scope.myDicts.msWorkType,\n        index: 4\n      }, {\n        name: \"highDangerLevel\",\n        label: \"高危等级\",\n        render: function render(data, type, full) {\n          var item;\n\n          if (scope.myDicts.highDangerLevel) {\n            item = scope.myDicts.highDangerLevel.find(function (item) {\n              if (item.valueCode == data) return item;\n            });\n          }\n\n          if (item) {\n            return item.label;\n          }\n\n          return data;\n        },\n        popuptype: \"select\",\n        selectId: \"valueCode\",\n        selectLabel: \"label\",\n        options: scope.myDicts.highDangerLevel,\n        index: 6\n      }, {\n        name: \"qualityLevel\",\n        label: \"质量层级\",\n        composory: true,\n        render: function render(data, type, full) {\n          var item;\n\n          if (scope.myDicts.qualityLevel) {\n            item = scope.myDicts.qualityLevel.find(function (item) {\n              if (item.valueCode == data) return item;\n            });\n          }\n\n          if (item) {\n            return item.label;\n          }\n\n          return data;\n        },\n        popuptype: \"select\",\n        selectId: \"valueCode\",\n        selectLabel: \"label\",\n        options: scope.myDicts.qualityLevel,\n        index: 9\n      }, {\n        name: \"theMark\",\n        label: \"双高/精度/离线标记\",\n        render: function render(data, type, full) {\n          var item;\n\n          if (scope.myDicts.msTheMark) {\n            item = scope.myDicts.msTheMark.find(function (item) {\n              if (item.valueCode == data) return item;\n            });\n          }\n\n          if (item) {\n            return item.label;\n          }\n\n          return data;\n        },\n        popuptype: \"select\",\n        selectId: \"valueCode\",\n        selectLabel: \"label\",\n        options: scope.myDicts.msTheMark,\n        hide: true,\n        index: 7\n      }, {\n        name: \"executioner\",\n        label: \"点检员\",\n        composory: true,\n        popuptype: \"select\",\n        selectId: \"userID\",\n        selectLabel: \"userName\",\n        options: roleList,\n        render: function render(data, type, full) {\n          var item;\n\n          if (roleList) {\n            var item = roleList.find(function (item) {\n              if (item.userID == data) return item;\n            });\n          }\n\n          if (item) {\n            return item.userName;\n          }\n\n          return data;\n        },\n        index: 2\n      }, {\n        name: \"suggesTeamCode\",\n        label: \"建议施工班组\",\n        composory: true,\n        index: 8\n      }, {\n        name: \"firstExecutionTime\",\n        hide: true,\n        label: \"开始时间\",\n        composory: true,\n        type: \"date\",\n        popuptype: \"datePicker\",\n        index: 14\n      }, {\n        name: \"taskStatus\",\n        label: \"是否启用\",\n        popuptype: \"select\",\n        selectId: \"id\",\n        selectLabel: \"label\",\n        options: taskStatusAry,\n        render: function render(data, type, full) {\n          var item = taskStatusAry.find(function (item) {\n            if (item.id == data) return item;\n          });\n\n          if (item) {\n            return item.label;\n          }\n\n          return data;\n        },\n        index: 15\n      }, {\n        name: \"totalPerpsonNum\",\n        label: \"总人数\",\n        composory: true,\n        hide: true,\n        index: 16\n      }, {\n        name: \"totalUseTime\",\n        label: \"总工时(h)\",\n        hide: true,\n        composory: true,\n        index: 17\n      }, {\n        name: \"specialDeviceNo\",\n        label: \"特种设备编号\",\n        hide: true,\n        index: 10\n      }, {\n        name: \"workContent\",\n        label: \"工作内容\",\n        composory: true,\n        stretch: true,\n        hide: true,\n        index: 11\n      }, {\n        label: \"操作\",\n        type: \"buttonGroup\",\n        content: [{\n          label: \"详情\",\n          icon: \"null\",\n          on: {\n            click: function click(index, row, columnIndex) {\n              popupHandler(index.row, 0);\n            }\n          }\n        }, {\n          label: \"编辑\",\n          icon: \"null\",\n          on: {\n            click: function click(index, row, columnIndex) {\n              popupHandler(index.row, 1);\n            }\n          }\n        }, {\n          label: \"删除\",\n          icon: \"null\",\n          on: {\n            click: function click(index, row, columnIndex) {\n              target.deleteMaintainStandardTask(index.row.id, function (returnObj) {\n                if (returnObj.code == 0) {\n                  target.growl(\"删除成功\");\n                  readerData();\n                }\n              });\n            }\n          }\n        }]\n      }];\n      var format2 = [{\n        name: \"maintainStandard.referenceImageNumber\",\n        label: \"参考图号\",\n        index: 0\n      }, {\n        name: \"1\",\n        label: \"维修作业标准\",\n        popuptype: \"uploadFile2\",\n        stretch: true,\n        manual: true,\n        text: \"\",\n        //文件的名称\n        path: \"\",\n        //文件的路径\n        btnstatus: \"delete,download\",\n        index: 1\n      }, {\n        name: \"2\",\n        label: \"质量层级表\",\n        popuptype: \"uploadFile2\",\n        stretch: true,\n        manual: true,\n        text: \"\",\n        //文件的名称\n        path: \"\",\n        //文件的路径\n        btnstatus: \"delete,download\",\n        index: 4\n      }, {\n        name: \"3\",\n        label: \"高危技术方案\",\n        popuptype: \"uploadFile2\",\n        stretch: true,\n        manual: true,\n        text: \"\",\n        //文件的名称\n        path: \"\",\n        //文件的路径\n        btnstatus: \"delete,download\",\n        index: 5\n      }, {\n        name: \"4\",\n        label: \"检修安全技术交底\",\n        popuptype: \"uploadFile2\",\n        stretch: true,\n        manual: true,\n        text: \"\",\n        //文件的名称\n        path: \"\",\n        //文件的路径\n        btnstatus: \"delete,download\",\n        index: 3\n      }, {\n        name: \"5\",\n        label: \"工时工序表\",\n        stretch: true,\n        popuptype: \"uploadFile2\",\n        manual: true,\n        text: \"\",\n        //文件的名称\n        path: \"\",\n        //文件的路径\n        btnstatus: \"delete,download\",\n        index: 2\n      }];\n\n      var render = function render(workArray) {\n        //只有让有hide=false的传递到datatable\n        var tablefmt = format.filter(function (fmt) {\n          if (!fmt.hide) return fmt;\n        });\n        target.render({\n          data: workArray,\n          format: tablefmt.map(function (elem) {\n            return {\n              \"name\": elem.label,\n              \"value\": elem.name,\n              \"type\": elem.type || \"text\",\n              \"content\": elem.content,\n              \"render\": elem.render\n            };\n          })\n        });\n      };\n\n      var popupHandler = function popupHandler(inputparam, status) {\n        if (!inputparam.maintainStandard) inputparam.maintainStandard = {};\n        format2.forEach(function (elem) {\n          elem.text = \"\";\n          elem.path = \"\";\n        });\n\n        if (inputparam.maintainStandard.fileList) {\n          inputparam.maintainStandard.fileList.forEach(function (item) {\n            format2.forEach(function (fmt) {\n              if (item.type == fmt.name) {\n                fmt.text = item.fileName;\n                fmt.path = item.filePath;\n              }\n            });\n          });\n        } //只有让有index的传递到popup\n\n\n        var objfmt = format.filter(function (fmt) {\n          if (fmt.index != undefined) return fmt;\n        });\n        var objfmt2 = format2.filter(function (fmt) {\n          if (fmt.index != undefined) return fmt;\n        });\n        var obj = {\n          resource: inputparam,\n          format: objfmt,\n          format2: objfmt2,\n          status: status,\n          colnum: 3\n        };\n        target.createSystemPopupByLocalPath(\"popup\", {\n          width: \"80%\",\n          title: \"检修信息\",\n          on: {\n            submit: function submit(data, destroy) {\n              if (data.statuc == \"success\" && data.data) {\n                format2.forEach(function (fmt) {\n                  var fileObj = {\n                    type: fmt.name //如果有这个属性，进入处理是修改还是删除\n\n                  };\n\n                  if (data.data.hasOwnProperty(fmt.name)) {\n                    //清空这个type的所有已有设置\n                    if (!data.data.maintainStandard.fileList) data.data.maintainStandard.fileList = [];\n\n                    for (var i = data.data.maintainStandard.fileList.length - 1; i > -1; i--) {\n                      if (data.data.maintainStandard.fileList[i].type == fmt.name) {\n                        data.data.maintainStandard.fileList.splice(i, 1);\n                      }\n                    }\n\n                    if (data.data[fmt.name]) {\n                      //如果这个属性有值，那么进行增加和修改的操作\n                      fileObj.label = fmt.label;\n                      fileObj.fileName = data.data[fmt.name].label;\n                      fileObj.filePath = data.data[fmt.name].value.qualifiedName;\n                      data.data.maintainStandard.fileList.push(fileObj);\n                    }\n                  }\n                });\n                target.addMaintainStandardTask(data.data, function (returnObj) {\n                  if (returnObj) {\n                    target.growl(\"保存成功\");\n                    readerData();\n                    if (destroy) destroy();\n                  }\n                });\n              }\n            }\n          }\n        }, obj);\n      };\n\n      var extendParam = {};\n\n      var readerData = function readerData() {\n        var paras4list = {\n          deviceId: resource.id,\n          ticketCategory: \"120\"\n        };\n\n        if (extendParam) {\n          paras4list.standardProjectId = extendParam.standardProjectId;\n          paras4list.constructionType = extendParam.constructionType;\n          paras4list.projectCategory = extendParam.projectCategory;\n        }\n\n        target.getTaskBySimpleConditionAndPage(paras4list, function (returnObj) {\n          render(returnObj.data);\n        });\n      }; //监听别的地方告诉我添加\n\n\n      if (scope.popupaddclick) {\n        scope.popupaddclick();\n        scope.popupaddclick = null;\n      }\n\n      scope.popupaddclick = scope.$on(\"POPUPADDCLICK\", function () {\n        format2.filter(function (fmt) {\n          fmt.text = \"\";\n          fmt.path = \"\";\n        });\n        popupHandler({\n          maintainStandard: {\n            fileList: []\n          },\n          deviceId: resource.id\n        }, 1);\n      });\n\n      if (scope.listsearchclick) {\n        scope.listsearchclick();\n        scope.listsearchclick = null;\n      }\n\n      scope.listsearchclick = scope.$on(\"LISTSEARCHCLICK\", function (param, args) {\n        extendParam = args;\n        readerData();\n      });\n\n      if (resource) {\n        readerData();\n      }\n\n      target.on(\"tree_resourceChange\", function (obj) {\n        resource = obj.resource;\n        readerData();\n      });\n    }\n  }\n};"],"sourceRoot":"/source/"}