{"version":3,"sources":["localdb/sample/检修委托_列表上.js"],"names":["expression","theme","on","init","event","target","Dictionary","customName","devName","deviceCode","message","appName","sendTimeUTC","tickeTaskStatusName","getTableData1","e","params","categorys","taskStatus","nodeIds","resource","id","sendBeginTime","firstTimeFrom","sendEndTime","firstTimeTo","getTicketTasksByCondition","tc","datas","forEach","ele","getdomainNameHandler","variables","ticket","projectDomains","device","externalDevId","ticketTitle","category","useMomentFormat","sendTime","tickeTaskStatus","values","push","advsearch","format","i","item","explainDic","name","type","value","options","待处理","content","label","icon","class","click","elem","createSystemPopupByLocalPath","width","title","row","render","待评价","data","getValue","time"],"mappings":"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","file":"localdb/sample/检修委托_列表上.js","sourcesContent":["expression = {\n  \"theme\": \"dark\",\n  \"on\": {\n    \"init\": function init(event) {\n      var target = event.target; //--------------------------自定义输入-----------------------------\n      //自定义输入\n\n      var Dictionary = {\n        customName: \"产线\",\n        devName: \"设备信息\",\n        deviceCode: \"设备编码\",\n        message: \"任务信息\",\n        appName: \"计划来源\",\n        sendTimeUTC: \"任务接收时间\",\n        tickeTaskStatusName: \"任务状态\"\n      }; // 获取字典查专业\n      //   var propsList = target.getRootScope(\"myDicts\")[\"specialtyProps\"];\n      // 获取设备id\n\n      function getTableData1(e) {\n        var params = {\n          \"categorys\": \"120,130,210\",\n          \"taskStatus\": 10,\n          \"nodeIds\": resource.id,\n          \"sendBeginTime\": e ? e.firstTimeFrom : \"\",\n          \"sendEndTime\": e ? e.firstTimeTo : \"\"\n        };\n        target.getTicketTasksByCondition(params, function (tc) {\n          var datas = [];\n          var tableData = tc;\n          tableData.forEach(function (ele) {\n            ele.customName = target.getdomainNameHandler(ele.variables.ticket.projectDomains, [])[3];\n            ele.devName = ele.variables.devName;\n            ele.deviceCode = ele.variables.device.externalDevId;\n            ele.message = ele.ticketTitle;\n            ele.appName = ele.variables.ticket.category;\n\n            if (ele.variables.ticket.category == \"120\") {\n              ele.appName = \"检修计划\";\n            } else if (ele.variables.ticket.category == \"100\") {\n              ele.appName = \"当日点检\";\n            } else if (ele.variables.ticket.category == \"110\") {\n              ele.appName = \"精密检测\";\n            } else if (ele.variables.ticket.category == \"130\") {\n              ele.appName = \"点检异常\";\n            } else if (ele.variables.ticket.category == \"140\") {\n              ele.appName = \"备修委托\";\n            } else if (ele.variables.ticket.category == \"210\") {\n              ele.appName = \"临时委托\";\n            }\n\n            ele.sendTimeUTC = useMomentFormat(ele.sendTime, \"yyyy-MM-dd hh:mm:ss\");\n            ele.tickeTaskStatus = ele.variables.ticket.values.tickeTaskStatus;\n\n            if (ele.variables.ticket.values.tickeTaskStatus == \"dealing\") {\n              ele.tickeTaskStatusName = \"待处理\";\n            } else {\n              ele.tickeTaskStatusName = \"待评价\";\n            }\n\n            datas.push(ele);\n          });\n          success(datas);\n        });\n      }\n\n      var resource = target.getValue(\"global/resource\");\n\n      if (resource) {\n        getTableData1();\n      }\n\n      target.on(\"tree_resourceChange\", function (e) {\n        resource = e.resource;\n        getTableData1();\n      }); // 点击查询按钮debugger\n\n      target.on(\"queryTabelList1\", function (time) {\n        getTableData1(time);\n      }); //--------------------------自定义输入-----------------------------\n      //注意，下面内容别动！！！\n\n      function success(datas) {\n        var render = function render(advsearch) {\n          var format = [];\n\n          for (var i in Dictionary) {\n            var item = target.explainDic(i, Dictionary[i]);\n            format.push(item);\n          }\n\n          format.push({\n            name: \"操作\",\n            type: \"valueBased\",\n            value: \"tickeTaskStatusName\",\n            options: {\n              \"待处理\": {\n                name: \"操作\",\n                type: \"buttonGroup\",\n                content: [{\n                  label: \"发起委托\",\n                  icon: \"null\",\n                  class: \"btn btn-default btn-sm\",\n                  on: {\n                    click: function click(elem) {\n                      target.createSystemPopupByLocalPath(\"page4\", {\n                        width: \"800px\",\n                        title: \"发起委托\"\n                      }, elem.row);\n                    }\n                  }\n                }, {\n                  label: \"自行处理\",\n                  icon: \"null\",\n                  class: \"btn btn-default btn-sm\",\n                  on: {\n                    click: function click(elem) {\n                      target.createSystemPopupByLocalPath(\"page5\", {\n                        width: \"800px\",\n                        title: \"自行处理\"\n                      }, elem.row);\n                    }\n                  }\n                }, {\n                  label: \"暂不处理\",\n                  icon: \"null\",\n                  class: \"btn btn-default btn-sm\",\n                  on: {\n                    click: function click(elem) {\n                      target.createSystemPopupByLocalPath(\"page6\", {\n                        width: \"800px\",\n                        title: \"暂不处理\"\n                      }, elem.row);\n                    }\n                  }\n                }],\n                render: function render() {\n                  return \"\";\n                }\n              },\n              \"待评价\": {\n                name: \"操作\",\n                type: \"buttonGroup\",\n                content: [{\n                  label: \"评价验收\",\n                  icon: \"null\",\n                  class: \"btn btn-default btn-sm\",\n                  on: {\n                    click: function click(elem) {\n                      target.createSystemPopupByLocalPath(\"page10\", {\n                        width: \"800px\",\n                        title: \"验收与评价\"\n                      }, elem.row);\n                    }\n                  }\n                }],\n                render: function render() {\n                  return \"\";\n                }\n              }\n            }\n          });\n          target.render({\n            data: datas,\n            format: format\n          });\n        };\n\n        render();\n      }\n\n      ;\n    }\n  }\n};"],"sourceRoot":"/source/"}