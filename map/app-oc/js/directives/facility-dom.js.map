{"version":3,"sources":["app-oc/js/directives/facility-dom.js"],"names":["define","directives","BootstrapDialog","datatables","jszip","initDirective","$timeout","$compile","$filter","growl","weatherService","actionService","restrict","controller","$scope","$element","$attrs","table","domMain","window","JSZip","$on","Event","CMDBINFOSINIT","event","args","destroy","empty","defaultColumns","defaultcolumnDefs","exportOptionsCol","baseConfig","customerConfig","display","userInfo","subDomain","push","data","title","menuitems","label","orderable","targets","length","render","type","full","str","customers","customersList","i","id","text","projectConfig","projects","projectsList","undefined","rootModelDic","gatewayId","escape","severityStr","severityBg","domainListDic","name","calculateDic","queryKeyValue","forEach","querykey","dataType","values","calculate","total","$","ProudSmart","datatable","optionCol2","modelId","addmenu","visible","DataTable","dom","footerdom","language","processing","serverSide","aaSorting","ajax","pipeline","columns","columnDefs","pageLength","selLength","rowCallback","nRow","aData","iDataIndex","drawCallback","settings","api","this","footerHtml","index","each","d","cdata","replace","points","toString","split","toFixed","show","_buttons","fn","dataTable","Buttons","buttons","extend","exportOptions","container","appendTo","append","hide","on","e","preventDefault","tr","closest","row","look","len","fnData","socketList","reload","UNITTYPEINIT","console","log","registerTypeList","put","modbusByteOrders","l","v","stopPropagation","isEdit","cells","invalidate","select","allGateways","access","physical","allDataItems","f","faultSave","val","doAction","warning","gatewaysVal"],"mappings":"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","file":"app-oc/js/directives/facility-dom.js","sourcesContent":["define(['directives/directives', 'bootstrap-dialog', 'datatables.buttons.html5', 'jszip', 'datatables.net-select'], function (directives, BootstrapDialog, datatables, jszip) {\n  'use strict';\n\n  directives.initDirective('facilityInfoTable', ['$timeout', '$compile', '$filter', 'growl', 'weatherService', 'actionService', function ($timeout, $compile, $filter, growl, weatherService, actionService) {\n    return {\n      restrict: 'A',\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        var domMain = $element;\n        var table;\n        window.JSZip = jszip;\n        $scope.$on(Event.CMDBINFOSINIT + \"_facility\", function (event, args) {\n          if (table) {\n            table.destroy();\n            domMain.empty();\n          }\n\n          var defaultColumns = [];\n          var defaultcolumnDefs = [];\n          var exportOptionsCol = [];\n\n          if ($scope.baseConfig.customerConfig.display && !$scope.userInfo.subDomain) {\n            defaultColumns.push({\n              data: \"customerId\",\n              title: $scope.menuitems[\"S12\"] && $scope.menuitems[\"S12\"].label ? $scope.menuitems[\"S12\"].label : \"客户\",\n              orderable: false\n            });\n            defaultcolumnDefs.push({\n              targets: defaultColumns.length - 1,\n              data: \"customerId\",\n              render: function render(data, type, full) {\n                var str = \"\";\n\n                if (data != 0 && data != \"\" && data != null) {\n                  var customers = $scope.customersList;\n\n                  for (var i in customers) {\n                    if (customers[i].id == data) {\n                      str = customers[i].text;\n                      break;\n                    }\n                  }\n                }\n\n                return str;\n              }\n            });\n          }\n\n          ;\n\n          if ($scope.baseConfig.projectConfig.display) {\n            defaultColumns.push({\n              data: \"projectId\",\n              orderable: false,\n              title: $scope.menuitems[\"S13\"] && $scope.menuitems[\"S13\"].label ? $scope.menuitems[\"S13\"].label : \"项目\"\n            });\n            defaultcolumnDefs.push({\n              targets: defaultColumns.length - 1,\n              data: \"projectId\",\n              render: function render(data, type, full) {\n                var str = \"\";\n\n                if (data != 0 && data != \"\" && data != null) {\n                  var projects = $scope.projectsList;\n\n                  for (var i in projects) {\n                    if (projects[i].id == data) {\n                      str = projects[i].text;\n                      break;\n                    }\n                  }\n                }\n\n                return str;\n              }\n            });\n          }\n\n          defaultColumns.push({\n            data: \"modelId\",\n            orderable: false,\n            title: \"设备模板\"\n          });\n          defaultcolumnDefs.push({\n            targets: defaultColumns.length - 1,\n            data: \"modelId\",\n            render: function render(data, type, full) {\n              var str = \"\";\n\n              if (data != \"\" && data != undefined) {\n                if ($scope.rootModelDic[data] != undefined) {\n                  str = $scope.rootModelDic[data].label;\n                }\n\n                if ($scope.menuitems['A01_S02']) {\n                  str = \"<a href='#/lookModel/\" + data + \"'>\" + str + \"</a>\";\n                }\n              }\n\n              return str;\n            }\n          });\n          defaultColumns.push({\n            data: \"label\",\n            orderable: false,\n            title: \"设备名称\"\n          });\n          defaultcolumnDefs.push({\n            targets: defaultColumns.length - 1,\n            data: \"label\",\n            render: function render(data, type, full) {\n              var str = '';\n\n              if ($scope.menuitems['A05_S02']) {\n                str = \"<a href='#/facility_detail/DETAIL/\" + full.gatewayId + \"/\" + full.id + \"'>\" + data + \"</a>\";\n              } else {\n                str = data;\n              }\n\n              return str;\n            }\n          });\n          defaultColumns.push({\n            data: \"sn\",\n            orderable: false,\n            title: \"设备序列号\"\n          });\n          defaultcolumnDefs.push({\n            targets: defaultColumns.length - 1,\n            data: \"sn\",\n            render: function render(data, type, full) {\n              return escape(data);\n            }\n          });\n          defaultColumns.push({\n            data: \"onlineStatus\",\n            orderable: false,\n            title: \"在线状态\"\n          });\n          defaultcolumnDefs.push({\n            targets: defaultColumns.length - 1,\n            data: \"onlineStatus\",\n            render: function render(data, type, full) {\n              var severityStr = \"无数据\";\n              var severityBg = \"bg-gray\";\n\n              if (data == 0) {\n                severityStr = \"离线\";\n                severityBg = \"label-warning\";\n              } else if (data == 1) {\n                severityStr = \"在线\";\n                severityBg = \"label-primary\";\n              }\n\n              return \"<span class='label \" + severityBg + \"'  style='color: #ffffff !important;'>\" + severityStr + \"</span>\";\n            }\n          });\n          defaultColumns.push({\n            data: \"severity\",\n            orderable: false,\n            title: \"故障状态\"\n          });\n          defaultcolumnDefs.push({\n            targets: defaultColumns.length - 1,\n            data: \"severity\",\n            render: function render(data, type, full) {\n              var severityStr = \"无数据\";\n              var severityBg = \"bg-gray\";\n\n              if (data == 4) {\n                severityStr = \"严重\";\n                severityBg = \"bg-alarm-critical\";\n              } else if (data == 3) {\n                severityStr = \"重要\";\n                severityBg = \"bg-alarm-major\";\n              } else if (data == 2) {\n                severityStr = \"次要\";\n                severityBg = \"bg-alarm-minor\";\n              } else if (data == 1) {\n                severityStr = \"警告\";\n                severityBg = \"bg-alarm-warning\";\n              } else if (data < 1) {\n                severityStr = \"正常\";\n                severityBg = \"progress-bar-success\";\n              }\n\n              return \"<span class='label \" + severityBg + \"' style='color: #ffffff !important;'>\" + severityStr + \"</span>\";\n            }\n          });\n          defaultColumns.push({\n            data: \"domainPath\",\n            orderable: false,\n            title: \"管理域\"\n          });\n          defaultcolumnDefs.push({\n            targets: defaultColumns.length - 1,\n            data: \"domainPath\",\n            render: function render(data, type, full) {\n              var str = \"\";\n\n              if ($scope.domainListDic[data] != undefined && $scope.domainListDic[data]) {\n                str = $scope.domainListDic[data].name;\n              }\n\n              return str;\n            }\n          });\n          var calculateDic = null;\n\n          if ($scope.queryKeyValue) {\n            $scope.queryKeyValue.forEach(function (querykey) {\n              if (querykey.dataType == 'numberic' && querykey.values && querykey.values.calculate == \"1\") {\n                if (!calculateDic) calculateDic = {};\n                calculateDic[defaultColumns.length] = querykey;\n                calculateDic[defaultColumns.length].total = 0;\n              }\n\n              defaultColumns.push({\n                data: \"values.\" + querykey.name + \"\",\n                title: querykey.label\n              });\n              defaultcolumnDefs.push({\n                \"targets\": defaultColumns.length - 1,\n                //                \"data\": querykey.name,\n                \"render\": function render(data, type, full) {\n                  var str = '';\n\n                  if (full.values[querykey.name]) {\n                    if (querykey.dataType == 'datetime') {\n                      str = $filter('date')(full.values[querykey.name], 'yyyy-MM-dd HH:mm:ss');\n                    } else if (querykey.dataType == 'date') {\n                      str = $filter('date')(full.values[querykey.name], 'yyyy-MM-dd');\n                    } else {\n                      str = full.values[querykey.name];\n                    }\n                  }\n\n                  return str;\n                }\n              });\n            });\n          }\n\n          defaultColumns.push($.ProudSmart.datatable.optionCol2);\n          defaultcolumnDefs.push({\n            \"targets\": defaultColumns.length - 1,\n            \"data\": \"option\",\n            \"render\": function render(data, type, full) {\n              // 返回自定义内容\n              var str = \"<div class='btn-group btn-group-sm'>\";\n\n              if ($scope.menuitems['A05_S02']) {\n                str += \"<button id='edit-btn'   class='btn btn-primary' ><i class='fa fa-edit hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 查看</span></button>\";\n              }\n\n              if ($scope.menuitems['A06_S02'] || $scope.menuitems['A03_S02'] || $scope.menuitems['A04_S02'] || $scope.menuitems['A02_S02']) {\n                str += \"<button type='button'  class='btn btn-default dropdown-toggle' data-toggle='dropdown'> 更多<span class='caret'></span></button>\";\n              }\n\n              str += \"<ul class='dropdown-menu' role='menu'>\";\n\n              if ($scope.menuitems['A06_S02']) {\n                str += \"<li><a role='button' href='#/facility_panel/[{\\\"modelId\\\":\" + full.modelId + \",\\\"resourceId\\\":\" + full.id + \"}]'>仪表板</a></li>\";\n              }\n\n              if ($scope.menuitems['A03_S02']) {\n                str += \"<li><a role='button' href='#/emcsView/\" + full.id + \"'>数据监测</a></li>\";\n              }\n\n              if ($scope.menuitems['A02_S02']) {\n                str += \"<li><a role='button' href='#/configAlert/\" + full.id + \"/node'>告警查看</a></li>\";\n              }\n\n              if ($scope.menuitems['A04_S02']) {\n                str += \"<li><a role='button' href='#/alertRules/\" + full.id + \"'>告警规则</a></li>\";\n              }\n\n              str += actionService.addmenu(\"facility\", full); // str += \"<li><a role='button'  href='#/facility_detail/DEPLOY/\"+full.gatewayId+\"/\"+full.id+\"'>存储配置</a></li>\";\n\n              str += \"</ul></div>\";\n              return str;\n            }\n          });\n          defaultColumns.push({\n            data: \"createTime\",\n            orderable: false,\n            visible: false\n          }); //设置可以打印的下标\n\n          for (var i = 0; i < defaultColumns.length - 2; i++) {\n            exportOptionsCol.push(i);\n          }\n\n          table = domMain.DataTable({\n            dom: '<\"row\"<\"col-sm-6 margin-bottom-10\">>' + $.ProudSmart.datatable.footerdom,\n            language: $.ProudSmart.datatable.language,\n            processing: true,\n            serverSide: true,\n            // scrollX:true,\n            aaSorting: [[defaultColumns.length - 1, \"desc\"]],\n            ajax: $scope.pipeline(),\n            columns: defaultColumns,\n            columnDefs: defaultcolumnDefs,\n            \"pageLength\": $scope.selLength,\n            rowCallback: function rowCallback(nRow, aData, iDataIndex) {\n              $compile(nRow)($scope);\n            },\n            drawCallback: function drawCallback(settings) {\n              var api = this.api();\n\n              var intVal = function intVal(i) {\n                return typeof i === 'string' ? i.replace(/[\\$,]/g, '') * 1 : typeof i === 'number' ? i : 0;\n              };\n\n              if (api.data().length > 0) {\n                var footerHtml = \"\";\n\n                for (var index in calculateDic) {\n                  calculateDic[index].total = 0;\n                } // Total over this page\n\n\n                if (calculateDic) {\n                  footerHtml = \"<span class='pull-right'><b>统计数据:</b>\";\n                  api.data().each(function (d) {\n                    for (var index in calculateDic) {\n                      var cdata = d.values[calculateDic[index].name];\n                      calculateDic[index].total += intVal(cdata);\n                    }\n                  });\n\n                  for (var index in calculateDic) {\n                    var points = calculateDic[index].total.toString().split(\".\");\n\n                    if (points.length > 1) {\n                      if (points[1].length > 4) {\n                        footerHtml += \"【\" + calculateDic[index].label + \":\" + calculateDic[index].total.toFixed(4) + \"】\";\n                      } else {\n                        footerHtml += \"【\" + calculateDic[index].label + \":\" + calculateDic[index].total + \"】\";\n                      }\n                    } else {\n                      footerHtml += \"【\" + calculateDic[index].label + \":\" + calculateDic[index].total + \"】\";\n                    }\n                  }\n\n                  footerHtml += \"</span>\";\n                }\n\n                $(\".footerdom\").show();\n                $(\".dataTables_wrapper .col-sm-6\").show();\n                $(\".dataTables_wrapper .col-sm-6\").empty();\n\n                if (settings._buttons != undefined) {\n                  settings._buttons = \"\";\n                }\n\n                new $.fn.dataTable.Buttons(table, {\n                  buttons: [{\n                    extend: 'excel',\n                    title: '设备信息导出',\n                    text: '<i class=\"fa fa-download\"></i><span class=\"hidden-xs\"> 导出查询结果</span>',\n                    exportOptions: {\n                      columns: exportOptionsCol\n                    }\n                  }]\n                });\n                table.buttons().container().appendTo('.dataTables_wrapper .col-sm-6 ');\n                if (footerHtml) $(\".dataTables_wrapper .col-sm-6\").append(footerHtml);\n              } else {\n                $(\".footerdom\").hide();\n                $(\".dataTables_wrapper .col-sm-6\").hide();\n              }\n            }\n          });\n          domMain.on('click', '#edit-btn', function (e) {\n            e.preventDefault();\n            var tr = $(this).closest('tr');\n            var row = table.row(tr);\n            $scope.look(row.data());\n          });\n          domMain.on('length.dt', function (e, settings, len) {\n            $scope.selLength = len;\n          });\n\n          $scope.fnData = function (data) {\n            table.settings()[0].ajax.data = $scope.socketList;\n            table.ajax.reload();\n          };\n        });\n      }]\n    };\n  }]);\n  directives.initDirective('gatewayAccessTable', ['$timeout', '$compile', 'growl', function ($timeout, $compile, growl) {\n    return {\n      restrict: 'A',\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        var domMain = $element;\n        var table;\n        var isEditing = false;\n        $scope.$on(Event.UNITTYPEINIT + \"_gateway\", function (event, args) {\n          if (table) {\n            table.destroy();\n          }\n\n          isEditing = false;\n          table = domMain.DataTable({\n            dom: '<\"row\"<\"col-sm-6\"<\"special-btn\">><\"col-sm-6\"f>><\"row\"<\"clo-sm-12\">>t<\"row\"<\"col-sm-2\"i><\"col-sm-2\"l><\"col-sm-8\"p>>',\n            language: directives.datatable.language,\n            data: args.data,\n            rowCallback: function rowCallback(nRow, aData, iDataIndex) {\n              console.log(nRow);\n              $compile(nRow)($scope);\n            },\n            columns: [{\n              title: \"测点\",\n              data: \"label\"\n            }, {\n              title: \"远程设备地址\",\n              data: \"deviceAddress\"\n            }, {\n              title: \"寄存器类型\",\n              data: \"registerType\"\n            }, {\n              title: \"开始位置\",\n              data: \"startPoint\"\n            }, {\n              title: \"长度\",\n              data: \"length\"\n            }, {\n              title: \"字节顺序\",\n              data: \"byteOrder\"\n            }, {\n              title: \"读表达式\",\n              data: \"readExpression\"\n            }, {\n              title: \"写表达式\",\n              data: \"writeExpression\"\n            }],\n            columnDefs: [{\n              \"targets\": 0,\n              \"data\": \"label\",\n              \"render\": function render(data, type, full) {\n                return data;\n              }\n            }, {\n              \"targets\": 1,\n              \"data\": 'deviceAddress',\n              \"render\": function render(data, type, full) {\n                return \"<input class='form-control col-xs-6' id='deviceAddress'  name='deviceAddress'  type='text'  maxlength='20'  style='width: 100%;' >\";\n              }\n            }, {\n              \"targets\": 2,\n              \"data\": 'registerType',\n              \"render\": function render(data, type, full) {\n                var registerTypeList = [{\n                  \"id\": \"1\",\n                  \"name\": \"读写线圈\"\n                }, {\n                  \"id\": \"2\",\n                  \"name\": \"只读寄存器\"\n                }, {\n                  \"id\": \"3\",\n                  \"name\": \"读写寄存器\"\n                }];\n                var put = \"<select id='registerType' name='registerType'  class='combobox form-control input-sm'>\";\n                put += '<option value=\"\">请选择...</option>';\n\n                for (var i in registerTypeList) {\n                  put += '<option value=\"' + registerTypeList[i].id + '\">' + registerTypeList[i].name + '</option>';\n                }\n\n                put += '</select>';\n                return put;\n              }\n            }, {\n              \"targets\": 3,\n              \"data\": 'startPoint',\n              \"render\": function render(data, type, full) {\n                return \"<input class='form-control col-xs-6' id='startPoint'  name='startPoint'  type='text'  maxlength='20'   style='width: 100%;'  >\";\n              }\n            }, {\n              \"targets\": 4,\n              \"data\": 'length',\n              \"render\": function render(data, type, full) {\n                return \"<input class='form-control col-xs-6' id='length'  name='length'  type='text'  maxlength='20'   style='width: 100%;' >\";\n              }\n            }, {\n              \"targets\": 5,\n              \"data\": 'byteOrder',\n              \"render\": function render(data, type, full) {\n                var modbusByteOrders = [{\n                  l: \"大端\",\n                  v: \"BE\"\n                }, {\n                  l: \"小端\",\n                  v: \"LE\"\n                }, {\n                  l: \"高字节大端\",\n                  v: \"HLWBE\"\n                }, {\n                  l: \"高字节小端\",\n                  v: \"HLWBE\"\n                }, {\n                  l: \"低字节大端\",\n                  v: \"LHWLE\"\n                }, {\n                  l: \"低字节小端\",\n                  v: \"LHWLE\"\n                }];\n                var put = \"<select id='byteOrder' name='byteOrder'  class='combobox form-control input-sm'>\";\n                put += '<option value=\"\">请选择...</option>';\n\n                for (var i in modbusByteOrders) {\n                  put += '<option value=\"' + modbusByteOrders[i].v + '\">' + modbusByteOrders[i].l + '</option>';\n                }\n\n                put += '</select>';\n                return put;\n              }\n            }, {\n              \"targets\": 6,\n              \"data\": 'readExpression',\n              \"render\": function render(data, type, full) {\n                return \"<input class='form-control col-xs-6' id='readExpression'  name='readExpression'  type='text'  maxlength='20'  style='width: 100%;'   >\";\n              }\n            }, {\n              \"targets\": 7,\n              \"data\": 'writeExpression',\n              \"render\": function render(data, type, full) {\n                return \"<input class='form-control col-xs-6' id='writeExpression'  name='writeExpression'  type='text'  maxlength='20'   style='width: 100%;'  >\";\n              }\n            }]\n          });\n        });\n        domMain.on('click', '#cancel-btn', function (e) {\n          e.stopPropagation();\n          isEditing = false;\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          row.data().isEdit = 0;\n          row.cells().invalidate();\n        });\n      }]\n    };\n  }]);\n  directives.initDirective('pointAccessTable', ['$timeout', '$compile', 'growl', function ($timeout, $compile, growl) {\n    return {\n      restrict: 'A',\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        var domMain = $element;\n        var table;\n        var isEditing = false;\n        $scope.$on(Event.UNITTYPEINIT + \"_pointAccess\", function (event, args) {\n          if (table) {\n            table.destroy();\n          }\n\n          isEditing = false;\n          table = domMain.DataTable({\n            dom: '<\"row\"<\"col-sm-6\"<\"special-btn\">><\"col-sm-6\"f>><\"row\"<\"clo-sm-12\">>t<\"row\"<\"col-sm-2\"i><\"col-sm-2\"l><\"col-sm-8\"p>>',\n            language: directives.datatable.language,\n            select: $.ProudSmart.datatable.select,\n            data: args.data,\n            rowCallback: function rowCallback(nRow, aData, iDataIndex) {\n              $compile(nRow)($scope);\n            },\n            columns: [{\n              title: \"测点\",\n              data: \"label\"\n            }, {\n              title: \"网关\",\n              data: \"unit\"\n            }, {\n              title: \"传感器\",\n              data: \"unitId\"\n            }, {\n              title: \"数据项\",\n              data: \"isKpi\"\n            }],\n            columnDefs: [{\n              \"targets\": 0,\n              \"data\": \"label\",\n              \"render\": function render(data, type, full) {\n                return data;\n              }\n            }, {\n              \"targets\": 1,\n              \"data\": 'unit',\n              \"render\": function render(data, type, full) {\n                var allGateways = $scope.access.allGateways;\n                var put = \"<select id='gateways' name='gateways' class='combobox form-control input-sm'>\";\n                put += '<option value=\"\">请选择...</option>';\n\n                for (var i in allGateways) {\n                  put += '<option value=\"' + allGateways[i].id + '\">' + allGateways[i].name + '</option>';\n                  $scope.physical(allGateways[i].id, 0);\n                }\n\n                put += '</select>';\n                return put;\n              }\n            }, {\n              \"targets\": 2,\n              \"data\": 'unitId',\n              \"render\": function render(data, type, full) {\n                var put = \"<select id='physical\" + full.id + \"' name='physical\" + full.id + \"' class='combobox form-control input-sm'>\";\n                put += '<option value=\"\">请选择...</option>';\n                put += '</select>';\n                return put;\n              }\n            }, {\n              \"targets\": 3,\n              \"data\": 'isKpi',\n              \"render\": function render(data, type, full) {\n                var allDataItems = $scope.access.allDataItems;\n                var put = \"<select id='registerType' name='registerType' class='combobox form-control input-sm'>\";\n                put += '<option value=\"\">请选择...</option>';\n\n                for (var i in allDataItems) {\n                  put += '<option value=\"' + allDataItems[i].id + '\">' + allDataItems[i].label + '</option>';\n                }\n\n                put += '</select>';\n                return put;\n              }\n            }]\n          });\n        });\n        domMain.on('click', '#save-btn', function (e) {\n          e.stopPropagation();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          var f = $scope.faultSave;\n\n          if (f != null && f != \"\") {\n            row.data()[\"fault\"] = $(\"#fault\").val();\n            $scope.doAction('saveFault', row.data());\n          } else {\n            growl.warning(\"请选择故障\", {});\n          }\n        });\n        domMain.on('change', '#gateways', function (e) {\n          e.stopPropagation();\n          isEditing = false;\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          var gatewaysVal = $(this).val();\n\n          if (gatewaysVal != \"\") {\n            $scope.physical(gatewaysVal, row.data().id);\n          }\n        });\n        domMain.on('click', '#cancel-btn', function (e) {\n          e.stopPropagation();\n          isEditing = false;\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          row.data().isEdit = 0;\n          row.cells().invalidate();\n        });\n      }]\n    };\n  }]);\n});"],"sourceRoot":"/source/"}