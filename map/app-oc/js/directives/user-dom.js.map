{"version":3,"sources":["app-oc/js/directives/user-dom.js"],"names":["define","directives","BootstrapDialog","datatables","initDirective","$timeout","$compile","growl","restrict","controller","$scope","$element","$attrs","table","domMain","isEditing","$on","Event","USERINFOSINIT","event","args","destroy","DataTable","dom","data","length","$","ProudSmart","datatable","footerdom","language","select","order","columns","selectCol","title","optionCol3","visible","columnDefs","orderable","targets","render","type","full","isEdit","escape","off","undefined","domainListDic","name","str","userID","userManager","rowCallback","nRow","aData","iDataIndex","selected","addClass","removeClass","on","e","stopPropagation","target","checked","rows","tableRows","i","nodes","row","invalidate","draw","deselect","tr","this","closest","count","attr","prop","dialog","functionRoleName","$apply","child","d","discription","format","show","doAction","selectRow","hide","cells","val","returnObj","checkPass","domainSelect","each","children","j","val1","jqob1","has","txt","trim","test","cell","warning","userType","domainID","remove","preventDefault","activeSelectedDel","selectedCount","closable","message","buttons","label","cssClass","action","dialogRef","successCount","errorCount","rowData","doActiveHanddler","status","node","success","close","doActivePwd","parentDom","parent","html","search","value","text","loginin","userEmail","CURRENTINFOSINIT","roleID","functionLook","ipts","find","dialogUser","dialogFun","FUNCTIONINFOSINIT","scrollX","scrollY","scrollCollapse","paging","searching","info","enterId","enterpriseID","returnStr","copyRight","websiteUrl","formatEdit","closingDate","Date","toISOString","replace","enterpriseObj","jQuery","extend","editEnterprise","next","trigger","cancel","blockClick","uploader","queue","upload","enterpriseName","enterpriseUrl","errorStatus","newData","Format","ckTime","checkDate","modifyEnterpriseInfo","roleEdit","CLIENTMANAGEINIT","empty","flg","ngDialog","optionCol2","jobs","valueCode","item","inputItem","clientOther","mistakeMesg","email","phone","open","template","className","scope","inputFun","doActionOther","txt2","console","log","doDealerAction","dealer","require","userUIService","ckeditor","id","url","uploadFileUrl","CKEDITOR","customConfig","extraPlugins","height","filebrowserUploadUrl","filebrowserBrowseUrl","filebrowserImageBrowseUrl","filebrowserFlashBrowseUrl","filebrowserImageUploadUrl","filebrowserFlashUploadUrl","stylesSet","widget","attributes","class","evt","xhr","fileLoader","filename","withCredentials","SUPPLIERMANAGEINIT","context","cellIndex","isShown","tds","parents","jqob","put1","put","tr1","row1","eq","valInp","replaceWith","aaSorting","location","href","messageId","deleteMessage","publishMessage","preview"],"mappings":"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","file":"app-oc/js/directives/user-dom.js","sourcesContent":["define(['directives/directives', 'bootstrap-dialog', 'datatables.net', 'datatables.net-bs', 'datatables.net-select'], function (directives, BootstrapDialog, datatables) {\n  'use strict';\n\n  directives.initDirective('userTable', ['$timeout', '$compile', 'growl', function ($timeout, $compile, growl) {\n    return {\n      restrict: 'A',\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        var domMain = $element;\n        var table;\n        var isEditing = false;\n        $scope.$on(Event.USERINFOSINIT, function (event, args) {\n          if (table) {\n            table.destroy();\n          }\n\n          isEditing = false;\n          table = domMain.DataTable({\n            dom: args.data && args.data.length > 0 ? $.ProudSmart.datatable.footerdom : '',\n            language: $.ProudSmart.datatable.language,\n            select: $.ProudSmart.datatable.select,\n            order: [[7, \"desc\"]],\n            data: args.data,\n            columns: [$.ProudSmart.datatable.selectCol, {\n              title: \"用户类型\",\n              data: \"userTypeLabel\"\n            }, {\n              title: \"用户名称\",\n              data: \"userName\"\n            }, {\n              title: \"登录账户（手机/邮箱）\",\n              data: \"userEmail\"\n            }, {\n              title: \"办公电话\",\n              data: \"officePhone\"\n            }, {\n              title: \"默认域\",\n              data: \"domainPath\"\n            }, $.ProudSmart.datatable.optionCol3, {\n              data: \"createDate\",\n              title: \"\",\n              visible: false\n            }],\n            columnDefs: [{\n              orderable: false,\n              targets: 0,\n              render: function render(data, type, full) {\n                if (type == \"display\") {\n                  if (data) {\n                    return '<input class=\"itemCheckBox\" checked type=\"checkbox\">';\n                  } else {\n                    return '<input class=\"itemCheckBox\" type=\"checkbox\">';\n                  }\n                }\n\n                return \"\";\n              }\n            }, {\n              \"targets\": 2,\n              \"data\": \"userName\",\n              \"render\": function render(data, type, full) {\n                // 返回自定义内容\n                if (full.isEdit > 0 && type == \"display\") {\n                  isEditing = true;\n                  return \"<input class='form-control col-xs-6' maxlength='20' placeholder='不能为空、空格，最多20个字符'  type='text'   style='border: 1px solid #F18282;width: 100%;' value='\" + escape(data) + \"'>\";\n                } else {\n                  return escape(data);\n                }\n              }\n            }, {\n              \"targets\": 3,\n              \"data\": \"userEmail\",\n              \"render\": function render(data, type, full) {\n                // 返回自定义内容\n                if (full.isEdit == 3 && type == \"display\") return \"<input class='form-control col-xs-6'  placeholder='输入手机号码、邮箱'  type='text'   style='width: 100%;border: 1px solid #F18282;' value='\" + data + \"'>\";else return data;\n              }\n            }, {\n              \"targets\": 4,\n              \"data\": \"officePhone\",\n              \"render\": function render(data, type, full) {\n                var off = \"\";\n\n                if (data == null) {\n                  off = \"\";\n                } else {\n                  off = data;\n                }\n\n                if (full.isEdit > 0 && type == \"display\") {\n                  if (data != \"\") {\n                    return \"<input class='form-control col-xs-6' placeholder='例如：010-68888888' style='width: 100%;' type='text'  value='\" + off + \"'>\";\n                  } else {\n                    return \"<input class='form-control col-xs-6' placeholder='例如：010-68888888' type='text'   style='width: 100%;'>\";\n                  }\n                } else {\n                  return off;\n                }\n              }\n            }, {\n              \"targets\": 5,\n              \"data\": \"domainPath\",\n              \"render\": function render(data, type, full) {\n                if (full.isEdit > 0 && type == \"display\") {\n                  return \"<div class='dropdowntree select-sm' name='domainPath' key='domainPath' placeholder='请选择...' model='\" + data + \"' change='' options='domainListTree' mark='nodes' />\";\n                  ;\n                } else {\n                  if ($scope.domainListDic[data] != undefined && $scope.domainListDic[data]) {\n                    return $scope.domainListDic[data].name;\n                  } else {\n                    return \"\";\n                  }\n                }\n              }\n            }, {\n              \"targets\": 6,\n              \"data\": \"option\",\n              \"render\": function render(data, type, full) {\n                // 返回自定义内容\n                var str = \"<div class='btn-group btn-group-sm'>\";\n\n                if (full.isEdit == 2 || full.isEdit == 3) {\n                  str += \"<a id='save-btn' class='btn btn-default btn-sm'><i class='fa fa-save  hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 保存</span></a>\";\n                  str += \"<a id='cancel-btn' class='btn btn-default btn-sm' ><i class='fa fa-times hidden-lg hidden-md hidden-sm '></i><span class='hidden-xs'> 取消</span></a>\";\n                  str += \"</div>\";\n                } else {\n                  if (full.userID == $scope.userManager.userID) {\n                    str += \"<button id='edit-btn' class='btn btn-primary' ><i class='fa fa-edit hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 编辑</span></button>\";\n                    str += \"<button id='del-btn' class='btn btn-default' disabled  title='不能删除自己的账号'><i class='fa fa-trash hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 删除</span></button>\";\n                    str += \"<button type='button' disabled  title='不能操作自己的账号' class='btn btn-default dropdown-toggle' data-toggle='dropdown'> 更多<span class='caret'></span></button>\";\n                    str += \"<ul class='dropdown-menu' role='menu'>\";\n                    str += \"</ul></div>\";\n                  } else {\n                    str += \"<button id='edit-btn' class='btn btn-primary' ><i class='fa fa-edit hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 编辑</span></button>\";\n                    str += \"<button id='del-btn' class='btn btn-default' ><i class='fa fa-trash hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 删除</span></button>\";\n                    str += \"<button type='button' class='btn btn-default dropdown-toggle' data-toggle='dropdown'> 更多<span class='caret'></span></button>\";\n                    str += \"<ul class='dropdown-menu' role='menu'>\";\n                    str += \"<li><a role='button' id='pwd-btn'>重置密码</a></li>\";\n                    str += \"<li><a role='button' id='role-user'>角色分配</a></li>\";\n                    str += \"<li><a role='button' id='domain-user'>域分配</a></li>\";\n                    str += \"<li><a role='button' id='remark-edit'>备注</a></li>\";\n                    str += \"</ul></div>\";\n                  }\n                }\n\n                return str;\n              }\n            }],\n            rowCallback: function rowCallback(nRow, aData, iDataIndex) {\n              if (aData.selected) {\n                $(nRow).addClass(\"selected\");\n              } else {\n                $(nRow).removeClass(\"selected\");\n              }\n\n              $compile(nRow)($scope);\n            }\n          });\n        });\n        /* Formatting function for row details - modify as you need */\n\n        function format(d) {\n          if (d != undefined) {\n            // `d` is the original data object for the row\n            var returnStr;\n            returnStr = '<table width=\"100%\" class=\"table\">' + '<tr>' + '<td>备注:</td>' + '<td><textarea  id=\"discription\" class=\"col-sm-6\" style=\"height:100px;resize: none;\" name=\"discription\" maxlength=\"100\"  type=\"text\" >' + d.discription + '</textarea></td>' + '</tr>' + '<tr>' + '<td colspan=\"4\"><div class=\"input-group\">' + '<a id=\"remark-btn\" class=\"btn btn-default btn-sm\" style=\"margin-right: 15px;\"><i class=\"fa fa-check\"></i><span class=\"hidden-xs ng-binding\">保存</span></a>' + '<a id=\"remark-cancel\" class=\"btn btn-default btn-sm\"><i class=\"fa fa-close\"></i><span class=\"hidden-xs ng-binding\">取消</span></a></div></td>' + '</tr>' + '</table>';\n            return returnStr;\n          }\n        }\n\n        domMain.on('change', '#allselect-btn', function (e) {\n          e.stopPropagation();\n\n          if (e.target.checked) {\n            table.rows().select();\n            var tableRows = table.rows({\n              selected: true\n            });\n\n            for (var i = 0; i < tableRows.nodes().length; i++) {\n              var row = table.row(tableRows.nodes()[i]);\n              row.data().selected = true;\n            }\n\n            ;\n            table.rows().invalidate().draw(false);\n          } else {\n            var tableRows = table.rows({\n              selected: true\n            });\n\n            for (var i = 0; i < tableRows.nodes().length; i++) {\n              var row = table.row(tableRows.nodes()[i]);\n              row.data().selected = false;\n            }\n\n            ;\n            table.rows().deselect();\n            table.rows().invalidate().draw(false);\n          }\n        });\n        domMain.on('change', '.itemCheckBox', function (e) {\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n\n          if (e.target.checked) {\n            row.data().selected = true;\n          } else {\n            row.data().selected = false;\n          }\n\n          var tableRows = table.rows({\n            selected: true\n          });\n\n          if (tableRows.count() != table.rows()[0].length) {\n            $('#allselect-btn').attr('checked', false);\n            $('#allselect-btn').prop('checked', false);\n          } else if (tableRows.count() == table.rows()[0].length) {\n            $('#allselect-btn').attr('checked', true);\n            $('#allselect-btn').prop('checked', true);\n          }\n        });\n        domMain.on('click', '#domain-user', function (e) {\n          isEditing = false;\n          var tr = $(this).closest('tr');\n          var row = table.row(tr); //tr.addClass(\"selected\");\n          // location.href = '#/roleAllot/' + row.data().userID + '';\n\n          $scope.dialog(row.data().userID);\n        });\n        domMain.on('click', '#remark-edit', function (e) {\n          $scope.functionRoleName = \"0\";\n          $scope.$apply();\n          var tr = $(this).closest('tr'); //tr.addClass('shown');\n\n          var row = table.row(tr);\n          row.child(format(row.data())).show();\n        });\n        domMain.on('click', '#role-user', function (e) {\n          isEditing = false;\n          $scope.functionRoleName = \"0\";\n          $scope.$apply();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          $scope.doAction('roleUserRole', row.data());\n        });\n        domMain.on('click', '#remark-cancel', function (e) {\n          var selectRow = table.row('.shown');\n\n          if (selectRow) {\n            selectRow.child.hide();\n            selectRow.cells().invalidate();\n          }\n        });\n        domMain.on('click', '#remark-btn', function (e) {\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          var selectRow = table.row('.shown');\n          selectRow.data()[\"discription\"] = $(\"#discription\").val();\n          $scope.doAction('save', selectRow.data(), function (returnObj) {\n            if (returnObj) {\n              selectRow.child.hide();\n              selectRow.cells().invalidate();\n            }\n          });\n        });\n        domMain.on('click', '#save-btn', function (e) {\n          e.stopPropagation();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          var checkPass = true;\n          var selectRow = table.row('.shown');\n          var domainSelect = $('div[name=\"domainPath\"]').attr(\"model\"); // var domain = $('div[name=\"domainPath\"]').attr(\"model\");\n\n          if (row.data().isEdit == 3) {\n            $.each(tr.children(), function (j, val1) {\n              var jqob1 = $(val1); //把input变为字符串\n\n              if (!jqob1.has('button').length && jqob1.has('input').length) {\n                var txt = $.trim(jqob1.children(\"input\").val());\n\n                if (txt && txt != \"请选择...\") {\n                  if (j == 3) {\n                    var reg = /^\\w+((-\\w+)|(\\.\\w+))*\\@[A-Za-z0-9]+((\\.|-)[A-Za-z0-9]+)*\\.[A-Za-z0-9]+$/;\n                    var reg1 = /^(((13[0-9]{1})|(15[0-9]{1})|(17[0-9]{1})|(18[0-9]{1}))+\\d{8})$/;\n\n                    if (!reg.test(txt)) {\n                      if (!reg1.test(txt)) {\n                        $(val1).addClass('danger');\n                        checkPass = false;\n                        return false;\n                      } else {\n                        row.data()[\"userEmalStatus\"] = \"phone\";\n                      }\n                    } else {\n                      row.data()[\"userEmalStatus\"] = \"email\";\n                    }\n                  }\n\n                  if (j == 4) {\n                    var reg = /^(0[0-9]{2,3}\\-)?([2-9][0-9]{6,7})+(\\-[0-9]{1,4})?$/;\n\n                    if (!reg.test(txt)) {\n                      $(val1).addClass('danger');\n                      checkPass = false;\n                      return false;\n                    }\n                  }\n\n                  $(val1).removeClass('danger');\n                  table.cell(jqob1).data(txt); //修改DataTables对象的数据\n                } else {\n                  if (j == 2 || j == 3) {\n                    table.cell(jqob1).data(txt);\n                    $(val1).addClass('danger');\n                    checkPass = false;\n                    return false;\n                  }\n\n                  if (j == 5) {\n                    $(val1).addClass('danger');\n                    checkPass = false;\n                    return false;\n                  }\n\n                  if (j == 4) {\n                    table.cell(jqob1).data(\"\");\n                  }\n                }\n              }\n            });\n          } else if (row.data().isEdit == 2) {\n            $.each(tr.children(), function (j, val1) {\n              var jqob1 = $(val1); //把input变为字符串\n\n              if (!jqob1.has('button').length && jqob1.has('input').length) {\n                var txt = $.trim(jqob1.children(\"input\").val());\n\n                if (txt && txt != \"请选择...\") {\n                  if (j == 3) {\n                    var reg = /^(0[0-9]{2,3}\\-)?([2-9][0-9]{6,7})+(\\-[0-9]{1,4})?$/;\n\n                    if (!reg.test(txt)) {\n                      $(val1).addClass('danger');\n                      checkPass = false;\n                      return false;\n                    }\n                  }\n\n                  $(val1).removeClass('danger');\n                  table.cell(jqob1).data(txt); //修改DataTables对象的数据\n                } else {\n                  if (j == 1) {\n                    table.cell(jqob1).data(txt);\n                    $(val1).addClass('danger');\n                    checkPass = false;\n                    return false;\n                  }\n                }\n              }\n            });\n          }\n\n          if (checkPass) {\n            if (domainSelect == null || domainSelect == \"\" || domainSelect == undefined) {\n              growl.warning(\"请选择域\", {});\n              return;\n            }\n\n            isEditing = false;\n            var rowDate = row.data();\n\n            if (rowDate.userType != 3) {\n              row.data()[\"domainPath\"] = domainSelect;\n              row.data()[\"domainID\"] = $scope.domainListDic[domainSelect].domainID;\n            }\n\n            $scope.doAction('save', row.data(), function (returnObj) {\n              if (returnObj) {\n                if (row.data().isEdit == 3) {\n                  row.data().userID = returnObj.userID;\n                }\n\n                row.data().isEdit = 0;\n                row.data().selected = false;\n                row.cells().invalidate().draw(false);\n              }\n            });\n          }\n        });\n        domMain.on('click', '#cancel-btn', function (e) {\n          e.stopPropagation();\n          isEditing = false;\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n\n          if (row.data().userID) {\n            row.data().isEdit = 0;\n            row.cells().invalidate();\n            isEditing = false;\n          } else {\n            isEditing = false;\n            row.remove().draw(false);\n          } // $scope.doAction('cancel');\n\n        });\n        domMain.on('click', '#edit-btn', function (e) {\n          e.preventDefault();\n          $scope.functionRoleName = \"0\";\n          $scope.$apply();\n\n          if (!isEditing) {\n            var tr = $(this).closest('tr');\n            var row = table.row(tr);\n            row.data().isEdit = 2;\n            row.cells().invalidate();\n            $compile(tr)($scope);\n            isEditing = true;\n          } else {\n            growl.warning(\"当前有在编辑的用户，请先完成该操作\", {});\n          }\n        });\n        domMain.on('click', '#del-btn', function (e) {\n          e.preventDefault();\n          isEditing = false;\n          $scope.functionRoleName = \"0\";\n          $scope.$apply();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          $scope.doAction('delete', row.data(), function (returnObj) {\n            if (returnObj) {\n              row.remove().draw(false);\n            }\n          });\n        });\n        domMain.on('click', '#group-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          $scope.doAction('assignGroup', row.data());\n        });\n        domMain.on('click', '#pwd-btn', function (e) {\n          e.preventDefault();\n          $scope.functionRoleName = \"0\";\n          $scope.$apply();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          $scope.doAction('resetPwd', row.data());\n        });\n        /**\n         * 复选框删除\n         */\n\n        $scope.activeSelectedDel = function () {\n          var tableRows = table.rows({\n            selected: true\n          });\n          var selectedCount = tableRows.count();\n          var nodes = tableRows.nodes();\n\n          if (selectedCount == 0) {\n            growl.warning(\"当前没有选中的用户\", {});\n            return;\n          }\n\n          BootstrapDialog.show({\n            title: '提示',\n            closable: false,\n            //size:BootstrapDialog.SIZE_WIDE,\n            message: '确认删除您所选择的 ' + selectedCount + ' 条记录吗？',\n            buttons: [{\n              label: '确定',\n              cssClass: 'btn-success',\n              action: function action(dialogRef) {\n                var successCount = 0;\n                var errorCount = 0;\n\n                for (var i = 0; i < nodes.length; i++) {\n                  var row = table.row(nodes[i]);\n                  var rowData = row.data();\n\n                  if ($scope.userManager.userID != rowData.userID) {\n                    $scope.doActiveHanddler(rowData, function (status, node) {\n                      if (status) {\n                        table.row(node).remove().draw(false);\n                        successCount++;\n                      } else {\n                        errorCount++;\n                      }\n\n                      if (selectedCount == successCount + errorCount) {\n                        table.rows().deselect();\n                        growl.success(\"成功删除用户\" + successCount + \"个,失败\" + errorCount + \"个\", {});\n                      }\n                    }, nodes[i]);\n                  } else {\n                    selectedCount = selectedCount - 1;\n                  }\n                }\n\n                ;\n                dialogRef.close();\n              }\n            }, {\n              label: '取消',\n              action: function action(dialogRef) {\n                dialogRef.close();\n              }\n            }]\n          });\n        };\n        /**\n         * 复选框重置密码\n         */\n\n\n        $scope.activeSelectedDel = function () {\n          var tableRows = table.rows({\n            selected: true\n          });\n          var selectedCount = tableRows.count();\n          var nodes = tableRows.nodes();\n\n          if (selectedCount == 0) {\n            growl.warning(\"当前没有选中的用户\", {});\n            return;\n          }\n\n          BootstrapDialog.show({\n            title: '提示',\n            closable: false,\n            //size:BootstrapDialog.SIZE_WIDE,\n            message: '确认重置您所选择的 ' + selectedCount + ' 条记录吗？',\n            buttons: [{\n              label: '确定',\n              cssClass: 'btn-success',\n              action: function action(dialogRef) {\n                var successCount = 0;\n                var errorCount = 0;\n\n                for (var i = 0; i < nodes.length; i++) {\n                  var row = table.row(nodes[i]);\n                  var rowData = row.data();\n\n                  if ($scope.userManager.userID != rowData.userID) {\n                    $scope.doActivePwd(rowData, function (status, node) {\n                      if (status) {\n                        table.row(node).cells().invalidate().draw(false);\n                        successCount++;\n                      } else {\n                        errorCount++;\n                      }\n\n                      if (selectedCount == successCount + errorCount) {\n                        $(\".itemCheckBox\").each(function () {\n                          $(this).attr(\"checked\", false);\n                        });\n                        table.rows().deselect();\n                        growl.success(\"成功重置用户密码\" + successCount + \"个,失败\" + errorCount + \"个\", {});\n                      }\n                    }, nodes[i]);\n                  } else {\n                    selectedCount = selectedCount - 1;\n                    $(\".itemCheckBox\").each(function () {\n                      $(this).attr(\"checked\", false);\n                    });\n                    table.rows().deselect();\n                  }\n                }\n\n                ;\n                dialogRef.close();\n              }\n            }, {\n              label: '取消',\n              action: function action(dialogRef) {\n                dialogRef.close();\n              }\n            }]\n          });\n        };\n      }]\n    };\n  }]);\n  directives.initDirective('contractTable', ['$timeout', '$compile', function ($timeout, $compile) {\n    return {\n      restrict: 'A',\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        var domMain = $element;\n        var table;\n        var isEditing = false;\n        $scope.$on(Event.USERINFOSINIT + \"_contract\", function (event, args) {\n          if (table) {\n            table.destroy();\n          }\n\n          isEditing = false;\n          table = domMain.DataTable({\n            dom: '<\"row\"<\"col-sm-6\"<\"special-btn\">><\"col-sm-6\"f>><\"row\"<\"clo-sm-12\">>t<\"row\"<\"col-sm-2\"i><\"col-sm-2\"l><\"col-sm-8\"p>>',\n            language: directives.datatable.language,\n            data: args.data,\n            rowCallback: function rowCallback(nRow, aData, iDataIndex) {\n              $compile(nRow)($scope);\n            },\n            columns: args.columns,\n            columnDefs: args.columnDefs\n          });\n        });\n        /**\n         * 监听表格初始化后，添加按钮\n         */\n\n        domMain.on('init.dt', function () {\n          var parentDom = $(\".special-btn\").parent();\n          parentDom.html('<a  class=\"btn btn-default btn-sm\"><i class=\"fa fa-plus\"></i><span class=\"hidden-xs\"> 新建合同</span></a>');\n          $compile(parentDom)($scope);\n        });\n      }]\n    };\n  }]);\n  directives.initDirective('maintainTable', ['$timeout', '$compile', function ($timeout, $compile) {\n    return {\n      restrict: 'A',\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        var domMain = $element;\n        var table;\n        var isEditing = false;\n        $scope.$on(Event.USERINFOSINIT + \"_maintain\", function (event, args) {\n          if (table) {\n            table.destroy();\n          }\n\n          isEditing = false;\n          table = domMain.DataTable({\n            dom: '<\"row\"<\"col-sm-6\"<\"special-btn\">><\"col-sm-6\"f>><\"row\"<\"clo-sm-12\">>t<\"row\"<\"col-sm-2\"i><\"col-sm-2\"l><\"col-sm-8\"p>>',\n            language: directives.datatable.language,\n            data: args.data,\n            rowCallback: function rowCallback(nRow, aData, iDataIndex) {\n              $compile(nRow)($scope);\n            },\n            columns: args.columns,\n            columnDefs: args.columnDefs\n          });\n        });\n        /**\n         * 监听表格初始化后，添加按钮\n         */\n\n        domMain.on('init.dt', function () {\n          var parentDom = $(\".special-btn\").parent();\n          parentDom.html('<a  class=\"btn btn-default btn-sm\"><i class=\"fa fa-plus\"></i><span class=\"hidden-xs\"> 新建计划</span></a>');\n          $compile(parentDom)($scope);\n        });\n      }]\n    };\n  }]);\n  directives.initDirective('loreTable', ['$timeout', '$compile', function ($timeout, $compile) {\n    return {\n      restrict: 'A',\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        var domMain = $element;\n        var table;\n        var isEditing = false;\n        $scope.$on(Event.USERINFOSINIT + \"_lore\", function (event, args) {\n          if (table) {\n            table.destroy();\n          }\n\n          isEditing = false;\n          table = domMain.DataTable({\n            dom: '<\"row\"<\"col-sm-6\"<\"special-btn\">><\"col-sm-6\"f>><\"row\"<\"clo-sm-12\">>t<\"row\"<\"col-sm-2\"i><\"col-sm-2\"l><\"col-sm-8\"p>>',\n            language: directives.datatable.language,\n            data: args.data,\n            rowCallback: function rowCallback(nRow, aData, iDataIndex) {\n              $compile(nRow)($scope);\n            },\n            columns: args.columns,\n            columnDefs: args.columnDefs\n          });\n        });\n        /**\n         * 监听表格初始化后，添加按钮\n         */\n\n        domMain.on('init.dt', function () {\n          var parentDom = $(\".special-btn\").parent();\n          parentDom.html('<a  class=\"btn btn-default btn-sm\"><i class=\"fa fa-plus\"></i><span class=\"hidden-xs\"> 新建知识</span></a>');\n          $compile(parentDom)($scope);\n        });\n      }]\n    };\n  }]);\n  directives.initDirective('superTable', ['$timeout', '$compile', function ($timeout, $compile) {\n    return {\n      restrict: 'A',\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        var domMain = $element;\n        var table;\n        var isEditing = false;\n        $scope.$on(Event.USERINFOSINIT + \"_super\", function (event, args) {\n          if (table) {\n            table.destroy();\n          }\n\n          isEditing = false;\n          table = domMain.DataTable({\n            dom: args.data && args.data.length > 0 ? $.ProudSmart.datatable.footerdom : '',\n            language: $.ProudSmart.datatable.language,\n            columns: args.columns,\n            columnDefs: args.columnDefs,\n            data: args.data\n          });\n        });\n        $scope.$on(\"table-search-handle\", function (event, args) {\n          if (args.name == $attrs.name) table.search(args.value).draw();\n        });\n        domMain.on('click', 'td', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var name = $(this).text();\n          var row = table.row(tr);\n          var rowData = row.data();\n\n          if (name == \" 切换登录\") {\n            $scope.loginin(rowData.userEmail);\n          }\n        });\n      }]\n    };\n  }]);\n  directives.initDirective('currentTable', ['$timeout', '$compile', function ($timeout, $compile) {\n    return {\n      restrict: 'A',\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        var domMain = $element;\n        var table;\n        var isEditing = false;\n        $scope.$on(Event.CURRENTINFOSINIT, function (event, args) {\n          if (table) {\n            table.destroy();\n          }\n\n          isEditing = false;\n          table = domMain.DataTable({\n            dom: args.data && args.data.length > 0 ? $.ProudSmart.datatable.footerdom : '',\n            language: $.ProudSmart.datatable.language,\n            select: $.ProudSmart.datatable.select,\n            order: [[4, \"desc\"]],\n            columns: [$.ProudSmart.datatable.selectCol, {\n              title: \"角色名称\",\n              data: \"roleName\"\n            }, {\n              title: \"角色描述\",\n              data: \"description\"\n            }, $.ProudSmart.datatable.optionCol3, {\n              // data: \"createDate\",\n              data: \"roleID\",\n              title: \"\",\n              visible: false\n            }],\n            columnDefs: [{\n              orderable: false,\n              targets: 0,\n              render: function render(data, type, full) {\n                if (type == \"display\") {\n                  if (data) {\n                    return '<input class=\"itemCheckBox\" checked type=\"checkbox\">';\n                  } else {\n                    return '<input class=\"itemCheckBox\" type=\"checkbox\">';\n                  }\n                }\n\n                return \"\";\n              }\n            }, {\n              \"targets\": 1,\n              \"data\": \"roleName\",\n              \"render\": function render(data, type, full) {\n                // 返回自定义内容\n                if (full.isEdit > 0 && type == \"display\") {\n                  return \"<input class='form-control col-xs-6'   type='text'  maxlength='20'  style='border: 1px solid #F18282;width: 100%;' value='\" + escape(data) + \"'>\";\n                } else {\n                  var name = data;\n\n                  if ($scope.userManager.userID == 1) {\n                    if (full.roleID == 100) {\n                      name = \"A\" + data;\n                    } else if (full.roleID == 102) {\n                      name = \"A\" + data;\n                    } else if (full.roleID == 101) {\n                      name = \"B\" + data;\n                    } else if (full.roleID == 103) {\n                      name = \"B\" + data;\n                    }\n                  }\n\n                  return escape(name);\n                }\n              }\n            }, {\n              \"targets\": 2,\n              \"data\": \"description\",\n              \"render\": function render(data, type, full) {\n                // 返回自定义内容\n                if (full.isEdit > 0 && type == \"display\") return \"<input class='form-control col-xs-6'  maxlength='100'  type='text'   style='border: 1px solid #F18282;width: 100%;' value='\" + escape(data) + \"'>\";else return escape(data);\n              }\n            }, {\n              \"targets\": 3,\n              \"data\": \"option\",\n              \"render\": function render(data, type, full) {\n                // 返回自定义内容\n                var str = \"<div class='btn-group btn-group-sm'>\";\n\n                if (full.isEdit > 0) {\n                  str += \"<button id='save-btn' class='btn btn-primary' ><i class='fa fa-save hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 保存</span></button>\";\n                  str += \"<button id='cancel-btn' class='btn btn-default' ><i class='fa fa-save hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 取消</span></button>\";\n                  str += \"</div>\";\n                } else if (full.roleID == 100 || full.roleID == 102 || full.roleID == 1000 || full.roleID == 101 || full.roleID == 103 || full.roleID == 2000 || full.roleID == 2001) {\n                  var functionLook = \"查看功能\";\n\n                  if ($scope.userManager.userID == 1) {\n                    functionLook = \"功能分配\";\n                  }\n\n                  str += \"<button id='edit-btn' class='btn btn-primary' disabled><i class='fa fa-edit hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 编辑</span></button>\";\n                  str += \"<button id='del-btn' class='btn btn-default' disabled><i class='fa fa-trash hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 删除</span></button>\";\n                  str += \"<button type='button' class='btn btn-default dropdown-toggle' data-toggle='dropdown'> 更多<span class='caret'></span></button>\";\n                  str += \"<ul class='dropdown-menu' role='menu'>\";\n                  str += \"<li><a role='button' id='user-allot'>用户分配</a></li>\";\n                  str += \"<li><a role='button' id='fun-btn'>\" + functionLook + \"</a></li>\";\n                  str += \"</ul></div>\";\n                } else {\n                  str += \"<button id='edit-btn' class='btn btn-primary' ><i class='fa fa-edit hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 编辑</span></button>\";\n                  str += \"<button id='del-btn' class='btn btn-default' ><i class='fa fa-trash hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 删除</span></button>\";\n                  str += \"<button type='button' class='btn btn-default dropdown-toggle' data-toggle='dropdown'> 更多<span class='caret'></span></button>\";\n                  str += \"<ul class='dropdown-menu' role='menu'>\";\n                  str += \"<li><a role='button' id='fun-btn'>功能分配</a></li>\";\n                  str += \"<li><a role='button' id='user-allot'>用户分配</a></li>\";\n                  str += \"</ul></div>\";\n                }\n\n                return str;\n              }\n            }],\n            data: args.data,\n            rowCallback: function rowCallback(nRow, aData, iDataIndex) {\n              if (aData.selected) {\n                $(nRow).addClass(\"selected\");\n              } else {\n                $(nRow).removeClass(\"selected\");\n              }\n\n              $compile(nRow)($scope);\n            }\n          });\n        });\n        /**\n         * 监听表格初始化后，添加按钮\n         */\n\n        domMain.on('init.dt', function () {\n          var parentDom = $(\".special-btn\").parent();\n          parentDom.html('<a ng-click=\"addUser()\" class=\"btn btn-default btn-sm\"><i class=\"fa fa-plus\"></i><span class=\"hidden-xs\"> 新建角色</span></a>');\n          $compile(parentDom)($scope);\n        });\n        domMain.on('change', '#allselect-btn', function (e) {\n          e.stopPropagation();\n\n          if (e.target.checked) {\n            table.rows().select();\n            var tableRows = table.rows({\n              selected: true\n            });\n\n            for (var i = 0; i < tableRows.nodes().length; i++) {\n              var row = table.row(tableRows.nodes()[i]);\n              row.data().selected = true;\n            }\n\n            ;\n            table.rows().invalidate().draw(false);\n          } else {\n            var tableRows = table.rows({\n              selected: true\n            });\n\n            for (var i = 0; i < tableRows.nodes().length; i++) {\n              var row = table.row(tableRows.nodes()[i]);\n              row.data().selected = false;\n            }\n\n            ;\n            table.rows().deselect();\n            table.rows().invalidate().draw(false);\n          }\n        });\n        domMain.on('change', '.itemCheckBox', function (e) {\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n\n          if (e.target.checked) {\n            row.data().selected = true;\n          } else {\n            row.data().selected = false;\n          }\n\n          var tableRows = table.rows({\n            selected: true\n          });\n\n          if (tableRows.count() != table.rows()[0].length) {\n            $('#allselect-btn').attr('checked', false);\n            $('#allselect-btn').prop('checked', false);\n          } else if (tableRows.count() == table.rows()[0].length) {\n            $('#allselect-btn').attr('checked', true);\n            $('#allselect-btn').prop('checked', true);\n          }\n        });\n        domMain.on('click', '#edit-save', function (e) {\n          var tr = $(this).closest('tr');\n          var selectRow = [];\n          var ipts = tr.find('input');\n          var checkPass = true;\n          $.each($('.shown').children(), function (j, val1) {\n            var jqob1 = $(val1);\n            var txt = $.trim(jqob1.children(\"input\").val());\n\n            if (txt == \"\") {\n              $(val1).addClass('danger');\n              checkPass = false;\n              return false;\n            }\n\n            $(val1).removeClass('danger');\n          });\n          $.each(ipts, function (i, val) {\n            var txt = $.trim($(val).val());\n\n            if (i == 0) {\n              selectRow[\"roleName\"] = txt;\n            } else if (i == 1) {\n              selectRow[\"description\"] = txt;\n            } else if (i == 2) {\n              selectRow[\"roleID\"] = txt;\n            }\n          });\n\n          if (checkPass) {\n            $scope.doAction('modifyRole', selectRow, function (returnObj) {\n              if (returnObj) {\n                if (row.data().isEdit == 3) {\n                  row.data().roleID = returnObj.roleID;\n                }\n\n                row.data().isEdit = 0;\n                row.cells().invalidate().draw(false);\n              }\n            });\n          }\n        });\n        /*domMain.on('click', 'td', function (e) {\n         e.preventDefault();\n         var tr = $(this).closest('tr');\n         tr.addClass('shown');\n         });*/\n\n        domMain.on('click', '#save-btn', function (e) {\n          e.stopPropagation();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          var checkPass = true;\n          var selectRow = table.row('.shown');\n          $.each(tr.children(), function (j, val1) {\n            var jqob1 = $(val1); //把input变为字符串\n\n            if (!jqob1.has('button').length && jqob1.has('input').length) {\n              var txt = $.trim(jqob1.children(\"input\").val());\n\n              if (txt && txt != \"请选择...\") {\n                //var reg = /^[\\u4e00-\\u9fa5a-zA-Z][u4e00-\\u9fa5a-za-zA-Z0-9_]{1,30}$/;\n                //if (!reg.test(txt)) {\n                //    $(val1).addClass('danger');\n                //    checkPass = false\n                //    return false;\n                //}\n                $(val1).removeClass('danger');\n                table.cell(jqob1).data(txt);\n              } else {\n                if (j == 0 || j == 1) {\n                  table.cell(jqob1).data(txt);\n                  $(val1).addClass('danger');\n                  checkPass = false;\n                  return false;\n                }\n              }\n            }\n          });\n\n          if (checkPass) {\n            isEditing = false;\n            $scope.doAction('addRole', row.data(), function (returnObj) {\n              if (returnObj) {\n                if (row.data().isEdit == 3) {\n                  row.data().roleID = returnObj.roleID;\n                }\n\n                row.data().isEdit = 0;\n                row.cells().invalidate().draw(false);\n              }\n            });\n          }\n        });\n        domMain.on('click', '#cancel-btn', function (e) {\n          //$(this).closest('tr').empty();\n          isEditing = false;\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          row.data().isEdit = 0;\n          isEditing = false;\n\n          if (row.data().roleID) {\n            row.cells().invalidate().draw(false);\n          } else {\n            row.remove().draw(false);\n          } // $scope.doAction('cancel');\n\n        });\n        domMain.on('click', '#user-allot', function (e) {\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          $scope.dialogUser(row.data()); // $scope.doAction('allotUserRole', row.data());\n        });\n        domMain.on('click', '#fun-btn', function (e) {\n          var tr = $(this).closest('tr');\n          var row = table.row(tr); // $scope.doAction('funRole', row.data());\n\n          $scope.dialogFun(row.data());\n        });\n        domMain.on('click', '#cancel-up', function (e) {\n          isEditing = false;\n          $scope.doAction('cancel');\n        });\n        domMain.on('click', '#del-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          $scope.doAction('deleteRole', row.data(), function (returnObj) {\n            if (returnObj) {\n              // row.cells().invalidate().draw(false);\n              row.remove().draw(false);\n            }\n          });\n        });\n        domMain.on('click', '#edit-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          row.data().isEdit = 2;\n          row.cells().invalidate();\n        });\n      }]\n    };\n  }]);\n  directives.initDirective('functionTable', ['$timeout', function ($timeout) {\n    return {\n      restrict: 'A',\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        var domMain = $element;\n        var table;\n        var isEditing = false;\n        $scope.$on(Event.FUNCTIONINFOSINIT, function (event, args) {\n          if (table) {\n            table.destroy();\n          }\n\n          isEditing = false;\n          table = domMain.DataTable({\n            dom: args.data && args.data.length > 0 ? $.ProudSmart.datatable.footerdom : '',\n            language: $.ProudSmart.datatable.language,\n            data: args.data,\n            columns: args.columns,\n            columnDefs: args.columnDefs,\n            scrollX: true\n          });\n        });\n      }]\n    };\n  }]);\n  directives.initDirective('userRoleTable', ['$timeout', '$compile', function ($timeout, $compile) {\n    return {\n      restrict: 'A',\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        var domMain = $element;\n        var table;\n        var isEditing = false;\n        $scope.$on(Event.CURRENTINFOSINIT + \"_userRole\", function (event, args) {\n          if (table) {\n            table.destroy();\n          }\n\n          isEditing = false;\n          table = domMain.DataTable({\n            \"scrollY\": \"300px\",\n            \"scrollCollapse\": true,\n            \"paging\": false,\n            \"searching\": false,\n            \"info\": false,\n            // language: $.ProudSmart.datatable.language,\n            select: $.ProudSmart.datatable.select,\n            order: [[3, \"desc\"]],\n            columns: [$.ProudSmart.datatable.selectCol, {\n              title: \"用户名称\",\n              data: \"userName\"\n            }, {\n              title: \"登录账户（手机/邮箱）\",\n              data: \"emailAddress\"\n            }, {\n              data: \"createDate\",\n              title: \"\",\n              visible: false\n            }],\n            columnDefs: [{\n              orderable: false,\n              targets: 0,\n              render: function render(data, type, full) {\n                if (type == \"display\") {\n                  if (data) {\n                    return '<input class=\"itemCheckBox\" checked type=\"checkbox\">';\n                  } else {\n                    return '<input class=\"itemCheckBox\" type=\"checkbox\">';\n                  }\n                }\n\n                return \"\";\n              }\n            }],\n            data: args.data,\n            rowCallback: function rowCallback(nRow, aData, iDataIndex) {\n              if (aData.selected) {\n                $(nRow).addClass(\"selected\");\n              } else {\n                $(nRow).removeClass(\"selected\");\n              }\n\n              $compile(nRow)($scope);\n            }\n          });\n        });\n      }]\n    };\n  }]);\n  directives.initDirective('roleUserTable', ['$timeout', '$compile', function ($timeout, $compile) {\n    return {\n      restrict: 'A',\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        var domMain = $element;\n        var table;\n        var isEditing = false;\n        $scope.$on(Event.CURRENTINFOSINIT + \"_roleUser\", function (event, args) {\n          if (table) {\n            table.destroy();\n          }\n\n          isEditing = false;\n          table = domMain.DataTable({\n            dom: args.data && args.data.length > 0 ? $.ProudSmart.datatable.footerdom : '',\n            language: $.ProudSmart.datatable.language,\n            data: args.data,\n            columns: [{\n              title: \"选择\",\n              orderable: false,\n              data: \"option\"\n            }, {\n              title: \"角色名称\",\n              data: \"roleName\"\n            }, {\n              title: \"角色描述\",\n              data: \"description\"\n            }],\n            columnDefs: [{\n              targets: 0,\n              data: \"option\",\n              render: function render(data, type, full) {\n                var str = '<input type=\"checkbox\" style=\"width: 19px;height: 25px;\" boxClass=\"icheckbox_minimal-blue\" value=\"' + full.roleID + '\"  name=\"oddBox\" class=\"minimal\" > ';\n\n                if (full.domainID == 1003) {\n                  str = '<input type=\"checkbox\" style=\"width: 19px;height: 25px;\" boxClass=\"icheckbox_minimal-blue\" value=\"' + full.roleID + '\"  name=\"oddBox\" class=\"minimal\" checked=checked> ';\n                }\n\n                return str;\n              }\n            }, {\n              targets: 1,\n              data: \"roleName\",\n              render: function render(data, type, full) {\n                return escape(data);\n              }\n            }, {\n              targets: 2,\n              data: \"description\",\n              render: function render(data, type, full) {\n                return escape(data);\n              }\n            }]\n          });\n        });\n        domMain.on('click', \"td\", function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          var rowData = row.data();\n\n          if (rowData.domainID != 1003) {\n            rowData.domainID = 1003;\n          } else {\n            rowData.domainID = 0;\n          }\n\n          row.cells().invalidate();\n        });\n      }]\n    };\n  }]);\n  directives.initDirective('enterpriseTable', ['$timeout', '$compile', 'growl', function ($timeout, $compile, growl) {\n    return {\n      restrict: 'A',\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        var domMain = $element;\n        var table;\n        var isEditing = false;\n        $scope.$on(Event.USERINFOSINIT + \"_enter\", function (event, args) {\n          if (table) {\n            table.destroy();\n          }\n\n          isEditing = false;\n          table = domMain.DataTable({\n            dom: args.data && args.data.length > 0 ? $.ProudSmart.datatable.footerdom : '',\n            language: $.ProudSmart.datatable.language,\n            data: args.data,\n            columns: args.columns,\n            rowCallback: function rowCallback(nRow, aData, iDataIndex) {\n              $compile(nRow)($scope);\n            },\n            columnDefs: args.columnDefs\n          });\n        });\n        /**\n         * 监听表格初始化后，添加按钮\n         */\n\n        domMain.on('init.dt', function () {\n          var parentDom = $(\".special-btn\").parent();\n          parentDom.html('<a ng-click=\"addEnterprise()\" class=\"btn btn-default btn-sm\"><i class=\"fa fa-plus\"></i><span class=\"hidden-xs\"> 新建企业</span></a>');\n          $compile(parentDom)($scope);\n        });\n        $scope.$on(\"table-search-handle\", function (event, args) {\n          if (args.name == $attrs.name) table.search(args.value).draw();\n        });\n\n        function format(d) {\n          if (d != undefined) {\n            // `d` is the original data object for the row\n            var returnStr = '<table width=\"100%\" class=\"table\">';\n            returnStr += '<tr>';\n            returnStr += '<td>上传logo:</td>';\n            returnStr += '<td><input type=\"file\" id=\"uploadImg\" name=\"uploadImg\" /></td>';\n            returnStr += '</tr>';\n            returnStr += '<tr>';\n            returnStr += '<td>图片展示:</td>';\n            returnStr += '<td><img id=\"imgLook\" name=\"imgLook\" width=\"200\" height=\"50\"  /><span style=\"color: red;\">推荐尺寸200 x 50</span></td>';\n            returnStr += '</tr>';\n            returnStr += '<tr>';\n            returnStr += '<td colspan=\"4\"><div class=\"input-group\">';\n            returnStr += '<a id=\"logo-btn\" class=\"btn btn-default btn-sm\" style=\"margin-right: 15px;\"><i class=\"fa fa-check hidden-lg hidden-md hidden-sm\"></i><span class=\"hidden-xs ng-binding\">保存</span></a>';\n            returnStr += '<a id=\"cancel-btn\" class=\"btn btn-default btn-sm\"><i class=\"fa fa-close hidden-lg hidden-md hidden-sm\"></i><span class=\"hidden-xs ng-binding\">取消</span></a></div></td>';\n            returnStr += '</tr>';\n            returnStr += '</table>';\n            return returnStr;\n          }\n        }\n\n        function formatEdit(d) {\n          if (d != undefined) {\n            // `d` is the original data object for the row\n            var returnStr = '<table width=\"100%\" class=\"table\">';\n            returnStr += '<tr>';\n            returnStr += '<td><label class=\"control-label\">企业版权名称:</label></td>';\n            returnStr += '<td><input class=\"form-control col-xs-6 input-sm\"  type=\"text\" value=\"' + d.copyRight + '\" id=\"enterpriseName\" name=\"enterpriseName\" /></td>';\n            returnStr += '<td><label class=\"control-label\">企业链接:</label></td>';\n            returnStr += '<td><input class=\"form-control col-xs-6 input-sm\"  type=\"text\" value=\"' + d.websiteUrl + '\" id=\"enterpriseUrl\" name=\"enterpriseUrl\" /></td>';\n            returnStr += '<td style=\"text-align: center;\"><div class=\"input-group\">';\n            returnStr += '<a id=\"update-btn\" class=\"btn btn-default btn-sm\" style=\"margin-right: 15px;\"><i class=\"fa fa-check hidden-lg hidden-md hidden-sm\"></i><span class=\"hidden-xs ng-binding\">保存</span></a>';\n            returnStr += '<a id=\"cancel-btn\" class=\"btn btn-default btn-sm\"><i class=\"fa fa-close hidden-lg hidden-md hidden-sm\"></i><span class=\"hidden-xs ng-binding\">取消</span></a></div></td>';\n            returnStr += '</tr>';\n            returnStr += '</table>';\n            return returnStr;\n          }\n        }\n\n        function editEnterprise(d) {\n          if (d != undefined) {\n            var returnStr = '<table width=\"100%\" class=\"table\">';\n            returnStr += '<tr>';\n            returnStr += '<td><label class=\"control-label\">企业名称:</label></td>';\n            returnStr += '<td><input class=\"form-control col-xs-6 input-sm\"  type=\"text\"  ng-model=\"enterpriseObj.name\" id=\"name\" name=\"name\" /></td>';\n            returnStr += '<td><label class=\"control-label\">试用结束时间:</label></td>';\n            returnStr += '<td> <input type=\"text\" class=\"form-control input-sm\"  readonly=\"readonly\" autocomplete=\"off\" drops=\"down\" ng-model=\"enterpriseObj.closingDate\"  date-time-picker ></td>';\n            returnStr += '<td style=\"text-align: center;\"><div class=\"input-group\">';\n            returnStr += '<a id=\"edit-save-btn\" class=\"btn btn-default btn-sm\" style=\"margin-right: 15px;\"><i class=\"fa fa-check hidden-lg hidden-md hidden-sm\"></i><span class=\"hidden-xs ng-binding\">保存</span></a>';\n            returnStr += '<a id=\"cancel-btn\" class=\"btn btn-default btn-sm\"><i class=\"fa fa-close hidden-lg hidden-md hidden-sm\"></i><span class=\"hidden-xs ng-binding\">取消</span></a></div></td>';\n            returnStr += '</tr>';\n            returnStr += '</table>';\n            return returnStr;\n          }\n        }\n\n        domMain.on('click', 'td', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var name = $(this).text();\n          var row = table.row(tr);\n          var rowData = row.data();\n\n          if (name == \" 切换登录\") {\n            $scope.loginin(rowData.userEmail);\n          }\n        });\n        domMain.on('click', '#file-txt', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          var test = row.data();\n          $scope.enterId = test.enterpriseID;\n          row.child(format(row.data())).show();\n        });\n        domMain.on('click', '#copy-right-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          var test = row.data();\n          $scope.enterId = test.enterpriseID;\n          row.child(formatEdit(row.data())).show();\n        });\n        domMain.on('click', '#edit-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          var test = row.data();\n\n          if (test.closingDate) {\n            test.closingDate = new Date(test.closingDate).toISOString().replace(/T/g, ' ').replace(/\\.[\\d]{3}Z/, '');\n          }\n\n          $scope.enterpriseObj = jQuery.extend(true, {}, test);\n          row.child(editEnterprise(row.data())).show();\n          $compile(tr.next())($scope); // location.href = \"#/addEnterprise/\"+test.enterpriseID+\"\";\n        });\n        domMain.on('click', '#uploadImg', function (e) {\n          e.preventDefault();\n          $(\"#fileUp\").trigger('click');\n        });\n        domMain.on('click', '#cancel-btn', function (e) {\n          e.preventDefault();\n          $scope.cancel();\n        });\n        domMain.on('click', '#block', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          $scope.blockClick(row.data());\n        });\n        domMain.on('click', '#logo-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          var test = $scope.uploader.queue;\n\n          for (var i in test) {\n            test[i].upload();\n          } //$scope.enterId = row.date().enterpriseID;\n          // console.log(\"test==\"+test);\n\n        });\n        domMain.on('click', '#update-btn', function (e) {\n          e.preventDefault();\n          var enterpriseName = $(\"#enterpriseName\").val();\n          var enterpriseUrl = $(\"#enterpriseUrl\").val();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          var enterId = $scope.enterId;\n          $scope.editEnterprise(enterpriseName, enterpriseUrl, enterId);\n        });\n        domMain.on('click', '#edit-save-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          var errorStatus = false;\n          var newData = new Date($scope.enterpriseObj.closingDate).Format(\"yyyy-MM-dd\");\n          var ckTime = checkDate(newData);\n\n          if ($scope.enterpriseObj.closingDate && ckTime == false) {\n            growl.warning(\"您选择的试用结束时间小于当前时间\", {});\n            errorStatus = false;\n          } else {\n            errorStatus = true;\n          }\n\n          if ($scope.enterpriseObj && errorStatus) {\n            $scope.modifyEnterpriseInfo($scope.enterpriseObj);\n          }\n        });\n        domMain.on('click', '#role-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          $scope.roleEdit(row.data());\n        });\n      }]\n    };\n  }]);\n  directives.initDirective('clientTable', ['$timeout', 'growl', '$compile', function ($timeout, growl, $compile) {\n    return {\n      restrict: 'A',\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        var domMain = $element;\n        var table;\n        var isEditing = false;\n        $scope.$on(Event.CLIENTMANAGEINIT, function (event, args) {\n          if (table) {\n            table.destroy();\n            domMain.empty(); //还真没有加这一句，添加查看都会出现位移情况\n          }\n\n          isEditing = false;\n          table = domMain.DataTable({\n            dom: args.data && args.data.length > 0 ? $.ProudSmart.datatable.footerdom : '',\n            language: $.ProudSmart.datatable.language,\n            data: args.data,\n            order: [[7, \"desc\"]],\n            columns: args.columns,\n            columnDefs: args.columnDefs\n          });\n        });\n        $scope.$on(\"table-search-handle\", function (event, args) {\n          if (args.name == $attrs.name) table.search(args.value).draw();\n        });\n        /**\n         * 监听表格初始化后，添加按钮\n         */\n\n        domMain.on('init.dt', function () {// var parentDom = $(\".special-btn\").parent();\n          // parentDom.html('<a ng-click=\"addUser()\" class=\"btn btn-default btn-sm\"><i class=\"fa fa-plus\"></i><span class=\"hidden-xs\"> 新建客户</span></a>');\n          // $compile(parentDom)($scope);\n        });\n        domMain.on('click', '#edit-btn', function (e) {\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          var rowData = row.data();\n          $scope.doAction('editClient', rowData); // var tds = $(this).parents(\"tbody\").children();\n          // $.each(tds, function(i, val) {\n          //   var tr1 = $(val).closest('tr');\n          //   var jqob1 = $(val);\n          //   var row1 = table.row(tr1);\n          //   if (row1.data() == undefined) {\n          //     tds.eq(i).remove();\n          //   }\n          //   if (row1.data() != undefined && row1.data().isEdit == 3) {\n          //     tds.eq(i).remove();\n          //   } else {\n          //     var ipts = tds.eq(i).find('input');\n          //     $.each(ipts, function(j, valInp) {\n          //       var txt = $(valInp).val();\n          //       $(valInp).replaceWith(txt);\n          //     });\n          //     var button = \"<li><a id='edit-btn' >编辑信息</a></li>\";\n          //     button += \"<li><a id='del-btn'>删除用户</a></li>\";\n          //     var btnToggle = \"<button type='button' class='btn btn-default btn-sm'>操作</button>\" +\n          //       \"<button type='button' class='btn btn-default btn-sm dropdown-toggle' data-toggle='dropdown'>\" +\n          //       \"<span class='caret'></span>\" +\n          //       \"<span class='sr-only'>Toggle Dropdown</span>\" +\n          //       \"</button>\" +\n          //       \"<ul class='dropdown-menu' role='menu'>\" +\n          //       button +\n          //       \"</ul>\";\n          //     if (row1.data().isEdit == 2) {\n          //       row1.data().isEdit = 0;\n          //       tds.eq(i).find('.btn-group').html(btnToggle);\n          //     }\n          //   }\n          // });\n          // if (!isEditing) {\n          //   isEditing = true;\n          //   var tr = $(this).closest('tr');\n          //   var row = table.row(tr);\n          //   var row1 = row.data();\n          //   row.data().isEdit = 2;\n          //   row.invalidate().draw();\n          // }\n        });\n        domMain.on('click', '#del-btn', function (e) {\n          isEditing = false; // var tds = $(this).parents(\"tbody\").children();\n          // $.each(tds, function(i, val) {\n          //   var tr1 = $(val).closest('tr');\n          //   var row1 = table.row(tr1);\n          //   if (row1.data() == undefined) {\n          //     tds.eq(i).remove();\n          //   }\n          //   if (row1.data() != undefined) {\n          //     var ipts = tds.eq(i).find('input');\n          //     $.each(ipts, function(j, valInp) {\n          //       var txt = $(valInp).val();\n          //       $(valInp).replaceWith(txt);\n          //     });\n          //   }\n          // });\n\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          $scope.doAction('delete', row.data(), function (flg) {\n            if (flg == 0) {\n              row.data().isEdit = 0;\n              row.remove().draw(false);\n            }\n          });\n        });\n      }]\n    };\n  }]);\n  directives.initDirective('clientOtherTable', ['$timeout', 'growl', 'ngDialog', '$compile', function ($timeout, growl, ngDialog, $compile) {\n    return {\n      restrict: 'A',\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        var domMain = $element;\n        var table; // var isEditing = false;\n\n        $scope.$on(Event.CLIENTMANAGEINIT + '_Other', function (event, args) {\n          if (table) {\n            table.destroy();\n            domMain.empty();\n          } // isEditing = false;\n\n\n          table = domMain.DataTable({\n            dom: '',\n            language: $.ProudSmart.datatable.language,\n            data: args,\n            columns: [{\n              title: \"联系人\",\n              data: \"contactName\"\n            }, {\n              title: \"联系人职务\",\n              data: \"contactDuty\"\n            }, {\n              title: \"联系电话\",\n              data: \"contactPhone\"\n            }, {\n              title: \"邮箱地址\",\n              data: \"contactEmail\"\n            }, $.ProudSmart.datatable.optionCol2, {\n              title: \"\",\n              data: \"createTime\",\n              visible: false\n            }],\n            columnDefs: [{\n              \"targets\": 0,\n              \"data\": \"customerName\",\n              \"render\": function render(data, type, full) {\n                // 返回自定义内容\n                if (full.isEdit > 0 && type == \"display\") return \"<input class='form-control col-xs-6' type='text'  maxlength='20'  style='text-indent: 0.5em;' value='\" + escape(data) + \"'>\";else return escape(data);\n              }\n            }, {\n              \"targets\": 1,\n              \"data\": \"contactDuty\",\n              \"render\": function render(data, type, full) {\n                // 返回自定义内容\n                if (full.isEdit > 0 && type == \"display\") {\n                  var str = '<select class=\"bk-select bk-select-l2\" style=\"border: solid 1px #d2d6de;height: 35px;text-indent: 0.5em;\"><option value=\"\"></option>';\n\n                  for (var i in $scope.jobs) {\n                    if ($scope.jobs[i].valueCode == data) {\n                      str += '<option value=\"' + $scope.jobs[i].valueCode + '\" selected=\"selected\">' + $scope.jobs[i].label + '</option>';\n                    }\n\n                    str += '<option value=\"' + $scope.jobs[i].valueCode + '\">' + $scope.jobs[i].label + '</option>';\n                  }\n\n                  str += '</select>';\n                  return str; // return \"<input class='form-control col-xs-6' type='text'  maxlength='20'  style='width:100%;' value='\" + escape(data) + \"'>\";\n                } else {\n                  var item = \"\";\n\n                  for (var i in $scope.jobs) {\n                    if ($scope.jobs[i].valueCode == data) {\n                      item = $scope.jobs[i]['label'];\n                    }\n                  }\n\n                  return item;\n                }\n              }\n            }, {\n              \"targets\": 2,\n              \"data\": \"contactPhone\",\n              \"render\": function render(data, type, full) {\n                // 返回自定义内容\n                if (full.isEdit > 0 && type == \"display\") return \"<input class='form-control col-xs-6' type='text'  maxlength='20'  style='text-indent: 0.5em;' value='\" + escape(data) + \"'>\";else return escape(data);\n              }\n            }, {\n              \"targets\": 3,\n              \"data\": \"contactEmail\",\n              \"render\": function render(data, type, full) {\n                // 返回自定义内容\n                if (full.isEdit > 0 && type == \"display\") return \"<input class='form-control col-xs-6' type='email'  maxlength='320'  style='text-indent: 0.5em;' value='\" + escape(data) + \"'>\";else return escape(data);\n              }\n            }, {\n              \"targets\": 4,\n              \"data\": \"option\",\n              \"render\": function render(data, type, full) {\n                var str = \"<div class='btn-group btn-group-sm'>\";\n\n                if (full.isEdit == 2) {\n                  str += \"<button id='save-btn' class='btn btn-primary' ><i class='fa fa-save hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 保存</span></button>\";\n                  str += \"<button id='cancel-btn' class='btn btn-default' ><i class='fa fa-save hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 取消</span></button>\";\n                  str += \"</div>\";\n                } else {\n                  str += \"<button id='edit-btn' class='btn btn-primary' ><i class='fa fa-edit hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 编辑</span></button>\";\n                  str += \"<button id='del-btn' class='btn btn-default' ><i class='fa fa-trash hidden-lg hidden-md hidden-sm'></i><span class='hidden-xs'> 删除</span></button>\";\n                }\n\n                return str;\n              }\n            }, {\n              \"targets\": 5,\n              \"data\": \"createTime\",\n              \"render\": function render(data, type, full) {\n                // 返回自定义内容\n                if (full.isEdit > 0 && type == \"display\") return \"<input class='form-control col-xs-6' type='email'  maxlength='320'  style='text-indent: 0.5em;' value='\" + escape(data) + \"'>\";else return escape(data);\n              }\n            }]\n          });\n        });\n        /**\n         * 监听表格初始化后，添加按钮\n         */\n\n        domMain.on('click', '#edit-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          row.data().isEdit = 3;\n          $.extend($scope.inputItem.clientOther, row.data());\n          $scope.mistakeMesg.email = false;\n          $scope.mistakeMesg.phone = false;\n          ngDialog.open({\n            template: '../partials/dialogue/client_other_dia.html',\n            className: 'ngdialog-theme-plain',\n            scope: $scope\n          }); // if (!isEditing) {\n          //   isEditing = true;\n          //   row.data().isEdit = 2;\n          //   row.cells().invalidate();\n          //   $compile(tr)($scope);\n          // } else {\n          //   if (row.data().isEdit == 0) {\n          //     growl.warning(\"当前有正编辑的联系人\", {});\n          //     return;\n          //   }\n          // }\n        });\n        domMain.on('click', '#cancel-btn', function (e) {\n          e.stopPropagation(); // isEditing = false;\n\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          row.data().isEdit = 0;\n          $scope.inputFun.doActionOther('cancel', row.data());\n        });\n        domMain.on('click', '#del-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          $scope.inputFun.doActionOther('delete', row.data(), function (flg) {\n            if (flg) {\n              row.remove().draw(false);\n            }\n          });\n        });\n        domMain.on('click', '#save-btn', function (e) {\n          e.stopPropagation();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          var newDate = '';\n          var checkPass = true;\n          $.each(tr.children(), function (j, val1) {\n            var jqob1 = $(val1);\n            var txt2 = $.trim(jqob1.children(\"select\").val());\n\n            if (j == 1) {\n              row.data()[\"contactDuty\"] = txt2;\n            } //把input变为字符串\n\n\n            if (!jqob1.has('button').length && jqob1.has('input').length) {\n              var txt = $.trim(jqob1.children(\"input\").val());\n\n              if (j == 0) {\n                var reg = /^\\s*$/g; //空为true\n\n                if (reg.test(txt)) {\n                  $(val1).addClass('danger');\n                  checkPass = false;\n                  return false;\n                } else {\n                  row.data()[\"contactName\"] = txt;\n                  $(val1).removeClass('danger');\n                  checkPass = true;\n                }\n              }\n\n              if (j == 2) {\n                var reg = /^(((13[0-9]{1})|(15[0-9]{1})|(17[0-9]{1})|(18[0-9]{1}))+\\d{8})$/;\n\n                if (!reg.test(txt)) {\n                  $(val1).addClass('danger');\n                  checkPass = false;\n                  return false;\n                } else {\n                  $(val1).removeClass('danger');\n                  row.data()[\"contactPhone\"] = txt;\n                  checkPass = true;\n                }\n              }\n\n              if (j == 3) {\n                var reg = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\\.[a-zA-Z0-9_-]{2,3}){1,2})$/;\n\n                if (!reg.test(txt)) {\n                  $(val1).addClass('danger');\n                  checkPass = false;\n                  return false;\n                } else {\n                  $(val1).removeClass('danger');\n                  row.data()[\"contactEmail\"] = txt;\n                  checkPass = true;\n                }\n              }\n            }\n          });\n\n          if (checkPass) {\n            $scope.inputFun.doActionOther('save', row.data(), function () {\n              row.data().isEdit = 0;\n              row.cells().invalidate().draw(false);\n            });\n          }\n        });\n      }]\n    };\n  }]);\n  directives.initDirective('dealerTable', ['$timeout', 'ngDialog', 'growl', '$compile', function ($timeout, ngDialog, growl, $compile) {\n    return {\n      restrict: 'A',\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        var domMain = $element;\n        var table;\n        $scope.$on(Event.CLIENTMANAGEINIT + '_dealer', function (event, args) {\n          if (table) {\n            table.destroy();\n            domMain.empty();\n          }\n\n          table = domMain.DataTable({\n            dom: args.data && args.data.length > 0 ? $.ProudSmart.datatable.footerdom : '',\n            language: $.ProudSmart.datatable.language,\n            data: args.data,\n            order: [[7, \"desc\"]],\n            columns: args.columns,\n            columnDefs: args.columnDefs\n          });\n        });\n        domMain.on('click', '#save-btn', function (e) {\n          e.stopPropagation();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          var newDate = '';\n          var checkPass = true;\n          $.each(tr.children(), function (j, val1) {\n            var jqob1 = $(val1);\n            var txt2 = $.trim(jqob1.children(\"select\").val());\n\n            if (j == 3) {\n              row.data()[\"contactDuty\"] = txt2;\n            } //把input变为字符串\n\n\n            if (!jqob1.has('button').length && jqob1.has('input').length) {\n              var txt = $.trim(jqob1.children(\"input\").val());\n\n              if (j == 0) {\n                var reg = /^\\s*$/g; //空为true\n\n                if (reg.test(txt)) {\n                  $(val1).addClass('danger');\n                  checkPass = false;\n                  return false;\n                } else {\n                  row.data()[\"domainPath\"] = txt;\n                  $(val1).removeClass('danger');\n                  checkPass = true;\n                }\n              }\n\n              if (j == 4) {\n                var reg = /^(((13[0-9]{1})|(15[0-9]{1})|(17[0-9]{1})|(18[0-9]{1}))+\\d{8})$/;\n\n                if (!reg.test(txt)) {\n                  $(val1).addClass('danger');\n                  checkPass = false;\n                  return false;\n                } else {\n                  $(val1).removeClass('danger');\n                  row.data()[\"contactPhone\"] = txt;\n                  checkPass = true;\n                }\n              }\n\n              if (j == 5) {\n                var reg = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\\.[a-zA-Z0-9_-]{2,3}){1,2})$/;\n\n                if (!reg.test(txt)) {\n                  $(val1).addClass('danger');\n                  checkPass = false;\n                  return false;\n                } else {\n                  $(val1).removeClass('danger');\n                  row.data()[\"contactEmail\"] = txt;\n                  checkPass = true;\n                }\n              }\n\n              table.cell(jqob1).data(txt);\n            }\n          });\n\n          if (checkPass) {\n            console.log(row.data());\n            $scope.doDealerAction('save', row.data(), function (flg) {\n              if (flg == 0) {\n                row.data().isEdit = 0; // isEditing = false;\n\n                row.cells().invalidate().draw(false);\n              } else {\n                row.data().isEdit = 2;\n              }\n            });\n          }\n        });\n        domMain.on('click', '#cancel-btn', function (e) {\n          e.stopPropagation(); // isEditing = false;\n\n          var tr = $(this).closest('tr');\n          var row = table.row(tr); // row.data().isEdit = 0;\n\n          $scope.doDealerAction('cancel', row.data());\n        });\n        domMain.on('click', '#edit-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          row.data().isEdit = 3;\n          $.extend($scope.inputItem.dealer, row.data());\n          ngDialog.open({\n            template: '../partials/dialogue/dealer_info_dia.html',\n            className: 'ngdialog-theme-plain',\n            scope: $scope\n          }); // row.cells().invalidate();\n          // $compile(tr)($scope);\n          // }\n          // else {\n          //   if (row.data().isEdit == 0) {\n          //     growl.warning(\"当前有正编辑的经销商\", {});\n          //     return;\n          //   }\n          // }\n        });\n        domMain.on('click', '#del-btn', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          $scope.doDealerAction('delete', row.data(), function (returnObj) {\n            if (returnObj != 0) {// row.data().isEdit = 2;\n            } else {\n              row.remove().draw(false);\n            }\n          });\n        });\n      }]\n    };\n  }]);\n  directives.initDirective('ckeditor', ['$timeout', '$compile', function ($timeout, $compile) {\n    return {\n      restrict: 'A',\n      require: 'ngModel',\n      controller: [\"$scope\", \"$element\", \"$attrs\", \"userUIService\", function ($scope, $element, $attrs, userUIService) {\n        require(['ckeditor'], function (ckeditor) {\n          var domMain = $element;\n          var id = $(domMain).attr('id');\n          var url = '' + userUIService.uploadFileUrl + '/api/rest/upload/userUIService/uploadFile';\n          var editor = CKEDITOR.replace(id, {\n            customConfig: '../../toolkit/ckeditor_config_standard.js',\n            //自己配置的config\n            extraPlugins: 'myplugin,colorbutton,colordialog,smiley,iframe,iframedialog,flash,find,font,preview,justify,pagebreak,placeholder,newpage,selectall,templates,forms,notificationaggregator,notification,filetools,uploadwidget,widget,showblocks,codesnippet',\n            height: 500,\n            filebrowserUploadUrl: url,\n            filebrowserBrowseUrl: url,\n            filebrowserImageBrowseUrl: url,\n            filebrowserFlashBrowseUrl: url,\n            filebrowserImageUploadUrl: url,\n            filebrowserFlashUploadUrl: url,\n            stylesSet: [{\n              name: 'Narrow image',\n              type: 'widget',\n              widget: 'image',\n              attributes: {\n                'class': 'image-narrow'\n              }\n            }, {\n              name: 'Wide image',\n              type: 'widget',\n              widget: 'image',\n              attributes: {\n                'class': 'image-wide'\n              }\n            }]\n          });\n          editor.on('fileUploadRequest', function (evt) {\n            var xhr = evt.data.fileLoader.xhr;\n            console.log(\"Hello world\");\n            console.log(\"读取Request\");\n            console.log(\"url\" + evt.data.url);\n            console.log(\"message\" + evt.data.message);\n            console.log(\"filename\" + evt.data.filename);\n            xhr.withCredentials = true;\n          });\n        });\n      }]\n    };\n  }]);\n  directives.initDirective('supplierTable', ['$timeout', function ($timeout) {\n    return {\n      restrict: 'A',\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        var domMain = $element;\n        var table;\n        var isEditing = false;\n        $scope.$on(Event.SUPPLIERMANAGEINIT, function (event, args) {\n          if (table) {\n            table.destroy();\n          }\n\n          isEditing = false;\n          table = domMain.DataTable({\n            dom: args.data && args.data.length > 0 ? $.ProudSmart.datatable.footerdom : '',\n            language: $.ProudSmart.datatable.language,\n            data: args.data,\n            columns: args.columns,\n            columnDefs: args.columnDefs,\n            scrollX: true\n          });\n        });\n        /* Formatting function for row details - modify as you need */\n\n        function format(d) {\n          if (d != undefined) {\n            // `d` is the original data object for the row\n            var returnStr;\n            returnStr = '<table width=\"100%\" class=\"table\">' + '<tr>' + '<td>备注:</td>' + '<td><textarea  id=\"discription\" class=\"col-sm-6\" style=\"height:100px;\" name=\"discription\" maxlength=\"100\"  type=\"text\" >' + d.discription + '</textarea></td>' + '</tr>' + '<tr>' + '<td colspan=\"4\"><div class=\"input-group\">' + '<a id=\"remark-btn\" class=\"btn btn-default btn-sm\" style=\"margin-right: 15px;\"><i class=\"fa fa-check hidden-lg hidden-md hidden-sm\"></i><span class=\"hidden-xs ng-binding\">保存</span></a>' + '<a id=\"cancel-btn\" class=\"btn btn-default btn-sm\"><i class=\"fa fa-close hidden-lg hidden-md hidden-sm\"></i><span class=\"hidden-xs ng-binding\">取消</span></a></div></td>' + '</tr>' + '</table>';\n            return returnStr;\n          }\n        }\n\n        domMain.on('click', 'td', function (e) {\n          e.preventDefault();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n\n          if ($(this).context.cellIndex == 5 && row.data().isEdit == 0) {\n            e.preventDefault();\n            return;\n          }\n\n          if (row.child.isShown()) {} else {\n            if (row.data() != undefined) {\n              tr.addClass('shown');\n            }\n          }\n\n          if (row.data() != undefined && row.data().isEdit == 1) {\n            row.data().isEdit = 2;\n            var tds = $(this).parents(\"tr\").children();\n            $.each(tds, function (i, val) {\n              var jqob = $(val);\n\n              if (i == 4) {\n                return true;\n              }\n\n              if (jqob.has('button').length) {\n                var put1 = $('<a id=\"save-btn\" style=\"margin-right: 15px;\" class=\"btn btn-default btn-sm\"><i class=\"fa fa-check\"></i><span class=\"hidden-xs ng-binding\">保存</span></a><a  id=\"cancel-btn\" class=\"btn btn-default btn-sm\"><i class=\"fa fa-close\"></i><span class=\"hidden-xs ng-binding\">取消</span></a>');\n                jqob.html(put1);\n                return true;\n              } //跳过第1项 序号,按钮\n\n\n              var txt = jqob.text();\n\n              if (i == 3 && txt == \"\") {\n                var put1 = $(\"<input class='form-control  col-xs-6' style='width:100%;'   maxlength='30'  type='text'  >\");\n                put1.val(txt);\n                jqob.html(put1);\n                return true;\n              }\n\n              var put = $(\"<input class='form-control  col-xs-6' style='width:100%;border: 1px solid #F18282;'  maxlength='30'  type='text'  >\");\n              put.val(txt);\n              jqob.html(put);\n            });\n          }\n        });\n        domMain.on('click', '#save-btn', function (e) {\n          e.stopPropagation();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          var checkPass = true;\n          var selectRow = table.row('.shown');\n          $.each($('.shown').children(), function (j, val1) {\n            var jqob1 = $(val1); //把input变为字符串\n\n            if (!jqob1.has('button').length && jqob1.has('input').length) {\n              var txt = jqob1.children(\"input\").val();\n\n              if (txt) {\n                if (j == 2) {\n                  var reg = /^\\w+((-\\w+)|(\\.\\w+))*\\@[A-Za-z0-9]+((\\.|-)[A-Za-z0-9]+)*\\.[A-Za-z0-9]+$/;\n                  var reg1 = /^(((13[0-9]{1})|(15[0-9]{1})|(17[0-9]{1})|(18[0-9]{1}))+\\d{8})$/;\n\n                  if (!reg.test(txt)) {\n                    if (!reg1.test(txt)) {\n                      $(val1).addClass('danger');\n                      checkPass = false;\n                      return false;\n                    } else {\n                      selectRow.data()[\"userEmalStatus\"] = \"phone\";\n                    }\n                  } else {\n                    selectRow.data()[\"userEmalStatus\"] = \"email\";\n                  }\n                }\n\n                $(val1).removeClass('danger'); //                                    jqob1.html(txt);\n\n                table.cell(jqob1).data(txt); //修改DataTables对象的数据\n              } else {\n                if (j == 0 || j == 1) {\n                  table.cell(jqob1).data(txt);\n                  $(val1).addClass('danger');\n                  checkPass = false;\n                  return false;\n                }\n              }\n            }\n          });\n          var ipts = tr.parent().find('input'); // $.each(ipts, function(i, val) {\n          //   var txt = $(val).val();\n          //   var attrname = $(val).attr('name');\n          //   selectRow.data()[attrname] = txt;\n          // });\n\n          if (checkPass) {\n            isEditing = false;\n            $scope.doAction('save', selectRow.data());\n          }\n        });\n        domMain.on('click', '#cancel-btn', function (e) {\n          e.stopPropagation();\n          isEditing = false;\n          $scope.doAction('cancel');\n        });\n        domMain.on('click', '#edit-btn', function (e) {\n          e.preventDefault();\n          isEditing = false;\n          var tds = $(this).parents(\"tbody\").children();\n          $.each(tds, function (i, val) {\n            var tr1 = $(val).closest('tr');\n            var row1 = table.row(tr1);\n\n            if (row1.data() == undefined) {\n              tds.eq(i).remove();\n            }\n\n            if (row1.data() != undefined && row1.data().isEdit == 3) {\n              tds.eq(i).remove();\n            } else {\n              var ipts = tds.eq(i).find('input');\n              $.each(ipts, function (j, valInp) {\n                var txt = $(valInp).val();\n                $(valInp).replaceWith(txt);\n              });\n            }\n          });\n\n          if (!isEditing) {\n            isEditing = true;\n            var tr = $(this).closest('tr');\n            var row = table.row(tr);\n            row.data().isEdit = 1;\n          }\n        });\n        domMain.on('click', '#del-btn', function (e) {\n          e.preventDefault();\n          isEditing = false;\n          var tds = $(this).parents(\"tbody\").children();\n          $.each(tds, function (i, val) {\n            var tr1 = $(val).closest('tr');\n            var row1 = table.row(tr1);\n\n            if (row1.data() == undefined) {\n              tds.eq(i).remove();\n            }\n\n            if (row1.data() != undefined) {\n              var ipts = tds.eq(i).find('input');\n              $.each(ipts, function (j, valInp) {\n                var txt = $(valInp).val();\n                $(valInp).replaceWith(txt);\n              });\n            }\n          });\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          $scope.doAction('delete', row.data());\n        });\n      }]\n    };\n  }]);\n  directives.initDirective('systemTable', ['$timeout', '$compile', function ($timeout, $compile) {\n    return {\n      restrict: 'A',\n      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n        var domMain = $element;\n        var table;\n        var isEditing = false;\n        $scope.$on(Event.USERINFOSINIT + \"_system\", function (event, args) {\n          if (table) {\n            table.destroy();\n          }\n\n          isEditing = false;\n          table = domMain.DataTable({\n            dom: args.data && args.data.length > 0 ? $.ProudSmart.datatable.footerdom : '',\n            language: $.ProudSmart.datatable.language,\n            data: args.data,\n            columns: args.columns,\n            \"aaSorting\": [[1, \"desc\"]],\n            columnDefs: args.columnDefs\n          });\n        });\n        domMain.on('init.dt', function () {\n          var parentDom = $(\".special-btn\").parent();\n          parentDom.html('<a href=\"#/mailedit\" class=\"pull-right btn btn-default btn-sm\"><i class=\"fa fa-plus\"></i><span class=\"hidden-xs\"> 新增</span></a>');\n          $compile(parentDom)($scope);\n        });\n        $scope.$on(\"table-search-handle\", function (event, args) {\n          if (args.name == $attrs.name) table.search(args.value).draw();\n        });\n        domMain.on('click', '#update-btn', function (e) {\n          e.stopPropagation();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          location.href = \"#/mailedit/\" + row.data().messageId + \"\";\n        });\n        domMain.on('click', '#delete-btn', function (e) {\n          e.stopPropagation();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          $scope.deleteMessage(row.data());\n        });\n        domMain.on('click', '#publish-btn', function (e) {\n          e.stopPropagation();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          $scope.publishMessage(row.data());\n        });\n        domMain.on('click', '#preview-btn', function (e) {\n          e.stopPropagation();\n          var tr = $(this).closest('tr');\n          var row = table.row(tr);\n          $scope.preview(row.data());\n        });\n      }]\n    };\n  }]);\n});"],"sourceRoot":"/source/"}