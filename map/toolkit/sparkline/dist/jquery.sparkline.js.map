{"version":3,"sources":["toolkit/sparkline/dist/jquery.sparkline.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","document","Math","undefined","factory","$","getDefaults","createClass","SPFormat","clipval","quartile","normalizeValue","normalizeValues","remove","isNumber","all","addCSS","ensureArray","formatNumber","RangeMap","MouseHandler","Tooltip","barHighlightMixin","line","bar","tristate","discrete","bullet","pie","box","VShape","VCanvas_base","VCanvas_canvas","VCanvas_vml","pending","UNSET_OPTION","shapeCount","common","type","lineColor","fillColor","defaultPixelsPerValue","width","height","composite","tagValuesAttribute","tagOptionsPrefix","enableTagOptions","enableHighlight","highlightLighten","tooltipSkipNull","tooltipPrefix","tooltipSuffix","disableHiddenCheck","numberFormatter","numberDigitGroupCount","numberDigitGroupSep","numberDecimalMark","disableTooltips","disableInteraction","spotColor","highlightSpotColor","highlightLineColor","spotRadius","minSpotColor","maxSpotColor","lineWidth","normalRangeMin","normalRangeMax","normalRangeColor","drawNormalOnTop","chartRangeMin","chartRangeMax","chartRangeMinX","chartRangeMaxX","tooltipFormat","barColor","negBarColor","stackedBarColor","zeroColor","nullColor","zeroAxis","barWidth","barSpacing","chartRangeClip","colorMap","posBarColor","zeroBarColor","tooltipValueLookups","map","-1","0","1","lineHeight","thresholdColor","thresholdValue","targetColor","targetWidth","performanceColor","rangeColors","base","fields","r","p","t","offset","sliceColors","borderWidth","borderColor","raw","boxLineColor","boxFillColor","whiskerColor","outlierLineColor","outlierFillColor","medianColor","showOutliers","outlierIQR","target","tooltipFormatFieldlistKey","lq","med","uq","lo","ro","lw","rw","Class","args","this","init","apply","arguments","length","extend","_super","Array","slice","call","unshift","cls","SPFormatClass","fre","precre","format","fclass","render","fieldset","lookups","options","match","token","lookupkey","fieldvalue","prec","self","replace","exec","get","spformat","val","min","max","values","q","vl","floor","nf","parseFloat","vals","i","result","filter","push","num","isNaN","isFinite","groupsize","groupsep","decsep","toString","toFixed","split","inArray","splice","join","arr","ignoreNull","isArray","css","tag","createStyleSheet","cssText","createElement","getElementsByTagName","appendChild","body","style","WebkitAppearance","fn","simpledraw","useExisting","interact","mhandler","data","sparkline","canvas","el","getContext","namespaces","v","add","innerWidth","innerHeight","registerCanvas","cleardraw","reset","RangeMapClass","key","range","rangelist","hasOwnProperty","indexOf","Infinity","value","range_map","$el","currentPageX","currentPageY","splist","tooltip","over","displayTooltips","highlightEnabled","registerSparkline","sp","updateDisplay","$canvas","mouseenter","proxy","mouseleave","click","mouseclick","removeTooltip","e","clickEvent","Event","originalEvent","sparklines","trigger","unbind","bind","mousemove","pageX","pageY","currentEl","updatePosition","spcount","needsRefresh","clearRegionHighlight","tooltiphtml","changeEvent","localX","left","localY","top","setRegionHighlight","getCurrentRegionTooltip","setContent","disableHighlight","sizeStyle","tooltipClassname","sizetipStyle","container","tooltipOffsetX","tooltipOffsetY","sizetip","id","class","appendTo","offsetLeft","offsetTop","hidden","window","updateWindowDims","scrollTop","scrollLeft","scrollRight","getSize","content","html","visibility","x","y","mousex","mousey","userValues","userOptions","each","$this","tmp","getAttribute","innerHTML","alert","is","parents","defaults","sparkline_display_visible","pl","done","closest","extendedOptions","tagOptionType","tagValCache","getTagSetting","mergedOptions","pairs","keyval","prefix","substr","defaultval","tagOption","_base","disabled","currentRegion","initTarget","interactive","canvasWidth","pixelWidth","canvasHeight","pixelHeight","getRegion","newRegion","removeHighlight","renderHighlight","changeHighlight","highlight","formats","formatlen","text","showFields","showFieldsKey","newFields","fv","formatter","fieldlen","j","header","entries","getCurrentRegionFields","isNull","suffix","calcHighlightColor","color","parse","mult","rgbnew","highlightColor","lighten","round","parseInt","newShapes","shapeids","regionShapes","renderRegion","replaceWithShapes","newShape","replaceWithShape","shapes","ids","append","vertices","regionMap","xvalues","yvalues","yminmax","hightlightSpotId","lastShapeId","highlightSpot","highlightLine","vertex","drawCircle","highlightSpotId","insertAfterShape","drawLine","canvasTop","highlightLineId","removeShapeId","scanValues","isStr","valcount","Number","maxy","maxyorg","miny","minyorg","maxx","minx","processRangeOptions","drawNormalRange","canvasLeft","rangey","ytop","drawRect","rangex","yvallast","path","paths","xnext","xpos","last","next","yvalcount","lineShapes","fillShapes","plen","valueSpots","hlSpotsEnabled","ceil","pop","drawShape","getLastShapeId","isStackString","groupMin","groupMax","stackRanges","numValues","vlen","xaxisOffset","clipMin","clipMax","stacked","vlist","slen","svals","yoffset","stackMin","stackMax","totalBarWidth","stackTotals","stackRangesNeg","abs","canvasHeightEf","colorMapByIndex","colorMapByValue","calcColor","stacknum","valuenum","newColor","yoffsetNeg","minPlotted","allMin","halfHeight","interval","itemWidth","pheight","valueShapes","regiondata","shapeid","getShapeAt","fieldkey","region","shape","renderRange","renderPerformance","renderTarget","rn","rangeval","rangewidth","perfval","perfwidth","targetval","targettop","targetheight","p1","t0","total","radius","percent","newslice","renderSlice","start","end","circle","PI","drawPieSlice","field","quartiles","loutlier","routlier","lwhisker","rwhisker","iqr","q1","q2","q3","size","unitSize","minValue","maxValue","sort","a","b","appendShape","_pxregex","x1","y1","x2","y2","_genShape","startAngle","endAngle","getElement","_insert","_calculatePixelDims","shapetype","shapeargs","display","verticalAlign","shapeseq","currentTargetShapeId","_getContext","context","strokeStyle","fillStyle","clearRect","_drawShape","beginPath","moveTo","lineTo","stroke","fill","targetX","targetY","isPointInPath","_drawCircle","arc","_drawPieSlice","closePath","_drawRect","sid","first","shapemap","groupel","position","overflow","margin","padding","insertAdjacentHTML","group","children","rendered","prerender","initial","closed","vpath","startx","starty","endx","endy","cos","sin","vel","existing","outerHTML","removeChild","define","amd","jQuery"],"mappings":"AAAA,SAASA,QAAQC,GAAwT,OAAtOD,QAArD,mBAAXE,QAAoD,iBAApBA,OAAOC,SAAmC,SAAiBF,GAAO,cAAcA,GAA2B,SAAiBA,GAAO,OAAOA,GAAyB,mBAAXC,QAAyBD,EAAIG,cAAgBF,QAAUD,IAAQC,OAAOG,UAAY,gBAAkBJ,IAAyBA,IA6MxV,SAAWK,EAAUC,EAAMC,GAEzB,IAAWC,EAAAA,EAMR,SAAUC,GACX,aAEA,IACIC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EAEAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EAGAC,EACAC,EACAC,EACAC,EACAC,EAhCAC,EAAe,GAiCfC,EAAa,EAKjB9B,EAAc,WACZ,MAAO,CAEL+B,OAAQ,CACNC,KAAM,OACNC,UAAW,OACXC,UAAW,OACXC,sBAAuB,EACvBC,MAAO,OACPC,OAAQ,OACRC,WAAW,EACXC,mBAAoB,SACpBC,iBAAkB,QAClBC,kBAAkB,EAClBC,iBAAiB,EACjBC,iBAAkB,IAClBC,iBAAiB,EACjBC,cAAe,GACfC,cAAe,GACfC,oBAAoB,EACpBC,iBAAiB,EACjBC,sBAAuB,EACvBC,oBAAqB,IACrBC,kBAAmB,IACnBC,iBAAiB,EACjBC,oBAAoB,GAGtBpC,KAAM,CACJqC,UAAW,OACXC,mBAAoB,OACpBC,mBAAoB,OACpBC,WAAY,IACZC,aAAc,OACdC,aAAc,OACdC,UAAW,EACXC,eAAgBhE,EAChBiE,eAAgBjE,EAChBkE,iBAAkB,OAClBC,iBAAiB,EACjBC,cAAepE,EACfqE,cAAerE,EACfsE,eAAgBtE,EAChBuE,eAAgBvE,EAChBwE,cAAe,IAAInE,EAAS,4EAG9BgB,IAAK,CACHoD,SAAU,UACVC,YAAa,OACbC,gBAAiB,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,WAC/FC,UAAW5E,EACX6E,UAAW7E,EACX8E,UAAU,EACVC,SAAU,EACVC,WAAY,EACZX,cAAerE,EACfoE,cAAepE,EACfiF,gBAAgB,EAChBC,SAAUlF,EACVwE,cAAe,IAAInE,EAAS,gFAG9BiB,SAAU,CACRyD,SAAU,EACVC,WAAY,EACZG,YAAa,OACbT,YAAa,OACbU,aAAc,OACdF,SAAU,GACVV,cAAe,IAAInE,EAAS,+DAC5BgF,oBAAqB,CACnBC,IAAK,CACHC,KAAM,OACNC,EAAK,OACLC,EAAK,SAKXlE,SAAU,CACRmE,WAAY,OACZC,eAAgB3F,EAChB4F,eAAgB,EAChBvB,cAAerE,EACfoE,cAAepE,EACfiF,gBAAgB,EAChBT,cAAe,IAAInE,EAAS,kCAG9BmB,OAAQ,CACNqE,YAAa,OACbC,YAAa,EAEbC,iBAAkB,OAClBC,YAAa,CAAC,UAAW,UAAW,WACpCC,KAAMjG,EAENwE,cAAe,IAAInE,EAAS,mCAC5BgF,oBAAqB,CACnBa,OAAQ,CACNC,EAAG,QACHC,EAAG,cACHC,EAAG,YAKT5E,IAAK,CACH6E,OAAQ,EACRC,YAAa,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,WAC3FC,YAAa,EACbC,YAAa,OACbjC,cAAe,IAAInE,EAAS,6EAG9BqB,IAAK,CACHgF,KAAK,EACLC,aAAc,OACdC,aAAc,OACdC,aAAc,OACdC,iBAAkB,OAClBC,iBAAkB,OAClBC,YAAa,OACbC,cAAc,EACdC,WAAY,IACZtD,WAAY,IACZuD,OAAQnH,EACR6F,YAAa,OACbxB,cAAerE,EACfoE,cAAepE,EACfwE,cAAe,IAAInE,EAAS,+BAC5B+G,0BAA2B,QAC3B/B,oBAAqB,CACnBa,OAAQ,CACNmB,GAAI,iBACJC,IAAK,SACLC,GAAI,iBACJC,GAAI,eACJC,GAAI,gBACJC,GAAI,eACJC,GAAI,qBAadvH,EAAc,WAGZ,IAAIwH,EAAOC,EAwBX,OAtBAD,EAAQ,WACNE,KAAKC,KAAKC,MAAMF,KAAMG,YAGD,EAAnBA,UAAUC,QACRD,UAAU,IACZL,EAAM/H,UAAYK,EAAEiI,OAAO,IAAIF,UAAU,GAAMA,UAAUA,UAAUC,OAAS,IAC5EN,EAAMQ,OAASH,UAAU,GAAGpI,WAE5B+H,EAAM/H,UAAYoI,UAAUA,UAAUC,OAAS,GAG1B,EAAnBD,UAAUC,UACZL,EAAOQ,MAAMxI,UAAUyI,MAAMC,KAAKN,UAAW,GAAI,IAC5CO,QAAQZ,EAAM/H,WACnBK,EAAEiI,OAAOH,MAAM9H,EAAG2H,KAGpBD,EAAM/H,UAAYoI,UAAU,GAG9BL,EAAM/H,UAAU4I,IAAMb,GAWxB1H,EAAEwI,cAAgBrI,EAAWD,EAAY,CACvCuI,IAAK,8BACLC,OAAQ,eACRb,KAAM,SAAcc,EAAQC,GAC1BhB,KAAKe,OAASA,EACdf,KAAKgB,OAASA,GAEhBC,OAAQ,SAAgBC,EAAUC,EAASC,GACzC,IAEIC,EACAC,EACAC,EACAC,EACAC,EANAC,EAAO1B,KACP5B,EAAS8C,EAMb,OAAOlB,KAAKe,OAAOY,QAAQ3B,KAAKa,IAAK,WAenC,OAbAS,EAAQnB,UAAU,GAClBoB,EAAYpB,UAAU,IACtBkB,EAAQK,EAAKZ,OAAOc,KAAKN,KAGvBG,EAAOJ,EAAM,GACbC,EAAQD,EAAM,IAEdI,GAAO,GAGTD,EAAapD,EAAOkD,MAEDpJ,EACV,GAGLqJ,GAAaJ,GAAWA,EAAQI,GACzBJ,EAAQI,GAENM,IAEFV,EAAQI,GAAWM,IAAIL,IAAeA,EAEtCL,EAAQI,GAAWC,IAAeA,GAIzC3I,EAAS2I,KAETA,EADEJ,EAAQS,IAAI,mBACDT,EAAQS,IAAI,kBAAZT,CAA+BI,GAE/BvI,EAAauI,EAAYC,EAAML,EAAQS,IAAI,yBAA0BT,EAAQS,IAAI,uBAAwBT,EAAQS,IAAI,uBAI/HL,QAKbpJ,EAAE0J,SAAW,SAAUf,EAAQC,GAC7B,OAAO,IAAIzI,EAASwI,EAAQC,IAG9BxI,EAAU,SAAiBuJ,EAAKC,EAAKC,GACnC,OAAIF,EAAMC,EACDA,EAGCC,EAANF,EACKE,EAGFF,GAGTtJ,EAAW,SAAkByJ,EAAQC,GACnC,IAAIC,EAEJ,OAAU,IAAND,GACFC,EAAKnK,EAAKoK,MAAMH,EAAO9B,OAAS,GACzB8B,EAAO9B,OAAS,EAAI8B,EAAOE,IAAOF,EAAOE,EAAK,GAAKF,EAAOE,IAAO,GAEpEF,EAAO9B,OAAS,GAElBgC,GAAMF,EAAO9B,OAAS+B,EAAIA,GAAK,GACnB,GAAKD,EAAOjK,EAAKoK,MAAMD,IAAOF,EAAOjK,EAAKoK,MAAMD,GAAM,IAAM,EAAIF,EAAOE,EAAK,IAGxFA,GAAMF,EAAO9B,OAAS+B,EAAI,GAAK,GACnB,GAAKD,EAAOjK,EAAKoK,MAAMD,IAAOF,EAAOjK,EAAKoK,MAAMD,GAAM,IAAM,EAAIF,EAAOE,EAAK,IAK9F1J,EAAiB,SAAwBqJ,GACvC,IAAIO,EAEJ,OAAQP,GACN,IAAK,YACHA,EAAM7J,EACN,MAEF,IAAK,OACH6J,EAAM,KACN,MAEF,IAAK,OACHA,GAAM,EACN,MAEF,IAAK,QACHA,GAAM,EACN,MAEF,QAGMA,IAFJO,EAAKC,WAAWR,MAGdA,EAAMO,GAKZ,OAAOP,GAGTpJ,EAAkB,SAAyB6J,GACzC,IAAIC,EACAC,EAAS,GAEb,IAAKD,EAAID,EAAKpC,OAAQqC,KACpBC,EAAOD,GAAK/J,EAAe8J,EAAKC,IAGlC,OAAOC,GAGT9J,EAAS,SAAgB4J,EAAMG,GAC7B,IAAIF,EACAL,EACAM,EAAS,GAEb,IAAKD,EAAI,EAAGL,EAAKI,EAAKpC,OAAQqC,EAAIL,EAAIK,IAChCD,EAAKC,KAAOE,GACdD,EAAOE,KAAKJ,EAAKC,IAIrB,OAAOC,GAGT7J,EAAW,SAAkBgK,GAC3B,OAAQC,MAAMP,WAAWM,KAASE,SAASF,IAG7C5J,EAAe,SAAsB4J,EAAKpB,EAAMuB,EAAWC,EAAUC,GACnE,IAAI5E,EAAGmE,EAQP,IAPAI,IAAgB,IAATpB,EAAiBc,WAAWM,GAAKM,WAAaN,EAAIO,QAAQ3B,IAAO4B,MAAM,KAC9E/E,GAAKA,EAAIlG,EAAEkL,QAAQ,IAAKT,IAAQ,EAAIA,EAAIzC,OAAS9B,GAEzCuE,EAAIzC,SACVyC,EAAIvE,GAAK4E,GAGNT,EAAInE,EAAI0E,EAAe,EAAJP,EAAOA,GAAKO,EAClCH,EAAIU,OAAOd,EAAG,EAAGQ,GAGnB,OAAOJ,EAAIW,KAAK,KAKlB1K,EAAM,SAAaiJ,EAAK0B,EAAKC,GAC3B,IAAIjB,EAEJ,IAAKA,EAAIgB,EAAIrD,OAAQqC,KACnB,KAAIiB,GAAyB,OAAXD,EAAIhB,KAElBgB,EAAIhB,KAAOV,EACb,OAAO,EAIX,OAAO,GAeT/I,EAAc,SAAqB+I,GACjC,OAAO3J,EAAEuL,QAAQ5B,GAAOA,EAAM,CAACA,IAIjChJ,EAAS,SAAgB6K,GACvB,IAAIC,EAEA7L,EAAS8L,iBACX9L,EAAS8L,mBAAmBC,QAAUH,IAEtCC,EAAM7L,EAASgM,cAAc,UACzB3J,KAAO,WACXrC,EAASiM,qBAAqB,QAAQ,GAAGC,YAAYL,GACrDA,EAAmD,iBAAxC7L,EAASmM,KAAKC,MAAMC,iBAE/B,YAAc,aAAeT,IAKjCxL,EAAEkM,GAAGC,WAAa,SAAU9J,EAAOC,EAAQ8J,EAAaC,GACtD,IAAIpF,EAAQqF,EAEZ,GAAIF,IAAgBnF,EAASW,KAAK2E,KAAK,iBACrC,OAAOtF,EAGT,IAA8B,IAA1BjH,EAAEkM,GAAGM,UAAUC,OAEjB,OAAO,EACF,GAAIzM,EAAEkM,GAAGM,UAAUC,SAAW3M,EAAW,CAE9C,IAAI4M,EAAK9M,EAASgM,cAAc,UAEhC,GAAOc,EAAGC,YAAcD,EAAGC,WAAW,MAEpC3M,EAAEkM,GAAGM,UAAUC,OAAS,SAAUpK,EAAOC,EAAQ2E,EAAQoF,GACvD,OAAO,IAAI1K,EAAeU,EAAOC,EAAQ2E,EAAQoF,QAE9C,CAAA,IAAIzM,EAASgN,YAAehN,EAASgN,WAAWC,EAUrD,OADA7M,EAAEkM,GAAGM,UAAUC,QAAS,EAPxB7M,EAASgN,WAAWE,IAAI,IAAK,gCAAiC,gBAE9D9M,EAAEkM,GAAGM,UAAUC,OAAS,SAAUpK,EAAOC,EAAQ2E,EAAQoF,GACvD,OAAO,IAAIzK,EAAYS,EAAOC,EAAQ2E,KAwB5C,OAfI5E,IAAUvC,IACZuC,EAAQrC,EAAE4H,MAAMmF,cAGdzK,IAAWxC,IACbwC,EAAStC,EAAE4H,MAAMoF,eAGnB/F,EAASjH,EAAEkM,GAAGM,UAAUC,OAAOpK,EAAOC,EAAQsF,KAAMyE,IACpDC,EAAWtM,EAAE4H,MAAM2E,KAAK,mBAGtBD,EAASW,eAAehG,GAGnBA,GAGTjH,EAAEkM,GAAGgB,UAAY,WACf,IAAIjG,EAASW,KAAK2E,KAAK,gBAEnBtF,GACFA,EAAOkG,SAIXnN,EAAEoN,cAAgBtM,EAAWZ,EAAY,CACvC2H,KAAM,SAAczC,GAClB,IAAIiI,EACAC,EACAC,EAAY,GAEhB,IAAKF,KAAOjI,EACNA,EAAIoI,eAAeH,IAAuB,iBAARA,IAAwC,EAApBA,EAAII,QAAQ,QACpEH,EAAQD,EAAIpC,MAAM,MACZ,GAAyB,IAApBqC,EAAM,GAAGtF,QAAgB0F,EAAAA,EAAWvD,WAAWmD,EAAM,IAChEA,EAAM,GAAyB,IAApBA,EAAM,GAAGtF,OAAe0F,EAAAA,EAAWvD,WAAWmD,EAAM,IAC/DA,EAAM,GAAKlI,EAAIiI,GACfE,EAAU/C,KAAK8C,IAInB1F,KAAKxC,IAAMA,EACXwC,KAAK2F,UAAYA,IAAa,GAEhC9D,IAAK,SAAakE,GAChB,IACItD,EACAiD,EACAhD,EAHAiD,EAAY3F,KAAK2F,UAKrB,IAAKjD,EAAS1C,KAAKxC,IAAIuI,MAAY7N,EACjC,OAAOwK,EAGT,GAAIiD,EACF,IAAKlD,EAAIkD,EAAUvF,OAAQqC,KAGzB,IAFAiD,EAAQC,EAAUlD,IAER,IAAMsD,GAASL,EAAM,IAAMK,EACnC,OAAOL,EAAM,GAKnB,OAAOxN,KAIXE,EAAE4N,UAAY,SAAUxI,GACtB,OAAO,IAAItE,EAASsE,IAGtBrE,EAAeb,EAAY,CACzB2H,KAAM,SAAc6E,EAAI1D,GACtB,IAAI6E,EAAM7N,EAAE0M,GACZ9E,KAAKiG,IAAMA,EACXjG,KAAKoB,QAAUA,EACfpB,KAAKkG,aAAe,EACpBlG,KAAKmG,aAAe,EACpBnG,KAAK8E,GAAKA,EACV9E,KAAKoG,OAAS,GACdpG,KAAKqG,QAAU,KACfrG,KAAKsG,MAAO,EACZtG,KAAKuG,iBAAmBnF,EAAQS,IAAI,mBACpC7B,KAAKwG,kBAAoBpF,EAAQS,IAAI,qBAEvC4E,kBAAmB,SAA2BC,GAC5C1G,KAAKoG,OAAOxD,KAAK8D,GAEb1G,KAAKsG,MACPtG,KAAK2G,iBAGTtB,eAAgB,SAAwBR,GACtC,IAAI+B,EAAUxO,EAAEyM,EAAOA,QACvB7E,KAAK6E,OAASA,GACd7E,KAAK4G,QAAUA,GACPC,WAAWzO,EAAE0O,MAAM9G,KAAK6G,WAAY7G,OAC5C4G,EAAQG,WAAW3O,EAAE0O,MAAM9G,KAAK+G,WAAY/G,OAC5C4G,EAAQI,MAAM5O,EAAE0O,MAAM9G,KAAKiH,WAAYjH,QAEzCuF,MAAO,SAAe2B,GACpBlH,KAAKoG,OAAS,GAEVpG,KAAKqG,SAAWa,IAClBlH,KAAKqG,QAAQzN,SACboH,KAAKqG,QAAUnO,IAGnB+O,WAAY,SAAoBE,GAC9B,IAAIC,EAAahP,EAAEiP,MAAM,kBACzBD,EAAWE,cAAgBH,EAC3BC,EAAWG,WAAavH,KAAKoG,OAC7BpG,KAAKiG,IAAIuB,QAAQJ,IAEnBP,WAAY,SAAoBM,GAC9B/O,EAAEJ,EAASmM,MAAMsD,OAAO,iBACxBrP,EAAEJ,EAASmM,MAAMuD,KAAK,gBAAiBtP,EAAE0O,MAAM9G,KAAK2H,UAAW3H,OAC/DA,KAAKsG,MAAO,EACZtG,KAAKkG,aAAeiB,EAAES,MACtB5H,KAAKmG,aAAegB,EAAEU,MACtB7H,KAAK8H,UAAYX,EAAE9H,QAEdW,KAAKqG,SAAWrG,KAAKuG,kBACxBvG,KAAKqG,QAAU,IAAIjN,EAAQ4G,KAAKoB,SAChCpB,KAAKqG,QAAQ0B,eAAeZ,EAAES,MAAOT,EAAEU,QAGzC7H,KAAK2G,iBAEPI,WAAY,WACV3O,EAAEJ,EAASmM,MAAMsD,OAAO,iBACxB,IAIIhF,EAJA2D,EAASpG,KAAKoG,OACd4B,EAAU5B,EAAOhG,OACjB6H,GAAe,EAWnB,IARAjI,KAAKsG,MAAO,EACZtG,KAAK8H,UAAY,KAEb9H,KAAKqG,UACPrG,KAAKqG,QAAQzN,SACboH,KAAKqG,QAAU,MAGZ5D,EAAI,EAAGA,EAAIuF,EAASvF,IAClB2D,EAAO3D,GAELyF,yBACLD,GAAe,GAIfA,GACFjI,KAAK6E,OAAO5D,UAGhB0G,UAAW,SAAmBR,GAC5BnH,KAAKkG,aAAeiB,EAAES,MACtB5H,KAAKmG,aAAegB,EAAEU,MACtB7H,KAAK8H,UAAYX,EAAE9H,OAEfW,KAAKqG,SACPrG,KAAKqG,QAAQ0B,eAAeZ,EAAES,MAAOT,EAAEU,OAGzC7H,KAAK2G,iBAEPA,cAAe,WACb,IAMIwB,EAEA1F,EACAC,EACA0F,EAVAhC,EAASpG,KAAKoG,OACd4B,EAAU5B,EAAOhG,OACjB6H,GAAe,EACfzJ,EAASwB,KAAK4G,QAAQpI,SACtB6J,EAASrI,KAAKkG,aAAe1H,EAAO8J,KACpCC,EAASvI,KAAKmG,aAAe3H,EAAOgK,IAOxC,GAAKxI,KAAKsG,KAAV,CAIA,IAAK7D,EAAI,EAAGA,EAAIuF,EAASvF,KAEvBC,EADK0D,EAAO3D,GACAgG,mBAAmBzI,KAAK8H,UAAWO,EAAQE,MAGrDN,GAAe,GAInB,GAAIA,EAAc,CAKhB,IAJAG,EAAchQ,EAAEiP,MAAM,0BACVE,WAAavH,KAAKoG,OAC9BpG,KAAKiG,IAAIuB,QAAQY,GAEbpI,KAAKqG,QAAS,CAGhB,IAFA8B,EAAc,GAET1F,EAAI,EAAGA,EAAIuF,EAASvF,IAEvB0F,GADK/B,EAAO3D,GACMiG,0BAGpB1I,KAAKqG,QAAQsC,WAAWR,GAGrBnI,KAAK4I,kBACR5I,KAAK6E,OAAO5D,SAID,OAAXyB,GACF1C,KAAK+G,iBAIX3N,EAAUd,EAAY,CACpBuQ,UAAW,8GACX5I,KAAM,SAAcmB,GAClB,IAEI5C,EAFAsK,EAAmB1H,EAAQS,IAAI,mBAAoB,cACnDkH,EAAe/I,KAAK6I,UAExB7I,KAAKgJ,UAAY5H,EAAQS,IAAI,qBAAuB7J,EAASmM,KAC7DnE,KAAKiJ,eAAiB7H,EAAQS,IAAI,iBAAkB,IACpD7B,KAAKkJ,eAAiB9H,EAAQS,IAAI,iBAAkB,IAEpDzJ,EAAE,eAAeQ,SACjBR,EAAE,eAAeQ,SACjBoH,KAAKmJ,QAAU/Q,EAAE,SAAU,CACzBgR,GAAI,aACJhF,MAAO2E,EACPM,MAASP,IAEX9I,KAAKqG,QAAUjO,EAAE,SAAU,CACzBgR,GAAI,aACJC,MAASP,IACRQ,SAAStJ,KAAKgJ,WAEjBxK,EAASwB,KAAKqG,QAAQ7H,SACtBwB,KAAKuJ,WAAa/K,EAAO8J,KACzBtI,KAAKwJ,UAAYhL,EAAOgK,IACxBxI,KAAKyJ,QAAS,EACdrR,EAAEsR,QAAQjC,OAAO,yBACjBrP,EAAEsR,QAAQhC,KAAK,wBAAyBtP,EAAE0O,MAAM9G,KAAK2J,iBAAkB3J,OACvEA,KAAK2J,oBAEPA,iBAAkB,WAChB3J,KAAK4J,UAAYxR,EAAEsR,QAAQE,YAC3B5J,KAAK6J,WAAazR,EAAEsR,QAAQG,aAC5B7J,KAAK8J,YAAc9J,KAAK6J,WAAazR,EAAEsR,QAAQjP,QAC/CuF,KAAK+H,kBAEPgC,QAAS,SAAiBC,GACxBhK,KAAKmJ,QAAQc,KAAKD,GAASV,SAAStJ,KAAKgJ,WACzChJ,KAAKvF,MAAQuF,KAAKmJ,QAAQ1O,QAAU,EACpCuF,KAAKtF,OAASsF,KAAKmJ,QAAQzO,SAC3BsF,KAAKmJ,QAAQvQ,UAEf+P,WAAY,SAAoBqB,GAC9B,IAAKA,EAGH,OAFAhK,KAAKqG,QAAQzC,IAAI,aAAc,eAC/B5D,KAAKyJ,QAAS,GAIhBzJ,KAAK+J,QAAQC,GACbhK,KAAKqG,QAAQ4D,KAAKD,GAASpG,IAAI,CAC7BnJ,MAASuF,KAAKvF,MACdC,OAAUsF,KAAKtF,OACfwP,WAAc,YAGZlK,KAAKyJ,SACPzJ,KAAKyJ,QAAS,EACdzJ,KAAK+H,mBAGTA,eAAgB,SAAwBoC,EAAGC,GACzC,GAAID,IAAMjS,EAAW,CACnB,GAAI8H,KAAKqK,SAAWnS,EAClB,OAGFiS,EAAInK,KAAKqK,OAASrK,KAAKuJ,WACvBa,EAAIpK,KAAKsK,OAAStK,KAAKwJ,eAEvBxJ,KAAKqK,OAASF,GAAQnK,KAAKuJ,WAC3BvJ,KAAKsK,OAASF,GAAQpK,KAAKwJ,UAGxBxJ,KAAKtF,QAAWsF,KAAKvF,QAASuF,KAAKyJ,SAIxCW,GAAKpK,KAAKtF,OAASsF,KAAKkJ,eACxBiB,GAAKnK,KAAKiJ,eAENmB,EAAIpK,KAAK4J,YACXQ,EAAIpK,KAAK4J,WAGPO,EAAInK,KAAK6J,WACXM,EAAInK,KAAK6J,WACAM,EAAInK,KAAKvF,MAAQuF,KAAK8J,cAC/BK,EAAInK,KAAK8J,YAAc9J,KAAKvF,OAG9BuF,KAAKqG,QAAQzC,IAAI,CACf0E,KAAQ6B,EACR3B,IAAO4B,MAGXxR,OAAQ,WACNoH,KAAKqG,QAAQzN,SACboH,KAAKmJ,QAAQvQ,SACboH,KAAKmJ,QAAUnJ,KAAKqG,QAAUnO,EAC9BE,EAAEsR,QAAQjC,OAAO,4BAQrBrP,EAJa,WACXW,EA5mBc,yiBAgnBhBkB,EAAU,GAEV7B,EAAEkM,GAAGM,UAAY,SAAU2F,EAAYC,GACrC,OAAOxK,KAAKyK,KAAK,WACf,IAEIxJ,EACAwB,EAHArB,EAAU,IAAIhJ,EAAEkM,GAAGM,UAAUxD,QAAQpB,KAAMwK,GAC3CE,EAAQtS,EAAE4H,MAiEd,GA7DAiB,EAAS,WACP,IAAIiB,EAAQzH,EAAOC,EAAQiQ,EAAKjG,EAAUgC,EAAIlE,EAS5CN,EAPiB,SAAfqI,GAAyBA,IAAerS,IAC1CsK,EAAOxC,KAAK4K,aAAaxJ,EAAQS,IAAI,0BAExB3J,GAAsB,OAATsK,IACxBA,EAAOkI,EAAMT,QAGNzH,EAAKb,QAAQ,4BAA6B,IAAI0B,MAAM,MAEpDkH,EAGX9P,EAAiC,SAAzB2G,EAAQS,IAAI,SAAsBK,EAAO9B,OAASgB,EAAQS,IAAI,yBAA2BT,EAAQS,IAAI,SAE/E,SAA1BT,EAAQS,IAAI,UACTT,EAAQS,IAAI,cAAiBzJ,EAAEuM,KAAK3E,KAAM,mBAE7C2K,EAAM3S,EAASgM,cAAc,SACzB6G,UAAY,IAChBH,EAAMT,KAAKU,GACXjQ,EAAStC,EAAEuS,GAAKvF,eAAiBhN,EAAEuS,GAAKjQ,SACxCtC,EAAEuS,GAAK/R,SACP+R,EAAM,MAGRjQ,EAAS0G,EAAQS,IAAI,UAGlBT,EAAQS,IAAI,sBAUf6C,GAAW,GATXA,EAAWtM,EAAEuM,KAAK3E,KAAM,kBAKZoB,EAAQS,IAAI,cACtB6C,EAASa,SAHTb,EAAW,IAAIvL,EAAa6G,KAAMoB,GAClChJ,EAAEuM,KAAK3E,KAAM,gBAAiB0E,KAQ9BtD,EAAQS,IAAI,cAAiBzJ,EAAEuM,KAAK3E,KAAM,kBAS9C0G,EAAK,IAAItO,EAAEkM,GAAGM,UAAUxD,EAAQS,IAAI,UAAS7B,KAAMkC,EAAQd,EAAS3G,EAAOC,IACxEuG,SAECyD,GACFA,EAAS+B,kBAAkBC,IAZtBtO,EAAEuM,KAAK3E,KAAM,oBAChB8K,MAAM,sFACN1S,EAAEuM,KAAK3E,KAAM,kBAAkB,KAcjC5H,EAAE4H,MAAMiK,SAAW7I,EAAQS,IAAI,uBAAyBzJ,EAAE4H,MAAM+K,GAAG,aAAe3S,EAAE4H,MAAMgL,QAAQ,QAAQ5K,OAAQ,CACpH,IAAKgB,EAAQS,IAAI,cAAgBzJ,EAAEuM,KAAK3E,KAAM,gBAE5C,IAAKyC,EAAIxI,EAAQmG,OAAQqC,EAAGA,IACtBxI,EAAQwI,EAAI,GAAG,IAAMzC,MACvB/F,EAAQsJ,OAAOd,EAAI,EAAG,GAK5BxI,EAAQ2I,KAAK,CAAC5C,KAAMiB,IACpB7I,EAAEuM,KAAK3E,KAAM,gBAAgB,QAE7BiB,EAAOR,KAAKT,SAKlB5H,EAAEkM,GAAGM,UAAUqG,SAAW5S,IAE1BD,EAAE8S,0BAA4B,WAC5B,IAAIpG,EAAIrC,EAAG0I,EACPC,EAAO,GAEX,IAAK3I,EAAI,EAAG0I,EAAKlR,EAAQmG,OAAQqC,EAAI0I,EAAI1I,IACvCqC,EAAK7K,EAAQwI,GAAG,GAEZrK,EAAE0M,GAAIiG,GAAG,cAAgB3S,EAAE0M,GAAIkG,UAAUD,GAAG,YAC9C9Q,EAAQwI,GAAG,GAAGhC,KAAKqE,GACnB1M,EAAEuM,KAAK1K,EAAQwI,GAAG,GAAI,gBAAgB,GACtC2I,EAAKxI,KAAKH,IACArK,EAAE0M,GAAIuG,QAAQ,QAAQjL,QAAWhI,EAAEuM,KAAKG,EAAI,kBAKtD1M,EAAEuM,KAAK1K,EAAQwI,GAAG,GAAI,gBAAgB,GACtC2I,EAAKxI,KAAKH,IAId,IAAKA,EAAI2I,EAAKhL,OAAQqC,EAAGA,IACvBxI,EAAQsJ,OAAO6H,EAAK3I,EAAI,GAAI,IAQhCrK,EAAEkM,GAAGM,UAAUxD,QAAU9I,EAAY,CACnC2H,KAAM,SAAc4D,EAAK2G,GACvB,IAAIc,EAAiBL,EAAU9M,EAAMoN,EACrCvL,KAAKwK,YAAcA,EAAcA,GAAe,GAChDxK,KAAK6D,IAAMA,EACX7D,KAAKwL,YAAc,GAEnBrN,GADA8M,EAAW7S,EAAEkM,GAAGM,UAAUqG,UACV7Q,OAChB4F,KAAKnF,iBAAmB2P,EAAY1P,mBAAqB0P,EAAY3P,kBAAoBsD,EAAKtD,kBAI5FyQ,GAHFC,EAAgBvL,KAAKyL,cAAc,WAEbvR,EACF+Q,EAAST,EAAYnQ,MAAQ8D,EAAK9D,MAElC4Q,EAASM,GAG7BvL,KAAK0L,cAAgBtT,EAAEiI,OAAO,GAAIlC,EAAMmN,EAAiBd,IAE3DiB,cAAe,SAAuBhG,GACpC,IACI1D,EACAU,EACAkJ,EACAC,EAJAC,EAAS7L,KAAKnF,iBAMlB,IAAe,IAAXgR,GAAoBA,IAAW3T,EACjC,OAAOgC,EAGT,GAAI8F,KAAKwL,YAAY5F,eAAeH,GAClC1D,EAAM/B,KAAKwL,YAAY/F,QAClB,CAGL,IAFA1D,EAAM/B,KAAK6D,IAAI+G,aAAaiB,EAASpG,MAEzBvN,GAAqB,OAAR6J,EACvBA,EAAM7H,OACD,GAAyB,MAArB6H,EAAI+J,OAAO,EAAG,GAGvB,IAAKrJ,GAFLV,EAAMA,EAAI+J,OAAO,EAAG/J,EAAI3B,OAAS,GAAGiD,MAAM,MAE7BjD,OAAQqC,KACnBV,EAAIU,GAAK/J,EAAeqJ,EAAIU,GAAGd,QAAQ,iBAAkB,UAEtD,GAAyB,MAArBI,EAAI+J,OAAO,EAAG,GAIvB,IAHAH,EAAQ5J,EAAI+J,OAAO,EAAG/J,EAAI3B,OAAS,GAAGiD,MAAM,KAC5CtB,EAAM,GAEDU,EAAIkJ,EAAMvL,OAAQqC,KAErBV,GADA6J,EAASD,EAAMlJ,GAAGY,MAAM,IAAK,IAClB,GAAG1B,QAAQ,iBAAkB,KAAOjJ,EAAekT,EAAO,GAAGjK,QAAQ,iBAAkB,UAGpGI,EAAMrJ,EAAeqJ,GAGvB/B,KAAKwL,YAAY/F,IAAM1D,EAGzB,OAAOA,GAETF,IAAK,SAAa4D,EAAKsG,GACrB,IACIrJ,EADAsJ,EAAYhM,KAAKyL,cAAchG,GAGnC,OAAIuG,IAAc9R,EACT8R,GAGDtJ,EAAS1C,KAAK0L,cAAcjG,MAAUvN,EAAY6T,EAAarJ,KAG3EtK,EAAEkM,GAAGM,UAAUqH,MAAQ3T,EAAY,CACjC4T,UAAU,EACVjM,KAAM,SAAc6E,EAAI5C,EAAQd,EAAS3G,EAAOC,GAC9CsF,KAAK8E,GAAKA,EACV9E,KAAKiG,IAAM7N,EAAE0M,GACb9E,KAAKkC,OAASA,EACdlC,KAAKoB,QAAUA,EACfpB,KAAKvF,MAAQA,EACbuF,KAAKtF,OAASA,EACdsF,KAAKmM,cAAgBjU,GAMvBkU,WAAY,WACV,IAAIC,GAAerM,KAAKoB,QAAQS,IAAI,uBAE9B7B,KAAKX,OAASW,KAAKiG,IAAI1B,WAAWvE,KAAKvF,MAAOuF,KAAKtF,OAAQsF,KAAKoB,QAAQS,IAAI,aAAcwK,KAG9FrM,KAAKsM,YAActM,KAAKX,OAAOkN,WAC/BvM,KAAKwM,aAAexM,KAAKX,OAAOoN,aAHhCzM,KAAKkM,UAAW,GAUpBjL,OAAQ,WACN,OAAIjB,KAAKkM,WACPlM,KAAK8E,GAAG+F,UAAY,IACb,IASX6B,UAAW,SAAmBvC,EAAGC,KAKjC3B,mBAAoB,SAA4B3D,EAAIqF,EAAGC,GACrD,IAEIuC,EAFAR,EAAgBnM,KAAKmM,cACrB3F,GAAoBxG,KAAKoB,QAAQS,IAAI,oBAGzC,OAAIsI,EAAInK,KAAKsM,aAAelC,EAAIpK,KAAKwM,cAAgBrC,EAAI,GAAKC,EAAI,EACzD,KAKL+B,KAFJQ,EAAY3M,KAAK0M,UAAU5H,EAAIqF,EAAGC,MAG5B+B,IAAkBjU,GAAasO,GACjCxG,KAAK4M,mBAGP5M,KAAKmM,cAAgBQ,KAEHzU,GAAasO,GAC7BxG,KAAK6M,mBAGA,IASX3E,qBAAsB,WACpB,OAAIlI,KAAKmM,gBAAkBjU,IACzB8H,KAAK4M,oBACL5M,KAAKmM,cAAgBjU,KAMzB2U,gBAAiB,WACf7M,KAAK8M,iBAAgB,IAEvBF,gBAAiB,WACf5M,KAAK8M,iBAAgB,IAEvBA,gBAAiB,SAAyBC,KAK1CrE,wBAAyB,WACvB,IAGItK,EACA4O,EACAC,EACAjM,EACAkM,EACAzK,EACA0K,EACAC,EACAC,EACAC,EACAC,EACAxM,EACAyM,EACAC,EAhBArM,EAAUpB,KAAKoB,QACfsM,EAAS,GACTC,EAAU,GAgBd,GAAI3N,KAAKmM,gBAAkBjU,EACzB,MAAO,GAMT,GAHAkG,EAAS4B,KAAK4N,yBACdL,EAAYnM,EAAQS,IAAI,oBAGtB,OAAO0L,EAAUvN,KAAMoB,EAAShD,GASlC,GANIgD,EAAQS,IAAI,uBACd6L,GAAU,6BAA+BtM,EAAQS,IAAI,qBAAuB,cAG9EmL,EAAUhN,KAAKoB,QAAQS,IAAI,kBAGzB,MAAO,GAcT,GAXKzJ,EAAEuL,QAAQqJ,KACbA,EAAU,CAACA,IAGR5U,EAAEuL,QAAQvF,KACbA,EAAS,CAACA,IAGZ+O,EAAanN,KAAKoB,QAAQS,IAAI,0BAC9BuL,EAAgBpN,KAAKoB,QAAQS,IAAI,6BAE7BsL,GAAcC,EAAe,CAI/B,IAFAC,EAAY,GAEP5K,EAAIrE,EAAOgC,OAAQqC,KACtB6K,EAAKlP,EAAOqE,GAAG2K,IAEyB,IAAnCK,EAAIrV,EAAEkL,QAAQgK,EAAIH,MACrBE,EAAUI,GAAKrP,EAAOqE,IAI1BrE,EAASiP,EAMX,IAHAJ,EAAYD,EAAQ5M,OACpBoN,EAAWpP,EAAOgC,OAEbqC,EAAI,EAAGA,EAAIwK,EAAWxK,IASzB,IANsB,iBAFtB1B,EAASiM,EAAQvK,MAGf1B,EAAS,IAAIxI,EAASwI,IAGxBC,EAASD,EAAOC,QAAU,WAErByM,EAAI,EAAGA,EAAID,EAAUC,IACnBrP,EAAOqP,GAAGI,QAAWzM,EAAQS,IAAI,qBACpCzJ,EAAEiI,OAAOjC,EAAOqP,GAAI,CAClB5B,OAAQzK,EAAQS,IAAI,iBACpBiM,OAAQ1M,EAAQS,IAAI,mBAEtBqL,EAAOnM,EAAOE,OAAO7C,EAAOqP,GAAIrM,EAAQS,IAAI,uBAAwBT,GACpEuM,EAAQ/K,KAAK,eAAiB5B,EAAS,KAAOkM,EAAO,WAK3D,OAAIS,EAAQvN,OACHsN,EAASC,EAAQnK,KAAK,MAGxB,IAEToK,uBAAwB,aACxBG,mBAAoB,SAA4BC,EAAO5M,GACrD,IAEI6M,EACAC,EACAC,EACA1L,EALA2L,EAAiBhN,EAAQS,IAAI,kBAC7BwM,EAAUjN,EAAQS,IAAI,oBAM1B,GAAIuM,EACF,OAAOA,EAGT,GAAIC,IAEFJ,EAAQ,qCAAqCrM,KAAKoM,IAAU,8CAA8CpM,KAAKoM,IAEpG,CAIT,IAHAG,EAAS,GACTD,EAAwB,IAAjBF,EAAM5N,OAAe,GAAK,EAE5BqC,EAAI,EAAGA,EAAI,EAAGA,IACjB0L,EAAO1L,GAAKjK,EAAQP,EAAKqW,MAAMC,SAASN,EAAMxL,EAAI,GAAI,IAAMyL,EAAOG,GAAU,EAAG,KAGlF,MAAO,OAASF,EAAO3K,KAAK,KAAO,IAIvC,OAAOwK,KAGX3U,EAAoB,CAClByT,gBAAiB,SAAyBC,GACxC,IAGIyB,EAHArC,EAAgBnM,KAAKmM,cACrB9M,EAASW,KAAKX,OACdoP,EAAWzO,KAAK0O,aAAavC,GAG7BsC,IACFD,EAAYxO,KAAK2O,aAAaxC,EAAeY,GAEzC3U,EAAEuL,QAAQ6K,IAAcpW,EAAEuL,QAAQ8K,IACpCpP,EAAOuP,kBAAkBH,EAAUD,GACnCxO,KAAK0O,aAAavC,GAAiB/T,EAAEoF,IAAIgR,EAAW,SAAUK,GAC5D,OAAOA,EAASzF,OAGlB/J,EAAOyP,iBAAiBL,EAAUD,GAClCxO,KAAK0O,aAAavC,GAAiBqC,EAAUpF,MAInDnI,OAAQ,WACN,IAGI8N,EACAC,EACAvM,EACAgL,EANAvL,EAASlC,KAAKkC,OACd7C,EAASW,KAAKX,OACdqP,EAAe1O,KAAK0O,aAMxB,GAAK1O,KAAKW,IAAIL,OAAOW,OAAOR,KAAKT,MAAjC,CAIA,IAAKyC,EAAIP,EAAO9B,OAAQqC,KAGtB,GAFAsM,EAAS/O,KAAK2O,aAAalM,GAGzB,GAAIrK,EAAEuL,QAAQoL,GAAS,CAGrB,IAFAC,EAAM,GAEDvB,EAAIsB,EAAO3O,OAAQqN,KACtBsB,EAAOtB,GAAGwB,SACVD,EAAIpM,KAAKmM,EAAOtB,GAAGrE,IAGrBsF,EAAajM,GAAKuM,OAElBD,EAAOE,SACPP,EAAajM,GAAKsM,EAAO3F,QAI3BsF,EAAajM,GAAK,KAItBpD,EAAO4B,YAOX7I,EAAEkM,GAAGM,UAAUtL,KAAOA,EAAOhB,EAAYF,EAAEkM,GAAGM,UAAUqH,MAAO,CAC7D5R,KAAM,OACN4F,KAAM,SAAc6E,EAAI5C,EAAQd,EAAS3G,EAAOC,GAC9CpB,EAAKgH,OAAOL,KAAKQ,KAAKT,KAAM8E,EAAI5C,EAAQd,EAAS3G,EAAOC,GAExDsF,KAAKkP,SAAW,GAChBlP,KAAKmP,UAAY,GACjBnP,KAAKoP,QAAU,GACfpP,KAAKqP,QAAU,GACfrP,KAAKsP,QAAU,GACftP,KAAKuP,iBAAmB,KACxBvP,KAAKwP,YAAc,KACnBxP,KAAKoM,cAEPM,UAAW,SAAmB5H,EAAIqF,EAAGC,GACnC,IAAI3H,EACA0M,EAAYnP,KAAKmP,UAErB,IAAK1M,EAAI0M,EAAU/O,OAAQqC,KACzB,GAAqB,OAAjB0M,EAAU1M,IAAe0H,GAAKgF,EAAU1M,GAAG,IAAM0H,GAAKgF,EAAU1M,GAAG,GACrE,OAAO0M,EAAU1M,GAAG,GAIxB,OAAOvK,GAET0V,uBAAwB,WACtB,IAAIzB,EAAgBnM,KAAKmM,cACzB,MAAO,CACL0B,OAAwC,OAAhC7N,KAAKqP,QAAQlD,GACrBhC,EAAGnK,KAAKoP,QAAQjD,GAChB/B,EAAGpK,KAAKqP,QAAQlD,GAChB6B,MAAOhO,KAAKoB,QAAQS,IAAI,aACxBtH,UAAWyF,KAAKoB,QAAQS,IAAI,aAC5BrD,OAAQ2N,IAGZU,gBAAiB,WACf,IAOI4C,EACAC,EARAvD,EAAgBnM,KAAKmM,cACrB9M,EAASW,KAAKX,OACdsQ,EAAS3P,KAAKkP,SAAS/C,GACvB/K,EAAUpB,KAAKoB,QACftF,EAAasF,EAAQS,IAAI,cACzBjG,EAAqBwF,EAAQS,IAAI,sBACjChG,EAAqBuF,EAAQS,IAAI,sBAIhC8N,IAID7T,GAAcF,IAChB6T,EAAgBpQ,EAAOuQ,WAAWD,EAAO,GAAIA,EAAO,GAAI7T,EAAY5D,EAAW0D,GAC/EoE,KAAK6P,gBAAkBJ,EAAcrG,GACrC/J,EAAOyQ,iBAAiB9P,KAAKwP,YAAaC,IAGxC5T,IACF6T,EAAgBrQ,EAAO0Q,SAASJ,EAAO,GAAI3P,KAAKgQ,UAAWL,EAAO,GAAI3P,KAAKgQ,UAAYhQ,KAAKwM,aAAc3Q,GAC1GmE,KAAKiQ,gBAAkBP,EAActG,GACrC/J,EAAOyQ,iBAAiB9P,KAAKwP,YAAaE,MAG9C9C,gBAAiB,WACf,IAAIvN,EAASW,KAAKX,OAEdW,KAAK6P,kBACPxQ,EAAO6Q,cAAclQ,KAAK6P,iBAC1B7P,KAAK6P,gBAAkB,MAGrB7P,KAAKiQ,kBACP5Q,EAAO6Q,cAAclQ,KAAKiQ,iBAC1BjQ,KAAKiQ,gBAAkB,OAG3BE,WAAY,WACV,IAKI1N,EACAV,EACAqO,EACAzM,EACA+C,EATAxE,EAASlC,KAAKkC,OACdmO,EAAWnO,EAAO9B,OAClBgP,EAAUpP,KAAKoP,QACfC,EAAUrP,KAAKqP,QACfC,EAAUtP,KAAKsP,QAOnB,IAAK7M,EAAI,EAAGA,EAAI4N,EAAU5N,IACxBV,EAAMG,EAAOO,GACb2N,EAA6B,iBAAdlO,EAAOO,GACtBkB,EAAiC,WAAvBjM,QAAQwK,EAAOO,KAAoBP,EAAOO,aAAclC,MAClEmG,EAAK0J,GAASlO,EAAOO,GAAGY,MAAM,KAE1B+M,GAAuB,IAAd1J,EAAGtG,QAEdgP,EAAQxM,KAAK0N,OAAO5J,EAAG,KACvB2I,EAAQzM,KAAK0N,OAAO5J,EAAG,KACvB4I,EAAQ1M,KAAK0N,OAAO5J,EAAG,MACd/C,GACTyL,EAAQxM,KAAKb,EAAI,IACjBsN,EAAQzM,KAAKb,EAAI,IACjBuN,EAAQ1M,KAAKb,EAAI,MAEjBqN,EAAQxM,KAAKH,GAEK,OAAdP,EAAOO,IAA6B,SAAdP,EAAOO,GAC/B4M,EAAQzM,KAAK,OAEbyM,EAAQzM,KAAK0N,OAAOvO,IACpBuN,EAAQ1M,KAAK0N,OAAOvO,MAKtB/B,KAAKoB,QAAQS,IAAI,aACnBuN,EAAUpP,KAAKoB,QAAQS,IAAI,YAG7B7B,KAAKuQ,KAAOvQ,KAAKwQ,QAAUvY,EAAKgK,IAAI/B,MAAMjI,EAAMqX,GAChDtP,KAAKyQ,KAAOzQ,KAAK0Q,QAAUzY,EAAK+J,IAAI9B,MAAMjI,EAAMqX,GAChDtP,KAAK2Q,KAAO1Y,EAAKgK,IAAI/B,MAAMjI,EAAMmX,GACjCpP,KAAK4Q,KAAO3Y,EAAK+J,IAAI9B,MAAMjI,EAAMmX,GACjCpP,KAAKoP,QAAUA,EACfpP,KAAKqP,QAAUA,EACfrP,KAAKsP,QAAUA,GAEjBuB,oBAAqB,WACnB,IAAIzP,EAAUpB,KAAKoB,QACflF,EAAiBkF,EAAQS,IAAI,kBAC7B1F,EAAiBiF,EAAQS,IAAI,kBAE7B3F,IAAmBhE,IACjBgE,EAAiB8D,KAAKyQ,OACxBzQ,KAAKyQ,KAAOvU,GAGVC,EAAiB6D,KAAKuQ,OACxBvQ,KAAKuQ,KAAOpU,IAIZiF,EAAQS,IAAI,mBAAqB3J,IAAckJ,EAAQS,IAAI,mBAAqBT,EAAQS,IAAI,iBAAmB7B,KAAKyQ,QACtHzQ,KAAKyQ,KAAOrP,EAAQS,IAAI,kBAGtBT,EAAQS,IAAI,mBAAqB3J,IAAckJ,EAAQS,IAAI,mBAAqBT,EAAQS,IAAI,iBAAmB7B,KAAKuQ,QACtHvQ,KAAKuQ,KAAOnP,EAAQS,IAAI,kBAGtBT,EAAQS,IAAI,oBAAsB3J,IAAckJ,EAAQS,IAAI,oBAAsBT,EAAQS,IAAI,kBAAoB7B,KAAK4Q,QACzH5Q,KAAK4Q,KAAOxP,EAAQS,IAAI,mBAGtBT,EAAQS,IAAI,oBAAsB3J,IAAckJ,EAAQS,IAAI,oBAAsBT,EAAQS,IAAI,kBAAoB7B,KAAK2Q,QACzH3Q,KAAK2Q,KAAOvP,EAAQS,IAAI,oBAG5BiP,gBAAiB,SAAyBC,EAAYf,EAAWxD,EAAcF,EAAa0E,GAC1F,IAAI9U,EAAiB8D,KAAKoB,QAAQS,IAAI,kBAClC1F,EAAiB6D,KAAKoB,QAAQS,IAAI,kBAClCoP,EAAOjB,EAAY/X,EAAKqW,MAAM9B,EAAeA,IAAiBrQ,EAAiB6D,KAAKyQ,MAAQO,IAC5FtW,EAASzC,EAAKqW,MAAM9B,GAAgBrQ,EAAiBD,GAAkB8U,GAC3EhR,KAAKX,OAAO6R,SAASH,EAAYE,EAAM3E,EAAa5R,EAAQxC,EAAW8H,KAAKoB,QAAQS,IAAI,qBAAqBoN,UAE/GhO,OAAQ,WACN,IAOIkQ,EACAH,EACAI,EACApB,EACAe,EACApB,EACA0B,EACAC,EACAnH,EACAC,EACAmH,EACAC,EAEAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAhE,EACAoB,EACAC,EACA5M,EA/BArB,EAAUpB,KAAKoB,QACf/B,EAASW,KAAKX,OACdiN,EAActM,KAAKsM,YACnBE,EAAexM,KAAKwM,aACpB0C,EAAWlP,KAAKkP,SAChBpT,EAAasF,EAAQS,IAAI,cACzBsN,EAAYnP,KAAKmP,UA2BrB,GAAK7V,EAAKgH,OAAOW,OAAOR,KAAKT,QAI7BA,KAAKmQ,aACLnQ,KAAK6Q,sBACLzB,EAAUpP,KAAKoP,QACfC,EAAUrP,KAAKqP,QAEVrP,KAAKsP,QAAQlP,UAAUJ,KAAKqP,QAAQjP,OAAS,IAAlD,CAgDA,IA3CA4P,EAAYe,EAAa,EACzBI,EAASnR,KAAK2Q,KAAO3Q,KAAK4Q,MAAS,EAAI,EAAI5Q,KAAK2Q,KAAO3Q,KAAK4Q,KAC5DI,EAAShR,KAAKuQ,KAAOvQ,KAAKyQ,MAAS,EAAI,EAAIzQ,KAAKuQ,KAAOvQ,KAAKyQ,KAC5DW,EAAWpR,KAAKqP,QAAQjP,OAAS,EAE7BtE,IAAewQ,EAA2B,EAAbxQ,GAAkB0Q,EAA4B,EAAb1Q,KAChEA,EAAa,GAGXA,MAEFkW,EAAiB5Q,EAAQS,IAAI,wBAA0BT,EAAQS,IAAI,wBAE7CT,EAAQS,IAAI,iBAAmBT,EAAQS,IAAI,cAAgBwN,EAAQ+B,KAAcpR,KAAKyQ,QAC1GjE,GAAgBvU,EAAKga,KAAKnW,KAGxBkW,GAAkB5Q,EAAQS,IAAI,iBAAmBT,EAAQS,IAAI,cAAgBwN,EAAQ+B,KAAcpR,KAAKuQ,QAC1G/D,GAAgBvU,EAAKga,KAAKnW,GAC1BkU,GAAa/X,EAAKga,KAAKnW,KAGrBkW,IAAmB5Q,EAAQS,IAAI,iBAAmBT,EAAQS,IAAI,mBAAqBwN,EAAQ,KAAOrP,KAAKyQ,MAAQpB,EAAQ,KAAOrP,KAAKuQ,SACrIQ,GAAc9Y,EAAKga,KAAKnW,GACxBwQ,GAAerU,EAAKga,KAAKnW,KAGvBkW,GAAkB5Q,EAAQS,IAAI,cAAgBT,EAAQS,IAAI,iBAAmBT,EAAQS,IAAI,kBAAoBwN,EAAQ+B,KAAcpR,KAAKyQ,MAAQpB,EAAQ+B,KAAcpR,KAAKuQ,SAC7KjE,GAAerU,EAAKga,KAAKnW,KAI7B0Q,IAEIpL,EAAQS,IAAI,oBAAsB3J,GAAckJ,EAAQS,IAAI,oBAC9D7B,KAAK8Q,gBAAgBC,EAAYf,EAAWxD,EAAcF,EAAa0E,GAIzEM,EAAQ,CADRD,EAAO,IAEPI,EAAOC,EAAO,KACdC,EAAYtC,EAAQjP,OAEfqC,EAAI,EAAGA,EAAIkP,EAAWlP,IACzB0H,EAAIiF,EAAQ3M,GACZ8O,EAAQnC,EAAQ3M,EAAI,GACpB2H,EAAIiF,EAAQ5M,GAGZiP,GAFAF,EAAOT,EAAa9Y,EAAKqW,OAAOnE,EAAInK,KAAK4Q,OAAStE,EAAc6E,OACrD1O,EAAIkP,EAAY,EAAIZ,EAAa9Y,EAAKqW,OAAOiD,EAAQvR,KAAK4Q,OAAStE,EAAc6E,IAAW7E,GAC7EkF,GAAQ,EAClCrC,EAAU1M,GAAK,CAACgP,GAAQ,EAAGC,EAAMjP,GACjCgP,EAAOC,EAEG,OAANtH,EACE3H,IACqB,OAAnB4M,EAAQ5M,EAAI,KACd4O,EAAO,GACPC,EAAM1O,KAAKyO,IAGbnC,EAAStM,KAAK,QAGZwH,EAAIpK,KAAKyQ,OACXrG,EAAIpK,KAAKyQ,MAGPrG,EAAIpK,KAAKuQ,OACXnG,EAAIpK,KAAKuQ,MAGNc,EAAKjR,QAERiR,EAAKzO,KAAK,CAAC4O,EAAMxB,EAAYxD,IAG/BmD,EAAS,CAAC6B,EAAMxB,EAAY/X,EAAKqW,MAAM9B,EAAeA,IAAiBpC,EAAIpK,KAAKyQ,MAAQO,KACxFK,EAAKzO,KAAK+M,GACVT,EAAStM,KAAK+M,IAQlB,IAJAiC,EAAa,GACbC,EAAa,GACbC,EAAOR,EAAMlR,OAERqC,EAAI,EAAGA,EAAIqP,EAAMrP,KACpB4O,EAAOC,EAAM7O,IAEJrC,SACHgB,EAAQS,IAAI,eACdwP,EAAKzO,KAAK,CAACyO,EAAKA,EAAKjR,OAAS,GAAG,GAAI4P,EAAYxD,IACjDqF,EAAWjP,KAAKyO,EAAK7Q,MAAM,IAC3B6Q,EAAKa,OAKW,EAAdb,EAAKjR,SAEPiR,EAAK,GAAK,CAACA,EAAK,GAAG,GAAIA,EAAK,GAAG,KAGjCO,EAAWhP,KAAKyO,IAOpB,IAFAS,EAAOD,EAAWzR,OAEbqC,EAAI,EAAGA,EAAIqP,EAAMrP,IACpBpD,EAAO8S,UAAUN,EAAWpP,GAAIrB,EAAQS,IAAI,aAAcT,EAAQS,IAAI,cAAcoN,SAStF,IANI7N,EAAQS,IAAI,oBAAsB3J,GAAakJ,EAAQS,IAAI,oBAC7D7B,KAAK8Q,gBAAgBC,EAAYf,EAAWxD,EAAcF,EAAa0E,GAGzEc,EAAOF,EAAWxR,OAEbqC,EAAI,EAAGA,EAAIqP,EAAMrP,IACpBpD,EAAO8S,UAAUP,EAAWnP,GAAIrB,EAAQS,IAAI,aAAc3J,EAAWkJ,EAAQS,IAAI,cAAcoN,SAGjG,GAAInT,GAAcsF,EAAQS,IAAI,cAO5B,KANAkQ,EAAa3Q,EAAQS,IAAI,eAEVA,MAAQ3J,IACrB6Z,EAAa,IAAI7Y,EAAS6Y,IAGvBtP,EAAI,EAAGA,EAAIkP,EAAWlP,KACzBuL,EAAQ+D,EAAWlQ,IAAIwN,EAAQ5M,MAG7BpD,EAAOuQ,WAAWmB,EAAa9Y,EAAKqW,OAAOc,EAAQ3M,GAAKzC,KAAK4Q,OAAStE,EAAc6E,IAAUnB,EAAY/X,EAAKqW,MAAM9B,EAAeA,IAAiB6C,EAAQ5M,GAAKzC,KAAKyQ,MAAQO,IAAUlV,EAAY5D,EAAW8V,GAAOiB,SAKzNnT,GAAcsF,EAAQS,IAAI,cAAsC,OAAtBwN,EAAQ+B,IACpD/R,EAAOuQ,WAAWmB,EAAa9Y,EAAKqW,OAAOc,EAAQA,EAAQhP,OAAS,GAAKJ,KAAK4Q,OAAStE,EAAc6E,IAAUnB,EAAY/X,EAAKqW,MAAM9B,EAAeA,IAAiB6C,EAAQ+B,GAAYpR,KAAKyQ,MAAQO,IAAUlV,EAAY5D,EAAWkJ,EAAQS,IAAI,cAAcoN,SAGhQjP,KAAKuQ,OAASvQ,KAAK0Q,UACjB5U,GAAcsF,EAAQS,IAAI,kBAC5BsI,EAAIiF,EAAQhX,EAAEkL,QAAQtD,KAAK0Q,QAASrB,IACpChQ,EAAOuQ,WAAWmB,EAAa9Y,EAAKqW,OAAOnE,EAAInK,KAAK4Q,OAAStE,EAAc6E,IAAUnB,EAAY/X,EAAKqW,MAAM9B,EAAeA,IAAiBxM,KAAK0Q,QAAU1Q,KAAKyQ,MAAQO,IAAUlV,EAAY5D,EAAWkJ,EAAQS,IAAI,iBAAiBoN,UAGpOnT,GAAcsF,EAAQS,IAAI,kBAC5BsI,EAAIiF,EAAQhX,EAAEkL,QAAQtD,KAAKwQ,QAASnB,IACpChQ,EAAOuQ,WAAWmB,EAAa9Y,EAAKqW,OAAOnE,EAAInK,KAAK4Q,OAAStE,EAAc6E,IAAUnB,EAAY/X,EAAKqW,MAAM9B,EAAeA,IAAiBxM,KAAKwQ,QAAUxQ,KAAKyQ,MAAQO,IAAUlV,EAAY5D,EAAWkJ,EAAQS,IAAI,iBAAiBoN,WAI1OjP,KAAKwP,YAAcnQ,EAAO+S,iBAC1BpS,KAAKgQ,UAAYA,EACjB3Q,EAAO4B,aAOX7I,EAAEkM,GAAGM,UAAUrL,IAAMA,EAAMjB,EAAYF,EAAEkM,GAAGM,UAAUqH,MAAO5S,EAAmB,CAC9EgB,KAAM,MACN4F,KAAM,SAAc6E,EAAI5C,EAAQd,EAAS3G,EAAOC,GAC9C,IAOI2X,EACAC,EACAC,EACAC,EACAC,EACAhQ,EACAiQ,EACAhN,EACA1I,EACA2V,EACA3Q,EACAC,EACA2Q,EACAC,EACAC,EACAC,EACAtF,EACAuF,EACAC,EACAlR,EACAmR,EA3BAjW,EAAWsR,SAASnN,EAAQS,IAAI,YAAa,IAC7C3E,EAAaqR,SAASnN,EAAQS,IAAI,cAAe,IACjDvF,EAAgB8E,EAAQS,IAAI,iBAC5BtF,EAAgB6E,EAAQS,IAAI,iBAC5B1E,EAAiBiE,EAAQS,IAAI,kBAC7BsR,EAAWrN,EAAAA,EACXsN,GAAYtN,EAAAA,EA4BhB,IAHAvM,EAAI+G,OAAOL,KAAKQ,KAAKT,KAAM8E,EAAI5C,EAAQd,EAAS3G,EAAOC,GAGlD+H,EAAI,EAAGiQ,EAAOxQ,EAAO9B,OAAQqC,EAAIiQ,EAAMjQ,MAE1C4P,EAA+B,iBAD/BtQ,EAAMG,EAAOO,MACkD,EAApBV,EAAI8D,QAAQ,OAElCzN,EAAEuL,QAAQ5B,MAC7B+Q,GAAU,EAENT,IACFtQ,EAAMG,EAAOO,GAAK9J,EAAgBoJ,EAAIsB,MAAM,OAG9CtB,EAAMnJ,EAAOmJ,EAAK,OAElBuQ,EAAWra,EAAK+J,IAAI9B,MAAMjI,EAAM8J,IAGjBoR,IACbA,EAAWb,GAGEc,GANfb,EAAWta,EAAKgK,IAAI/B,MAAMjI,EAAM8J,MAO9BqR,EAAWb,IAKjBvS,KAAK8S,QAAUA,EACf9S,KAAK0O,aAAe,GACpB1O,KAAK/C,SAAWA,EAChB+C,KAAK9C,WAAaA,EAClB8C,KAAKqT,cAAgBpW,EAAWC,EAChC8C,KAAKvF,MAAQA,EAAQyH,EAAO9B,OAASnD,GAAYiF,EAAO9B,OAAS,GAAKlD,EACtE8C,KAAKoM,aAEDjP,IACFyV,EAAUtW,IAAkBpE,GAAa4N,EAAAA,EAAWxJ,EACpDuW,EAAUtW,IAAkBrE,EAAY4N,EAAAA,EAAWvJ,GAGrDkW,EAAY,GACZD,EAAcM,EAAU,GAAKL,EAC7B,IAAIa,EAAc,GACdC,EAAiB,GAErB,IAAK9Q,EAAI,EAAGiQ,EAAOxQ,EAAO9B,OAAQqC,EAAIiQ,EAAMjQ,IAC1C,GAAIqQ,EAMF,IALAC,EAAQ7Q,EAAOO,GACfP,EAAOO,GAAKwQ,EAAQ,GACpBK,EAAY7Q,GAAK,EACjB+P,EAAY/P,GAAK8Q,EAAe9Q,GAAK,EAEhCgL,EAAI,EAAGuF,EAAOD,EAAM3S,OAAQqN,EAAIuF,EAAMvF,IAG7B,QAFZ1L,EAAMkR,EAAMxF,GAAKtQ,EAAiB3E,EAAQua,EAAMtF,GAAImF,EAASC,GAAWE,EAAMtF,MAGlE,EAAN1L,IACFuR,EAAY7Q,IAAMV,GAGhBoR,EAAW,GAAgB,EAAXC,EACdrR,EAAM,EACRwR,EAAe9Q,IAAMxK,EAAKub,IAAIzR,GAE9ByQ,EAAY/P,IAAMV,EAGpByQ,EAAY/P,IAAMxK,EAAKub,IAAIzR,GAAOA,EAAM,EAAIqR,EAAWD,IAGzDV,EAAU7P,KAAKb,SAInBA,EAAM5E,EAAiB3E,EAAQ0J,EAAOO,GAAImQ,EAASC,GAAW3Q,EAAOO,GAGzD,QAFZV,EAAMG,EAAOO,GAAK/J,EAAeqJ,KAG/B0Q,EAAU7P,KAAKb,GAKrB/B,KAAKiC,IAAMA,EAAMhK,EAAKgK,IAAI/B,MAAMjI,EAAMwa,GACtCzS,KAAKgC,IAAMA,EAAM/J,EAAK+J,IAAI9B,MAAMjI,EAAMwa,GACtCzS,KAAKoT,SAAWA,EAAWN,EAAU7a,EAAKgK,IAAI/B,MAAMjI,EAAMqb,GAAerR,EACzEjC,KAAKmT,SAAWA,EAAWL,EAAU7a,EAAK+J,IAAI9B,MAAMjI,EAAMwa,GAAazQ,EAEnEZ,EAAQS,IAAI,mBAAqB3J,IAAckJ,EAAQS,IAAI,mBAAqBT,EAAQS,IAAI,iBAAmBG,KACjHA,EAAMZ,EAAQS,IAAI,kBAGhBT,EAAQS,IAAI,mBAAqB3J,IAAckJ,EAAQS,IAAI,mBAAqBT,EAAQS,IAAI,iBAAmBI,KACjHA,EAAMb,EAAQS,IAAI,kBAGpB7B,KAAKhD,SAAWA,EAAWoE,EAAQS,IAAI,YAAY,GAGjD8Q,EADE3Q,GAAO,GAAY,GAAPC,GAAYjF,EACZ,EACO,GAAZA,EACKgF,EACC,EAANA,EACKA,EAEAC,EAGhBjC,KAAK2S,YAAcA,EACnBjN,EAAQoN,EAAU7a,EAAKgK,IAAI/B,MAAMjI,EAAMua,GAAeva,EAAKgK,IAAI/B,MAAMjI,EAAMsb,GAAkBtR,EAAMD,EAGnGhC,KAAKyT,eAAiBzW,GAAYgF,EAAM,EAAIhC,KAAKwM,aAAe,EAAIxM,KAAKwM,aAAe,EAEpFxK,EAAM2Q,GAERO,IADWJ,GAAkB,GAAP7Q,EAAWmR,EAAWnR,GACtB0Q,GAAejN,EAAQ1F,KAAKwM,gBAElCvU,EAAKga,KAAKiB,KACxBlT,KAAKyT,gBAAkB,EACvBP,EAAUjb,EAAKga,KAAKiB,IAGtBA,EAAUlT,KAAKwM,aAGjBxM,KAAKkT,QAAUA,EAEX9a,EAAEuL,QAAQvC,EAAQS,IAAI,cACxB7B,KAAK0T,gBAAkBtS,EAAQS,IAAI,YACnC7B,KAAK2T,gBAAkB,OAEvB3T,KAAK0T,gBAAkB,KACvB1T,KAAK2T,gBAAkBvS,EAAQS,IAAI,YAE/B7B,KAAK2T,iBAAmB3T,KAAK2T,gBAAgB9R,MAAQ3J,IACvD8H,KAAK2T,gBAAkB,IAAIza,EAAS8G,KAAK2T,mBAI7C3T,KAAK0F,MAAQA,GAEfgH,UAAW,SAAmB5H,EAAIqF,EAAGC,GACnC,IAAI1H,EAASzK,EAAKoK,MAAM8H,EAAInK,KAAKqT,eACjC,OAAO3Q,EAAS,GAAKA,GAAU1C,KAAKkC,OAAO9B,OAASlI,EAAYwK,GAElEkL,uBAAwB,WACtB,IAGI7H,EACAtD,EAJA0J,EAAgBnM,KAAKmM,cACrBjK,EAASlJ,EAAYgH,KAAKkC,OAAOiK,IACjCzJ,EAAS,GAIb,IAAKD,EAAIP,EAAO9B,OAAQqC,KACtBsD,EAAQ7D,EAAOO,GACfC,EAAOE,KAAK,CACViL,OAAkB,OAAV9H,EACRA,MAAOA,EACPiI,MAAOhO,KAAK4T,UAAUnR,EAAGsD,EAAOoG,GAChC3N,OAAQ2N,IAIZ,OAAOzJ,GAETkR,UAAW,SAAmBC,EAAU9N,EAAO+N,GAC7C,IAGI9F,EACA+F,EAJAL,EAAkB1T,KAAK0T,gBACvBC,EAAkB3T,KAAK2T,gBACvBvS,EAAUpB,KAAKoB,QAoBnB,OAfE4M,EADEhO,KAAK8S,QACC1R,EAAQS,IAAI,mBAEZkE,EAAQ,EAAI3E,EAAQS,IAAI,eAAiBT,EAAQS,IAAI,YAGjD,IAAVkE,GAAe3E,EAAQS,IAAI,eAAiB3J,IAC9C8V,EAAQ5M,EAAQS,IAAI,cAGlB8R,IAAoBI,EAAWJ,EAAgB9R,IAAIkE,IACrDiI,EAAQ+F,EACCL,GAAmBA,EAAgBtT,OAAS0T,IACrD9F,EAAQ0F,EAAgBI,IAGnB1b,EAAEuL,QAAQqK,GAASA,EAAM6F,EAAW7F,EAAM5N,QAAU4N,GAM7DW,aAAc,SAAsBmF,EAAU/G,GAC5C,IAUI3C,EACA1P,EACAsT,EACAH,EACAmG,EACAvR,EACA4N,EACAtO,EACAkS,EACAC,EAnBA1R,EAAOxC,KAAKkC,OAAO4R,GACnB1S,EAAUpB,KAAKoB,QACfuR,EAAc3S,KAAK2S,YACnBjQ,EAAS,GACTgD,EAAQ1F,KAAK0F,MACboN,EAAU9S,KAAK8S,QACfzT,EAASW,KAAKX,OACd8K,EAAI2J,EAAW9T,KAAKqT,cACpBI,EAAiBzT,KAAKyT,eACtBP,EAAUlT,KAAKkT,QAiBnB,GALA7C,GADA7N,EAAOpK,EAAEuL,QAAQnB,GAAQA,EAAO,CAACA,IACjBpC,OAChB2B,EAAMS,EAAK,GACXqL,EAAS/U,EAAI,KAAM0J,GACnB0R,EAASpb,EAAI6Z,EAAanQ,GAAM,GAE5BqL,EACF,OAAIzM,EAAQS,IAAI,cACdmM,EAAQjB,EAAY3L,EAAQS,IAAI,aAAe7B,KAAK+N,mBAAmB3M,EAAQS,IAAI,aAAcT,GACjGgJ,EAAc,EAAV8I,EAAcA,EAAU,EAAIA,EACzB7T,EAAO6R,SAAS/G,EAAGC,EAAGpK,KAAK/C,SAAW,EAAG,EAAG+Q,EAAOA,IAEnD9V,EAMX,IAFA8b,EAAad,EAERzQ,EAAI,EAAGA,EAAI4N,EAAU5N,IAAK,CAG7B,GAFAV,EAAMS,EAAKC,GAEPqQ,GAAW/Q,IAAQ4Q,EAAa,CAClC,IAAKuB,GAAUD,EACb,SAGFA,GAAa,EAIbvZ,EADU,EAARgL,EACOzN,EAAKoK,MAAMoR,GAAkBxb,EAAKub,IAAIzR,EAAM4Q,GAAejN,IAAU,EAErE,EAGP3D,EAAM4Q,GAAe5Q,IAAQ4Q,GAA2B,IAAZO,GAC9C9I,EAAI4J,EACJA,GAActZ,IAEd0P,EAAI8I,EAAUxY,EACdwY,GAAWxY,GAGbsT,EAAQhO,KAAK4T,UAAUnR,EAAGV,EAAK+R,GAE3B/G,IACFiB,EAAQhO,KAAK+N,mBAAmBC,EAAO5M,IAGzCsB,EAAOE,KAAKvD,EAAO6R,SAAS/G,EAAGC,EAAGpK,KAAK/C,SAAW,EAAGvC,EAAS,EAAGsT,EAAOA,IAG1E,OAAsB,IAAlBtL,EAAOtC,OACFsC,EAAO,GAGTA,KAOXtK,EAAEkM,GAAGM,UAAUpL,SAAWA,EAAWlB,EAAYF,EAAEkM,GAAGM,UAAUqH,MAAO5S,EAAmB,CACxFgB,KAAM,WACN4F,KAAM,SAAc6E,EAAI5C,EAAQd,EAAS3G,EAAOC,GAC9C,IAAIuC,EAAWsR,SAASnN,EAAQS,IAAI,YAAa,IAC7C3E,EAAaqR,SAASnN,EAAQS,IAAI,cAAe,IAErDrI,EAAS8G,OAAOL,KAAKQ,KAAKT,KAAM8E,EAAI5C,EAAQd,EAAS3G,EAAOC,GAE5DsF,KAAK0O,aAAe,GACpB1O,KAAK/C,SAAWA,EAChB+C,KAAK9C,WAAaA,EAClB8C,KAAKqT,cAAgBpW,EAAWC,EAChC8C,KAAKkC,OAAS9J,EAAEoF,IAAI0E,EAAQoO,QAC5BtQ,KAAKvF,MAAQA,EAAQyH,EAAO9B,OAASnD,GAAYiF,EAAO9B,OAAS,GAAKlD,EAElE9E,EAAEuL,QAAQvC,EAAQS,IAAI,cACxB7B,KAAK0T,gBAAkBtS,EAAQS,IAAI,YACnC7B,KAAK2T,gBAAkB,OAEvB3T,KAAK0T,gBAAkB,KACvB1T,KAAK2T,gBAAkBvS,EAAQS,IAAI,YAE/B7B,KAAK2T,iBAAmB3T,KAAK2T,gBAAgB9R,MAAQ3J,IACvD8H,KAAK2T,gBAAkB,IAAIza,EAAS8G,KAAK2T,mBAI7C3T,KAAKoM,cAEPM,UAAW,SAAmB5H,EAAIqF,EAAGC,GACnC,OAAOnS,EAAKoK,MAAM8H,EAAInK,KAAKqT,gBAE7BzF,uBAAwB,WACtB,IAAIzB,EAAgBnM,KAAKmM,cACzB,MAAO,CACL0B,OAAQ7N,KAAKkC,OAAOiK,KAAmBjU,EACvC6N,MAAO/F,KAAKkC,OAAOiK,GACnB6B,MAAOhO,KAAK4T,UAAU5T,KAAKkC,OAAOiK,GAAgBA,GAClD3N,OAAQ2N,IAGZyH,UAAW,SAAmB7N,EAAO+N,GACnC,IAKIC,EALA7R,EAASlC,KAAKkC,OACdd,EAAUpB,KAAKoB,QACfsS,EAAkB1T,KAAK0T,gBACvBC,EAAkB3T,KAAK2T,gBAgB3B,OAZIA,IAAoBI,EAAWJ,EAAgB9R,IAAIkE,IAC7CgO,EACCL,GAAmBA,EAAgBtT,OAAS0T,EAC7CJ,EAAgBI,GACf5R,EAAO4R,GAAY,EACpB1S,EAAQS,IAAI,eACQ,EAAnBK,EAAO4R,GACR1S,EAAQS,IAAI,eAEZT,EAAQS,IAAI,iBAKxB8M,aAAc,SAAsBmF,EAAU/G,GAC5C,IAGIP,EACA9R,EACAyZ,EACAhK,EACAC,EACA4D,EARA9L,EAASlC,KAAKkC,OACdd,EAAUpB,KAAKoB,QACf/B,EAASW,KAAKX,OAwBlB,GAjBAmN,EAAenN,EAAOoN,YACtB0H,EAAalc,EAAKqW,MAAM9B,EAAe,GACvCrC,EAAI2J,EAAW9T,KAAKqT,cAIlB3Y,EAFEwH,EAAO4R,GAAY,GACrB1J,EAAI+J,GACkB,EACM,EAAnBjS,EAAO4R,IAChB1J,EAAI,EACK+J,EAAa,IAEtB/J,EAAI+J,EAAa,EACR,GAKG,QAFdnG,EAAQhO,KAAK4T,UAAU1R,EAAO4R,GAAWA,IAUzC,OAJI/G,IACFiB,EAAQhO,KAAK+N,mBAAmBC,EAAO5M,IAGlC/B,EAAO6R,SAAS/G,EAAGC,EAAGpK,KAAK/C,SAAW,EAAGvC,EAAS,EAAGsT,EAAOA,MAOvE5V,EAAEkM,GAAGM,UAAUnL,SAAWA,EAAWnB,EAAYF,EAAEkM,GAAGM,UAAUqH,MAAO5S,EAAmB,CACxFgB,KAAM,WACN4F,KAAM,SAAc6E,EAAI5C,EAAQd,EAAS3G,EAAOC,GAC9CjB,EAAS6G,OAAOL,KAAKQ,KAAKT,KAAM8E,EAAI5C,EAAQd,EAAS3G,EAAOC,GAE5DsF,KAAK0O,aAAe,GACpB1O,KAAKkC,OAASA,EAAS9J,EAAEoF,IAAI0E,EAAQoO,QACrCtQ,KAAKgC,IAAM/J,EAAK+J,IAAI9B,MAAMjI,EAAMiK,GAChClC,KAAKiC,IAAMhK,EAAKgK,IAAI/B,MAAMjI,EAAMiK,GAChClC,KAAK0F,MAAQ1F,KAAKiC,IAAMjC,KAAKgC,IAC7BhC,KAAKvF,MAAQA,EAAiC,SAAzB2G,EAAQS,IAAI,SAAsC,EAAhBK,EAAO9B,OAAaJ,KAAKvF,MAChFuF,KAAKoU,SAAWnc,EAAKoK,MAAM5H,EAAQyH,EAAO9B,QAC1CJ,KAAKqU,UAAY5Z,EAAQyH,EAAO9B,OAE5BgB,EAAQS,IAAI,mBAAqB3J,IAAckJ,EAAQS,IAAI,mBAAqBT,EAAQS,IAAI,iBAAmB7B,KAAKgC,OACtHhC,KAAKgC,IAAMZ,EAAQS,IAAI,kBAGrBT,EAAQS,IAAI,mBAAqB3J,IAAckJ,EAAQS,IAAI,mBAAqBT,EAAQS,IAAI,iBAAmB7B,KAAKiC,OACtHjC,KAAKiC,IAAMb,EAAQS,IAAI,kBAGzB7B,KAAKoM,aAEDpM,KAAKX,SACPW,KAAKpC,WAA2C,SAA9BwD,EAAQS,IAAI,cAA2B5J,EAAKqW,MAA0B,GAApBtO,KAAKwM,cAAsBpL,EAAQS,IAAI,gBAG/G6K,UAAW,SAAmB5H,EAAIqF,EAAGC,GACnC,OAAOnS,EAAKoK,MAAM8H,EAAInK,KAAKqU,YAE7BzG,uBAAwB,WACtB,IAAIzB,EAAgBnM,KAAKmM,cACzB,MAAO,CACL0B,OAAQ7N,KAAKkC,OAAOiK,KAAmBjU,EACvC6N,MAAO/F,KAAKkC,OAAOiK,GACnB3N,OAAQ2N,IAGZwC,aAAc,SAAsBmF,EAAU/G,GAC5C,IAUIkE,EACAlP,EACAiM,EACA7D,EAbAjI,EAASlC,KAAKkC,OACdd,EAAUpB,KAAKoB,QACfY,EAAMhC,KAAKgC,IACXC,EAAMjC,KAAKiC,IACXyD,EAAQ1F,KAAK0F,MACb0O,EAAWpU,KAAKoU,SAChB/U,EAASW,KAAKX,OACdmN,EAAexM,KAAKwM,aACpB5O,EAAaoC,KAAKpC,WAClB0W,EAAU9H,EAAe5O,EAc7B,OATAmE,EAAMvJ,EAAQ0J,EAAO4R,GAAW9R,EAAKC,GACrCkI,EAAI2J,EAAWM,EACfnD,EAAOhZ,EAAKqW,MAAMgG,EAAUA,IAAYvS,EAAMC,GAAO0D,IACrDsI,EAAQ5M,EAAQS,IAAI,mBAAqBE,EAAMX,EAAQS,IAAI,kBAAoBT,EAAQS,IAAI,kBAAoBT,EAAQS,IAAI,aAEvHkL,IACFiB,EAAQhO,KAAK+N,mBAAmBC,EAAO5M,IAGlC/B,EAAO0Q,SAAS5F,EAAG8G,EAAM9G,EAAG8G,EAAOrT,EAAYoQ,MAO1D5V,EAAEkM,GAAGM,UAAUlL,OAASA,EAASpB,EAAYF,EAAEkM,GAAGM,UAAUqH,MAAO,CACjE5R,KAAM,SACN4F,KAAM,SAAc6E,EAAI5C,EAAQd,EAAS3G,EAAOC,GAC9C,IAAIsH,EAAKC,EAAKO,EAEd9I,EAAO4G,OAAOL,KAAKQ,KAAKT,KAAM8E,EAAI5C,EAAQd,EAAS3G,EAAOC,GAG1DsF,KAAKkC,OAASA,EAASvJ,EAAgBuJ,IAEvCM,EAAON,EAAO1B,SACT,GAAiB,OAAZgC,EAAK,GAAcA,EAAK,GAAKA,EAAK,GAC5CA,EAAK,GAAmB,OAAdN,EAAO,GAAcM,EAAK,GAAKA,EAAK,GAC9CR,EAAM/J,EAAK+J,IAAI9B,MAAMjI,EAAMiK,GAC3BD,EAAMhK,EAAKgK,IAAI/B,MAAMjI,EAAMiK,GAGzBF,EADEZ,EAAQS,IAAI,UAAY3J,EACpB8J,EAAM,EAAIA,EAAM,EAEhBZ,EAAQS,IAAI,QAGpB7B,KAAKgC,IAAMA,EACXhC,KAAKiC,IAAMA,EACXjC,KAAK0F,MAAQzD,EAAMD,EACnBhC,KAAK+O,OAAS,GACd/O,KAAKuU,YAAc,GACnBvU,KAAKwU,WAAa,GAClBxU,KAAKvF,MAAQA,EAAiC,SAAzB2G,EAAQS,IAAI,SAAsB,QAAUpH,EACjEuF,KAAKX,OAASW,KAAKiG,IAAI1B,WAAW9J,EAAOC,EAAQ0G,EAAQS,IAAI,cAExDK,EAAO9B,SACVJ,KAAKkM,UAAW,GAGlBlM,KAAKoM,cAEPM,UAAW,SAAmB5H,EAAIqF,EAAGC,GACnC,IAAIqK,EAAUzU,KAAKX,OAAOqV,WAAW5P,EAAIqF,EAAGC,GAC5C,OAAOqK,IAAYvc,GAAa8H,KAAK+O,OAAO0F,KAAavc,EAAY8H,KAAK+O,OAAO0F,GAAWvc,GAE9F0V,uBAAwB,WACtB,IAAIzB,EAAgBnM,KAAKmM,cACzB,MAAO,CACLwI,SAAUxI,EAAcL,OAAO,EAAG,GAClC/F,MAAO/F,KAAKkC,OAAOiK,EAAcL,OAAO,IACxC8I,OAAQzI,IAGZW,gBAAiB,SAAyBC,GACxC,IAEI8H,EAFA1I,EAAgBnM,KAAKmM,cACrBsI,EAAUzU,KAAKuU,YAAYpI,GAI/B,cAFOnM,KAAK+O,OAAO0F,GAEXtI,EAAcL,OAAO,EAAG,IAC9B,IAAK,IACH+I,EAAQ7U,KAAK8U,YAAY3I,EAAcL,OAAO,GAAIiB,GAClD,MAEF,IAAK,IACH8H,EAAQ7U,KAAK+U,kBAAkBhI,GAC/B,MAEF,IAAK,IACH8H,EAAQ7U,KAAKgV,aAAajI,GAI9B/M,KAAKuU,YAAYpI,GAAiB0I,EAAMzL,GACxCpJ,KAAK+O,OAAO8F,EAAMzL,IAAM+C,EACxBnM,KAAKX,OAAOyP,iBAAiB2F,EAASI,IAExCC,YAAa,SAAqBG,EAAIlI,GACpC,IAAImI,EAAWlV,KAAKkC,OAAO+S,GACvBE,EAAald,EAAKqW,MAAMtO,KAAKsM,cAAgB4I,EAAWlV,KAAKgC,KAAOhC,KAAK0F,QACzEsI,EAAQhO,KAAKoB,QAAQS,IAAI,eAAeoT,EAAK,GAMjD,OAJIlI,IACFiB,EAAQhO,KAAK+N,mBAAmBC,EAAOhO,KAAKoB,UAGvCpB,KAAKX,OAAO6R,SAAS,EAAG,EAAGiE,EAAa,EAAGnV,KAAKwM,aAAe,EAAGwB,EAAOA,IAElF+G,kBAAmB,SAA2BhI,GAC5C,IAAIqI,EAAUpV,KAAKkC,OAAO,GACtBmT,EAAYpd,EAAKqW,MAAMtO,KAAKsM,cAAgB8I,EAAUpV,KAAKgC,KAAOhC,KAAK0F,QACvEsI,EAAQhO,KAAKoB,QAAQS,IAAI,oBAM7B,OAJIkL,IACFiB,EAAQhO,KAAK+N,mBAAmBC,EAAOhO,KAAKoB,UAGvCpB,KAAKX,OAAO6R,SAAS,EAAGjZ,EAAKqW,MAA0B,GAApBtO,KAAKwM,cAAqB6I,EAAY,EAAGpd,EAAKqW,MAA0B,GAApBtO,KAAKwM,cAAsB,EAAGwB,EAAOA,IAErIgH,aAAc,SAAsBjI,GAClC,IAAIuI,EAAYtV,KAAKkC,OAAO,GACxBiI,EAAIlS,EAAKqW,MAAMtO,KAAKsM,cAAgBgJ,EAAYtV,KAAKgC,KAAOhC,KAAK0F,OAAS1F,KAAKoB,QAAQS,IAAI,eAAiB,GAC5G0T,EAAYtd,EAAKqW,MAA0B,GAApBtO,KAAKwM,cAC5BgJ,EAAexV,KAAKwM,aAA2B,EAAZ+I,EACnCvH,EAAQhO,KAAKoB,QAAQS,IAAI,eAM7B,OAJIkL,IACFiB,EAAQhO,KAAK+N,mBAAmBC,EAAOhO,KAAKoB,UAGvCpB,KAAKX,OAAO6R,SAAS/G,EAAGoL,EAAWvV,KAAKoB,QAAQS,IAAI,eAAiB,EAAG2T,EAAe,EAAGxH,EAAOA,IAE1G/M,OAAQ,WACN,IAEIwB,EACAoS,EAHAnC,EAAO1S,KAAKkC,OAAO9B,OACnBf,EAASW,KAAKX,OAIlB,GAAK3F,EAAO4G,OAAOW,OAAOR,KAAKT,MAA/B,CAIA,IAAKyC,EAAI,EAAGA,EAAIiQ,EAAMjQ,IACpBoS,EAAQ7U,KAAK8U,YAAYrS,GAAGwM,SAC5BjP,KAAK+O,OAAO8F,EAAMzL,IAAM,IAAM3G,EAC9BzC,KAAKuU,YAAY,IAAM9R,GAAKoS,EAAMzL,GAGb,OAAnBpJ,KAAKkC,OAAO,KACd2S,EAAQ7U,KAAK+U,oBAAoB9F,SACjCjP,KAAK+O,OAAO8F,EAAMzL,IAAM,KACxBpJ,KAAKuU,YAAYkB,GAAKZ,EAAMzL,IAGP,OAAnBpJ,KAAKkC,OAAO,KACd2S,EAAQ7U,KAAKgV,eAAe/F,SAC5BjP,KAAK+O,OAAO8F,EAAMzL,IAAM,KACxBpJ,KAAKuU,YAAYmB,GAAKb,EAAMzL,IAG9B/J,EAAO4B,aAOX7I,EAAEkM,GAAGM,UAAUjL,IAAMA,EAAMrB,EAAYF,EAAEkM,GAAGM,UAAUqH,MAAO,CAC3D5R,KAAM,MACN4F,KAAM,SAAc6E,EAAI5C,EAAQd,EAAS3G,EAAOC,GAC9C,IACI+H,EADAkT,EAAQ,EAeZ,GAZAhc,EAAI2G,OAAOL,KAAKQ,KAAKT,KAAM8E,EAAI5C,EAAQd,EAAS3G,EAAOC,GAEvDsF,KAAK+O,OAAS,GAEd/O,KAAKuU,YAAc,GAEnBvU,KAAKkC,OAASA,EAAS9J,EAAEoF,IAAI0E,EAAQoO,QAER,SAAzBlP,EAAQS,IAAI,WACd7B,KAAKvF,MAAQuF,KAAKtF,QAGA,EAAhBwH,EAAO9B,OACT,IAAKqC,EAAIP,EAAO9B,OAAQqC,KACtBkT,GAASzT,EAAOO,GAIpBzC,KAAK2V,MAAQA,EACb3V,KAAKoM,aACLpM,KAAK4V,OAAS3d,EAAKoK,MAAMpK,EAAK+J,IAAIhC,KAAKsM,YAAatM,KAAKwM,cAAgB,IAE3EE,UAAW,SAAmB5H,EAAIqF,EAAGC,GACnC,IAAIqK,EAAUzU,KAAKX,OAAOqV,WAAW5P,EAAIqF,EAAGC,GAC5C,OAAOqK,IAAYvc,GAAa8H,KAAK+O,OAAO0F,KAAavc,EAAY8H,KAAK+O,OAAO0F,GAAWvc,GAE9F0V,uBAAwB,WACtB,IAAIzB,EAAgBnM,KAAKmM,cACzB,MAAO,CACL0B,OAAQ7N,KAAKkC,OAAOiK,KAAmBjU,EACvC6N,MAAO/F,KAAKkC,OAAOiK,GACnB0J,QAAS7V,KAAKkC,OAAOiK,GAAiBnM,KAAK2V,MAAQ,IACnD3H,MAAOhO,KAAKoB,QAAQS,IAAI,eAAesK,EAAgBnM,KAAKoB,QAAQS,IAAI,eAAezB,QACvF5B,OAAQ2N,IAGZW,gBAAiB,SAAyBC,GACxC,IAAIZ,EAAgBnM,KAAKmM,cACrB2J,EAAW9V,KAAK+V,YAAY5J,EAAeY,GAC3C0H,EAAUzU,KAAKuU,YAAYpI,UACxBnM,KAAK+O,OAAO0F,GACnBzU,KAAKX,OAAOyP,iBAAiB2F,EAASqB,GACtC9V,KAAKuU,YAAYpI,GAAiB2J,EAAS1M,GAC3CpJ,KAAK+O,OAAO+G,EAAS1M,IAAM+C,GAE7B4J,YAAa,SAAqBjC,EAAU/G,GAC1C,IASIiJ,EACAC,EACAxT,EACAiQ,EACA1E,EAbA3O,EAASW,KAAKX,OACd+B,EAAUpB,KAAKoB,QACfwU,EAAS5V,KAAK4V,OACdlX,EAAc0C,EAAQS,IAAI,eAC1BrD,EAAS4C,EAAQS,IAAI,UACrBqU,EAAS,EAAIje,EAAKke,GAClBjU,EAASlC,KAAKkC,OACdyT,EAAQ3V,KAAK2V,MACbjE,EAAOlT,EAAS,EAAIvG,EAAKke,IAAM3X,EAAS,KAAO,EAQnD,IAFAkU,EAAOxQ,EAAO9B,OAETqC,EAAI,EAAGA,EAAIiQ,EAAMjQ,IAAK,CASzB,GAPAwT,EADAD,EAAQtE,EAGI,EAARiE,IAEFM,EAAMvE,EAAOwE,GAAUhU,EAAOO,GAAKkT,IAGjC7B,IAAarR,EAOf,OANAuL,EAAQ5M,EAAQS,IAAI,eAAeY,EAAIrB,EAAQS,IAAI,eAAezB,QAE9D2M,IACFiB,EAAQhO,KAAK+N,mBAAmBC,EAAO5M,IAGlC/B,EAAO+W,aAAaR,EAAQA,EAAQA,EAASlX,EAAasX,EAAOC,EAAK/d,EAAW8V,GAG1F0D,EAAOuE,IAGXhV,OAAQ,WACN,IAKI4T,EACApS,EANApD,EAASW,KAAKX,OACd6C,EAASlC,KAAKkC,OACdd,EAAUpB,KAAKoB,QACfwU,EAAS5V,KAAK4V,OACdlX,EAAc0C,EAAQS,IAAI,eAI9B,GAAKlI,EAAI2G,OAAOW,OAAOR,KAAKT,MAA5B,CAQA,IAJItB,GACFW,EAAOuQ,WAAWgG,EAAQA,EAAQ3d,EAAKoK,MAAMuT,EAASlX,EAAc,GAAI0C,EAAQS,IAAI,eAAgB3J,EAAWwG,GAAauQ,SAGzHxM,EAAIP,EAAO9B,OAAQqC,KAClBP,EAAOO,KAEToS,EAAQ7U,KAAK+V,YAAYtT,GAAGwM,SAC5BjP,KAAKuU,YAAY9R,GAAKoS,EAAMzL,GAE5BpJ,KAAK+O,OAAO8F,EAAMzL,IAAM3G,GAI5BpD,EAAO4B,aAOX7I,EAAEkM,GAAGM,UAAUhL,IAAMA,EAAMtB,EAAYF,EAAEkM,GAAGM,UAAUqH,MAAO,CAC3D5R,KAAM,MACN4F,KAAM,SAAc6E,EAAI5C,EAAQd,EAAS3G,EAAOC,GAC9Cd,EAAI0G,OAAOL,KAAKQ,KAAKT,KAAM8E,EAAI5C,EAAQd,EAAS3G,EAAOC,GAEvDsF,KAAKkC,OAAS9J,EAAEoF,IAAI0E,EAAQoO,QAC5BtQ,KAAKvF,MAAiC,SAAzB2G,EAAQS,IAAI,SAAsB,QAAUpH,EACzDuF,KAAKoM,aAEApM,KAAKkC,OAAO9B,SACfJ,KAAKkM,SAAW,IAOpBQ,UAAW,WACT,OAAO,GAETkB,uBAAwB,WACtB,IAAIlL,EAAS,CAAC,CACZ2T,MAAO,KACPtQ,MAAO/F,KAAKsW,UAAU,IACrB,CACDD,MAAO,MACPtQ,MAAO/F,KAAKsW,UAAU,IACrB,CACDD,MAAO,KACPtQ,MAAO/F,KAAKsW,UAAU,KA+BxB,OA5BItW,KAAKuW,WAAare,GACpBwK,EAAOE,KAAK,CACVyT,MAAO,KACPtQ,MAAO/F,KAAKuW,WAIZvW,KAAKwW,WAAate,GACpBwK,EAAOE,KAAK,CACVyT,MAAO,KACPtQ,MAAO/F,KAAKwW,WAIZxW,KAAKyW,WAAave,GACpBwK,EAAOE,KAAK,CACVyT,MAAO,KACPtQ,MAAO/F,KAAKyW,WAIZzW,KAAK0W,WAAaxe,GACpBwK,EAAOE,KAAK,CACVyT,MAAO,KACPtQ,MAAO/F,KAAK0W,WAIThU,GAETzB,OAAQ,WACN,IASIwV,EACAF,EACAI,EACAC,EACAC,EACAC,EACAJ,EACAF,EACA/T,EACAsU,EACAC,EAnBA3X,EAASW,KAAKX,OACd6C,EAASlC,KAAKkC,OACdwQ,EAAOxQ,EAAO9B,OACdgB,EAAUpB,KAAKoB,QACfkL,EAActM,KAAKsM,YACnBE,EAAexM,KAAKwM,aACpByK,EAAW7V,EAAQS,IAAI,mBAAqB3J,EAAYD,EAAK+J,IAAI9B,MAAMjI,EAAMiK,GAAUd,EAAQS,IAAI,iBACnGqV,EAAW9V,EAAQS,IAAI,mBAAqB3J,EAAYD,EAAKgK,IAAI/B,MAAMjI,EAAMiK,GAAUd,EAAQS,IAAI,iBACnGkP,EAAa,EAajB,GAAKnX,EAAI0G,OAAOW,OAAOR,KAAKT,MAA5B,CAIA,GAAIoB,EAAQS,IAAI,OACVT,EAAQS,IAAI,iBAAmC,EAAhBK,EAAO9B,QACxCmW,EAAWrU,EAAO,GAClBuU,EAAWvU,EAAO,GAClB0U,EAAK1U,EAAO,GACZ2U,EAAK3U,EAAO,GACZ4U,EAAK5U,EAAO,GACZwU,EAAWxU,EAAO,GAClBsU,EAAWtU,EAAO,KAElBuU,EAAWvU,EAAO,GAClB0U,EAAK1U,EAAO,GACZ2U,EAAK3U,EAAO,GACZ4U,EAAK5U,EAAO,GACZwU,EAAWxU,EAAO,SAWpB,GARAA,EAAOiV,KAAK,SAAUC,EAAGC,GACvB,OAAOD,EAAIC,IAEbT,EAAKne,EAASyJ,EAAQ,GACtB2U,EAAKpe,EAASyJ,EAAQ,GAEtByU,GADAG,EAAKre,EAASyJ,EAAQ,IACX0U,EAEPxV,EAAQS,IAAI,gBAAiB,CAG/B,IAFA4U,EAAWC,EAAWxe,EAEjBuK,EAAI,EAAGA,EAAIiQ,EAAMjQ,IAChBgU,IAAave,GAAagK,EAAOO,GAAKmU,EAAKD,EAAMvV,EAAQS,IAAI,gBAC/D4U,EAAWvU,EAAOO,IAGhBP,EAAOO,GAAKqU,EAAKH,EAAMvV,EAAQS,IAAI,gBACrC6U,EAAWxU,EAAOO,IAItB8T,EAAWrU,EAAO,GAClBsU,EAAWtU,EAAOwQ,EAAO,QAEzB+D,EAAWvU,EAAO,GAClBwU,EAAWxU,EAAOwQ,EAAO,GAI7B1S,KAAKsW,UAAY,CAACM,EAAIC,EAAIC,GAC1B9W,KAAKyW,SAAWA,EAChBzW,KAAK0W,SAAWA,EAChB1W,KAAKuW,SAAWA,EAChBvW,KAAKwW,SAAWA,EAChBQ,EAAW1K,GAAe4K,EAAWD,EAAW,GAE5C7V,EAAQS,IAAI,kBACdkP,EAAa9Y,EAAKga,KAAK7Q,EAAQS,IAAI,eAEnCmV,GADA1K,GAAe,EAAIrU,EAAKga,KAAK7Q,EAAQS,IAAI,iBACfqV,EAAWD,EAAW,GAE5CV,EAAWE,GACbpX,EAAOuQ,YAAY2G,EAAWU,GAAYD,EAAWjG,EAAYvE,EAAe,EAAGpL,EAAQS,IAAI,cAAeT,EAAQS,IAAI,oBAAqBT,EAAQS,IAAI,qBAAqBoN,SAGnKyH,EAAXF,GACFnX,EAAOuQ,YAAY4G,EAAWS,GAAYD,EAAWjG,EAAYvE,EAAe,EAAGpL,EAAQS,IAAI,cAAeT,EAAQS,IAAI,oBAAqBT,EAAQS,IAAI,qBAAqBoN,UAKpL5P,EAAO6R,SAASjZ,EAAKqW,OAAOsI,EAAKK,GAAYD,EAAWjG,GAAa9Y,EAAKqW,MAAqB,GAAf9B,GAAqBvU,EAAKqW,OAAOwI,EAAKF,GAAMI,GAAW/e,EAAKqW,MAAqB,GAAf9B,GAAqBpL,EAAQS,IAAI,gBAAiBT,EAAQS,IAAI,iBAAiBoN,SAEjO5P,EAAO0Q,SAAS9X,EAAKqW,OAAOmI,EAAWQ,GAAYD,EAAWjG,GAAa9Y,EAAKqW,MAAM9B,EAAe,GAAIvU,EAAKqW,OAAOsI,EAAKK,GAAYD,EAAWjG,GAAa9Y,EAAKqW,MAAM9B,EAAe,GAAIpL,EAAQS,IAAI,cAAcoN,SACtN5P,EAAO0Q,SAAS9X,EAAKqW,OAAOmI,EAAWQ,GAAYD,EAAWjG,GAAa9Y,EAAKqW,MAAM9B,EAAe,GAAIvU,EAAKqW,OAAOmI,EAAWQ,GAAYD,EAAWjG,GAAa9Y,EAAKqW,MAAM9B,EAAeA,EAAe,GAAIpL,EAAQS,IAAI,iBAAiBoN,SAE9O5P,EAAO0Q,SAAS9X,EAAKqW,OAAOoI,EAAWO,GAAYD,EAAWjG,GAAa9Y,EAAKqW,MAAM9B,EAAe,GAAIvU,EAAKqW,OAAOwI,EAAKG,GAAYD,EAAWjG,GAAa9Y,EAAKqW,MAAM9B,EAAe,GAAIpL,EAAQS,IAAI,cAAcoN,SACtN5P,EAAO0Q,SAAS9X,EAAKqW,OAAOoI,EAAWO,GAAYD,EAAWjG,GAAa9Y,EAAKqW,MAAM9B,EAAe,GAAIvU,EAAKqW,OAAOoI,EAAWO,GAAYD,EAAWjG,GAAa9Y,EAAKqW,MAAM9B,EAAeA,EAAe,GAAIpL,EAAQS,IAAI,iBAAiBoN,SAE9O5P,EAAO0Q,SAAS9X,EAAKqW,OAAOuI,EAAKI,GAAYD,EAAWjG,GAAa9Y,EAAKqW,MAAqB,GAAf9B,GAAqBvU,EAAKqW,OAAOuI,EAAKI,GAAYD,EAAWjG,GAAa9Y,EAAKqW,MAAqB,GAAf9B,GAAqBpL,EAAQS,IAAI,gBAAgBoN,SAElN7N,EAAQS,IAAI,YACdkV,EAAO9e,EAAKga,KAAK7Q,EAAQS,IAAI,eAC7BxC,EAAO0Q,SAAS9X,EAAKqW,OAAOlN,EAAQS,IAAI,UAAYoV,GAAYD,EAAWjG,GAAa9Y,EAAKqW,MAAM9B,EAAe,EAAIuK,GAAO9e,EAAKqW,OAAOlN,EAAQS,IAAI,UAAYoV,GAAYD,EAAWjG,GAAa9Y,EAAKqW,MAAM9B,EAAe,EAAIuK,GAAO3V,EAAQS,IAAI,gBAAgBoN,SACtQ5P,EAAO0Q,SAAS9X,EAAKqW,OAAOlN,EAAQS,IAAI,UAAYoV,GAAYD,EAAWjG,EAAagG,GAAO9e,EAAKqW,MAAM9B,EAAe,GAAIvU,EAAKqW,OAAOlN,EAAQS,IAAI,UAAYoV,GAAYD,EAAWjG,EAAagG,GAAO9e,EAAKqW,MAAM9B,EAAe,GAAIpL,EAAQS,IAAI,gBAAgBoN,UAGxQ5P,EAAO4B,aAKXpH,EAASvB,EAAY,CACnB2H,KAAM,SAAcZ,EAAQ+J,EAAI/O,EAAM0F,GACpCC,KAAKX,OAASA,EACdW,KAAKoJ,GAAKA,EACVpJ,KAAK3F,KAAOA,EACZ2F,KAAKD,KAAOA,GAEdkP,OAAQ,WAEN,OADAjP,KAAKX,OAAOiY,YAAYtX,MACjBA,QAGXlG,EAAexB,EAAY,CACzBif,SAAU,kBACVtX,KAAM,SAAcxF,EAAOC,EAAQ2E,GAC5B5E,IAILuF,KAAKvF,MAAQA,EACbuF,KAAKtF,OAASA,EACdsF,KAAKX,OAASA,EACdW,KAAKwP,YAAc,KAEfnQ,EAAO,KACTA,EAASA,EAAO,IAGlBjH,EAAEuM,KAAKtF,EAAQ,eAAgBW,QAEjC+P,SAAU,SAAkByH,EAAIC,EAAIC,EAAIC,EAAIrd,EAAW2B,GACrD,OAAO+D,KAAKmS,UAAU,CAAC,CAACqF,EAAIC,GAAK,CAACC,EAAIC,IAAMrd,EAAW2B,IAEzDkW,UAAW,SAAmBd,EAAM/W,EAAWC,EAAW0B,GACxD,OAAO+D,KAAK4X,UAAU,QAAS,CAACvG,EAAM/W,EAAWC,EAAW0B,KAE9D2T,WAAY,SAAoBzF,EAAGC,EAAGwL,EAAQtb,EAAWC,EAAW0B,GAClE,OAAO+D,KAAK4X,UAAU,SAAU,CAACzN,EAAGC,EAAGwL,EAAQtb,EAAWC,EAAW0B,KAEvEma,aAAc,SAAsBjM,EAAGC,EAAGwL,EAAQiC,EAAYC,EAAUxd,EAAWC,GACjF,OAAOyF,KAAK4X,UAAU,WAAY,CAACzN,EAAGC,EAAGwL,EAAQiC,EAAYC,EAAUxd,EAAWC,KAEpF2W,SAAU,SAAkB/G,EAAGC,EAAG3P,EAAOC,EAAQJ,EAAWC,GAC1D,OAAOyF,KAAK4X,UAAU,OAAQ,CAACzN,EAAGC,EAAG3P,EAAOC,EAAQJ,EAAWC,KAEjEwd,WAAY,WACV,OAAO/X,KAAK6E,QAMduN,eAAgB,WACd,OAAOpS,KAAKwP,aAMdjK,MAAO,WACLuF,MAAM,0BAERkN,QAAS,SAAiBlT,EAAIzF,GAC5BjH,EAAEiH,GAAQ4K,KAAKnF,IAMjBmT,oBAAqB,SAA6Bxd,EAAOC,EAAQmK,GAE/D,IAAIxD,EACJA,EAAQrB,KAAKuX,SAAS3V,KAAKlH,GAGzBsF,KAAKyM,YADHpL,EACiBA,EAAM,GAENjJ,EAAEyM,GAAQnK,SAG/B2G,EAAQrB,KAAKuX,SAAS3V,KAAKnH,GAGzBuF,KAAKuM,WADHlL,EACgBA,EAAM,GAENjJ,EAAEyM,GAAQpK,SAOhCmd,UAAW,SAAmBM,EAAWC,GACvC,IAAI/O,EAAKjP,IAET,OADAge,EAAUzX,QAAQ0I,GACX,IAAIvP,EAAOmG,KAAMoJ,EAAI8O,EAAWC,IAMzCb,YAAa,SAAqBzC,GAChC/J,MAAM,gCAMRgE,iBAAkB,SAA0B2F,EAASI,GACnD/J,MAAM,qCAMRgF,iBAAkB,SAA0B2E,EAASI,GACnD/J,MAAM,qCAMRoF,cAAe,SAAuBuE,GACpC3J,MAAM,kCAMR4J,WAAY,SAAoB5P,EAAIqF,EAAGC,GACrCU,MAAM,+BAMR7J,OAAQ,WACN6J,MAAM,6BAGV/Q,EAAiBzB,EAAYwB,EAAc,CACzCmG,KAAM,SAAcxF,EAAOC,EAAQ2E,EAAQoF,GACzC1K,EAAeuG,OAAOL,KAAKQ,KAAKT,KAAMvF,EAAOC,EAAQ2E,GAErDW,KAAK6E,OAAS7M,EAASgM,cAAc,UAEjC3E,EAAO,KACTA,EAASA,EAAO,IAGlBjH,EAAEuM,KAAKtF,EAAQ,eAAgBW,MAC/B5H,EAAE4H,KAAK6E,QAAQjB,IAAI,CACjBwU,QAAS,eACT3d,MAAOA,EACPC,OAAQA,EACR2d,cAAe,QAGjBrY,KAAKgY,QAAQhY,KAAK6E,OAAQxF,GAE1BW,KAAKiY,oBAAoBxd,EAAOC,EAAQsF,KAAK6E,QAE7C7E,KAAK6E,OAAOpK,MAAQuF,KAAKuM,WACzBvM,KAAK6E,OAAOnK,OAASsF,KAAKyM,YAC1BzM,KAAKyE,SAAWA,EAChBzE,KAAK+O,OAAS,GACd/O,KAAKsY,SAAW,GAChBtY,KAAKuY,qBAAuBrgB,EAC5BE,EAAE4H,KAAK6E,QAAQjB,IAAI,CACjBnJ,MAAOuF,KAAKuM,WACZ7R,OAAQsF,KAAKyM,eAGjB+L,YAAa,SAAqBle,EAAWC,EAAW0B,GACtD,IAAIwc,EAAUzY,KAAK6E,OAAOE,WAAW,MAYrC,OAVIzK,IAAcpC,IAChBugB,EAAQC,YAAcpe,GAGxBme,EAAQxc,UAAYA,IAAc/D,EAAY,EAAI+D,EAE9C1B,IAAcrC,IAChBugB,EAAQE,UAAYpe,GAGfke,GAETlT,MAAO,WACSvF,KAAKwY,cAEXI,UAAU,EAAG,EAAG5Y,KAAKuM,WAAYvM,KAAKyM,aAC9CzM,KAAK+O,OAAS,GACd/O,KAAKsY,SAAW,GAChBtY,KAAKuY,qBAAuBrgB,GAE9B2gB,WAAY,SAAoBpE,EAASpD,EAAM/W,EAAWC,EAAW0B,GACnE,IACIwG,EACAqP,EAFA2G,EAAUzY,KAAKwY,YAAYle,EAAWC,EAAW0B,GAOrD,IAHAwc,EAAQK,YACRL,EAAQM,OAAO1H,EAAK,GAAG,GAAK,GAAKA,EAAK,GAAG,GAAK,IAEzC5O,EAAI,EAAGqP,EAAOT,EAAKjR,OAAQqC,EAAIqP,EAAMrP,IACxCgW,EAAQO,OAAO3H,EAAK5O,GAAG,GAAK,GAAK4O,EAAK5O,GAAG,GAAK,IAG5CnI,IAAcpC,GAChBugB,EAAQQ,SAGN1e,IAAcrC,GAChBugB,EAAQS,OAGNlZ,KAAKmZ,UAAYjhB,GAAa8H,KAAKoZ,UAAYlhB,GAAaugB,EAAQY,cAAcrZ,KAAKmZ,QAASnZ,KAAKoZ,WACvGpZ,KAAKuY,qBAAuB9D,IAGhC6E,YAAa,SAAqB7E,EAAStK,EAAGC,EAAGwL,EAAQtb,EAAWC,EAAW0B,GAC7E,IAAIwc,EAAUzY,KAAKwY,YAAYle,EAAWC,EAAW0B,GAErDwc,EAAQK,YACRL,EAAQc,IAAIpP,EAAGC,EAAGwL,EAAQ,EAAG,EAAI3d,EAAKke,IAAI,GAEtCnW,KAAKmZ,UAAYjhB,GAAa8H,KAAKoZ,UAAYlhB,GAAaugB,EAAQY,cAAcrZ,KAAKmZ,QAASnZ,KAAKoZ,WACvGpZ,KAAKuY,qBAAuB9D,GAG1Bna,IAAcpC,GAChBugB,EAAQQ,SAGN1e,IAAcrC,GAChBugB,EAAQS,QAGZM,cAAe,SAAuB/E,EAAStK,EAAGC,EAAGwL,EAAQiC,EAAYC,EAAUxd,EAAWC,GAC5F,IAAIke,EAAUzY,KAAKwY,YAAYle,EAAWC,GAE1Cke,EAAQK,YACRL,EAAQM,OAAO5O,EAAGC,GAClBqO,EAAQc,IAAIpP,EAAGC,EAAGwL,EAAQiC,EAAYC,GAAU,GAChDW,EAAQO,OAAO7O,EAAGC,GAClBqO,EAAQgB,YAEJnf,IAAcpC,GAChBugB,EAAQQ,SAGN1e,GACFke,EAAQS,OAGNlZ,KAAKmZ,UAAYjhB,GAAa8H,KAAKoZ,UAAYlhB,GAAaugB,EAAQY,cAAcrZ,KAAKmZ,QAASnZ,KAAKoZ,WACvGpZ,KAAKuY,qBAAuB9D,IAGhCiF,UAAW,SAAmBjF,EAAStK,EAAGC,EAAG3P,EAAOC,EAAQJ,EAAWC,GACrE,OAAOyF,KAAK6Y,WAAWpE,EAAS,CAAC,CAACtK,EAAGC,GAAI,CAACD,EAAI1P,EAAO2P,GAAI,CAACD,EAAI1P,EAAO2P,EAAI1P,GAAS,CAACyP,EAAGC,EAAI1P,GAAS,CAACyP,EAAGC,IAAK9P,EAAWC,IAEzH+c,YAAa,SAAqBzC,GAIhC,OAHA7U,KAAK+O,OAAO8F,EAAMzL,IAAMyL,EACxB7U,KAAKsY,SAAS1V,KAAKiS,EAAMzL,IACzBpJ,KAAKwP,YAAcqF,EAAMzL,GAClByL,EAAMzL,IAEf0F,iBAAkB,SAA0B2F,EAASI,GACnD,IACIpS,EADA6V,EAAWtY,KAAKsY,SAIpB,IAFAtY,KAAK+O,OAAO8F,EAAMzL,IAAMyL,EAEnBpS,EAAI6V,EAASlY,OAAQqC,KACpB6V,EAAS7V,IAAMgS,IACjB6D,EAAS7V,GAAKoS,EAAMzL,WAIjBpJ,KAAK+O,OAAO0F,IAErB7F,kBAAmB,SAA2BH,EAAUM,GACtD,IAEI4K,EACAlX,EACAmX,EAJAtB,EAAWtY,KAAKsY,SAChBuB,EAAW,GAKf,IAAKpX,EAAIgM,EAASrO,OAAQqC,KACxBoX,EAASpL,EAAShM,KAAM,EAG1B,IAAKA,EAAI6V,EAASlY,OAAQqC,KAGpBoX,EAFJF,EAAMrB,EAAS7V,MAGb6V,EAAS/U,OAAOd,EAAG,UACZzC,KAAK+O,OAAO4K,GACnBC,EAAQnX,GAIZ,IAAKA,EAAIsM,EAAO3O,OAAQqC,KACtB6V,EAAS/U,OAAOqW,EAAO,EAAG7K,EAAOtM,GAAG2G,IACpCpJ,KAAK+O,OAAOA,EAAOtM,GAAG2G,IAAM2F,EAAOtM,IAGvCqN,iBAAkB,SAA0B2E,EAASI,GACnD,IACIpS,EADA6V,EAAWtY,KAAKsY,SAGpB,IAAK7V,EAAI6V,EAASlY,OAAQqC,KACxB,GAAI6V,EAAS7V,KAAOgS,EAGlB,OAFA6D,EAAS/U,OAAOd,EAAI,EAAG,EAAGoS,EAAMzL,SAChCpJ,KAAK+O,OAAO8F,EAAMzL,IAAMyL,IAK9B3E,cAAe,SAAuBuE,GACpC,IACIhS,EADA6V,EAAWtY,KAAKsY,SAGpB,IAAK7V,EAAI6V,EAASlY,OAAQqC,KACxB,GAAI6V,EAAS7V,KAAOgS,EAAS,CAC3B6D,EAAS/U,OAAOd,EAAG,GACnB,aAIGzC,KAAK+O,OAAO0F,IAErBC,WAAY,SAAoB5P,EAAIqF,EAAGC,GAIrC,OAHApK,KAAKmZ,QAAUhP,EACfnK,KAAKoZ,QAAUhP,EACfpK,KAAKiB,SACEjB,KAAKuY,sBAEdtX,OAAQ,WACN,IAKI4T,EACApS,EANA6V,EAAWtY,KAAKsY,SAChBvJ,EAAS/O,KAAK+O,OACd5U,EAAame,EAASlY,OAQ1B,IAPcJ,KAAKwY,cAKXI,UAAU,EAAG,EAAG5Y,KAAKuM,WAAYvM,KAAKyM,aAEzChK,EAAI,EAAGA,EAAItI,EAAYsI,IAG1BzC,KAAK,SADL6U,EAAQ9F,EADEuJ,EAAS7V,KAEEpI,MAAM6F,MAAMF,KAAM6U,EAAM9U,MAG1CC,KAAKyE,WAERzE,KAAK+O,OAAS,GACd/O,KAAKsY,SAAW,OAItBte,EAAc1B,EAAYwB,EAAc,CACtCmG,KAAM,SAAcxF,EAAOC,EAAQ2E,GACjC,IAAIya,EAEJ9f,EAAYsG,OAAOL,KAAKQ,KAAKT,KAAMvF,EAAOC,EAAQ2E,GAE9CA,EAAO,KACTA,EAASA,EAAO,IAGlBjH,EAAEuM,KAAKtF,EAAQ,eAAgBW,MAC/BA,KAAK6E,OAAS7M,EAASgM,cAAc,QACrC5L,EAAE4H,KAAK6E,QAAQjB,IAAI,CACjBwU,QAAS,eACT2B,SAAU,WACVC,SAAU,SACVvf,MAAOA,EACPC,OAAQA,EACRuf,OAAQ,MACRC,QAAS,MACT7B,cAAe,QAGjBrY,KAAKgY,QAAQhY,KAAK6E,OAAQxF,GAE1BW,KAAKiY,oBAAoBxd,EAAOC,EAAQsF,KAAK6E,QAE7C7E,KAAK6E,OAAOpK,MAAQuF,KAAKuM,WACzBvM,KAAK6E,OAAOnK,OAASsF,KAAKyM,YAC1BqN,EAAU,yCAA2C9Z,KAAKuM,WAAa,IAAMvM,KAAKyM,YAAc,iDAAwDzM,KAAKuM,WAAa,aAAevM,KAAKyM,YAAc,kBAC5MzM,KAAK6E,OAAOsV,mBAAmB,YAAaL,GAC5C9Z,KAAKoa,MAAQhiB,EAAE4H,KAAK6E,QAAQwV,WAAW,GACvCra,KAAKsa,UAAW,EAChBta,KAAKua,UAAY,IAEnB1B,WAAY,SAAoBpE,EAASpD,EAAM/W,EAAWC,EAAW0B,GACnE,IACIue,EACAvB,EACAC,EACAuB,EAEA3I,EACArP,EAPAiY,EAAQ,GASZ,IAAKjY,EAAI,EAAGqP,EAAOT,EAAKjR,OAAQqC,EAAIqP,EAAMrP,IACxCiY,EAAMjY,GAAU4O,EAAK5O,GAAG,GAAK,IAAM4O,EAAK5O,GAAG,GAS7C,OANA+X,EAAUE,EAAMnX,OAAO,EAAG,GAC1BtH,EAAYA,IAAc/D,EAAY,EAAI+D,EAC1Cgd,EAAS3e,IAAcpC,EAAY,oBAAsB,kBAAoB+D,EAAY,oBAAsB3B,EAAY,KAC3H4e,EAAO3e,IAAcrC,EAAY,kBAAoB,eAAiBqC,EAAY,mBAClFkgB,EAASC,EAAM,KAAOA,EAAMA,EAAMta,OAAS,GAAK,KAAO,GACjD,yCAA2CJ,KAAKuM,WAAa,IAAMvM,KAAKyM,YAAc,kBAAyBgI,EAAU,KAAOwE,EAASC,EAAO,qDAAuDlZ,KAAKyM,YAAc,YAAczM,KAAKuM,WAAa,wCAA+CiO,EAAU,MAAQE,EAAMlX,KAAK,MAAQ,IAAMiX,EAAS,kBAGrWnB,YAAa,SAAqB7E,EAAStK,EAAGC,EAAGwL,EAAQtb,EAAWC,EAAW0B,GAO7E,MADM,wBAA+BwY,EAAU,MAFtCna,IAAcpC,EAAY,oBAAsB,kBAAoB+D,EAAY,oBAAsB3B,EAAY,OACpHC,IAAcrC,EAAY,kBAAoB,eAAiBqC,EAAY,oBACZ,kCAHtE6P,GAAKwL,GAGwG,aAJ7GzL,GAAKyL,GAI0H,aAAwB,EAATA,EAAa,cAAyB,EAATA,EAAa,iBAG1L4D,cAAe,SAAuB/E,EAAStK,EAAGC,EAAGwL,EAAQiC,EAAYC,EAAUxd,EAAWC,GAC5F,IAAImgB,EAAOC,EAAQC,EAAQC,EAAMC,EAAM7B,EAAQC,EAE/C,GAAIrB,IAAeC,EACjB,MAAO,GAcT,GAXIA,EAAWD,GAAe,EAAI5f,EAAKke,KACrC0B,EAAa,EAEbC,EAAW,EAAI7f,EAAKke,IAGtBwE,EAASxQ,EAAIlS,EAAKqW,MAAMrW,EAAK8iB,IAAIlD,GAAcjC,GAC/CgF,EAASxQ,EAAInS,EAAKqW,MAAMrW,EAAK+iB,IAAInD,GAAcjC,GAC/CiF,EAAO1Q,EAAIlS,EAAKqW,MAAMrW,EAAK8iB,IAAIjD,GAAYlC,GAC3CkF,EAAO1Q,EAAInS,EAAKqW,MAAMrW,EAAK+iB,IAAIlD,GAAYlC,GAEvC+E,IAAWE,GAAQD,IAAWE,EAAM,CACtC,GAAIhD,EAAWD,EAAa5f,EAAKke,GAE/B,MAAO,GAITwE,EAASE,EAAO1Q,EAAIyL,EACpBgF,EAASE,EAAO1Q,EAGlB,OAAIuQ,IAAWE,GAAQD,IAAWE,GAAQhD,EAAWD,EAAa5f,EAAKke,GAC9D,IAGTuE,EAAQ,CAACvQ,EAAIyL,EAAQxL,EAAIwL,EAAQzL,EAAIyL,EAAQxL,EAAIwL,EAAQ+E,EAAQC,EAAQC,EAAMC,GAC/E7B,EAAS3e,IAAcpC,EAAY,oBAAsB,oCAAsCoC,EAAY,KAC3G4e,EAAO3e,IAAcrC,EAAY,kBAAoB,eAAiBqC,EAAY,mBAC5E,yCAA2CyF,KAAKuM,WAAa,IAAMvM,KAAKyM,YAAc,kBAAyBgI,EAAU,KAAOwE,EAASC,EAAO,qDAAuDlZ,KAAKyM,YAAc,YAAczM,KAAKuM,WAAa,wCAA+CpC,EAAI,IAAMC,EAAI,OAASsQ,EAAMlX,KAAK,MAAQ,sBAG3VkW,UAAW,SAAmBjF,EAAStK,EAAGC,EAAG3P,EAAOC,EAAQJ,EAAWC,GACrE,OAAOyF,KAAK6Y,WAAWpE,EAAS,CAAC,CAACtK,EAAGC,GAAI,CAACD,EAAGC,EAAI1P,GAAS,CAACyP,EAAI1P,EAAO2P,EAAI1P,GAAS,CAACyP,EAAI1P,EAAO2P,GAAI,CAACD,EAAGC,IAAK9P,EAAWC,IAEzHgL,MAAO,WACLvF,KAAKoa,MAAMvP,UAAY,IAEzByM,YAAa,SAAqBzC,GAChC,IAAIoG,EAAMjb,KAAK,QAAU6U,EAAMxa,MAAM6F,MAAMF,KAAM6U,EAAM9U,MASvD,OAPIC,KAAKsa,SACPta,KAAKoa,MAAMD,mBAAmB,YAAac,GAE3Cjb,KAAKua,WAAaU,EAGpBjb,KAAKwP,YAAcqF,EAAMzL,GAClByL,EAAMzL,IAEf0F,iBAAkB,SAA0B2F,EAASI,GACnD,IAAIqG,EAAW9iB,EAAE,YAAcqc,GAC3BwG,EAAMjb,KAAK,QAAU6U,EAAMxa,MAAM6F,MAAMF,KAAM6U,EAAM9U,MACvDmb,EAAS,GAAGC,UAAYF,GAE1BrM,kBAAmB,SAA2BH,EAAUM,GAEtD,IAGItM,EAHAyY,EAAW9iB,EAAE,YAAcqW,EAAS,IACpC9M,EAAU,GACVqR,EAAOjE,EAAO3O,OAGlB,IAAKqC,EAAI,EAAGA,EAAIuQ,EAAMvQ,IACpBd,GAAW3B,KAAK,QAAU+O,EAAOtM,GAAGpI,MAAM6F,MAAMF,KAAM+O,EAAOtM,GAAG1C,MAKlE,IAFAmb,EAAS,GAAGC,UAAYxZ,EAEnBc,EAAI,EAAGA,EAAIgM,EAASrO,OAAQqC,IAC/BrK,EAAE,YAAcqW,EAAShM,IAAI7J,UAGjCkX,iBAAkB,SAA0B2E,EAASI,GACnD,IAAIqG,EAAW9iB,EAAE,YAAcqc,GAC3BwG,EAAMjb,KAAK,QAAU6U,EAAMxa,MAAM6F,MAAMF,KAAM6U,EAAM9U,MACvDmb,EAAS,GAAGf,mBAAmB,WAAYc,IAE7C/K,cAAe,SAAuBuE,GACpC,IAAIyG,EAAW9iB,EAAE,YAAcqc,GAC/BzU,KAAKoa,MAAMgB,YAAYF,EAAS,KAElCxG,WAAY,SAAoB5P,EAAIqF,EAAGC,GAErC,OADctF,EAAGsE,GAAG0C,OAAO,IAG7B7K,OAAQ,WACDjB,KAAKsa,WAERta,KAAKoa,MAAMvP,UAAY7K,KAAKua,UAC5Bva,KAAKsa,UAAW,OA/jGA,mBAAXe,QAAyBA,OAAOC,IACzCD,OAAO,CAAC,UAAWljB,GACVojB,SAAWA,OAAOjX,GAAGM,WAC9BzM,EAAQojB,QANd,CAukGGvjB,SAAUC","file":"toolkit/sparkline/dist/jquery.sparkline.js","sourcesContent":["function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/**\n*\n* jquery.sparkline.js\n*\n* v2.1.2\n* (c) Splunk, Inc\n* Contact: Gareth Watts (gareth@splunk.com)\n* http://omnipotent.net/jquery.sparkline/\n*\n* Generates inline sparkline charts from data supplied either to the method\n* or inline in HTML\n*\n* Compatible with Internet Explorer 6.0+ and modern browsers equipped with the canvas tag\n* (Firefox 2.0+, Safari, Opera, etc)\n*\n* License: New BSD License\n*\n* Copyright (c) 2012, Splunk Inc.\n* All rights reserved.\n*\n* Redistribution and use in source and binary forms, with or without modification,\n* are permitted provided that the following conditions are met:\n*\n*     * Redistributions of source code must retain the above copyright notice,\n*       this list of conditions and the following disclaimer.\n*     * Redistributions in binary form must reproduce the above copyright notice,\n*       this list of conditions and the following disclaimer in the documentation\n*       and/or other materials provided with the distribution.\n*     * Neither the name of Splunk Inc nor the names of its contributors may\n*       be used to endorse or promote products derived from this software without\n*       specific prior written permission.\n*\n* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY\n* EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES\n* OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT\n* SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n* SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT\n* OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)\n* HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n* OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n* SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*\n*\n* Usage:\n*  $(selector).sparkline(values, options)\n*\n* If values is undefined or set to 'html' then the data values are read from the specified tag:\n*   <p>Sparkline: <span class=\"sparkline\">1,4,6,6,8,5,3,5</span></p>\n*   $('.sparkline').sparkline();\n* There must be no spaces in the enclosed data set\n*\n* Otherwise values must be an array of numbers or null values\n*    <p>Sparkline: <span id=\"sparkline1\">This text replaced if the browser is compatible</span></p>\n*    $('#sparkline1').sparkline([1,4,6,6,8,5,3,5])\n*    $('#sparkline2').sparkline([1,4,6,null,null,5,3,5])\n*\n* Values can also be specified in an HTML comment, or as a values attribute:\n*    <p>Sparkline: <span class=\"sparkline\"><!--1,4,6,6,8,5,3,5 --></span></p>\n*    <p>Sparkline: <span class=\"sparkline\" values=\"1,4,6,6,8,5,3,5\"></span></p>\n*    $('.sparkline').sparkline();\n*\n* For line charts, x values can also be specified:\n*   <p>Sparkline: <span class=\"sparkline\">1:1,2.7:4,3.4:6,5:6,6:8,8.7:5,9:3,10:5</span></p>\n*    $('#sparkline1').sparkline([ [1,1], [2.7,4], [3.4,6], [5,6], [6,8], [8.7,5], [9,3], [10,5] ])\n*\n* By default, options should be passed in as teh second argument to the sparkline function:\n*   $('.sparkline').sparkline([1,2,3,4], {type: 'bar'})\n*\n* Options can also be set by passing them on the tag itself.  This feature is disabled by default though\n* as there's a slight performance overhead:\n*   $('.sparkline').sparkline([1,2,3,4], {enableTagOptions: true})\n*   <p>Sparkline: <span class=\"sparkline\" sparkType=\"bar\" sparkBarColor=\"red\">loading</span></p>\n* Prefix all options supplied as tag attribute with \"spark\" (configurable by setting tagOptionPrefix)\n*\n* Supported options:\n*   lineColor - Color of the line used for the chart\n*   fillColor - Color used to fill in the chart - Set to '' or false for a transparent chart\n*   width - Width of the chart - Defaults to 3 times the number of values in pixels\n*   height - Height of the chart - Defaults to the height of the containing element\n*   chartRangeMin - Specify the minimum value to use for the Y range of the chart - Defaults to the minimum value supplied\n*   chartRangeMax - Specify the maximum value to use for the Y range of the chart - Defaults to the maximum value supplied\n*   chartRangeClip - Clip out of range values to the max/min specified by chartRangeMin and chartRangeMax\n*   chartRangeMinX - Specify the minimum value to use for the X range of the chart - Defaults to the minimum value supplied\n*   chartRangeMaxX - Specify the maximum value to use for the X range of the chart - Defaults to the maximum value supplied\n*   composite - If true then don't erase any existing chart attached to the tag, but draw\n*           another chart over the top - Note that width and height are ignored if an\n*           existing chart is detected.\n*   tagValuesAttribute - Name of tag attribute to check for data values - Defaults to 'values'\n*   enableTagOptions - Whether to check tags for sparkline options\n*   tagOptionPrefix - Prefix used for options supplied as tag attributes - Defaults to 'spark'\n*   disableHiddenCheck - If set to true, then the plugin will assume that charts will never be drawn into a\n*           hidden dom element, avoding a browser reflow\n*   disableInteraction - If set to true then all mouseover/click interaction behaviour will be disabled,\n*       making the plugin perform much like it did in 1.x\n*   disableTooltips - If set to true then tooltips will be disabled - Defaults to false (tooltips enabled)\n*   disableHighlight - If set to true then highlighting of selected chart elements on mouseover will be disabled\n*       defaults to false (highlights enabled)\n*   highlightLighten - Factor to lighten/darken highlighted chart values by - Defaults to 1.4 for a 40% increase\n*   tooltipContainer - Specify which DOM element the tooltip should be rendered into - defaults to document.body\n*   tooltipClassname - Optional CSS classname to apply to tooltips - If not specified then a default style will be applied\n*   tooltipOffsetX - How many pixels away from the mouse pointer to render the tooltip on the X axis\n*   tooltipOffsetY - How many pixels away from the mouse pointer to render the tooltip on the r axis\n*   tooltipFormatter  - Optional callback that allows you to override the HTML displayed in the tooltip\n*       callback is given arguments of (sparkline, options, fields)\n*   tooltipChartTitle - If specified then the tooltip uses the string specified by this setting as a title\n*   tooltipFormat - A format string or SPFormat object  (or an array thereof for multiple entries)\n*       to control the format of the tooltip\n*   tooltipPrefix - A string to prepend to each field displayed in a tooltip\n*   tooltipSuffix - A string to append to each field displayed in a tooltip\n*   tooltipSkipNull - If true then null values will not have a tooltip displayed (defaults to true)\n*   tooltipValueLookups - An object or range map to map field values to tooltip strings\n*       (eg. to map -1 to \"Lost\", 0 to \"Draw\", and 1 to \"Win\")\n*   numberFormatter - Optional callback for formatting numbers in tooltips\n*   numberDigitGroupSep - Character to use for group separator in numbers \"1,234\" - Defaults to \",\"\n*   numberDecimalMark - Character to use for the decimal point when formatting numbers - Defaults to \".\"\n*   numberDigitGroupCount - Number of digits between group separator - Defaults to 3\n*\n* There are 7 types of sparkline, selected by supplying a \"type\" option of 'line' (default),\n* 'bar', 'tristate', 'bullet', 'discrete', 'pie' or 'box'\n*    line - Line chart.  Options:\n*       spotColor - Set to '' to not end each line in a circular spot\n*       minSpotColor - If set, color of spot at minimum value\n*       maxSpotColor - If set, color of spot at maximum value\n*       spotRadius - Radius in pixels\n*       lineWidth - Width of line in pixels\n*       normalRangeMin\n*       normalRangeMax - If set draws a filled horizontal bar between these two values marking the \"normal\"\n*                      or expected range of values\n*       normalRangeColor - Color to use for the above bar\n*       drawNormalOnTop - Draw the normal range above the chart fill color if true\n*       defaultPixelsPerValue - Defaults to 3 pixels of width for each value in the chart\n*       highlightSpotColor - The color to use for drawing a highlight spot on mouseover - Set to null to disable\n*       highlightLineColor - The color to use for drawing a highlight line on mouseover - Set to null to disable\n*       valueSpots - Specify which points to draw spots on, and in which color.  Accepts a range map\n*\n*   bar - Bar chart.  Options:\n*       barColor - Color of bars for postive values\n*       negBarColor - Color of bars for negative values\n*       zeroColor - Color of bars with zero values\n*       nullColor - Color of bars with null values - Defaults to omitting the bar entirely\n*       barWidth - Width of bars in pixels\n*       colorMap - Optional mappnig of values to colors to override the *BarColor values above\n*                  can be an Array of values to control the color of individual bars or a range map\n*                  to specify colors for individual ranges of values\n*       barSpacing - Gap between bars in pixels\n*       zeroAxis - Centers the y-axis around zero if true\n*\n*   tristate - Charts values of win (>0), lose (<0) or draw (=0)\n*       posBarColor - Color of win values\n*       negBarColor - Color of lose values\n*       zeroBarColor - Color of draw values\n*       barWidth - Width of bars in pixels\n*       barSpacing - Gap between bars in pixels\n*       colorMap - Optional mappnig of values to colors to override the *BarColor values above\n*                  can be an Array of values to control the color of individual bars or a range map\n*                  to specify colors for individual ranges of values\n*\n*   discrete - Options:\n*       lineHeight - Height of each line in pixels - Defaults to 30% of the graph height\n*       thesholdValue - Values less than this value will be drawn using thresholdColor instead of lineColor\n*       thresholdColor\n*\n*   bullet - Values for bullet graphs msut be in the order: target, performance, range1, range2, range3, ...\n*       options:\n*       targetColor - The color of the vertical target marker\n*       targetWidth - The width of the target marker in pixels\n*       performanceColor - The color of the performance measure horizontal bar\n*       rangeColors - Colors to use for each qualitative range background color\n*\n*   pie - Pie chart. Options:\n*       sliceColors - An array of colors to use for pie slices\n*       offset - Angle in degrees to offset the first slice - Try -90 or +90\n*       borderWidth - Width of border to draw around the pie chart, in pixels - Defaults to 0 (no border)\n*       borderColor - Color to use for the pie chart border - Defaults to #000\n*\n*   box - Box plot. Options:\n*       raw - Set to true to supply pre-computed plot points as values\n*             values should be: low_outlier, low_whisker, q1, median, q3, high_whisker, high_outlier\n*             When set to false you can supply any number of values and the box plot will\n*             be computed for you.  Default is false.\n*       showOutliers - Set to true (default) to display outliers as circles\n*       outlierIQR - Interquartile range used to determine outliers.  Default 1.5\n*       boxLineColor - Outline color of the box\n*       boxFillColor - Fill color for the box\n*       whiskerColor - Line color used for whiskers\n*       outlierLineColor - Outline color of outlier circles\n*       outlierFillColor - Fill color of the outlier circles\n*       spotRadius - Radius of outlier circles\n*       medianColor - Line color of the median line\n*       target - Draw a target cross hair at the supplied value (default undefined)\n*\n*\n*\n*   Examples:\n*   $('#sparkline1').sparkline(myvalues, { lineColor: '#f00', fillColor: false });\n*   $('.barsparks').sparkline('html', { type:'bar', height:'40px', barWidth:5 });\n*   $('#tristate').sparkline([1,1,-1,1,0,0,-1], { type:'tristate' }):\n*   $('#discrete').sparkline([1,3,4,5,5,3,4,5], { type:'discrete' });\n*   $('#bullet').sparkline([10,12,12,9,7], { type:'bullet' });\n*   $('#pie').sparkline([1,1,2], { type:'pie' });\n*/\n\n/*jslint regexp: true, browser: true, jquery: true, white: true, nomen: false, plusplus: false, maxerr: 500, indent: 4 */\n(function (document, Math, undefined) {\n  // performance/minified-size optimization\n  (function (factory) {\n    if (typeof define === 'function' && define.amd) {\n      define(['jquery'], factory);\n    } else if (jQuery && !jQuery.fn.sparkline) {\n      factory(jQuery);\n    }\n  })(function ($) {\n    'use strict';\n\n    var UNSET_OPTION = {},\n        getDefaults,\n        createClass,\n        SPFormat,\n        clipval,\n        quartile,\n        normalizeValue,\n        normalizeValues,\n        remove,\n        isNumber,\n        all,\n        sum,\n        addCSS,\n        ensureArray,\n        formatNumber,\n        RangeMap,\n        MouseHandler,\n        Tooltip,\n        barHighlightMixin,\n        line,\n        bar,\n        tristate,\n        discrete,\n        bullet,\n        pie,\n        box,\n        defaultStyles,\n        initStyles,\n        VShape,\n        VCanvas_base,\n        VCanvas_canvas,\n        VCanvas_vml,\n        pending,\n        shapeCount = 0;\n    /**\n     * Default configuration settings\n     */\n\n    getDefaults = function getDefaults() {\n      return {\n        // Settings common to most/all chart types\n        common: {\n          type: 'line',\n          lineColor: '#00f',\n          fillColor: '#cdf',\n          defaultPixelsPerValue: 3,\n          width: 'auto',\n          height: 'auto',\n          composite: false,\n          tagValuesAttribute: 'values',\n          tagOptionsPrefix: 'spark',\n          enableTagOptions: false,\n          enableHighlight: true,\n          highlightLighten: 1.4,\n          tooltipSkipNull: true,\n          tooltipPrefix: '',\n          tooltipSuffix: '',\n          disableHiddenCheck: false,\n          numberFormatter: false,\n          numberDigitGroupCount: 3,\n          numberDigitGroupSep: ',',\n          numberDecimalMark: '.',\n          disableTooltips: false,\n          disableInteraction: false\n        },\n        // Defaults for line charts\n        line: {\n          spotColor: '#f80',\n          highlightSpotColor: '#5f5',\n          highlightLineColor: '#f22',\n          spotRadius: 1.5,\n          minSpotColor: '#f80',\n          maxSpotColor: '#f80',\n          lineWidth: 1,\n          normalRangeMin: undefined,\n          normalRangeMax: undefined,\n          normalRangeColor: '#ccc',\n          drawNormalOnTop: false,\n          chartRangeMin: undefined,\n          chartRangeMax: undefined,\n          chartRangeMinX: undefined,\n          chartRangeMaxX: undefined,\n          tooltipFormat: new SPFormat('<span style=\"color: {{color}}\">&#9679;</span> {{prefix}}{{y}}{{suffix}}')\n        },\n        // Defaults for bar charts\n        bar: {\n          barColor: '#3366cc',\n          negBarColor: '#f44',\n          stackedBarColor: ['#3366cc', '#dc3912', '#ff9900', '#109618', '#66aa00', '#dd4477', '#0099c6', '#990099'],\n          zeroColor: undefined,\n          nullColor: undefined,\n          zeroAxis: true,\n          barWidth: 4,\n          barSpacing: 1,\n          chartRangeMax: undefined,\n          chartRangeMin: undefined,\n          chartRangeClip: false,\n          colorMap: undefined,\n          tooltipFormat: new SPFormat('<span style=\"color: {{color}}\">&#9679;</span> {{prefix}}{{value}}{{suffix}}')\n        },\n        // Defaults for tristate charts\n        tristate: {\n          barWidth: 4,\n          barSpacing: 1,\n          posBarColor: '#6f6',\n          negBarColor: '#f44',\n          zeroBarColor: '#999',\n          colorMap: {},\n          tooltipFormat: new SPFormat('<span style=\"color: {{color}}\">&#9679;</span> {{value:map}}'),\n          tooltipValueLookups: {\n            map: {\n              '-1': 'Loss',\n              '0': 'Draw',\n              '1': 'Win'\n            }\n          }\n        },\n        // Defaults for discrete charts\n        discrete: {\n          lineHeight: 'auto',\n          thresholdColor: undefined,\n          thresholdValue: 0,\n          chartRangeMax: undefined,\n          chartRangeMin: undefined,\n          chartRangeClip: false,\n          tooltipFormat: new SPFormat('{{prefix}}{{value}}{{suffix}}')\n        },\n        // Defaults for bullet charts\n        bullet: {\n          targetColor: '#f33',\n          targetWidth: 3,\n          // width of the target bar in pixels\n          performanceColor: '#33f',\n          rangeColors: ['#d3dafe', '#a8b6ff', '#7f94ff'],\n          base: undefined,\n          // set this to a number to change the base start number\n          tooltipFormat: new SPFormat('{{fieldkey:fields}} - {{value}}'),\n          tooltipValueLookups: {\n            fields: {\n              r: 'Range',\n              p: 'Performance',\n              t: 'Target'\n            }\n          }\n        },\n        // Defaults for pie charts\n        pie: {\n          offset: 0,\n          sliceColors: ['#3366cc', '#dc3912', '#ff9900', '#109618', '#66aa00', '#dd4477', '#0099c6', '#990099'],\n          borderWidth: 0,\n          borderColor: '#000',\n          tooltipFormat: new SPFormat('<span style=\"color: {{color}}\">&#9679;</span> {{value}} ({{percent.1}}%)')\n        },\n        // Defaults for box plots\n        box: {\n          raw: false,\n          boxLineColor: '#000',\n          boxFillColor: '#cdf',\n          whiskerColor: '#000',\n          outlierLineColor: '#333',\n          outlierFillColor: '#fff',\n          medianColor: '#f00',\n          showOutliers: true,\n          outlierIQR: 1.5,\n          spotRadius: 1.5,\n          target: undefined,\n          targetColor: '#4a2',\n          chartRangeMax: undefined,\n          chartRangeMin: undefined,\n          tooltipFormat: new SPFormat('{{field:fields}}: {{value}}'),\n          tooltipFormatFieldlistKey: 'field',\n          tooltipValueLookups: {\n            fields: {\n              lq: 'Lower Quartile',\n              med: 'Median',\n              uq: 'Upper Quartile',\n              lo: 'Left Outlier',\n              ro: 'Right Outlier',\n              lw: 'Left Whisker',\n              rw: 'Right Whisker'\n            }\n          }\n        }\n      };\n    }; // You can have tooltips use a css class other than jqstooltip by specifying tooltipClassname\n\n\n    defaultStyles = '.jqstooltip { ' + 'position: absolute;' + 'left: 0px;' + 'top: 0px;' + 'visibility: hidden;' + 'background: rgb(0, 0, 0) transparent;' + 'background-color: rgba(0,0,0,0.6);' + 'filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);' + '-ms-filter: \"progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)\";' + 'color: white;' + 'font: 10px arial, san serif;' + 'text-align: left;' + 'white-space: nowrap;' + 'padding: 5px;' + 'border: 1px solid white;' + 'z-index: 10000;' + '}' + '.jqsfield { ' + 'color: white;' + 'font: 10px arial, san serif;' + 'text-align: left;' + '}';\n    /**\n     * Utilities\n     */\n\n    createClass = function createClass()\n    /* [baseclass, [mixin, ...]], definition */\n    {\n      var Class, args;\n\n      Class = function Class() {\n        this.init.apply(this, arguments);\n      };\n\n      if (arguments.length > 1) {\n        if (arguments[0]) {\n          Class.prototype = $.extend(new arguments[0](), arguments[arguments.length - 1]);\n          Class._super = arguments[0].prototype;\n        } else {\n          Class.prototype = arguments[arguments.length - 1];\n        }\n\n        if (arguments.length > 2) {\n          args = Array.prototype.slice.call(arguments, 1, -1);\n          args.unshift(Class.prototype);\n          $.extend.apply($, args);\n        }\n      } else {\n        Class.prototype = arguments[0];\n      }\n\n      Class.prototype.cls = Class;\n      return Class;\n    };\n    /**\n     * Wraps a format string for tooltips\n     * {{x}}\n     * {{x.2}\n     * {{x:months}}\n     */\n\n\n    $.SPFormatClass = SPFormat = createClass({\n      fre: /\\{\\{([\\w.]+?)(:(.+?))?\\}\\}/g,\n      precre: /(\\w+)\\.(\\d+)/,\n      init: function init(format, fclass) {\n        this.format = format;\n        this.fclass = fclass;\n      },\n      render: function render(fieldset, lookups, options) {\n        var self = this,\n            fields = fieldset,\n            match,\n            token,\n            lookupkey,\n            fieldvalue,\n            prec;\n        return this.format.replace(this.fre, function () {\n          var lookup;\n          token = arguments[1];\n          lookupkey = arguments[3];\n          match = self.precre.exec(token);\n\n          if (match) {\n            prec = match[2];\n            token = match[1];\n          } else {\n            prec = false;\n          }\n\n          fieldvalue = fields[token];\n\n          if (fieldvalue === undefined) {\n            return '';\n          }\n\n          if (lookupkey && lookups && lookups[lookupkey]) {\n            lookup = lookups[lookupkey];\n\n            if (lookup.get) {\n              // RangeMap\n              return lookups[lookupkey].get(fieldvalue) || fieldvalue;\n            } else {\n              return lookups[lookupkey][fieldvalue] || fieldvalue;\n            }\n          }\n\n          if (isNumber(fieldvalue)) {\n            if (options.get('numberFormatter')) {\n              fieldvalue = options.get('numberFormatter')(fieldvalue);\n            } else {\n              fieldvalue = formatNumber(fieldvalue, prec, options.get('numberDigitGroupCount'), options.get('numberDigitGroupSep'), options.get('numberDecimalMark'));\n            }\n          }\n\n          return fieldvalue;\n        });\n      }\n    }); // convience method to avoid needing the new operator\n\n    $.spformat = function (format, fclass) {\n      return new SPFormat(format, fclass);\n    };\n\n    clipval = function clipval(val, min, max) {\n      if (val < min) {\n        return min;\n      }\n\n      if (val > max) {\n        return max;\n      }\n\n      return val;\n    };\n\n    quartile = function quartile(values, q) {\n      var vl;\n\n      if (q === 2) {\n        vl = Math.floor(values.length / 2);\n        return values.length % 2 ? values[vl] : (values[vl - 1] + values[vl]) / 2;\n      } else {\n        if (values.length % 2) {\n          // odd\n          vl = (values.length * q + q) / 4;\n          return vl % 1 ? (values[Math.floor(vl)] + values[Math.floor(vl) - 1]) / 2 : values[vl - 1];\n        } else {\n          //even\n          vl = (values.length * q + 2) / 4;\n          return vl % 1 ? (values[Math.floor(vl)] + values[Math.floor(vl) - 1]) / 2 : values[vl - 1];\n        }\n      }\n    };\n\n    normalizeValue = function normalizeValue(val) {\n      var nf;\n\n      switch (val) {\n        case 'undefined':\n          val = undefined;\n          break;\n\n        case 'null':\n          val = null;\n          break;\n\n        case 'true':\n          val = true;\n          break;\n\n        case 'false':\n          val = false;\n          break;\n\n        default:\n          nf = parseFloat(val);\n\n          if (val == nf) {\n            val = nf;\n          }\n\n      }\n\n      return val;\n    };\n\n    normalizeValues = function normalizeValues(vals) {\n      var i,\n          result = [];\n\n      for (i = vals.length; i--;) {\n        result[i] = normalizeValue(vals[i]);\n      }\n\n      return result;\n    };\n\n    remove = function remove(vals, filter) {\n      var i,\n          vl,\n          result = [];\n\n      for (i = 0, vl = vals.length; i < vl; i++) {\n        if (vals[i] !== filter) {\n          result.push(vals[i]);\n        }\n      }\n\n      return result;\n    };\n\n    isNumber = function isNumber(num) {\n      return !isNaN(parseFloat(num)) && isFinite(num);\n    };\n\n    formatNumber = function formatNumber(num, prec, groupsize, groupsep, decsep) {\n      var p, i;\n      num = (prec === false ? parseFloat(num).toString() : num.toFixed(prec)).split('');\n      p = (p = $.inArray('.', num)) < 0 ? num.length : p;\n\n      if (p < num.length) {\n        num[p] = decsep;\n      }\n\n      for (i = p - groupsize; i > 0; i -= groupsize) {\n        num.splice(i, 0, groupsep);\n      }\n\n      return num.join('');\n    }; // determine if all values of an array match a value\n    // returns true if the array is empty\n\n\n    all = function all(val, arr, ignoreNull) {\n      var i;\n\n      for (i = arr.length; i--;) {\n        if (ignoreNull && arr[i] === null) continue;\n\n        if (arr[i] !== val) {\n          return false;\n        }\n      }\n\n      return true;\n    }; // sums the numeric values in an array, ignoring other values\n\n\n    sum = function sum(vals) {\n      var total = 0,\n          i;\n\n      for (i = vals.length; i--;) {\n        total += typeof vals[i] === 'number' ? vals[i] : 0;\n      }\n\n      return total;\n    };\n\n    ensureArray = function ensureArray(val) {\n      return $.isArray(val) ? val : [val];\n    }; // http://paulirish.com/2008/bookmarklet-inject-new-css-rules/\n\n\n    addCSS = function addCSS(css) {\n      var tag; //if ('\\v' == 'v') /* ie only */ {\n\n      if (document.createStyleSheet) {\n        document.createStyleSheet().cssText = css;\n      } else {\n        tag = document.createElement('style');\n        tag.type = 'text/css';\n        document.getElementsByTagName('head')[0].appendChild(tag);\n        tag[typeof document.body.style.WebkitAppearance == 'string' ?\n        /* webkit only */\n        'innerText' : 'innerHTML'] = css;\n      }\n    }; // Provide a cross-browser interface to a few simple drawing primitives\n\n\n    $.fn.simpledraw = function (width, height, useExisting, interact) {\n      var target, mhandler;\n\n      if (useExisting && (target = this.data('_jqs_vcanvas'))) {\n        return target;\n      }\n\n      if ($.fn.sparkline.canvas === false) {\n        // We've already determined that neither Canvas nor VML are available\n        return false;\n      } else if ($.fn.sparkline.canvas === undefined) {\n        // No function defined yet -- need to see if we support Canvas or VML\n        var el = document.createElement('canvas');\n\n        if (!!(el.getContext && el.getContext('2d'))) {\n          // Canvas is available\n          $.fn.sparkline.canvas = function (width, height, target, interact) {\n            return new VCanvas_canvas(width, height, target, interact);\n          };\n        } else if (document.namespaces && !document.namespaces.v) {\n          // VML is available\n          document.namespaces.add('v', 'urn:schemas-microsoft-com:vml', '#default#VML');\n\n          $.fn.sparkline.canvas = function (width, height, target, interact) {\n            return new VCanvas_vml(width, height, target);\n          };\n        } else {\n          // Neither Canvas nor VML are available\n          $.fn.sparkline.canvas = false;\n          return false;\n        }\n      }\n\n      if (width === undefined) {\n        width = $(this).innerWidth();\n      }\n\n      if (height === undefined) {\n        height = $(this).innerHeight();\n      }\n\n      target = $.fn.sparkline.canvas(width, height, this, interact);\n      mhandler = $(this).data('_jqs_mhandler');\n\n      if (mhandler) {\n        mhandler.registerCanvas(target);\n      }\n\n      return target;\n    };\n\n    $.fn.cleardraw = function () {\n      var target = this.data('_jqs_vcanvas');\n\n      if (target) {\n        target.reset();\n      }\n    };\n\n    $.RangeMapClass = RangeMap = createClass({\n      init: function init(map) {\n        var key,\n            range,\n            rangelist = [];\n\n        for (key in map) {\n          if (map.hasOwnProperty(key) && typeof key === 'string' && key.indexOf(':') > -1) {\n            range = key.split(':');\n            range[0] = range[0].length === 0 ? -Infinity : parseFloat(range[0]);\n            range[1] = range[1].length === 0 ? Infinity : parseFloat(range[1]);\n            range[2] = map[key];\n            rangelist.push(range);\n          }\n        }\n\n        this.map = map;\n        this.rangelist = rangelist || false;\n      },\n      get: function get(value) {\n        var rangelist = this.rangelist,\n            i,\n            range,\n            result;\n\n        if ((result = this.map[value]) !== undefined) {\n          return result;\n        }\n\n        if (rangelist) {\n          for (i = rangelist.length; i--;) {\n            range = rangelist[i];\n\n            if (range[0] <= value && range[1] >= value) {\n              return range[2];\n            }\n          }\n        }\n\n        return undefined;\n      }\n    }); // Convenience function\n\n    $.range_map = function (map) {\n      return new RangeMap(map);\n    };\n\n    MouseHandler = createClass({\n      init: function init(el, options) {\n        var $el = $(el);\n        this.$el = $el;\n        this.options = options;\n        this.currentPageX = 0;\n        this.currentPageY = 0;\n        this.el = el;\n        this.splist = [];\n        this.tooltip = null;\n        this.over = false;\n        this.displayTooltips = !options.get('disableTooltips');\n        this.highlightEnabled = !options.get('disableHighlight');\n      },\n      registerSparkline: function registerSparkline(sp) {\n        this.splist.push(sp);\n\n        if (this.over) {\n          this.updateDisplay();\n        }\n      },\n      registerCanvas: function registerCanvas(canvas) {\n        var $canvas = $(canvas.canvas);\n        this.canvas = canvas;\n        this.$canvas = $canvas;\n        $canvas.mouseenter($.proxy(this.mouseenter, this));\n        $canvas.mouseleave($.proxy(this.mouseleave, this));\n        $canvas.click($.proxy(this.mouseclick, this));\n      },\n      reset: function reset(removeTooltip) {\n        this.splist = [];\n\n        if (this.tooltip && removeTooltip) {\n          this.tooltip.remove();\n          this.tooltip = undefined;\n        }\n      },\n      mouseclick: function mouseclick(e) {\n        var clickEvent = $.Event('sparklineClick');\n        clickEvent.originalEvent = e;\n        clickEvent.sparklines = this.splist;\n        this.$el.trigger(clickEvent);\n      },\n      mouseenter: function mouseenter(e) {\n        $(document.body).unbind('mousemove.jqs');\n        $(document.body).bind('mousemove.jqs', $.proxy(this.mousemove, this));\n        this.over = true;\n        this.currentPageX = e.pageX;\n        this.currentPageY = e.pageY;\n        this.currentEl = e.target;\n\n        if (!this.tooltip && this.displayTooltips) {\n          this.tooltip = new Tooltip(this.options);\n          this.tooltip.updatePosition(e.pageX, e.pageY);\n        }\n\n        this.updateDisplay();\n      },\n      mouseleave: function mouseleave() {\n        $(document.body).unbind('mousemove.jqs');\n        var splist = this.splist,\n            spcount = splist.length,\n            needsRefresh = false,\n            sp,\n            i;\n        this.over = false;\n        this.currentEl = null;\n\n        if (this.tooltip) {\n          this.tooltip.remove();\n          this.tooltip = null;\n        }\n\n        for (i = 0; i < spcount; i++) {\n          sp = splist[i];\n\n          if (sp.clearRegionHighlight()) {\n            needsRefresh = true;\n          }\n        }\n\n        if (needsRefresh) {\n          this.canvas.render();\n        }\n      },\n      mousemove: function mousemove(e) {\n        this.currentPageX = e.pageX;\n        this.currentPageY = e.pageY;\n        this.currentEl = e.target;\n\n        if (this.tooltip) {\n          this.tooltip.updatePosition(e.pageX, e.pageY);\n        }\n\n        this.updateDisplay();\n      },\n      updateDisplay: function updateDisplay() {\n        var splist = this.splist,\n            spcount = splist.length,\n            needsRefresh = false,\n            offset = this.$canvas.offset(),\n            localX = this.currentPageX - offset.left,\n            localY = this.currentPageY - offset.top,\n            tooltiphtml,\n            sp,\n            i,\n            result,\n            changeEvent;\n\n        if (!this.over) {\n          return;\n        }\n\n        for (i = 0; i < spcount; i++) {\n          sp = splist[i];\n          result = sp.setRegionHighlight(this.currentEl, localX, localY);\n\n          if (result) {\n            needsRefresh = true;\n          }\n        }\n\n        if (needsRefresh) {\n          changeEvent = $.Event('sparklineRegionChange');\n          changeEvent.sparklines = this.splist;\n          this.$el.trigger(changeEvent);\n\n          if (this.tooltip) {\n            tooltiphtml = '';\n\n            for (i = 0; i < spcount; i++) {\n              sp = splist[i];\n              tooltiphtml += sp.getCurrentRegionTooltip();\n            }\n\n            this.tooltip.setContent(tooltiphtml);\n          }\n\n          if (!this.disableHighlight) {\n            this.canvas.render();\n          }\n        }\n\n        if (result === null) {\n          this.mouseleave();\n        }\n      }\n    });\n    Tooltip = createClass({\n      sizeStyle: 'position: static !important;' + 'display: block !important;' + 'visibility: hidden !important;' + 'float: left !important;',\n      init: function init(options) {\n        var tooltipClassname = options.get('tooltipClassname', 'jqstooltip'),\n            sizetipStyle = this.sizeStyle,\n            offset;\n        this.container = options.get('tooltipContainer') || document.body;\n        this.tooltipOffsetX = options.get('tooltipOffsetX', 10);\n        this.tooltipOffsetY = options.get('tooltipOffsetY', 12); // remove any previous lingering tooltip\n\n        $('#jqssizetip').remove();\n        $('#jqstooltip').remove();\n        this.sizetip = $('<div/>', {\n          id: 'jqssizetip',\n          style: sizetipStyle,\n          'class': tooltipClassname\n        });\n        this.tooltip = $('<div/>', {\n          id: 'jqstooltip',\n          'class': tooltipClassname\n        }).appendTo(this.container); // account for the container's location\n\n        offset = this.tooltip.offset();\n        this.offsetLeft = offset.left;\n        this.offsetTop = offset.top;\n        this.hidden = true;\n        $(window).unbind('resize.jqs scroll.jqs');\n        $(window).bind('resize.jqs scroll.jqs', $.proxy(this.updateWindowDims, this));\n        this.updateWindowDims();\n      },\n      updateWindowDims: function updateWindowDims() {\n        this.scrollTop = $(window).scrollTop();\n        this.scrollLeft = $(window).scrollLeft();\n        this.scrollRight = this.scrollLeft + $(window).width();\n        this.updatePosition();\n      },\n      getSize: function getSize(content) {\n        this.sizetip.html(content).appendTo(this.container);\n        this.width = this.sizetip.width() + 1;\n        this.height = this.sizetip.height();\n        this.sizetip.remove();\n      },\n      setContent: function setContent(content) {\n        if (!content) {\n          this.tooltip.css('visibility', 'hidden');\n          this.hidden = true;\n          return;\n        }\n\n        this.getSize(content);\n        this.tooltip.html(content).css({\n          'width': this.width,\n          'height': this.height,\n          'visibility': 'visible'\n        });\n\n        if (this.hidden) {\n          this.hidden = false;\n          this.updatePosition();\n        }\n      },\n      updatePosition: function updatePosition(x, y) {\n        if (x === undefined) {\n          if (this.mousex === undefined) {\n            return;\n          }\n\n          x = this.mousex - this.offsetLeft;\n          y = this.mousey - this.offsetTop;\n        } else {\n          this.mousex = x = x - this.offsetLeft;\n          this.mousey = y = y - this.offsetTop;\n        }\n\n        if (!this.height || !this.width || this.hidden) {\n          return;\n        }\n\n        y -= this.height + this.tooltipOffsetY;\n        x += this.tooltipOffsetX;\n\n        if (y < this.scrollTop) {\n          y = this.scrollTop;\n        }\n\n        if (x < this.scrollLeft) {\n          x = this.scrollLeft;\n        } else if (x + this.width > this.scrollRight) {\n          x = this.scrollRight - this.width;\n        }\n\n        this.tooltip.css({\n          'left': x,\n          'top': y\n        });\n      },\n      remove: function remove() {\n        this.tooltip.remove();\n        this.sizetip.remove();\n        this.sizetip = this.tooltip = undefined;\n        $(window).unbind('resize.jqs scroll.jqs');\n      }\n    });\n\n    initStyles = function initStyles() {\n      addCSS(defaultStyles);\n    };\n\n    $(initStyles);\n    pending = [];\n\n    $.fn.sparkline = function (userValues, userOptions) {\n      return this.each(function () {\n        var options = new $.fn.sparkline.options(this, userOptions),\n            $this = $(this),\n            render,\n            i;\n\n        render = function render() {\n          var values, width, height, tmp, mhandler, sp, vals;\n\n          if (userValues === 'html' || userValues === undefined) {\n            vals = this.getAttribute(options.get('tagValuesAttribute'));\n\n            if (vals === undefined || vals === null) {\n              vals = $this.html();\n            }\n\n            values = vals.replace(/(^\\s*<!--)|(-->\\s*$)|\\s+/g, '').split(',');\n          } else {\n            values = userValues;\n          }\n\n          width = options.get('width') === 'auto' ? values.length * options.get('defaultPixelsPerValue') : options.get('width');\n\n          if (options.get('height') === 'auto') {\n            if (!options.get('composite') || !$.data(this, '_jqs_vcanvas')) {\n              // must be a better way to get the line height\n              tmp = document.createElement('span');\n              tmp.innerHTML = 'a';\n              $this.html(tmp);\n              height = $(tmp).innerHeight() || $(tmp).height();\n              $(tmp).remove();\n              tmp = null;\n            }\n          } else {\n            height = options.get('height');\n          }\n\n          if (!options.get('disableInteraction')) {\n            mhandler = $.data(this, '_jqs_mhandler');\n\n            if (!mhandler) {\n              mhandler = new MouseHandler(this, options);\n              $.data(this, '_jqs_mhandler', mhandler);\n            } else if (!options.get('composite')) {\n              mhandler.reset();\n            }\n          } else {\n            mhandler = false;\n          }\n\n          if (options.get('composite') && !$.data(this, '_jqs_vcanvas')) {\n            if (!$.data(this, '_jqs_errnotify')) {\n              alert('Attempted to attach a composite sparkline to an element with no existing sparkline');\n              $.data(this, '_jqs_errnotify', true);\n            }\n\n            return;\n          }\n\n          sp = new $.fn.sparkline[options.get('type')](this, values, options, width, height);\n          sp.render();\n\n          if (mhandler) {\n            mhandler.registerSparkline(sp);\n          }\n        };\n\n        if ($(this).html() && !options.get('disableHiddenCheck') && $(this).is(':hidden') || !$(this).parents('body').length) {\n          if (!options.get('composite') && $.data(this, '_jqs_pending')) {\n            // remove any existing references to the element\n            for (i = pending.length; i; i--) {\n              if (pending[i - 1][0] == this) {\n                pending.splice(i - 1, 1);\n              }\n            }\n          }\n\n          pending.push([this, render]);\n          $.data(this, '_jqs_pending', true);\n        } else {\n          render.call(this);\n        }\n      });\n    };\n\n    $.fn.sparkline.defaults = getDefaults();\n\n    $.sparkline_display_visible = function () {\n      var el, i, pl;\n      var done = [];\n\n      for (i = 0, pl = pending.length; i < pl; i++) {\n        el = pending[i][0];\n\n        if ($(el).is(':visible') && !$(el).parents().is(':hidden')) {\n          pending[i][1].call(el);\n          $.data(pending[i][0], '_jqs_pending', false);\n          done.push(i);\n        } else if (!$(el).closest('html').length && !$.data(el, '_jqs_pending')) {\n          // element has been inserted and removed from the DOM\n          // If it was not yet inserted into the dom then the .data request\n          // will return true.\n          // removing from the dom causes the data to be removed.\n          $.data(pending[i][0], '_jqs_pending', false);\n          done.push(i);\n        }\n      }\n\n      for (i = done.length; i; i--) {\n        pending.splice(done[i - 1], 1);\n      }\n    };\n    /**\n     * User option handler\n     */\n\n\n    $.fn.sparkline.options = createClass({\n      init: function init(tag, userOptions) {\n        var extendedOptions, defaults, base, tagOptionType;\n        this.userOptions = userOptions = userOptions || {};\n        this.tag = tag;\n        this.tagValCache = {};\n        defaults = $.fn.sparkline.defaults;\n        base = defaults.common;\n        this.tagOptionsPrefix = userOptions.enableTagOptions && (userOptions.tagOptionsPrefix || base.tagOptionsPrefix);\n        tagOptionType = this.getTagSetting('type');\n\n        if (tagOptionType === UNSET_OPTION) {\n          extendedOptions = defaults[userOptions.type || base.type];\n        } else {\n          extendedOptions = defaults[tagOptionType];\n        }\n\n        this.mergedOptions = $.extend({}, base, extendedOptions, userOptions);\n      },\n      getTagSetting: function getTagSetting(key) {\n        var prefix = this.tagOptionsPrefix,\n            val,\n            i,\n            pairs,\n            keyval;\n\n        if (prefix === false || prefix === undefined) {\n          return UNSET_OPTION;\n        }\n\n        if (this.tagValCache.hasOwnProperty(key)) {\n          val = this.tagValCache.key;\n        } else {\n          val = this.tag.getAttribute(prefix + key);\n\n          if (val === undefined || val === null) {\n            val = UNSET_OPTION;\n          } else if (val.substr(0, 1) === '[') {\n            val = val.substr(1, val.length - 2).split(',');\n\n            for (i = val.length; i--;) {\n              val[i] = normalizeValue(val[i].replace(/(^\\s*)|(\\s*$)/g, ''));\n            }\n          } else if (val.substr(0, 1) === '{') {\n            pairs = val.substr(1, val.length - 2).split(',');\n            val = {};\n\n            for (i = pairs.length; i--;) {\n              keyval = pairs[i].split(':', 2);\n              val[keyval[0].replace(/(^\\s*)|(\\s*$)/g, '')] = normalizeValue(keyval[1].replace(/(^\\s*)|(\\s*$)/g, ''));\n            }\n          } else {\n            val = normalizeValue(val);\n          }\n\n          this.tagValCache.key = val;\n        }\n\n        return val;\n      },\n      get: function get(key, defaultval) {\n        var tagOption = this.getTagSetting(key),\n            result;\n\n        if (tagOption !== UNSET_OPTION) {\n          return tagOption;\n        }\n\n        return (result = this.mergedOptions[key]) === undefined ? defaultval : result;\n      }\n    });\n    $.fn.sparkline._base = createClass({\n      disabled: false,\n      init: function init(el, values, options, width, height) {\n        this.el = el;\n        this.$el = $(el);\n        this.values = values;\n        this.options = options;\n        this.width = width;\n        this.height = height;\n        this.currentRegion = undefined;\n      },\n\n      /**\n       * Setup the canvas\n       */\n      initTarget: function initTarget() {\n        var interactive = !this.options.get('disableInteraction');\n\n        if (!(this.target = this.$el.simpledraw(this.width, this.height, this.options.get('composite'), interactive))) {\n          this.disabled = true;\n        } else {\n          this.canvasWidth = this.target.pixelWidth;\n          this.canvasHeight = this.target.pixelHeight;\n        }\n      },\n\n      /**\n       * Actually render the chart to the canvas\n       */\n      render: function render() {\n        if (this.disabled) {\n          this.el.innerHTML = '';\n          return false;\n        }\n\n        return true;\n      },\n\n      /**\n       * Return a region id for a given x/y co-ordinate\n       */\n      getRegion: function getRegion(x, y) {},\n\n      /**\n       * Highlight an item based on the moused-over x,y co-ordinate\n       */\n      setRegionHighlight: function setRegionHighlight(el, x, y) {\n        var currentRegion = this.currentRegion,\n            highlightEnabled = !this.options.get('disableHighlight'),\n            newRegion;\n\n        if (x > this.canvasWidth || y > this.canvasHeight || x < 0 || y < 0) {\n          return null;\n        }\n\n        newRegion = this.getRegion(el, x, y);\n\n        if (currentRegion !== newRegion) {\n          if (currentRegion !== undefined && highlightEnabled) {\n            this.removeHighlight();\n          }\n\n          this.currentRegion = newRegion;\n\n          if (newRegion !== undefined && highlightEnabled) {\n            this.renderHighlight();\n          }\n\n          return true;\n        }\n\n        return false;\n      },\n\n      /**\n       * Reset any currently highlighted item\n       */\n      clearRegionHighlight: function clearRegionHighlight() {\n        if (this.currentRegion !== undefined) {\n          this.removeHighlight();\n          this.currentRegion = undefined;\n          return true;\n        }\n\n        return false;\n      },\n      renderHighlight: function renderHighlight() {\n        this.changeHighlight(true);\n      },\n      removeHighlight: function removeHighlight() {\n        this.changeHighlight(false);\n      },\n      changeHighlight: function changeHighlight(highlight) {},\n\n      /**\n       * Fetch the HTML to display as a tooltip\n       */\n      getCurrentRegionTooltip: function getCurrentRegionTooltip() {\n        var options = this.options,\n            header = '',\n            entries = [],\n            fields,\n            formats,\n            formatlen,\n            fclass,\n            text,\n            i,\n            showFields,\n            showFieldsKey,\n            newFields,\n            fv,\n            formatter,\n            format,\n            fieldlen,\n            j;\n\n        if (this.currentRegion === undefined) {\n          return '';\n        }\n\n        fields = this.getCurrentRegionFields();\n        formatter = options.get('tooltipFormatter');\n\n        if (formatter) {\n          return formatter(this, options, fields);\n        }\n\n        if (options.get('tooltipChartTitle')) {\n          header += '<div class=\"jqs jqstitle\">' + options.get('tooltipChartTitle') + '</div>\\n';\n        }\n\n        formats = this.options.get('tooltipFormat');\n\n        if (!formats) {\n          return '';\n        }\n\n        if (!$.isArray(formats)) {\n          formats = [formats];\n        }\n\n        if (!$.isArray(fields)) {\n          fields = [fields];\n        }\n\n        showFields = this.options.get('tooltipFormatFieldlist');\n        showFieldsKey = this.options.get('tooltipFormatFieldlistKey');\n\n        if (showFields && showFieldsKey) {\n          // user-selected ordering of fields\n          newFields = [];\n\n          for (i = fields.length; i--;) {\n            fv = fields[i][showFieldsKey];\n\n            if ((j = $.inArray(fv, showFields)) != -1) {\n              newFields[j] = fields[i];\n            }\n          }\n\n          fields = newFields;\n        }\n\n        formatlen = formats.length;\n        fieldlen = fields.length;\n\n        for (i = 0; i < formatlen; i++) {\n          format = formats[i];\n\n          if (typeof format === 'string') {\n            format = new SPFormat(format);\n          }\n\n          fclass = format.fclass || 'jqsfield';\n\n          for (j = 0; j < fieldlen; j++) {\n            if (!fields[j].isNull || !options.get('tooltipSkipNull')) {\n              $.extend(fields[j], {\n                prefix: options.get('tooltipPrefix'),\n                suffix: options.get('tooltipSuffix')\n              });\n              text = format.render(fields[j], options.get('tooltipValueLookups'), options);\n              entries.push('<div class=\"' + fclass + '\">' + text + '</div>');\n            }\n          }\n        }\n\n        if (entries.length) {\n          return header + entries.join('\\n');\n        }\n\n        return '';\n      },\n      getCurrentRegionFields: function getCurrentRegionFields() {},\n      calcHighlightColor: function calcHighlightColor(color, options) {\n        var highlightColor = options.get('highlightColor'),\n            lighten = options.get('highlightLighten'),\n            parse,\n            mult,\n            rgbnew,\n            i;\n\n        if (highlightColor) {\n          return highlightColor;\n        }\n\n        if (lighten) {\n          // extract RGB values\n          parse = /^#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(color) || /^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i.exec(color);\n\n          if (parse) {\n            rgbnew = [];\n            mult = color.length === 4 ? 16 : 1;\n\n            for (i = 0; i < 3; i++) {\n              rgbnew[i] = clipval(Math.round(parseInt(parse[i + 1], 16) * mult * lighten), 0, 255);\n            }\n\n            return 'rgb(' + rgbnew.join(',') + ')';\n          }\n        }\n\n        return color;\n      }\n    });\n    barHighlightMixin = {\n      changeHighlight: function changeHighlight(highlight) {\n        var currentRegion = this.currentRegion,\n            target = this.target,\n            shapeids = this.regionShapes[currentRegion],\n            newShapes; // will be null if the region value was null\n\n        if (shapeids) {\n          newShapes = this.renderRegion(currentRegion, highlight);\n\n          if ($.isArray(newShapes) || $.isArray(shapeids)) {\n            target.replaceWithShapes(shapeids, newShapes);\n            this.regionShapes[currentRegion] = $.map(newShapes, function (newShape) {\n              return newShape.id;\n            });\n          } else {\n            target.replaceWithShape(shapeids, newShapes);\n            this.regionShapes[currentRegion] = newShapes.id;\n          }\n        }\n      },\n      render: function render() {\n        var values = this.values,\n            target = this.target,\n            regionShapes = this.regionShapes,\n            shapes,\n            ids,\n            i,\n            j;\n\n        if (!this.cls._super.render.call(this)) {\n          return;\n        }\n\n        for (i = values.length; i--;) {\n          shapes = this.renderRegion(i);\n\n          if (shapes) {\n            if ($.isArray(shapes)) {\n              ids = [];\n\n              for (j = shapes.length; j--;) {\n                shapes[j].append();\n                ids.push(shapes[j].id);\n              }\n\n              regionShapes[i] = ids;\n            } else {\n              shapes.append();\n              regionShapes[i] = shapes.id; // store just the shapeid\n            }\n          } else {\n            // null value\n            regionShapes[i] = null;\n          }\n        }\n\n        target.render();\n      }\n    };\n    /**\n     * Line charts\n     */\n\n    $.fn.sparkline.line = line = createClass($.fn.sparkline._base, {\n      type: 'line',\n      init: function init(el, values, options, width, height) {\n        line._super.init.call(this, el, values, options, width, height);\n\n        this.vertices = [];\n        this.regionMap = [];\n        this.xvalues = [];\n        this.yvalues = [];\n        this.yminmax = [];\n        this.hightlightSpotId = null;\n        this.lastShapeId = null;\n        this.initTarget();\n      },\n      getRegion: function getRegion(el, x, y) {\n        var i,\n            regionMap = this.regionMap; // maps regions to value positions\n\n        for (i = regionMap.length; i--;) {\n          if (regionMap[i] !== null && x >= regionMap[i][0] && x <= regionMap[i][1]) {\n            return regionMap[i][2];\n          }\n        }\n\n        return undefined;\n      },\n      getCurrentRegionFields: function getCurrentRegionFields() {\n        var currentRegion = this.currentRegion;\n        return {\n          isNull: this.yvalues[currentRegion] === null,\n          x: this.xvalues[currentRegion],\n          y: this.yvalues[currentRegion],\n          color: this.options.get('lineColor'),\n          fillColor: this.options.get('fillColor'),\n          offset: currentRegion\n        };\n      },\n      renderHighlight: function renderHighlight() {\n        var currentRegion = this.currentRegion,\n            target = this.target,\n            vertex = this.vertices[currentRegion],\n            options = this.options,\n            spotRadius = options.get('spotRadius'),\n            highlightSpotColor = options.get('highlightSpotColor'),\n            highlightLineColor = options.get('highlightLineColor'),\n            highlightSpot,\n            highlightLine;\n\n        if (!vertex) {\n          return;\n        }\n\n        if (spotRadius && highlightSpotColor) {\n          highlightSpot = target.drawCircle(vertex[0], vertex[1], spotRadius, undefined, highlightSpotColor);\n          this.highlightSpotId = highlightSpot.id;\n          target.insertAfterShape(this.lastShapeId, highlightSpot);\n        }\n\n        if (highlightLineColor) {\n          highlightLine = target.drawLine(vertex[0], this.canvasTop, vertex[0], this.canvasTop + this.canvasHeight, highlightLineColor);\n          this.highlightLineId = highlightLine.id;\n          target.insertAfterShape(this.lastShapeId, highlightLine);\n        }\n      },\n      removeHighlight: function removeHighlight() {\n        var target = this.target;\n\n        if (this.highlightSpotId) {\n          target.removeShapeId(this.highlightSpotId);\n          this.highlightSpotId = null;\n        }\n\n        if (this.highlightLineId) {\n          target.removeShapeId(this.highlightLineId);\n          this.highlightLineId = null;\n        }\n      },\n      scanValues: function scanValues() {\n        var values = this.values,\n            valcount = values.length,\n            xvalues = this.xvalues,\n            yvalues = this.yvalues,\n            yminmax = this.yminmax,\n            i,\n            val,\n            isStr,\n            isArray,\n            sp;\n\n        for (i = 0; i < valcount; i++) {\n          val = values[i];\n          isStr = typeof values[i] === 'string';\n          isArray = _typeof(values[i]) === 'object' && values[i] instanceof Array;\n          sp = isStr && values[i].split(':');\n\n          if (isStr && sp.length === 2) {\n            // x:y\n            xvalues.push(Number(sp[0]));\n            yvalues.push(Number(sp[1]));\n            yminmax.push(Number(sp[1]));\n          } else if (isArray) {\n            xvalues.push(val[0]);\n            yvalues.push(val[1]);\n            yminmax.push(val[1]);\n          } else {\n            xvalues.push(i);\n\n            if (values[i] === null || values[i] === 'null') {\n              yvalues.push(null);\n            } else {\n              yvalues.push(Number(val));\n              yminmax.push(Number(val));\n            }\n          }\n        }\n\n        if (this.options.get('xvalues')) {\n          xvalues = this.options.get('xvalues');\n        }\n\n        this.maxy = this.maxyorg = Math.max.apply(Math, yminmax);\n        this.miny = this.minyorg = Math.min.apply(Math, yminmax);\n        this.maxx = Math.max.apply(Math, xvalues);\n        this.minx = Math.min.apply(Math, xvalues);\n        this.xvalues = xvalues;\n        this.yvalues = yvalues;\n        this.yminmax = yminmax;\n      },\n      processRangeOptions: function processRangeOptions() {\n        var options = this.options,\n            normalRangeMin = options.get('normalRangeMin'),\n            normalRangeMax = options.get('normalRangeMax');\n\n        if (normalRangeMin !== undefined) {\n          if (normalRangeMin < this.miny) {\n            this.miny = normalRangeMin;\n          }\n\n          if (normalRangeMax > this.maxy) {\n            this.maxy = normalRangeMax;\n          }\n        }\n\n        if (options.get('chartRangeMin') !== undefined && (options.get('chartRangeClip') || options.get('chartRangeMin') < this.miny)) {\n          this.miny = options.get('chartRangeMin');\n        }\n\n        if (options.get('chartRangeMax') !== undefined && (options.get('chartRangeClip') || options.get('chartRangeMax') > this.maxy)) {\n          this.maxy = options.get('chartRangeMax');\n        }\n\n        if (options.get('chartRangeMinX') !== undefined && (options.get('chartRangeClipX') || options.get('chartRangeMinX') < this.minx)) {\n          this.minx = options.get('chartRangeMinX');\n        }\n\n        if (options.get('chartRangeMaxX') !== undefined && (options.get('chartRangeClipX') || options.get('chartRangeMaxX') > this.maxx)) {\n          this.maxx = options.get('chartRangeMaxX');\n        }\n      },\n      drawNormalRange: function drawNormalRange(canvasLeft, canvasTop, canvasHeight, canvasWidth, rangey) {\n        var normalRangeMin = this.options.get('normalRangeMin'),\n            normalRangeMax = this.options.get('normalRangeMax'),\n            ytop = canvasTop + Math.round(canvasHeight - canvasHeight * ((normalRangeMax - this.miny) / rangey)),\n            height = Math.round(canvasHeight * (normalRangeMax - normalRangeMin) / rangey);\n        this.target.drawRect(canvasLeft, ytop, canvasWidth, height, undefined, this.options.get('normalRangeColor')).append();\n      },\n      render: function render() {\n        var options = this.options,\n            target = this.target,\n            canvasWidth = this.canvasWidth,\n            canvasHeight = this.canvasHeight,\n            vertices = this.vertices,\n            spotRadius = options.get('spotRadius'),\n            regionMap = this.regionMap,\n            rangex,\n            rangey,\n            yvallast,\n            canvasTop,\n            canvasLeft,\n            vertex,\n            path,\n            paths,\n            x,\n            y,\n            xnext,\n            xpos,\n            xposnext,\n            last,\n            next,\n            yvalcount,\n            lineShapes,\n            fillShapes,\n            plen,\n            valueSpots,\n            hlSpotsEnabled,\n            color,\n            xvalues,\n            yvalues,\n            i;\n\n        if (!line._super.render.call(this)) {\n          return;\n        }\n\n        this.scanValues();\n        this.processRangeOptions();\n        xvalues = this.xvalues;\n        yvalues = this.yvalues;\n\n        if (!this.yminmax.length || this.yvalues.length < 2) {\n          // empty or all null valuess\n          return;\n        }\n\n        canvasTop = canvasLeft = 0;\n        rangex = this.maxx - this.minx === 0 ? 1 : this.maxx - this.minx;\n        rangey = this.maxy - this.miny === 0 ? 1 : this.maxy - this.miny;\n        yvallast = this.yvalues.length - 1;\n\n        if (spotRadius && (canvasWidth < spotRadius * 4 || canvasHeight < spotRadius * 4)) {\n          spotRadius = 0;\n        }\n\n        if (spotRadius) {\n          // adjust the canvas size as required so that spots will fit\n          hlSpotsEnabled = options.get('highlightSpotColor') && !options.get('disableInteraction');\n\n          if (hlSpotsEnabled || options.get('minSpotColor') || options.get('spotColor') && yvalues[yvallast] === this.miny) {\n            canvasHeight -= Math.ceil(spotRadius);\n          }\n\n          if (hlSpotsEnabled || options.get('maxSpotColor') || options.get('spotColor') && yvalues[yvallast] === this.maxy) {\n            canvasHeight -= Math.ceil(spotRadius);\n            canvasTop += Math.ceil(spotRadius);\n          }\n\n          if (hlSpotsEnabled || (options.get('minSpotColor') || options.get('maxSpotColor')) && (yvalues[0] === this.miny || yvalues[0] === this.maxy)) {\n            canvasLeft += Math.ceil(spotRadius);\n            canvasWidth -= Math.ceil(spotRadius);\n          }\n\n          if (hlSpotsEnabled || options.get('spotColor') || options.get('minSpotColor') || options.get('maxSpotColor') && (yvalues[yvallast] === this.miny || yvalues[yvallast] === this.maxy)) {\n            canvasWidth -= Math.ceil(spotRadius);\n          }\n        }\n\n        canvasHeight--;\n\n        if (options.get('normalRangeMin') !== undefined && !options.get('drawNormalOnTop')) {\n          this.drawNormalRange(canvasLeft, canvasTop, canvasHeight, canvasWidth, rangey);\n        }\n\n        path = [];\n        paths = [path];\n        last = next = null;\n        yvalcount = yvalues.length;\n\n        for (i = 0; i < yvalcount; i++) {\n          x = xvalues[i];\n          xnext = xvalues[i + 1];\n          y = yvalues[i];\n          xpos = canvasLeft + Math.round((x - this.minx) * (canvasWidth / rangex));\n          xposnext = i < yvalcount - 1 ? canvasLeft + Math.round((xnext - this.minx) * (canvasWidth / rangex)) : canvasWidth;\n          next = xpos + (xposnext - xpos) / 2;\n          regionMap[i] = [last || 0, next, i];\n          last = next;\n\n          if (y === null) {\n            if (i) {\n              if (yvalues[i - 1] !== null) {\n                path = [];\n                paths.push(path);\n              }\n\n              vertices.push(null);\n            }\n          } else {\n            if (y < this.miny) {\n              y = this.miny;\n            }\n\n            if (y > this.maxy) {\n              y = this.maxy;\n            }\n\n            if (!path.length) {\n              // previous value was null\n              path.push([xpos, canvasTop + canvasHeight]);\n            }\n\n            vertex = [xpos, canvasTop + Math.round(canvasHeight - canvasHeight * ((y - this.miny) / rangey))];\n            path.push(vertex);\n            vertices.push(vertex);\n          }\n        }\n\n        lineShapes = [];\n        fillShapes = [];\n        plen = paths.length;\n\n        for (i = 0; i < plen; i++) {\n          path = paths[i];\n\n          if (path.length) {\n            if (options.get('fillColor')) {\n              path.push([path[path.length - 1][0], canvasTop + canvasHeight]);\n              fillShapes.push(path.slice(0));\n              path.pop();\n            } // if there's only a single point in this path, then we want to display it\n            // as a vertical line which means we keep path[0]  as is\n\n\n            if (path.length > 2) {\n              // else we want the first value\n              path[0] = [path[0][0], path[1][1]];\n            }\n\n            lineShapes.push(path);\n          }\n        } // draw the fill first, then optionally the normal range, then the line on top of that\n\n\n        plen = fillShapes.length;\n\n        for (i = 0; i < plen; i++) {\n          target.drawShape(fillShapes[i], options.get('fillColor'), options.get('fillColor')).append();\n        }\n\n        if (options.get('normalRangeMin') !== undefined && options.get('drawNormalOnTop')) {\n          this.drawNormalRange(canvasLeft, canvasTop, canvasHeight, canvasWidth, rangey);\n        }\n\n        plen = lineShapes.length;\n\n        for (i = 0; i < plen; i++) {\n          target.drawShape(lineShapes[i], options.get('lineColor'), undefined, options.get('lineWidth')).append();\n        }\n\n        if (spotRadius && options.get('valueSpots')) {\n          valueSpots = options.get('valueSpots');\n\n          if (valueSpots.get === undefined) {\n            valueSpots = new RangeMap(valueSpots);\n          }\n\n          for (i = 0; i < yvalcount; i++) {\n            color = valueSpots.get(yvalues[i]);\n\n            if (color) {\n              target.drawCircle(canvasLeft + Math.round((xvalues[i] - this.minx) * (canvasWidth / rangex)), canvasTop + Math.round(canvasHeight - canvasHeight * ((yvalues[i] - this.miny) / rangey)), spotRadius, undefined, color).append();\n            }\n          }\n        }\n\n        if (spotRadius && options.get('spotColor') && yvalues[yvallast] !== null) {\n          target.drawCircle(canvasLeft + Math.round((xvalues[xvalues.length - 1] - this.minx) * (canvasWidth / rangex)), canvasTop + Math.round(canvasHeight - canvasHeight * ((yvalues[yvallast] - this.miny) / rangey)), spotRadius, undefined, options.get('spotColor')).append();\n        }\n\n        if (this.maxy !== this.minyorg) {\n          if (spotRadius && options.get('minSpotColor')) {\n            x = xvalues[$.inArray(this.minyorg, yvalues)];\n            target.drawCircle(canvasLeft + Math.round((x - this.minx) * (canvasWidth / rangex)), canvasTop + Math.round(canvasHeight - canvasHeight * ((this.minyorg - this.miny) / rangey)), spotRadius, undefined, options.get('minSpotColor')).append();\n          }\n\n          if (spotRadius && options.get('maxSpotColor')) {\n            x = xvalues[$.inArray(this.maxyorg, yvalues)];\n            target.drawCircle(canvasLeft + Math.round((x - this.minx) * (canvasWidth / rangex)), canvasTop + Math.round(canvasHeight - canvasHeight * ((this.maxyorg - this.miny) / rangey)), spotRadius, undefined, options.get('maxSpotColor')).append();\n          }\n        }\n\n        this.lastShapeId = target.getLastShapeId();\n        this.canvasTop = canvasTop;\n        target.render();\n      }\n    });\n    /**\n     * Bar charts\n     */\n\n    $.fn.sparkline.bar = bar = createClass($.fn.sparkline._base, barHighlightMixin, {\n      type: 'bar',\n      init: function init(el, values, options, width, height) {\n        var barWidth = parseInt(options.get('barWidth'), 10),\n            barSpacing = parseInt(options.get('barSpacing'), 10),\n            chartRangeMin = options.get('chartRangeMin'),\n            chartRangeMax = options.get('chartRangeMax'),\n            chartRangeClip = options.get('chartRangeClip'),\n            stackMin = Infinity,\n            stackMax = -Infinity,\n            isStackString,\n            groupMin,\n            groupMax,\n            stackRanges,\n            numValues,\n            i,\n            vlen,\n            range,\n            zeroAxis,\n            xaxisOffset,\n            min,\n            max,\n            clipMin,\n            clipMax,\n            stacked,\n            vlist,\n            j,\n            slen,\n            svals,\n            val,\n            yoffset,\n            yMaxCalc,\n            canvasHeightEf;\n\n        bar._super.init.call(this, el, values, options, width, height); // scan values to determine whether to stack bars\n\n\n        for (i = 0, vlen = values.length; i < vlen; i++) {\n          val = values[i];\n          isStackString = typeof val === 'string' && val.indexOf(':') > -1;\n\n          if (isStackString || $.isArray(val)) {\n            stacked = true;\n\n            if (isStackString) {\n              val = values[i] = normalizeValues(val.split(':'));\n            }\n\n            val = remove(val, null); // min/max will treat null as zero\n\n            groupMin = Math.min.apply(Math, val);\n            groupMax = Math.max.apply(Math, val);\n\n            if (groupMin < stackMin) {\n              stackMin = groupMin;\n            }\n\n            if (groupMax > stackMax) {\n              stackMax = groupMax;\n            }\n          }\n        }\n\n        this.stacked = stacked;\n        this.regionShapes = {};\n        this.barWidth = barWidth;\n        this.barSpacing = barSpacing;\n        this.totalBarWidth = barWidth + barSpacing;\n        this.width = width = values.length * barWidth + (values.length - 1) * barSpacing;\n        this.initTarget();\n\n        if (chartRangeClip) {\n          clipMin = chartRangeMin === undefined ? -Infinity : chartRangeMin;\n          clipMax = chartRangeMax === undefined ? Infinity : chartRangeMax;\n        }\n\n        numValues = [];\n        stackRanges = stacked ? [] : numValues;\n        var stackTotals = [];\n        var stackRangesNeg = [];\n\n        for (i = 0, vlen = values.length; i < vlen; i++) {\n          if (stacked) {\n            vlist = values[i];\n            values[i] = svals = [];\n            stackTotals[i] = 0;\n            stackRanges[i] = stackRangesNeg[i] = 0;\n\n            for (j = 0, slen = vlist.length; j < slen; j++) {\n              val = svals[j] = chartRangeClip ? clipval(vlist[j], clipMin, clipMax) : vlist[j];\n\n              if (val !== null) {\n                if (val > 0) {\n                  stackTotals[i] += val;\n                }\n\n                if (stackMin < 0 && stackMax > 0) {\n                  if (val < 0) {\n                    stackRangesNeg[i] += Math.abs(val);\n                  } else {\n                    stackRanges[i] += val;\n                  }\n                } else {\n                  stackRanges[i] += Math.abs(val - (val < 0 ? stackMax : stackMin));\n                }\n\n                numValues.push(val);\n              }\n            }\n          } else {\n            val = chartRangeClip ? clipval(values[i], clipMin, clipMax) : values[i];\n            val = values[i] = normalizeValue(val);\n\n            if (val !== null) {\n              numValues.push(val);\n            }\n          }\n        }\n\n        this.max = max = Math.max.apply(Math, numValues);\n        this.min = min = Math.min.apply(Math, numValues);\n        this.stackMax = stackMax = stacked ? Math.max.apply(Math, stackTotals) : max;\n        this.stackMin = stackMin = stacked ? Math.min.apply(Math, numValues) : min;\n\n        if (options.get('chartRangeMin') !== undefined && (options.get('chartRangeClip') || options.get('chartRangeMin') < min)) {\n          min = options.get('chartRangeMin');\n        }\n\n        if (options.get('chartRangeMax') !== undefined && (options.get('chartRangeClip') || options.get('chartRangeMax') > max)) {\n          max = options.get('chartRangeMax');\n        }\n\n        this.zeroAxis = zeroAxis = options.get('zeroAxis', true);\n\n        if (min <= 0 && max >= 0 && zeroAxis) {\n          xaxisOffset = 0;\n        } else if (zeroAxis == false) {\n          xaxisOffset = min;\n        } else if (min > 0) {\n          xaxisOffset = min;\n        } else {\n          xaxisOffset = max;\n        }\n\n        this.xaxisOffset = xaxisOffset;\n        range = stacked ? Math.max.apply(Math, stackRanges) + Math.max.apply(Math, stackRangesNeg) : max - min; // as we plot zero/min values a single pixel line, we add a pixel to all other\n        // values - Reduce the effective canvas size to suit\n\n        this.canvasHeightEf = zeroAxis && min < 0 ? this.canvasHeight - 2 : this.canvasHeight - 1;\n\n        if (min < xaxisOffset) {\n          yMaxCalc = stacked && max >= 0 ? stackMax : max;\n          yoffset = (yMaxCalc - xaxisOffset) / range * this.canvasHeight;\n\n          if (yoffset !== Math.ceil(yoffset)) {\n            this.canvasHeightEf -= 2;\n            yoffset = Math.ceil(yoffset);\n          }\n        } else {\n          yoffset = this.canvasHeight;\n        }\n\n        this.yoffset = yoffset;\n\n        if ($.isArray(options.get('colorMap'))) {\n          this.colorMapByIndex = options.get('colorMap');\n          this.colorMapByValue = null;\n        } else {\n          this.colorMapByIndex = null;\n          this.colorMapByValue = options.get('colorMap');\n\n          if (this.colorMapByValue && this.colorMapByValue.get === undefined) {\n            this.colorMapByValue = new RangeMap(this.colorMapByValue);\n          }\n        }\n\n        this.range = range;\n      },\n      getRegion: function getRegion(el, x, y) {\n        var result = Math.floor(x / this.totalBarWidth);\n        return result < 0 || result >= this.values.length ? undefined : result;\n      },\n      getCurrentRegionFields: function getCurrentRegionFields() {\n        var currentRegion = this.currentRegion,\n            values = ensureArray(this.values[currentRegion]),\n            result = [],\n            value,\n            i;\n\n        for (i = values.length; i--;) {\n          value = values[i];\n          result.push({\n            isNull: value === null,\n            value: value,\n            color: this.calcColor(i, value, currentRegion),\n            offset: currentRegion\n          });\n        }\n\n        return result;\n      },\n      calcColor: function calcColor(stacknum, value, valuenum) {\n        var colorMapByIndex = this.colorMapByIndex,\n            colorMapByValue = this.colorMapByValue,\n            options = this.options,\n            color,\n            newColor;\n\n        if (this.stacked) {\n          color = options.get('stackedBarColor');\n        } else {\n          color = value < 0 ? options.get('negBarColor') : options.get('barColor');\n        }\n\n        if (value === 0 && options.get('zeroColor') !== undefined) {\n          color = options.get('zeroColor');\n        }\n\n        if (colorMapByValue && (newColor = colorMapByValue.get(value))) {\n          color = newColor;\n        } else if (colorMapByIndex && colorMapByIndex.length > valuenum) {\n          color = colorMapByIndex[valuenum];\n        }\n\n        return $.isArray(color) ? color[stacknum % color.length] : color;\n      },\n\n      /**\n       * Render bar(s) for a region\n       */\n      renderRegion: function renderRegion(valuenum, highlight) {\n        var vals = this.values[valuenum],\n            options = this.options,\n            xaxisOffset = this.xaxisOffset,\n            result = [],\n            range = this.range,\n            stacked = this.stacked,\n            target = this.target,\n            x = valuenum * this.totalBarWidth,\n            canvasHeightEf = this.canvasHeightEf,\n            yoffset = this.yoffset,\n            y,\n            height,\n            color,\n            isNull,\n            yoffsetNeg,\n            i,\n            valcount,\n            val,\n            minPlotted,\n            allMin;\n        vals = $.isArray(vals) ? vals : [vals];\n        valcount = vals.length;\n        val = vals[0];\n        isNull = all(null, vals);\n        allMin = all(xaxisOffset, vals, true);\n\n        if (isNull) {\n          if (options.get('nullColor')) {\n            color = highlight ? options.get('nullColor') : this.calcHighlightColor(options.get('nullColor'), options);\n            y = yoffset > 0 ? yoffset - 1 : yoffset;\n            return target.drawRect(x, y, this.barWidth - 1, 0, color, color);\n          } else {\n            return undefined;\n          }\n        }\n\n        yoffsetNeg = yoffset;\n\n        for (i = 0; i < valcount; i++) {\n          val = vals[i];\n\n          if (stacked && val === xaxisOffset) {\n            if (!allMin || minPlotted) {\n              continue;\n            }\n\n            minPlotted = true;\n          }\n\n          if (range > 0) {\n            height = Math.floor(canvasHeightEf * (Math.abs(val - xaxisOffset) / range)) + 1;\n          } else {\n            height = 1;\n          }\n\n          if (val < xaxisOffset || val === xaxisOffset && yoffset === 0) {\n            y = yoffsetNeg;\n            yoffsetNeg += height;\n          } else {\n            y = yoffset - height;\n            yoffset -= height;\n          }\n\n          color = this.calcColor(i, val, valuenum);\n\n          if (highlight) {\n            color = this.calcHighlightColor(color, options);\n          }\n\n          result.push(target.drawRect(x, y, this.barWidth - 1, height - 1, color, color));\n        }\n\n        if (result.length === 1) {\n          return result[0];\n        }\n\n        return result;\n      }\n    });\n    /**\n     * Tristate charts\n     */\n\n    $.fn.sparkline.tristate = tristate = createClass($.fn.sparkline._base, barHighlightMixin, {\n      type: 'tristate',\n      init: function init(el, values, options, width, height) {\n        var barWidth = parseInt(options.get('barWidth'), 10),\n            barSpacing = parseInt(options.get('barSpacing'), 10);\n\n        tristate._super.init.call(this, el, values, options, width, height);\n\n        this.regionShapes = {};\n        this.barWidth = barWidth;\n        this.barSpacing = barSpacing;\n        this.totalBarWidth = barWidth + barSpacing;\n        this.values = $.map(values, Number);\n        this.width = width = values.length * barWidth + (values.length - 1) * barSpacing;\n\n        if ($.isArray(options.get('colorMap'))) {\n          this.colorMapByIndex = options.get('colorMap');\n          this.colorMapByValue = null;\n        } else {\n          this.colorMapByIndex = null;\n          this.colorMapByValue = options.get('colorMap');\n\n          if (this.colorMapByValue && this.colorMapByValue.get === undefined) {\n            this.colorMapByValue = new RangeMap(this.colorMapByValue);\n          }\n        }\n\n        this.initTarget();\n      },\n      getRegion: function getRegion(el, x, y) {\n        return Math.floor(x / this.totalBarWidth);\n      },\n      getCurrentRegionFields: function getCurrentRegionFields() {\n        var currentRegion = this.currentRegion;\n        return {\n          isNull: this.values[currentRegion] === undefined,\n          value: this.values[currentRegion],\n          color: this.calcColor(this.values[currentRegion], currentRegion),\n          offset: currentRegion\n        };\n      },\n      calcColor: function calcColor(value, valuenum) {\n        var values = this.values,\n            options = this.options,\n            colorMapByIndex = this.colorMapByIndex,\n            colorMapByValue = this.colorMapByValue,\n            color,\n            newColor;\n\n        if (colorMapByValue && (newColor = colorMapByValue.get(value))) {\n          color = newColor;\n        } else if (colorMapByIndex && colorMapByIndex.length > valuenum) {\n          color = colorMapByIndex[valuenum];\n        } else if (values[valuenum] < 0) {\n          color = options.get('negBarColor');\n        } else if (values[valuenum] > 0) {\n          color = options.get('posBarColor');\n        } else {\n          color = options.get('zeroBarColor');\n        }\n\n        return color;\n      },\n      renderRegion: function renderRegion(valuenum, highlight) {\n        var values = this.values,\n            options = this.options,\n            target = this.target,\n            canvasHeight,\n            height,\n            halfHeight,\n            x,\n            y,\n            color;\n        canvasHeight = target.pixelHeight;\n        halfHeight = Math.round(canvasHeight / 2);\n        x = valuenum * this.totalBarWidth;\n\n        if (values[valuenum] < 0) {\n          y = halfHeight;\n          height = halfHeight - 1;\n        } else if (values[valuenum] > 0) {\n          y = 0;\n          height = halfHeight - 1;\n        } else {\n          y = halfHeight - 1;\n          height = 2;\n        }\n\n        color = this.calcColor(values[valuenum], valuenum);\n\n        if (color === null) {\n          return;\n        }\n\n        if (highlight) {\n          color = this.calcHighlightColor(color, options);\n        }\n\n        return target.drawRect(x, y, this.barWidth - 1, height - 1, color, color);\n      }\n    });\n    /**\n     * Discrete charts\n     */\n\n    $.fn.sparkline.discrete = discrete = createClass($.fn.sparkline._base, barHighlightMixin, {\n      type: 'discrete',\n      init: function init(el, values, options, width, height) {\n        discrete._super.init.call(this, el, values, options, width, height);\n\n        this.regionShapes = {};\n        this.values = values = $.map(values, Number);\n        this.min = Math.min.apply(Math, values);\n        this.max = Math.max.apply(Math, values);\n        this.range = this.max - this.min;\n        this.width = width = options.get('width') === 'auto' ? values.length * 2 : this.width;\n        this.interval = Math.floor(width / values.length);\n        this.itemWidth = width / values.length;\n\n        if (options.get('chartRangeMin') !== undefined && (options.get('chartRangeClip') || options.get('chartRangeMin') < this.min)) {\n          this.min = options.get('chartRangeMin');\n        }\n\n        if (options.get('chartRangeMax') !== undefined && (options.get('chartRangeClip') || options.get('chartRangeMax') > this.max)) {\n          this.max = options.get('chartRangeMax');\n        }\n\n        this.initTarget();\n\n        if (this.target) {\n          this.lineHeight = options.get('lineHeight') === 'auto' ? Math.round(this.canvasHeight * 0.3) : options.get('lineHeight');\n        }\n      },\n      getRegion: function getRegion(el, x, y) {\n        return Math.floor(x / this.itemWidth);\n      },\n      getCurrentRegionFields: function getCurrentRegionFields() {\n        var currentRegion = this.currentRegion;\n        return {\n          isNull: this.values[currentRegion] === undefined,\n          value: this.values[currentRegion],\n          offset: currentRegion\n        };\n      },\n      renderRegion: function renderRegion(valuenum, highlight) {\n        var values = this.values,\n            options = this.options,\n            min = this.min,\n            max = this.max,\n            range = this.range,\n            interval = this.interval,\n            target = this.target,\n            canvasHeight = this.canvasHeight,\n            lineHeight = this.lineHeight,\n            pheight = canvasHeight - lineHeight,\n            ytop,\n            val,\n            color,\n            x;\n        val = clipval(values[valuenum], min, max);\n        x = valuenum * interval;\n        ytop = Math.round(pheight - pheight * ((val - min) / range));\n        color = options.get('thresholdColor') && val < options.get('thresholdValue') ? options.get('thresholdColor') : options.get('lineColor');\n\n        if (highlight) {\n          color = this.calcHighlightColor(color, options);\n        }\n\n        return target.drawLine(x, ytop, x, ytop + lineHeight, color);\n      }\n    });\n    /**\n     * Bullet charts\n     */\n\n    $.fn.sparkline.bullet = bullet = createClass($.fn.sparkline._base, {\n      type: 'bullet',\n      init: function init(el, values, options, width, height) {\n        var min, max, vals;\n\n        bullet._super.init.call(this, el, values, options, width, height); // values: target, performance, range1, range2, range3\n\n\n        this.values = values = normalizeValues(values); // target or performance could be null\n\n        vals = values.slice();\n        vals[0] = vals[0] === null ? vals[2] : vals[0];\n        vals[1] = values[1] === null ? vals[2] : vals[1];\n        min = Math.min.apply(Math, values);\n        max = Math.max.apply(Math, values);\n\n        if (options.get('base') === undefined) {\n          min = min < 0 ? min : 0;\n        } else {\n          min = options.get('base');\n        }\n\n        this.min = min;\n        this.max = max;\n        this.range = max - min;\n        this.shapes = {};\n        this.valueShapes = {};\n        this.regiondata = {};\n        this.width = width = options.get('width') === 'auto' ? '4.0em' : width;\n        this.target = this.$el.simpledraw(width, height, options.get('composite'));\n\n        if (!values.length) {\n          this.disabled = true;\n        }\n\n        this.initTarget();\n      },\n      getRegion: function getRegion(el, x, y) {\n        var shapeid = this.target.getShapeAt(el, x, y);\n        return shapeid !== undefined && this.shapes[shapeid] !== undefined ? this.shapes[shapeid] : undefined;\n      },\n      getCurrentRegionFields: function getCurrentRegionFields() {\n        var currentRegion = this.currentRegion;\n        return {\n          fieldkey: currentRegion.substr(0, 1),\n          value: this.values[currentRegion.substr(1)],\n          region: currentRegion\n        };\n      },\n      changeHighlight: function changeHighlight(highlight) {\n        var currentRegion = this.currentRegion,\n            shapeid = this.valueShapes[currentRegion],\n            shape;\n        delete this.shapes[shapeid];\n\n        switch (currentRegion.substr(0, 1)) {\n          case 'r':\n            shape = this.renderRange(currentRegion.substr(1), highlight);\n            break;\n\n          case 'p':\n            shape = this.renderPerformance(highlight);\n            break;\n\n          case 't':\n            shape = this.renderTarget(highlight);\n            break;\n        }\n\n        this.valueShapes[currentRegion] = shape.id;\n        this.shapes[shape.id] = currentRegion;\n        this.target.replaceWithShape(shapeid, shape);\n      },\n      renderRange: function renderRange(rn, highlight) {\n        var rangeval = this.values[rn],\n            rangewidth = Math.round(this.canvasWidth * ((rangeval - this.min) / this.range)),\n            color = this.options.get('rangeColors')[rn - 2];\n\n        if (highlight) {\n          color = this.calcHighlightColor(color, this.options);\n        }\n\n        return this.target.drawRect(0, 0, rangewidth - 1, this.canvasHeight - 1, color, color);\n      },\n      renderPerformance: function renderPerformance(highlight) {\n        var perfval = this.values[1],\n            perfwidth = Math.round(this.canvasWidth * ((perfval - this.min) / this.range)),\n            color = this.options.get('performanceColor');\n\n        if (highlight) {\n          color = this.calcHighlightColor(color, this.options);\n        }\n\n        return this.target.drawRect(0, Math.round(this.canvasHeight * 0.3), perfwidth - 1, Math.round(this.canvasHeight * 0.4) - 1, color, color);\n      },\n      renderTarget: function renderTarget(highlight) {\n        var targetval = this.values[0],\n            x = Math.round(this.canvasWidth * ((targetval - this.min) / this.range) - this.options.get('targetWidth') / 2),\n            targettop = Math.round(this.canvasHeight * 0.10),\n            targetheight = this.canvasHeight - targettop * 2,\n            color = this.options.get('targetColor');\n\n        if (highlight) {\n          color = this.calcHighlightColor(color, this.options);\n        }\n\n        return this.target.drawRect(x, targettop, this.options.get('targetWidth') - 1, targetheight - 1, color, color);\n      },\n      render: function render() {\n        var vlen = this.values.length,\n            target = this.target,\n            i,\n            shape;\n\n        if (!bullet._super.render.call(this)) {\n          return;\n        }\n\n        for (i = 2; i < vlen; i++) {\n          shape = this.renderRange(i).append();\n          this.shapes[shape.id] = 'r' + i;\n          this.valueShapes['r' + i] = shape.id;\n        }\n\n        if (this.values[1] !== null) {\n          shape = this.renderPerformance().append();\n          this.shapes[shape.id] = 'p1';\n          this.valueShapes.p1 = shape.id;\n        }\n\n        if (this.values[0] !== null) {\n          shape = this.renderTarget().append();\n          this.shapes[shape.id] = 't0';\n          this.valueShapes.t0 = shape.id;\n        }\n\n        target.render();\n      }\n    });\n    /**\n     * Pie charts\n     */\n\n    $.fn.sparkline.pie = pie = createClass($.fn.sparkline._base, {\n      type: 'pie',\n      init: function init(el, values, options, width, height) {\n        var total = 0,\n            i;\n\n        pie._super.init.call(this, el, values, options, width, height);\n\n        this.shapes = {}; // map shape ids to value offsets\n\n        this.valueShapes = {}; // maps value offsets to shape ids\n\n        this.values = values = $.map(values, Number);\n\n        if (options.get('width') === 'auto') {\n          this.width = this.height;\n        }\n\n        if (values.length > 0) {\n          for (i = values.length; i--;) {\n            total += values[i];\n          }\n        }\n\n        this.total = total;\n        this.initTarget();\n        this.radius = Math.floor(Math.min(this.canvasWidth, this.canvasHeight) / 2);\n      },\n      getRegion: function getRegion(el, x, y) {\n        var shapeid = this.target.getShapeAt(el, x, y);\n        return shapeid !== undefined && this.shapes[shapeid] !== undefined ? this.shapes[shapeid] : undefined;\n      },\n      getCurrentRegionFields: function getCurrentRegionFields() {\n        var currentRegion = this.currentRegion;\n        return {\n          isNull: this.values[currentRegion] === undefined,\n          value: this.values[currentRegion],\n          percent: this.values[currentRegion] / this.total * 100,\n          color: this.options.get('sliceColors')[currentRegion % this.options.get('sliceColors').length],\n          offset: currentRegion\n        };\n      },\n      changeHighlight: function changeHighlight(highlight) {\n        var currentRegion = this.currentRegion,\n            newslice = this.renderSlice(currentRegion, highlight),\n            shapeid = this.valueShapes[currentRegion];\n        delete this.shapes[shapeid];\n        this.target.replaceWithShape(shapeid, newslice);\n        this.valueShapes[currentRegion] = newslice.id;\n        this.shapes[newslice.id] = currentRegion;\n      },\n      renderSlice: function renderSlice(valuenum, highlight) {\n        var target = this.target,\n            options = this.options,\n            radius = this.radius,\n            borderWidth = options.get('borderWidth'),\n            offset = options.get('offset'),\n            circle = 2 * Math.PI,\n            values = this.values,\n            total = this.total,\n            next = offset ? 2 * Math.PI * (offset / 360) : 0,\n            start,\n            end,\n            i,\n            vlen,\n            color;\n        vlen = values.length;\n\n        for (i = 0; i < vlen; i++) {\n          start = next;\n          end = next;\n\n          if (total > 0) {\n            // avoid divide by zero\n            end = next + circle * (values[i] / total);\n          }\n\n          if (valuenum === i) {\n            color = options.get('sliceColors')[i % options.get('sliceColors').length];\n\n            if (highlight) {\n              color = this.calcHighlightColor(color, options);\n            }\n\n            return target.drawPieSlice(radius, radius, radius - borderWidth, start, end, undefined, color);\n          }\n\n          next = end;\n        }\n      },\n      render: function render() {\n        var target = this.target,\n            values = this.values,\n            options = this.options,\n            radius = this.radius,\n            borderWidth = options.get('borderWidth'),\n            shape,\n            i;\n\n        if (!pie._super.render.call(this)) {\n          return;\n        }\n\n        if (borderWidth) {\n          target.drawCircle(radius, radius, Math.floor(radius - borderWidth / 2), options.get('borderColor'), undefined, borderWidth).append();\n        }\n\n        for (i = values.length; i--;) {\n          if (values[i]) {\n            // don't render zero values\n            shape = this.renderSlice(i).append();\n            this.valueShapes[i] = shape.id; // store just the shapeid\n\n            this.shapes[shape.id] = i;\n          }\n        }\n\n        target.render();\n      }\n    });\n    /**\n     * Box plots\n     */\n\n    $.fn.sparkline.box = box = createClass($.fn.sparkline._base, {\n      type: 'box',\n      init: function init(el, values, options, width, height) {\n        box._super.init.call(this, el, values, options, width, height);\n\n        this.values = $.map(values, Number);\n        this.width = options.get('width') === 'auto' ? '4.0em' : width;\n        this.initTarget();\n\n        if (!this.values.length) {\n          this.disabled = 1;\n        }\n      },\n\n      /**\n       * Simulate a single region\n       */\n      getRegion: function getRegion() {\n        return 1;\n      },\n      getCurrentRegionFields: function getCurrentRegionFields() {\n        var result = [{\n          field: 'lq',\n          value: this.quartiles[0]\n        }, {\n          field: 'med',\n          value: this.quartiles[1]\n        }, {\n          field: 'uq',\n          value: this.quartiles[2]\n        }];\n\n        if (this.loutlier !== undefined) {\n          result.push({\n            field: 'lo',\n            value: this.loutlier\n          });\n        }\n\n        if (this.routlier !== undefined) {\n          result.push({\n            field: 'ro',\n            value: this.routlier\n          });\n        }\n\n        if (this.lwhisker !== undefined) {\n          result.push({\n            field: 'lw',\n            value: this.lwhisker\n          });\n        }\n\n        if (this.rwhisker !== undefined) {\n          result.push({\n            field: 'rw',\n            value: this.rwhisker\n          });\n        }\n\n        return result;\n      },\n      render: function render() {\n        var target = this.target,\n            values = this.values,\n            vlen = values.length,\n            options = this.options,\n            canvasWidth = this.canvasWidth,\n            canvasHeight = this.canvasHeight,\n            minValue = options.get('chartRangeMin') === undefined ? Math.min.apply(Math, values) : options.get('chartRangeMin'),\n            maxValue = options.get('chartRangeMax') === undefined ? Math.max.apply(Math, values) : options.get('chartRangeMax'),\n            canvasLeft = 0,\n            lwhisker,\n            loutlier,\n            iqr,\n            q1,\n            q2,\n            q3,\n            rwhisker,\n            routlier,\n            i,\n            size,\n            unitSize;\n\n        if (!box._super.render.call(this)) {\n          return;\n        }\n\n        if (options.get('raw')) {\n          if (options.get('showOutliers') && values.length > 5) {\n            loutlier = values[0];\n            lwhisker = values[1];\n            q1 = values[2];\n            q2 = values[3];\n            q3 = values[4];\n            rwhisker = values[5];\n            routlier = values[6];\n          } else {\n            lwhisker = values[0];\n            q1 = values[1];\n            q2 = values[2];\n            q3 = values[3];\n            rwhisker = values[4];\n          }\n        } else {\n          values.sort(function (a, b) {\n            return a - b;\n          });\n          q1 = quartile(values, 1);\n          q2 = quartile(values, 2);\n          q3 = quartile(values, 3);\n          iqr = q3 - q1;\n\n          if (options.get('showOutliers')) {\n            lwhisker = rwhisker = undefined;\n\n            for (i = 0; i < vlen; i++) {\n              if (lwhisker === undefined && values[i] > q1 - iqr * options.get('outlierIQR')) {\n                lwhisker = values[i];\n              }\n\n              if (values[i] < q3 + iqr * options.get('outlierIQR')) {\n                rwhisker = values[i];\n              }\n            }\n\n            loutlier = values[0];\n            routlier = values[vlen - 1];\n          } else {\n            lwhisker = values[0];\n            rwhisker = values[vlen - 1];\n          }\n        }\n\n        this.quartiles = [q1, q2, q3];\n        this.lwhisker = lwhisker;\n        this.rwhisker = rwhisker;\n        this.loutlier = loutlier;\n        this.routlier = routlier;\n        unitSize = canvasWidth / (maxValue - minValue + 1);\n\n        if (options.get('showOutliers')) {\n          canvasLeft = Math.ceil(options.get('spotRadius'));\n          canvasWidth -= 2 * Math.ceil(options.get('spotRadius'));\n          unitSize = canvasWidth / (maxValue - minValue + 1);\n\n          if (loutlier < lwhisker) {\n            target.drawCircle((loutlier - minValue) * unitSize + canvasLeft, canvasHeight / 2, options.get('spotRadius'), options.get('outlierLineColor'), options.get('outlierFillColor')).append();\n          }\n\n          if (routlier > rwhisker) {\n            target.drawCircle((routlier - minValue) * unitSize + canvasLeft, canvasHeight / 2, options.get('spotRadius'), options.get('outlierLineColor'), options.get('outlierFillColor')).append();\n          }\n        } // box\n\n\n        target.drawRect(Math.round((q1 - minValue) * unitSize + canvasLeft), Math.round(canvasHeight * 0.1), Math.round((q3 - q1) * unitSize), Math.round(canvasHeight * 0.8), options.get('boxLineColor'), options.get('boxFillColor')).append(); // left whisker\n\n        target.drawLine(Math.round((lwhisker - minValue) * unitSize + canvasLeft), Math.round(canvasHeight / 2), Math.round((q1 - minValue) * unitSize + canvasLeft), Math.round(canvasHeight / 2), options.get('lineColor')).append();\n        target.drawLine(Math.round((lwhisker - minValue) * unitSize + canvasLeft), Math.round(canvasHeight / 4), Math.round((lwhisker - minValue) * unitSize + canvasLeft), Math.round(canvasHeight - canvasHeight / 4), options.get('whiskerColor')).append(); // right whisker\n\n        target.drawLine(Math.round((rwhisker - minValue) * unitSize + canvasLeft), Math.round(canvasHeight / 2), Math.round((q3 - minValue) * unitSize + canvasLeft), Math.round(canvasHeight / 2), options.get('lineColor')).append();\n        target.drawLine(Math.round((rwhisker - minValue) * unitSize + canvasLeft), Math.round(canvasHeight / 4), Math.round((rwhisker - minValue) * unitSize + canvasLeft), Math.round(canvasHeight - canvasHeight / 4), options.get('whiskerColor')).append(); // median line\n\n        target.drawLine(Math.round((q2 - minValue) * unitSize + canvasLeft), Math.round(canvasHeight * 0.1), Math.round((q2 - minValue) * unitSize + canvasLeft), Math.round(canvasHeight * 0.9), options.get('medianColor')).append();\n\n        if (options.get('target')) {\n          size = Math.ceil(options.get('spotRadius'));\n          target.drawLine(Math.round((options.get('target') - minValue) * unitSize + canvasLeft), Math.round(canvasHeight / 2 - size), Math.round((options.get('target') - minValue) * unitSize + canvasLeft), Math.round(canvasHeight / 2 + size), options.get('targetColor')).append();\n          target.drawLine(Math.round((options.get('target') - minValue) * unitSize + canvasLeft - size), Math.round(canvasHeight / 2), Math.round((options.get('target') - minValue) * unitSize + canvasLeft + size), Math.round(canvasHeight / 2), options.get('targetColor')).append();\n        }\n\n        target.render();\n      }\n    }); // Setup a very simple \"virtual canvas\" to make drawing the few shapes we need easier\n    // This is accessible as $(foo).simpledraw()\n\n    VShape = createClass({\n      init: function init(target, id, type, args) {\n        this.target = target;\n        this.id = id;\n        this.type = type;\n        this.args = args;\n      },\n      append: function append() {\n        this.target.appendShape(this);\n        return this;\n      }\n    });\n    VCanvas_base = createClass({\n      _pxregex: /(\\d+)(px)?\\s*$/i,\n      init: function init(width, height, target) {\n        if (!width) {\n          return;\n        }\n\n        this.width = width;\n        this.height = height;\n        this.target = target;\n        this.lastShapeId = null;\n\n        if (target[0]) {\n          target = target[0];\n        }\n\n        $.data(target, '_jqs_vcanvas', this);\n      },\n      drawLine: function drawLine(x1, y1, x2, y2, lineColor, lineWidth) {\n        return this.drawShape([[x1, y1], [x2, y2]], lineColor, lineWidth);\n      },\n      drawShape: function drawShape(path, lineColor, fillColor, lineWidth) {\n        return this._genShape('Shape', [path, lineColor, fillColor, lineWidth]);\n      },\n      drawCircle: function drawCircle(x, y, radius, lineColor, fillColor, lineWidth) {\n        return this._genShape('Circle', [x, y, radius, lineColor, fillColor, lineWidth]);\n      },\n      drawPieSlice: function drawPieSlice(x, y, radius, startAngle, endAngle, lineColor, fillColor) {\n        return this._genShape('PieSlice', [x, y, radius, startAngle, endAngle, lineColor, fillColor]);\n      },\n      drawRect: function drawRect(x, y, width, height, lineColor, fillColor) {\n        return this._genShape('Rect', [x, y, width, height, lineColor, fillColor]);\n      },\n      getElement: function getElement() {\n        return this.canvas;\n      },\n\n      /**\n       * Return the most recently inserted shape id\n       */\n      getLastShapeId: function getLastShapeId() {\n        return this.lastShapeId;\n      },\n\n      /**\n       * Clear and reset the canvas\n       */\n      reset: function reset() {\n        alert('reset not implemented');\n      },\n      _insert: function _insert(el, target) {\n        $(target).html(el);\n      },\n\n      /**\n       * Calculate the pixel dimensions of the canvas\n       */\n      _calculatePixelDims: function _calculatePixelDims(width, height, canvas) {\n        // XXX This should probably be a configurable option\n        var match;\n        match = this._pxregex.exec(height);\n\n        if (match) {\n          this.pixelHeight = match[1];\n        } else {\n          this.pixelHeight = $(canvas).height();\n        }\n\n        match = this._pxregex.exec(width);\n\n        if (match) {\n          this.pixelWidth = match[1];\n        } else {\n          this.pixelWidth = $(canvas).width();\n        }\n      },\n\n      /**\n       * Generate a shape object and id for later rendering\n       */\n      _genShape: function _genShape(shapetype, shapeargs) {\n        var id = shapeCount++;\n        shapeargs.unshift(id);\n        return new VShape(this, id, shapetype, shapeargs);\n      },\n\n      /**\n       * Add a shape to the end of the render queue\n       */\n      appendShape: function appendShape(shape) {\n        alert('appendShape not implemented');\n      },\n\n      /**\n       * Replace one shape with another\n       */\n      replaceWithShape: function replaceWithShape(shapeid, shape) {\n        alert('replaceWithShape not implemented');\n      },\n\n      /**\n       * Insert one shape after another in the render queue\n       */\n      insertAfterShape: function insertAfterShape(shapeid, shape) {\n        alert('insertAfterShape not implemented');\n      },\n\n      /**\n       * Remove a shape from the queue\n       */\n      removeShapeId: function removeShapeId(shapeid) {\n        alert('removeShapeId not implemented');\n      },\n\n      /**\n       * Find a shape at the specified x/y co-ordinates\n       */\n      getShapeAt: function getShapeAt(el, x, y) {\n        alert('getShapeAt not implemented');\n      },\n\n      /**\n       * Render all queued shapes onto the canvas\n       */\n      render: function render() {\n        alert('render not implemented');\n      }\n    });\n    VCanvas_canvas = createClass(VCanvas_base, {\n      init: function init(width, height, target, interact) {\n        VCanvas_canvas._super.init.call(this, width, height, target);\n\n        this.canvas = document.createElement('canvas');\n\n        if (target[0]) {\n          target = target[0];\n        }\n\n        $.data(target, '_jqs_vcanvas', this);\n        $(this.canvas).css({\n          display: 'inline-block',\n          width: width,\n          height: height,\n          verticalAlign: 'top'\n        });\n\n        this._insert(this.canvas, target);\n\n        this._calculatePixelDims(width, height, this.canvas);\n\n        this.canvas.width = this.pixelWidth;\n        this.canvas.height = this.pixelHeight;\n        this.interact = interact;\n        this.shapes = {};\n        this.shapeseq = [];\n        this.currentTargetShapeId = undefined;\n        $(this.canvas).css({\n          width: this.pixelWidth,\n          height: this.pixelHeight\n        });\n      },\n      _getContext: function _getContext(lineColor, fillColor, lineWidth) {\n        var context = this.canvas.getContext('2d');\n\n        if (lineColor !== undefined) {\n          context.strokeStyle = lineColor;\n        }\n\n        context.lineWidth = lineWidth === undefined ? 1 : lineWidth;\n\n        if (fillColor !== undefined) {\n          context.fillStyle = fillColor;\n        }\n\n        return context;\n      },\n      reset: function reset() {\n        var context = this._getContext();\n\n        context.clearRect(0, 0, this.pixelWidth, this.pixelHeight);\n        this.shapes = {};\n        this.shapeseq = [];\n        this.currentTargetShapeId = undefined;\n      },\n      _drawShape: function _drawShape(shapeid, path, lineColor, fillColor, lineWidth) {\n        var context = this._getContext(lineColor, fillColor, lineWidth),\n            i,\n            plen;\n\n        context.beginPath();\n        context.moveTo(path[0][0] + 0.5, path[0][1] + 0.5);\n\n        for (i = 1, plen = path.length; i < plen; i++) {\n          context.lineTo(path[i][0] + 0.5, path[i][1] + 0.5); // the 0.5 offset gives us crisp pixel-width lines\n        }\n\n        if (lineColor !== undefined) {\n          context.stroke();\n        }\n\n        if (fillColor !== undefined) {\n          context.fill();\n        }\n\n        if (this.targetX !== undefined && this.targetY !== undefined && context.isPointInPath(this.targetX, this.targetY)) {\n          this.currentTargetShapeId = shapeid;\n        }\n      },\n      _drawCircle: function _drawCircle(shapeid, x, y, radius, lineColor, fillColor, lineWidth) {\n        var context = this._getContext(lineColor, fillColor, lineWidth);\n\n        context.beginPath();\n        context.arc(x, y, radius, 0, 2 * Math.PI, false);\n\n        if (this.targetX !== undefined && this.targetY !== undefined && context.isPointInPath(this.targetX, this.targetY)) {\n          this.currentTargetShapeId = shapeid;\n        }\n\n        if (lineColor !== undefined) {\n          context.stroke();\n        }\n\n        if (fillColor !== undefined) {\n          context.fill();\n        }\n      },\n      _drawPieSlice: function _drawPieSlice(shapeid, x, y, radius, startAngle, endAngle, lineColor, fillColor) {\n        var context = this._getContext(lineColor, fillColor);\n\n        context.beginPath();\n        context.moveTo(x, y);\n        context.arc(x, y, radius, startAngle, endAngle, false);\n        context.lineTo(x, y);\n        context.closePath();\n\n        if (lineColor !== undefined) {\n          context.stroke();\n        }\n\n        if (fillColor) {\n          context.fill();\n        }\n\n        if (this.targetX !== undefined && this.targetY !== undefined && context.isPointInPath(this.targetX, this.targetY)) {\n          this.currentTargetShapeId = shapeid;\n        }\n      },\n      _drawRect: function _drawRect(shapeid, x, y, width, height, lineColor, fillColor) {\n        return this._drawShape(shapeid, [[x, y], [x + width, y], [x + width, y + height], [x, y + height], [x, y]], lineColor, fillColor);\n      },\n      appendShape: function appendShape(shape) {\n        this.shapes[shape.id] = shape;\n        this.shapeseq.push(shape.id);\n        this.lastShapeId = shape.id;\n        return shape.id;\n      },\n      replaceWithShape: function replaceWithShape(shapeid, shape) {\n        var shapeseq = this.shapeseq,\n            i;\n        this.shapes[shape.id] = shape;\n\n        for (i = shapeseq.length; i--;) {\n          if (shapeseq[i] == shapeid) {\n            shapeseq[i] = shape.id;\n          }\n        }\n\n        delete this.shapes[shapeid];\n      },\n      replaceWithShapes: function replaceWithShapes(shapeids, shapes) {\n        var shapeseq = this.shapeseq,\n            shapemap = {},\n            sid,\n            i,\n            first;\n\n        for (i = shapeids.length; i--;) {\n          shapemap[shapeids[i]] = true;\n        }\n\n        for (i = shapeseq.length; i--;) {\n          sid = shapeseq[i];\n\n          if (shapemap[sid]) {\n            shapeseq.splice(i, 1);\n            delete this.shapes[sid];\n            first = i;\n          }\n        }\n\n        for (i = shapes.length; i--;) {\n          shapeseq.splice(first, 0, shapes[i].id);\n          this.shapes[shapes[i].id] = shapes[i];\n        }\n      },\n      insertAfterShape: function insertAfterShape(shapeid, shape) {\n        var shapeseq = this.shapeseq,\n            i;\n\n        for (i = shapeseq.length; i--;) {\n          if (shapeseq[i] === shapeid) {\n            shapeseq.splice(i + 1, 0, shape.id);\n            this.shapes[shape.id] = shape;\n            return;\n          }\n        }\n      },\n      removeShapeId: function removeShapeId(shapeid) {\n        var shapeseq = this.shapeseq,\n            i;\n\n        for (i = shapeseq.length; i--;) {\n          if (shapeseq[i] === shapeid) {\n            shapeseq.splice(i, 1);\n            break;\n          }\n        }\n\n        delete this.shapes[shapeid];\n      },\n      getShapeAt: function getShapeAt(el, x, y) {\n        this.targetX = x;\n        this.targetY = y;\n        this.render();\n        return this.currentTargetShapeId;\n      },\n      render: function render() {\n        var shapeseq = this.shapeseq,\n            shapes = this.shapes,\n            shapeCount = shapeseq.length,\n            context = this._getContext(),\n            shapeid,\n            shape,\n            i;\n\n        context.clearRect(0, 0, this.pixelWidth, this.pixelHeight);\n\n        for (i = 0; i < shapeCount; i++) {\n          shapeid = shapeseq[i];\n          shape = shapes[shapeid];\n          this['_draw' + shape.type].apply(this, shape.args);\n        }\n\n        if (!this.interact) {\n          // not interactive so no need to keep the shapes array\n          this.shapes = {};\n          this.shapeseq = [];\n        }\n      }\n    });\n    VCanvas_vml = createClass(VCanvas_base, {\n      init: function init(width, height, target) {\n        var groupel;\n\n        VCanvas_vml._super.init.call(this, width, height, target);\n\n        if (target[0]) {\n          target = target[0];\n        }\n\n        $.data(target, '_jqs_vcanvas', this);\n        this.canvas = document.createElement('span');\n        $(this.canvas).css({\n          display: 'inline-block',\n          position: 'relative',\n          overflow: 'hidden',\n          width: width,\n          height: height,\n          margin: '0px',\n          padding: '0px',\n          verticalAlign: 'top'\n        });\n\n        this._insert(this.canvas, target);\n\n        this._calculatePixelDims(width, height, this.canvas);\n\n        this.canvas.width = this.pixelWidth;\n        this.canvas.height = this.pixelHeight;\n        groupel = '<v:group coordorigin=\"0 0\" coordsize=\"' + this.pixelWidth + ' ' + this.pixelHeight + '\"' + ' style=\"position:absolute;top:0;left:0;width:' + this.pixelWidth + 'px;height=' + this.pixelHeight + 'px;\"></v:group>';\n        this.canvas.insertAdjacentHTML('beforeEnd', groupel);\n        this.group = $(this.canvas).children()[0];\n        this.rendered = false;\n        this.prerender = '';\n      },\n      _drawShape: function _drawShape(shapeid, path, lineColor, fillColor, lineWidth) {\n        var vpath = [],\n            initial,\n            stroke,\n            fill,\n            closed,\n            vel,\n            plen,\n            i;\n\n        for (i = 0, plen = path.length; i < plen; i++) {\n          vpath[i] = '' + path[i][0] + ',' + path[i][1];\n        }\n\n        initial = vpath.splice(0, 1);\n        lineWidth = lineWidth === undefined ? 1 : lineWidth;\n        stroke = lineColor === undefined ? ' stroked=\"false\" ' : ' strokeWeight=\"' + lineWidth + 'px\" strokeColor=\"' + lineColor + '\" ';\n        fill = fillColor === undefined ? ' filled=\"false\"' : ' fillColor=\"' + fillColor + '\" filled=\"true\" ';\n        closed = vpath[0] === vpath[vpath.length - 1] ? 'x ' : '';\n        vel = '<v:shape coordorigin=\"0 0\" coordsize=\"' + this.pixelWidth + ' ' + this.pixelHeight + '\" ' + ' id=\"jqsshape' + shapeid + '\" ' + stroke + fill + ' style=\"position:absolute;left:0px;top:0px;height:' + this.pixelHeight + 'px;width:' + this.pixelWidth + 'px;padding:0px;margin:0px;\" ' + ' path=\"m ' + initial + ' l ' + vpath.join(', ') + ' ' + closed + 'e\">' + ' </v:shape>';\n        return vel;\n      },\n      _drawCircle: function _drawCircle(shapeid, x, y, radius, lineColor, fillColor, lineWidth) {\n        var stroke, fill, vel;\n        x -= radius;\n        y -= radius;\n        stroke = lineColor === undefined ? ' stroked=\"false\" ' : ' strokeWeight=\"' + lineWidth + 'px\" strokeColor=\"' + lineColor + '\" ';\n        fill = fillColor === undefined ? ' filled=\"false\"' : ' fillColor=\"' + fillColor + '\" filled=\"true\" ';\n        vel = '<v:oval ' + ' id=\"jqsshape' + shapeid + '\" ' + stroke + fill + ' style=\"position:absolute;top:' + y + 'px; left:' + x + 'px; width:' + radius * 2 + 'px; height:' + radius * 2 + 'px\"></v:oval>';\n        return vel;\n      },\n      _drawPieSlice: function _drawPieSlice(shapeid, x, y, radius, startAngle, endAngle, lineColor, fillColor) {\n        var vpath, startx, starty, endx, endy, stroke, fill, vel;\n\n        if (startAngle === endAngle) {\n          return ''; // VML seems to have problem when start angle equals end angle.\n        }\n\n        if (endAngle - startAngle === 2 * Math.PI) {\n          startAngle = 0.0; // VML seems to have a problem when drawing a full circle that doesn't start 0\n\n          endAngle = 2 * Math.PI;\n        }\n\n        startx = x + Math.round(Math.cos(startAngle) * radius);\n        starty = y + Math.round(Math.sin(startAngle) * radius);\n        endx = x + Math.round(Math.cos(endAngle) * radius);\n        endy = y + Math.round(Math.sin(endAngle) * radius);\n\n        if (startx === endx && starty === endy) {\n          if (endAngle - startAngle < Math.PI) {\n            // Prevent very small slices from being mistaken as a whole pie\n            return '';\n          } // essentially going to be the entire circle, so ignore startAngle\n\n\n          startx = endx = x + radius;\n          starty = endy = y;\n        }\n\n        if (startx === endx && starty === endy && endAngle - startAngle < Math.PI) {\n          return '';\n        }\n\n        vpath = [x - radius, y - radius, x + radius, y + radius, startx, starty, endx, endy];\n        stroke = lineColor === undefined ? ' stroked=\"false\" ' : ' strokeWeight=\"1px\" strokeColor=\"' + lineColor + '\" ';\n        fill = fillColor === undefined ? ' filled=\"false\"' : ' fillColor=\"' + fillColor + '\" filled=\"true\" ';\n        vel = '<v:shape coordorigin=\"0 0\" coordsize=\"' + this.pixelWidth + ' ' + this.pixelHeight + '\" ' + ' id=\"jqsshape' + shapeid + '\" ' + stroke + fill + ' style=\"position:absolute;left:0px;top:0px;height:' + this.pixelHeight + 'px;width:' + this.pixelWidth + 'px;padding:0px;margin:0px;\" ' + ' path=\"m ' + x + ',' + y + ' wa ' + vpath.join(', ') + ' x e\">' + ' </v:shape>';\n        return vel;\n      },\n      _drawRect: function _drawRect(shapeid, x, y, width, height, lineColor, fillColor) {\n        return this._drawShape(shapeid, [[x, y], [x, y + height], [x + width, y + height], [x + width, y], [x, y]], lineColor, fillColor);\n      },\n      reset: function reset() {\n        this.group.innerHTML = '';\n      },\n      appendShape: function appendShape(shape) {\n        var vel = this['_draw' + shape.type].apply(this, shape.args);\n\n        if (this.rendered) {\n          this.group.insertAdjacentHTML('beforeEnd', vel);\n        } else {\n          this.prerender += vel;\n        }\n\n        this.lastShapeId = shape.id;\n        return shape.id;\n      },\n      replaceWithShape: function replaceWithShape(shapeid, shape) {\n        var existing = $('#jqsshape' + shapeid),\n            vel = this['_draw' + shape.type].apply(this, shape.args);\n        existing[0].outerHTML = vel;\n      },\n      replaceWithShapes: function replaceWithShapes(shapeids, shapes) {\n        // replace the first shapeid with all the new shapes then toast the remaining old shapes\n        var existing = $('#jqsshape' + shapeids[0]),\n            replace = '',\n            slen = shapes.length,\n            i;\n\n        for (i = 0; i < slen; i++) {\n          replace += this['_draw' + shapes[i].type].apply(this, shapes[i].args);\n        }\n\n        existing[0].outerHTML = replace;\n\n        for (i = 1; i < shapeids.length; i++) {\n          $('#jqsshape' + shapeids[i]).remove();\n        }\n      },\n      insertAfterShape: function insertAfterShape(shapeid, shape) {\n        var existing = $('#jqsshape' + shapeid),\n            vel = this['_draw' + shape.type].apply(this, shape.args);\n        existing[0].insertAdjacentHTML('afterEnd', vel);\n      },\n      removeShapeId: function removeShapeId(shapeid) {\n        var existing = $('#jqsshape' + shapeid);\n        this.group.removeChild(existing[0]);\n      },\n      getShapeAt: function getShapeAt(el, x, y) {\n        var shapeid = el.id.substr(8);\n        return shapeid;\n      },\n      render: function render() {\n        if (!this.rendered) {\n          // batch the intial render into a single repaint\n          this.group.innerHTML = this.prerender;\n          this.rendered = true;\n        }\n      }\n    });\n  });\n})(document, Math);"],"sourceRoot":"/source/"}