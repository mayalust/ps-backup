{"version":3,"sources":["toolkit/configure/marker.js"],"names":["define","d3","init","tg","option","svg","select","defs","title","wrap","selectAll","append","path","pathShadow","insturctionWrap","text","hitArea","events","marker","id","config","color1","color2","type","x1","y1","x2","r","fx","fy","offset1","offset2","linearGradient","y2","attr","style","on","event","prototype","setAlarmStatus","status","color","color3D","eventName","callback","setPos","pos","x","y"],"mappings":"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","file":"toolkit/configure/marker.js","sourcesContent":["/**\n * Created by leonlin on 16/11/3.\n */\ndefine(['d3'], function (d3) {\n  return {\n    init: function init(tg, option) {\n      var svg = d3.select(tg);\n      var defs = svg.select(\"defs\");\n      var title = option.title;\n      var viewport = svg.selectAll(\".viewport\");\n      var wrap = viewport.append(\"g\");\n      var path = wrap.append(\"path\");\n      var pathShadow = wrap.append(\"path\");\n      var insturctionWrap = wrap.append(\"path\");\n      var text = wrap.append(\"text\");\n      var hitArea = wrap.append(\"rect\");\n      var events = {};\n\n      var creatGradient = function creatGradient(id, config) {\n        var color1 = config.color1 || \"#000\";\n        var color2 = config.color2 || \"#fff\";\n        var type = config.type || \"linearGradient\";\n        var x1 = config.x1 || \"0%\";\n        var y1 = config.y1 || \"0%\";\n        var x2 = config.x2 || \"100%\";\n        var y2 = config.y2 || \"0%\";\n        var r = config.r;\n        var fx = config.fx;\n        var fy = config.fy;\n        var offset1 = config.offset1 || \"0%\";\n        var offset2 = config.offset2 || \"100%\";\n        var linearGradient = defs.append(type).attr(\"id\", id).attr(\"x1\", x1).attr(\"y1\", y1).attr(\"x2\", x2).attr(\"r\", r).attr(\"fx\", fx).attr(\"fy\", fy);\n        var stop1 = linearGradient.append(\"stop\").attr(\"offset\", offset1).style(\"stop-color\", color1);\n        var stop2 = linearGradient.append(\"stop\").attr(\"offset\", offset2).style(\"stop-color\", color2);\n      };\n\n      var setAttr = function setAttr(config) {\n        var cur = this;\n\n        for (var i in config) {\n          cur.attr(i, config[i]);\n        }\n      };\n\n      var setStyle = function setStyle(config) {\n        var cur = this;\n\n        for (var i in config) {\n          cur.style(i, config[i]);\n        }\n      };\n\n      function marker() {\n        creatGradient(\"markerGradient\", {\n          type: \"radialGradient\",\n          color1: \"rgba(0,0,0,0)\",\n          color2: \"rgba(0,0,0,.7)\",\n          x1: \"50%\",\n          x2: \"0%\",\n          r: \"100%\",\n          fx: \"50%\",\n          fy: \"100%\"\n        });\n        path.attr(\"d\", \"M99.8,0C59.4,0,26.7,33.5,26.7,74.8c0,41.3,73.2,124.7,73.2,124.7S173,116.2,173,74.8C173,33.5,140.2,0,99.8,0z M99.8,106c-20.2,0-36.6-16.7-36.6-37.4c0-20.7,16.4-37.4,36.6-37.4s36.6,16.8,36.6,37.4C136.4,89.3,120,106,99.8,106z\");\n        path.attr(\"transform\", \"scale(.2.2)\");\n        path.attr(\"stroke-width\", \"10px\");\n        path.attr(\"stroke\", \"#fff\");\n        pathShadow.attr(\"d\", \"M99.8,0C59.4,0,26.7,33.5,26.7,74.8c0,41.3,73.2,124.7,73.2,124.7S173,116.2,173,74.8C173,33.5,140.2,0,99.8,0z M99.8,106c-20.2,0-36.6-16.7-36.6-37.4c0-20.7,16.4-37.4,36.6-37.4s36.6,16.8,36.6,37.4C136.4,89.3,120,106,99.8,106z\");\n        pathShadow.attr(\"transform\", \"scale(.2.2)\");\n        pathShadow.attr(\"stroke-width\", \"10px\");\n        pathShadow.attr(\"fill\", \"url(#markerGradient)\");\n        insturctionWrap.attr(\"d\", \"M0,0L100,0L100,30L60,30L50,40L40,30L0,30L0,0\");\n        insturctionWrap.attr(\"transform\", \"translate(-30, -45)\");\n        insturctionWrap.style(\"fill\", \"rgba(8,24,97,.7)\");\n        insturctionWrap.attr(\"stroke-width\", \"2px\");\n        insturctionWrap.attr(\"stroke\", \"#fff\");\n        text.attr(\"transform\", \"translate(20, -26)\");\n        text.attr(\"font-weight\", \"bold\");\n        text.text(title);\n        text.style(\"fill\", \"#fff\");\n        text.attr(\"text-anchor\", \"middle\");\n        hitArea.attr(\"width\", \"100px\");\n        hitArea.attr(\"height\", \"100px\");\n        hitArea.attr(\"opacity\", 0);\n        hitArea.attr(\"transform\", \"translate(-30, -50)\");\n        hitArea.style(\"cursor\", \"pointer\");\n        hitArea.on(\"click\", function (event) {\n          if (events['click']) {\n            events['click'](event);\n          }\n        });\n      }\n\n      ;\n\n      marker.prototype.setAlarmStatus = function (status) {\n        var color = \"\";\n        var color3D = \"\";\n\n        switch (status) {\n          case 4:\n            color = \"#e74e53\";\n            color3D = \"rgba(72,13,8,.7)\";\n            break;\n\n          case 3:\n            color = \"#ee6b1c\";\n            color3D = \"rgba(72,13,8,.7)\";\n            break;\n\n          case 2:\n            color = \"#ece417\";\n            color3D = \"rgba(94,86,6,.7)\";\n            break;\n\n          case 1:\n            color = \"#00bc79\";\n            color3D = \"rgba(11,86,64,.7)\";\n            break;\n\n          default:\n            color = \"#00bc79\";\n            color3D = \"rgba(11,86,64,.7)\";\n            break;\n        }\n\n        path.attr(\"fill\", color);\n        insturctionWrap.style(\"fill\", color3D);\n      };\n\n      marker.prototype.on = function (eventName, callback) {\n        events[eventName] = callback;\n      };\n\n      marker.prototype.setPos = function (pos) {\n        wrap.attr(\"transform\", \"translate(\" + pos.x + \",\" + pos.y + \")\");\n      };\n\n      return new marker(tg);\n    }\n  };\n});"],"sourceRoot":"/source/"}