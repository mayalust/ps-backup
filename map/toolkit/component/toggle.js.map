{"version":3,"sources":["toolkit/component/toggle.js"],"names":["define","data","expression","element","previewMode","innerContent","$","$$","runExpression","$attr","funRes","code","Error","message","fnResult","global","wrap","growl","addClass","inner","append","customevents","ready","dom","events","addEvent","event","handler","on","evt","jquery","tools","ui","i","addEvents","initFn","render","removeClass","hasClass","toggle","target","e","style","css"],"mappings":"AAGAA,OAAO,GAAI,WACT,OAAO,SAAUC,GACf,IAGIC,EAHAC,EAAUF,EAAKE,QACfC,EAAcH,EAAKG,YACnBC,EAAeC,EAAE,eAErBC,GAAGC,cAAcL,EAAQM,MAAM,sBAAuB,SAAUC,GAC9D,GAAmB,KAAfA,EAAOC,KAWT,MAAM,IAAIC,MAAMF,EAAOG,SAVvB,IAAIC,EAAWJ,EAAOT,KAQtBC,GALEA,EADqB,mBAAZY,EACIA,EAASb,GAETa,IAGwB,KAK3C,IAAIC,EAASd,EAAKc,OAEdC,GADQf,EAAKgB,MACNX,EAAE,eAAeY,SAAS,gBACjCC,EAAQb,EAAE,eAAeY,SAAS,gBACtCF,EAAKI,OAAOD,GACZ,IAAIE,EAAe,CACjBC,MAAO,UAGO,SAAmBC,EAAKC,GACtC,IAAIC,EAAW,SAAkBC,EAAOC,GAClCN,EAAaK,GACfL,EAAaK,GAASC,EAEtBJ,EAAIK,GAAGF,EAAO,SAAUG,GACtBF,EAAQ,CACNG,OAAQD,EACRd,OAAQA,EACRgB,MAAO9B,EACP+B,GAAI7B,OAMZ,IAAK,IAAI8B,KAAKT,EACZC,EAASQ,EAAGT,EAAOS,IAMvBC,CAAU7B,EAAcH,EAAWO,MAAM,OACzCJ,EAAae,OAAOJ,GACpB,IAAImB,EAASjC,EAAWO,MAAM,WAE1B2B,EAAS,SAAgBnC,GACtBA,GAAgB,GAARA,EAAwCe,EAAKqB,YAAY,UAA9CrB,EAAKE,SAAS,UAElCd,GACFY,EAAKY,GAAG,QAAS,SAAUF,GACrBV,EAAKsB,SAAS,WAChBnC,EAAQoC,OAAS,EACjBvB,EAAKqB,YAAY,YAEjBlC,EAAQoC,OAAS,EACjBvB,EAAKE,SAAS,cAQtB,GAFAf,EAAQiC,OAASA,EAEbD,EACF,IACEA,EAAO,CACLK,OAAQrC,IAEV,MAAOsC,QAMwB,mBAAtBpB,EAAaC,MACtBD,EAAaC,MAAM,CACjBkB,OAAQrC,EACRY,OAAQA,EACRgB,MAAO9B,EACP+B,GAAI7B,IAGNiC,IAaJ,OALIjC,EAAQuC,OACVrC,EAAasC,IAAIxC,EAAQuC,OAIpBrC","file":"toolkit/component/toggle.js","sourcesContent":["/**\n * Created by leonlin on 16/11/3.\n */\ndefine([], function () {\n  return function (data) {\n    var element = data.element;\n    var previewMode = data.previewMode;\n    var innerContent = $(\"<div></div>\");\n    var expression;\n    $$.runExpression(element.$attr(\"advance/expression\"), function (funRes) {\n      if (funRes.code == \"0\") {\n        var fnResult = funRes.data;\n\n        if (typeof fnResult == 'function') {\n          expression = fnResult(data);\n        } else {\n          expression = fnResult;\n        }\n\n        expression = expression ? expression : {};\n      } else {\n        throw new Error(funRes.message);\n      }\n    });\n    var global = data.global;\n    var growl = data.growl;\n    var wrap = $(\"<div></div>\").addClass(\"toggle-wrap\");\n    var inner = $(\"<div></div>\").addClass(\"toggle-inner\");\n    wrap.append(inner);\n    var customevents = {\n      ready: \"ready\"\n    };\n\n    var addEvents = function addEvents(dom, events) {\n      var addEvent = function addEvent(event, handler) {\n        if (customevents[event]) {\n          customevents[event] = handler;\n        } else {\n          dom.on(event, function (evt) {\n            handler({\n              jquery: evt,\n              global: global,\n              tools: data,\n              ui: element\n            });\n          });\n        }\n      };\n\n      for (var i in events) {\n        addEvent(i, events[i]);\n      }\n\n      ;\n    };\n\n    addEvents(innerContent, expression.$attr(\"on\"));\n    innerContent.append(wrap);\n    var initFn = expression.$attr(\"on/init\");\n\n    var render = function render(data) {\n      if (!data || data == 0) wrap.addClass(\"active\");else wrap.removeClass(\"active\");\n\n      if (previewMode) {\n        wrap.on(\"click\", function (event) {\n          if (wrap.hasClass(\"active\")) {\n            element.toggle = 1;\n            wrap.removeClass(\"active\");\n          } else {\n            element.toggle = 0;\n            wrap.addClass(\"active\");\n          }\n        });\n      }\n    };\n\n    element.render = render;\n\n    if (initFn) {\n      try {\n        initFn({\n          target: element\n        });\n      } catch (e) {\n        ;\n      }\n\n      ;\n    } else {\n      if (typeof customevents.ready == \"function\") {\n        customevents.ready({\n          target: element,\n          global: global,\n          tools: data,\n          ui: element\n        });\n      } else {\n        render();\n      }\n\n      ;\n    }\n\n    ;\n\n    if (element.style) {\n      innerContent.css(element.style);\n    }\n\n    ;\n    return innerContent;\n  };\n});"],"sourceRoot":"/source/"}