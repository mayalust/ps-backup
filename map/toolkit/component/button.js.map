{"version":3,"sources":["toolkit/component/button.js"],"names":["define","data","expression","element","wholeJSON","global","growl","innerContent","$","t","$attr","text","css","icon","addClass","i","parameters","perfix","wholeData","parent","style","$$","runExpression","funRes","code","Error","message","fnResult","refineDataStructure","call","copyToClipboard","attr","JSON","stringify","loadExternalJs","ZeroClipboard","client","on","readyEvent","event","success","append","clickFn","target","ui","e"],"mappings":"AAGAA,OAAO,GAAI,WACT,OAAO,SAAUC,GAYf,IAXA,IAsBIC,EAtBAC,EAAUF,EAAKE,QACfC,EAAYH,EAAKG,UACjBC,EAASJ,EAAKI,OACdC,EAAQL,EAAKK,MACbC,EAAeC,EAAE,6CACjBC,EAAIN,EAAQO,MAAM,mBAClBC,EAAOH,EAAE,iBAAiBG,KAAKF,GAAGG,IAAI,cAAe,OACrDC,EAAOL,EAAE,iBAAiBM,SAAS,QACnCC,EAAIP,EAAE,WAAWM,SAASX,EAAQa,WAAWH,KAAKI,OAAS,IAAMd,EAAQa,WAAWH,KAAKD,KAAKA,IAAI,YAAa,QAAQA,IAAI,iBAAkB,QAC7IM,EAAYd,EAETA,EAAUe,QACfD,EAAYA,EAAUC,OAKpBhB,EAAQiB,OACVb,EAAaK,IAAIT,EAAQiB,OAK3BC,GAAGC,cAAcnB,EAAQO,MAAM,sBAAuB,SAAUa,GAC9D,GAAmB,KAAfA,EAAOC,KAWT,MAAM,IAAIC,MAAMF,EAAOG,SAVvB,IAAIC,EAAWJ,EAAOtB,KAQtBC,GALEA,EADqB,mBAAZyB,EACIA,EAAS1B,GAET0B,IAGwB,KAK3CN,GAAGO,oBAAoBC,KAAKX,GAEM,GAA9BhB,EAAW4B,kBACbvB,EAAawB,KAAK,sBAAuBC,KAAKC,UAAU7B,EAAW,KAAM,IACzEiB,GAAGa,eAAe,CAAC,iBAAkB,SAAUC,GAC7C,IAAIC,EAAS,IAAID,EAAc5B,EAAa,IAC5C6B,EAAOC,GAAG,QAAS,SAAUC,GAC3BF,EAAOC,GAAG,YAAa,SAAUE,GAC/BjC,EAAMkC,QAAQ,mBAOtB3B,EAAK4B,OAAO1B,GACZR,EAAakC,OAAO5B,GACpBN,EAAakC,OAAO9B,GACpB,IAAI+B,EAAUxC,EAAWQ,MAAM,YAiB/B,OAhBAH,EAAa8B,GAAG,QAAS,SAAUE,GACjC,GAAIG,EACF,IACEA,EAAQ,CACNC,OAAQxC,EACRA,QAASA,EACTE,OAAQA,EACRuC,GAAIL,IAEN,MAAOM,OAONtC","file":"toolkit/component/button.js","sourcesContent":["/**\n * Created by leonlin on 16/11/3.\n */\ndefine([], function () {\n  return function (data) {\n    var element = data.element;\n    var wholeJSON = data.wholeJSON;\n    var global = data.global;\n    var growl = data.growl;\n    var innerContent = $(\"<button class='btn btn-primary'></button>\");\n    var t = element.$attr(\"parameters/text\");\n    var text = $(\"<span></span>\").text(t).css(\"margin-left\", \"5px\");\n    var icon = $(\"<span></span>\").addClass(\"icon\");\n    var i = $(\"<i></i>\").addClass(element.parameters.icon.perfix + \" \" + element.parameters.icon.css).css(\"font-size\", \"18px\").css(\"pointer-events\", \"none\");\n    var wholeData = wholeJSON;\n\n    while (wholeJSON.parent) {\n      wholeData = wholeData.parent;\n    }\n\n    ;\n\n    if (element.style) {\n      innerContent.css(element.style);\n    }\n\n    ;\n    var expression;\n    $$.runExpression(element.$attr(\"advance/expression\"), function (funRes) {\n      if (funRes.code == \"0\") {\n        var fnResult = funRes.data;\n\n        if (typeof fnResult == 'function') {\n          expression = fnResult(data);\n        } else {\n          expression = fnResult;\n        }\n\n        expression = expression ? expression : {};\n      } else {\n        throw new Error(funRes.message);\n      }\n    });\n    $$.refineDataStructure.call(wholeData);\n\n    if (expression.copyToClipboard == true) {\n      innerContent.attr(\"data-clipboard-text\", JSON.stringify(wholeJSON, null, 2));\n      $$.loadExternalJs(['zeroclipboard'], function (ZeroClipboard) {\n        var client = new ZeroClipboard(innerContent[0]);\n        client.on(\"ready\", function (readyEvent) {\n          client.on(\"aftercopy\", function (event) {\n            growl.success(\"成功复制到剪切版\");\n          });\n        });\n      });\n    }\n\n    ;\n    icon.append(i);\n    innerContent.append(icon);\n    innerContent.append(text);\n    var clickFn = expression.$attr(\"on/click\");\n    innerContent.on(\"click\", function (event) {\n      if (clickFn) {\n        try {\n          clickFn({\n            target: element,\n            element: element,\n            global: global,\n            ui: event\n          });\n        } catch (e) {\n          ;\n        }\n\n        ;\n      }\n    });\n    return innerContent;\n  };\n});"],"sourceRoot":"/source/"}