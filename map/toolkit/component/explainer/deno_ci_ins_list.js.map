{"version":3,"sources":["toolkit/component/explainer/deno_ci_ins_list.js"],"names":["define","simulate","data","tools","callback","Info","nodesDes","kpisDes","instance","get","item","result","xAxis","i","indexOf","push","sort","loopNodeDes","node","loopKpisDes","kpi","obj","name","ci","label","value","map","elem","find","el","id","kpiCode","nodeId","getLegend","getxAxis","getSeries","itm"],"mappings":"AAGAA,OAAO,CAAC,YAAa,SAAUC,GAC7B,OAAO,SAAUC,EAAMC,EAAOC,GAC5B,IAAIC,EAAOF,EAAME,KACbC,EAAWH,EAAMG,SACjBC,EAAUJ,EAAMI,QACLJ,EAAMK,SACJL,EAAMF,SA2FvBI,EAAKI,IAAI,2BAzFU,WACjB,IAIyBC,EAJrBC,EAAS,GAETC,EAAQ,GAUZ,IAAK,IAAIC,KAAKX,EARWQ,EASlBR,EAAKW,IAR2B,GAAjCD,EAAME,QAAQJ,EAAKF,WACrBI,EAAMG,KAAKL,EAAKF,UAWpBI,EAAQA,EAAMI,OAEd,IAmCIC,EAAc,SAAqBC,GACrC,IAAIC,EAAc,SAAqBC,GACrC,IAAIC,EAAM,CACRC,KAAM,CACJC,GAAIL,EAAKM,MACTJ,IAAKA,EAAII,OAEXC,MAAOb,EAAMc,IAAI,SAAUC,GAIzB,OAHWzB,EAAK0B,KAAK,SAAUC,GAC7B,OAAOF,EAAKG,IAAMD,EAAGrB,SAASsB,IAAMD,EAAGE,SAAWX,EAAIU,IAAMD,EAAGG,QAAUd,EAAKY,QAKpFnB,EAAOI,KAAKM,IAGd,IAAK,IAAIR,KAAKN,EACZY,EAAYZ,EAAQM,KAIxB,IAAK,IAAIA,KAAKP,EACZW,EAAYX,EAASO,IAIvBT,EAAS,CACP6B,UA/Dc,WACd,OAAO1B,EAAQmB,IAAI,SAAUC,GAC3B,OAAOA,EAAKH,SA8DdU,SA1Da,WAYb,MAAO,CAACtB,IA+CRuB,UA5Cc,WACd,OAAOxB,EAAOe,IAAI,SAAUhB,GAC1B,IAAIW,EAAM,GAQV,OAPAA,EAAIC,KAAOZ,EAAKY,KAAKF,IACrBC,EAAInB,KAAOQ,EAAKe,MAAMC,IAAI,SAAUU,GAClC,MAAO,CACLd,KAAMc,EAAI5B,SAASgB,MACnBC,MAAOW,EAAIX,SAGRJ","file":"toolkit/component/explainer/deno_ci_ins_list.js","sourcesContent":["/**\n * Created by leonlin on 16/11/3.\n */\ndefine([\"simulate\"], function (simulate) {\n  return function (data, tools, callback) {\n    var Info = tools.Info;\n    var nodesDes = tools.nodesDes;\n    var kpisDes = tools.kpisDes;\n    var instance = tools.instance;\n    var simulateFn = tools.simulate;\n\n    var getInfo_back = function getInfo_back() {\n      var result = []; //var data = simulate(\"ci\", nodesDes, kpisDes, instance, simulateFn);\n\n      var xAxis = [];\n\n      var loop = function loop(item) {\n        if (xAxis.indexOf(item.instance) == -1) {\n          xAxis.push(item.instance);\n        }\n\n        ;\n      };\n\n      for (var i in data) {\n        loop(data[i]);\n      }\n\n      ;\n      xAxis = xAxis.sort();\n\n      var getLegend = function getLegend() {\n        return kpisDes.map(function (elem) {\n          return elem.label;\n        });\n      };\n\n      var getxAxis = function getxAxis() {\n        /**\n        var rs = xAxis.map(function(insObj){\n          var find = instance.find(function(ins){\n            return ins.label == insObj;\n          });\n          if(find){\n            return find.label;\n          } else {\n            return \"-\";\n          }\n        });*/\n        return [xAxis];\n      };\n\n      var getSeries = function getSeries() {\n        return result.map(function (item) {\n          var obj = {};\n          obj.name = item.name.kpi;\n          obj.data = item.value.map(function (itm) {\n            return {\n              name: itm.instance.label,\n              value: itm.value\n            };\n          });\n          return obj;\n        });\n      };\n\n      var loopNodeDes = function loopNodeDes(node) {\n        var loopKpisDes = function loopKpisDes(kpi) {\n          var obj = {\n            name: {\n              ci: node.label,\n              kpi: kpi.label\n            },\n            value: xAxis.map(function (elem) {\n              var find = data.find(function (el) {\n                return elem.id == el.instance.id && el.kpiCode == kpi.id && el.nodeId == node.id;\n              });\n              return find;\n            })\n          };\n          result.push(obj);\n        };\n\n        for (var i in kpisDes) {\n          loopKpisDes(kpisDes[i]);\n        }\n      };\n\n      for (var i in nodesDes) {\n        loopNodeDes(nodesDes[i]);\n      }\n\n      ;\n      callback({\n        getLegend: getLegend,\n        getxAxis: getxAxis,\n        getSeries: getSeries\n      });\n    };\n\n    Info.get(\"../localdb/simulate.json\", getInfo_back);\n  };\n});"],"sourceRoot":"/source/"}