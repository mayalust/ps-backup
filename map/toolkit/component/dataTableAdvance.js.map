{"version":3,"sources":["toolkit/component/dataTableAdvance.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","define","commonMethod","data","table","elemData","element","route","SwSocket","userLoginUIService","previewMode","alertService","defer","growl","getOption","serviceCenterService","dictionaryService","resourceUIService","ticketTaskService","projectUIService","kpiDataService","window","advance","getfunction","$attr","global","scope","compile","listbottom","col","pageSize","Object","defineProperty","enumerable","wrap","$","css","expression","innerContent","addClass","headerBtnGroup","append","$$","runExpression","funRes","code","fnResult","system","format","theme","q","setFilter","setFormat","fmt","search","render","source","callback","resolve","children","remove","srcData","rowlist","showSelect","Array","rowCallbackKey","unshift","type","value","name","createHeaderButton","btnConfig","btn","class","clickFn","span","icon","text","label","prepend","on","event","buttons","i","loadExternalJs","dataTable","setTimeout","columns","columnDefs","loopformat","inx","colInx","fmtInx","push","title","full","dom","fmtClone","createText","item","nodeId","getParameter","appendix","kpiId","id","attr","websocket","style","undefined","renderFn","options","filePath","link","linkage","fileName","createLink","input","checked","prop","createCheckBox","useMomentFormat","createDate","attrs","k","createInput","td","cls","createSelect","pwrap","progress","createProgress","createPriority","createCircum","createCircum1","createJquery","Math","uuid","button","createButton","valueAddon","outer","groupBtn_before","groupBtn_after","button2","ulWrap","createDirectiveSingle","button1","stopPropagation","params","val","sendItemDirByValue","ul","createLi","inner","resourceId","li","bg","gr_bf","gr_addon","gr_af","getKpiValueCi","paramSocket","ciid","toString","kpi","unregister","operation","register","send","$value","this","windClick","inputVal","createDirectiveInput","btnGroup","ix","fm","sublabel","content","createButtonGroup","createButton1","disabled","state","createButtonGroupAlert","createOrderStatus","createStatus","cursor","createAlarmSource","div","fileList","forEach","ele","a","attsstr","createCustomHtml","ctrlGroup","group","btnStyle","previewBtn","txt","fileDom","off","createSystemPopupByJsonName","width","config","cfg","file","createUploadFile2","html","targets","loopCol","length","parseInt","rearrangeByCol","rs","loop","floor","ic","extend","result","offset","clone","rData","domTxt","ProudSmart","datatable","footerdom","opts","handlerFuc","conf","cacheLower","cacheUpper","cacheLastRequest","cacheLastJson","ordering","language","rowCallback","row","index","rowData","paging","find","tableElement","hasOwnProperty","removeRow","_DT_RowIndex","draw","dt","rowClickFn","fn","every","each","checkall","elem","removeAttr","columnIndex","subBtn","setParameter","changeFn","submitBtn","submitFn","uploadFile1","files","overflow","text-overflow","white-space","display","trigger","laydate","btns","done","date","endDate","target","getUTCDateString","formatDatebyMomentToUTC","getDateString","map","select2Dom","inxStr","indexOf","baseSelect2","noResults","noresults","placeholder","evt","current","e","select2","initComplete","pageLength","processing","serverSide","ajax","pages","url","method","request","drawCallback","settings","requestStart","start","drawStart","requestLength","requestEnd","order","pop","clearCache","JSON","stringify","isFunction","d","isPlainObject","pageRequest","statCount","returnObj","total","selected","json","recordsTotal","recordsFiltered","splice","destroy","empty","DataTable","all","checkboxall","arguments","key","column","getChecked","rowlistAllChecked","filter","array","initFn","param","size","formatter","random","getSimulateList","getAllAlerts","alerts","domainPath","user","domains","getDevicesByCondition","devices","energyTypeList","energyType","currentDirective","directives","getCurrentAlert","getCurrentDevices","underWatch","runExpressionSuccess"],"mappings":"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","file":"toolkit/component/dataTableAdvance.js","sourcesContent":["function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/**\n * Created by leonlin on 16/11/3.\n */\ndefine([\"commonMethod\", \"configs\"], function (commonMethod) {\n  return function (data) {\n    var table;\n    var tableFormat;\n    var alertView;\n    var elemData = data;\n    var route = data.route;\n    var element = data.element;\n    var SwSocket = data.SwSocket;\n    var previewMode = data.previewMode;\n    var alertService = data.alertService;\n    var userLoginUIService = data.userLoginUIService;\n    var growl = data.growl;\n    var defer = elemData.defer;\n    var serviceCenterService = data.serviceCenterService;\n    var dictionaryService = data.dictionaryService;\n    var resourceUIService = data.resourceUIService;\n    var ticketTaskService = data.ticketTaskService;\n    var projectUIService = data.projectUIService;\n    var kpiDataService = data.kpiDataService;\n    var window = data.window;\n    var fun = element.advance.getfunction;\n    var getOption = element.$attr(\"advance/getListTable\");\n    var global = data.global;\n    var scope = data.scope;\n    var compile = data.compile;\n    var condition;\n    var listbottom = element.$attr(\"parameters/listbottom\");\n    var col = element.$attr(\"parameters/col\") || 1;\n    var pageSize = 10;\n    delete element.growl;\n    Object.defineProperty(element, \"dataSource\", {\n      enumerable: false\n    });\n    var wrap = $(\"<div></div>\");\n    wrap.css(\"width\", \"100%\");\n    wrap.css(\"overflow-y\", \"auto\");\n    wrap.css(\"overflow-x\", \"hidden\");\n    var innerContent = $(\"<table></table>\").addClass(\"table table-hover\");\n    var headerBtnGroup = $(\"<div></div>\").addClass(\"btn-group\").css(\"margin-bottom\", \"10px\").css(\"display\", \"none\");\n    var expression;\n    wrap.append(headerBtnGroup);\n    wrap.append(innerContent);\n    $$.runExpression(element.$attr(\"advance/expression\"), function (funRes) {\n      if (funRes.code == \"0\") {\n        var fnResult = funRes.data;\n\n        if (typeof fnResult == \"function\") {\n          expression = fnResult(data, system);\n        } else {\n          expression = fnResult;\n        }\n\n        expression = expression ? expression : {};\n      } else {\n        expression = {};\n        ; //throw new Error(funRes.message);\n      }\n\n      runExpressionSuccess(expression);\n    });\n\n    function runExpressionSuccess(expression) {\n      var format = expression.format;\n      var theme = expression.theme || \"default\";\n      var q = data.q;\n\n      element.setFilter = function (obj) {};\n\n      element.setFormat = function (fmt) {\n        format = fmt;\n      };\n\n      element.search = function () {};\n\n      element.render = function (source, callback) {\n        defer.resolve(\"underwatch\");\n        innerContent.children().remove();\n        var rowlist = [];\n        headerBtnGroup.children().remove();\n        var srcData;\n        var showSelect = source.showSelect;\n\n        if (source instanceof Array) {\n          srcData = source;\n        } else {\n          srcData = source.data;\n        }\n\n        format = source.format;\n        var rowCallbackKey = source.rowCallbackKey;\n\n        if (showSelect) {\n          format.unshift({\n            type: \"checkbox\",\n            value: \"checked\",\n            name: \"全选\"\n          });\n        }\n\n        pageSize = source.pageSize || pageSize;\n\n        var createHeaderButton = function createHeaderButton(btnConfig) {\n          var btn = $(\"<div></div>\").addClass(btnConfig.class || \"btn btn-primary\");\n          var clickFn = btnConfig.$attr(\"on/click\");\n          var span = $(\"<span></span>\").addClass(btnConfig.icon);\n          btn.text(btnConfig.label);\n          btn.prepend(span);\n          btn.on(\"click\", function (event) {\n            if (clickFn) {\n              clickFn(event);\n            }\n          });\n          return btn;\n        };\n\n        if (source.buttons) {\n          headerBtnGroup.css(\"display\", \"block\");\n\n          for (var i in source.buttons) {\n            headerBtnGroup.append(createHeaderButton(source.buttons[i]));\n          }\n        }\n\n        $$.loadExternalJs([\"datatables.net\", \"datatables.net-bs\", \"datatables.net-select\"], function (dataTable) {\n          setTimeout(function () {\n            var columns = [];\n            var columnDefs = [];\n            var windClick;\n\n            var loopformat = function loopformat(inx, colInx, fmtInx, fmt) {\n              columns.push({\n                data: colInx != 0 ? fmt.value + \"_$\" + colInx : fmt.value,\n                title: fmt.name,\n                render: function render(data, type, full) {\n                  var dt = data;\n                  var type = fmt.type;\n                  /**\n                   * 限制表格的宽度\n                   * @param item\n                   * @returns {*|jQuery|HTMLElement}\n                   */\n\n                  var createText = function createText(item, fmt) {\n                    var nodeId = element.getParameter(\"resourceId\");\n                    var appendix = \"\";\n\n                    if (colInx != 0) {\n                      appendix = \"_$\" + colInx;\n                    }\n\n                    var kpiId = item[\"params\" + appendix] ? item[\"params\" + appendix][0].id : \"\";\n                    var span = $(\"<span></span>\");\n                    span.attr(\"fmtInx\", fmtInx);\n\n                    if (fmt.websocket == true) {\n                      span.attr(\"webSocket\", nodeId + \",\" + kpiId);\n                    }\n\n                    span.css(\"cursor\", \"default\");\n                    var style = fmt.style;\n\n                    if (style) {\n                      span.css(style);\n                    }\n\n                    var format = fmt.format || function () {\n                      return data == undefined ? \"\" : data;\n                    };\n\n                    var renderFn = fmt.render;\n\n                    if (renderFn) {\n                      dom = renderFn(data, \"display\", item, fmt);\n                      span.append(dom);\n                    } else {\n                      span.attr(\"title\", format(data));\n                      span.text(format(data) == undefined ? \"-\" : format(data));\n                    }\n\n                    return span;\n                  };\n\n                  var createLink = function createLink(item) {\n                    if (item.filePath == \"none\" || !item.filePath) {\n                      var nodeId = element.getParameter(\"resourceId\");\n                      var appendix = \"\";\n\n                      if (colInx != 0) {\n                        appendix = \"_$\" + colInx;\n                      }\n\n                      var kpiId = item[\"params\" + appendix] ? item[\"params\" + appendix][0].id : \"\";\n                      var span = $(\"<span></span>\");\n                      span.attr(\"fmtInx\", fmtInx);\n\n                      if (fmt.websocket == true) {\n                        span.attr(\"webSocket\", nodeId + \",\" + kpiId);\n                      }\n\n                      span.css(\"cursor\", \"default\");\n                      var style = fmt.style;\n\n                      if (style) {\n                        span.css(style);\n                      }\n\n                      var format = fmt.format || function () {\n                        return data == undefined ? \"\" : data;\n                      };\n\n                      var renderFn = fmt.render;\n\n                      if (renderFn) {\n                        dom = renderFn(data, \"display\", item, fmt);\n                        span.append(dom);\n                      } else {\n                        span.attr(\"title\", format(data));\n                        span.text(format(data) == undefined ? \"-\" : format(data));\n                      }\n\n                      return span;\n                    } else {\n                      var link = $(\"<a target='_blank'></a>\");\n                      link.attr(\"fmtInx\", fmtInx);\n                      var linkage = fmt.linkage;\n                      var value = fmt.value;\n\n                      if (fmt.websocket == true) {\n                        link.attr(\"webSocket\", nodeId + \",\" + kpiId);\n                      }\n\n                      var style = fmt.style;\n\n                      if (style) {\n                        link.css(style);\n                      }\n\n                      var fileName = full.fileName ? full.fileName : full[value];\n                      link.text(fileName);\n                      link.attr(\"href\", full[linkage]);\n                      return link;\n                    }\n                  };\n\n                  var createCustomHtml = function createCustomHtml(item, fmt) {\n                    var div = $(\"<div></div>\");\n                    var style = fmt.style || {};\n                    var cls = fmt.class || \"\";\n                    var val = fmt.content || {}; // 如果传进来是个数组需要展示多个文件\n\n                    if (item.fileList instanceof Array) {\n                      item.fileList.forEach(function (ele) {\n                        var a = $('<a target=\"_blank\" href=\"' + ele.filePath + '\">' + ele.label + '</a><br />');\n                        div.append(a);\n                      });\n                    } else {\n                      if (_typeof(style) == \"object\") {\n                        div.css(style);\n                      }\n\n                      var attsstr = fmt.attr ? fmt.attr : \"id\";\n                      div.attr(attsstr, item[fmt.data]);\n                      div.append(val);\n                    }\n\n                    return div;\n                  };\n\n                  var createSelect = function createSelect(item, fmt) {\n                    var td = $(\"<div></div>\");\n                    var cls = fmt.class || \"\";\n                    td.addClass(cls);\n                    var style = fmt.style;\n                    td.css(\"padding\", \"3px\");\n\n                    if (_typeof(style) == \"object\") {\n                      td.css(style);\n                    }\n\n                    return td;\n                  };\n\n                  var createInput = function createInput(item, fmt) {\n                    var appendix = \"\";\n\n                    if (colInx != 0) {\n                      appendix = \"_$\" + colInx;\n                    }\n\n                    var changeFn = fmt.$attr(\"on/change\");\n                    var input = $(\"<input />\");\n                    input.attr(\"fmtInx\", fmtInx);\n                    input.addClass(\"form-control\");\n                    var style = fmt.style;\n\n                    if (style) {\n                      input.css(style);\n                    } //属性\n\n\n                    if (fmt.attrs) {\n                      for (var k in fmt.attrs) {\n                        input.attr(k, fmt.attrs[k]);\n                      }\n                    }\n\n                    return input;\n                  };\n\n                  var createAlarmSource = function createAlarmSource(item, fmt) {\n                    var span = $(\"<span></span>\");\n                    span.attr(\"fmtInx\", fmtInx);\n\n                    if (fmt.cursor == false) {\n                      span.css(\"cursor\", \"default\");\n                    } else {\n                      span.css(\"cursor\", \"pointer\");\n                    }\n\n                    if (data == 1) {\n                      span.text(\"在线预警\");\n                    } else if (data == 2) {\n                      span.text(\"智能诊断\");\n                    } else if (data == 3) {\n                      span.text(\"大数据分析\");\n                    } else if (data == 4) {\n                      span.text(\"离线诊断\");\n                    } else if (data == 130) {\n                      span.text(\"点检异常\");\n                    } else if (data == 100) {\n                      span.text(\"当日点检\");\n                    } else if (data == 110) {\n                      span.text(\"精密检测\");\n                    } else if (data == 120) {\n                      span.text(\"检修计划\");\n                    } else if (data == 140) {\n                      span.text(\"备修委托\");\n                    } else if (data == 210) {\n                      span.text(\"临时委托\");\n                    } else if (data == 220) {\n                      span.text(\"辊道备修\");\n                    } else if (data == \"合并告警\") {\n                      var span = $(\"<a></a>\");\n                      span.attr(\"fmtInx\", fmtInx);\n                      span.css(\"cursor\", \"pointer\");\n                      span.text(\"合并告警\");\n                    } else {\n                      span.text(data);\n                    }\n                    /**\n                     span.on(\"click\", function(event){\n                    ;\n                    })*/\n\n\n                    return span;\n                  };\n\n                  var createCheckBox = function createCheckBox(item, fmt) {\n                    var input = $(\"<input type=\\\"checkbox\\\" id=\\\"checkbox\\\"/>\");\n                    input.attr(\"fmtInx\", fmtInx);\n\n                    if (item.checked) {\n                      input.attr(\"checked\", true);\n                      input.prop(\"checked\", true);\n                    }\n\n                    return input;\n                  };\n                  /**\n                   var createlink = function(item, fmt){\n                  var a = $(\"<a></a>\").text(data || \"\");\n                  var clickFn = fmt.$attr(\"on/click\");\n                  a.attr(\"fmtInx\", fmtInx);\n                  if(data != \"-\"){\n                    a.css(\"text-decoration\", \"underline\");\n                    a.css(\"cursor\", \"pointer\");\n                  } else {\n                    a.css(\"text-decoration\", \"none\");\n                    a.css(\"cursor\", \"default\");\n                  }\n                  return a;\n                  };*/\n\n\n                  var createButton = function createButton(item, fmt) {\n                    var clickFn = fmt.$attr(\"on/click\");\n                    var uuid = Math.uuid(32);\n                    var icon = $(\"<span></span>\").addClass(fmt.icon || \"glyphicon glyphicon-asterisk\");\n                    var button = $(\"<button></button>\").addClass(fmt.class || \"btn btn-primary\").text(fmt.label).attr(\"id\", \"dataTable_btn_\" + inx);\n                    button.attr(\"fmtInx\", fmtInx);\n                    button.prepend(icon);\n                    return button;\n                  };\n\n                  var createButtonGroup = function createButtonGroup(item, fmt) {\n                    var btnGroup = $(\"<div></div>\").addClass(\"btn-group\");\n\n                    var createButton = function createButton(ix, fm) {\n                      var clickFn = fmt.$attr(\"on/click\");\n                      var uuid = Math.uuid(32);\n                      var icon = $(\"<span></span>\").addClass(fm.icon || \"glyphicon glyphicon-asterisk\");\n                      var button = $(\"<button></button>\").addClass(fm.class || \"btn btn-primary\").text(full[fm.name] ? fm.sublabel : fm.label).attr(\"id\", \"dataTable_btn_\" + ix);\n                      button.attr(\"fmtInx\", fmtInx);\n                      button.prepend(icon);\n                      return button;\n                    };\n\n                    for (var i in fmt.content) {\n                      btnGroup.append(createButton(i, fmt.content[i]));\n                    }\n\n                    return btnGroup;\n                  }; //这个为了解决告警查询的时候按钮加业务逻辑\n\n\n                  var createButtonGroupAlert = function createButtonGroupAlert(item, fmt) {\n                    var btnGroup = $(\"<div></div>\").addClass(\"btn-group\");\n\n                    var createButton1 = function createButton1(ix, fm) {\n                      var clickFn = fm.$attr(\"on/click\");\n                      var uuid = Math.uuid(32);\n                      var icon = $(\"<span></span>\").addClass(fm.icon || \"glyphicon glyphicon-asterisk\");\n                      var button = $(\"<button></button>\").addClass(fm.class || \"btn btn-primary\").text(fm.label).attr(\"id\", \"dataTable_btn_\" + ix);\n                      button.attr(\"fmtInx\", fmtInx);\n                      button.prepend(icon);\n\n                      if (fm.disabled) {\n                        button.attr(\"disabled\", \"true\");\n                      }\n\n                      return button;\n                    };\n\n                    for (var i in fmt.content) {\n                      fmt.content[i][\"disabled\"] = false;\n\n                      if (fmt.content[i].name == \"confirm\" && full.state != 0 && full.state != -100) {\n                        fmt.content[i][\"disabled\"] = true;\n                      }\n\n                      if (fmt.content[i].name == \"ignore\" && full.state != 0 && full.state != -100 && full.state != 5 && full.state != 10) {\n                        fmt.content[i][\"disabled\"] = true;\n                      }\n\n                      btnGroup.append(createButton1(i, fmt.content[i]));\n                    }\n\n                    return btnGroup;\n                  };\n\n                  var createProgress = function createProgress() {\n                    var pwrap = $(\"<div></div>\").addClass(\"progress sm\");\n                    pwrap.attr(\"fmtInx\", fmtInx);\n                    var progress = $(\"<div></div>\").addClass(\"progress-bar\").css(\"width\", data || 0);\n                    pwrap.append(progress);\n\n                    switch (true) {\n                      case data == 100:\n                        progress.addClass(\"progress-bar-aqua\");\n                        break;\n\n                      case data > 90:\n                        progress.addClass(\"progress-bar-green\");\n                        break;\n\n                      case data > 80:\n                        progress.addClass(\"progress-bar-yellow\");\n                        break;\n\n                      case data > 70:\n                        progress.addClass(\"progress-bar-yellow\");\n                        break;\n\n                      case data > 60:\n                        progress.addClass(\"progress-bar-red\");\n                        break;\n\n                      default:\n                        progress.addClass(\"progress-bar-danger\");\n                        break;\n                    }\n\n                    return pwrap;\n                  };\n\n                  var createDirectiveInput = function createDirectiveInput(item, format) {\n                    var appendix = \"\";\n\n                    if (colInx != 0) {\n                      appendix = \"_$\" + colInx;\n                    }\n\n                    var outer = $(\"<div></div>\").css(\"position\", \"relative\");\n                    var wrap = $(\"<div></div>\").addClass(\"input-group\");\n                    var text = $(\"<div></div>\").addClass(\"btn btn-default\").text(item.name);\n                    var groupBtn_before = $(\"<div></div>\").addClass(\"input-group-btn\");\n                    var input = $(\"<input />\").addClass(\"form-control\").attr(\"id\", \"inputAll_\" + full[\"id\" + appendix]);\n                    var groupBtn_after = $(\"<div></div>\").addClass(\"input-group-btn\");\n                    var icon = $(\"<span></span>\").addClass(\"glyphicon glyphicon-plus-sign\").attr(\"id\", \"icon_\" + full[\"id\" + appendix]);\n                    var button1 = $(\"<button></button>\").addClass(\"btn btn-default\").attr(\"id\", \"plusBtn_\" + full[\"id\" + appendix]);\n                    var button2 = $(\"<button></button>\").addClass(\"btn btn-default\").text(\"发送\").attr(\"id\", \"sendBtnAll_\" + full[\"id\" + appendix]);\n                    $(\"button[id*=sendBtnAll_\" + full[\"id\" + appendix] + \"]\").on(\"click\", function (event) {\n                      event.stopPropagation();\n                      var params = {};\n\n                      for (var i in item.params) {\n                        params[item.params[i].name] = $(\"input[id*=inputAll_\" + full[\"id\" + appendix] + \"]\").val();\n                      }\n\n                      element.sendItemDirByValue(full.id, params);\n                      /**\n                       if(clickFn){\n                      clickFn({\n                        target : element,\n                        clickType : \"outterBtn\",\n                        ui : event,\n                        data : item,\n                        value : input.val()\n                      })\n                      }*/\n                    });\n                    var ulWrap = $(\"<div></div>\").attr(\"id\", \"ulWrap_\" + full[\"id\" + appendix]).css(\"display\", \"none\");\n                    var ul = $(\"<ul></ul>\").css(\"width\", \"auto\").css(\"box-shadow\", \"1px 1px 10px 1px rgba(0,0,0,.5)\").css(\"border\", \"1px solid #ddd\").css(\"position\", \"absolute\").css(\"list-style\", \"none\").css(\"background-color\", \"#ddd\").css(\"margin\", 0).css(\"padding\", \"0px\").css(\"z-index\", \"99999\");\n\n                    var createLi = function createLi(inner) {\n                      var resourceId = element.getParameter(\"resourceId\");\n                      var kpiId = inner.id;\n                      var li = $(\"<li></li>\").css(\"margin\", \"10px\");\n                      var bg = $(\"<div></div>\").addClass(\"input-group\");\n                      var gr_bf = $(\"<div></div>\").addClass(\"input-group-addon\");\n                      var gr_addon = $(\"<div></div>\").attr(\"id\", \"add_\" + inner.id).addClass(\"input-group-addon\").text(\"-\");\n                      var gr_af = $(\"<div></div>\").addClass(\"input-group-btn\");\n                      var text = $(\"<span></span>\").text(inner.label);\n                      var input = $(\"<input />\").addClass(\"form-control\").attr(\"id\", \"input_\" + inner.id);\n                      var button = $(\"<button></button>\").addClass(\"btn btn-primary\").text(\"发送\").attr(\"id\", \"sendBtn_\" + inner.id);\n                      input.css(\"min-width\", \"60px\");\n                      element.getKpiValueCi([resourceId], [kpiId], function (data) {\n                        $(\"[id*=add_\" + inner.id + \"]\").text(data[0].value);\n                      });\n                      var paramSocket = {\n                        ciid: [resourceId].toString(),\n                        kpi: [kpiId].toString()\n                      };\n                      var uuid = Math.uuid();\n                      SwSocket.unregister(uuid);\n                      var operation = \"register\";\n                      SwSocket.register(uuid, operation, function (event) {\n                        $(\"[id*=add_\" + inner.id + \"]\").text(event.data.value);\n                      });\n                      SwSocket.send(uuid, operation, \"kpi\", paramSocket);\n                      $(\"input[id*=input_\" + inner.id).on(\"change\", function (event) {\n                        inner.$value = $(this).val();\n                      });\n                      $(\"input[id*=input_\" + inner.id).on(\"click\", function (event) {\n                        event.stopPropagation();\n                      });\n                      $(\"button[id*=sendBtn_\" + inner.id).on(\"click\", function (event) {\n                        windClick();\n                        event.stopPropagation();\n                        var inputVal = $(\"input[id*=input_\" + inner.id).val();\n                        var params = {};\n                        params[inner.name] = inputVal;\n                        element.sendItemDirByValue(full.id, params);\n                      });\n                      gr_bf.append(text);\n                      gr_af.append(button);\n                      bg.append(gr_bf).append(gr_addon).append(input).append(gr_af);\n                      li.append(bg);\n                      return li;\n                    };\n\n                    var btnClick;\n                    $(\"div[id*=ulWrap_\" + full[\"id\" + appendix] + \"]\").on(\"click\", function (event) {\n                      event.stopPropagation();\n                    });\n                    var appendix = \"\";\n\n                    if (colInx != 0) {\n                      appendix = \"_$\" + colInx;\n                    }\n\n                    for (var i in item[\"params\" + appendix]) {\n                      ul.append(createLi(item[\"params\" + appendix][i]));\n                    }\n\n                    outer.attr(\"fmtInx\", fmtInx);\n                    wrap.append(input);\n                    wrap.append(groupBtn_after);\n                    groupBtn_before.append(text);\n                    button1.append(icon);\n                    groupBtn_after.append(button1);\n                    groupBtn_after.append(button2);\n                    ulWrap.append(ul);\n                    outer.append(wrap);\n                    outer.append(ulWrap);\n                    return outer;\n                  };\n\n                  var createDirectiveSingle = function createDirectiveSingle(item, format) {\n                    var nodeId = element.getParameter(\"resourceId\");\n                    var appendix = \"\";\n\n                    if (colInx != 0) {\n                      appendix = \"_$\" + colInx;\n                    }\n\n                    if (item[\"params\" + appendix]) {\n                      var kpiId = item[\"params\" + appendix][0].id;\n                      var valueAddon = $(\"<span></span>\");\n                      var outer = $(\"<div></div>\").css(\"position\", \"relative\");\n                      var wrap = $(\"<div></div>\").addClass(\"input-group\");\n                      var text = $(\"<div></div>\").addClass(\"btn btn-default\").text(item.name);\n                      var groupBtn_before = $(\"<div></div>\").addClass(\"input-group-btn\");\n                      var input = $(\"<input />\").addClass(\"form-control\").attr(\"id\", \"inputAll_\" + full[\"id\" + appendix]);\n                      var groupBtn_after = $(\"<div></div>\").addClass(\"input-group-btn\");\n                      var button2 = $(\"<button></button>\").addClass(\"btn btn-primary\").text(\"发送\").attr(\"id\", \"sendBtnAll_\" + full[\"id\" + appendix]);\n                      var ulWrap = $(\"<div></div>\").attr(\"id\", \"ulWrap_\" + full[\"id\" + appendix]).css(\"display\", \"none\");\n                      var appendix = \"\";\n\n                      if (colInx != 0) {\n                        appendix = \"_$\" + colInx;\n                      }\n\n                      input.attr(\"webSocket\", nodeId + \",\" + kpiId);\n                      outer.attr(\"fmtInx\", fmtInx);\n                      valueAddon.addClass(\"input-group-addon\");\n                      valueAddon.text(\"500\");\n                      wrap.css(\"width\", \"100%\");\n                      wrap.append(input);\n                      wrap.append(groupBtn_after);\n                      groupBtn_before.append(text);\n                      groupBtn_after.append(button2);\n                      outer.append(wrap);\n                      outer.append(ulWrap);\n                      return outer;\n                    } else {\n                      return \"\";\n                    }\n                  };\n\n                  var createPriority = function createPriority() {\n                    var span = $(\"<span></span>\").addClass(\"label\");\n                    span.attr(\"fmtInx\", fmtInx);\n\n                    if (data == 2) {\n                      span.text(\"注意\").addClass(\"alerts-minor\");\n                    } else if (data == 3) {\n                      span.text(\"警告\").addClass(\"alerts-critical\");\n                    } else if (data == 4) {\n                      span.text(\"危险\").addClass(\"alerts-black\");\n                    } else if (data == \"-1\") {\n                      span.text(\"正常\").addClass(\"alerts-normal\").css(\"background-color\", \"#16b695\");\n                    } else {\n                      span.text(\"无\").css(\"font-size\", \"12px\");\n                    }\n\n                    span.css(\"cursor\", \"default\");\n                    return span;\n                  };\n\n                  var createCircum = function createCircum() {\n                    var span = $(\"<span></span>\").addClass(\"label\");\n                    span.attr(\"fmtInx\", fmtInx);\n\n                    if (data == \"0\") {\n                      span.css(\"display\", \"inline-block\");\n                      span.css(\"width\", \"20px\");\n                      span.css(\"height\", \"20px\");\n                      span.css(\"background\", \"#00bb7b\");\n                      span.css(\"border-radius\", \"10px\"); //span.text(\"注意\");\n                    } else if (data == \"1\") {\n                      span.css(\"display\", \"inline-block\");\n                      span.css(\"width\", \"20px\");\n                      span.css(\"height\", \"20px\");\n                      span.css(\"background\", \"#FD0001\");\n                      span.css(\"border-radius\", \"10px\");\n                    } else {\n                      span.text(\"无\").css(\"font-size\", \"12px\");\n                    }\n\n                    span.css(\"cursor\", \"default\");\n                    return span;\n                  };\n\n                  var createCircum1 = function createCircum1() {\n                    var span = $(\"<span></span>\").addClass(\"label\");\n                    span.attr(\"fmtInx\", fmtInx);\n\n                    if (data == \"1\") {\n                      span.css(\"display\", \"inline-block\");\n                      span.css(\"width\", \"20px\");\n                      span.css(\"height\", \"20px\");\n                      span.css(\"background\", \"#00bb7b\");\n                      span.css(\"border-radius\", \"10px\");\n                    } else if (data == \"2\") {\n                      span.css(\"display\", \"inline-block\");\n                      span.css(\"width\", \"20px\");\n                      span.css(\"height\", \"20px\");\n                      span.css(\"background\", \"#efd80b\");\n                      span.css(\"border-radius\", \"10px\");\n                    } else if (data == \"3\") {\n                      span.css(\"display\", \"inline-block\");\n                      span.css(\"width\", \"20px\");\n                      span.css(\"height\", \"20px\");\n                      span.css(\"background\", \"#ff8800\");\n                      span.css(\"border-radius\", \"10px\");\n                    } else if (data == \"4\") {\n                      span.css(\"display\", \"inline-block\");\n                      span.css(\"width\", \"20px\");\n                      span.css(\"height\", \"20px\");\n                      span.css(\"background\", \"#FD0001\");\n                      span.css(\"border-radius\", \"10px\");\n                    }\n\n                    span.css(\"cursor\", \"default\");\n                    return span;\n                  };\n\n                  var createJquery = function createJquery(item, format) {\n                    var span = $(\"<div></div>\");\n                    var renderFn = format.render;\n\n                    if (renderFn) {\n                      dom = renderFn(item);\n                      span.append(dom);\n                    }\n\n                    return span;\n                  };\n\n                  var createOrderStatus = function createOrderStatus() {\n                    var span = $(\"<span></span>\").addClass(\"label\");\n                    span.attr(\"fmtInx\", fmtInx);\n\n                    if (data == 10) {\n                      span.text(\"未发布\").addClass(\" label-primary\");\n                    } else if (data == 100) {\n                      span.text(\"处理中\").addClass(\"label-warning\");\n                    } else if (data == 200) {\n                      span.text(\"已完成\").addClass(\"label-info\");\n                    } else if (data == 150) {\n                      span.text(\"已撤销\").addClass(\"label-info\");\n                    }\n\n                    return span;\n                  };\n\n                  var createDate = function createDate() {\n                    var span = $(\"<span></span>\");\n                    span.css(\"cursor\", \"default\");\n                    var style = fmt.style;\n\n                    if (style) {\n                      span.css(style);\n                    }\n\n                    span.css(\"display\", \"inline-block\");\n                    var renderFn = fmt.render;\n\n                    if (data) {\n                      if (renderFn) {\n                        span.text(renderFn(data));\n                      } else {\n                        span.text(useMomentFormat(data, \"yyyy-MM-dd hh:mm:ss\"));\n                      }\n                    } else {\n                      span.text(\"-\");\n                    }\n\n                    return span;\n                  };\n                  /**\n                   * 韩星\n                   * 表格中行内添加一个时间插件\n                   */\n\n\n                  var createDateTimePicker = function createDateTimePicker(fmt) {\n                    var td = $(\"<div></div>\");\n                    return td;\n                  };\n                  /**\n                   *  韩星\n                   *  加了一个可以自定义上传图片，上传图片的参数\n                   */\n\n\n                  var createUploadFile2 = function createUploadFile2(fmt, ctrlGroup) {\n                    var group = $(\"<div></div>\");\n                    group.attr(\"id\", \"group\");\n                    var cfg;\n                    group.addClass(\"btn-group\");\n                    var file;\n                    var td = $(\"<td></td>\");\n                    var style = fmt.style || {};\n                    var btnStyle = fmt.btnStyle || {};\n                    var cls = fmt.class || \"\";\n                    var disabled = fmt.disabled;\n                    var previewBtn = $(\"<button></button>\");\n                    var submitBtn = $(\"<button></button>\");\n                    submitBtn.attr(\"id\", \"submitBtn\");\n                    var submitFn = fmt.$attr(\"on/submit\");\n                    var config = {};\n                    config.group = fmt.group;\n                    previewBtn.addClass(\"btn btn-default\");\n                    previewBtn.text(\"预览\");\n                    td.addClass(cls);\n\n                    if (_typeof(style) == \"object\") {\n                      td.css(style);\n                    }\n\n                    var button = $(\"<button></button>\");\n                    button.attr(\"id\", \"buttonUpload\");\n                    var txt = $(\"<span></span>\");\n                    txt.attr(\"id\", \"txt\");\n                    var icon = $(\"<span></span>\");\n                    var clickFn = fmt.$attr(\"on/click\");\n                    var fileDom = $(\"<input />\");\n                    fileDom.attr(\"id\", \"fileDom\");\n                    fileDom.attr(\"type\", \"file\");\n                    fileDom.css(\"display\", \"none\");\n                    button.addClass(\"btn btn-default\");\n                    button.attr(\"type\", \"button\");\n                    button.css(\"top\", \"3px\");\n                    group.append(button);\n\n                    if (fmt.icon) {\n                      icon.addClass(fmt.icon);\n                      button.append(icon);\n                    }\n\n                    if (disabled) {\n                      button.prop(\"disabled\", \"disabled\");\n                    }\n\n                    button.css(btnStyle);\n                    txt.text(\"选择文件\");\n                    button.append(txt);\n                    previewBtn.off(\"click\");\n                    previewBtn.on(\"click\", function (event) {\n                      element.createSystemPopupByJsonName(\"imagePrev\", {\n                        title: \"图片内容预览\",\n                        width: \"500px\",\n                        config: cfg\n                      }, {\n                        file: file\n                      });\n                    });\n                    td.append(fileDom);\n                    td.append(group);\n                    return td;\n                  };\n\n                  var createStatus = function createStatus() {\n                    //var span = $(\"<span></span>\").addClass(\"label label-info\");\n                    var span = $(\"<span></span>\").addClass(\"label\");\n                    span.attr(\"fmtInx\", fmtInx);\n\n                    if (data == 0 || data == -100) {\n                      span.text(\"新产生\").addClass(\"label-info\");\n                    } else if (data == 5) {\n                      span.text(\"已确认\").addClass(\"label-primary\");\n                    } else if (data == 10) {\n                      // span.text(\"处理中\").addClass(\"label-warning\");  宝钢处理中也显示成已确认状态\n                      span.text(\"已确认\").addClass(\"label-primary\");\n                    } else if (data == 20) {\n                      span.text(\"已解决\").addClass(\"label-success\");\n                    } else {\n                      span.text(\"已忽略\").addClass(\"\");\n                    } //calculeExp(format.value, item).then(success);\n                    //return span;\n\n\n                    return span;\n                  };\n\n                  var wrap = $(\"<div></div>\");\n                  var dom, fmtClone;\n\n                  if (type == \"valueBased\") {\n                    if (!data) data = \"\";\n                    fmtClone = fmt.options[data];\n\n                    if (!fmtClone) {\n                      fmtClone = fmt.options[\"\"];\n                    }\n\n                    type = fmtClone.type;\n                  } else {\n                    fmtClone = fmt;\n                  }\n\n                  if (type == \"text\") {\n                    dom = createText(full, fmtClone);\n                  } else if (type == \"link\") {\n                    dom = createLink(full, fmtClone);\n                  } else if (type == \"checkbox\") {\n                    dom = createCheckBox(full, fmtClone);\n                  } else if (type == \"date\") {\n                    dom = createDate();\n                  } else if (type == \"input\") {\n                    dom = createInput(full, fmtClone);\n                  } else if (type == \"select\") {\n                    dom = createSelect(full, fmtClone);\n                  } else if (type == \"progressbar\") {\n                    dom = createProgress();\n                  } else if (type == \"priority\") {\n                    dom = createPriority(full, fmtClone);\n                  } else if (type == \"circum\") {\n                    dom = createCircum(full, fmtClone);\n                  } else if (type == \"circum1\") {\n                    dom = createCircum1(full, fmtClone);\n                  } else if (type == \"jquery\") {\n                    dom = createJquery(full, fmtClone);\n                  } else if (type == \"button\") {\n                    dom = createButton(full, fmtClone);\n                  } else if (type == \"directiveSingle\") {\n                    dom = createDirectiveSingle(full, fmtClone);\n                  } else if (type == \"directiveInput\") {\n                    dom = createDirectiveInput(full, fmtClone);\n                  } else if (type == \"buttonGroup\") {\n                    dom = createButtonGroup(full, fmtClone);\n                  } else if (type == \"buttonGroupAlert\") {\n                    dom = createButtonGroupAlert(full, fmtClone);\n                  } else if (type == \"orderStatus\") {\n                    dom = createOrderStatus(full, fmtClone);\n                  } else if (type == \"status\") {\n                    dom = createStatus();\n                  } else if (type == \"dateTimePicker\") {\n                    dom = createDateTimePicker(fmt, fmtClone);\n                  } else if (type == \"alarmSource\") {\n                    dom = createAlarmSource(full, fmtClone);\n                  } else if (type == \"customHtml\") {\n                    //加了一个自定义html功能，便于其它功能的扩展\n                    dom = createCustomHtml(full, fmtClone);\n                  } else if (type == \"uploadFile2\") {\n                    //宝钢报告编制特殊处理\n                    dom = createUploadFile2(fmt, fmtClone);\n                  } else {\n                    dom = createText(full, fmtClone);\n                  }\n\n                  dom.attr(\"src_data\", data); //将当前值存储在src_data中\n\n                  dom.attr(\"col_index\", inx);\n                  wrap.append(dom);\n                  return wrap.html();\n                }\n              });\n              columnDefs.push({\n                targets: inx,\n                global: global,\n                width: fmt.width || null,\n                data: colInx != 0 ? fmt.value + \"_$\" + colInx : fmt.value\n              });\n            };\n\n            var seperateToArray = function seperateToArray(data) {\n              var rs = [];\n              var inx = 1;\n              var obj = {};\n\n              var sepData = function sepData(inx) {\n                var obj = {};\n                var appendix = \"_$\" + inx;\n                var fd = false;\n\n                for (var i in data) {\n                  if (i.indexOf(appendix) != -1) {\n                    obj[i.split(\"_$\")[0]] = data[i];\n                    fd = true;\n                  }\n                }\n\n                if (fd) {\n                  rs.push(obj);\n                  inx++;\n                  sepData(inx);\n                }\n              };\n\n              for (var i in data) {\n                if (i.indexOf(\"_$\") == -1) {\n                  obj[i] = data[i];\n                }\n              }\n\n              rs.push(obj);\n              sepData(inx);\n              return rs;\n            };\n\n            var loopCol = function loopCol(inx) {\n              for (var i in format) {\n                loopformat(inx * format.length + parseInt(i), inx, i, format[i]);\n              }\n            };\n\n            for (var i = 0; i < col; i++) {\n              loopCol(i);\n            }\n\n            var rowCallback = function rowCallback(row, data, index) {\n              var rowData;\n\n              if (source.paging) {\n                rowData = rearrangeByCol([data])[0];\n                srcData.push(rowData);\n              } else {\n                rowData = data;\n              }\n\n              var find = srcData.find(function (item) {\n                if (item[rowCallbackKey] === data[rowCallbackKey]) return true;\n              });\n\n              var tableElement = function tableElement(data) {\n                for (var i in data) {\n                  this[i] = data[i];\n                } //this.$clone(data);\n\n              };\n\n              if (!rowData.hasOwnProperty(\"dom\")) {\n                Object.defineProperty(rowData, \"dom\", {\n                  enumerable: false,\n                  value: $(row)\n                });\n              }\n\n              rowlist.push(rowData);\n              tableElement.prototype = {\n                removeRow: function removeRow(callback) {\n                  table.row(row._DT_RowIndex).remove().draw(false);\n\n                  if (typeof callback == \"function\") {\n                    var rs = [];\n                    var dt = table.data();\n\n                    for (var i in dt) {\n                      if (parseInt(i) == i) {\n                        rs.push(dt[i]);\n                      }\n                    }\n\n                    callback(rs);\n                  }\n                }\n              };\n              find.tableElement = new tableElement(rowData);\n              var rowClickFn = source.$attr(\"on/rowClick\");\n              $(row).on(\"click\", function (event) {\n                if (rowClickFn) {\n                  rowClickFn({\n                    index: index,\n                    row: rowData\n                  });\n                }\n              });\n\n              var loopformat = function loopformat(inx, colInx, fmtInx, fmt) {\n                var dom = $(row).find(\"[col_index*=\" + inx + \"]\");\n\n                if (fmt.type == \"valueBased\") {\n                  var val = dom.attr(\"src_data\"); //获得存储的src_data;\n\n                  if (!val) val = \"\";\n                  var fmtClone = fmt.options[val];\n\n                  if (!fmtClone) {\n                    fmtClone = fmt.options[\"\"];\n                  }\n\n                  fmt = fmtClone;\n                }\n\n                if (fmt.type == \"checkbox\") {\n                  dom.on(\"change\", function (event) {\n                    $.fn.every = function (callback) {\n                      var every = true;\n                      $(this).each(function (index, element) {\n                        if (!callback(element)) {\n                          every = false;\n                        }\n                      });\n                      return every;\n                    };\n\n                    var checkall = innerContent.find(\"input#checkbox\").every(function (elem) {\n                      return $(elem).prop(\"checked\");\n                    });\n\n                    if (checkall) {\n                      innerContent.find(\"#checkboxall\").prop(\"checked\", true);\n                    } else {\n                      innerContent.find(\"#checkboxall\").removeAttr(\"checked\");\n                    }\n                  });\n                } else if (fmt.type == \"button\" || fmt.type == \"link\") {\n                  var clickFn = fmt.$attr(\"on/click\");\n                  dom.on(\"click\", function (event) {\n                    if (typeof clickFn == \"function\") {\n                      clickFn({\n                        index: index,\n                        row: rowData,\n                        columnIndex: fmtInx\n                      });\n                    }\n                  });\n                } else if (fmt.type == \"alarmSource\") {\n                  var clickFn = fmt.$attr(\"on/click\");\n                  dom.on(\"click\", function (event) {\n                    if (typeof clickFn == \"function\") {\n                      clickFn({\n                        index: index,\n                        row: rowData,\n                        columnIndex: fmtInx\n                      });\n                    }\n                  });\n                } else if (fmt.type == \"buttonGroup\") {\n                  for (var i in fmt.content) {\n                    (function (i) {\n                      var clickFn = fmt.content[i].$attr(\"on/click\");\n                      var subBtn = dom.find(\"#dataTable_btn_\" + i);\n                      subBtn.off(\"click\");\n                      subBtn.on(\"click\", function (event) {\n                        event.stopPropagation();\n                        /** 针对宝钢项目的临时替换方案*/\n\n                        if (rowData.nodeId) {\n                          element.setParameter(\"id\", rowData.nodeId);\n                        }\n                        /** 针对宝钢项目的临时替换方案*/\n\n\n                        if (typeof clickFn == \"function\") {\n                          clickFn({\n                            index: index,\n                            row: rowData\n                          });\n                        }\n                      });\n                    })(i);\n                  }\n                } else if (fmt.type == \"buttonGroupAlert\") {\n                  for (var i in fmt.content) {\n                    (function (i) {\n                      var clickFn = fmt.content[i].$attr(\"on/click\");\n                      var subBtn = dom.find(\"#dataTable_btn_\" + i);\n                      subBtn.off(\"click\");\n                      subBtn.on(\"click\", function (event) {\n                        event.stopPropagation();\n\n                        if (typeof clickFn == \"function\") {\n                          clickFn({\n                            index: index,\n                            row: rowData\n                          });\n                        }\n                      });\n                    })(i);\n                  }\n                } else if (fmt.type == \"input\") {\n                  var changeFn = fmt.$attr(\"on/change\");\n                  dom.val(data[fmt.value] || \"\");\n                  dom.on(\"change\", function (event) {\n                    event.stopPropagation();\n\n                    if (changeFn) {\n                      changeFn({\n                        index: index,\n                        row: rowData,\n                        value: dom.val()\n                      });\n                    }\n                  });\n                } else if (fmt.type == \"uploadFile2\") {\n                  var submitBtn = $(\"<button></button>\");\n                  submitBtn.addClass(\"btn btn-primary\");\n                  submitBtn.text(\"上传\");\n                  var submitFn = fmt.$attr(\"on/submit\");\n                  var fileDom = $(row).find(\"#fileDom\");\n                  var group = $(row).find(\"#group\");\n                  var button = $(row).find(\"#buttonUpload\");\n                  var txt = $(row).find(\"#txt\");\n                  var config = {};\n                  config.group = fmt.group;\n                  submitBtn.on(\"click\", function (event) {\n                    element.uploadFile1(file, config, function (event) {\n                      submitBtn.remove();\n                      txt.text(file.name + \"已经成功上传！\");\n                      cfg = event.data;\n\n                      if (submitFn) {\n                        submitFn(event, fileDom, fmt, rowData); //需要把返回的全部callback回来\n                        // submitFn(event[\"data\"]);\n                        // previewBtn.off(\"click\");\n                        // previewBtn.on(\"click\", function(evt) {\n                        //   element.createSystemPopupByJsonName(\"imagePrev\", {\n                        //     title: \"图片内容预览\",\n                        //     width: \"500px\"\n                        //   }, {\n                        //     url: event[\"data\"].value\n                        //   })\n                        // });\n                      }\n                    });\n                  });\n                  fileDom.on(\"change\", function (event) {\n                    file = fileDom[0].files[0];\n                    txt.css({\n                      \"overflow\": \"hidden\",\n                      \"text-overflow\": \"ellipsis\",\n                      \"white-space\": \"nowrap\",\n                      \"width\": \"80px\",\n                      \"display\": \"block\"\n                    });\n                    txt.text(file.name);\n                    txt.attr(\"title\", file.name);\n                    group.append(submitBtn);\n                  });\n                  button.on(\"click\", function (event) {\n                    fileDom.trigger(\"click\");\n                  });\n                } else if (fmt.type == \"dateTimePicker\") {\n                  dom.children().remove();\n                  var td = $(\"<div></div>\");\n                  var style = fmt.style;\n\n                  if (_typeof(style) == \"object\") {\n                    td.css(style);\n                  }\n\n                  var cls = fmt.class || \"\";\n                  var value = fmt.value;\n                  td.addClass(cls);\n                  var wrap = $(\"<div></div>\");\n                  var changeFn = fmt.$attr(\"on/change\");\n                  var id = Math.uuid();\n                  var input = $(\"<input id=dateTime\" + id + \" />\").addClass(\"form-control\").attr(\"type\", \"text\");\n                  td.append(wrap);\n                  wrap.css(\"position\", \"relative\");\n                  wrap.append(input);\n                  setTimeout(function () {\n                    $$.loadExternalJs(['laydate'], function (laydate) {\n                      laydate.render({\n                        elem: '#dateTime' + id,\n                        //指定元素'#dateRange'\n                        theme: '#393D49',\n                        type: 'datetime',\n                        btns: ['clear', 'confirm'],\n                        value: value ? useMomentFormat(value, \"YYYY-MM-DD HH:mm:ss\") : '',\n                        done: function done(value, date, endDate) {\n                          if (changeFn) {\n                            changeFn({\n                              target: element,\n                              global: global,\n                              row: rowData,\n                              value: {\n                                getUTCDateString: value == '' ? '' : formatDatebyMomentToUTC(value),\n                                //格林尼治时间格式    element.getDateHandler(value).getUTCDateString()\n                                getDateString: value\n                              }\n                            });\n                          }\n                        }\n                      });\n                    });\n                  });\n                  dom.append(td);\n                } else if (fmt.type == \"select\") {\n                  var val = fmt.value + \"\";\n                  var changeFn = fmt.$attr(\"on/change\");\n                  var options = (typeof fmt.options == \"function\" ? fmt.options(data) : fmt.options) || [];\n                  var format = fmt.format || {\n                    \"id\": \"id\",\n                    \"label\": \"label\"\n                  };\n                  var ix = 0;\n                  var dt = options.map(function (elem) {\n                    var rs = {\n                      id: ix,\n                      text: elem[format.label]\n                    };\n                    ix++;\n                    return rs;\n                  });\n                  dom.children().remove();\n                  $$.loadExternalJs([\"select2\"], function () {\n                    var select2Dom = $(\"<select></select>\");\n                    var changeFn = fmt.$attr(\"on/change\");\n                    select2Dom.css(\"width\", \"100%\");\n                    var find = options.find(function (elem) {\n                      return elem[format[\"id\"]] == data[fmt.value];\n                    });\n                    var inxStr = options.indexOf(find) + \"\";\n                    var baseSelect2 = {\n                      language: {\n                        noResults: function noResults() {\n                          return fmt.noresults || \"没有该匹配项\";\n                        }\n                      },\n                      placeholder: fmt.placeholder || \"请选择...\",\n                      data: dt\n                    };\n                    select2Dom.on(\"select2:select\", function (evt) {\n                      if (typeof changeFn == \"function\") {\n                        var id = evt.params.data.id;\n                        var find = options[id];\n\n                        try {\n                          changeFn({\n                            row: rowData,\n                            current: fmt,\n                            value: find\n                          });\n                        } catch (e) {\n                          ;\n                        }\n                      }\n                    });\n                    dom.append(select2Dom);\n                    select2Dom.select2(baseSelect2);\n                    select2Dom.val(inxStr);\n                    select2Dom.trigger(\"change.select2\");\n                  });\n                }\n              };\n\n              var loopCol = function loopCol(inx) {\n                for (var i in format) {\n                  loopformat(inx * format.length + parseInt(i), inx, i, format[i]);\n                }\n              };\n\n              for (var i = 0; i < col; i++) {\n                loopCol(i);\n              }\n\n              compile(row)(scope);\n            };\n\n            var rearrangeByCol = function rearrangeByCol(data) {\n              var rs = [];\n\n              var extend = function extend(obj, item) {\n                for (var i in item) {\n                  obj[i] = item[i];\n                }\n              };\n\n              var clone = function clone(data, inx) {\n                var result = {};\n\n                for (var i in data) {\n                  var offset = inx != 0 ? \"_$\" + inx : \"\";\n                  result[i + offset] = data[i];\n                }\n\n                return result;\n              };\n\n              var loop = function loop(inx, item) {\n                var ix = Math.floor(inx / col);\n                var ic = inx % col;\n\n                if (!rs[ix]) {\n                  rs[ix] = {};\n                }\n\n                extend(rs[ix], clone(item, ic));\n              };\n\n              for (var i in data) {\n                loop(i, data[i]);\n              }\n\n              return rs;\n            };\n\n            var rData = rearrangeByCol(srcData);\n            var domTxt = \"\";\n\n            if (listbottom == \"standard\") {\n              domTxt = $.ProudSmart.datatable.footerdom;\n            } else if (listbottom == \"none\") {\n              domTxt = \"\";\n            } else if (listbottom == \"pageAndTotal\") {\n              domTxt = '<\"row\"<\"clo-lg-12\">>t<\"row footerdom\"<\"col-lg-4\"l><\"col-lg-8\"p>>';\n            } else if (listbottom == \"pageOnly\") {\n              domTxt = '<\"row\"<\"clo-lg-12\">>t<\"row footerdom\"<\"col-lg-12\"p>>';\n            } else {\n              domTxt = '<\"row\"<\"clo-lg-12\">>t<\"row footerdom\"<\"col-lg-12\"p>>';\n            }\n\n            var initComplete = function initComplete() {};\n\n            var pipeline = function pipeline(opts, handlerFuc, params) {\n              var conf = $.extend({\n                pages: 1,\n                // number of pages to cache\n                url: '',\n                // script url\n                data: null,\n                // function or object with parameters to send to the server\n                // matching how `ajax.data` works in DataTables\n                method: 'POST' // Ajax HTTP method\n\n              }, opts); // Private variables for storing the cache\n\n              var cacheLower = -1;\n              var cacheUpper = null;\n              var cacheLastRequest = null;\n              var cacheLastJson = null;\n              return function (request, drawCallback, settings) {\n                var ajax = false;\n                var requestStart = request.start;\n                var drawStart = request.start;\n                var requestLength = request.length;\n                var requestEnd = requestStart + requestLength; //        var sort = request.columns[request.order[0].column].data; //排序列的字段\n                //        var sortType = request.order[0].dir; //排序的方式\n\n                request.order.pop();\n\n                if (settings.clearCache) {\n                  // API requested that the cache be cleared\n                  ajax = true;\n                  settings.clearCache = false;\n                } else if (cacheLower < 0 || requestStart < cacheLower || requestEnd > cacheUpper) {\n                  // outside cached data - need to make a request\n                  ajax = true;\n                } else if (JSON.stringify(request.order) !== JSON.stringify(cacheLastRequest.order) || JSON.stringify(request.columns) !== JSON.stringify(cacheLastRequest.columns) || JSON.stringify(request.search) !== JSON.stringify(cacheLastRequest.search)) {\n                  // properties changed (ordering, columns, searching)\n                  ajax = true;\n                } else {\n                  ajax = true;\n                } // Store the request for checking next time around\n\n\n                cacheLastRequest = $.extend(true, {}, request);\n\n                if (ajax) {\n                  // Need data from the server\n                  if (requestStart < cacheLower) {\n                    requestStart = requestStart - requestLength * (conf.pages - 1);\n\n                    if (requestStart < 0) {\n                      requestStart = 0;\n                    }\n                  }\n\n                  cacheLower = requestStart;\n                  cacheUpper = requestStart + requestLength * conf.pages;\n                  request.start = requestStart;\n                  request.length = requestLength * conf.pages; // Provide the same `data` options as DataTables.\n\n                  if ($.isFunction(conf.data)) {\n                    // As a function it is executed with the data object as an arg\n                    // for manipulation. If an object is returned, it is used as the\n                    // data object to submit\n                    var d = conf.data(request);\n\n                    if (d) {\n                      $.extend(request, d);\n                    }\n                  } else if ($.isPlainObject(conf.data)) {\n                    // As an object, the data given extends the default\n                    $.extend(request, conf.data);\n                  }\n\n                  var pageRequest = {\n                    start: request.start,\n                    length: request.length,\n                    //            sort :sort,\n                    //            sortType :sortType,\n                    statCount: request.draw == 1\n                  };\n                  handlerFuc(params, pageRequest, function (returnObj, total) {\n                    //初始化选中状态\n                    returnObj.forEach(function (item) {\n                      item.selected = false;\n                    });\n                    var json = {};\n                    json.data = returnObj;\n                    json.draw = request.draw; // Update the echo for each response\n\n                    json.recordsTotal = total != undefined ? total == -1 ? cacheLastJson.recordsTotal : total : returnObj.length;\n                    json.recordsFiltered = json.recordsTotal;\n                    cacheLastJson = $.extend(true, {}, json);\n\n                    if (cacheLower != drawStart) {\n                      json.data.splice(0, drawStart - cacheLower);\n                    }\n\n                    if (requestLength >= -1) {\n                      json.data.splice(requestLength, json.data.length);\n                    } // console.assert(typeof json === \"object\" && json.data && json.data.length > 0, JSON.stringify(params), JSON.stringify(pageRequest));\n\n\n                    drawCallback(json);\n                  });\n                }\n              };\n            };\n\n            var config = {\n              ordering: false,\n              dom: domTxt,\n              language: $.ProudSmart.datatable.language,\n              rowCallback: rowCallback,\n              initComplete: initComplete,\n              pageLength: pageSize,\n              columns: columns,\n              columnDefs: columnDefs\n            }; //如果有paging这个处理，说明是真分页了\n\n            if (source.paging) {\n              /**\n               * 韩星 增加了把查询条件带进去去查\n               * source.paging 是否实现分页\n               * source.params 是把条件带进来一起查询\n               * @type {boolean}\n               * 2018-3-22\n               */\n              config.processing = true;\n              config.serverSide = true;\n              config.ajax = pipeline({}, source.paging, source.params);\n            } else {\n              config.data = rData;\n            }\n\n            if (table) {\n              table.destroy();\n              innerContent.empty();\n            }\n\n            table = innerContent.DataTable(config);\n\n            if (showSelect) {\n              var all = $(innerContent.find(\"th\")[0]);\n              all.children().remove();\n              all.text(\"\");\n              var checkboxall = $(\"<input type=\\\"checkbox\\\" id=\\\"checkboxall\\\"/>\");\n              checkboxall.on(\"change\", function (event) {\n                var checked = $(this).prop(\"checked\");\n\n                if (checked) {\n                  innerContent.find(\"input#checkbox\").prop(\"checked\", true);\n                } else {\n                  innerContent.find(\"input#checkbox\").removeAttr(\"checked\");\n                }\n              });\n              all.append(checkboxall);\n            }\n\n            element.search = function () {\n              if (arguments.length == 1) {\n                var key = arguments[0];\n                innerContent.DataTable().search(key, false, true);\n              } else if (arguments.length == 2) {\n                var inx = arguments[0];\n                var key = arguments[1];\n                innerContent.DataTable().column(inx).search(key, false, true);\n              }\n            };\n\n            innerContent.css(\"width\", \"100%\");\n\n            table.getChecked = function () {\n              //          return rowlist.filter(function(elem) {\n              //            var dom = elem.dom;\n              //            return dom.find(\"input#checkbox\").prop(\"checked\");\n              //          });\n              //去重复 bug676\n              var rowlistAllChecked = rowlist.filter(function (elem, index, array) {\n                if (elem.dom.find(\"input#checkbox\").prop(\"checked\")) return array.indexOf(elem) === index;\n                return false;\n              });\n              return rowlistAllChecked;\n            };\n\n            if (callback) {\n              callback(table);\n            }\n          });\n        });\n      };\n\n      var initFn = expression.$attr(\"on/init\");\n\n      var start = function start() {\n        if (getOption == \"simulate\") {\n          var param = expression.$attr(\"simulate\");\n\n          if (param == undefined) {\n            param = {\n              size: 4,\n              formatter: [{\n                label: \"label\",\n                value: function value(index, elem) {\n                  return \"设备列表\" + index;\n                }\n              }, {\n                label: \"data1\",\n                value: function value(index, elem) {\n                  return elem.random([0, 100]);\n                }\n              }, {\n                label: \"data2\",\n                value: function value(index, elem) {\n                  return elem.random([0, 100]);\n                }\n              }, {\n                label: \"data3\",\n                value: function value(index, elem) {\n                  return elem.random([0, 1]);\n                }\n              }]\n            };\n          } else {\n            if (param.formatter == undefined) {\n              param.formatter = [{\n                label: \"label\",\n                value: function value(index, elem) {\n                  return \"设备列表\" + index;\n                }\n              }, {\n                label: \"data1\",\n                value: function value(index, elem) {\n                  return elem.random([0, 100]);\n                }\n              }, {\n                label: \"data2\",\n                value: function value(index, elem) {\n                  return elem.random([0, 100]);\n                }\n              }, {\n                label: \"data3\",\n                value: function value(index, elem) {\n                  return elem.random([0, 1]);\n                }\n              }];\n            }\n          }\n\n          element.getSimulateList(param, function (data) {\n            element.render(data);\n          });\n        } else if (getOption == \"alert\") {\n          element.getAllAlerts(function (alerts) {\n            element.render(alerts);\n          });\n        } else if (getOption == \"newdevice\") {\n          var params = {\n            domainPath: userLoginUIService.user.domains\n          };\n          element.getDevicesByCondition(params, function (devices) {\n            element.render(devices);\n          });\n        } else if (getOption == \"energyType\") {\n          element.energyTypeList(function (energyType) {\n            element.render(energyType);\n          });\n        } else if (getOption == \"currentDirectiveByDevice\") {\n          element.currentDirective(function (directives) {\n            element.render(directives);\n          });\n        } else if (getOption == \"currentAlertByDevice\") {\n          element.getCurrentAlert(function (alerts) {\n            element.render(alerts);\n          });\n        } else if (getOption == \"currentDevicesByProject\") {\n          element.getCurrentDevices(function (devices) {\n            element.render(devices);\n          });\n        }\n      };\n\n      if (typeof initFn == \"function\") {\n        try {\n          initFn({\n            target: element,\n            global: global\n          });\n        } catch (e) {\n          //      growl.error(\"组件［列表］的初始化表达式配置发生错误\" + e.message);\n          ;\n        }\n      } else {\n        defer.resolve(\"underwatch\");\n        start();\n      }\n\n      wrap.underWatch = true;\n    }\n\n    return wrap;\n  };\n});"],"sourceRoot":"/source/"}