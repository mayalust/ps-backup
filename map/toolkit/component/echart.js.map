{"version":3,"sources":["toolkit/component/echart.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","define","commonMethod","data","run","baseOption","extension","expression","target","echartTarget","zoomOld","mapJson","tg","growl","elemData","wrap","$","echartDom","element","buttonEnabled","serviceCenterService","kqiManagerUIService","thridPartyApiService","angularStyle","timeout","global","window","route","previewMode","rootScope","Info","SwSocket","scope","ngDialog","kqiModel","$attr","ci","kpi","oriLength","loadData","reconstruct","clone","$clone","i","series","show","ar","j","push","css","resource_applied","kpi_applied","resource_time","Object","defineProperty","enumerable","append","showPanel","list","para","bg","page","routeParam","blank","closeBtn","title","text","ul","createLi","li","label","on","event","oldParam","parameter","undefined","JSON","parse","resource","projectId","id","encodeURIComponent","stringify","location","href","closeIcon","addClass","remove","before","setResource","resources","setTime","time","setKpi","setHighlight","find","symbol","highlight","name","select","bmap","center","value","setOption","searchHighlight","heiLabel","valueObj","ifZoom","zoom","findPrev","elem","findDetail","el","removeCover","createSearch","dtData","detail","slist","searchBox","txt","searchArea","filterLabel","icon","button","searchlist","key","val","children","createItem","div","stopPropagation","filter","dt","check","item","pinyin","$$","chineseCharacterToPinyin","indexOf","toUpperCase","createDetail","getValuesByCi","then","dataline","warningList","sort","a","b","colors","loop","index","row","col1","col2","link","open","wp","getProgress","number","barWrap","bar","parseInt","removeClass","removeLast","length","slice","setTitle","setSubtitle","setAxisByCategory","axis","array","type","setAxisByValue","system","setSeries","inx","last","style","$remove","hasOwnProperty","setLegend","setVisualMap","baseline","rs","getBaseline","idata","bl","setKqiParameters","parameters","subtitle","legend","getLegend","getSeries","xAxisType","getxAxis","yAxisType","setParameters","runExpression","result","funRes","code","Error","message","fnResult","dtype","applied","showFilter","prev","detaildata","search","searchable","showSearch","zoomTo","zoomEchartMap","tout","getOption","onmousewheel","normalClick","off","doubleClick","timespan","frequency","format","category","condition","validValue","test","checkHasValue","option","Array","some","showNoDataSign","size","height","prepend","hideNoDataSign","customCategory","aggregate_type","granularityUnit","aggregate_instance","simulate","method","aggregate_rule","autoFillBlank","echartToOption","echart","hideLoading","e","current","$$route","controller","error","resize","customOption","runKqiModel","kqiModelId","getKqiModelById","viewContent","eval","variables","xAxis","map","concat","loopVar","variable","ob","split","kqiObj","calKqi","sim","arr","k","l","setCondition","cond","getAisInfos","baseConfig","$$childTail","projectConfig","extendService","interval","updateInterval","updateInfo","getSignalShipInfo","returnObj","setInterval","render","startTime","endTime","getValueList","rawData","getTime","unit","failure","kpiQueryModel","isRealTimeData","nodeIds","kpiCodes","timeRange","statisticType","includeInstance","timePeriod","aggregateType","condList","condi","simuData","getValueListBytime","paramSocket","ciid","toString","uuid","Math","operation","SwSocket_success","ec","firstTime","tspan","kpiName","nodeId","kpiCode","change","nochange","Date","timestamp","FormatByString","shift","register","send","loadExternalJs","echarts","getCiKpi","start","init","wholeClickFn","cancelBubble","clickFn","showLoading","initFn","require","count","wait","BMap","geo","registerMap","path","get","cJson"],"mappings":"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","file":"toolkit/component/echart.js","sourcesContent":["function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/**\n * Created by leonlin on 16/11/3.\n */\ndefine(['commonMethod'], function (commonMethod) {\n  return function (data) {\n    var run, baseOption;\n    var extension = {};\n    var expression;\n    var target;\n    var echartTarget;\n    var zoomOld;\n    var mapJson;\n    var tg = {};\n    var growl = data.growl;\n    var elemData = data;\n    var wrap = $(\"<div></div>\");\n    var echartDom = $(\"<div></div>\");\n    var element = data.element;\n    var buttonEnabled = data.buttonEnabled;\n    var serviceCenterService = data.serviceCenterService;\n    var kqiManagerUIService = data.kqiManagerUIService;\n    var thridPartyApiService = data.thridPartyApiService;\n    var angularStyle = data.angularStyle;\n    var timeout = data.timeout;\n    var global = data.global;\n    var window = data.window;\n    var route = data.route;\n    var previewMode = data.previewMode;\n    var rootScope = data.rootScope;\n    var Info = data.Info;\n    var SwSocket = data.SwSocket;\n    var scope = data.scope;\n    var ngDialog = data.ngDialog;\n    var kqiModel = element.$attr(\"data/kqiModel\");\n    var ci, kpi;\n    var oriLength = 0;\n    var loadData = [];\n\n    var reconstruct = function reconstruct(data) {\n      var clone = data.$clone();\n\n      for (var i in clone.series) {\n        if (clone.series[i].show == false) {\n          clone.series[i].data = [];\n        } else {\n          var ar = [];\n\n          for (var j in clone.series[i].data) {\n            if (clone.series[i].data[j].show != false) {\n              ar.push(clone.series[i].data[j]);\n            }\n          }\n\n          clone.series[i].data = ar;\n        }\n      }\n\n      return clone;\n    };\n\n    wrap.css(\"position\", \"relative\");\n    element.resource_applied = [];\n    element.kpi_applied = [];\n    element.resource_time = {};\n    Object.defineProperty(element, \"resource_applied\", {\n      enumerable: false\n    });\n    Object.defineProperty(element, \"kpi_applied\", {\n      enumerable: false\n    });\n    wrap.append(echartDom);\n\n    element.showPanel = function (list) {\n      var bg = $(\"<div></div>\"),\n          page = elemData.routeParam.page,\n          para;\n      var wrap = $(\"<div></div>\").css(\"position\", \"relative\");\n      var blank = $(\"<div></div>\").css(\"height\", \"1px\");\n      var closeBtn = $(\"<div></div>\").css(\"cursor\", \"pointer\").css(\"right\", \"10px\").css(\"top\", \"10px\").css(\"position\", \"absolute\");\n      var title = $(\"<div></div>\").text(\"选择本区域项目\").css(\"margin\", \"20px\").css(\"font-weight\", \"bold\");\n      var ul = $(\"<ul></ul>\").css(\"margin\", \"10px\").css(\"padding\", \"0px\");\n\n      var createLi = function createLi(data) {\n        var li = $(\"<li></li>\").css(\"padding\", \"7px\").css(\"margin\", \"3px\").css(\"color\", \"#fff\").css(\"list-style\", \"none\").css(\"cursor\", \"pointer\").css(\"background-color\", \"#3c8dbc\");\n        li.text(data.label);\n        li.on(\"click\", function (event) {\n          var oldParam = elemData.routeParam.parameter;\n\n          if (oldParam == undefined) {\n            oldParam = ['0'];\n          } else {\n            oldParam = JSON.parse(oldParam);\n          }\n\n          var resource = {\n            projectId: data.id\n          };\n          oldParam.push(resource);\n          para = encodeURIComponent(JSON.stringify(oldParam));\n          elemData.window.location.href = \"../app-sc/index_freeboard.html#/freeboard/\" + page + \"|topo/\" + para;\n        });\n        return li;\n      };\n\n      for (var i in list) {\n        ul.append(createLi(list[i]));\n      }\n\n      ;\n      var closeIcon = $(\"<span></span>\").addClass(\"glyphicon glyphicon-remove\");\n      closeBtn.append(closeIcon);\n      closeBtn.on(\"click\", function () {\n        bg.remove();\n      });\n      wrap.append(closeBtn);\n      wrap.append(blank);\n      wrap.append(title);\n      wrap.append(ul);\n      wrap.css(\"margin\", \"100px auto\");\n      wrap.css(\"width\", \"400px\");\n      wrap.css(\"min-height\", \"200px\");\n      wrap.css(\"background-color\", \"#fff\");\n      bg.css(\"width\", \"100%\");\n      bg.css(\"height\", \"100%\");\n      bg.css(\"left\", \"0px\");\n      bg.css(\"top\", \"0px\");\n      bg.css(\"position\", \"absolute\");\n      bg.css(\"background-color\", \"rgba(0,0,0,.6)\");\n      bg.css(\"z-index\", 1000);\n      echartDom.before(bg);\n      bg.append(wrap);\n    };\n\n    element.setResource = function (resources) {\n      element.resource_applied = resources;\n    };\n\n    element.setTime = function (time) {\n      element.resource_time = time;\n    };\n\n    element.setKpi = function (kpi) {\n      element.kpi_applied = kpi;\n    };\n\n    element.setHighlight = function (label) {\n      var find, symbol;\n\n      for (var i in baseOption.series) {\n        for (var j in baseOption.series[i].data) {\n          if (baseOption.series[i].data[j].label == label) {\n            symbol = baseOption.series[i].symbol;\n            find = baseOption.series[i].data[j];\n          }\n        }\n      }\n\n      if (find) {\n        var highlight = baseOption.series.find(function (data) {\n          return data.name == \"highlight\";\n        });\n        var select = baseOption.series.find(function (data) {\n          return data.name == \"select\";\n        });\n        highlight.data = [find];\n        highlight.show = true;\n\n        if (select) {\n          select.data = [find];\n          select.symbol = symbol;\n        }\n\n        baseOption.bmap.center = find.value;\n      }\n\n      ;\n      echartTarget.setOption(reconstruct(baseOption), true);\n    };\n\n    element.searchHighlight = function (heiLabel) {\n      var find;\n\n      for (var i in baseOption.series) {\n        for (var j in baseOption.series[i].data) {\n          if (baseOption.series[i].data[j].label == heiLabel) {\n            find = baseOption.series[i].data[j];\n          }\n        }\n      }\n\n      (function createSearch(valueObj) {\n        var ifZoom = expression.$attr(\"zoom\");\n        baseOption.bmap.center = valueObj.value;\n        baseOption.bmap.zoom = 9;\n\n        var removeCover = function removeCover(obj) {\n          var find = obj.data.find(function (el) {\n            return el.label == heiLabel;\n          });\n\n          for (var i in obj.data) {\n            obj.data[i].show = true;\n\n            if (find) {\n              if (obj.data[i]) {\n                if (obj.data[i].value[0] == find.value[0] && obj.data[i].value[1] == find.value[1] && obj.data[i].label != find.label) {\n                  obj.data[i].show = false;\n                }\n              }\n            }\n          }\n        };\n\n        if (ifZoom) {\n          var findPrev = baseOption.series.find(function (elem) {\n            return elem.name == \"level0\";\n          });\n          var findDetail = baseOption.series.find(function (elem) {\n            return elem.name == \"level1\";\n          });\n          removeCover(findDetail);\n          findPrev.show = false;\n          findDetail.show = true;\n        }\n\n        ;\n        var highlight = baseOption.series.find(function (data) {\n          return data.name == \"highlight\";\n        });\n        highlight.data = [find];\n        highlight.show = true;\n        echartTarget.setOption(reconstruct(baseOption), true);\n      })(find);\n    };\n\n    var createSearch = function createSearch(dtData) {\n      var detail = $(\"<div></div>\");\n      var slist = dtData.data;\n      detail.css(\"position\", \"absolute\");\n      detail.css(\"z-index\", 9);\n      detail.css(\"right\", \"50px\");\n      detail.css(\"top\", \"20px\");\n      detail.css(\"maxHeight\", \"600px\");\n      detail.css(\"overflow\", \"auto\");\n      var searchBox = $(\"<div class='row' style='padding:10px;width:280px;'></div>\");\n      searchBox.css(\"cursor\", \"pointer\");\n      searchBox.css(\"background-color\", \"rgba(250,250,250,.8)\");\n      searchBox.css(\"border-bottom\", \"1px solid #ccc\");\n      var searchArea = $(\"<input />\").addClass(\"form-control\").css(\"display\", \"inline-block\").css(\"height\", \"35px\");\n      var txt;\n\n      if (expression) {\n        if (expression.filterLabel) {\n          txt = expression.filterLabel;\n        }\n      }\n\n      var text = $(\"<span></span>\").text(txt ? txt : \"项目检索\").css(\"color\", \"#666\").css(\"display\", \"block\").css(\"font-size\", \"14px\").css(\"line-height\", \"30px\").css(\"font-weight\", \"bold\");\n      var icon = $(\"<span></span>\").addClass(\"glyphicon glyphicon-search\");\n      var button = $(\"<button></button>\").addClass(\"btn btn-primary\");\n      var searchlist = $(\"<div></div>\");\n      button.append(icon);\n      searchBox.append(text);\n      searchBox.append(searchArea);\n      detail.append(searchBox);\n      detail.append(searchlist);\n      searchArea.on(\"keyup\", function (event) {\n        var key = searchArea.val();\n        searchlist.children().remove();\n\n        var createItem = function createItem(elem) {\n          var div = $(\"<div></div>\").text(elem.label);\n          div.css(\"padding\", \"10px\");\n          div.css(\"cursor\", \"pointer\");\n          div.css(\"background-color\", \"rgba(250,250,250,.8)\");\n          div.css(\"border-bottom\", \"1px solid #ccc\");\n          div.on(\"click\", function (event) {\n            event.stopPropagation();\n            var ifZoom = expression.$attr(\"zoom\");\n            searchArea.val(elem.label);\n            searchlist.children().remove();\n            baseOption.bmap.center = elem.value;\n            baseOption.bmap.zoom = 9;\n\n            var removeCover = function removeCover(obj) {\n              var find = obj.data.find(function (el) {\n                return el.label == elem.label;\n              });\n\n              for (var i in obj.data) {\n                obj.data[i].show = true;\n\n                if (find) {\n                  if (obj.data[i]) {\n                    if (obj.data[i].value[0] == find.value[0] && obj.data[i].value[1] == find.value[1] && obj.data[i].label != find.label) {\n                      obj.data[i].show = false;\n                    }\n                  }\n                }\n              }\n            };\n\n            if (ifZoom) {\n              var findPrev = baseOption.series.find(function (elem) {\n                return elem.name == \"level0\";\n              });\n              var findDetail = baseOption.series.find(function (elem) {\n                return elem.name == \"level1\";\n              });\n              removeCover(findDetail);\n              findPrev.show = false;\n              findDetail.show = true;\n            }\n\n            ;\n            var highlight = baseOption.series.find(function (data) {\n              return data.name == \"highlight\";\n            });\n            var select = baseOption.series.find(function (data) {\n              return data.name == \"select\";\n            });\n            highlight.data = dtData.data.filter(function (el) {\n              return el.label == elem.label;\n            });\n            highlight.show = true;\n\n            if (select) {\n              select.data = dt.data.filter(function (el) {\n                return el.label == elem.label;\n              });\n            }\n\n            echartTarget.setOption(reconstruct(baseOption));\n          });\n          return div;\n        };\n\n        var check = function check(item) {\n          if (key == \"\") {\n            return true;\n          } else {\n            var pinyin = $$.chineseCharacterToPinyin(item);\n\n            if (item.indexOf(key) != -1) {\n              return true;\n            } else if (pinyin.indexOf(key.toUpperCase()) != -1) {\n              return true;\n            } else {\n              return false;\n            }\n          }\n        };\n\n        for (var i in slist) {\n          if (check(slist[i].label)) {\n            searchlist.append(createItem(slist[i]));\n          }\n        }\n\n        ;\n      });\n      return detail;\n    };\n\n    var createDetail = function createDetail() {\n      var detail = $(\"<div></div>\").css(\"background-color\", \"#fff\");\n      ci = element.resource_applied;\n      kpi = element.kpi_applied;\n\n      if (ci[0]) {\n        serviceCenterService.getValuesByCi(ci, kpi).then(function (data) {\n          var dataline = data.series[0].data.filter(function (elem) {\n            return elem.name.kpi.indexOf(\"告警\") == -1;\n          });\n          var warningList = data.series[0].data.filter(function (elem) {\n            return elem.name.kpi.indexOf(\"告警\") != -1;\n          });\n          dataline = dataline.sort(function (a, b) {\n            if (b.name.kpi == \"项目总数\") {\n              return 1;\n            } else {\n              return -1;\n            }\n          });\n          detail.css(\"position\", \"absolute\");\n          detail.css(\"z-index\", 9);\n          detail.css(\"left\", \"10px\");\n          detail.css(\"top\", \"10px\");\n          var colors = [\"#3c8dbc\", \"#3c8dbc\", \"#aa0000\", \"#649835\"];\n\n          var loop = function loop(index, element) {\n            var row = $(\"<div class='row' style='padding:10px;width:170px;'></div>\");\n            row.css(\"cursor\", \"pointer\");\n            row.css(\"background-color\", \"#fff\");\n            row.css(\"border-bottom\", \"1px solid #ddd\");\n            var col1 = $(\"<div class='col-md-12'>\" + element.name.kpi + \"</div>\");\n            col1.css(\"color\", \"#666\");\n            col1.css(\"font-size\", \"14px\");\n            col1.css(\"font-weight\", \"bold\");\n            var col2 = $(\"<div class='col-md-12'>\" + element.value + \"</div>\");\n            col2.css(\"color\", colors[index]);\n            col2.css(\"font-size\", \"30px\");\n            col2.css(\"font-weight\", \"bold\");\n            row.append(col1);\n            row.append(col2);\n            detail.append(row);\n            row.on(\"click\", function (event) {\n              if (element.link) {\n                window.open(element.link);\n              }\n            });\n          };\n\n          for (var i in dataline) {\n            loop(i, dataline[i]);\n          }\n\n          var wp = $(\"<div></div>\").css(\"padding\", \"10px\");\n          wp.css(\"background-color\", \"#fff\");\n\n          var getProgress = function getProgress(data) {\n            var wrap = $(\"<div></div>\").addClass(\"progress-group\");\n            var text = $(\"<span></span>\").addClass(\"progress-text\").text(data.name.kpi);\n            var number = $(\"<span></span>\").addClass(\"progress-number\").text(data.value);\n            var barWrap = $(\"<div></div>\").addClass(\"progress sm\");\n            var bar = $(\"<div></div>\").addClass(\"progress-bar\").css(\"width\", data.value / 10 * 100 + \"%\");\n\n            switch (data.name.kpi) {\n              case \"严重告警计数\":\n                bar.css(\"background-color\", \"#e7675d\");\n                break;\n\n              case \"重要告警计数\":\n                bar.css(\"background-color\", \"#ed9700\");\n                break;\n\n              case \"次要告警计数\":\n                bar.css(\"background-color\", \"#e1cd0a\");\n                break;\n\n              case \"警告告警计数\":\n                bar.css(\"background-color\", \"#25bce7\");\n                break;\n\n              default:\n                bar.css(\"background-color\", \"#25bce7\");\n            }\n\n            wrap.append(text).append(number).append(barWrap);\n            barWrap.append(bar);\n            bar.css(\"width\", number / 10 * 100 + \"%\");\n\n            switch (true) {\n              case parseInt(number) > 8:\n                bar.removeClass().addClass(\"progress-bar progress-bar-green\");\n                break;\n\n              case parseInt(number) > 5:\n                bar.removeClass().addClass(\"progress-bar progress-bar-yellow\");\n                break;\n\n              case parseInt(number) > 3:\n                bar.removeClass().addClass(\"progress-bar progress-bar-yellow\");\n                break;\n\n              case parseInt(number) > 1:\n                bar.removeClass().addClass(\"progress-bar progress-bar-red\");\n                break;\n\n              default:\n                bar.removeClass().addClass(\"progress-bar progress-bar-red\");\n            }\n\n            return wrap;\n          };\n\n          for (var i in warningList) {\n            wp.append(getProgress(warningList[i]));\n          }\n\n          ;\n          detail.append(wp);\n        });\n      }\n\n      return detail;\n    };\n\n    var removeLast = function removeLast(data) {\n      if (data.length > 0) {\n        if (data[data.length - 1].length == 0) {\n          return data.slice(0, -1);\n        } else {\n          return data;\n        }\n      } else {\n        return data;\n      }\n    };\n\n    var setTitle = function setTitle(target, text) {\n      target.$attr(\"title/text\", text);\n    };\n\n    var setSubtitle = function setSubtitle(target, text) {\n      target.$attr(\"title/subtext\", text);\n    };\n\n    var setAxisByCategory = function setAxisByCategory(target, dt, axis) {\n      var removeBlankELement = function removeBlankELement(array) {\n        if (array) {\n          if (array[array.length - 1].length == 0) {\n            return array.slice(0, -1);\n          } else {\n            return array;\n          }\n        } else {\n          return [];\n        }\n      };\n\n      var data = removeBlankELement(dt);\n      oriLength = dt[0].length;\n\n      if (data.length >= target[axis].length) {\n        for (var i = 0; i < target[axis].length; i++) {\n          target[axis][i].type = 'category';\n          target[axis][i].data = data[i];\n        }\n\n        var clone = target[axis][i - 1];\n\n        for (var j = i; j < data.length; j++) {\n          target[axis][j] = clone;\n          target[axis][j].type = 'category';\n          target[axis][j].data = data[j];\n        }\n      } else {\n        for (var i = 0; i < data.length; i++) {\n          target[axis][i].type = 'category';\n          target[axis][i].data = data[i];\n        }\n\n        var clone = data[i - 1];\n\n        for (var j = i; j < target[axis].length; j++) {\n          target[axis][j].type = 'category';\n          target[axis][j].data = clone;\n        }\n      }\n    };\n\n    var setAxisByValue = function setAxisByValue(target, axis) {\n      for (var i in target[axis]) {\n        target[axis][i].type = \"value\";\n      }\n    };\n\n    var system = {};\n\n    var setSeries = function setSeries(target, data) {\n      if (data) {\n        var removeEmptyStyle = function removeEmptyStyle(target) {\n          target.series.$remove(function (index, element) {\n            return !element.hasOwnProperty(\"data\");\n          });\n        };\n\n        var clone = removeLast(data);\n        var inx = 0;\n\n        for (var i in clone) {\n          inx++;\n\n          (function (index, dt) {\n            var last;\n\n            if (target.series[target.series.length - 1]) {\n              last = target.series[target.series.length - 1].$clone();\n            } else {\n              last = {};\n            }\n\n            var style = target.series[index] == undefined ? last : target.series[index].$clone();\n            style.name = dt.name;\n            style.data = dt.data;\n            style.show = dt.show;\n\n            if (target.series[index] == undefined) {\n              target.series[index] = style;\n            }\n\n            target.series[index].name = dt.name;\n            target.series[index].data = dt.data;\n            target.series[index].show = dt.show;\n          })(i, clone[i]);\n        }\n\n        for (var j = inx; j < target.series.length; j++) {\n          delete target.series[j];\n        }\n\n        ;\n        removeEmptyStyle(target);\n      }\n    };\n\n    var setLegend = function setLegend(target, data) {\n      target.$attr(\"legend/data\", data);\n    };\n\n    var setVisualMap = function setVisualMap(target, data) {\n      var getBaseline = function getBaseline() {\n        var rs = [];\n\n        var loop = function loop(index, item) {\n          if (item.hasOwnProperty(\"baseline\")) {\n            rs.push({\n              type: item.baseline,\n              data: item.data\n            });\n          }\n        };\n\n        for (var i in data) {\n          loop(i, data[i]);\n        }\n\n        return rs;\n      };\n\n      var baseline = getBaseline();\n\n      var loop = function loop(index, item) {\n        if (item.hasOwnProperty(\"baseline\") == false) {\n          var loop = function loop(index, elem, idata) {\n            var compare = function compare(bl) {\n              if (bl.type == \"over\") {\n                return elem > bl.data[index];\n              } else if (bl.type == \"below\") {\n                return elem < bl.data[index];\n              } else {\n                return true;\n              }\n            };\n\n            for (var i in baseline) {\n              if (compare(baseline[i]) == false) {\n                idata[index] = {\n                  name: \"alert\",\n                  value: elem\n                };\n                break;\n              }\n            }\n\n            ;\n          };\n\n          for (var i in item.data) {\n            loop(i, item.data[i], item.data);\n          }\n        }\n      };\n\n      for (var i in data) {\n        loop(i, data[i]);\n      }\n\n      ;\n      return data;\n    };\n\n    var setKqiParameters = function setKqiParameters(target, parameters, data) {\n      setTitle(target, parameters.title);\n      setSubtitle(target, parameters.subtitle);\n\n      if (element.data.legend) {\n        setLegend(target, data.getLegend());\n      }\n\n      var series = setVisualMap(target, data.getSeries());\n      setSeries(target, series, data, system);\n\n      if (element.data.xAxisType == \"category\") {\n        setAxisByCategory(target, data.getxAxis(), 'xAxis');\n      } else {\n        setAxisByValue(target, 'xAxis');\n      }\n\n      if (element.data.yAxisType == \"category\") {\n        setAxisByCategory(target, data.getxAxis(), 'yAxis');\n      } else {\n        setAxisByValue(target, 'yAxis');\n      }\n    };\n\n    var setParameters = function setParameters(target, parameters, data) {\n      var runExpression = function runExpression(expression, data, system) {\n        var result;\n        $$.runExpression(expression, function (funRes) {\n          if (funRes.code == \"0\") {\n            var fnResult = funRes.data;\n\n            if (typeof fnResult == 'function') {\n              result = fnResult(data, system);\n            } else {\n              result = fnResult;\n            }\n          } else {\n            throw new Error(funRes.message);\n          }\n        });\n        return result;\n      };\n\n      setTitle(target, parameters.title);\n      setSubtitle(target, parameters.subtitle);\n      var dtype = element.data.applied ? \"bind\" : \"manual\";\n      var dt = runExpression(element.$attr(\"data/legend/\" + dtype), data, system);\n\n      if (element.data.legend) {\n        setLegend(target, dt);\n      }\n\n      var series = setVisualMap(target, runExpression(element.$attr(\"data/series/\" + dtype), data, system));\n\n      if (baseOption.bmap && expression.showFilter == true) {\n        var prev = series.find(function (element) {\n          return element.name == \"level0\";\n        });\n        var detaildata = series.find(function (element) {\n          return element.name == \"level1\";\n        });\n        var search = series.find(function (element) {\n          return element.searchable == true;\n        });\n\n        if (detaildata) {\n          detaildata.show = false;\n        }\n\n        ;\n\n        if (previewMode) {\n          echartDom.before(createDetail());\n\n          if (expression.showSearch != false) {\n            echartDom.before(createSearch(search));\n          }\n\n          ;\n        }\n\n        ;\n\n        element.zoomTo = function (value) {\n          var ifZoom = expression.$attr(\"zoom\");\n\n          if (ifZoom) {\n            baseOption.bmap.center = value;\n            baseOption.bmap.zoom = 9;\n            var findPrev = baseOption.series.find(function (elem) {\n              return elem.name == \"level0\";\n            });\n            var findDetail = baseOption.series.find(function (elem) {\n              return elem.name == \"level1\";\n            });\n            var highlight = baseOption.series.find(function (data) {\n              return data.name == \"highlight\";\n            });\n            findPrev.show = false;\n            findDetail.show = true;\n            timeout(function () {\n              echartTarget.setOption(reconstruct(baseOption));\n            });\n          }\n\n          ;\n        };\n\n        var zoomEchartMap = function zoomEchartMap(tout) {\n          timeout(function () {\n            var ifZoom = expression.$attr(\"zoom\");\n\n            if (ifZoom) {\n              var option = echartTarget.getOption();\n              var zoom = option.bmap[0].zoom;\n\n              if (zoom < 9) {\n                var findPrev = baseOption.series.find(function (elem) {\n                  return elem.name == \"level0\";\n                });\n                var findDetail = baseOption.series.find(function (elem) {\n                  return elem.name == \"level1\";\n                });\n                var highlight = baseOption.series.find(function (data) {\n                  return data.name == \"highlight\";\n                });\n                findPrev.show = true;\n                findDetail.show = false;\n                highlight.show = false;\n              } else {\n                var findPrev = baseOption.series.find(function (elem) {\n                  return elem.name == \"level0\";\n                });\n                var findDetail = baseOption.series.find(function (elem) {\n                  return elem.name == \"level1\";\n                });\n                findPrev.show = false;\n                findDetail.show = true;\n              }\n\n              baseOption.bmap.zoom = zoom;\n\n              if (zoom != zoomOld) {\n                echartTarget.setOption(reconstruct(baseOption), true);\n              }\n\n              zoomOld = zoom;\n            }\n\n            ;\n          }, tout);\n        };\n\n        window.onmousewheel = function (event) {\n          //;\n          zoomEchartMap(1000);\n        };\n\n        var normalClick = function normalClick() {\n          $(window).off(\"click.dbk\");\n          $(window).on(\"click.db\", doubleClick);\n          timeout(function () {\n            $(window).off(\"clic.db\");\n            $(window).on(\"click.db\", normalClick);\n          }, 500);\n        };\n\n        var doubleClick = function doubleClick() {\n          zoomEchartMap(400);\n          $(window).off(\"click.db\");\n          $(window).on(\"click.db\", normalClick);\n        };\n\n        $(window).off(\"click.db\");\n        $(window).on(\"click.db\", normalClick);\n        series = series;\n      }\n\n      setSeries(target, series, data, system);\n\n      if (baseOption.bmap && expression.showFilter == true) {\n        if (prev.data.length == 1) {\n          if (detaildata) {\n            if (detaildata.$attr(\"data/0/value\")) {\n              baseOption.bmap.center = detaildata.$attr(\"data/0/value\");\n            }\n          } //baseOption.bmap.zoom = 9;\n\n\n          timeout(function () {\n            echartTarget.setOption(reconstruct(baseOption));\n          });\n        }\n      }\n\n      if (element.data.xAxisType == \"category\") {\n        setAxisByCategory(target, runExpression(element.$attr(\"data/xAxis/\" + dtype), data, system), 'xAxis');\n      } else {\n        setAxisByValue(target, 'xAxis');\n      }\n\n      if (element.data.yAxisType == \"category\") {\n        setAxisByCategory(target, runExpression(element.$attr(\"data/yAxis/\" + dtype), data, system), 'yAxis');\n      } else {\n        setAxisByValue(target, 'yAxis');\n      }\n    };\n\n    var timespan = element.$attr(\"data/timespan\") ? element.$attr(\"data/timespan\") : 0;\n    var frequency = element.$attr(\"data/frequency\") ? element.$attr(\"data/frequency\") : 0;\n    var format = element.$attr(\"data/format\") ? element.$attr(\"data/format\") : \"\";\n    var category = element.$attr(\"advance/category\") ? element.$attr(\"advance/category\") : \"\";\n    $$.runExpression(element.$attr(\"advance/expression\"), function (funRes) {\n      if (funRes.code == \"0\") {\n        var fnResult = funRes.data;\n\n        if (typeof fnResult == 'function') {\n          expression = fnResult(data, system);\n        } else {\n          expression = fnResult;\n        }\n\n        expression = expression ? expression : {};\n      } else {\n        expression = {};\n        ; //throw new Error(funRes.message);\n      }\n    });\n    var condition;\n\n    var validValue = function validValue(val) {\n      if (typeof val == \"number\") {\n        return true;\n      } else if (typeof val == \"string\") {\n        return /d+/.test(val);\n      } else {\n        return false;\n      }\n    };\n\n    var checkHasValue = function checkHasValue(option) {\n      var series = option.series;\n\n      if (series instanceof Array) {\n        return series.some(function (elem) {\n          var hasVal = elem.data.some(function (el) {\n            if (_typeof(el) == \"object\") {\n              return validValue(el.value);\n            } else {\n              return validValue(el);\n            }\n          });\n          return hasVal;\n        });\n      } else {\n        return false;\n      }\n    };\n\n    var showNoDataSign = function showNoDataSign() {\n      var find = wrap.find(\".showNoDataSign\");\n\n      if (find.size() == 0) {\n        var div = $(\"<div></div>\");\n        var height = wrap.height();\n        var text = $(\"<div></div>\");\n        text.css(\"color\", \"#fff\");\n        text.css(\"text-align\", \"center\");\n        text.text(\"视图无数据输入！\");\n        text.css(\"line-height\", 20 + \"px\");\n        div.addClass(\"showNoDataSign\");\n        div.css(\"width\", \"100%\");\n        div.css(\"height\", 20 + \"px\");\n        div.css(\"position\", \"absolute\");\n        div.css(\"background-color\", \"rgba(0,0,0,.6)\");\n        div.css(\"z-index\", 9);\n        div.append(text);\n        wrap.prepend(div);\n      }\n    };\n\n    var hideNoDataSign = function hideNoDataSign() {\n      var find = wrap.find(\".showNoDataSign\");\n      find.remove();\n    };\n\n    extension.customCategory = element.$attr(\"advance/custom_category\");\n    extension.aggregate_type = element.$attr(\"data/aggregate_type\");\n    extension.granularityUnit = element.$attr(\"data/granularityUnit\");\n    extension.aggregate_instance = element.$attr(\"data/aggregate_instance\");\n    extension.simulate = expression.simulate;\n    var method = element.$attr(\"advance/getfunction\") ? element.$attr(\"advance/getfunction\") : 'kpiDataService.getValueList';\n    var type = element.$attr(\"advance/paramtype\") ? element.$attr(\"advance/paramtype\") : \"kpi\";\n    extension.aggregate_rule = element.$attr(\"data/aggregate_rule\") ? element.$attr(\"data/aggregate_rule\") : 0;\n    extension.autoFillBlank = element.$attr(\"data/autoFillBlank\") ? element.$attr(\"data/autoFillBlank\") : false;\n\n    run = function run(data) {\n      baseOption = angularStyle.echartToOption(element.echart);\n\n      if (typeof target.hideLoading == \"function\") {\n        target.hideLoading();\n      }\n\n      var setOption = function setOption(baseOption) {\n        ;\n\n        if (checkHasValue(baseOption)) {//hideNoDataSign();\n        } else {//showNoDataSign();\n          }\n\n        try {\n          //console.log(JSON.stringify(baseOption, null, 2));\n          target.setOption(baseOption, true);\n        } catch (e) {\n          if (route.current.$$route.controller == \"freeStyleCtrl\") {\n            growl.error(\"组件［视图］的传入参数发生错误！\");\n          }\n\n          ;\n        }\n\n        ;\n      };\n\n      $(window).on(\"resize\", function (event) {\n        target.resize();\n      });\n\n      if (expression.customOption) {\n        var option = data[category].getOption();\n        setOption(option);\n      } else {\n        if (_typeof(element.parameters) == \"object\") {\n          setParameters(baseOption, element.parameters, data);\n        }\n\n        ;\n        setOption(baseOption);\n      }\n\n      ;\n    };\n\n    var runKqiModel = function runKqiModel() {\n      var kqiModelId = kqiModel.id;\n      kqiManagerUIService.getKqiModelById(kqiModelId, function (event) {\n        if (event.code == \"0\") {\n          var kqiModel = event.data;\n          var viewContent = JSON.parse(kqiModel.viewContent);\n          var expression = eval(\"(\" + viewContent.expression + \")\");\n          var simulate = viewContent.simulate;\n          var variables = viewContent.variables;\n          var obj = {};\n          var series = [];\n          var xAxis = [];\n          var inx = 0;\n\n          obj.getLegend = function () {\n            return variables.map(function (elem) {\n              return elem.name;\n            }).concat(['kqi']);\n          };\n\n          obj.getxAxis = function () {\n            return [xAxis];\n          };\n\n          obj.getSeries = function () {\n            return series;\n          };\n\n          var loopVar = function loopVar(variable) {\n            var name = variable.name;\n            var ob = {\n              name: name,\n              data: []\n            };\n\n            for (var j in simulate) {\n              if (simulate[j][name]) {\n                ob.data = ob.data.concat(simulate[j][name].split(\",\").map(function (elem) {\n                  return parseInt(elem);\n                }));\n              }\n            }\n\n            series.push(ob);\n          };\n\n          for (var i in variables) {\n            loopVar(variables[i]);\n          }\n\n          var kqiObj = {\n            name: \"kqi\",\n            data: []\n          };\n\n          var calKqi = function calKqi(sim) {\n            var arr = [];\n\n            for (var k in variables) {\n              if (sim[variables[k].name]) {\n                sim[variables[k].name] = sim[variables[k].name].split(\",\").map(function (elem) {\n                  return parseInt(elem);\n                });\n              }\n            }\n\n            arr[sim[variables[0]['name']].length - 1] = expression(sim);\n\n            for (var l in sim[variables[0]['name']]) {\n              arr[l] = expression(sim);\n              xAxis.push(inx);\n              inx++;\n            }\n\n            kqiObj.data = kqiObj.data.concat(arr);\n          };\n\n          for (var j in simulate) {\n            calKqi(simulate[j]);\n          }\n\n          series.push(kqiObj);\n          setKqiParameters(baseOption, element.parameters, obj); //setOption(baseOption);\n\n          target.hideLoading();\n          target.setOption(baseOption, true); //;\n        }\n      });\n    };\n\n    element.setCondition = function (cond) {\n      element.$attr(\"advance/condition\", cond);\n    };\n\n    element.getAisInfos = function () {\n      var baseConfig = scope.$$childTail.baseConfig;\n\n      if (baseConfig && baseConfig.projectConfig && baseConfig.projectConfig.extendService == \"AIS\") {\n        var interval = baseConfig.projectConfig.updateInterval ? baseConfig.projectConfig.updateInterval : 60000;\n\n        var updateInfo = function updateInfo() {\n          thridPartyApiService.getSignalShipInfo(\"413149000\", function (returnObj) {\n            if (returnObj.code == 0) {\n              echartTarget.setOption(reconstruct(baseOption), true);\n            }\n          });\n        };\n\n        var aisInterval = setInterval(function () {\n          updateInfo();\n        }, interval);\n        updateInfo();\n      }\n    };\n\n    element.render = function (data) {\n      var ci = element.resource_applied;\n      var kpi = element.kpi_applied;\n      var startTime = element.resource_time.startTime;\n      var endTime = element.resource_time.endTime;\n\n      var getValueList = function getValueList(data) {\n        element.rawData = data;\n        Object.defineProperty(element, \"rawData\", {\n          enumerable: false\n        });\n        run(data);\n      };\n\n      var getTime = function getTime(time) {\n        if (time) {\n          switch (time.unit) {\n            case \"second\":\n              return time.value * 1000;\n              break;\n\n            case \"minute\":\n              return time.value * 60 * 1000;\n              break;\n\n            case \"hour\":\n              return time.value * 60 * 60 * 1000;\n              break;\n\n            case \"day\":\n              return time.value * 24 * 60 * 60 * 1000;\n              break;\n\n            case \"month\":\n              return time.value * 30 * 24 * 60 * 60 * 1000;\n              break;\n\n            default:\n              return time.value;\n              break;\n          }\n        } else {\n          return 0;\n        }\n      };\n\n      var failure = function failure(data) {\n        run(data);\n      };\n\n      var kpiQueryModel = {\n        category: category,\n        isRealTimeData: true,\n        nodeIds: ci.map(function (elem) {\n          return elem.id;\n        }),\n        kpiCodes: kpi.map(function (elem) {\n          return elem.id;\n        }),\n        startTime: startTime ? startTime : null,\n        endTime: endTime ? endTime : null,\n        timeRange: \"\",\n        statisticType: \"psiot\",\n        includeInstance: true,\n        timePeriod: getTime(timespan),\n        aggregateType: extension.aggregate_type,\n        aggregate_rule: extension.aggregate_rule,\n        aggregate_instance: extension.aggregate_instance,\n        granularityUnit: extension.granularityUnit,\n        condList: []\n      };\n      /**\n      $$.runExpression(element.$attr(\"advance/condition\"), function(funRes){\n        if(funRes.code == \"0\"){\n          var fnResult = funRes.data;\n          condition = fnResult;\n        } else {\n          throw new Error(funRes.message);\n        }\n      });*/\n\n      var condi = element.$attr(\"advance/condition\");\n      condi = condi ? condi : \"\";\n      var condition;\n\n      try {\n        condition = eval(condi);\n      } catch (e) {}\n\n      ;\n\n      if (condition == undefined) {\n        condition = JSON.parse(condi);\n      }\n\n      if (data) {\n        extension.simuData = data;\n      }\n\n      serviceCenterService.getValueListBytime(ci, kpi, timespan, frequency, format, category, type, method, condition, extension, kpiQueryModel).then(getValueList, failure);\n      var paramSocket = {\n        ciid: ci.map(function (el) {\n          return el.id;\n        }).toString(),\n        kpi: kpi.map(function (el) {\n          return el.id;\n        }).toString()\n      };\n      var uuid = Math.uuid();\n      var operation = \"register\";\n\n      var SwSocket_success = function SwSocket_success(ec, baseOption, ci, kpi, data) {\n        var getTime = function getTime(time) {\n          if (time) {\n            switch (time.unit) {\n              case \"second\":\n                return time.value * 1000;\n                break;\n\n              case \"minute\":\n                return time.value * 60 * 1000;\n                break;\n\n              case \"hour\":\n                return time.value * 60 * 60 * 1000;\n                break;\n\n              case \"day\":\n                return time.value * 24 * 60 * 60 * 1000;\n                break;\n\n              case \"month\":\n                return time.value * 30 * 24 * 60 * 60 * 1000;\n                break;\n\n              default:\n                return time.value;\n                break;\n            }\n          } else {\n            return 0;\n          }\n        };\n\n        if (data) {\n          if (element.$attr(\"rawData/category/timestamps\")) {\n            var firstTime = element.$attr(\"rawData/category/timestamps\")[0];\n            var tspan = getTime(timespan);\n            var ciName = ci.find(function (el) {\n              return data.nodeId == el.id;\n            });\n            var kpiName = kpi.find(function (el) {\n              return data.kpiCode == el.id;\n            });\n            var change = baseOption.series.filter(function (data) {\n              return data.name == kpiName.label;\n            });\n            var nochange = baseOption.series.filter(function (data) {\n              return data.name != kpiName.label;\n            });\n\n            if (change.length > 0) {\n              var dt = new Date();\n              var timestamp = dt.getTime();\n              baseOption.xAxis[0].data.push(dt.FormatByString(format));\n              change[0].data.push(data.value);\n\n              for (var j in nochange) {\n                nochange[j].data.push(nochange[j].data[nochange[j].data.length - 1]);\n              }\n\n              ;\n\n              if (timestamp - firstTime > tspan) {\n                baseOption.xAxis[0].data.shift();\n                change[0].data.shift();\n\n                for (var j in nochange) {\n                  nochange[j].data.shift();\n                }\n\n                ;\n              }\n\n              ec.setOption(baseOption);\n            }\n          }\n        }\n      };\n      /**\n      test = function(ci, kpi, ec, baseOption){\n        timeout(function(){\n          SwSocket_success(ec, baseOption, ci, kpi, {\n            nodeId : ci[0].id,\n            kpiCode : kpi[0].id,\n            value : 30\n          });\n          test(ci, kpi, ec, baseOption);\n        }, 3000);\n      };\n      test(ci, kpi, echartTarget, baseOption);\n      */\n\n\n      (function (ec, baseOption, ci, kpi) {\n        SwSocket.register(uuid, operation, function (event) {\n          SwSocket_success(ec, baseOption, ci, kpi, event.data);\n        });\n        SwSocket.send(uuid, operation, 'kpi', paramSocket);\n      })(echartTarget, baseOption, ci, kpi);\n    };\n\n    if (element.style) {\n      wrap.css(element.style);\n      echartDom.css(\"height\", element.style.height);\n      wrap.css(\"height\", \"auto\");\n    }\n\n    ;\n    baseOption = angularStyle.echartToOption(element.echart);\n    timeout(function () {\n      $$.loadExternalJs(['echarts', 'macarons'], function (echarts) {\n        var getCiKpi_back = function getCiKpi_back(ci, kpi) {\n          element.resource_applied = ci;\n          element.kpi_applied = kpi;\n\n          var start = function start() {\n            tg.ec = echartTarget = target = echarts.init(echartDom[0], \"macarons\");\n            wrap.off(\"click\");\n            wrap.on(\"click\", function (event) {\n              if (baseOption.bmap) {\n                var option = echartTarget.getOption();\n                var select = option.series.find(function (data) {\n                  return data.name == \"select\";\n                });\n                var highlight = option.series.find(function (data) {\n                  return data.name == \"highlight\";\n                });\n\n                if (select) {\n                  select.data = [];\n                }\n\n                ;\n\n                if (highlight) {\n                  highlight.data = [];\n                }\n\n                ;\n\n                try {\n                  var wholeClickFn = expression.$attr(\"on/wholeClick\");\n                  wholeClickFn({\n                    target: element,\n                    global: global\n                  });\n                } catch (e) {}\n\n                echartTarget.setOption(reconstruct(option), true);\n              }\n\n              ;\n            });\n            target.on(\"click\", function (event) {\n              event.event.cancelBubble = true;\n              var clickFn = expression.$attr(\"on/click\");\n\n              if (typeof clickFn == \"function\") {\n                try {\n                  clickFn({\n                    echart: event,\n                    global: global,\n                    target: element\n                  });\n                } catch (e) {\n                  if (route.current.$$route.controller == \"freeStyleCtrl\") {\n                    growl.error(\"组件［视图］的点击事件表达式配置发生错误！\");\n                  }\n\n                  ;\n                  ;\n                }\n              }\n\n              ;\n            });\n            target.showLoading();\n\n            var init = function init() {\n              if (kqiModel) {\n                runKqiModel();\n              } else {\n                if (element.$attr(\"data/applied\")) {\n                  element.render();\n                } else {\n                  run({});\n                }\n              }\n            };\n\n            var initFn = expression.$attr(\"on/init\");\n\n            if (typeof initFn == \"function\") {\n              try {\n                initFn({\n                  target: element,\n                  global: global\n                });\n              } catch (e) {\n                if (route.current.$$route.controller == \"freeStyleCtrl\") {\n                  growl.error(\"组件［视图］的初始化表达式配置发生错误！\");\n                }\n\n                ;\n                ;\n              }\n\n              ;\n            } else {\n              if (expression.$attr(\"autoload\") != false) {\n                init();\n              }\n            }\n          };\n\n          if (baseOption.bmap) {\n            require(['baiduMap', 'bmap'], function (a, b) {\n              var count = 0;\n              wait();\n\n              function wait() {\n                if (count < 20) {\n                  count += 1;\n                  timeout(function () {\n                    if (window.BMap == undefined) {\n                      wait();\n                    } else {\n                      start();\n                    }\n                  });\n                } else {\n                  throw new Error('百度视图获取失败!!');\n                }\n              }\n            }, function error() {\n              ;\n              start();\n            });\n          } else if (baseOption.geo) {\n            var type = baseOption.geo.map;\n\n            if (mapJson) {\n              echarts.registerMap(type, mapJson);\n              system.mapJson = mapJson;\n              start();\n            } else {\n              var path = \"../localdb/\" + type + \".json\";\n              var info = Info.get(path, function (cJson) {\n                mapJson = cJson;\n                system.mapJson = mapJson;\n                echarts.registerMap(type, mapJson);\n                start();\n              });\n            }\n          } else {\n            start();\n          }\n        };\n\n        element.getCiKpi(getCiKpi_back);\n      });\n    });\n    return wrap;\n  };\n});"],"sourceRoot":"/source/"}