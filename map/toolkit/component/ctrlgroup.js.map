{"version":3,"sources":["toolkit/component/ctrlgroup.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","define","data","element","global","scope","compile","growl","expression","defer","wrap","$","$$","runExpression","$attr","funRes","code","fnResult","system","format","layout","wholeWidth","width","bootstrap","ctrlgroup","append","css","createIcon","fmt","ctrlGroup","td","style","tdStyle","cls","class","icon","clickFn","addClass","on","event","createLabel","composory","hide","labelStyle","linkage","compIconwrap","label","attr","hideExtraText","display","cursor","overflow","text-overflow","white-space","position","top","text","rnd","parseInt","Math","random","createMultiSelect","id","options","getSelect","arr","filter","find","each","index","target","ele","push","select","loop","item","value","option","join","indexOf","i","children","remove","setTimeout","toolReady","multiselect","buttonText","length","selected","this","substr","onChange","elem","checked","changeFn","row","current","values","e","console","error","enableFiltering","buttonWidth","loadExternalJs","createAutoComplete","placeholder","autocomplete","availableTags","source","request","response","key","term","toUpperCase","stxt","chineseCharacterToPinyin","slice","equalPinyin","map","change","ui","val","currentTarget","createTextarea","input","disabled","attrs","k","createToggle","inner","hasClass","removeClass","createInput","createMultipleSelect","rs","inx","select2Dom","trigger","replacer","button","div","customInput","height","background-color","padding","ensureBtn","isFlag","click","show","inputVal","newOption","Option","baseSelect2","language","noResults","noresults","multiple","select2","createInputableSelect","selection","buttonWrap","valueCode","size","prepend","createSelet","getData4Options","forEach","undefined","evt","params","parentEvent","parentName","$on","empty","parentKey","createClipboardButton","btnStyle","btnclass","saveFn","txt","prop","clipboardText","Clipboard","clipboard","clearSelection","action","createButton","createUploadFile","cfg","file","group","previewBtn","submitBtn","submitFn","config","fileDom","off","createSystemPopupByJsonName","title","uploadFile","name","url","files","createUploadFile2","autosubmit","manual","fileFormat","formData","mulbtn","dpulDom","path","textAry","split","dpliDom","groupId","delBtn","downloadBtn","btnstatus","search","deleteFn","downloadFn","txtStr","f","File","uploadFile1","createButtonGroup","groupStyle","createBtn","fmtBtn","createClipboardBtn","content","type","createDatePicker","uuid","bottom","right","laydate","assert","render","theme","useMomentFormat","done","date","endDate","getUTCDateString","formatDatebyMomentToUTC","getDateString","createDateTimePicker","dateType","CLASS","trimmToDate","btns","createDateRangePicker","range","getDateHandler","dateArray","start","end","startDateString","endDateString","createJQury","renderFn","createDropDownTree","dropDownTree","dropdowntree","createSvg","svgAttr","svgStyle","d3","svg","createCustomHtml","Array","qualifiedName","a","customStyle","createClock","valueFn","clock","myClock","init","createRadio","radioDom","btn","createCheckBoxList","column","createCheckboxList","trick","checkbox","some","hasOwnProperty","Object","defineProperty","enumerable","dom","vertical-align","createProgress","table","tr","td1","td2","shownumber","pwrap","progress","popover","mousemove","clientY","clientX","ctrlGroups","resolve","loopCtrlGroups","inputGroup","loopformat","refresh","colSpan","rowSpan","setSelfDom","parentShow","parent","parentHide","initFn","underWatch","runExpressionSuccess"],"mappings":"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","file":"toolkit/component/ctrlgroup.js","sourcesContent":["function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/**\n * Created by leonlin on 16/11/3.\n */\ndefine([], function () {\n  return function (data) {\n    var element = data.element;\n    var global = data.global;\n    var scope = data.scope;\n    var compile = data.compile;\n    delete element.growl;\n    var defer = data.defer;\n    var wrap = $(\"<div></div>\");\n    /**\n    if (element.style) {\n      wrap.css(element.style);\n    }*/\n\n    var expression;\n    $$.runExpression(element.$attr(\"advance/expression\"), function (funRes) {\n      if (funRes.code == \"0\") {\n        var fnResult = funRes.data;\n\n        if (typeof fnResult == 'function') {\n          expression = fnResult(data, system);\n        } else {\n          expression = fnResult;\n        }\n\n        expression = expression ? expression : {};\n      } else {\n        expression = {}; //throw new Error(funRes.message);\n      }\n\n      runExpressionSuccess(expression);\n    }, element);\n\n    function runExpressionSuccess(expression) {\n      var format = expression.format;\n      var layout = expression.layout || \"fixed\";\n      var wholeWidth = expression.width || \"100%\";\n      var cgroupstyle = element.$attr(\"parameters/cgroupstyle\");\n      var bootstrap = cgroupstyle == \"bootstrap\" || expression.bootstrap || false;\n\n      if (bootstrap) {\n        var ctrlgroup = $(\"<div></div>\");\n      } else {\n        var ctrlgroup = $(\"<table></table>\");\n      }\n\n      wrap.append(ctrlgroup);\n      ctrlgroup.css(\"width\", wholeWidth);\n      ctrlgroup.css(\"table-layout\", layout);\n\n      var createIcon = function createIcon(fmt, ctrlGroup) {\n        var td = $(\"<td></td>\");\n        var style = fmt.style || {};\n        var tdStyle = fmt.tdStyle || {};\n        var cls = fmt.class || \"\";\n        var icon = $(\"<span></span>\");\n        var clickFn = fmt.$attr(\"on/click\");\n        icon.addClass(fmt.icon);\n        td.addClass(cls);\n        td.css(\"padding\", \"3px\");\n\n        if (_typeof(style) == \"object\") {\n          icon.css(style);\n        }\n\n        icon.css(tdStyle);\n        td.on(\"click\", function (event) {\n          if (clickFn) {\n            clickFn();\n          }\n        });\n        td.append(icon);\n        return td;\n      };\n\n      var createLabel = function createLabel(fmt, ctrlGroup) {\n        var td = $(\"<td></td>\");\n        var style = fmt.style || {};\n        var composory = fmt.composory || false;\n        var hide = fmt.hide || false;\n        var labelStyle = fmt.labelStyle || {};\n        var linkage = fmt.linkage;\n        var compIconwrap = $(\"<span><span>\");\n        var icon = $(\"<div>*</div>\");\n        compIconwrap.css(\"display\", \"inline-block\");\n        compIconwrap.css(\"width\", \"10px\");\n        icon.css(\"font-size\", \"20px\");\n        icon.css(\"top\", \"5px\");\n        icon.css(\"position\", \"absolute\");\n        var format = fmt.format || {\n          \"label\": \"value\"\n        };\n        var cls = fmt.class || \"\";\n\n        if (linkage) {\n          var label = $(\"<a></a>\");\n          label.attr(\"target\", \"_blank\");\n          label.attr(\"href\", linkage);\n          label.css(\"cursor\", \"pointer\");\n        } else {\n          var label = $(\"<span></span>\"); //label.css(\"display\", \"inline-block\")\n        }\n\n        var clickFn = fmt.$attr(\"on/click\");\n        td.addClass(cls);\n        label.css(labelStyle);\n        td.css(\"padding\", \"3px\");\n\n        if (_typeof(style) == \"object\") {\n          td.css(style);\n        }\n\n        td.on(\"click\", function (event) {\n          if (clickFn) {\n            clickFn();\n          }\n        });\n        /***\n         *   韩星 2018.01.07\n         *   需求: 超出指定的长度部分显示... 鼠标滑过去显示全部\n         *   使用方法: 多加一个属性，例如：hideExtraText:\"100px\",\n         */\n\n        if (fmt.hideExtraText && fmt.hideExtraText != \"undefined\") {\n          label.css({\n            \"display\": \"inline-block\",\n            \"cursor\": \"pointer\",\n            \"overflow\": \"hidden\",\n            \"text-overflow\": \"ellipsis\",\n            \"white-space\": \"nowrap\",\n            \"position\": \"relative\",\n            \"width\": fmt.hideExtraText,\n            \"top\": \"2px\"\n          });\n          label.text(fmt[format.label]);\n          label.attr(\"title\", fmt[format.label]);\n        } else {\n          label.text(fmt[format.label]);\n        }\n\n        var rnd = parseInt(Math.random() * 10000);\n        icon.attr(\"id\", rnd);\n\n        if (composory == true) {\n          icon.css(\"color\", \"#ff6f64\");\n          icon.css(\"position\", \"relative\");\n        } else if (composory == \"none\") {\n          compIconwrap.css(\"display\", \"none\");\n        } else {\n          icon.css(\"color\", \"rgba(0,0,0,0)\");\n        }\n\n        compIconwrap.append(icon);\n        td.css(\"position\", \"relative\");\n        td.append(compIconwrap);\n        td.append(label);\n\n        if (hide) {\n          td.hide();\n        }\n\n        return td;\n      };\n\n      var createMultiSelect = function createMultiSelect(fmt, ctrlGroup) {\n        var format = fmt.format || {\n          id: \"id\",\n          label: \"label\"\n        };\n        var td = $(\"<td></td>\");\n        var style = fmt.style || {};\n        var data = fmt.options || [];\n        var cls = fmt.class || \"\";\n        td.addClass(cls);\n        td.css(\"padding\", \"3px\");\n\n        if (_typeof(style) == \"object\") {\n          td.css(style);\n        }\n\n        var getSelect = function getSelect() {\n          var arr = [];\n          var filter = td.find(\"ul.dropdown-menu li.active\");\n          filter.each(function (index, element) {\n            var target = $(element).find(\"input\");\n            var find = data.find(function (ele) {\n              return ele[format.id] == target.attr(\"value\");\n            });\n            arr.push(find);\n          });\n          return arr;\n        };\n\n        var select = $(\"<select></select>\").addClass(\"multiselect multiselect-all multiselect-search\");\n        select.css(\"display\", \"none\");\n        select.attr(\"multiple\", \"multiple\");\n        td.append(select);\n\n        var loop = function loop(item) {\n          if (format) {\n            var label = format.label;\n            var value = format.id;\n          }\n\n          var option = $(\"<option></option>\").attr(\"value\", item[value]).text(item[label]);\n          /**\n           * 返回来的若是数组，可以选中状态\n           */\n\n          var arr = fmt.value || [];\n\n          if (item[format.value] || arr.join(',').indexOf(item[value]) > -1) {\n            option.attr(\"selected\", \"selected\");\n          }\n\n          return option;\n        };\n\n        select.children().remove();\n\n        for (var i in data) {\n          select.append(loop(data[i]));\n        }\n\n        var domready = function domready() {\n          var toolReady = function toolReady(multiselect) {\n            var buttonText = function buttonText(options) {\n              if (options.length == 0) {\n                return '无做出任何选择';\n              } else if (options.length > 1) {\n                return \"已选择\" + options.length + \"个\";\n              } else {\n                var selected = '';\n                options.each(function () {\n                  selected += $(this).text() + ', ';\n                });\n                return selected.substr(0, selected.length - 2);\n              }\n            };\n\n            var onChange = function onChange(elem, checked) {\n              var changeFn = fmt.$attr(\"on/change\");\n\n              if (typeof changeFn == \"function\") {\n                try {\n                  changeFn({\n                    row: ctrlGroup,\n                    current: fmt,\n                    values: getSelect()\n                  });\n                } catch (e) {\n                  console.error(e);\n                }\n              }\n            };\n\n            select.multiselect('destroy');\n            select.multiselect({\n              enableFiltering: true,\n              buttonWidth: td.width(),\n              buttonText: buttonText,\n              onChange: onChange\n            });\n          };\n\n          $$.loadExternalJs([\"bootstrap-multiselect\"], toolReady);\n        };\n\n        setTimeout(domready);\n        return td;\n      };\n\n      var createAutoComplete = function createAutoComplete(fmt, ctrlGroup) {\n        var td = $(\"<td></td>\");\n        var cls = fmt.class || \"\";\n        td.addClass(cls);\n        var value = fmt.value;\n        var placeholder = fmt.placeholder;\n        var format = fmt.format || {\n          id: \"id\",\n          label: \"label\"\n        };\n        var style = fmt.style || {};\n        td.css(\"padding\", \"3px\");\n\n        if (_typeof(style) == \"object\") {\n          td.css(style);\n        }\n\n        var changeFn = fmt.$attr(\"on/change\");\n        var autocomplete = $(\"<input />\");\n        autocomplete.attr(\"placeholder\", placeholder);\n        autocomplete.addClass(\"form-control\");\n        td.append(autocomplete);\n        $$.loadExternalJs(['jquery-ui'], function () {\n          /**\n           var availableTags = fmt.options.map(function(elem){\n          return elem[format.label];\n          });*/\n          var availableTags = fmt.options;\n          autocomplete.autocomplete({\n            source: function source(request, response) {\n              var key = request.term.toUpperCase();\n\n              var equalPinyin = function equalPinyin(text) {\n                var find = false;\n\n                var loop = function loop(stxt) {\n                  if (stxt.indexOf(key) == 0) {\n                    find = true;\n                  }\n                };\n\n                for (var i = 0; i < text.length - 1; i++) {\n                  loop($$.chineseCharacterToPinyin(text.slice(i, -1)));\n                }\n\n                return find;\n              };\n\n              var check = function check(text) {\n                return text.indexOf(key) != -1;\n              };\n              /**\n               var filter = availableTags.filter(function(text){\n              return equalPinyin(text) || check(text);\n              });*/\n\n\n              var filter = availableTags.filter(function (elem) {\n                var text = elem[format.label] + \"\";\n                return equalPinyin(text) || check(text);\n              }).map(function (elem) {\n                return {\n                  id: elem[format.id],\n                  label: elem[format.label]\n                };\n              });\n              response(filter);\n            },\n            change: function change(event, ui) {\n              var val = $(event.currentTarget).val();\n\n              if (typeof changeFn == \"function\") {\n                changeFn({\n                  row: ctrlGroup,\n                  current: fmt,\n                  value: val\n                });\n              }\n            }\n          });\n        });\n        return td;\n      };\n\n      var createTextarea = function createTextarea(fmt, ctrlGroup) {\n        var td = $(\"<td></td>\");\n        var cls = fmt.class || \"\";\n        td.addClass(cls);\n        td.css(\"padding\", \"3px\");\n        var style = fmt.style || {};\n        td.css(\"padding\", \"3px\");\n\n        if (_typeof(style) == \"object\") {\n          td.css(style);\n        }\n\n        var input = $(\"<textarea \\>\");\n        var changeFn = fmt.$attr(\"on/change\");\n        input.addClass(\"form-control\");\n        input.val(fmt.value);\n\n        if (fmt.disabled) {\n          input.attr(\"disabled\", \"disabled\");\n        } //属性\n\n\n        if (fmt.attrs) {\n          for (var k in fmt.attrs) {\n            input.attr(k, fmt.attrs[k]);\n          }\n        }\n\n        input.on(\"change\", function (event) {\n          if (typeof changeFn == \"function\") {\n            try {\n              changeFn({\n                row: ctrlGroup,\n                current: fmt,\n                value: input.val()\n              });\n            } catch (e) {\n              console.error(e);\n            }\n          }\n        });\n        td.append(input);\n        return td;\n      };\n\n      var createToggle = function createToggle(fmt, ctrlGroup) {\n        var td = $(\"<td></td>\");\n        var cls = fmt.class || \"\";\n        td.addClass(cls);\n        td.css(\"padding\", \"3px\");\n        var style = fmt.style || {};\n        td.css(\"padding\", \"3px\");\n\n        if (_typeof(style) == \"object\") {\n          td.css(style);\n        }\n\n        var wrap = $(\"<div></div>\").addClass(\"toggle-wrap\");\n        var inner = $(\"<div></div>\").addClass(\"toggle-inner\");\n\n        if (fmt.value) {\n          wrap.addClass(\"active\");\n        }\n\n        wrap.append(inner);\n        var changeFn = fmt.$attr(\"on/change\");\n        wrap.on(\"click\", function (event) {\n          if (wrap.hasClass(\"active\")) {\n            wrap.removeClass(\"active\");\n          } else {\n            wrap.addClass(\"active\");\n          }\n\n          if (typeof changeFn == \"function\") {\n            try {\n              changeFn({\n                row: ctrlGroup,\n                current: fmt,\n                value: wrap.hasClass(\"active\")\n              });\n            } catch (e) {\n              console.error(e);\n            }\n          }\n        });\n        td.append(wrap);\n        return td;\n      };\n\n      var createInput = function createInput(fmt, ctrlGroup) {\n        var td = $(\"<td></td>\");\n        var cls = fmt.class || \"\";\n        td.addClass(cls);\n        td.css(\"padding\", \"3px\");\n        var style = fmt.style || {};\n        td.css(\"padding\", \"3px\");\n\n        if (_typeof(style) == \"object\") {\n          td.css(style);\n        }\n\n        var input = $(\"<input \\>\");\n        var changeFn = fmt.$attr(\"on/change\");\n        input.addClass(\"form-control\");\n        input.val(fmt.value);\n\n        if (fmt.disabled) {\n          input.attr(\"disabled\", \"disabled\");\n        }\n\n        if (fmt.placeholder) {\n          input.attr(\"placeholder\", fmt.placeholder);\n        } //属性\n\n\n        if (fmt.attrs) {\n          for (var k in fmt.attrs) {\n            input.attr(k, fmt.attrs[k]);\n          }\n        }\n\n        input.on(\"change\", function (event) {\n          if (typeof changeFn == \"function\") {\n            try {\n              changeFn({\n                row: ctrlGroup,\n                current: fmt,\n                value: input.val()\n              });\n            } catch (e) {\n              ;\n            }\n          }\n        });\n        td.append(input);\n        return td;\n      }; // 创建了多个下拉框\n\n\n      var createMultipleSelect = function createMultipleSelect(fmt, ctrlGroup) {\n        var format = fmt.format || {\n          id: \"id\",\n          label: \"label\"\n        };\n        var val = fmt.value;\n        var disabled = fmt.disabled || false;\n        var options = fmt.options || [];\n        var td = $(\"<td></td>\");\n        var cls = fmt.class || \"\";\n        td.addClass(cls);\n        var style = fmt.style;\n        td.css(\"padding\", \"3px\");\n\n        if (_typeof(style) == \"object\") {\n          td.css(style);\n        }\n\n        td.css(\"padding\", \"3px\");\n        var inx = 0;\n        var data = options.map(function (elem) {\n          var rs = {\n            id: elem[format.id],\n            text: elem[format.label]\n          };\n          inx++;\n          return rs;\n        });\n        $$.loadExternalJs(['select2'], function () {\n          // 默认选中\n          if (val) {\n            setTimeout(function () {\n              select2Dom.val(val).trigger(\"change\");\n            }, 1000);\n          }\n\n          var replacer = $(\"<div style='width:98%'><div>\");\n          var select2Dom = $(\"<select></select>\");\n\n          if (disabled) {\n            select2Dom = $(\"<select disabled='disabled'></select>\");\n          }\n\n          select2Dom.css({\n            \"width\": \"98%\"\n          });\n          var button = $(\"<span class=\\\"btn btn-default\\\"><span class=\\\"glyphicon glyphicon-plus\\\"></span></span>\");\n          replacer.append(select2Dom);\n          replacer.append(button); // 做一个输入框\n\n          var div = $(\"<div id='customDiv'></div>\");\n          div.css({\n            \"position\": \"relative\",\n            \"display\": \"none\"\n          });\n          var customInput = $(\"<input/ id='inputVal'>\");\n          customInput.css({\n            \"width\": \"96%\",\n            \"height\": \"27px\",\n            \"background-color\": \"#3a5066\",\n            \"padding\": \"0 10px\"\n          });\n          var ensureBtn = $(\"<button class='btn btn-default'> 确认 </button>\");\n          div.append(customInput);\n          div.append(ensureBtn);\n          replacer.append(div);\n\n          if (fmt.hide) {\n            replacer.hide();\n          }\n\n          var isFlag = false;\n\n          if (!disabled) {\n            button.click(function () {\n              isFlag = !isFlag;\n\n              if (isFlag) {\n                $(\"#customDiv\").show();\n              } else {\n                $(\"#customDiv\").hide();\n              }\n            });\n          }\n\n          ensureBtn.click(function () {\n            isFlag = !isFlag;\n            var inputVal = $(\"#inputVal\").val();\n            var obj = {\n              id: inputVal,\n              text: inputVal\n            };\n\n            if (inputVal != \"\") {\n              var newOption = new Option(obj.text, obj.id, true, true);\n              select2Dom.append(newOption).trigger(\"change\");\n            }\n\n            $(\"#inputVal\").val(\"\");\n            $(\"#customDiv\").hide();\n          });\n          var changeFn = fmt.$attr(\"on/change\");\n          var baseSelect2 = {\n            language: {\n              noResults: function noResults() {\n                return fmt.noresults || \"没有该匹配项\";\n              }\n            },\n            placeholder: fmt.placeholder || \"请选择...\",\n            data: data,\n            multiple: true\n          };\n          td.append(replacer);\n          select2Dom.select2(baseSelect2);\n          setTimeout(function () {\n            select2Dom.on(\"change\", function (event) {\n              try {\n                changeFn({\n                  row: ctrlGroup,\n                  current: fmt,\n                  value: $(this).select2(\"data\").map(function (e) {\n                    return e.text;\n                  })\n                });\n              } catch (e) {\n                console.error(e);\n              }\n            });\n          });\n        });\n        return td;\n      };\n\n      var createInputableSelect = function createInputableSelect(fmt, ctrlGroup) {\n        var format = fmt.format || {\n          id: \"id\",\n          label: \"label\"\n        };\n        var disabled = fmt.disabled || false;\n        var val = fmt.value + \"\";\n        var options = fmt.options || [];\n        var td = $(\"<td></td>\");\n        var cls = fmt.class || \"\";\n        td.addClass(cls);\n        var style = fmt.style;\n        td.css(\"padding\", \"3px\");\n\n        if (_typeof(style) == \"object\") {\n          td.css(style);\n        }\n\n        td.css(\"padding\", \"3px\");\n        var inx = 0;\n        var data = options.map(function (elem) {\n          var rs = {\n            id: elem[format.id],\n            text: elem[format.label]\n          };\n          inx++;\n          return rs;\n        });\n        $$.loadExternalJs(['select2'], function () {\n          var select2Dom = $(\"<select></select>\");\n          var changeFn = fmt.$attr(\"on/change\");\n          select2Dom.css(\"width\", \"100%\");\n          var baseSelect2 = {\n            language: {\n              noResults: function noResults() {\n                return fmt.noresults || \"没有该匹配项\";\n              }\n            },\n            placeholder: fmt.placeholder || \"请选择...\",\n            data: data\n          };\n          td.append(select2Dom);\n          select2Dom.select2(baseSelect2);\n          setTimeout(function () {\n            var selection = td.find(\".select2\");\n            selection.css(\"visibility\", \"hidden\");\n            var replacer = $(\"<div><div>\");\n            var input = $(\"<input/>\");\n\n            if (disabled) {\n              input = $(\"<input disabled='disabled' / >\");\n            }\n\n            var buttonWrap = $(\"<span class=\\\"input-group-btn\\\"></span>\");\n            var button = $(\"<span class=\\\"btn btn-default\\\"><span class=\\\"glyphicon glyphicon-plus\\\"></span></span>\");\n            var wrap = $(\"<div></div>\");\n            wrap.css(\"position\", \"relative\");\n            wrap.css(\"top\", \"15px\");\n            input.addClass(\"form-control\");\n            replacer.addClass(\"input-group\");\n            replacer.css(\"width\", \"100%\");\n            replacer.append(input);\n            replacer.append(buttonWrap);\n            buttonWrap.append(button);\n            wrap.append(replacer);\n            input.val(val);\n            input.attr(\"placeholder\", fmt.placeholder);\n            select2Dom.on(\"change\", function (event) {\n              var target = $(event.target);\n              var id = target.val();\n              var find = options.find(function (elem) {\n                return elem[format['id']] == id;\n              });\n              input.val(find[format['label']]);\n\n              try {\n                changeFn({\n                  row: ctrlGroup,\n                  current: fmt,\n                  value: {\n                    valueCode: find[format['id']],\n                    label: find[format['label']]\n                  }\n                });\n              } catch (e) {\n                console.error(e);\n              }\n            });\n\n            var toggleSelect = function toggleSelect() {\n              if ($(\".select2-container--open\").size()) {\n                select2Dom.select2(\"close\");\n              } else {\n                select2Dom.select2(\"open\");\n              }\n            };\n\n            if (!disabled) {\n              button.on(\"click\", toggleSelect);\n            }\n\n            td.prepend(wrap);\n            input.on(\"change\", function (event) {\n              try {\n                changeFn({\n                  row: ctrlGroup,\n                  current: fmt,\n                  value: {\n                    valueCode: input.val(),\n                    label: input.val()\n                  }\n                });\n              } catch (e) {\n                console.error(e);\n              }\n            });\n          });\n          var find = options.find(function (elem) {\n            return elem.id == val;\n          });\n          var inxStr = options.indexOf(find) + \"\";\n          select2Dom.val(val);\n          select2Dom.trigger('change.select2');\n        });\n        return td;\n      };\n\n      var createSelet = function createSelet(fmt, ctrlGroup) {\n        var format = fmt.format || {\n          id: \"id\",\n          label: \"label\"\n        };\n        var val = fmt.value + \"\";\n        var options = fmt.options || [];\n        var disabled = fmt.disabled || false;\n        var td = $(\"<td></td>\");\n        var cls = fmt.class || \"\";\n        td.addClass(cls);\n        var style = fmt.style;\n        td.css(\"padding\", \"3px\");\n\n        if (_typeof(style) == \"object\") {\n          td.css(style);\n        }\n\n        td.css(\"padding\", \"3px\");\n\n        var getData4Options = function getData4Options(key, value) {\n          var data = [];\n          options.forEach(function (elem) {\n            if (key == undefined || value == undefined || elem[key] == value) {\n              var rs = {\n                id: elem[format.id],\n                text: elem[format.label]\n              };\n              data.push(rs);\n            }\n          });\n          return data;\n        };\n\n        $$.loadExternalJs(['select2'], function () {\n          var select2Dom = $(\"<select></select>\");\n\n          if (disabled) {\n            select2Dom = $(\"<select disabled='disabled'></select>\");\n          }\n\n          var changeFn = fmt.$attr(\"on/change\");\n          select2Dom.css(\"width\", \"100%\");\n          var baseSelect2 = {\n            language: {\n              noResults: function noResults() {\n                return fmt.noresults || \"没有该匹配项\";\n              }\n            },\n            placeholder: fmt.placeholder || \"请选择...\",\n            data: getData4Options()\n          };\n          select2Dom.on(\"select2:select\", function (evt) {\n            if (typeof changeFn == \"function\") {\n              var id = evt.params.data.id; //var find = fmt.options[id];\n\n              var find = fmt.options.find(function (elem) {\n                return id == elem[format.id];\n              });\n\n              try {\n                changeFn({\n                  row: ctrlGroup,\n                  current: fmt,\n                  value: find\n                });\n              } catch (e) {\n                console.error(e);\n              }\n            }\n          });\n          td.append(select2Dom);\n          select2Dom.select2(baseSelect2);\n          var find = options.find(function (elem) {\n            return elem.id == val;\n          });\n          var inxStr = options.indexOf(find) + \"\";\n          select2Dom.val(val);\n          select2Dom.trigger('change.select2'); //如果format有parentName，那么就要监听这个parentName的变化\n\n          var parentEvent;\n\n          if (format.parentName) {\n            if (parentEvent) {\n              parentEvent();\n              parentEvent = null;\n            }\n\n            parentEvent = scope.$on(format.parentName, function (event, params) {\n              select2Dom.select2('destroy').empty();\n              baseSelect2.data = getData4Options(format.parentKey, params.value);\n              select2Dom.select2(baseSelect2);\n              select2Dom.val(\"\");\n              select2Dom.trigger('change.select2');\n            });\n          }\n        });\n        return td;\n      };\n\n      var createClipboardButton = function createClipboardButton(fmt, ctrlGroup) {\n        var cur = this;\n        var td = $(\"<td></td>\");\n        var style = fmt.style || {};\n        var btnStyle = fmt.btnStyle || {};\n        var cls = fmt.class || \"\";\n        var btnclass = fmt.btnclass || \"\";\n        var saveFn = fmt.$attr(\"on/save\");\n        var disabled = fmt.disabled;\n        td.addClass(cls);\n        td.css(\"padding\", \"3px\");\n\n        if (_typeof(style) == \"object\") {\n          td.css(style);\n        }\n\n        var button = $(\"<button></button>\");\n        var txt = $(\"<span></span>\");\n        var icon = $(\"<span></span>\");\n        var clickFn = fmt.$attr(\"on/click\");\n        button.addClass(btnclass);\n        button.attr(\"type\", \"button\");\n\n        if (fmt.icon) {\n          icon.addClass(fmt.icon);\n          button.append(icon);\n        }\n\n        if (disabled) {\n          button.prop(\"disabled\", \"disabled\");\n        }\n\n        button.css(btnStyle);\n        txt.text(fmt.value || \"\");\n        button.append(txt);\n        button.attr(\"data-clipboard-text\", fmt.clipboardText || \"\");\n        $$.loadExternalJs(['clipboard'], function (Clipboard) {\n          setTimeout(function () {\n            var clipboard = new Clipboard(button[0]);\n            clipboard.on('success', function (e) {\n              if (saveFn) {\n                saveFn(e);\n              }\n\n              e.clearSelection();\n            });\n            clipboard.on('error', function (e) {\n              ;\n              console.error('Action:', e.action);\n              console.error('Trigger:', e.trigger);\n            });\n          });\n        });\n        td.append(button);\n        return td;\n      };\n\n      var createButton = function createButton(fmt, ctrlGroup) {\n        var td = $(\"<td></td>\");\n        var style = fmt.style || {};\n        var btnStyle = fmt.btnStyle || {};\n        var cls = fmt.class || \"\";\n        var btnclass = fmt.btnclass || \"\";\n        var disabled = fmt.disabled;\n        var format = fmt.format || {\n          label: \"value\"\n        };\n        td.addClass(cls);\n        td.css(\"padding\", \"3px\");\n\n        if (_typeof(style) == \"object\") {\n          td.css(style);\n        }\n\n        var button = $(\"<button></button>\");\n        var txt = $(\"<span></span>\");\n        var icon = $(\"<span></span>\");\n        var clickFn = fmt.$attr(\"on/click\");\n        button.addClass(btnclass);\n        button.attr(\"type\", \"button\");\n\n        if (fmt.icon) {\n          icon.addClass(fmt.icon);\n          button.append(icon);\n        }\n\n        if (disabled) {\n          button.prop(\"disabled\", \"disabled\");\n        }\n\n        button.css(btnStyle);\n        txt.text(fmt[format.label] || \"\");\n        button.append(txt);\n        button.on(\"click\", function (event) {\n          if (typeof clickFn == \"function\") {\n            clickFn({\n              row: ctrlGroup,\n              current: fmt,\n              ui: event\n            });\n          }\n        });\n        td.append(button);\n        return td;\n      };\n\n      var createUploadFile = function createUploadFile(fmt, ctrlGroup) {\n        var group = $(\"<div></div>\");\n        var cfg;\n        group.addClass(\"btn-group\");\n        var file;\n        var td = $(\"<td></td>\");\n        var style = fmt.style || {};\n        var btnStyle = fmt.btnStyle || {};\n        var cls = fmt.class || \"\";\n        var disabled = fmt.disabled;\n        var previewBtn = $(\"<button></button>\");\n        var submitBtn = $(\"<button></button>\");\n        var submitFn = fmt.$attr(\"on/submit\");\n        var config = {};\n        config.group = fmt.group;\n        previewBtn.addClass(\"btn btn-default\");\n        previewBtn.text(\"预览\");\n        submitBtn.addClass(\"btn btn-primary\");\n        submitBtn.text(\"上传\");\n        td.addClass(cls);\n        td.css(\"padding\", \"3px\");\n\n        if (_typeof(style) == \"object\") {\n          td.css(style);\n        }\n\n        var button = $(\"<button></button>\");\n        var txt = $(\"<span></span>\");\n        var icon = $(\"<span></span>\");\n        var clickFn = fmt.$attr(\"on/click\");\n        var fileDom = $(\"<input />\");\n        fileDom.attr(\"type\", \"file\");\n        fileDom.css(\"display\", \"none\");\n        button.addClass(\"btn btn-default\");\n        button.attr(\"type\", \"button\");\n        group.append(button);\n\n        if (fmt.icon) {\n          icon.addClass(fmt.icon);\n          button.append(icon);\n        }\n\n        if (disabled) {\n          button.prop(\"disabled\", \"disabled\");\n        }\n\n        button.css(btnStyle);\n        txt.text(\"选择文件\");\n        button.append(txt);\n        previewBtn.off(\"click\");\n        previewBtn.on(\"click\", function (event) {\n          element.createSystemPopupByJsonName(\"imagePrev\", {\n            title: \"图片内容预览\",\n            width: \"500px\",\n            config: cfg\n          }, {\n            file: file\n          });\n        });\n        submitBtn.on(\"click\", function (event) {\n          element.uploadFile(file, config, function (event) {\n            submitBtn.remove();\n            txt.text(\"文件 : \" + file.name + \"已经成功上传！\");\n            cfg = event.data;\n\n            if (submitFn) {\n              submitFn(event[\"data\"]);\n              previewBtn.off(\"click\");\n              previewBtn.on(\"click\", function (evt) {\n                element.createSystemPopupByJsonName(\"imagePrev\", {\n                  title: \"图片内容预览\",\n                  width: \"500px\"\n                }, {\n                  url: event[\"data\"].value\n                });\n              });\n            }\n          });\n        });\n        fileDom.on(\"change\", function (event) {\n          file = fileDom[0].files[0];\n          txt.text(\"已选择文件 : \" + file.name);\n          group.append(previewBtn);\n          group.append(submitBtn);\n        });\n        button.on(\"click\", function (event) {\n          fileDom.trigger(\"click\");\n        });\n        td.append(fileDom);\n        td.append(group);\n        return td;\n      }; //加了一个可以自定义上传图片，上传图片的参数\n\n\n      var createUploadFile2 = function createUploadFile2(fmt, ctrlGroup) {\n        var group = $(\"<div class='dropdown'></div>\");\n        group.addClass(\"btn-group\");\n        var file;\n        var td = $(\"<td></td>\");\n        var autosubmit = !fmt.manual ? true : false;\n        var style = fmt.style || {};\n        var btnStyle = fmt.btnStyle || {};\n        var cls = fmt.class || \"\";\n        var disabled = fmt.disabled;\n        var text = fmt.text ? fmt.text : \"选择文件\"; //获得初始化的文件名\n\n        var submitFn = fmt.$attr(\"on/submit\");\n        var config = {};\n        config.group = fmt.group;\n        config.fileFormat = fmt.fileFormat; //自定义上传图片的格式\n\n        config.url = fmt.url; //自定义上传图片路径\n\n        config.formData = fmt.formData; //获取图片上传的参数\n\n        td.addClass(cls);\n        td.css(\"padding\", \"3px\");\n\n        if (_typeof(style) == \"object\") {\n          td.css(style);\n        }\n\n        var button = $(\"<button></button>\");\n        var dpulDom = $('<ul class=\"dropdown-menu\" role=\"menu\"></ul>');\n        var mulbtn;\n        var txt = $(\"<span></span>\");\n        var icon = $(\"<span></span>\");\n        var clickFn = fmt.$attr(\"on/click\");\n        var fileDom = $(\"<input />\");\n        fileDom.attr(\"type\", \"file\");\n        /**\n         * 韩星\n         * 控制是否为多选几个文件一起上传\n         *\n         */\n\n        if (fmt.multiple == true) {\n          group.append(dpulDom);\n\n          if (fmt.path) {\n            var textAry = fmt.text.split(\",\");\n            mulbtn = $('<button type=\"button\" class=\"btn btn-default dropdown-toggle\" data-toggle=\"dropdown\">' + textAry[0] + '<span class=\"caret\"></span></button>');\n            group.prepend(mulbtn);\n            button.css(\"display\", \"none\");\n            textAry.forEach(function (txt) {\n              var dpliDom = $('<li>' + txt + '</li>');\n              dpulDom.append(dpliDom);\n            });\n          }\n\n          fileDom.attr(\"multiple\", true);\n        }\n\n        fileDom.css(\"display\", \"none\");\n        button.addClass(\"btn btn-default\");\n        button.attr(\"type\", \"button\");\n\n        if (fmt.groupId) {\n          button.attr(\"id\", fmt.groupId);\n        }\n\n        group.append(button);\n\n        if (fmt.icon) {\n          icon.addClass(fmt.icon);\n          button.append(icon);\n        }\n\n        if (disabled) {\n          button.prop(\"disabled\", \"disabled\");\n        }\n\n        button.css(btnStyle);\n        txt.text(text);\n        button.append(txt);\n        var submitBtn; //提交按钮\n\n        if (!autosubmit) {\n          submitBtn = $(\"<button></button>\");\n          submitBtn.addClass(\"btn btn-primary\");\n          submitBtn.text(\"上传\");\n        }\n\n        var btnstatus = fmt.btnstatus; //如果有删除\n\n        var delBtn;\n\n        if (!disabled && btnstatus && btnstatus.search(\"del\") > -1) {\n          var deleteFn = fmt.$attr(\"on/del\");\n          delBtn = $(\"<button></button>\");\n          delBtn.addClass(\"btn btn-default\");\n          delBtn.text(\"清空\");\n          delBtn.off(\"click\");\n          delBtn.on(\"click\", function (event) {\n            if (submitBtn) submitBtn.remove();\n            if (mulbtn) mulbtn.remove();\n            button.css(\"display\", \"inline-block\");\n            txt.text(\"选择文件\");\n            fmt.path = \"\";\n            fmt.text = \"\";\n\n            if (deleteFn) {\n              deleteFn(event, fileDom, fmt); //需要把返回的全部callback回来\n            }\n          });\n          group.append(delBtn);\n        } //如果有下载\n\n\n        var downloadBtn;\n\n        if (fmt.path && disabled && btnstatus && btnstatus.search(\"download\") > -1) {\n          var downloadFn = fmt.$attr(\"on/download\");\n          downloadBtn = $(\"<button></button>\");\n          downloadBtn.addClass(\"btn btn-default\");\n          downloadBtn.text(\"下载\");\n          downloadBtn.off(\"click\");\n          downloadBtn.on(\"click\", function (event) {\n            if (downloadFn) {\n              downloadFn(event, fileDom, fmt); //需要把返回的全部callback回来\n            }\n          });\n          group.append(downloadBtn);\n        }\n\n        fileDom.on(\"change\", function (event) {\n          /* 老版本的处理\n           var txtStr = \"\";\n           for (var f in fileDom[0].files) {\n           if (fileDom[0].files[f] instanceof File) {\n           if (txtStr) {\n           txtStr += \"\\r\\n\" + fileDom[0].files[f].name\n           } else {\n           txtStr = fileDom[0].files[f].name\n           }\n           }\n           }\n           txt.text(txtStr);\n           txt.attr(\"title\",txtStr);\n           if(fmt.multiple==true) {\n           txt.css({\n           \"width\":\"120px\",\n           \"display\":\"block\",\n           \"cursor\":\"pointer\",\n           \"overflow\": \"hidden\",\n           \"text-overflow\":\"ellipsis\",\n           \"white-space\" : \"nowrap\"\n           })\n           }\n           */\n          var txtStr = \"\";\n          dpulDom.empty();\n\n          for (var f in fileDom[0].files) {\n            if (fileDom[0].files[f] instanceof File) {\n              if (!autosubmit) {\n                if (fmt.multiple == true) {\n                  if (!txtStr) {\n                    txtStr = fileDom[0].files[f].name;\n                    mulbtn = $('<button type=\"button\" class=\"btn btn-default dropdown-toggle\" data-toggle=\"dropdown\">' + txtStr + '<span class=\"caret\"></span></button>');\n                    group.prepend(mulbtn);\n                    button.css(\"display\", \"none\");\n                  } //            var dpliDom = $('<li>'+fileDom[0].files[f].name+'<span role=\"button\" class=\"glyphicon glyphicon-trash\"></span></li>')\n\n\n                  var dpliDom = $('<li>' + fileDom[0].files[f].name + '</li>');\n                  dpulDom.append(dpliDom);\n                } else {\n                  txtStr = fileDom[0].files[f].name;\n                  txt.text(txtStr);\n                  txt.attr(\"title\", txtStr);\n                }\n              }\n            }\n          }\n\n          if (!autosubmit) {\n            submitBtn.on(\"click\", function (event) {\n              element.uploadFile1(fileDom[0].files, config, function (event) {\n                submitBtn.remove();\n\n                if (submitFn) {\n                  if (fmt.multiple) {\n                    submitFn(event, fileDom, fmt); //需要把返回的全部callback回来\n                  } else {\n                    submitFn(event[0], fileDom, fmt); //需要把返回的全部callback回来\n                  }\n                }\n              });\n            });\n            group.append(submitBtn);\n          } else {\n            element.uploadFile1(fileDom[0].files, config, function (event) {\n              //用了新上传文件提交services\n              if (submitFn) {\n                if (fmt.multiple) {\n                  submitFn(event, fileDom, fmt); //需要把返回的全部callback回来\n                } else {\n                  submitFn(event[0], fileDom, fmt); //需要把返回的全部callback回来\n                }\n              }\n            });\n          }\n        });\n        button.on(\"click\", function (event) {\n          fileDom.trigger(\"click\");\n        });\n        td.append(fileDom);\n        td.append(group);\n        return td;\n      };\n\n      var createButtonGroup = function createButtonGroup(fmt, ctrlGroup) {\n        var td = $(\"<td></td>\");\n        var style = fmt.style || {};\n        var groupStyle = fmt.groupStyle || {};\n        td.css(style);\n        td.css(\"padding\", \"3px\");\n        var div = $(\"<div></div>\");\n        div.css(groupStyle);\n        div.addClass(\"btn-group\");\n\n        var createBtn = function createBtn(fmtBtn) {\n          var style = fmtBtn.style || {};\n          var disabled = fmtBtn.disabled;\n          var btnStyle = fmtBtn.btnStyle || {};\n          var cls = fmtBtn.class || \"btn btn-default\";\n          var btnclass = fmtBtn.btnclass || \"\";\n          var button = $(\"<button></button>\");\n          var txt = $(\"<span></span>\");\n          var icon = $(\"<span></span>\");\n          var clickFn = fmtBtn.$attr(\"on/click\");\n          button.addClass(btnclass);\n          button.attr(\"type\", \"button\");\n\n          if (fmtBtn.icon) {\n            icon.addClass(fmtBtn.icon);\n            button.append(icon);\n          }\n\n          if (disabled) {\n            button.prop(\"disabled\", \"disabled\");\n          }\n\n          button.css(btnStyle);\n          txt.text(fmtBtn.value || \"\");\n          button.append(txt);\n          td.append(button);\n          button.on(\"click\", function (event) {\n            if (typeof clickFn == \"function\") {\n              clickFn({\n                row: ctrlGroup,\n                current: fmtBtn\n              });\n            }\n          });\n          return button;\n        };\n\n        var createClipboardBtn = function createClipboardBtn(fmtBtn) {\n          var cur = this;\n          var style = fmtBtn.style || {};\n          var btnStyle = fmtBtn.btnStyle || {};\n          var cls = fmtBtn.class || \"\";\n          var btnclass = fmtBtn.btnclass || \"\";\n          var saveFn = fmtBtn.$attr(\"on/save\");\n          var disabled = fmtBtn.disabled;\n\n          if (_typeof(style) == \"object\") {\n            td.css(style);\n          }\n\n          var button = $(\"<button></button>\");\n          var txt = $(\"<span></span>\");\n          var icon = $(\"<span></span>\");\n          button.addClass(btnclass);\n          button.attr(\"type\", \"button\");\n\n          if (fmtBtn.icon) {\n            icon.addClass(fmtBtn.icon);\n            button.append(icon);\n          }\n\n          if (disabled) {\n            button.prop(\"disabled\", \"disabled\");\n          }\n\n          button.css(btnStyle);\n          txt.text(fmtBtn.value || \"\");\n          button.append(txt);\n          button.attr(\"data-clipboard-text\", fmtBtn.clipboardText || \"\");\n          $$.loadExternalJs(['clipboard'], function (Clipboard) {\n            setTimeout(function () {\n              var clipboard = new Clipboard(button[0]);\n              clipboard.on('success', function (e) {\n                if (saveFn) {\n                  saveFn(e);\n                }\n\n                e.clearSelection();\n              });\n              clipboard.on('error', function (e) {\n                ;\n                console.error('Action:', e.action);\n                console.error('Trigger:', e.trigger);\n              });\n            });\n          });\n          return button;\n        };\n\n        for (var i in fmt.content) {\n          if (fmt.content[i].type == \"button\") {\n            div.append(createBtn(fmt.content[i]));\n          } else if (fmt.content[i].type == \"clipboardButton\") {\n            div.append(createClipboardBtn(fmt.content[i]));\n          }\n        }\n\n        td.append(div);\n        return td;\n      };\n\n      var createDatePicker = function createDatePicker(fmt, ctrlGroup) {\n        var td = $(\"<td></td>\");\n        var style = fmt.style;\n        var value = fmt.value;\n        td.css(\"padding\", \"3px\");\n\n        if (_typeof(style) == \"object\") {\n          td.css(style);\n        }\n\n        var cls = fmt.class || \"\";\n        td.addClass(cls);\n        var wrap = $(\"<div></div>\");\n        var id = Math.uuid();\n        var changeFn = fmt.$attr(\"on/change\");\n        var input = $(\"<input id=datePicker\" + id + \" />\").addClass(\"form-control\").attr(\"type\", \"text\");\n        var i = $('<i class=\"glyphicon glyphicon-calendar fa fa-calendar\"></i>').css({\n          position: \"absolute\",\n          bottom: \"10px\",\n          right: \"14px\",\n          top: \"auto\",\n          cursor: \"pointer\"\n        });\n        td.append(wrap);\n        wrap.css(\"position\", \"relative\");\n        wrap.append(input).append(i);\n        setTimeout(function () {\n          $$.loadExternalJs(['laydate'], function (laydate) {\n            console.assert(input.length, \"laydate容器不存在\");\n            laydate.path = '../../toolkit/laydate/';\n            laydate.render({\n              elem: input[0],\n              //指定元素\n              theme: '#393D49',\n              value: value ? useMomentFormat(value, \"YYYY-MM-DD\") : '',\n              done: function done(value, date, endDate) {\n                if (changeFn) {\n                  changeFn({\n                    target: element,\n                    global: global,\n                    row: ctrlGroup,\n                    current: fmt,\n                    value: {\n                      getUTCDateString: value == '' ? '' : formatDatebyMomentToUTC(value),\n                      //格林尼治时间格式\n                      getDateString: value\n                    }\n                  });\n                }\n              }\n            });\n          });\n        });\n        return td;\n      };\n\n      var createDateTimePicker = function createDateTimePicker(fmt, ctrlGroup) {\n        var td = $(\"<td></td>\");\n        var style = fmt.style;\n        td.css(\"padding\", \"3px\");\n\n        if (_typeof(style) == \"object\") {\n          td.css(style);\n        }\n\n        var cls = fmt.class || \"\";\n        var value = fmt.value;\n        td.addClass(cls);\n        var wrap = $(\"<div></div>\");\n        var changeFn = fmt.$attr(\"on/change\");\n        var id = Math.uuid();\n        var input = $(\"<input id=dateTime\" + id + \" />\").addClass(\"form-control\").attr(\"type\", \"text\");\n        var dateType = fmt.dateType;\n\n        if (fmt.icon == \"none\") {\n          td.append(wrap);\n          wrap.css(\"position\", \"relative\");\n          wrap.append(input);\n        } else {\n          var i = $('<i class=\"glyphicon glyphicon-calendar fa fa-calendar\"></i>').css({\n            position: \"absolute\",\n            bottom: \"10px\",\n            right: \"14px\",\n            top: \"auto\",\n            cursor: \"pointer\"\n          });\n          td.append(wrap);\n          wrap.css(\"position\", \"relative\");\n          wrap.append(input).append(i);\n        }\n\n        setTimeout(function () {\n          $$.loadExternalJs(['laydate'], function (laydate) {\n            var tstr = \"yy-MM-dd hh:mm:ss\";\n\n            if (_typeof(value) === \"object\" && value.CLASS === \"DateHandler\") {\n              if (dateType == \"date\") value.trimmToDate();\n              value = value.getDateString(\"yy-MM-dd hh:mm:ss\");\n            }\n\n            console.assert(input.length, \"laydate容器不存在\");\n            laydate.path = '../../toolkit/laydate/';\n            laydate.render({\n              elem: input[0],\n              //指定元素'#dateRange'\n              theme: '#393D49',\n              type: dateType ? dateType : 'datetime',\n              btns: ['clear', 'confirm'],\n              value: value ? useMomentFormat(value, \"YYYY-MM-DD HH:mm:ss\") : '',\n              done: function done(value, date, endDate) {\n                if (changeFn) {\n                  changeFn({\n                    target: element,\n                    global: global,\n                    row: ctrlGroup,\n                    current: fmt,\n                    value: {\n                      getUTCDateString: value == '' ? '' : formatDatebyMomentToUTC(value),\n                      //格林尼治时间格式    element.getDateHandler(value).getUTCDateString()\n                      getDateString: value\n                    }\n                  });\n                }\n              }\n            });\n          });\n        });\n        return td;\n      };\n\n      var createDateRangePicker = function createDateRangePicker(fmt, ctrlGroup) {\n        var td = $(\"<td></td>\");\n        var style = fmt.style;\n        td.css(\"padding\", \"3px\");\n\n        if (_typeof(style) == \"object\") {\n          td.css(style);\n        }\n\n        var cls = fmt.class || \"\";\n        td.addClass(cls);\n        var wrap = $(\"<div></div>\");\n        var changeFn = fmt.$attr(\"on/change\");\n        var id = Math.uuid();\n        var input = $(\"<input id=dateRange\" + id + \" />\").addClass(\"form-control\").attr(\"type\", \"text\");\n\n        if (fmt.icon == \"none\") {\n          td.append(wrap);\n          wrap.css(\"position\", \"relative\");\n          wrap.css(\"padding\", \"3px\");\n          wrap.append(input);\n        } else {\n          var i = $('<i class=\"glyphicon glyphicon-calendar fa fa-calendar\"></i>').css({\n            position: \"absolute\",\n            bottom: \"10px\",\n            right: \"14px\",\n            top: \"auto\",\n            cursor: \"pointer\"\n          });\n          td.append(wrap);\n          wrap.css(\"position\", \"relative\");\n          wrap.css(\"padding\", \"3px\");\n          wrap.append(input).append(i);\n        }\n\n        var btns = ['clear', 'confirm'];\n\n        if (fmt.btns) {\n          btns = fmt.btns;\n        }\n\n        setTimeout(function () {\n          $$.loadExternalJs(['laydate'], function (laydate) {\n            laydate.path = '../../toolkit/laydate/';\n            laydate.render({\n              elem: input[0],\n              //指定元素\n              theme: '#393D49',\n              range: true,\n              btns: btns,\n              value: fmt.value == '' || fmt.value == undefined ? '' : element.getDateHandler(fmt.value[0]).getDateString(\"yy-MM-dd\") + \" - \" + element.getDateHandler(fmt.value[1]).getDateString(\"yy-MM-dd\"),\n              done: function done(value, date, endDate) {\n                var dateArray = value.split(\" - \");\n\n                if (changeFn) {\n                  changeFn({\n                    target: element,\n                    global: global,\n                    row: ctrlGroup,\n                    current: fmt,\n                    value: {\n                      start: dateArray[0] == '' ? null : formatDatebyMomentToUTC(dateArray[0]),\n                      //格林尼治时间格式\n                      end: dateArray[0] == '' ? null : formatDatebyMomentToUTC(dateArray[1]),\n                      //格林尼治时间格式\n                      // end: element.getDateHandler(dateArray[1]).getUTCDateString(),  //格林尼治时间格式\n                      startDateString: dateArray[0],\n                      endDateString: dateArray[1]\n                    }\n                  });\n                }\n              }\n            });\n          });\n        });\n        return td;\n      };\n\n      var createJQury = function createJQury(fmt, ctrlGroup) {\n        var td = $(\"<td></td>\");\n        var style = fmt.style;\n        td.css(\"padding\", \"3px\");\n\n        if (_typeof(style) == \"object\") {\n          td.css(style);\n        }\n\n        var renderFn = fmt.render;\n\n        if (typeof renderFn == \"function\") {\n          td.append(renderFn($));\n        }\n\n        return td;\n      };\n\n      var createDropDownTree = function createDropDownTree(fmt, ctrlGroup) {\n        var td = $(\"<td></td>\");\n        var changeFn = fmt.$attr(\"on/change\");\n        td.css(\"padding\", \"3px\");\n        var style = fmt.style;\n        td.css(\"padding\", \"3px\");\n\n        if (_typeof(style) == \"object\") {\n          td.css(style);\n        }\n\n        var cls = fmt.class || \"\";\n        td.addClass(cls);\n        var dropDownTree = $(\"<div></div>\");\n        $$.loadExternalJs(['dropdowntree'], function () {\n          dropDownTree.dropdowntree({\n            value: fmt.value,\n            options: fmt.options,\n            format: fmt.format,\n            change: function change(event) {\n              if (typeof changeFn == \"function\") {\n                changeFn({\n                  row: ctrlGroup,\n                  current: fmt,\n                  value: event.data\n                });\n              }\n            }\n          });\n        });\n        td.append(dropDownTree);\n        return td;\n      };\n\n      var createSvg = function createSvg(fmt) {\n        var td = $(\"<td></td>\");\n        var style = fmt.style || {};\n        var cls = fmt.class || \"\";\n        var svgAttr = fmt.svgAttr || {};\n        var svgStyle = fmt.svgStyle || {};\n        var renderFn = fmt.render;\n        td.addClass(cls);\n        td.css(\"padding\", \"3px\");\n        $$.loadExternalJs(['d3'], function (d3) {\n          var wrap = d3.select(td[0]);\n          var svg = wrap.append(\"svg\");\n\n          for (var i in svgAttr) {\n            svg.attr(i, svgAttr[i]);\n          }\n\n          for (var i in svgStyle) {\n            svg.style(i, svgStyle[i]);\n          }\n\n          renderFn(svg);\n        });\n        return td;\n      };\n\n      var createCustomHtml = function createCustomHtml(fmt) {\n        var td = $(\"<td></td>\");\n        var div = $(\"<div></div>\");\n        var style = fmt.style || {};\n        var cls = fmt.class || \"\";\n        var val = fmt.value || {}; // 如果传进来是个数组需要展示多个\n\n        if (val instanceof Array) {\n          val.forEach(function (ele) {\n            var value = ele.qualifiedName ? ele.qualifiedName : ele.value;\n            var a = $('<a target=\"_blank\" href=\"' + value + '\">' + ele.label + '</a><br />');\n            div.append(a);\n          });\n        } else {\n          div.append(val);\n        }\n\n        var customStyle = fmt.customStyle || {};\n        var renderFn = fmt.render;\n        td.addClass(cls); // td.css(\"padding\", \"3px\");\n\n        td.css(style);\n        td.append(div);\n        return td;\n      };\n\n      var createClock = function createClock(fmt, item) {\n        var td = $(\"<td></td>\");\n        var style = fmt.style || {};\n        var cls = fmt.class || \"\";\n        var label = $(\"<div></div>\");\n        td.addClass(cls);\n        td.css(\"padding\", \"3px\");\n\n        if (_typeof(style) == \"object\") {\n          label.css(style);\n        }\n\n        var valueFn = fmt.value || function (elem) {\n          return elem;\n        };\n\n        $$.loadExternalJs(['clock'], function (clock) {\n          var myClock = clock.init();\n          myClock.on(\"init\", function (value, id) {\n            ;\n            label.text(valueFn(value));\n          });\n          myClock.on(\"change\", function (value, id) {\n            ;\n            label.text(valueFn(value));\n          });\n          myClock.start();\n        });\n        td.append(label);\n        return td;\n      };\n\n      var createRadio = function createRadio(fmt, ctrlGroup) {\n        var td = $(\"<td></td>\");\n        var val = fmt.value;\n        var changeFn = fmt.$attr(\"on/change\");\n        td.css(\"padding\", \"3px\");\n        var style = fmt.style;\n        td.css(\"padding\", \"3px\");\n\n        if (_typeof(style) == \"object\") {\n          td.css(style);\n        }\n\n        var cls = fmt.class || \"\";\n        td.addClass(cls);\n        var radioDom = $(\"<div></div>\").addClass(\"btn-group btn-group-justified\");\n        radioDom.css(\"width\", \"100%\");\n\n        var createBtn = function createBtn(item) {\n          var btn = $(\"<div></div>\").addClass(\"btn\");\n\n          if (item.id == val) {\n            btn.addClass(\"btn-primary\");\n          } else {\n            btn.addClass(\"btn-default\");\n          }\n\n          btn.on(\"click\", function (event) {\n            var btns = radioDom.find(\".btn-primary\");\n            btns.removeClass(\"btn-primary\");\n            btns.addClass(\"btn-default\");\n            btn.removeClass(\"btn-default\");\n            btn.addClass(\"btn-primary\");\n\n            if (changeFn) {\n              try {\n                changeFn({\n                  row: ctrlGroup,\n                  current: fmt,\n                  value: item.value\n                });\n              } catch (e) {\n                console.error(e);\n              }\n            }\n          });\n          btn.text(item.label);\n          return btn;\n        };\n\n        for (var i in fmt.options) {\n          radioDom.append(createBtn(fmt.options[i]));\n        }\n\n        td.append(radioDom);\n        return td;\n      };\n\n      var createCheckBoxList = function createCheckBoxList(fmt, ctrlGroup) {\n        var td = $(\"<td></td>\");\n        var multiselect = fmt.multiselect == undefined ? true : fmt.multiselect;\n        td.css(\"padding\", \"3px\");\n        var style = fmt.style;\n\n        if (_typeof(style) == \"object\") {\n          td.css(style);\n        }\n\n        var format = fmt.format || {\n          id: \"id\",\n          label: \"label\"\n        };\n        var cls = fmt.class || \"\";\n        var options = fmt.options;\n        var column = fmt.column || 1;\n        var value = fmt.value;\n        var changeFn = fmt.$attr(\"on/change\");\n\n        var createCheckboxList = function createCheckboxList(item) {\n          var div = $(\"<div></div>\");\n          div.css(\"width\", parseInt(100 / column) + \"%\");\n          div.addClass(\"checkboxlist\");\n          var trick = $(\"<span></span>\");\n          var checkbox = $(\"<div></div>\");\n          trick.addClass(\"glyphicon glyphicon-ok\");\n          checkbox.addClass(\"checkbox\");\n          checkbox.append(trick);\n\n          if (value.some(function (id) {\n            return id == item[format.id];\n          })) {\n            div.addClass(\"checked\");\n          }\n\n          if (item.hasOwnProperty(\"dom\")) {\n            Object.defineProperty(item, \"dom\", {\n              enumerable: false,\n              value: div\n            });\n          } else {\n            item.dom = div;\n          }\n\n          var label = $(\"<span></span>\"); // 文字过长省略\n\n          if (fmt.hideExtraText && fmt.hideExtraText != \"undefined\") {\n            label.css({\n              \"display\": \"inline-block\",\n              \"cursor\": \"pointer\",\n              \"overflow\": \"hidden\",\n              \"text-overflow\": \"ellipsis\",\n              \"white-space\": \"nowrap\",\n              \"vertical-align\": \"middle\",\n              \"width\": fmt.hideExtraText\n            });\n            label.text(item[format.label]);\n            label.attr(\"title\", item[format.label]);\n          } else {\n            label.text(item[format.label]);\n          }\n\n          div.append(checkbox);\n          div.append(label);\n          div.on(\"click\", function (event) {\n            //div.css(\"display\", \"none\");\n            if (multiselect) {\n              if (div.hasClass(\"checked\")) {\n                div.removeClass(\"checked\");\n              } else {\n                div.addClass(\"checked\");\n              }\n            } else {\n              for (var i in options) {\n                options[i].dom.removeClass(\"checked\");\n              }\n\n              div.addClass(\"checked\");\n            }\n\n            changeFn({\n              row: ctrlGroup,\n              current: fmt,\n              value: options.filter(function (elem) {\n                return elem.dom.hasClass(\"checked\");\n              })\n            });\n          });\n          return div;\n        };\n\n        for (var i in options) {\n          td.append(createCheckboxList(options[i]));\n        }\n\n        td.addClass(cls);\n        return td;\n      };\n\n      var createProgress = function createProgress(fmt, ctrlGroup) {\n        var td = $(\"<td></td>\");\n        td.css(\"padding\", \"3px\");\n        var style = fmt.style;\n\n        if (_typeof(style) == \"object\") {\n          td.css(style);\n        }\n\n        var table = $(\"<div style='display:table;'><tr></tr></div>\");\n        var tr = table.find(\"tr\");\n        var td1 = $(\"<td></td>\");\n        var td2 = $(\"<td></td>\");\n        tr.append(td1);\n        tr.append(td2);\n        var cls = fmt.class || \"\";\n        var shownumber = fmt.shownumber;\n        td.addClass(cls);\n        td1.css(\"vertical-align\", \"middle\");\n        td1.css(\"text-align\", \"right\");\n        td2.css(\"vertical-align\", \"middle\");\n        var pwrap = $('<div></div>').addClass(\"progress sm\");\n        var data = fmt.value;\n        var progress = $('<div></div>').addClass(\"progress-bar\").css(\"width\", (data || 0) + \"%\");\n\n        if (shownumber) {\n          table.append(td1);\n          td1.append($(\"<span style=\\\"width:35px;display:inline-block;padding-right:2px;\\\">\" + data + \"%</span>\"));\n        }\n\n        pwrap.css(\"margin\", \"auto\");\n        pwrap.append(progress);\n        td2.append(pwrap);\n        td2.css(\"width\", \"100%\");\n        table.append(td2);\n        td.append(table);\n        /** baogang only */\n\n        var popover = $(\"<div></div>\");\n        popover.text(\"100\");\n        popover.css(\"padding\", \"5px 10px\");\n        popover.css(\"background-color\", \"#000\");\n        popover.css(\"color\", \"#fff\");\n        popover.css(\"position\", \"fixed\");\n        popover.css(\"z-index\", 1100);\n        popover.css(\"pointer-events\", \"none\");\n\n        function mouseenter(event) {\n          popover.css(\"top\", event.clientY - popover.height());\n          popover.css(\"left\", event.clientX - popover.width());\n          $(\"body\").append(popover);\n          progress.on(\"mousemove\", mousemove);\n        }\n\n        function mousemove(event) {\n          ;\n          popover.css(\"top\", event.clientY - popover.height());\n          popover.css(\"left\", event.clientX - popover.width());\n        }\n\n        function mouseleave(event) {\n          progress.off(\"mousemove\");\n          popover.remove();\n        }\n\n        progress.on(\"mouseenter\", mouseenter);\n        progress.on(\"mouseleave\", mouseleave);\n        /** baogang only */\n\n        switch (true) {\n          case data == 100:\n            progress.addClass(\"progress-bar-aqua\");\n            break;\n\n          case data > 90:\n            progress.addClass(\"progress-bar-green\");\n            break;\n\n          case data > 80:\n            progress.addClass(\"progress-bar-yellow\");\n            break;\n\n          case data > 70:\n            progress.addClass(\"progress-bar-yellow\");\n            break;\n\n          case data > 60:\n            progress.addClass(\"progress-bar-red\");\n            break;\n\n          default:\n            progress.addClass(\"progress-bar-danger\");\n            break;\n        }\n\n        return td;\n      };\n\n      var render = function render(ctrlGroups) {\n        defer.resolve(\"underwatch\");\n        ctrlgroup.children().remove();\n\n        var loopCtrlGroups = function loopCtrlGroups(ctrlGroup) {\n          var inputGroup = $(\"<tr></tr>\");\n\n          if (bootstrap) {\n            inputGroup.css(\"display\", \"block\");\n            inputGroup.addClass(\"row\");\n          } //inputGroup.css(\"padding\", \"5px\");\n\n\n          var loopformat = function loopformat(fmt) {\n            var dom;\n\n            ctrlGroup.refresh = function () {\n              ;\n            };\n\n            if (fmt.type == \"label\") {\n              dom = createLabel(fmt, ctrlGroup);\n            } else if (fmt.type == \"icon\") {\n              dom = createIcon(fmt, ctrlGroup);\n            } else if (fmt.type == \"toggle\") {\n              dom = createToggle(fmt, ctrlGroup);\n            } else if (fmt.type == \"autoComplete\") {\n              dom = createAutoComplete(fmt);\n            } else if (fmt.type == \"input\") {\n              dom = createInput(fmt, ctrlGroup);\n            } else if (fmt.type == \"textarea\") {\n              dom = createTextarea(fmt, ctrlGroup);\n            } else if (fmt.type == \"select\") {\n              dom = createSelet(fmt, ctrlGroup);\n            } else if (fmt.type == \"inputableSelect\") {\n              dom = createInputableSelect(fmt, ctrlGroup);\n            } else if (fmt.type == \"multipleSelect\") {\n              dom = createMultipleSelect(fmt, ctrlGroup);\n            } else if (fmt.type == \"button\") {\n              dom = createButton(fmt, ctrlGroup);\n            } else if (fmt.type == \"uploadFile\") {\n              dom = createUploadFile(fmt, ctrlGroup);\n            } else if (fmt.type == \"uploadFile2\") {\n              //宝钢报告编制特殊处理\n              dom = createUploadFile2(fmt, ctrlGroup);\n            } else if (fmt.type == \"dropdowntree\") {\n              dom = createDropDownTree(fmt, ctrlGroup);\n            } else if (fmt.type == \"dateRangePicker\") {\n              dom = createDateRangePicker(fmt, ctrlGroup);\n            } else if (fmt.type == \"datePicker\") {\n              dom = createDatePicker(fmt, ctrlGroup);\n            } else if (fmt.type == \"dateTimePicker\") {\n              dom = createDateTimePicker(fmt, ctrlGroup);\n            } else if (fmt.type == \"multiSelect\") {\n              dom = createMultiSelect(fmt, ctrlGroup);\n            } else if (fmt.type == \"radio\") {\n              dom = createRadio(fmt, ctrlGroup);\n            } else if (fmt.type == \"buttonGroup\") {\n              dom = createButtonGroup(fmt, ctrlGroup);\n            } else if (fmt.type == \"jquery\") {\n              dom = createJQury(fmt, ctrlGroup);\n            } else if (fmt.type == \"clipboardButton\") {\n              dom = createClipboardButton(fmt, ctrlGroup);\n            } else if (fmt.type == \"clock\") {\n              dom = createClock(fmt, ctrlGroup);\n            } else if (fmt.type == \"svg\") {\n              dom = createSvg(fmt, ctrlGroup);\n            } else if (fmt.type == \"customHtml\") {\n              //加了一个自定义html功能，便于其它功能的扩展\n              dom = createCustomHtml(fmt, ctrlGroup);\n            } else if (fmt.type == \"progressbar\") {\n              dom = createProgress(fmt, ctrlGroup);\n            } else if (fmt.type == \"checkboxlist\") {\n              dom = createCheckBoxList(fmt, ctrlGroup);\n            }\n\n            if (bootstrap) {\n              inputGroup.css(\"display\", \"block\");\n            }\n\n            if (fmt.colSpan) {\n              dom.attr(\"colSpan\", fmt.colSpan);\n            }\n\n            if (fmt.rowSpan) {\n              dom.attr(\"rowSpan\", fmt.rowSpan);\n            }\n\n            if (fmt.tdStyle) {\n              dom.css(fmt.tdStyle);\n            }\n\n            element.setSelfDom(dom);\n            return dom;\n          };\n\n          for (var i in ctrlGroup) {\n            inputGroup.append(loopformat(ctrlGroup[i]));\n          }\n\n          return inputGroup;\n        };\n\n        for (var i in ctrlGroups) {\n          ctrlgroup.append(loopCtrlGroups(ctrlGroups[i]));\n        }\n\n        return ctrlgroup;\n      };\n\n      element.render = render;\n\n      element.parentShow = function () {\n        ctrlgroup.parent().parent().css(\"display\", \"block\");\n      };\n\n      element.parentHide = function () {\n        ctrlgroup.parent().parent().css(\"display\", \"none\");\n      };\n\n      element.show = function () {\n        ctrlgroup.css(\"display\", \"block\");\n      };\n\n      element.hide = function () {\n        ctrlgroup.css(\"display\", \"none\");\n      };\n\n      var initFn = expression.$attr(\"on/init\");\n\n      if (typeof initFn == \"function\") {\n        try {\n          initFn({\n            target: element,\n            global: global,\n            scope: scope\n          });\n        } catch (e) {\n          console.error(e);\n        }\n      } else {\n        defer.resolve(\"underwatch\");\n      }\n\n      ctrlgroup.underWatch = true;\n    }\n\n    return wrap;\n  };\n});"],"sourceRoot":"/source/"}