{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./js/services/service_factory.js","webpack:///./ps-baogang/services/common-method-service2.service","webpack:///./ps-baogang/services/ps-area-state.service","webpack:///./ps-baogang/services/ps-btn-click.service","webpack:///./ps-baogang/services/ps-config.service","webpack:///./ps-baogang/services/ps-mock.service","webpack:///./ps-baogang/services/ps-new-websocket.service","webpack:///./ps-baogang/services/ps-polling.service","webpack:///./ps-baogang/services/ps-topo.service","webpack:///./ps-baogang/services/ps-topo2.service","webpack:///./ps-baogang/services/ps-track-data.service","webpack:///./ps-baogang/services/ps-tracker-chart.service","webpack:///./ps-baogang/services/ps-tracker-creator.service","webpack:///./ps-baogang/services/ps-tracker.service","webpack:///./ps-baogang/services/ps-tree-data.service","webpack:///./ps-baogang/services/ps-ui-router-handler.service","webpack:///./ps-baogang/services/ps-websocket.bak.service","webpack:///./ps-baogang/services/ps-websocket.service","webpack:///./ps-baogang/services/test.service","webpack:///./node_modules/ps-angular-loader/lib/angular-explainer.js","webpack:///./ps-baogang/services/common-method-service2.service?7cfa","webpack:///./ps-baogang/services/ps-area-state.service?fe63","webpack:///./ps-baogang/services/ps-btn-click.service?0979","webpack:///./ps-baogang/services/ps-config.service?e2f2","webpack:///./ps-baogang/services/ps-mock.service?7a99","webpack:///./ps-baogang/services/ps-new-websocket.service?7081","webpack:///./ps-baogang/services/ps-polling.service?ea36","webpack:///./ps-baogang/services/ps-topo.service?11a9","webpack:///./ps-baogang/services/ps-topo2.service?c7b5","webpack:///./ps-baogang/services/ps-track-data.service?742f","webpack:///./ps-baogang/services/ps-tracker-chart.service?3807","webpack:///./ps-baogang/services/ps-tracker-creator.service?ccb0","webpack:///./ps-baogang/services/ps-tracker.service?f771","webpack:///./ps-baogang/services/ps-tree-data.service?038d","webpack:///./ps-baogang/services/ps-ui-router-handler.service?db6c","webpack:///./ps-baogang/services/ps-websocket.bak.service?dd96","webpack:///./ps-baogang/services/ps-websocket.service?68f5","webpack:///./ps-baogang/services/test.service?c942","webpack:///./node_modules/ps-ultility/ps-ultility.js","webpack:///./node_modules/smart-angular/dist/lib/angular-loader.js","webpack:///./ps-baogang/services/common-method-service2.service?de38","webpack:///./ps-baogang/services/common-method-service2.service?eaf8","webpack:///./ps-baogang/services/common-method-service2.service?08bd","webpack:///./ps-baogang/services/ps-area-state.service?8230","webpack:///./ps-baogang/services/ps-area-state.service?2931","webpack:///./ps-baogang/services/ps-area-state.service?c93d","webpack:///./ps-baogang/services/ps-btn-click.service?3171","webpack:///./ps-baogang/services/ps-btn-click.service?5d76","webpack:///./ps-baogang/services/ps-btn-click.service?b45d","webpack:///./ps-baogang/services/ps-config.service?026c","webpack:///./ps-baogang/services/ps-config.service?f86a","webpack:///./ps-baogang/services/ps-config.service?8ca7","webpack:///./ps-baogang/services/ps-mock.service?69ac","webpack:///./ps-baogang/services/ps-mock.service?96e4","webpack:///./ps-baogang/services/ps-mock.service?3294","webpack:///./ps-baogang/services/ps-new-websocket.service?9b86","webpack:///./ps-baogang/services/ps-new-websocket.service?2fcc","webpack:///./ps-baogang/services/ps-new-websocket.service?6e6a","webpack:///./ps-baogang/services/ps-polling.service?7547","webpack:///./ps-baogang/services/ps-polling.service?484f","webpack:///./ps-baogang/services/ps-polling.service?f8ec","webpack:///./ps-baogang/services/ps-topo.service?2e3d","webpack:///./ps-baogang/services/ps-topo.service?78bd","webpack:///./ps-baogang/services/ps-topo.service?5e68","webpack:///./ps-baogang/services/ps-topo2.service?99bb","webpack:///./ps-baogang/services/ps-topo2.service?0ad2","webpack:///./ps-baogang/services/ps-topo2.service?6510","webpack:///./ps-baogang/services/ps-track-data.service?5a46","webpack:///./ps-baogang/services/ps-track-data.service?35a2","webpack:///./ps-baogang/services/ps-track-data.service?402c","webpack:///./ps-baogang/services/ps-tracker-chart.service?8de2","webpack:///./ps-baogang/services/ps-tracker-chart.service?a1c0","webpack:///./ps-baogang/services/ps-tracker-chart.service?222a","webpack:///./ps-baogang/services/ps-tracker-creator.service?50b9","webpack:///./ps-baogang/services/ps-tracker-creator.service?ed4d","webpack:///./ps-baogang/services/ps-tracker-creator.service?b7b6","webpack:///./ps-baogang/services/ps-tracker.service?2d1e","webpack:///./ps-baogang/services/ps-tracker.service?bda9","webpack:///./ps-baogang/services/ps-tracker.service?9c1e","webpack:///./ps-baogang/services/ps-tree-data.service?a10a","webpack:///./ps-baogang/services/ps-tree-data.service?6c9f","webpack:///./ps-baogang/services/ps-tree-data.service?bc2b","webpack:///./ps-baogang/services/ps-ui-router-handler.service?360a","webpack:///./ps-baogang/services/ps-ui-router-handler.service?02e9","webpack:///./ps-baogang/services/ps-ui-router-handler.service?fc1c","webpack:///./ps-baogang/services/ps-websocket.bak.service?5bc4","webpack:///./ps-baogang/services/ps-websocket.bak.service?eb03","webpack:///./ps-baogang/services/ps-websocket.bak.service?df90","webpack:///./ps-baogang/services/ps-websocket.service?85c4","webpack:///./ps-baogang/services/ps-websocket.service?0dcf","webpack:///./ps-baogang/services/ps-websocket.service?92ed","webpack:///./ps-baogang/services/test.service?7186","webpack:///./ps-baogang/services/test.service?6342","webpack:///./ps-baogang/services/test.service?489a"],"names":["global","factory","window","define","$services","module","exports","link","linkage","version","protocol","host","origin","Error","getUrl","hostname","location","port","rootScope","parse","timeout","q","compile","ajax","$state","psUiRouterHandler","psTreeData","resourceUIService","psLoading","Explainer","isQuality","val","tallyCheck","statusGrade","tallyEvaluateCheckboxlist","abnormalEvaluateCheckboxlist","dictionMap","Map","set","appSourceDictionary","checkType","routeName","inx","checkers","regex","checker","match","length","RegExp","i","exec","getDics","ctrlname","getCurrentLevel","params","reduce","a","b","commonMethodService","appSource","get","name","d","variables","getValue","key","$findValue","findV","args","slice","call","arguments","v","some","arg","isNotSingleArray","Array","noCondition","isTaskjob","isAppName","isOnlineRuleId","isSourceTicketCategory","isCategory","isAlertItems","Dispatch","allOk","conditions","j","check","newRule","console","error","data","attr","fd","findValue","value","attrs","split","root","pop","fds","filterValues","find","path","parents","join","test","id","deviceOnly","node","getCurrentMainTab","then","tab","vid","viewId","url","index","showt","showTree","changeLocation","getPathAndShowTreeLocation","defaultNav","controller","currentTab","mainTab","label","refresh","push","sub_active_index","navigateTo","getCurrentTab","param","sensor","startdate","enddate","apply","getState","res","modelId","toggle","rs","LoopItem","parent","p","queue","item","shift","hasOwnProperty","concat","isObject","hasParent","obj","scope","defer","expression","reject","promise","resolve","fn","type","reload","current","count","go","extend","level","dics","defaultParam","getDefaultParamByName","title","directive","top","width","rej","element","document","createElement","sc","$new","innerHTML","destroy","remove","$destroy","style","close","promiseParameter","submit","body","appendChild","ext","ticketNo","_self","navigateToProcessTracking","isProcessTrackingExt","parameter","specialty","dic","D","Z","analType","moveToNodeByCondition","str","oldParameter","getViewIdNumber","m","getParameter","map","main","specialDeviceMove","convertParam","alias","navigateToTracker","moveToNodeByIndex","getRoot","getParents","success","ticketCategoryId","workflowId","post","nodeId","kpis","kpiQueryModel","category","isRealTimeData","nodeIds","kpiCodes","statisticType","condList","kpiCode","startTime","time","endTime","timePeriod","includeInstance","queryInstances","indexOf","instance","n","dataItemId","timeRange","dataType","aggregateFunc","aggregatePeriod","undefined","minDate","Math","min","toValue","arisingTime","optionData","rangeObj","rootModelsDic","kpiDic","series","propMap","kpiName","symbolSize","legendProm","all","legend","xAxis","boundaryGap","max","axisLabel","formatter","dateparser","addTimeStamp","getDateString","tooltip","trigger","c","marker","seriesIndex","msg","Date","callback","$q","loadEchartPromise","loadEchart","echarts","require","ec","setTimeout","e","log","cms","cms2","growl","psRouter","psDialog","target","planDetail","bool","ticketTask","setValue","modal","showHandler","BtnClick","text","createPopupByViewIdPath","mergetValues","standardProjectNo","values","standardProjectId","postService","tc","createProject","createProjectFlag","standardProject","historyProject","createSystemPopupByViewId","_ticketTask","_data","deviceExcavationTask","ticket","alertItemList","alertEvaluateInfoList","showSubmit","_ticketNo","createSystemPopupByCtrlView","standardInfo","onlineRuleId","start","statCount","rule","deviceId","selectedDevId","resource","mode","ruleCondition","children","externalDevId","config","disabled","format","attributes","stateMantainStandardId","stepsIndex","resultIndex","needState","grid","bind","row","stateMaintinStandard","standardName","stepList","stepsList","content","objStep","ruleList","objRule","unit","upperLimit","lowerLimit","result","buttons","showIndex","showSelector","showSearch","showPage","inlineAdd","ticketCategory","after","watch","handler","newValue","next","options","refreshGrid","allData","composory","list","getRootScope","valueCode","rowValue","executionCycle","update","deviceExcavationBook","stepsNo","prev","findStep","ruleId","warning","JSON","stringify","_ticketTaskValues","deviceName","forEach","ele","createSystemPopupByLocalPath","pointTicketNo","dt","hasHead","info","initDoud","luru","chuchang","commonKey","problem","downloadDom","setAttribute","click","getConfigValues","getRoleValues","setRoleValues","updateRoleValues","Mock","MockData","Object","defineProperty","prototype","enumerable","fnStr","toString","replace","Function","DEBUG","websockets","websocketOpened","getId","createWs","WebsocketCls","listeners","uuid","random","ws","WebSocket","onopen","onerror","onclose","onmessage","f","ci","kpi","send","operation","ciid","psWebsocket","KpiValueListGetter","instances","Polling","polling","getKpiValueList","valuelist","timer","clearTimeout","isDebug","on","PsPolling","isWebsocket","valueGetter","getData","saveApply","$$phase","$apply","kpiDataService","SwSocket","unitService","elemData","timerCallback","persentage","events","kpisMap","units","resourceMap","topo","$","wrap","svgId","isArray","isType","previewMode","self","linkAnHandler","cell","dr","linkAn","cellDom","jQuery","oldClass","getAttribute","collapse","first","chars","rnd","len","parseInt","context","position","div","directiveIds","getDirectivesByModelId","Promise","getKpisByModelId","ret","directives","filter","kpiDefinitionIds","kpiLabel","input","btn","timesInput","timesLabel","css","append","times","Number","sendDirective","y","x","stopPropagation","off","tip","kpiId","getRealTimeKpiData","code","unitLabel","$root","size","height","getExpression","exp","$attr","$$","runExpression","funRes","fnResult","message","renderJSON","json","hooks","cells","getViewById","view","getRapppid","loadExternalJs","joint","noEmpty","instancs","mock","$mock","getNumber","getString","getFill","fill","getType","removeSpace","equalStr","st","getUnit","getTextFill","$on","eventName","setResources","resources","tap","Synchook","createDeviceDropList","pos","hitArea","titleArea","popup","clickFn","titleClickFn","event","createDom","status","getAlertColor","prepend","createAttrDisp","t","planeMode","orderKey","findIndex","arr","AttrDisp","sort","ka","kb","tr","td1","td2","td3","td4","useMomentFormat","button","popover","placement","container","mouseenter","mouseleave","span1","devName","span2","span3","valueStr","toFix","updateValue","updateStatus","updateTime","dataItems","getTime","itemins","CamraDic","A101","A201","A301","A401","A102","A202","A302","A402","A103","A203","A303","A403","A731","A831","A732","A832","A833","A835","Camera","ip","valid","ports","CoalSiloCamera","RobotCamera","SetCamera","init","getResource","cam","isValid","innerText","right","zIndex","onclick","getURLs","addCam","camera","createCurrentStatus","txt","abs","addOn","circle","ins","wholeClick","ROLE","getDomainAreaLineTree_alertStatus","domaintree","traverse","getResourceById","getAttrsByModelId","sub","accessConfigs","physicalConfig","setParameter","navigateToTab","currentStatus","setAlarmStatus","createCurrentStatusByItem","elm","backHistory","createMarker","threeDbar","createAlarm","createAlarmSmall","smallMode","create3Dbar","getPersentageSite","tempPosition","clickEvent","initEvent","emptyEvent","completeEvent","openCellTools","cellView","model","subViewId","isSend","dirModel","valueLvevel","stateDisplay","valueDirective","valueDirectiveAttr","dirObj","sendItemDir","ui","resourceId","tools","getCellsMap","getAttributes","getKpi","allDataItemsLoaded","cellModelId","cellKpiId","makeFunction","sortBySeries","item1","item2","s1","serial","s2","getMeasurePointData","allObj","mapKpi","mapDataItem","getAllUnits","unitLoader","getResourceByIds","ids","proms","recursive","getKpisByModelIds","modelLoader","render","inputJson","graph","dia","Graph","makeConfig","paper","Paper","paperScroller","PaperScroller","el","autoResizePaper","padding","PatternLinkView","patternMarkup","initialize","LinkView","_","bindAll","listenTo","util","cancelFrame","frameId","clearPattern","pattern","V","template","patternImage","findOne","svg","defs","connection","stroke","strokeWidth","nextFrame","fillWithPattern","bbox","g","rect","moveAndExpand","points","sourcePoint","route","targetPoint","point","canvas","ctx","getContext","lineWidth","lineJoin","lineCap","pointsCount","save","gradientPoints","gradient","createLinearGradient","drawPattern","restore","dataUri","toDataURL","from","to","angle","toRad","theta","center","line","midpoint","fromPolar","end","PI","innerWidth","outerWidth","buttFrom","move","buttTo","lineColor","patternColor","addColorStop","beginPath","strokeStyle","moveTo","lineTo","closePath","setLevel","range","eval","persent","prop","transition","transform","delay","duration","valueFunction","setOpenAngle","openAngles","pathAnimate","kpiRange","linkDomBox","pathlink","linksDic","linkDom","getBoundingClientRect","movetox","movetoy","offsetx","scale","offsety","firstChild","dur","begin","rotate","animateMotion","timingFunction","timing","inout","color","interpolate","hexColor","fillColor","state","color2","stateId","colorAry","colorAry2","breathFlash","opacityState","flash","defaultOpacity","opacity","o","toFixed","isNumeric","contains","getTransitions","bubbleFlash","r","changeIconAndText","alertIcon","alertConfig","alertText","valueConfig","valueText","valueIcon","w","h","portion","interactive","perpendicularLinks","gridSize","markAvailable","linkConnectionPoint","shapePerimeterConnectionPoint","defaultLink","Link","linkView","removeSame","makeValueEval","removeSingnal","scroll","$el","Element","evt","isString","bgimage","oncontextmenu","preventDefault","fromJSON","hiddenMarkers","getCells","cursorStr","cursor","cursorAry","$_cell_el","getChildren","u","explainer","getNodeId","getKpiId","getInstance","before","alarm","child","allaccessConfigs","kpiMap","currentModelKpiMap","kpiData","formatVal","alert","run","setPos","$ins","baowualarm","dataItem","currentdevice","MeasurePointLocate","sensors","sen","s","kpiFilter","$attrDisp","remapAttrDist","valuelistMap","num","isNotUndefined","attribute","last","eachProp","kpiIds","startSocket","paramSocket","toArr","k","throttle","dis","parentNode","inputValue","condition","valueList","fitered","modelIds","unregister","dealAttributeDefinitions","keys","__key","assign","generateTaskJobProcess","task","taskValues","curr","showInTracker","psStore","psBtnClick","DicMap","_findValue","debug","changeValue","warn","atrs","_createText","_createDicAttr","_createDic","_createAttr","_findAttr","isTimeLike","getExplainerFromDiction","_createTitle","_createButton","cls","TrackerNode","nd","icon","hasRepeat","evaluateCheckboxlist","complexDealType","tallyCheckboxlist","dealType","getTaskJob","getAppSource","planName","createGroup","createDic","severity","appName","createAttr","findAttr","createText","createButton","alertTitle","onlineRule","itemList","kpiThreshold","instanceName","desc","psTrackerChart","trackerList","PsTrackerChart","_loaded","dictCode","tracker","taskConfigName","$data","createTitle","createDicAttr","psTrackerCreator","PsTrackerCreator","isNotEmpty","isEmpty","trackersListData","_attrsMap","TrackersList","trackersList","createTrust","_normalTrackersMap","_firstTracker","AlertTracker","checkName","has","_normalTrackers","logType","NormalTracker","__taskConfigName","_index","_directive","getDirective","setTicketTask","setTicketTaskVariables","setTicketTaskValues","setTicketValues","setTaskConfigName","setTicketNo","setTime","setSpecailName","setAlertTitle","setTaskCategory","setHandlerName","setMultipleConclusion","setCessingScheme","setStandardProjectId","setStandardProjectName","setRecallExplain","setTheCreateUserName","setTicketTitle","setDealType","setTallyCheck","setKeyAttrs","__dicsloaded__","setAppName","setStatusGrades","setSeverity","tickeTaskStatus","setIcon","__category","__tickeTaskStatus","ticketTaskValues","ticketTaskVariables","_ticketTaskVariables","ticketValues","_ticketValues","creatorName","_creatorName","_category","_alertTitle","_tallyEvaluateCheckboxlist","isAccord","_tallyCheck","ticketTitle","_ticketTitle","taskCategory","_taskCategory","theCreateUserName","_theCreateUserName","recallExplain","_recallExplain","senderName","_senderName","handlerName","_handlerName","multipleConclusion","_multipleConclusion","cessingScheme","_cessingScheme","_standardProjectId","standardProjectName","_standardProjectName","getDealType","__dealType","_dealType","statusGradesList","statusGradesMap","_statusGrade","alertSeverityList","alertSeverity","_severity","alertArisingTime","sendTime","_alertArisingTime","_sendTime","specialtyName","_specialtyName","appNameList","appNameMap","_appName","_icon","deviceCode","dealTypeObj","noNodeFound","renderGenerateAlert","psConfig","deviceMap","observer","userdefer","webSocket","alertStatusPromise","inclosedMap","measureLocationCached","createCached","alertsMap","structrureDone","deviceLoader","devices","incloseDeviceLoader","inclosed","getResByModelIds","remapedDevice","remap","getMap","getDeviceMap","findParentDevice","insertNode","insertMethod","loopGetState","startLoop","getAlerts","alerts","emit","endLoop","webSocketStarted","user","currentRoleID","roleFunctionCodeMap","menuitems","vals","diagnosticType","NOT_IN","str2json","failure","nids","getKpiValList","cached","extId","parentID","getResourceByModelId","query","cacheAllData","models","getMapData","getPromise","restIds","prms","createPromise","setPromise","elem","setData","createCacheData","cacheData","toPath","substring","domains","pid","stacks","order","unshift","externalDevId1","externalDevId2","num1","number","num2","title1","title2","addZero","loadQueue","createItem","parentlist","stop","modeIds","getValidId","getFirstDevice","treeData","getAlertState","treeDataService","getCurrentRes","getMeasureLocate","getMeasurePointLocate","getGeneral","getSensors","getPath","domainPath","Observer","fns","l","pl","nameDic","motor","electric","ctrlNameDic","mainCtrlRm","convoyer","wind1","reality","screen","rollerGroup","steel_dedust","wind","steel_machine","robot","UPS","ups","zhiliuping","configValues","tabs","main_active_index","viewType","vt","sourceValue","analiticalType","showDetail","getParent","checks","reverse","clear","websocket","getCurrentUser","registerService","createAnaliticalType","paramsArr","tree","getEachFirstChild","viewPriority","createParams","complete","routers","getRouters","extra","router","baseParam","extParams","createParamByRouter","cname","minor_active_index","main_active_hide","hideNavi","basename","extName","sub_active_hide","minor","minor_active_hide","analiticalTypeFn","getChildrenByIndex","mapId","targeMap","routername","routename","getCurrentRouterType","getSubTabs","at","mainInx","specialDeviceType","getMinorTabs","subInx","onDataEvent","setInterval","ks","round","Service","functionLIst","Params","WebSocketCls","_state","connect","reconnect","addEventListener","doSthWhileOpen","sendData","createInstance","service","wsMap","ser","getURL","handlers","each","newExplainer","removespace","toArray","hasRegistered","angularModule","_invokeQueue","camelhill","char","toUpperCase","add","script","injector","_name","register","restrict","pre","removeAttribute","tostring","isUndefined","isNull","isFunction","isNumber","requireCached","createCache","cssCached","urlparser","splitByChar","makeHost","address","urlExp","protocal","makeQUery","match1","hostObj","rest","match2","queryObj","hash","remove$$hashKey","jsonparser","requirejs","deps","load","cache","requireCss","loadCss","head","onload","unCamelhill","toLowerCase","clone","list2Tree","findParent","attrRegex","numRegex","sofar","deepClone","cur","pushDiff","addStyle","setStyle","dom","creatRecursive","onMatch","onEnd","condi","parentNodes","reverseCondition","every","addClass","oldcls","oldClsList","clsList","setClass","cs","hasClass","removeClass","splice","parentElement","appendChildren","getFilePath","getFileName","getFileExt","screenOffset","offsetLeft","offsetTop","offsetParent","clientLeft","clientTop","scrollLeft","scrollTop","left","tag","createDocumentFragment","topArray","findElement","stack","filterElement","pathResolver","minus","toPathAry","dh","DateHandler","dateStr","VERSION","ISDATEHANDLER","SECONDTIMESTAMP","MINUTETIMESTAMP","HOURTIMESTAMP","DAYTIMESTAMP","OFFSET","to2Char","to3Char","dateObject","date","dObject","year","getFullYear","month","getMonth","dat","getDate","hour","getHours","minute","getMinutes","second","getSeconds","milisecond","getMilliseconds","utcyear","getUTCFullYear","utcmonth","getUTCMonth","utcdat","getUTCDate","utchour","getUTCHours","utcminute","getUTCMinutes","utcsecond","getUTCSeconds","utcmilisecond","getUTCMilliseconds","toUTCString","setDate","isDateHandler","getTimeStamp","dateString","utcDateString","addYear","addMonth","madd","yadd","addDay","dateMinSecond","addHour","addMinute","addSecond","timestamp","minSecond","trimmToYear","trimmToMonth","trimmToWeek","getDay","trimmToDate","trimmToHour","trimmToMinute","trimmToSecond","getYear","getUTCDateString","list2tree","renderAll","psdefine","inConfig","configs","baseurl","getloadpath","setup","$stateProvider","$locationProvider","$controllerProvider","$compileProvider","$filterProvider","$provide","hashPrefix","angularConfig","__smartAngular__","loaderpath","names","loader","psrequire","setTemplate","stateRegistry","states","views","$default"],"mappings":"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","file":"service.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./node_modules/smart-angular/dist/lib/angular-loader.js?factory=ps-baogang&path=services&smartangular\");\n","(function (global, factory) {\n  if (typeof window !== \"undefined\") {\n    if (typeof window.define === \"function\") {\n      define(factory);\n    } else {\n      window.$services = factory();\n    }\n  } else {\n    module.exports = factory();\n  }\n})(this, function () {\n  \"use strict\";\n  /** 本地服务器，代理地址: **/\n  var link = \"55\";\n  var factory = (function (linkage) {\n    var factory,\n      version = \"V2\";\n    switch (linkage) {\n      case \"55\":\n        factory = {\n          version: version,\n          protocol: \"ws:\",\n          host: \"10.26.10.55\",\n          origin: \"http://10.26.10.55\"\n        };\n        break;\n      case \"zhanjiang\":\n        factory = {\n          version: version,\n          protocol: \"ws:\",\n          host: \"10.27.16.133\",\n          origin: \"http://10.27.16.133\"\n        };\n        break;\n      case \"91\":\n        factory = {\n          version: version,\n          protocol: \"ws:\",\n          host: \"10.26.10.91\",\n          origin: \"http://10.26.10.91\"\n        };\n        break;\n      case \"steel_pro\":\n        factory = {\n          version: version,\n          protocol: \"ws:\",\n          host: \"10.27.16.133:8090\",\n          origin: \"http://10.27.16.133:8090\"\n        };\n        break;\n      case \"steel\":\n        factory = {\n          version: version,\n          protocol: \"ws:\",\n          host: \"101.132.188.149:20009\",\n          origin: \"http://101.132.188.149:20009\"\n        };\n        break;\n      case \"19980\":\n        factory = {\n          version: version,\n          protocol: \"ws:\",\n          host: \"36.110.36.118:19980\",\n          origin: \"http://36.110.36.118:19980\"\n        };\n        break;\n      case \"199\":\n        factory = {\n          version: version,\n          protocol: \"ws:\",\n          host: \"192.168.1.199\",\n          origin: \"http://192.168.1.199\"\n        };\n        break;\n      case \"baogang_prod\":\n        factory = {\n          version: version,\n          protocol: \"ws:\",\n          host: \"117.144.123.32:8080\",\n          origin: \"http://117.144.123.32:8080/\"\n        };\n        break;\n      case \"tcl_proxy\":\n        factory = {\n          version: version,\n          protocol: \"ws:\",\n          host: \"192.168.1.149:8080\",\n          origin: \"http://192.168.1.149:8080\"\n        };\n        break;\n      case \"tcl_production\":\n        factory = {\n          version: version,\n          protocol: \"ws:\",\n          host: \"10.126.72.150\",\n          origin: \"http://10.126.72.150\"\n        };\n        break;\n      case \"tcl\":\n        factory = {\n          version: version,\n          protocol: \"ws:\",\n          host: \"47.94.14.146\",\n          origin: \"http://47.94.14.146\"\n        };\n        break;\n      case \"guangxi\":\n        factory = {\n          version: version,\n          protocol: \"ws:\",\n          host: \"111.12.86.148:8443\",\n          origin: \"http://111.12.86.148:8443\"\n        };\n        break;\n      case \"xinhuaxin\":\n        factory = {\n          version: version,\n          protocol: \"ws:\",\n          host: \"47.95.207.156\",\n          origin: \"http://47.95.207.156\"\n        };\n        break;\n      case \"116\":\n        factory = {\n          version: version,\n          protocol: \"ws:\",\n          host: \"192.168.1.116\",\n          origin: \"http://192.168.1.116\"\n        };\n        break;\n      case \"115\":\n        factory = {\n          version: version,\n          protocol: \"ws:\",\n          host: \"192.168.1.115\",\n          origin: \"http://192.168.1.115\"\n        };\n        break;\n      case \"122\":\n        factory = {\n          version: version,\n          protocol: \"ws:\",\n          host: \"192.168.1.122\",\n          origin: \"http://192.168.1.122\"\n        };\n        break;\n      case \"106\":\n        factory = {\n          version: version,\n          protocol: \"ws:\",\n          host: \"106.74.18.92\",\n          origin: \"http://106.74.18.92\"\n        };\n        break;\n      case \"129\":\n        factory = {\n          version: version,\n          protocol: \"ws:\",\n          host: \"192.168.1.129\",\n          origin: \"http://192.168.1.129\"\n        };\n        break;\n      case \"91\":\n        factory = {\n          version: version,\n          protocol: \"ws:\",\n          host: \"10.26.10.91\",\n          origin: \"http://10.26.10.91\"\n        };\n        break;\n      case \"144\":\n        factory = {\n          version: version,\n          protocol: \"ws:\",\n          host: \"10.126.78.144\",\n          origin: \"http://10.126.78.144\"\n        };\n        break;\n      case \"156\":\n        factory = {\n          version: version,\n          protocol: \"ws:\",\n          host: \"47.95.207.156\",\n          origin: \"http://47.95.207.156\"\n        };\n        break;\n\n      case \"159\":\n        factory = {\n          version: version,\n          protocol: \"wss:\",\n          host: \"180.76.147.159\",\n          origin: \"http://180.76.147.159\"\n        };\n        break;\n      case \"112\":\n        factory = {\n          version: version,\n          protocol: \"wss:\",\n          host: \"192.168.1.112\",\n          origin: \"http://192.168.1.112\"\n        };\n        break;\n      case \"116\":\n        factory = {\n          version: version,\n          protocol: \"wss:\",\n          host: \"192.168.1.116\",\n          origin: \"http://192.168.1.116\"\n        };\n        break;\n      case \"117\":\n        factory = {\n          version: version,\n          protocol: \"ws:\",\n          host: \"192.168.1.117\",\n          origin: \"http://192.168.1.117\"\n        };\n        break;\n      case \"191\":\n        factory = {\n          version: version,\n          protocol: \"ws:\",\n          host: \"192.168.1.191\",\n          origin: \"http://192.168.1.191\"\n        };\n        break;\n      case \"19180\":\n        factory = {\n          version: version,\n          protocol: \"ws:\",\n          host: \"36.110.36.118:19180\",\n          origin: \"http://36.110.36.118:19180\"\n        };\n        break;\n      case \"11680\":\n        factory = {\n          version: version,\n          protocol: \"ws:\",\n          host: \"36.110.36.118:11680\",\n          origin: \"http://36.110.36.118:11680\"\n        };\n        break;\n      case \"11780\":\n        factory = {\n          version: version,\n          protocol: \"ws:\",\n          host: \"36.110.36.118:11780\",\n          origin: \"http://36.110.36.118:11780\"\n        };\n        break;\n      case \"yunneng\":\n        factory = {\n          version: version,\n          protocol: \"wss:\",\n          host: \"39.108.59.125\",\n          origin: \"http://39.108.59.125\"\n        };\n        break;\n      case \"204\":\n        factory = {\n          version: version,\n          protocol: \"wss:\",\n          host: \"180.76.166.204\",\n          origin: \"http://180.76.166.204\"\n        };\n        break;\n      case \"raonecloud\":\n        factory = {\n          version: version,\n          protocol: \"wss:\",\n          host: \"yzt.raonecloud.com\",\n          origin: \"https://yzt.raonecloud.com\"\n        };\n        break;\n      case \"135\":\n        factory = {\n          version: version,\n          protocol: \"wss:\",\n          host: \"192.168.1.135\",\n          origin: \"http://192.168.1.135\"\n        };\n        break;\n      case \"139\":\n        factory = {\n          version: version,\n          protocol: \"wss:\",\n          host: \"192.168.1.139\",\n          origin: \"http://192.168.1.139\"\n        };\n        break;\n      case \"121\":\n        factory = {\n          version: version,\n          protocol: \"wss:\",\n          host: \"192.168.1.121\",\n          origin: \"http://192.168.1.121\"\n        };\n        break;\n      case \"131\":\n        factory = {\n          version: version,\n          protocol: \"wss:\",\n          host: \"192.168.1.131\",\n          origin: \"https://192.168.1.131\"\n        };\n        break;\n      case \"132\":\n        factory = {\n          version: version,\n          protocol: \"wss:\",\n          host: \"10.27.16.132\",\n          origin: \"http://10.27.16.132\"\n        };\n        break;\n      case \"133\":\n        factory = {\n          version: version,\n          protocol: \"wss:\",\n          host: \"10.27.16.133\",\n          origin: \"http://10.27.16.133\"\n        };\n        break;\n      case \"114\":\n        factory = {\n          version: version,\n          protocol: \"wss:\",\n          host: \"192.168.1.114\",\n          origin: \"http://192.168.1.114\"\n        };\n        break;\n      case \"118\":\n        factory = {\n          version: version,\n          protocol: \"wss:\",\n          host: \"36.110.36.118:6443\",\n          origin: \"https://36.110.36.118:6443\"\n        };\n        break;\n      case \"demo\":\n        factory = {\n          version: version,\n          protocol: \"wss:\",\n          host: \"demo.proudsmart.com\",\n          origin: \"http://demo.proudsmart.com\"\n        };\n        break;\n      case \"baidu\":\n        factory = {\n          version: version,\n          protocol: \"wss:\",\n          host: \"iot.proudsmart.com\",\n          origin: \"https://iot.proudsmart.com\"\n        };\n        break;\n      case \"ouke\":\n        factory = {\n          version: version,\n          protocol: \"wss:\",\n          host: \"www.ek-cloud.net\",\n          origin: \"http://www.ek-cloud.net\"\n        };\n        break;\n      case \"denuo\":\n        factory = {\n          version: version,\n          protocol: \"wss:\",\n          host: \"http://36.110.36.118:8099\",\n          origin: \"http://36.110.36.118:8099\"\n        };\n        break;\n      default:\n        throw new Error(\"请选择一个访问链接\");\n        break;\n    }\n    factory.getUrl = function (global) {\n      if (global != window) {\n        throw new Error(\"只可在WINDOW环境下执行，NODEJS环境下不可执行！\");\n      }\n      var hostname = global.location.hostname;\n      var port = global.location.port;\n      if (hostname == \"localhost\" && port == \"63342\") {\n        return this.origin;\n      } else {\n        return \"\";\n      }\n    };\n    return factory;\n  })(link);\n  return factory;\n});","\nimport { extend, dateparser, isObject } from \"ps-ultility\";\n\nexport default function(\n  rootScope,\n  parse,\n  timeout,\n  q,\n  compile,\n  ajax,\n  $state,\n  psUiRouterHandler,\n  psTreeData,\n  resourceUIService,\n  psLoading\n) {\n  const Explainer = {\n    isQuality(val) {\n      return [\"\", \"符合质量标准\"][val] || \"\";\n    },\n    tallyCheck(val) {\n      return [\"通过\", \"不通过\"][val] || \"-\";\n    },\n    statusGrade(val) {\n      return [\"正常\", \"正常\", \"注意\", \"警告\", \"危险\"][val] || \"正常\";\n    },\n    tallyEvaluateCheckboxlist(val) {\n      return [\"正确\", \"基本正确\", \"不正确\"][val] || \"-\";\n    },\n    abnormalEvaluateCheckboxlist(val) {\n      return [\"有效\", \"无效\"][val] || \"-\";\n    }\n  };\n  const dictionMap = new Map();\n  dictionMap.set(\"设备趋势\", \"专业分析\");\n  dictionMap.set(\"专业分析\", \"专业分析\");\n  dictionMap.set(\"区域态势\", \"实时状态\");\n  dictionMap.set(\"实时状态\", \"实时状态\");\n  const appSourceDictionary = new Map();\n  appSourceDictionary.set(\"智能诊断\", \"综合处理\");\n  appSourceDictionary.set(\"在线预警\", \"综合处理\");\n  appSourceDictionary.set(\"离线诊断\", \"综合处理\");\n  appSourceDictionary.set(\"合并报警\", \"综合处理\");\n  appSourceDictionary.set(\"智能决策\", \"综合处理\");\n  appSourceDictionary.set(\"故障漏报\", \"故障分析\");\n  appSourceDictionary.set(\"智能检修标准\", \"计划实施\");\n  appSourceDictionary.set(\"突发停机\", \"故障处理\");\n  appSourceDictionary.set(\"状态维护标准\", \"计划实施\");\n  appSourceDictionary.set(\"临时检修委托\", \"计划实施\");\n  appSourceDictionary.set(\"临时维护委托\", \"计划实施\");\n  appSourceDictionary.set(\"智能备修\", \"综合处理\");\n  appSourceDictionary.set(\"无\", \"无\");\n  const checkType = routeName => {\n    let inx,\n      checkers = [\n        {\n          regex: \"prod_dashboard\",\n          checker: match => {\n            return \"dashboard\";\n          }\n        },\n        {\n          regex: \"prod_sub_dashboard.subview\",\n          checker: match => {\n            return \"dashboard\";\n          }\n        },\n        {\n          regex: \"prod_sub_dashboard.minor_dashboard.minor_view\",\n          checker: match => {\n            return \"dashboard\";\n          }\n        },\n        {\n          regex: \"^prod_controller\\\\.(.*)$\",\n          checker: match => {\n            return match[1];\n          }\n        },\n        {\n          regex: \"^prod_sub_dashboard\\\\.sub_(.*)$\",\n          checker: match => {\n            return match[1];\n          }\n        },\n        {\n          regex: \"^prod_sub_dashboard\\\\.minor_dashboard\\\\.minor_(.*)$\",\n          checker: match => {\n            return match[1];\n          }\n        }\n      ];\n    while (inx < checkers.length) {\n      let regex = new RegExp(checkers[i].regex),\n        match = regex.exec(routeName);\n      if (match) {\n        return checkers[i].checker(match);\n      }\n      inx++;\n    }\n    throw new Error(`wrong route ${routeName}`);\n  };\n  const getDics = ctrlname => {\n      return ctrlname == \"dashboard\"\n        ? [\n            \"prod_dashboard\",\n            \"prod_sub_dashboard.subview\",\n            \"prod_sub_dashboard.minor_dashboard.minor_view\"\n          ]\n        : [\n            `prod_controller.${ctrlname}`,\n            `prod_sub_dashboard.sub_${ctrlname}`,\n            `prod_sub_dashboard.minor_dashboard.minor_${ctrlname}`\n          ];\n    },\n    getCurrentLevel = params => {\n      return (\n        [\"main_active_index\", \"sub_active_index\", \"minor_active_index\"].reduce(\n          (a, b) => {\n            a += (typeof params[b] !== \"undefined\") - 0;\n            return a;\n          },\n          0\n        ) - 1\n      );\n    };\n\n  class commonMethodService {\n    constructor() {}\n    getAlertWord(val) {\n      return [\"正常\", \"正常\", \"注意\", \"警告\", \"危险\"][val] || \"正常\";\n    }\n    /**过程跟踪根据任务来源查询任务分类**/\n    getTaskJob(appSource /**任务来源 */) {\n      return appSourceDictionary.get(appSource);\n    }\n\n    getExplainerFromDiction(name) {\n      return Explainer[name] || (d => d);\n    }\n\n    /**过程跟踪查询任务来源**/\n    getAppSource(variables) {\n      let getValue = key => {\n          return this.$findValue(variables, key);\n        },\n        findV = key => {\n          return function() {\n            let args = [].slice.call(arguments),\n              v = getValue(key);\n            return args.some(arg => v == arg);\n          };\n        },\n        isNotSingleArray = a => {\n          return a instanceof Array && a.length > 1;\n        },\n        noCondition = () => true,\n        isTaskjob = findV(\"taskJob\"),\n        isAppName = findV(\"appName\"),\n        isOnlineRuleId = findV(\"onlineRuleId\"),\n        isSourceTicketCategory = findV(\"sourceTicketCategory\"),\n        isCategory = findV(\"category\"),\n        isAlertItems = isNotSingleArray(getValue(\"alertItemList\")),\n        Dispatch = function() {\n          let allOk = conditions => {\n            let j = 0;\n            while (j < conditions.length - 1) {\n              if (typeof conditions[j] == \"function\" && !conditions[j]()) {\n                return;\n              }\n              if (conditions[j] != true) {\n                return;\n              }\n              j++;\n            }\n            return conditions[j];\n          };\n          for (let i = 0; i < arguments.length; i++) {\n            let check = allOk(arguments[i]);\n            if (check != null) {\n              return check;\n            }\n          }\n        },\n        newRule = Dispatch(\n          [isCategory(\"280\"), isAlertItems, \"合并报警\"],\n          [isCategory(\"280\"), isAppName(2), \"智能诊断\"],\n          [isCategory(\"280\"), isAppName(1), \"在线预警\"],\n          [isCategory(\"310\"), isAlertItems, \"智能决策\"],\n          [isCategory(\"310\"), isOnlineRuleId(1, 2, 3), \"智能决策\"],\n          [isCategory(\"310\"), isSourceTicketCategory(\"310\"), \"智能决策\"],\n          [isCategory(\"310\"), isSourceTicketCategory(\"340\"), \"智能决策\"],\n          [isCategory(\"310\"), isTaskjob(1), \"状态维护标准\"],\n          [isCategory(\"310\"), isTaskjob(2), \"临时维护委托\"],\n          [isCategory(\"320\"), isSourceTicketCategory(\"310\"), \"智能决策\"],\n          [isCategory(\"320\"), isSourceTicketCategory(\"340\"), \"智能决策\"],\n          [isCategory(\"280\"), \"离线诊断\"],\n          [isCategory(\"290\"), \"智能决策\"],\n          [isCategory(\"320\"), \"智能检修标准\"],\n          [isCategory(\"310\"), \"状态维护标准\"],\n          [isCategory(\"330\"), \"临时检修委托\"],\n          [isCategory(\"340\"), \"突发停机\"],\n          [isCategory(\"300\"), \"智能备修\"]\n        );\n      if (newRule == null) {\n        console.error(this.$findValue(variables, \"category\"));\n      }\n      return newRule || \"无\";\n    }\n\n    /**遍历一个对象找个是否存在某个值，值是多少**/\n    $findValue(data, attr) {\n      let fd = this.findValue(data, attr);\n      if (fd) {\n        return fd.value;\n      }\n    }\n    findValue(data, attr) {\n      if (attr == null) {\n        return;\n      }\n      let attrs = attr.split(new RegExp(\"\\\\\\\\|\\\\.\", \"g\")),\n        root = attrs.pop(),\n        fds = this.filterValues(data, root),\n        fd = fds.find(({ value, path, parents }) => {\n          if (attrs.length == 0) {\n            return true;\n          } else {\n            return new RegExp(`${attrs.join(\"/\")}/${root}$`).test(path);\n          }\n        });\n      return fd;\n    }\n\n    treeNavigateTo(id, deviceOnly, node) {\n      psUiRouterHandler.getCurrentMainTab().then(tab => {\n        tab = tab || {};\n        let vid = $state.params.viewId || tab.viewId,\n          url = $state.params.index,\n          showt = $state.params.showTree - 0,\n          viewId = tab ? tab.viewId : vid,\n          changeLocation = () => {\n            let params = [];\n            psTreeData(id)\n              .getPathAndShowTreeLocation(tab)\n              .then(\n                ({\n                  location,\n                  showTree,\n                  defaultNav,\n                  controller,\n                  currentTab\n                }) => {\n                  psUiRouterHandler.getCurrentMainTab().then(mainTab => {\n                    if (dictionMap.get(mainTab.label) == \"实时状态\") {\n                      if (controller) {\n                        this.refresh(`prod_${controller}`, {\n                          showTree: showTree,\n                          id: id,\n                          viewId: null\n                        });\n                        return;\n                      }\n                      params.push(\"dashboard\");\n                    }\n                    if (dictionMap.get(mainTab.label) == \"专业分析\") {\n                      $state.params.sub_active_index = 0;\n                      this.navigateTo(mainTab.label);\n                    }\n                    psUiRouterHandler.getCurrentTab().then(tab => {\n                      let param = {\n                        id: id,\n                        sensor: \"null\",\n                        viewId: vid,\n                        showTree:\n                          viewId == \"177280852260000\" ? showTree : showt,\n                        index:\n                          (viewId == \"177280852260000\" ? location : url) ||\n                          \"index\",\n                        startdate: \"null\",\n                        enddate: \"null\"\n                      };\n                      if (viewId == \"177280852260000\") {\n                        params.push(param);\n                        this.refresh.apply(this, params);\n                      } else {\n                        param.viewId = tab.viewId;\n                        this.navigateTo(tab.label, param);\n                      }\n                    });\n                  });\n                }\n              );\n          };\n        return psTreeData(id)\n          .getState()\n          .then(res => {\n            if (deviceOnly) {\n              if (res.modelId < 1000) {\n                node.node.toggle();\n              } else {\n                changeLocation();\n              }\n            } else {\n              changeLocation();\n            }\n          });\n      });\n    }\n\n    filterValues(data, attr) {\n      if (data == null) {\n        return [];\n      }\n      let rs = [];\n\n      class LoopItem {\n        constructor(data, parents, path) {\n          this.data = data;\n          this.parents = parents || [];\n          this.path = path || [];\n        }\n\n        hasParent(parent) {\n          return this.parents.some(p => p == parent);\n        }\n      }\n\n      let queue = [new LoopItem(data)],\n        item;\n      while ((item = queue.shift())) {\n        let { data, parents, path } = item;\n        if (data.hasOwnProperty(attr)) {\n          rs.push({\n            parents,\n            value: data[attr],\n            path: path.concat([attr]).join(\"/\")\n          });\n        }\n        for (let i in data) {\n          if (\n            data.hasOwnProperty(i) &&\n            isObject(data[i]) &&\n            !item.hasParent(data[i])\n          ) {\n            queue.push(\n              new LoopItem(data[i], parents.concat([data]), path.concat([i]))\n            );\n          }\n        }\n      }\n      return rs;\n    }\n\n    /**验证scope下面对象的每个值都不为undefined**/\n\n    validate(obj, scope) {\n      let defer = q.defer();\n      for (var i in obj) {\n        var expression = parse(i),\n          val = expression(scope);\n        if (typeof val === \"undefined\" || val === null || val === \"\") {\n          defer.reject(obj[i]);\n          return defer.promise;\n        }\n      }\n      defer.resolve(\"success\");\n      return defer.promise;\n    }\n\n    /**遍历对象找到符合名字的值，并返回是在对象哪个位置找到的**/\n\n    /**验证产生一个promise方法返回值为一个promise**/\n\n    promise(fn) {\n      let defer = q.defer();\n      fn(defer.resolve, defer.reject);\n      return defer.promise;\n    }\n\n    /**刷新当前页面的方法**/\n\n    refresh(type, params) {\n      if (typeof type === \"undefined\" && typeof params === \"undefined\") {\n        window.location.reload();\n        return;\n      }\n      if (typeof type === \"object\" && typeof params === \"undefined\") {\n        let name = $state.current.name,\n          p = $state.params;\n        p.count = p.count - 0 + 1;\n        $state.go(name, extend(p, type));\n      }\n      if (typeof type === \"string\") {\n        params = params || {};\n        let level = getCurrentLevel($state.params),\n          dics = getDics(type),\n          name = dics[level],\n          p = $state.params,\n          defaultParam =\n            type !== \"dashboard\"\n              ? psUiRouterHandler.getDefaultParamByName(type)\n              : {};\n        p.count = p.count - 0 + 1;\n        p = extend(p, defaultParam, params);\n        p.index = p.index || \"index\";\n        $state.go(name, p);\n      }\n    }\n\n    /** 弹出模态框的方法 **/\n\n    modal({ title, directive, scope, top, width, params }) {\n      return this.promise((res, rej) => {\n        top = typeof top === \"number\" ? top + \"px\" : top;\n        top = typeof top === \"string\" ? top : null;\n        width = typeof width === \"number\" ? width + \"px\" : width;\n        width = typeof width === \"string\" ? width : null;\n        let element = document.createElement(\"div\"),\n          sc = (scope || rootScope).$new(),\n          root;\n        element.innerHTML = `<ps-modal><${directive}></${directive}></ps-modal>`;\n\n        function destroy() {\n          element.remove();\n          element = null;\n          sc.$destroy();\n        }\n\n        sc.style = function() {\n          return {\n            top: top || \"40px\",\n            width: width || \"80%\"\n          };\n        };\n        sc.title = title;\n        sc.params = params;\n        sc.close = function(promiseParameter) {\n          destroy();\n          res(promiseParameter);\n        };\n        sc.submit = function(data) {\n          destroy();\n          res(data);\n        };\n        document.body.appendChild(element);\n        compile(element)(sc);\n      });\n    }\n\n    /** 跳转到某个页面的方法 **/\n\n    navigateToTracker(ext, ticketNo) {\n      /** 兼容旧版本跳转到过程跟踪的适配方法 */\n      let regex = \"9246777620035|539596902200000\",\n        _self = this;\n      function navigateToProcessTracking() {\n        _self.refresh(\"prod_tracker\", {\n          ticketNo: ticketNo\n        });\n      }\n      function isProcessTrackingExt(ext) {\n        return new RegExp(regex).test(ext.viewId);\n      }\n      if (isProcessTrackingExt(ext)) {\n        navigateToProcessTracking();\n        return false;\n      }\n      return true;\n      /** 兼容旧版本跳转到过程跟踪的适配方法 */\n    }\n    specialDeviceMove(parameter, ext) {\n      let specialty = ext && ext.specialty,\n        dic = {\n          D: \"电气分析\",\n          Z: \"振动分析\"\n        };\n      if (parameter == \"专业分析\" && specialty) {\n        var analType = dic[specialty] ? dic[specialty] : \"综合趋势\";\n        psUiRouterHandler.moveToNodeByCondition(function(node) {\n          return node.label == analType || node.name == analType;\n        }, ext);\n        return;\n      }\n      if (parameter == \"综合趋势\" || parameter == \"实时状态\") {\n        let { id } = ext;\n        psUiRouterHandler.moveToNodeByCondition(\n          function(node) {\n            return node.label == parameter || node.name == parameter;\n          },\n          { id }\n        );\n        return;\n        /*\n        psTreeData(id)\n          .getPathAndShowTreeLocation(node => {\n            return (\n              node.label == \"综合趋势\" ||\n              node.name == \"综合趋势\" ||\n              node.label == \"实时状态\" ||\n              node.name == \"实时状态\"\n            );\n          })\n          .then(\n            ({ location, showTree, defaultNav, controller, currentTab }) => {\n              if (controller) {\n                this.refresh(`prod_${controller}`, {\n                  showTree: showTree,\n                  id: id,\n                  viewId: null\n                });\n                return;\n              }\n            }\n          );\n        return; */\n      }\n      return true;\n    }\n    convertParam(str) {\n      let d = dictionMap.get(str);\n      return d || str;\n    }\n    navigateTo(parameter, ext = {}, url = \"index\", oldParameter = {}) {\n      let viewId;\n      function getViewIdNumber(str) {\n        let m = /viewId\\:(.*)$/.exec(str);\n        return m && m[1];\n      }\n      function getParameter(parameter) {\n        let rs = [\"main\", \"sub\", \"minor\"].map((name, inx) => {\n          return typeof parameter[name] !== \"undefined\"\n            ? parameter[name]\n            : parameter[inx];\n        });\n        return rs.reduce((a, b) => {\n          if (typeof b == \"number\" || typeof b == \"string\") {\n            a.push(b - 0);\n          }\n          if (typeof b == \"object\") {\n            a.push(b[0]);\n            let viewId = getViewIdNumber(b[1]);\n            if (viewId) {\n              ext.viewId = viewId;\n            } else {\n              url = b[1];\n            }\n          }\n          return a;\n        }, []);\n      }\n      if (typeof parameter === \"undefined\") {\n        throw new Error(\"invalid parameter found\");\n      }\n      if (typeof parameter === \"string\") {\n        if (/\\d+/.test(parameter)) {\n          parameter = { main: parameter - 0 };\n        } else {\n          if (this.specialDeviceMove(parameter, ext)) {\n            psUiRouterHandler.moveToNodeByCondition(node => {\n              return (\n                node.label == parameter ||\n                this.convertParam(node.label) == parameter ||\n                this.convertParam(node.alias) == parameter\n              );\n            }, ext);\n          }\n          return;\n        }\n      }\n      if (typeof parameter === \"function\") {\n        psUiRouterHandler.moveToNodeByCondition(parameter, ext);\n        return;\n      }\n      if (typeof parameter === \"number\") {\n        parameter = { main: parameter };\n      }\n      if (typeof parameter === \"object\") {\n        parameter = getParameter(parameter);\n        if (this.navigateToTracker(ext, oldParameter.ticketNo)) {\n          psUiRouterHandler.moveToNodeByIndex(url, parameter, ext);\n        }\n      }\n    }\n\n    /** 获取树的根节点 **/\n    getRoot() {\n      return psTreeData.getRoot();\n    }\n\n    /** 获取当前节点的所有父节点 **/\n\n    getCurrentParents() {\n      return psTreeData($state.params.id)\n        .getState()\n        .then(d => {\n          return d.getParents().then(parents => {\n            return success(parents.concat(d));\n          });\n        });\n    }\n\n    /** 通过工单号获取流程图的内容 **/\n    findFlowByTicketNo(ticketNo) {\n      let ticketCategoryId, workflowId;\n      return ajax\n        .post(\"ticketTaskService.getTicket\", [ticketNo])\n        .then(d => {\n          if (d == null) {\n            return error(\n              `服务器错误：根据工单号[${ticketNo}]查询不到工单内容，或工单已删除`\n            );\n          }\n          ticketCategoryId = d.ticketCategoryId;\n          return ajax.post(\"ticketCategoryService.getTicketCategoryById\", [\n            ticketCategoryId\n          ]);\n        })\n        .then(d => {\n          if (d == null) {\n            return error(\n              `服务器错误：根据工单类别号[${ticketCategoryId}]查询不到工单类别内容`\n            );\n          }\n          workflowId = d.workflowId;\n          return ajax.post(\"workflowService.getWorkflowById\", [workflowId]);\n        })\n        .then(d => {\n          if (d == null) {\n            return error(\n              `服务器错误：根据工单流程号[${workflowId}]查询不到工单流程内容`\n            );\n          }\n          let { name } = d;\n          return ajax\n            .post(\"workflowDefinitionService.getWorkflowDefinitions\")\n            .then(d => {\n              let defer = q.defer(),\n                fd = d.find(d => d.name == name);\n              if (fd == null) {\n                defer.reject(\n                  `服务器错误：根据流程名称[${name}]匹配不到任何以存在的流程图`\n                );\n              }\n              defer.resolve(fd);\n              return defer.promise;\n            });\n        });\n    }\n\n    /** = Promise.resolve **/\n\n    success(d) {\n      return success(d);\n    }\n\n    /** 根据ci,kpi查询节点值 **/\n\n    getKpiValue(nodeId, kpis) {\n      let kpiQueryModel = [\n        \"kpi\",\n        {\n          category: \"ci\",\n          isRealTimeData: false,\n          nodeIds: [nodeId - 0],\n          kpiCodes: kpis,\n          statisticType: \"psiot\",\n          condList: []\n        }\n      ];\n      return ajax\n        .post(\n          \"kpiDataFlexService.getKpiValueList?IncludeFields=kpiCode,value\",\n          kpiQueryModel\n        )\n        .then(d => {\n          return this.success(\n            kpis.reduce((a, b) => {\n              a[b] = d.find(({ kpiCode }) => kpiCode == b) || {};\n              a[b] = a[b].value || null;\n              return a;\n            }, {})\n          );\n        });\n    }\n\n    getDataItemValuelist(params) {\n      let startTime = typeof params.time === \"object\" ? params.time[0] : null,\n        endTime = typeof params.time === \"object\" ? params.time[1] : null,\n        kpis = params.kpiCodes,\n        timePeriod = typeof params.time === \"object\" ? 0 : params.time;\n      let kpiQueryModel = [\n        \"kpi\",\n        {\n          category: \"time\",\n          isRealTimeData: false,\n          timePeriod: timePeriod,\n          nodeIds: params.nodeIds,\n          includeInstance: true,\n          queryInstances: params.kpiCodes\n            .reduce((a, b) => {\n              return a.indexOf(b.instance) == -1 ? a.concat([b.instance]) : a;\n            }, [])\n            .join(\",\"),\n          kpiCodes: kpis.map(n => n.dataItemId),\n          startTime: startTime,\n          endTime: endTime,\n          timeRange: \"\",\n          statisticType: \"psiot\",\n          condList: [],\n          dataType: params.dataType ? params.dataType : \"\",\n          aggregateFunc: params.dataType ? params.aggregateFunc : \"\",\n          aggregatePeriod: params.dataType ? params.aggregatePeriod : \"\"\n        }\n      ];\n      return ajax\n        .post(\n          \"kpiDataFlexService.getKpiValueList?IncludeFields=kpiCode,value,arisingTime\",\n          kpiQueryModel\n        )\n        .then(d => {\n          if (d.length == 0) {\n            return success(undefined);\n          }\n\n          let minDate = Math.min.apply(\n            null,\n            d.map(n => toValue(n.arisingTime))\n          );\n\n          class optionData {\n            constructor(data) {\n              extend(this, data);\n            }\n\n            getMinDate() {\n              return minDate;\n            }\n          }\n\n          return ajax\n            .post(\"resourceUIService.getResourceById\", $state.params.id)\n            .then(({ modelId }) => {\n              let obj = d.reduce(function(a, b) {\n                  a[b.kpiCode] = a[b.kpiCode] || [];\n                  var rangeObj =\n                    resourceUIService.rootModelsDic[modelId] &&\n                    resourceUIService.rootModelsDic[modelId].kpiDic &&\n                    resourceUIService.rootModelsDic[modelId].kpiDic[\n                      b.kpiCode\n                    ] &&\n                    resourceUIService.rootModelsDic[modelId].kpiDic[b.kpiCode]\n                      .rangeObj;\n                  if (rangeObj) {\n                    b.value = rangeObj[b.value];\n                  }\n                  a[b.kpiCode].push([\n                    toValue(b.arisingTime) - minDate,\n                    b.value,\n                    b.kpiCode\n                  ]);\n                  return a;\n                }, {}),\n                series = propMap(obj, (n, i) => {\n                  return {\n                    name: kpis.find(d => d.dataItemId == i).kpiName,\n                    data: n,\n                    symbolSize: 0,\n                    type: \"line\"\n                  };\n                }),\n                legendProm = propMap(obj, (n, i) => {\n                  return kpis.find(d => d.dataItemId == i).kpiName;\n                });\n              return q.all(legendProm).then(legend => {\n                return success(\n                  new optionData({\n                    xAxis: {\n                      boundaryGap: false,\n                      type: \"value\",\n                      min: \"dataMin\",\n                      max: \"dataMax\",\n                      axisLabel: {\n                        formatter: function(params) {\n                          let d = dateparser(minDate).addTimeStamp(params);\n                          return d.getDateString(\"MM/dd,hh:mm:ss\");\n                        }\n                      }\n                    },\n                    tooltip: {\n                      trigger: \"axis\",\n                      formatter: function(params, b, c) {\n                        return params.reduce((a, b) => {\n                          let time = b.value[0],\n                            val = b.value[1],\n                            marker = b.marker,\n                            seriesIndex = b.seriesIndex,\n                            d = dateparser(minDate + time);\n\n                          a += marker + legend[seriesIndex];\n                          a +=\n                            \":\" +\n                            val +\n                            \"[\" +\n                            d.getDateString(\"MM/dd,hh:mm:ss\") +\n                            \"]<br>\";\n                          return a;\n                        }, \"\");\n                      }\n                    },\n                    series: series,\n                    legend: { data: legend }\n                  })\n                );\n              });\n            });\n        });\n    }\n  }\n\n  function success(d) {\n    let defer = q.defer();\n    defer.resolve(d);\n    return defer.promise;\n  }\n\n  function error(msg) {\n    let defer = q.defer();\n    defer.reject(msg);\n    return defer.promise;\n  }\n\n  /** 获取timestamp **/\n\n  function toValue(d) {\n    return new Date(d) - 0;\n  }\n\n  /** 遍历对象 **/\n\n  function propMap(obj, callback) {\n    let rs = [];\n    for (let i in obj) {\n      rs.push(callback(obj[i], i));\n    }\n    return rs;\n  }\n\n  return new commonMethodService();\n}\n","\nexport default function($q) {\n  const defer = $q.defer();\n  const loadEchartPromise = defer.promise;\n\n  const loadEchart = () => {\n    if (typeof echarts == \"undefined\") {\n      window.require(\n        [\"echarts\"],\n        ec => {\n          setTimeout(function() {\n            defer.resolve(ec);\n          }, 5000);\n        },\n        e => {\n          defer.reject(e);\n        }\n      );\n    } else {\n      defer.resolve(echarts);\n    }\n  };\n  console.log(\"--->\");\n  loadEchart();\n\n  return {\n    loadEchartPromise: loadEchartPromise\n  };\n}\n","\n/** mock **/\nimport { isObject } from \"ps-ultility\";\n\nexport default function (\n  rootScope,\n  psTreeData,\n  $state,\n  q,\n  cms,\n  cms2,\n  ajax,\n  growl,\n  psRouter,\n  psDialog\n) {\n  let target = cms(undefined, rootScope);\n\n  function findValue (data, attr) {\n    class LoopItem {\n      constructor (data, parents, path) {\n        this.data = data;\n        this.parents = parents || [];\n        this.path = path || [];\n      }\n\n      hasParent (parent) {\n        return this.parents.some(p => p == parent);\n      }\n    }\n\n    let queue = [new LoopItem(data)],\n      item;\n    while ((item = queue.shift())) {\n      let {data, parents, path} = item;\n      if (data.hasOwnProperty(attr)) {\n        return {\n          value: data[attr],\n          path: path.concat([attr]).join(\"/\")\n        };\n      }\n      for (let i in data) {\n        if (\n          data.hasOwnProperty(i) &&\n          isObject(data[i]) &&\n          !item.hasParent(data[i])\n        ) {\n          queue.push(\n            new LoopItem(data[i], parents.concat([data]), path.concat([i]))\n          );\n        }\n      }\n    }\n    return {\n      value: undefined\n    };\n  }\n\n  function planDetail (bool, title) {\n    /** 方案详情 **/\n    let category = this.findValue(\"category\"),\n      ticketNo = this.findValue(\"ticketNo\"),\n      ticketTask = this.findValue(\"ticketTask\");\n    target.setValue(\"ticketNo\", ticketNo);\n    target.setValue(\"category\", category);\n    cms2.modal({\n      title: title || `方案详情`,\n      directive: \"ps-alert-exception-resume-plan\",\n      width: \"80%\",\n      params: {\n        ticketNo: ticketNo,\n        category: category,\n        showHandler: bool == null ? true : bool\n      }\n    });\n  }\n\n  class BtnClick {\n    constructor () {\n    }\n\n    checking (text) {\n      target.createPopupByViewIdPath(\n        9246777620035,\n        \"page3\",\n        {\n          width: \"800px\",\n          title: text\n        },\n        this.mergetValues()\n      );\n    }\n\n    bcd () {\n      console.log(this);\n      console.log(\"bcd\");\n    }\n\n    retreat () {\n      let ticketNo = this.findValue(\"ticketNo\");\n\n      ajax.post(\"ticketTaskService.getTicket\", [ticketNo + \"\"]).then(d => {\n        target.setValue(\"maintainListData\", d);\n        var params = {\n          standardProjectNo: d.values.standardProjectId\n        };\n\n        target.postService(\n          \"deviceResumeUIService\",\n          \"getMaintainPlanListByCondition\",\n          [params],\n          tc => {\n            if (tc.data) {\n              var createProject = tc.data;\n              var createProjectFlag = true;\n              // 标准项目编号 历史维修方案\n              var standardProject = [],\n                historyProject = [];\n              for (var i = 0; i < createProject.length; i++) {\n                if (createProject[i].type == \"0\") {\n                  standardProject.push(createProject[i]);\n                } else if (\n                  createProject[i].type == \"1\" &&\n                  createProject[i].ticketNo == d.ticketNo\n                ) {\n                  // 展示下标准的历史选中纪录\n                  standardProject = [createProject[i]];\n                  //判断当前的工单是否提交了历史记录\n                  if (createProject[i].ticketNo == d.ticketNo) {\n                    createProjectFlag = false;\n                    // standardProject = createProject[i];\n                    // standardProject.ticketNo = elem.row.ticketNo;\n                  }\n                }\n              }\n              target.setValue(\"createProjectFlag\", createProjectFlag);\n              target.setValue(\"MaintainPlan\", standardProject[0]);\n              target.setValue(\"getMaintainPlanListData\", standardProject);\n              target.createSystemPopupByViewId(\n                \"494624133620012\",\n                {\n                  width: \"70%\",\n                  title: \"退回处理\"\n                },\n                d\n              );\n            }\n          }\n        );\n      });\n    }\n\n    dealing260 () {\n      target.setValue(\"global/resource\", this._ticketTask);\n      target.createSystemPopupByViewId(\n        \"475059852490000\",\n        {\n          width: \"80%\",\n          title: \"处理方案编制\"\n        },\n        \"onlyRead\"\n      );\n    }\n\n    dealing90 () {\n      target.setValue(\"global/resource\", this._ticketTask);\n      target.createSystemPopupByViewId(\n        \"475059852490000\",\n        {\n          width: \"80%\",\n          title: \"处理方案编制\"\n        },\n        \"onlyRead\"\n      );\n    }\n\n    trusting () {\n      target.createPopupByViewIdPath(\n        9246777620035,\n        \"page4\",\n        {\n          width: \"800px\",\n          title: text\n        },\n        this.mergetValues()\n      );\n    }\n\n    probSolvingHistory () {\n      /** 排故履历 **/\n      let {\n        _data: {ticketTask}\n      } = this;\n      ticketTask.values.deviceExcavationTask =\n        ticketTask.variables.deviceExcavationTask;\n      target.setValue(\"rowData\", ticketTask);\n      target.createPopupByViewIdPath(494624133620017, \"page4\", {\n        width: \"1200px\",\n        title: \"排故履历\"\n      });\n    }\n\n    probSolvingSummary () {\n      /** 故障总结 **/\n      let {\n        _data: {ticketTask}\n      } = this;\n      ticketTask.values = ticketTask.values || {};\n      ticketTask.values.deviceExcavationTask =\n        ticketTask.variables.deviceExcavationTask;\n      target.setValue(\"rowData\", ticketTask);\n      target.setValue(\"showSubmit\", false);\n      target.createPopupByViewIdPath(494624133620017, \"page3\", {\n        width: \"1200px\",\n        title: \"故障总结\"\n      });\n    }\n\n    alertEvaluate () {\n      /* 报警评价弹出窗; */\n      let ticket = this.findValue(\"ticketTask\");\n      ticket.values.alertItemList = ticket.values.alertEvaluateInfoList;\n      //target.setValue(\"$POPUPDATA\", ticket);\n      ticket.showSubmit = false;\n      target.createPopupByViewIdPath(\n        494624133620034,\n        \"page2\",\n        {\n          width: \"1200px\",\n          title: \"报警评价\"\n        },\n        ticket\n      );\n    }\n\n    planDetail () {\n      planDetail.call(this, true);\n    }\n\n    planDetailAfter (name, title) {\n      planDetail.call(this, true, title);\n      /* let deviceId = this.findValue(\"deviceId\"),\n        ticketTask = this.findValue(\"ticketTask\");\n      ticketTask.deviceId = deviceId;\n      target.setValue(\"global/rowObj\", ticketTask);\n      target.createPopupByViewIdPath(517719987480000, \"index\", {\n        width: \"1200px\",\n        title: \"综合处理\"\n      }); */\n    }\n\n    planDetailBefore (name, title) {\n      planDetail.call(this, false, title);\n    }\n\n    fixingPlan () {\n      /** 检修方案, 方案详情 **/\n      let ticketNo = this[\"_ticketNo\"] || this.findValue(\"ticketNo\");\n      //target.refresh(\"prod_tracker\", { ticketNo: ticketNo });\n      let standardProjectId = this.findValue(\"standardProjectId\"),\n        _ticketNo = this[\"_ticketNo\"] || this[\"ticketNo\"],\n        params = {\n          standardProjectNo: standardProjectId\n        };\n      target.setValue(\"maintainListData\", this);\n      ajax\n        .post(\"deviceResumeUIService.getMaintainPlanListByCondition\", [params])\n        .then(data => {\n          if (data) {\n            let createProject = data;\n            let createProjectFlag = true;\n            let standardProject = [],\n              historyProject = [];\n\n            for (let i = 0; i < createProject.length; i++) {\n              if (createProject[i].type == \"0\") {\n                standardProject.push(createProject[i]);\n              } else if (\n                createProject[i].type == \"1\" &&\n                createProject[i].ticketNo == _ticketNo\n              ) {\n                standardProject = [createProject[i]];\n                if (createProject[i].ticketNo == _ticketNo) {\n                  createProjectFlag = false;\n                }\n              }\n            }\n            target.setValue(\"createProjectFlag\", false);\n            target.setValue(\"MaintainPlan\", standardProject[0]);\n            target.setValue(\"getMaintainPlanListData\", standardProject);\n            target.createSystemPopupByCtrlView(\"baowu-plan-confirm2\", {\n              title: \"检修方案\",\n              width: \"90%\"\n            });\n          }\n        });\n    }\n\n    fixingResult () {\n      /** 检修实绩 **/\n\n      let _ticketNo = this[\"_ticketNo\"] || this[\"ticketNo\"];\n\n      target.setValue(\"ticketNo\", _ticketNo);\n      let ticketNo = {\n        ticketNo: _ticketNo\n      };\n      target.postService(\n        \"deviceResumeUIService\",\n        \"getMaintainPlanListByCondition\",\n        ticketNo,\n        function (tc) {\n          if (tc.data.length > 0) {\n            target.setValue(\"maintainListDataflag\", false);\n            target.setValue(\"maintainListData\", tc.data[0]);\n            target.createSystemPopupByCtrlView(\"baowu-write\", {\n              title: \"检修实绩\",\n              width: \"90%\"\n            });\n          } else {\n            target.growl(\"请先确认检修计划\", \"warning\");\n          }\n        }\n      );\n    }\n\n    keepResult () {\n      /** 维护实绩 **/\n      let standardInfo = findValue(this._data, \"stateMaintainResult\");\n      standardInfo = standardInfo ? standardInfo.value : null;\n      target.setValue(\"maintainListDataflag\", true);\n      target.setValue(\"maintainListData\", standardInfo);\n      target.createSystemPopupByCtrlView(\"baowu-write2\", {\n        title: \"维护实绩\",\n        width: \"80%\"\n      });\n    }\n\n    checkOnlineRule () {\n      /** 规则详情 —— 在线告警规则 */\n      let onlineRuleId = this.findValue(\"onlineRuleId\");\n      ajax\n        .post(\n          \"maintenanceTaskUIService.getOnlineJudgeRuleListByConditionWithPage\",\n          [\n            {\n              id: onlineRuleId\n            },\n            {start: 0, length: 50000, statCount: true}\n          ]\n        )\n        .then(({data}) => {\n          let rule = data[0],\n            deviceId = rule.selectedDevId || rule.deviceId;\n          ajax\n            .post(\"resourceUIService.getResourceById\", deviceId)\n            .then(resource => {\n              let params = {\n                mode: \"view\",\n                resource: resource,\n                rule: rule\n              };\n              cms2.modal({\n                title: `规则详情`,\n                directive: \"dialog-project-maintain\",\n                width: \"70%\",\n                scope: rootScope,\n                params: params\n              });\n            });\n        });\n    }\n\n    ruleDetail () {\n      /** 规则详情 **/\n      /* let standardInfo = findValue(this._data, \"standardInfo\"),\n        deviceId = findValue(this._data, \"deviceId\");\n      $state.params.id = deviceId ? deviceId.value : undefined;\n      psRouter.set({\n        obj: standardInfo ? standardInfo.value : null,\n        showSubmit: false\n      });\n      target.createSystemPopupByCtrlView(\"baowu-rule-maintain\", {\n        title: \"规则详情\",\n        width: \"1000px\"\n      }); */\n      let deviceId = findValue(this._data, \"deviceId\");\n      let ticketTask = findValue(this._data, \"ticketTask\");\n      deviceId = deviceId ? deviceId.value : undefined;\n      ticketTask = ticketTask ? ticketTask.value : undefined;\n      ajax\n        .post(\"resourceUIService.getResourceById\", deviceId)\n        .then(resource => {\n          return ajax\n            .post(\n              \"maintenanceTaskUIService.getPersonJudgeRuleListByConditionWithPage\",\n              [\n                {deviceId: resource.id},\n                {start: 0, length: 10, statCount: true}\n              ]\n            )\n            .then(ruleCondition => {\n              return cms2.success({\n                ruleCondition: ruleCondition.data,\n                resource\n              });\n            });\n        })\n        .then(({resource, ruleCondition}) => {\n          let obj = {\n            label: \"人工检查结果维护规则\",\n            type: \"layout\",\n            children: [\n              {\n                type: \"form-grid\",\n                children: [\n                  {\n                    type: \"label\",\n                    label: \"设备名称\",\n                    key: \"deviceName\",\n                    value: resource.label\n                  },\n                  {\n                    type: \"label\",\n                    label: \"设备编号\",\n                    key: \"deviceCode\",\n                    value: resource.externalDevId\n                  },\n                  {\n                    type: \"input\",\n                    label: \"规则模型名称\",\n                    key: \"ruleName\",\n                    config: {\n                      disabled: \"disabled\"\n                    }\n                  },\n                  {\n                    type: \"checkbox\",\n                    key: \"state\",\n                    label: \"是否启用\",\n                    format: {\n                      true: 1,\n                      false: 0\n                    },\n                    config: {\n                      disabled: \"disabled\"\n                    }\n                  },\n                  {\n                    type: \"input\",\n                    label: \"上机服役时间(天)\",\n                    key: \"createBoardDays\",\n                    config: {\n                      disabled: \"disabled\"\n                    }\n                  },\n                  {\n                    type: \"input\",\n                    label: \"过钢量(万吨)\",\n                    key: \"createSteelNumber\",\n                    config: {\n                      disabled: \"disabled\"\n                    }\n                  }\n                ]\n              },\n              {\n                label: \"状态规则\",\n                type: \"table-form\",\n                key: \"itemList\",\n                config: {\n                  attributes: {\n                    stateMantainStandardId: [\"维护项目\", \"text\"],\n                    stepsIndex: [\"项次\", \"text\"],\n                    resultIndex: [\"判断规则\", \"text\"],\n                    needState: [\"是否必须\", \"text\"]\n                  },\n                  grid: {\n                    body: [\n                      {\n                        name: \"stateMantainStandardId\",\n                        bind: function (row) {\n                          return row.stateMaintinStandard.standardName;\n                        }\n                      },\n                      {\n                        name: \"stepsIndex\",\n                        bind: function (row) {\n                          var stepList = row.stateMaintinStandard.stepsList;\n                          var obj = stepList.find(a => {\n                            return a.index == row.stepsIndex;\n                          });\n                          var label = \"\";\n                          if (obj.content) {\n                            label = obj.content;\n                          }\n                          return label;\n                        }\n                      },\n                      {\n                        name: \"resultIndex\",\n                        bind: function (row) {\n                          var stepList = row.stateMaintinStandard.stepsList;\n                          var objStep = stepList.find(a => {\n                            return a.index == row.stepsIndex;\n                          });\n                          var ruleList = objStep.ruleList;\n                          var objRule = ruleList.find(a => {\n                            return a.index == row.resultIndex;\n                          });\n                          var label = \"\";\n                          if (objStep.dataType && objStep.dataType != null) {\n                            if (objStep.dataType == \"定量\") {\n                              var unit = objRule.unit ? objRule.unit : \"\";\n                              var upperLimit = objRule.upperLimit\n                                ? objRule.upperLimit\n                                : \"\";\n                              var lowerLimit = objRule.lowerLimit\n                                ? objRule.lowerLimit\n                                : \"\";\n                              if (\n                                (upperLimit != null &&\n                                  upperLimit != \"\" &&\n                                  lowerLimit == null) ||\n                                lowerLimit == \"\"\n                              ) {\n                                label = \" X < \" + upperLimit + \"(\" + unit + \")\";\n                              } else if (\n                                (upperLimit == null &&\n                                  lowerLimit != null &&\n                                  lowerLimit != \"\") ||\n                                upperLimit == \"\"\n                              ) {\n                                label =\n                                  \" X >= \" + lowerLimit + \"(\" + unit + \")\";\n                              } else if (\n                                upperLimit != null &&\n                                lowerLimit != null &&\n                                upperLimit != \"\" &&\n                                lowerLimit != \"\"\n                              ) {\n                                label =\n                                  lowerLimit +\n                                  \" <= X < \" +\n                                  upperLimit +\n                                  \"(\" +\n                                  unit +\n                                  \")\";\n                              }\n                            } else if (objStep.dataType == \"定性\") {\n                              label = objRule.result;\n                            }\n                          }\n                          return label;\n                        }\n                      },\n                      {\n                        name: \"needState\",\n                        bind: function (row) {\n                          if (row.needState == 0) {\n                            return \"非必须\";\n                          } else if (row.needState == 1) {\n                            return \"必须\";\n                          }\n                        }\n                      }\n                    ],\n                    buttons: {},\n                    config: {\n                      showIndex: false,\n                      showSelector: false,\n                      showSearch: false,\n                      showPage: false,\n                      inlineAdd: {\n                        stateMantainStandardId: {\n                          type: \"select\",\n                          url:\n                            \"maintenanceTaskUIService.getTaskBySimpleConditionWithPage\",\n                          parameter: [\n                            {\n                              deviceId: resource.id,\n                              ticketCategory: \"310\"\n                            },\n                            {\n                              start: 0,\n                              length: 1000,\n                              statCount: true\n                            }\n                          ],\n                          after: function (d) {\n                            d.data.push({\n                              id: 0,\n                              standardName: \"无\"\n                            });\n                            return d.data;\n                          },\n                          format: {\n                            id: \"id\",\n                            label: \"standardName\"\n                          }\n                        },\n                        stepsIndex: {\n                          type: \"select\",\n                          watch: {\n                            key: \"stateMantainStandardId\",\n                            handler: function (newValue, next) {\n                              stepsList = newValue.stepsList\n                                ? newValue.stepsList\n                                : [];\n                              next(stepsList);\n                            }\n                          },\n                          format: {\n                            id: \"index\",\n                            label: \"content\"\n                          }\n                        },\n                        resultIndex: {\n                          type: \"select\",\n                          watch: {\n                            key: \"stepsIndex\",\n                            handler: function (newValue, next) {\n                              var ruleList = [];\n                              var dataType = newValue.dataType\n                                ? newValue.dataType\n                                : false;\n                              if (dataType && dataType != null) {\n                                ruleList = newValue.ruleList;\n                                if (dataType == \"定性\") {\n                                  for (var i = 0; i < ruleList.length; i++) {\n                                    ruleList[i].label = ruleList[i].result;\n                                  }\n                                } else if (dataType == \"定量\") {\n                                  var unit = ruleList[i].label.unit;\n                                  var upperLimit = ruleList[i].label.upperLimit;\n                                  var lowerLimit = ruleList[i].label.lowerLimit;\n                                  if (\n                                    upperLimit != null &&\n                                    lowerLimit == null\n                                  ) {\n                                    ruleList[i].label =\n                                      \" X < \" + upperLimit + unit;\n                                  } else if (\n                                    upperLimit == null &&\n                                    lowerLimit != null\n                                  ) {\n                                    ruleList[i].label =\n                                      \" X >= \" + lowerLimit + unit;\n                                  } else if (\n                                    upperLimit != null &&\n                                    lowerLimit != null\n                                  ) {\n                                    ruleList[i].label =\n                                      lowerLimit +\n                                      \" <= X < \" +\n                                      upperLimit +\n                                      unit;\n                                  }\n                                }\n                              }\n                              next(ruleList);\n                            }\n                          },\n                          format: {\n                            id: \"index\",\n                            label: \"label\"\n                          }\n                        },\n                        needState: {\n                          type: \"select\",\n                          options: [\n                            {id: 1, label: \"必须\"},\n                            {id: 0, label: \"非必须\"}\n                          ]\n                        },\n                        submit: function (a, b, refreshGrid, allData) {\n                          var item = {};\n                          item.stateMantainStandardId =\n                            b.stateMantainStandardId &&\n                            b.stateMantainStandardId.id\n                              ? b.stateMantainStandardId.id\n                              : 0;\n                          item.stepsIndex =\n                            b.stepsIndex && b.stepsIndex.index\n                              ? b.stepsIndex.index\n                              : 0;\n                          item.resultIndex =\n                            b.resultIndex && b.resultIndex.index\n                              ? b.resultIndex.index\n                              : 0;\n                          item.needState =\n                            b.needState && b.needState.id ? b.needState.id : 0;\n                          item.stateMaintinStandard = b.stateMantainStandardId\n                            ? b.stateMantainStandardId\n                            : null;\n                          refreshGrid(false);\n                          allData.push(item);\n                        }\n                      }\n                    }\n                  }\n                }\n              },\n              {\n                type: \"form-grid\",\n                children: [\n                  {\n                    type: \"input\",\n                    label: \"作用设备名称\",\n                    composory: true,\n                    key: \"deviceName\",\n                    config: {\n                      disabled: \"disabled\"\n                    }\n                  },\n                  {\n                    type: \"input\",\n                    label: \"作用设备编码\",\n                    composory: true,\n                    key: \"deviceCode\",\n                    config: {\n                      disabled: \"disabled\"\n                    }\n                  },\n                  {\n                    type: \"input\",\n                    label: \"异常名称\",\n                    composory: true,\n                    key: \"abnormalName\",\n                    config: {\n                      disabled: \"disabled\"\n                    }\n                  },\n                  {\n                    type: \"input\",\n                    label: \"维护标准名称\",\n                    key: \"stateStandardName\",\n                    config: {\n                      disabled: \"disabled\"\n                    }\n                  },\n                  {\n                    type: \"label\",\n                    label: \"维护标准编号\",\n                    key: \"stateStandardNo\"\n                  },\n                  {\n                    type: \"input\",\n                    label: \"维护周期单位\",\n                    key: \"executionCycle\",\n                    watch: {\n                      key: \"stateStandardNo\",\n                      handler: function (e) {\n                        var list = target.getRootScope(\"myDicts\")[\n                          \"executionCycle\"\n                          ];\n                        var obj = list.find(a => {\n                          return a.valueCode == rowValue.executionCycle;\n                        });\n                        e.update({\n                          value: obj && obj.label ? obj.label : \"\"\n                        });\n                      }\n                    },\n                    config: {\n                      disabled: \"disabled\"\n                    }\n                  },\n                  {\n                    type: \"input\",\n                    label: \"维护周期间隔\",\n                    key: \"cycleNum\",\n                    config: {\n                      disabled: \"disabled\"\n                    }\n                  },\n                  {\n                    type: \"input\",\n                    label: \"检修标准名称\",\n                    key: \"maintainStandardName\",\n                    config: {\n                      disabled: \"disabled\"\n                    }\n                  },\n                  {\n                    type: \"label\",\n                    label: \"检修标准编号\",\n                    key: \"maintainStandardNo\"\n                  },\n                  {\n                    type: \"input\",\n                    label: \"检修完成期限(天)\",\n                    key: \"maintainLimitDay\",\n                    config: {\n                      disabled: \"disabled\"\n                    }\n                  }\n                ]\n              }\n            ]\n          };\n          psDialog.modal(obj, ruleCondition[0]);\n        });\n    }\n\n    showTroubleShootDialog () {\n      let deviceExcavationBook = this.findValue(\"deviceExcavationBook\");\n      cms2.modal({\n        title: \"排故手顺书详情\",\n        directive: \"troubleshoot-dialog\",\n        width: \"70%\",\n        params: {type: \"view\", data: deviceExcavationBook}\n      });\n    }\n\n    showMaintainRuleDialog () {\n      let stepsNo = this.findValue(\"stepsNo\");\n      let stepsList = this.prev.node.findValue(\"stepsList\");\n      let findStep = stepsList.find(item => {\n        return item.stepsNo == stepsNo;\n      });\n      if (stepsNo && stepsNo != 0) {\n        cms2.modal({\n          title: \"维护规则\",\n          directive: \"dialog-project-rule\",\n          width: \"70%\",\n          params: {\n            data: findStep\n          }\n        });\n      } else {\n        let deviceId = this.prev.node.findValue(\"deviceId\");\n        let ruleId = this.findValue(\"targetRuleId\");\n        //let deviceId = findValue(this._data, \"deviceId\");\n        let ticketTask = findValue(this._data, \"ticketTask\");\n        //deviceId = deviceId ? deviceId.value : undefined;\n        ticketTask = ticketTask ? ticketTask.value : undefined;\n        ajax\n          .post(\"resourceUIService.getResourceById\", deviceId)\n          .then(resource => {\n            return ajax\n              .post(\n                \"maintenanceTaskUIService.getPersonJudgeRuleListByConditionWithPage\",\n                [{id: ruleId}, {start: 0, length: 10, statCount: true}]\n              )\n              .then(ruleCondition => {\n                return cms2.success({\n                  ruleCondition: ruleCondition.data,\n                  resource\n                });\n              });\n          })\n          .then(({resource, ruleCondition}) => {\n            let obj = {\n              label: \"人工检查结果维护规则\",\n              type: \"layout\",\n              children: [\n                {\n                  type: \"form-grid\",\n                  children: [\n                    {\n                      type: \"label\",\n                      label: \"设备名称\",\n                      key: \"deviceName\",\n                      value: resource.label\n                    },\n                    {\n                      type: \"label\",\n                      label: \"设备编号\",\n                      key: \"deviceCode\",\n                      value: resource.externalDevId\n                    },\n                    {\n                      type: \"input\",\n                      label: \"规则模型名称\",\n                      key: \"ruleName\",\n                      config: {\n                        disabled: \"disabled\"\n                      }\n                    },\n                    {\n                      type: \"checkbox\",\n                      key: \"state\",\n                      label: \"是否启用\",\n                      format: {\n                        true: 1,\n                        false: 0\n                      },\n                      config: {\n                        disabled: \"disabled\"\n                      }\n                    },\n                    {\n                      type: \"input\",\n                      label: \"上机服役时间(天)\",\n                      key: \"createBoardDays\",\n                      config: {\n                        disabled: \"disabled\"\n                      }\n                    },\n                    {\n                      type: \"input\",\n                      label: \"过钢量(万吨)\",\n                      key: \"createSteelNumber\",\n                      config: {\n                        disabled: \"disabled\"\n                      }\n                    }\n                  ]\n                },\n                {\n                  label: \"状态规则\",\n                  type: \"table-form\",\n                  key: \"itemList\",\n                  config: {\n                    attributes: {\n                      stateMantainStandardId: [\"维护项目\", \"text\"],\n                      stepsIndex: [\"项次\", \"text\"],\n                      resultIndex: [\"判断规则\", \"text\"],\n                      needState: [\"是否必须\", \"text\"]\n                    },\n                    grid: {\n                      body: [\n                        {\n                          name: \"stateMantainStandardId\",\n                          bind: function (row) {\n                            return row.stateMaintinStandard.standardName;\n                          }\n                        },\n                        {\n                          name: \"stepsIndex\",\n                          bind: function (row) {\n                            var stepList = row.stateMaintinStandard.stepsList;\n                            var obj = stepList.find(a => {\n                              return a.index == row.stepsIndex;\n                            });\n                            var label = \"\";\n                            if (obj.content) {\n                              label = obj.content;\n                            }\n                            return label;\n                          }\n                        },\n                        {\n                          name: \"resultIndex\",\n                          bind: function (row) {\n                            var stepList = row.stateMaintinStandard.stepsList;\n                            var objStep = stepList.find(a => {\n                              return a.index == row.stepsIndex;\n                            });\n                            var ruleList = objStep.ruleList;\n                            var objRule = ruleList.find(a => {\n                              return a.index == row.resultIndex;\n                            });\n                            var label = \"\";\n                            if (objStep.dataType && objStep.dataType != null) {\n                              if (objStep.dataType == \"定量\") {\n                                var unit = objRule.unit ? objRule.unit : \"\";\n                                var upperLimit = objRule.upperLimit\n                                  ? objRule.upperLimit\n                                  : \"\";\n                                var lowerLimit = objRule.lowerLimit\n                                  ? objRule.lowerLimit\n                                  : \"\";\n                                if (\n                                  (upperLimit != null &&\n                                    upperLimit != \"\" &&\n                                    lowerLimit == null) ||\n                                  lowerLimit == \"\"\n                                ) {\n                                  label =\n                                    \" X < \" + upperLimit + \"(\" + unit + \")\";\n                                } else if (\n                                  (upperLimit == null &&\n                                    lowerLimit != null &&\n                                    lowerLimit != \"\") ||\n                                  upperLimit == \"\"\n                                ) {\n                                  label =\n                                    \" X >= \" + lowerLimit + \"(\" + unit + \")\";\n                                } else if (\n                                  upperLimit != null &&\n                                  lowerLimit != null &&\n                                  upperLimit != \"\" &&\n                                  lowerLimit != \"\"\n                                ) {\n                                  label =\n                                    lowerLimit +\n                                    \" <= X < \" +\n                                    upperLimit +\n                                    \"(\" +\n                                    unit +\n                                    \")\";\n                                }\n                              } else if (objStep.dataType == \"定性\") {\n                                label = objRule.result;\n                              }\n                            }\n                            return label;\n                          }\n                        },\n                        {\n                          name: \"needState\",\n                          bind: function (row) {\n                            if (row.needState == 0) {\n                              return \"非必须\";\n                            } else if (row.needState == 1) {\n                              return \"必须\";\n                            }\n                          }\n                        }\n                      ],\n                      buttons: {},\n                      config: {\n                        showIndex: false,\n                        showSelector: false,\n                        showSearch: false,\n                        showPage: false,\n                        inlineAdd: {\n                          stateMantainStandardId: {\n                            type: \"select\",\n                            url:\n                              \"maintenanceTaskUIService.getTaskBySimpleConditionWithPage\",\n                            parameter: [\n                              {\n                                deviceId: resource.id,\n                                ticketCategory: \"310\"\n                              },\n                              {\n                                start: 0,\n                                length: 1000,\n                                statCount: true\n                              }\n                            ],\n                            after: function (d) {\n                              d.data.push({\n                                id: 0,\n                                standardName: \"无\"\n                              });\n                              return d.data;\n                            },\n                            format: {\n                              id: \"id\",\n                              label: \"standardName\"\n                            }\n                          },\n                          stepsIndex: {\n                            type: \"select\",\n                            watch: {\n                              key: \"stateMantainStandardId\",\n                              handler: function (newValue, next) {\n                                stepsList = newValue.stepsList\n                                  ? newValue.stepsList\n                                  : [];\n                                next(stepsList);\n                              }\n                            },\n                            format: {\n                              id: \"index\",\n                              label: \"content\"\n                            }\n                          },\n                          resultIndex: {\n                            type: \"select\",\n                            watch: {\n                              key: \"stepsIndex\",\n                              handler: function (newValue, next) {\n                                var ruleList = [];\n                                var dataType = newValue.dataType\n                                  ? newValue.dataType\n                                  : false;\n                                if (dataType && dataType != null) {\n                                  ruleList = newValue.ruleList;\n                                  if (dataType == \"定性\") {\n                                    for (var i = 0; i < ruleList.length; i++) {\n                                      ruleList[i].label = ruleList[i].result;\n                                    }\n                                  } else if (dataType == \"定量\") {\n                                    var unit = ruleList[i].label.unit;\n                                    var upperLimit =\n                                      ruleList[i].label.upperLimit;\n                                    var lowerLimit =\n                                      ruleList[i].label.lowerLimit;\n                                    if (\n                                      upperLimit != null &&\n                                      lowerLimit == null\n                                    ) {\n                                      ruleList[i].label =\n                                        \" X < \" + upperLimit + unit;\n                                    } else if (\n                                      upperLimit == null &&\n                                      lowerLimit != null\n                                    ) {\n                                      ruleList[i].label =\n                                        \" X >= \" + lowerLimit + unit;\n                                    } else if (\n                                      upperLimit != null &&\n                                      lowerLimit != null\n                                    ) {\n                                      ruleList[i].label =\n                                        lowerLimit +\n                                        \" <= X < \" +\n                                        upperLimit +\n                                        unit;\n                                    }\n                                  }\n                                }\n                                next(ruleList);\n                              }\n                            },\n                            format: {\n                              id: \"index\",\n                              label: \"label\"\n                            }\n                          },\n                          needState: {\n                            type: \"select\",\n                            options: [\n                              {id: 1, label: \"必须\"},\n                              {id: 0, label: \"非必须\"}\n                            ]\n                          },\n                          submit: function (a, b, refreshGrid, allData) {\n                            var item = {};\n                            item.stateMantainStandardId =\n                              b.stateMantainStandardId &&\n                              b.stateMantainStandardId.id\n                                ? b.stateMantainStandardId.id\n                                : 0;\n                            item.stepsIndex =\n                              b.stepsIndex && b.stepsIndex.index\n                                ? b.stepsIndex.index\n                                : 0;\n                            item.resultIndex =\n                              b.resultIndex && b.resultIndex.index\n                                ? b.resultIndex.index\n                                : 0;\n                            item.needState =\n                              b.needState && b.needState.id\n                                ? b.needState.id\n                                : 0;\n                            item.stateMaintinStandard = b.stateMantainStandardId\n                              ? b.stateMantainStandardId\n                              : null;\n                            refreshGrid(false);\n                            allData.push(item);\n                          }\n                        }\n                      }\n                    }\n                  }\n                },\n                {\n                  type: \"form-grid\",\n                  children: [\n                    {\n                      type: \"input\",\n                      label: \"作用设备名称\",\n                      composory: true,\n                      key: \"deviceName\",\n                      config: {\n                        disabled: \"disabled\"\n                      }\n                    },\n                    {\n                      type: \"input\",\n                      label: \"作用设备编码\",\n                      composory: true,\n                      key: \"deviceCode\",\n                      config: {\n                        disabled: \"disabled\"\n                      }\n                    },\n                    {\n                      type: \"input\",\n                      label: \"异常名称\",\n                      composory: true,\n                      key: \"abnormalName\",\n                      config: {\n                        disabled: \"disabled\"\n                      }\n                    },\n                    {\n                      type: \"input\",\n                      label: \"维护标准名称\",\n                      key: \"stateStandardName\",\n                      config: {\n                        disabled: \"disabled\"\n                      }\n                    },\n                    {\n                      type: \"label\",\n                      label: \"维护标准编号\",\n                      key: \"stateStandardNo\"\n                    },\n                    {\n                      type: \"input\",\n                      label: \"维护周期单位\",\n                      key: \"executionCycle\",\n                      watch: {\n                        key: \"stateStandardNo\",\n                        handler: function (e) {\n                          var list = target.getRootScope(\"myDicts\")[\n                            \"executionCycle\"\n                            ];\n                          var obj = list.find(a => {\n                            return a.valueCode == rowValue.executionCycle;\n                          });\n                          e.update({\n                            value: obj && obj.label ? obj.label : \"\"\n                          });\n                        }\n                      },\n                      config: {\n                        disabled: \"disabled\"\n                      }\n                    },\n                    {\n                      type: \"input\",\n                      label: \"维护周期间隔\",\n                      key: \"cycleNum\",\n                      config: {\n                        disabled: \"disabled\"\n                      }\n                    },\n                    {\n                      type: \"input\",\n                      label: \"检修标准名称\",\n                      key: \"maintainStandardName\",\n                      config: {\n                        disabled: \"disabled\"\n                      }\n                    },\n                    {\n                      type: \"label\",\n                      label: \"检修标准编号\",\n                      key: \"maintainStandardNo\"\n                    },\n                    {\n                      type: \"input\",\n                      label: \"检修完成期限(天)\",\n                      key: \"maintainLimitDay\",\n                      config: {\n                        disabled: \"disabled\"\n                      }\n                    }\n                  ]\n                }\n              ]\n            };\n            psDialog.modal(obj, ruleCondition[0]);\n          });\n      }\n    }\n\n    maintainingProject (text) {\n      let ticketNo = {\n        ticketNo: this._ticketNo\n      };\n      ajax\n        .post(\n          \"deviceResumeUIService.getMaintainStandardListByCondition\",\n          ticketNo\n        )\n        .then(tc => {\n          if (tc && tc.length > 0) {\n            target.createPopupByViewIdPath(\n              9246777620035,\n              \"page5\",\n              {\n                width: \"800px\",\n                title: text\n              },\n              this.mergetValues()\n            );\n          } else {\n            growl.warning(\"请先制定维修方案\");\n          }\n        });\n    }\n\n    repairProject (text) {\n      target.createPopupByViewIdPath(\n        9246777620035,\n        \"page6\",\n        {\n          width: \"800px\",\n          top: \"13%\",\n          title: text\n        },\n        JSON.stringify(this._ticketTaskValues)\n      );\n    }\n\n    alertItemList () {\n      let alertItemList =\n        attr(this._data, \"ticketTask/variables/alertItemList\") || [],\n        deviceName = attr(this._data, \"ticketTask/variables/devName\");\n      alertItemList.forEach(function (ele) {\n        ele.deviceName = deviceName;\n      });\n      target.createSystemPopupByViewId(\n        \"357383633040000\",\n        {\n          title: \"报警详情\",\n          top: \"10%\",\n          width: \"80%\"\n        },\n        [\"alertItemList\", alertItemList]\n      );\n    }\n\n    alertEvaluateInfoList () {\n      let alertEvaluateInfoList = attr(\n        this._data,\n        \"ticketTask/variables/alertItemList\"\n      );\n      target.setValue(\"alertEvaluateInfoList\", alertEvaluateInfoList);\n      target.createPopupByViewIdPath(9246777620035, \"page7\", {\n        width: \"800px\",\n        top: \"13%\",\n        title: \"报警评价\"\n      });\n    }\n\n    taskEvaluate () {\n      let ticketTask = attr(this._data, \"ticketTask\");\n      let alertEvaluateInfoList = attr(\n        this._data,\n        \"ticketTask/values/alertEvaluateInfoList\"\n      );\n      if (alertEvaluateInfoList && alertEvaluateInfoList.length > 0) {\n        target.setValue(\"global/resource\", ticketTask);\n        target.createPopupByViewIdPath(\n          9246777620035,\n          \"page8\",\n          {\n            width: \"800px\",\n            title: \"验收评价\"\n          },\n          \"onlyRead\"\n        );\n      } else {\n        target.setValue(\"global/resource\", ticketTask);\n        target.createPopupByViewIdPath(\n          9246777620035,\n          \"page11\",\n          {\n            width: \"800px\",\n            title: \"验收\"\n          },\n          \"onlyRead\"\n        );\n      }\n    }\n\n    assessingAgain () {\n      let ticketTask = attr(this._data, \"ticketTask\");\n      target.setValue(\"global/resource\", ticketTask);\n      target.createSystemPopupByLocalPath(\n        \"page10\",\n        {\n          width: \"800px\",\n          title: \"验收评价\"\n        },\n        \"onlyRead\"\n      );\n    }\n\n    dianjianyichang () {\n      let pointTicketNo = attr(\n        this._data,\n        \"ticketTask/variables/pointTicketNo\"\n      );\n      target.postService(\n        \"ticketLogService\",\n        \"getByTicketNo\",\n        [pointTicketNo],\n        function (dt) {\n          target.createPopupByViewIdPath(\n            9246777620035,\n            \"page9\",\n            {\n              width: \"90%\",\n              title: \"点检实绩登录\"\n            },\n            dt.data[1].ticketTask\n          );\n        }\n      );\n    }\n\n    dangridianjian () {\n      let ticketTask = attr(this._data, \"ticketTask\");\n      target.createPopupByViewIdPath(\n        9246777620035,\n        \"page9\",\n        {\n          width: \"90%\",\n          title: \"点检实绩登录\"\n        },\n        ticketTask\n      );\n    }\n\n    baogao () {\n      cms2\n        .modal({\n          title: \"详情\",\n          directive: \"dialog-detail-alert\",\n          width: \"50%\",\n          params: {\n            mode: \"view\",\n            type: \"\",\n            data: this.ticketTask\n          }\n        })\n        .then(d => {\n        });\n    }\n\n    formulateScheme () {\n      cms2\n        .modal({\n          title: \"制定方案\",\n          directive: \"dialog-detail-plan\",\n          width: \"85%\",\n          params: {\n            mode: \"view\",\n            hasHead: true,\n            data: this.next ? this.next.node.ticketTask : this.ticketTask\n          }\n        })\n        .then(d => {\n          if (d) {\n            ajax\n              .post(\"baogangTicketService.formulateScheme\", [this.ticketNo, d])\n              .then(e => {\n                growl.info(\"录入完成\");\n                initDoud();\n              });\n          }\n        });\n    }\n\n    disassemblyDetection () {\n      cms2\n        .modal({\n          title: \"解体检测\",\n          directive: \"dialog-detail-performance\",\n          width: \"85%\",\n          params: {\n            mode: \"view\",\n            hasHead: true,\n            data: this.next ? this.next.node.ticketTask : this.ticketTask\n          }\n        })\n        .then(d => {\n          if (d) {\n            ajax\n              .post(\"baogangTicketService.disintegrationCheck\", [\n                this.ticketNo,\n                d\n              ])\n              .then(e => {\n                growl.info(\"录入完成\");\n                initDoud();\n              });\n          }\n        });\n    }\n\n    recordResults () {\n      cms2.modal({\n        title: \"录入实绩\",\n        directive: \"dialog-detail-performancess\",\n        width: \"85%\",\n        params: {\n          mode: \"view\",\n          luru: true,\n          hasHead: true,\n          data: this.next ? this.next.node.ticketTask : this.ticketTask\n        }\n      });\n    }\n\n    factoryInspection () {\n      cms2.modal({\n        title: \"出厂检验\",\n        directive: \"dialog-detail-performancess\",\n        width: \"85%\",\n        params: {\n          mode: \"view\",\n          luru: true,\n          chuchang: true,\n          hasHead: true,\n          data: this.next ? this.next.node.ticketTask : this.ticketTask\n        }\n      });\n    }\n\n    detailsProblem () {\n      cms2\n        .modal({\n          title: \"问题详情\",\n          directive: \"dialog-common-alerts\",\n          width: \"50%\",\n          params: {\n            mode: \"view\",\n            hasHead: true,\n            commonKey: \"问题详情\",\n            data: this.next ? this.next.node.ticketTask : this.ticketTask,\n            problem: \"problem\"\n          }\n        })\n        .then(d => {\n          if (d) {\n            // growl.info(\"报废完成\");\n          }\n        });\n    }\n\n    scrap () {\n      cms2\n        .modal({\n          title: \"报废详情\",\n          directive: \"dialog-common-alerts\",\n          width: \"50%\",\n          params: {\n            mode: \"edit\",\n            hasHead: true,\n            commonKey: \"报废原因\",\n            data: this.next ? this.next.node.ticketTask : this.ticketTask\n          }\n        })\n        .then(d => {\n          if (d) {\n          }\n        });\n    }\n\n    downReport () {\n      let downloadDom = document.createElement('a');\n      downloadDom.setAttribute('target', '_blank');\n      downloadDom.setAttribute('href', `/api/rest/download/deviceResumeUIService/getReportBytes/${this.ticketNo}.pdf/${this.ticketNo}`);\n      downloadDom.click();\n    }\n  }\n\n  return new BtnClick();\n}\n","\n/** mainCtrlRm\" **/\n\nexport default function(rootScope, q) {\n  let getConfigValues = q.defer();\n  function parse(str) {\n    let obj = null;\n    try {\n      obj = JSON.parse(str);\n    } catch (e) {\n      return null;\n    }\n    return obj;\n  }\n  const factory = {\n    getRoleValues() {\n      return getConfigValues.promise;\n    },\n    setRoleValues(d) {\n      getConfigValues.resolve(parse(d));\n    },\n    updateRoleValues(d) {\n      getConfigValues = q.defer();\n      getConfigValues.resolve(parse(d));\n      return getConfigValues.promise;\n    }\n  };\n  return factory;\n}\n","\n  /** mock **/\n  export default function( rootScope,q ){\n    function Mock( factory ){\n      class MockData {}\n      for(let i in factory ){\n        Object.defineProperty(MockData.prototype, i, {\n          enumerable : false,\n          value : function( ...args ){\n            let fnStr = factory[i].toString();\n            fnStr = fnStr.replace(/serviceProxy\\.get/, \"serviceProxy.mock\");\n            new Function( fnStr )( ...args );\n          }\n        })\n      }\n    }\n    return Mock;\n  }\n","\nimport factory from \"./../../js/services/service_factory.js\";\nimport { random } from \"ps-ultility\";\n\nexport default function(q, rootScope) {\n  const DEBUG = false,\n    protocol = factory.protocol || \"ws\",\n    host = factory.host,\n    websockets = {},\n    websocketOpened = q.defer(),\n    url = `${protocol}//${host}/websocket/message`,\n    getId = d => (typeof d === \"object\" ? d.id : d);\n\n  function stringify(obj) {\n    return JSON.stringify(obj);\n  }\n\n  function parse(str) {\n    let a = {};\n    try {\n      a = JSON.parse(str);\n    } catch (e) {}\n    return a;\n  }\n\n  function createWs(name) {\n    class WebsocketCls {\n      constructor() {\n        this.listeners = [];\n        this.name = name;\n        this.uuid = random();\n        this.ws = new WebSocket(url);\n\n        this.ws.onopen = () => {\n          websocketOpened.resolve(this.ws);\n        };\n        this.ws.onerror = function(e) {\n          console.log(`websocket was on error, please try to re-link`);\n        };\n        this.ws.onclose = function(e) {\n          console.log(`websocket was closed, please try to re-link`);\n        };\n        this.ws.onmessage = e => {\n          let data = parse(e.data);\n          let { nodeId, kpiCode, value } = data.data ? data.data : data;\n          let fn = this.listeners[`${nodeId}_${kpiCode}`];\n          fn\n            ? fn.forEach(f => {\n                f(data.data);\n              })\n            : null;\n        };\n      }\n      send(ci, kpi) {\n        websocketOpened.promise.then(ws => {\n          ws.send(\n            stringify({\n              uuid: this.uuid,\n              operation: \"register\",\n              type: \"kpi\",\n              param: {\n                ciid: ci.map(getId).join(\",\"),\n                kpi: kpi.map(getId).join(\",\")\n              }\n            })\n          );\n        });\n      }\n      destroy() {\n        this.ws.send(\n          stringify({\n            uuid: this.uuid,\n            operation: \"unregister\"\n          })\n        );\n      }\n      on(ci, kpi, callback) {\n        this.listeners[`${ci}_${kpi}`] = this.listeners[`${ci}_${kpi}`] || [];\n        this.listeners[`${ci}_${kpi}`].push(callback);\n      }\n    }\n\n    return new WebsocketCls(name);\n  }\n\n  return function(name) {\n    websockets[name] = websockets[name] || createWs(name);\n    return websockets[name];\n  };\n}\n","\nexport default function(rootScope, q, ajax, psWebsocket) {\n  /** 抽象轮询和websocket查寻数据的方法 */\n  let id = 0;\n  class KpiValueListGetter {\n    constructor(time) {\n      this.id = id++;\n      this.time = time;\n    }\n    getKpiValueList(nodeIds, kpiCodes, instances = [], callback) {\n      let params = [\n        \"kpi\",\n        {\n          includeInstance: true,\n          isRealTimeData: true,\n          nodeIds: nodeIds,\n          queryInstances: instances.join(\",\"),\n          kpiCodes: kpiCodes\n        }\n      ];\n      ajax\n        .post(\"kpiDataFlexService.getKpiValueList\", params)\n        .then(d => {\n          callback && callback.call(this, d);\n        })\n        .catch(e => {\n          callback && callback.call(this, []);\n        });\n    }\n  }\n  class Polling extends KpiValueListGetter {\n    constructor(time) {\n      super(time);\n    }\n    getData(nodeIds, kpiCodes, instances, callback) {\n      this.polling = () => {\n        this.getKpiValueList(nodeIds, kpiCodes, instances, valuelist => {\n          callback && callback.call(this, valuelist);\n          this.timer = setTimeout(() => {\n            this.polling && this.polling();\n          }, this.time);\n        });\n      };\n      this.polling();\n    }\n    destroy() {\n      clearTimeout(this.timer);\n      delete this.time;\n      delete this.polling;\n    }\n  }\n  class WebSocket extends KpiValueListGetter {\n    constructor(time, isDebug) {\n      super(time);\n      this.isDebug = isDebug;\n    }\n    getData(nodeIds, kpiCodes, instances, callback) {\n      this.ws = psWebsocket(\"webSocket_\" + this.id, this.time, this.isDebug);\n      this.ws.on((v, dt) => {\n        callback && callback.call(this, v, dt);\n      });\n      this.getKpiValueList(nodeIds, kpiCodes, instances, valuelist => {\n        callback && callback.call(this, valuelist);\n        this.ws.send(nodeIds, kpiCodes, instances);\n      });\n    }\n    destroy() {\n      this.ws.destroy();\n    }\n  }\n  class PsPolling {\n    constructor(time, isWebsocket, isDebug) {\n      this.time = time;\n      this.isWebsocket = isWebsocket;\n      this.valueGetter = this.isWebsocket\n        ? new WebSocket(this.time, isDebug)\n        : new Polling(this.time);\n    }\n    getData(nodeIds, kpiCodes, instances, callback) {\n      this.valueGetter.getData(nodeIds, kpiCodes, instances, (v, dt) => {\n        this.saveApply(() => {\n          callback && callback.call(this, v, dt);\n        });\n      });\n    }\n    saveApply(fn) {\n      if (rootScope.$$phase == \"$digest\" || rootScope.$$phase == \"$apply\") {\n        return fn();\n      }\n      return rootScope.$apply(fn);\n    }\n    destroy() {\n      this.valueGetter.destroy();\n    }\n  }\n  return (time, mode, isDebug) => {\n    return new PsPolling(time, mode, isDebug);\n  };\n}\n","\n/** mainCtrlRm\" **/\nexport default function(\n  rootScope,\n  q,\n  $state,\n  psTreeData,\n  ajax,\n  resourceUIService,\n  kpiDataService,\n  psWebsocket,\n  SwSocket,\n  unitService,\n  cms2\n) {\n  return function(data) {\n    var elemData = data,\n      uuid,\n      timer,\n      timerCallback,\n      ws = psWebsocket(\"ps_topo\"),\n      /** keep consequence with old version **/\n      persentage = 0,\n      /** keep consequence with old version **/\n      events = {},\n      kpisMap = {},\n      units = {},\n      resourceMap = {},\n      scope = elemData.scope,\n      timeout = elemData.timeout,\n      topo = $(\"<div></div>\"),\n      wrap = $(\"<div></div>\"),\n      svgId,\n      isArray = isType(\"Array\"),\n      previewMode = elemData.previewMode,\n      element = elemData.element,\n      self = elemData.element,\n      viewId = self.viewId,\n      global = elemData.global,\n      style = element.style || {},\n      linkAnHandler = function(cell) {\n        var dr = cell.get(\"attrs\")[\".connection\"][\"stroke-dasharray\"],\n          linkAn = cell.get(\"linkAn\"),\n          cellDom = jQuery(\"[model-id=\" + cell.id + \"]\").find(\".connection\")[0],\n          oldClass = cellDom.getAttribute(\"class\");\n        oldClass = oldClass.replace(\" runslow\", \"\");\n        oldClass = oldClass.replace(\" runnormal\", \"\");\n        oldClass = oldClass.replace(\" runfast\", \"\");\n        if (dr && dr != \"0\") {\n          if (linkAn == \"慢速\") {\n            oldClass = oldClass + \" runslow\";\n          } else if (linkAn == \"普通\") {\n            oldClass = oldClass + \" runnormal\";\n          } else if (linkAn == \"快速\") {\n            oldClass = oldClass + \" runfast\";\n          }\n        }\n        cellDom.setAttribute(\"class\", oldClass);\n      };\n    function isType(type) {\n      return function(target) {\n        return {}.toString.call(target) === \"[object \" + type + \"]\";\n      };\n    }\n    function collapse(a, b) {\n      var item,\n        queue = isArray(b) ? b.slice() : [b];\n      while ((item = queue.shift())) {\n        if (isArray(item)) {\n          [].push.apply(queue, item);\n        } else {\n          a.push(item);\n        }\n      }\n      return a;\n    }\n    function extend() {\n      var args = [].slice.call(arguments),\n        first = args.shift();\n      args.forEach(function(d) {\n        for (var i in d) {\n          first[i] = d[i];\n        }\n      });\n      return first;\n    }\n    function random(length) {\n      length = length || 16;\n      var chars =\n          \"abcdedfghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890\",\n        rs = \"\",\n        rnd,\n        len = chars.length;\n      for (var i = 0; i < length; i++) {\n        rnd = parseInt(Math.random() * len);\n        rs += chars[rnd];\n      }\n      return rs;\n    }\n    function directive(cell) {\n      var context = {};\n      var position = cell.position,\n        div;\n      var directiveIds = cell.directiveIds.map(function(e) {\n        return (typeof e == \"number\" && e) || parseInt(e.split(\"number:\")[1]);\n      });\n      var modelId = cell.modelId && cell.modelId.split(\"number:\")[1];\n      var nodeId = cell.modelId && cell.nodeId.split(\"number:\")[1];\n      if (modelId) {\n        var getDirectivesByModelId = function() {\n          return new Promise(function(resolve) {\n            resourceUIService.getDirectivesByModelId(modelId, function(d) {\n              resolve(d.data);\n            });\n          });\n        };\n        var getKpisByModelId = function() {\n          return new Promise(function(resolve) {\n            resourceUIService.getKpisByModelId(modelId, function(d) {\n              resolve(d.data);\n            });\n          });\n        };\n        Promise.all([getDirectivesByModelId(), getKpisByModelId()]).then(\n          function(ret) {\n            var directives = ret[0];\n            var kpis = ret[1];\n            directives = directives.filter(function(d) {\n              return directiveIds.indexOf(d.id) != -1;\n            });\n            directives.forEach(function(directive) {\n              kpis.forEach(function(kpi) {\n                if (kpi.id == directive.kpiDefinitionIds[0]) {\n                  directive.kpiLabel = kpi.name;\n                }\n              });\n              var wrap = $(\"<div></div>\");\n              var label = $(\"<label></label>\");\n              var input = $(\"<input />\");\n              var btn = $(\"<button></button>\");\n              var timesInput = $(\"<input />\");\n              var timesLabel = $(\"<label></label>\");\n              label.css(\"margin\", \"5px\");\n              input.css(\"margin\", \"5px\");\n              timesInput.css(\"margin\", \"5px\");\n              timesInput.css(\"width\", \"30px\");\n              timesInput.val(1);\n              btn.text(\"发送\");\n              timesLabel.text(\"次\");\n              label.text(directive.name);\n              wrap.append(label);\n              wrap.append(input);\n              wrap.append(btn);\n              wrap.append(timesInput);\n              wrap.append(timesLabel);\n              div.append(wrap);\n              btn.on(\"click\", function(e) {\n                var times = timesInput.val();\n                times = Number(times);\n                var params = {};\n                params[directive.kpiLabel] = input.val();\n                close();\n                for (var j = 0; j < times; j++) {\n                  element.sendDirective(\n                    parseInt(nodeId),\n                    directive.id,\n                    params,\n                    function(e) {}\n                  );\n                }\n              });\n            });\n          }\n        );\n      }\n      var p = persentage || 1;\n      div = $(\"<div></div>\");\n      div.css(\"position\", \"absolute\");\n      div.css(\"top\", cell.position.y / p + \"px\");\n      div.css(\n        \"left\",\n        (cell.position.x < 300\n          ? 100 + cell.position.x\n          : cell.position.x - 280) /\n          p +\n          \"px\"\n      );\n      div.css(\"border\", \"1px solid #ddd\");\n      div.css(\"z-index\", 199);\n      div.css(\"padding\", \"10px\");\n      div.css(\"background-color\", \"#eee\");\n      setTimeout(function() {\n        div.on(\"click\", function(e) {\n          e.stopPropagation();\n        });\n        $(\"body\").on(\"click.directive\", close);\n      });\n      topo.append(div);\n\n      function close(e) {\n        div.children().remove();\n        div.remove();\n        $(\"body\").off(\"click.directive\");\n      }\n      return context;\n    }\n    function tip(cell) {\n      var context = {};\n      var position = cell.position,\n        div;\n      var kpiId = cell.kpiId && cell.kpiId.split(\"number:\")[1];\n      var nodeId = cell.nodeId && cell.nodeId.split(\"number:\")[1];\n      var modelId = cell.modelId && cell.modelId.split(\"number:\")[1];\n      if (kpiId && nodeId) {\n        kpiDataService.getRealTimeKpiData([nodeId * 1], [kpiId * 1], function(\n          ret\n        ) {\n          if (ret.code == 0 && ret.data.length) {\n            var wrap = $(\"<div></div>\");\n            var label = $(\"<label></label>\");\n            label.css(\"margin\", \"5px\");\n            label.css(\"color\", \"#fff\");\n            label.css(\"font-size\", \"18px\");\n            var unitLabel =\n              scope.$root.rootModelsDic[modelId][kpiId].unitLabel || \"\";\n            label.text(ret.data[0].value + unitLabel);\n            wrap.append(label);\n            div.append(wrap);\n            var p = persentage || 1;\n            div = $(\"<div></div>\");\n            div.css(\"position\", \"absolute\");\n            div.css(\"left\", cell.position.x / p + \"px\");\n            div.css(\"top\", (cell.size.height + cell.position.y) / p + \"px\");\n            div.css(\"border\", \"1px solid #fff\");\n            div.css(\"z-index\", 199);\n            div.css(\"padding\", \"5px\");\n            div.css(\"border-radius\", \"5px\");\n            div.css(\"background-color\", \"rgba(0,0,0,0.5\");\n            setTimeout(function() {\n              div.on(\"click\", function(e) {\n                e.stopPropagation();\n              });\n              $(\"body\").on(\"click.tip\", close);\n            });\n            topo.append(div);\n          }\n        });\n      }\n\n      function close(e) {\n        div.children().remove();\n        div.remove();\n        $(\"body\").off(\"click.tip\");\n      }\n      return context;\n    }\n    function promise(fn) {\n      var defer = q.defer();\n      fn(defer.resolve, defer.reject);\n      return defer.promise;\n    }\n    function success(d) {\n      var defer = q.defer();\n      defer.resolve(d);\n      return defer.promise;\n    }\n    function getExpression() {\n      return promise(function(res, rej) {\n        var exp = element.$attr(\"advance/expression\");\n        if (typeof exp == \"object\") {\n          res(exp);\n          return;\n        }\n        $$.runExpression(exp, function(funRes) {\n          if (funRes.code == \"0\") {\n            var fnResult = funRes.data;\n            res(fnResult);\n          } else {\n            rej(funRes.message);\n          }\n        });\n      });\n    }\n    function renderJSON(json) {\n      return promise(function(res, rej) {\n        self.hooks.call(\"viewloaded\", json.cells, function(d) {\n          res(json);\n        });\n      });\n    }\n    function parse(str) {\n      var a;\n      try {\n        a = JSON.parse(str);\n      } catch (e) {\n        return;\n      }\n      return a;\n    }\n    function getViewById(viewId) {\n      return promise(function(res, rej) {\n        self.getViewById(viewId, function(view) {\n          if (view == null) {\n            return res();\n          }\n          res(parse(view.content));\n        });\n      });\n    }\n    function getRapppid() {\n      return promise(function(res, rej) {\n        $$.loadExternalJs([\"rappid-joint\", \"lodash\", \"backbone\"], function(\n          joint\n        ) {\n          res(joint);\n        });\n      });\n    }\n    function noEmpty(d) {\n      return d;\n    }\n    function getKpiValueList(ci, kpi, instancs, mock) {\n      var params = [\n        \"kpi\",\n        {\n          category: \"ci\",\n          isRealTimeData: true,\n          timePeriod: 0,\n          nodeIds: ci,\n          kpiCodes: kpi,\n          startTime: null,\n          endTime: null,\n          timeRange: \"\",\n          statisticType: \"psiot\",\n          condList: [],\n          includeInstance: true\n          //queryInstances: instancs.join(\",\")\n        }\n      ];\n      return mock === true\n        ? ajax.$mock().post(\"kpiDataFlexService.getKpiValueList\", params)\n        : ajax.post(\"kpiDataFlexService.getKpiValueList\", params);\n    }\n    function getNumber(str) {\n      var match = /(?:.*\\:)*([^\\:]*)/.exec(str);\n      if (typeof str == \"string\" || typeof str == \"number\") {\n        return match ? match[1] - 0 : str;\n      }\n    }\n    function getString(str) {\n      var match = /(?:.*\\:)*([^\\:]*)/.exec(str);\n      if (typeof str == \"string\" || typeof str == \"number\") {\n        return match ? match[1] : str;\n      }\n    }\n    function getFill(obj) {\n      var rs = {};\n      for (var i in obj) {\n        rs = obj[i];\n        break;\n      }\n      return rs.fill;\n    }\n    function getType(type) {\n      if (type == \"basic.Rect\") {\n        return \"rect\";\n      } else if (type == \"basic.Circle\") {\n        return \"circle\";\n      }\n    }\n    function removeSpace(str) {\n      var match = /^\\s*([^\\s]+)\\s*$/g.exec(str);\n      return match ? match[1] : \"\";\n    }\n    function equalStr(target, st) {\n      return new RegExp(\"^\\\\s*\" + st + \"\\\\s*$\").test(target);\n    }\n    function getUnit(unit) {\n      if (equalStr(unit, \"NA\") || equalStr(unit, \"wave\")) {\n        return \"\";\n      }\n      if (typeof unit !== \"string\") {\n        return \"\";\n      }\n      return \" \" + removeSpace(unit);\n    }\n    function getTextFill(obj) {\n      return obj[\"text\"] && obj[\"text\"][\"fill\"];\n    }\n    self.$on = function(eventName, callback) {\n      events[eventName] = callback;\n    };\n    self.setResources = function(resources) {\n      self.hooks.tap(\"viewloaded\", function(cells, next) {\n        cells.forEach(function(cell) {\n          var modelId = cell.modelId;\n          modelId =\n            typeof modelId === \"string\"\n              ? /^number\\:(\\d+)$/g.exec(modelId)\n              : null;\n          modelId = modelId ? modelId[1] : null;\n          if (modelId) {\n            cell.nodeId = \"number:\" + resources.id;\n          }\n        });\n        next();\n      });\n    };\n    self.hooks = self.Synchook();\n    self.createDeviceDropList = function(data, pos, config) {\n      var p = persentage || 1;\n      var hitArea = $(\"<div></div>\");\n      var titleArea = $(\"<div></div>\");\n      var popup = $(\"<div></div>\");\n      var config = config || {};\n      var clickFn = config.$attr(\"click\");\n      var titleClickFn = config.$attr(\"titleClick\");\n      $(\"#devicelistscroll\").remove();\n      hitArea.attr(\"id\", \"devicelistscroll\");\n      titleArea.css(\"width\", \"100%\");\n      titleArea.css(\"height\", \"50px\");\n      hitArea.css(\"position\", \"absolute\");\n      hitArea.css(\"z-index\", 199);\n      popup.css(\"padding\", \"2px\");\n      popup.css(\"background-color\", \"#1e415d\");\n      popup.css(\"border\", \"1px solid #000\");\n      popup.css(\"box-shadow\", \"1px 1px 10px 1px rgba(0,0,0,.5)\");\n      popup.css(\"max-height\", \"150px\");\n      popup.css(\"overflow-x\", \"hidden\");\n      popup.css(\"overflow-y\", \"auto\");\n      hitArea.css(\"cursor\", \"pointer\");\n      hitArea.css(\"top\", pos.y / p - (config.y || 30) + \"px\");\n      hitArea.css(\"left\", pos.x / p - (config.x || 50) + \"px\");\n      hitArea.css(\"background-color\", \"rgba(0,0,0,0)\");\n      hitArea.on(\"mouseleave\", function(event) {\n        $(\"#devicelistscroll\").remove();\n      });\n      titleArea.on(\"click\", function(event) {\n        titleClickFn();\n      });\n      var createDom = function(item) {\n        var wrap = $(\"<div></div>\"),\n          label = $(\"<span></span>\"),\n          status = $(\"<div></div>\");\n        wrap.attr(\"id\", \"wrap\");\n        status.css(\"margin-right\", \"5px\");\n        status.css(\"width\", \"10px\");\n        status.css(\"height\", \"10px\");\n        status.css(\"border-radius\", \"50%\");\n        status.css(\"background-color\", self.getAlertColor(item.status));\n        status.css(\"display\", \"inline-block\");\n        wrap.css(\"padding\", \"5px 15px\");\n        label.text(item.label);\n        label.css(\"padding-right\", \"10px\");\n        wrap.append(status);\n        wrap.append(label);\n        wrap.on(\"mouseenter\", function(event) {\n          hitArea.find(\"#wrap\").css(\"background-color\", \"rgba(0,0,0,0)\");\n          wrap.css(\"background-color\", \"rgba(0,0,0,.3)\");\n        });\n        wrap.on(\"mouseleave\", function(event) {\n          wrap.css(\"background-color\", \"rgba(0,0,0,0)\");\n        });\n        wrap.on(\"click\", function(event) {\n          clickFn(item);\n        });\n        /**\n           item.$on(\"statusChanged\", function (node) {\n          status.css(\"background-color\", self.getAlertColor(item.status));\n        });**/\n        return wrap;\n      };\n      for (var i in data) {\n        popup.append(createDom(data[i]));\n      }\n      hitArea.append(titleArea);\n      hitArea.append(popup);\n      topo.prepend(hitArea);\n    };\n    //150 - 235\n    self.createAttrDisp = function(t, data, pos, callback, planeMode, height) {\n      var popup, body, title, wrap;\n      var orderKey = [\n        \"速度有效值\",\n        \"冲击平均值\",\n        \"震动\",\n        \"冲击\",\n        \"速度\",\n        \"温度\",\n        \"电压\",\n        \"电流\"\n      ];\n      height = height || 50;\n      function findIndex(arr, callback) {\n        var i, find;\n        for (i = 0; i < arr.length; i++) {\n          find = callback(arr[i], i);\n          if (find) {\n            return i;\n          }\n        }\n      }\n      function AttrDisp() {\n        popup = $(\"<div></div>\");\n        body = $(\"<div></div>\");\n        title = $(\"<div></div>\");\n        wrap = $(\"<table></table>\");\n        popup.css(\"position\", \"absolute\");\n        popup.css(\"padding\", \"2px\");\n        popup.css(\"background-color\", \"rgba(30,65,93,.9)\");\n        popup.css(\"border\", \"1px solid #000\");\n        popup.css(\"box-shadow\", \"1px 1px 10px 1px rgba(0,0,0,.5)\");\n        popup.css(\"z-index\", 99);\n        if (planeMode) {\n          body.css(\"max-height\", \"300px\");\n          body.css(\"min-width\", \"380px\");\n        } else {\n          data.sort(function(a, b) {\n            var ka =\n              findIndex(orderKey, function(d) {\n                return (a.kpiName || a.label).indexOf(d) != -1;\n              }) || a.label;\n            var kb =\n              findIndex(orderKey, function(d) {\n                return (b.kpiName || b.label).indexOf(d) != -1;\n              }) || b.label;\n            return ka < kb ? -1 : 1;\n          });\n          body.css(\"max-height\", height + \"px\");\n        }\n        body.css(\"overflow-y\", \"auto\");\n        body.css(\"overflow\", \"auto\");\n        title.css(\"text-align\", \"center\");\n        title.css(\"font-weight\", \"bold\");\n        title.css(\"padding\", \"3px\");\n        title.css(\"color\", \"#fff\");\n        title.css(\"background-color\", \"#295375\");\n        title.text(t);\n        popup.css(\"top\", pos.y + \"px\");\n        popup.css(\"left\", pos.x + \"px\");\n        popup.append(title);\n        var createDom = function(item) {\n          var tr = $(\"<tr></tr>\");\n          var td1 = $(\"<td></td>\");\n          var td2 = $(\"<td></td>\");\n          var td3 = $(\"<td></td>\");\n          var td4 = $(\"<td></td>\");\n          var time = item.arisingTime\n            ? useMomentFormat(item.arisingTime, \"yyyy-MM-dd hh:mm:ss\")\n            : \"-\";\n          td1.css(\"padding\", \"5px 6px 1px 6px\");\n          td2.css(\"padding\", \"5px 6px 1px 6px\");\n          td3.css(\"padding\", \"5px 6px 1px 6px\");\n          td4.css(\"padding\", \"5px 6px 1px 6px\");\n          td1.css(\"vertical-align\", \"middle\");\n          td2.css(\"vertical-align\", \"middle\");\n          td3.css(\"vertical-align\", \"middle\");\n          td4.css(\"vertical-align\", \"middle\");\n          var label = $(\"<span></span>\");\n          var button = $('<button id=\"button\" rel=\"popover\" ></button>');\n          if (!planeMode) {\n            button\n              .popover({\n                placement: \"right\",\n                trigger: \"manual\",\n                title: \"上报时间\",\n                container: \"body\",\n                content: function() {\n                  return time;\n                }\n              })\n              .on(\"mouseenter\", mouseenter)\n              .on(\"mouseleave\", mouseleave);\n            label.text(item.label);\n            td1.append(label);\n          } else {\n            var span1 = $(\"<span>\" + item.devName + \"</span>\");\n            var span2 = $(\"<span>\" + item.message + \"</span>\");\n            var span3 = $(\n              \"<span>\" +\n                useMomentFormat(item.arisingTime, \"yyyy-MM-dd hh:mm:ss\") +\n                \"</span>\"\n            );\n            span1.css(\"white-space\", \"normal\");\n            span2.css(\"white-space\", \"normal\");\n            span3.css(\"white-space\", \"normal\");\n            span1.css(\"display\", \"inline-block\");\n            span2.css(\"display\", \"inline-block\");\n            span3.css(\"display\", \"inline-block\");\n            span1.css(\"max-width\", \"100px\");\n            span2.css(\"max-width\", \"220px\");\n            td1.append(span1);\n            td3.append(span2);\n            td4.append(span3);\n          }\n          if (item.valueStr) {\n            button.text(item.valueStr);\n          } else if (item.value != \"-\") {\n            button.text(self.toFix(item.value, 2));\n          } else {\n            button.text(\"-\");\n          }\n          function mouseenter() {\n            if (t) {\n              $(this).popover(\"show\");\n            }\n          }\n          function mouseleave() {\n            $(this).popover(\"hide\");\n          }\n          label.css(\"color\", \"#aaa\");\n          label.css(\"padding-right\", \"10px\");\n          item.updateValue = function(value, unit) {\n            var val =\n              typeof value !== \"undefined\" && value !== null ? value : \"-\";\n            val = typeof val == \"number\" ? self.toFix(val, 2) : val;\n            if (unit != \"NA\" && unit) {\n              val += unit;\n            }\n            button.text(val);\n            this.value = value;\n          };\n          item.updateStatus = function(value) {\n            this.status = value;\n            button.css(\"background-color\", self.getAlertColor(value));\n          };\n          item.updateTime = function(t) {\n            if (t) {\n              time = useMomentFormat(t, \"yyyy-MM-dd hh:mm:ss\");\n            } else {\n              time = \"-\";\n            }\n          };\n          button.css(\"min-width\", \"50px\");\n          button.css(\"text-align\", \"center\");\n          button.css(\"line-height\", \"12px\");\n          button.css(\"border\", 0);\n          button.css(\"color\", \"#fff\");\n          button.css(\"border-radius\", \"10px\");\n          button.css(\"background-color\", self.getAlertColor(item.status));\n          button.on(\"click\", function(event) {\n            $(this).popover(\"destroy\");\n            var param = {\n              id: item.nodeId,\n              sensor: item.instance,\n              dataItems: item.id || item.kpiCode\n            };\n            if (item.arisingTime) {\n              param.enddate = new Date(item.arisingTime).getTime();\n              param.startdate = param.enddate - 2 * 60 * 60 * 1000;\n            }\n            self.navigateTo(\"index\", \"专业分析\", param);\n          });\n          if (item.label) {\n            tr.append(td1);\n          }\n          if (planeMode) {\n            tr.append(td3);\n            tr.append(td4);\n          }\n          tr.append(td2);\n          td2.append(button);\n          return tr;\n        };\n        for (var i in data) {\n          wrap.append(createDom(data[i]));\n        }\n        body.append(wrap);\n        popup.append(body);\n        topo.append(popup);\n      }\n      AttrDisp.prototype.destroy = function() {\n        popup.remove();\n      };\n      AttrDisp.prototype.getData = function() {\n        return data;\n      };\n      return new AttrDisp();\n    };\n    var itemins;\n\n    const CamraDic = {\n      A101: 1021,\n      A201: 1022,\n      A301: 1023,\n      A401: 1024,\n      A102: 1025,\n      A202: 1026,\n      A302: 1027,\n      A402: 1028,\n      A103: 1029,\n      A203: 1030,\n      A303: 1031,\n      A403: 1032,\n      A731: 1033,\n      A831: 1034,\n      A732: 1035,\n      A832: 1036,\n      A833: 1037,\n      A835: 1038\n    };\n    function bind(target, fn) {\n      return function() {\n        return fn.apply(target, arguments);\n      };\n    }\n    class Camera {\n      constructor(ip, path, protocol) {\n        this.ip = ip;\n        this.path = path;\n        this.protocol = protocol;\n      }\n      isValid() {\n        return this.valid;\n      }\n      getURLs() {\n        return this.ports.map(port => {\n          return this.protocol + this.ip + \":\" + port + this.path;\n        });\n      }\n    }\n    class CoalSiloCamera extends Camera {\n      constructor(ip, path, protocol, label) {\n        super(ip, path, protocol);\n        this.valid = new RegExp(\"^煤筒仓$\").test(label);\n        this.ports = [1039, 1040];\n      }\n    }\n    class RobotCamera extends Camera {\n      constructor(ip, path, protocol, label) {\n        super(ip, path, protocol);\n        let match = new RegExp(\"^(A\\\\d+)\\\\D.*$\").exec(label);\n        this.index = match ? match[1] : null;\n        this.valid = !!match;\n        if (!this.valid) {\n          return;\n        }\n        this.ports = [CamraDic[this.index]];\n      }\n    }\n    class SetCamera {\n      constructor(wrap, ip, path) {\n        this.ip = ip;\n        this.path = path;\n        this.wrap = wrap;\n        this.protocol = \"http://\";\n        this.init();\n      }\n      init() {\n        this.getResource().then(resource => {\n          this.cam = new CoalSiloCamera(\n            this.ip,\n            this.path,\n            this.protocol,\n            resource.label\n          );\n          if (this.cam.isValid()) {\n            this.createDom();\n            return;\n          }\n          this.cam = new RobotCamera(\n            this.ip,\n            this.path,\n            this.protocol,\n            resource.label\n          );\n          if (this.cam.isValid()) {\n            this.createDom();\n            return;\n          }\n          this.cam = null;\n        });\n      }\n      getResource() {\n        return psTreeData($state.params.id).getState();\n      }\n      createDom() {\n        let div = document.createElement(\"button\");\n        div.innerText = \"视频\";\n        div.style.position = \"absolute\";\n        div.style.top = \"20px\";\n        div.style.right = \"20px\";\n        div.style.zIndex = 999;\n        div.setAttribute(\"class\", \"btn btn-primary\");\n        div.onclick = bind(this, this.onclick);\n        this.wrap.prepend(div);\n      }\n      onclick() {\n        cms2.modal({\n          title: \"视频监控\",\n          directive: \"dialog-video-cam\",\n          width: \"60%\",\n          scope: scope,\n          params: {\n            mode: \"videoCam\",\n            url: this.cam.getURLs()\n          }\n        });\n      }\n    }\n\n    self.addCam = function() {\n      let ip = \"10.3.150.39\",\n        path = \"/test\",\n        camera = new SetCamera(topo, ip, path);\n    };\n    self.createCurrentStatus = function(txt, pos, status, abs) {\n      var wrap = topo.find(\"div#cStatus\");\n      var title = $(\"<div></div>\");\n      var addOn = $(\"<div></div>\");\n      var circle = $(\"<div></div>\");\n      var ins;\n      wrap = wrap.size() ? wrap : $('<div id=\"cStatus\"></div>');\n      wrap.children().remove();\n      function wholeClick() {\n        $(\"body\").off(\"click\");\n        ins.destroy();\n        if (itemins) {\n          itemins.destroy();\n        }\n      }\n\n      function clickFn(event) {\n        var p = persentage || 1;\n        var data = self.getValue(\"device/alerts\");\n        if (ins) {\n          ins.destroy();\n        }\n        $(\"body\").off(\"click\");\n        if (data) {\n          if (data.length > 0) {\n            ins = self.createAttrDisp(\n              \"告警信息\",\n              data,\n              {\n                x: pos.x / p - 200,\n                y: pos.y / p + 15\n              },\n              function(item) {\n                var nodeId = item.nodeId;\n                var resource;\n                var ROLE = self.getValue(\"global/ROLE\");\n                self.getDomainAreaLineTree_alertStatus(function(domaintree) {\n                  domaintree.traverse(function(node) {\n                    if (node.id == nodeId) {\n                      getResourceById(node.id).then(function(resource) {\n                        return ajax\n                          .post(getAttrsByModelId, resource.modelId)\n                          .then(function(attrs) {\n                            extend(node, resource);\n                            var sub,\n                              accessConfigs =\n                                node.physicalConfig.accessConfigs || {},\n                              sensor =\n                                accessConfigs.find(function(n) {\n                                  return n.instance === item.instance;\n                                }) || null;\n                            self.setParameter(\"id\", node.id);\n                            self.setValue(\"global/alertTime\", item.arisingTime);\n                            self.setValue(\"global/resource\", node);\n                            self.setValue(\"global/sensor\", sensor);\n                            self.setValue(\"global/instance\", item.instance);\n                            self.setParameter(\"sensorId\", sensor.dataItemId);\n                            if (item.specialty == \"Z\") {\n                              sub = 0;\n                            } else if (item.specialty == \"D\") {\n                              sub = 1;\n                            } else {\n                              sub = 7;\n                            }\n                            self.navigateToTab(\"analysis\", sub, 1);\n                          });\n                      });\n                    }\n                  });\n                });\n              },\n              true\n            );\n            setTimeout(function() {\n              $(\"body\").on(\"click\", wholeClick);\n            });\n          } else {\n            self.growl(\"暂无未处理的告警信息！\");\n          }\n        }\n      }\n      function currentStatus() {\n        wrap.css(\"position\", \"absolute\");\n        var p = abs ? 1 : persentage || 1;\n        wrap.css(\"cursor\", \"pointer\");\n        wrap.css(\"top\", pos.y + \"px\");\n        wrap.css(\"left\", pos.x + \"px\");\n        title.text(txt);\n        title.css(\"padding-right\", \"6px\");\n        title.css(\"font-weight\", \"bold\");\n        title.css(\"line-height\", \"14px\");\n        title.css(\"display\", \"inline-block\");\n        title.css(\"color\", \"#fff\");\n        addOn.css(\"display\", \"inline-block\");\n        circle.css(\"display\", \"block\");\n        circle.css(\"position\", \"absolute\");\n        circle.css(\"top\", \"1px\");\n        circle.css(\"width\", \"14px\");\n        circle.css(\"height\", \"14px\");\n        circle.css(\"border-radius\", \"50%\");\n        circle.css(\"background-color\", self.getAlertColor(status));\n        circle.css(\"box-shadow\", \"1px 1px 10px 1px rgba(0,0,0,1)\");\n        if (status > 0) {\n          title.css(\"text-decoration\", \"underline\");\n          wrap.off(\"click\");\n          wrap.on(\"click\", clickFn);\n        }\n        addOn.append(circle);\n        wrap.append(title);\n        wrap.append(addOn);\n        topo.append(wrap);\n        wrap.css(\"marginLeft\", -(14 + wrap.width()) / 2);\n      }\n      currentStatus.prototype.setAlarmStatus = function(status) {\n        circle.css(\"background-color\", self.getAlertColor(status));\n        if (status > 0) {\n          title.css(\"text-decoration\", \"underline\");\n          wrap.off(\"click\");\n          wrap.on(\"click\", clickFn);\n        }\n      };\n      return new currentStatus();\n    };\n\n    self.createCurrentStatusByItem = function(id, pos) {\n      function wholeClick() {\n        $(\"body\").off(\"click\");\n        if (itemins) itemins.destroy();\n      }\n\n      function clickFn(event) {\n        var p = persentage || 1;\n        var data = self.getValue(\"device/alerts\");\n        if (itemins) {\n          itemins.destroy();\n        }\n        data = data.filter(function(elm) {\n          return elm.nodeId == id;\n        });\n        $(\"body\").off(\"click\");\n        if (data.length > 0) {\n          itemins = self.createAttrDisp(\n            \"告警信息\",\n            data,\n            {\n              x: pos.x / p,\n              y: pos.y / p\n            },\n            function(item) {\n              var nodeId = item.nodeId;\n              var resource;\n              var ROLE = self.getValue(\"global/ROLE\");\n              self.getDomainAreaLineTree_alertStatus(function(domaintree) {\n                domaintree.traverse(function(node) {\n                  var sub;\n                  if (node.id == nodeId) {\n                    self.setValue(\"global/resource\", node);\n                    self.setValue(\"global/instance\", item.instance);\n                    self.setValue(\"global/sensor\", item);\n                    self.setValue(\"global/alertTime\", item.arisingTime);\n                    self.setParameter(\"sensorId\", item.id);\n                    if (node.specialty == \"Z\") {\n                      sub = 0;\n                    } else if (node.specialty == \"D\") {\n                      sub = 1;\n                    } else {\n                      sub = 7;\n                    }\n                    if (ROLE == 1) {\n                      self.navigateTo(\n                        \"index\",\n                        {\n                          main: 2,\n                          sub: sub,\n                          backHistory: 1\n                        },\n                        \"self\"\n                      );\n                    } else if (ROLE == 2) {\n                      self.navigateTo(\n                        \"index\",\n                        {\n                          main: 2,\n                          sub: sub,\n                          backHistory: 1\n                        },\n                        \"self\"\n                      );\n                    } else if (ROLE == 3) {\n                      self.navigateTo(\n                        \"index\",\n                        {\n                          main: 2,\n                          sub: sub,\n                          backHistory: 1\n                        },\n                        \"self\"\n                      );\n                    } else {\n                      self.growl(\"此角色无法显示特征曲线\");\n                    }\n                  }\n                });\n              });\n            },\n            true\n          );\n          setTimeout(function() {\n            $(\"body\").on(\"click\", wholeClick);\n          });\n        } else {\n          self.growl(\"此设备暂无未处理的告警信息！\");\n        }\n      }\n      clickFn();\n    };\n    self.createMarker = function(title, callback) {\n      $$.loadExternalJs([\"toolkit/configure/marker\"], function(threeDbar) {\n        var ins = threeDbar.init(svgId, {\n          title: title\n        });\n        callback(ins);\n      });\n    };\n    self.createAlarm = function(title, callback) {\n      $$.loadExternalJs([\"toolkit/configure/alarm\"], function(threeDbar) {\n        var ins = threeDbar.init(svgId, {\n          title: title\n        });\n        callback(ins);\n      });\n    };\n    self.createAlarmSmall = function(title, callback) {\n      $$.loadExternalJs([\"toolkit/configure/alarm\"], function(threeDbar) {\n        var ins = threeDbar.init(svgId, {\n          title: title,\n          smallMode: true\n        });\n        callback(ins);\n      });\n    };\n    self.create3Dbar = function(title, callback) {\n      $$.loadExternalJs([\"toolkit/configure/3dbarchart\"], function(threeDbar) {\n        var ins = threeDbar.init(svgId, {\n          title: title\n        });\n        //ins.setPos(cell.position());\n        //ins.setValue(0);\n        callback(ins);\n      });\n    };\n\n    //获得缩放的点位\n    self.getPersentageSite = function(position) {\n      var p = persentage || 1;\n      var tempPosition = { x: 0, y: 0 };\n      tempPosition.x = position.x / p;\n      tempPosition.y = position.y / p;\n      return tempPosition;\n    };\n    getExpression().then(function(expression) {\n      var clickEvent = expression.$attr(\"on/click\"),\n        initEvent = expression.$attr(\"on/init\"),\n        emptyEvent = expression.$attr(\"on/empty\"),\n        completeEvent = expression.$attr(\"on/complete\");\n      function openCellTools(cellView) {\n        if (previewMode) {\n          var cell = cellView.model || cellView,\n            modelId = getNumber(cell.get(\"modelId\")),\n            nodeId = getNumber(cell.get(\"nodeId\")),\n            kpiId = getNumber(cell.get(\"kpiId\")),\n            subViewId = getNumber(cell.get(\"subViewId\")),\n            text = cell.attr(\"text\");\n          if (cell.get(\"valueConfig\")) {\n            var isSend = false; //是否发送过\n            var dirModel = resourceUIService.rootModelsDic[modelId];\n            if (cell.get(\"valueConfig\") && dirModel) {\n              cell.get(\"valueConfig\").forEach(function(valueLvevel) {\n                if (\n                  valueLvevel.stateDisplay &&\n                  valueLvevel.valueDirective &&\n                  valueLvevel.valueDirectiveAttr\n                ) {\n                  isSend = true;\n                  dirModel.directives.forEach(function(dirObj) {\n                    if (valueLvevel.valueDirective == dirObj.id) {\n                      dirObj.value = valueLvevel.valueDirectiveAttr;\n                      self.sendItemDir(dirObj, nodeId);\n                    }\n                  });\n                }\n              });\n              if (\n                !isSend &&\n                cell.get(\"valueConfig\")[0].valueDirective &&\n                cell.get(\"valueConfig\")[0].valueDirectiveAttr\n              ) {\n                dirModel.directives.forEach(function(dirObj) {\n                  if (cell.get(\"valueConfig\")[0].valueDirective == dirObj.id) {\n                    dirObj.value = cell.get(\n                      \"valueConfig\"\n                    )[0].valueDirectiveAttr;\n                    self.sendItemDir(dirObj, nodeId);\n                  }\n                });\n              }\n            }\n            return;\n          }\n          if (typeof clickEvent == \"function\") {\n            clickEvent({\n              cellView: cell,\n              ui: {\n                modelId: modelId,\n                resourceId: nodeId,\n                kpiId: kpiId,\n                subViewId: subViewId\n              },\n              target: self,\n              self: self,\n              global: global,\n              tools: elemData\n            });\n          }\n        }\n      }\n      function getCellsMap(cells) {\n        var rs = {};\n        cells.forEach(function(cell) {\n          var nodeId = getNumber(getAttributes(cell, \"nodeId\")) || 0,\n            kpiId = getNumber(getAttributes(cell, \"kpiId\")) || 0;\n          rs[nodeId + \"_\" + kpiId] = rs[nodeId + \"_\" + kpiId] || [];\n          rs[nodeId + \"_\" + kpiId].push(cell);\n          rs[nodeId + \"_\" + 999999] = rs[nodeId + \"_\" + 999999] || [];\n          rs[nodeId + \"_\" + 999999].push(cell);\n          rs[nodeId + \"_\" + 999998] = rs[nodeId + \"_\" + 999998] || [];\n          rs[nodeId + \"_\" + 999998].push(cell);\n        });\n        return rs;\n      }\n      function getAttributes(obj, attr) {\n        return obj ? obj.attributes[attr] : null;\n      }\n      function getKpi(cell) {\n        return scope.$root.allDataItemsLoaded.then(function() {\n          var cellModelId = getNumber(getAttributes(cell, \"modelId\")),\n            cellKpiId = getNumber(getAttributes(cell, \"kpiId\"));\n          return success(\n            resourceUIService.rootModelsDic[cellModelId].kpiDic[cellKpiId]\n          );\n        });\n      }\n      function makeFunction(str) {\n        return function(value) {\n          if (typeof str !== \"string\") {\n            return;\n          }\n          try {\n            var fn = new Function(\"color\", \"(\" + str + \")( color )\"),\n              rs = fn(value);\n          } catch (e) {\n            console.error(e);\n            return;\n          }\n          return rs;\n        };\n      }\n\n      function sortBySeries(kpisMap) {\n        kpisMap = kpisMap || {};\n        return function(a, b) {\n          var item1 = kpisMap[a.dataItemId] || {},\n            item2 = kpisMap[b.dataItemId] || {},\n            s1 = item1.serial || 0,\n            s2 = item2.serial || 0;\n          return s1 - s2;\n        };\n      }\n\n      function getMeasurePointData(queue) {\n        var item,\n          rs = [];\n        queue = isArray(queue) ? queue : [queue];\n        function allObj(obj) {\n          var arr = [],\n            i;\n          for (i in obj) {\n            if (typeof obj[i] !== \"object\") {\n              return false;\n            }\n            arr.push(obj[i]);\n          }\n          return arr;\n        }\n        while ((item = queue.shift())) {\n          if (isArray(item)) {\n            [].push.apply(queue, item);\n          } else {\n            var arr = allObj(item);\n            if (arr) {\n              [].push.apply(queue, arr);\n            } else {\n              rs.push(item);\n            }\n          }\n        }\n        return rs;\n      }\n\n      function mapKpi(kpi) {\n        return {\n          id: kpi.dataItemId,\n          instance: kpi.instance,\n          label: kpi.kpiName,\n          value: \"-\",\n          status: 0,\n          arisingTime: kpi.arisingTime\n        };\n      }\n      function mapDataItem(nodeId) {\n        return function(kpi) {\n          return {\n            nodeId: nodeId,\n            id: kpi.dataItemId,\n            instance: kpi.instance,\n            value: \"-\",\n            status: 0,\n            arisingTime: kpi.arisingTime\n          };\n        };\n      }\n      function getAllUnits() {\n        return resourceUIService.unitLoader();\n      }\n      function getResourceById(id) {\n        resourceMap[id] =\n          resourceMap[id] ||\n          (function(defer) {\n            self.getResourceById(id, function(res) {\n              defer.resolve(res);\n            });\n            return defer.promise;\n          })(q.defer());\n        return resourceMap[id];\n      }\n      function getResourceByIds(ids) {\n        var proms,\n          rs = [];\n        function recursive(ids) {\n          var id = ids.shift();\n          if (id) {\n            return getResourceById(id).then(function(n) {\n              rs.push(n);\n              return recursive(ids);\n            });\n          } else {\n            return success(rs);\n          }\n        }\n        return recursive(ids.slice());\n      }\n      function getKpisByModelIds(ids) {\n        return resourceUIService.modelLoader().then(function(rootModelsDic) {\n          ids.forEach(function(d) {\n            kpisMap[d] = rootModelsDic[d] && rootModelsDic[d][\"kpiDic\"];\n          });\n          return success(kpisMap);\n        });\n      }\n      function getKpisByModelId(id) {\n        return resourceUIService.modelLoader().then(function(rootModelsDic) {\n          kpisMap[id] = rootModelsDic[id] && rootModelsDic[id][\"kpiDic\"];\n          return success(kpisMap);\n        });\n      }\n\n      self.render = function(inputJson) {\n        if (!inputJson && !viewId) {\n          return emptyEvent();\n        }\n        (inputJson\n          ? renderJSON(inputJson)\n          : getViewById(viewId).then(function(json) {\n              return renderJSON(json);\n            })\n        ).then(function(json) {\n          return getRapppid().then(function(joint) {\n            var graph = new joint.dia.Graph(),\n              config = makeConfig(json),\n              paper = new joint.dia.Paper(config),\n              paperScroller = new joint.ui.PaperScroller({\n                el: wrap,\n                paper: paper,\n                autoResizePaper: false,\n                padding: 0\n              }),\n              PatternLinkView = {\n                //渲染的模板\n                patternMarkup: [\n                  '<pattern id=\"pattern-<%= id %>\" patternUnits=\"userSpaceOnUse\">',\n                  '<image xlink:href=\"\"/>',\n                  \"</pattern>\"\n                ].join(\"\"),\n                initialize: function() {\n                  joint.dia.LinkView.prototype.initialize.apply(\n                    this,\n                    arguments\n                  );\n                  _.bindAll(this, \"fillWithPattern\");\n                },\n                render: function() {\n                  // 调用父节点的render方法\n                  joint.dia.LinkView.prototype.render.apply(this, arguments);\n                  // 建立监听\n                  this.listenTo(\n                    this.model,\n                    \"change:pattern change:patternColor\",\n                    this.update\n                  );\n                  return this;\n                },\n                remove: function() {\n                  // 确保我们停止了正在进行的模式更新。\n                  joint.util.cancelFrame(this.frameId);\n                  joint.dia.LinkView.prototype.remove.apply(this, arguments);\n                  this.clearPattern();\n                },\n                clearPattern: function() {\n                  if (this.pattern) {\n                    // 从DOM中删除模式。\n                    this.pattern.remove();\n                    this.pattern = null;\n                  }\n                },\n                update: function() {\n                  joint.dia.LinkView.prototype.update.apply(this, arguments);\n\n                  if (this.model && !this.model.get(\"pattern\")) {\n                    return this;\n                  }\n\n                  this.clearPattern();\n                  // 确保pattern不存在\n                  if (!this.pattern) {\n                    // 创建模式和图像元素。\n                    this.pattern = joint.V(\n                      _.template(this.patternMarkup)({\n                        id: this.id\n                      })\n                    );\n                    // 缓存图像元素以便更快地访问。\n                    this.patternImage = this.pattern.findOne(\"image\");\n\n                    // 将模式附加到pager的defs中。\n                    joint\n                      .V(this.paper.svg)\n                      .defs()\n                      .append(this.pattern);\n\n                    // 通知 '.connection' 路径使用pattern渲染\n                    var connection = joint\n                      .V(this.el)\n                      .findOne(\".connection\")\n                      .attr({\n                        stroke: \"url(#pattern-\" + this.id + \")\"\n                      });\n\n                    // 缓存原来的stroke-width\n                    this.strokeWidth = connection.attr(\"stroke-width\") || 1;\n                  }\n\n                  // 确保我们停止了正在进行的模式更新。\n                  joint.util.cancelFrame(this.frameId);\n\n                  this.frameId = joint.util.nextFrame(this.fillWithPattern);\n\n                  return this;\n                },\n                fillWithPattern: function() {\n                  var strokeWidth = this.strokeWidth;\n                  var bbox = joint.g\n                    .rect(joint.V(this.el).bbox(true))\n                    .moveAndExpand({\n                      x: -strokeWidth,\n                      y: -strokeWidth,\n                      width: 2 * strokeWidth,\n                      height: 2 * strokeWidth\n                    });\n                  var points = [].concat(\n                    this.sourcePoint,\n                    this.route,\n                    this.targetPoint\n                  );\n                  points = _.map(points, function(point) {\n                    return joint.g.point(point.x - bbox.x, point.y - bbox.y);\n                  });\n                  var canvas = document.createElement(\"canvas\");\n                  canvas.width = bbox.width;\n                  canvas.height = bbox.height;\n                  var ctx = canvas.getContext(\"2d\");\n                  ctx.lineWidth = strokeWidth;\n                  ctx.lineJoin = \"round\"; //lineJoin 属性设置或返回所创建边角的类型，当两条线交汇时。bevel/round/miter。\n                  ctx.lineCap = \"round\"; //lineCap 属性设置或返回线条末端线帽的样式。butt/round/square\n                  for (\n                    var i = 0, pointsCount = points.length - 1;\n                    i < pointsCount;\n                    i++\n                  ) {\n                    ctx.save();\n                    var gradientPoints = this.gradientPoints(\n                      points[i],\n                      points[i + 1],\n                      strokeWidth\n                    );\n                    var gradient = ctx.createLinearGradient.apply(\n                      ctx,\n                      gradientPoints\n                    );\n\n                    this.drawPattern.call(\n                      this,\n                      ctx,\n                      points[i],\n                      points[i + 1],\n                      strokeWidth,\n                      gradient\n                    );\n\n                    ctx.restore();\n                  }\n\n                  // generate data URI from the canvas\n                  var dataUri = canvas.toDataURL(\"image/png\");\n\n                  // update the pattern image and the dimensions\n                  this.pattern.attr(bbox);\n                  this.patternImage.attr({\n                    width: bbox.width,\n                    height: bbox.height,\n                    \"xlink:href\": dataUri\n                  });\n                },\n                // finds a gradient with perpendicular direction to a link segment\n                gradientPoints: function(from, to, width) {\n                  var angle = joint.g.toRad(from.theta(to) - 90);\n                  var center = joint.g.line(from, to).midpoint();\n                  var start = joint.g.point.fromPolar(width / 2, angle, center);\n                  var end = joint.g.point.fromPolar(\n                    width / 2,\n                    Math.PI + angle,\n                    center\n                  );\n                  return [start.x, start.y, end.x, end.y];\n                },\n                // A drawing function executed for all links segments.\n                drawPattern: function(ctx, from, to, width, gradient) {\n                  var innerWidth = width - 4;\n                  var outerWidth = width;\n                  var buttFrom = joint.g.point(from).move(to, -outerWidth / 2);\n                  var buttTo = joint.g.point(to).move(from, -outerWidth / 2);\n                  var lineColor = \"blue\";\n                  if (\n                    this.model.get(\"attrs\") &&\n                    this.model.get(\"attrs\")[\".connection\"]\n                  ) {\n                    lineColor = this.model.get(\"attrs\")[\".connection\"][\"stroke\"]\n                      ? this.model.get(\"attrs\")[\".connection\"][\"stroke\"]\n                      : lineColor;\n                  }\n                  var patternColor = \"#ffffff\";\n                  if (this.model.get(\"patternColor\")) {\n                    patternColor = this.model.get(\"patternColor\");\n                  }\n                  gradient.addColorStop(0.0, lineColor);\n                  gradient.addColorStop(0.5, patternColor);\n                  gradient.addColorStop(1.0, lineColor);\n\n                  ctx.beginPath();\n                  ctx.lineWidth = innerWidth;\n                  ctx.strokeStyle = gradient;\n                  ctx.moveTo(from.x, from.y);\n\n                  ctx.lineTo(to.x, to.y);\n                  ctx.stroke();\n                  ctx.closePath();\n                }\n              };\n            function setLevel(cell, value) {\n              var range = cell.attributes.range;\n              if (range) {\n                range = eval(range);\n              }\n              var persent = (value - range[0]) / (range[1] - range[0]);\n              cell.prop(\"attrs/text/text\", \"\");\n              cell.transition(\n                \"attrs/rect\",\n                {\n                  transform: \"translate(0,0)\",\n                  height: 60 * persent\n                },\n                {\n                  delay: 0,\n                  duration: 1000,\n                  valueFunction: function(start, end) {\n                    return function(time) {\n                      var height =\n                        start[\"height\"] +\n                        (end[\"height\"] - start[\"height\"]) * time;\n                      var all = 0;\n                      return {\n                        transform: \"translate(0,\" + (60 - height) + \")\",\n                        height: height\n                      };\n                    };\n                  }\n                }\n              );\n            }\n            function setOpenAngle(cell, value, element) {\n              var range = cell.attributes.range;\n              var id = cell.id;\n              openAngles[id].setValue(value);\n            }\n            function pathAnimate(cell, value, type, kpiRange) {\n              if (!kpiRange) kpiRange = [0, 1];\n              var p = (value - kpiRange[0]) / (kpiRange[1] - kpiRange[0]);\n              if (p < 0) p = -p;\n              if (p > 1) p = 1;\n              if (!cell.linkDomBox) {\n                var pathlink = linksDic[\"source:\" + cell.id]; //渲染的link\n                if (!pathlink) pathlink = linksDic[\"target:\" + cell.id];\n                if (!pathlink) return;\n                cell.linkDom = jQuery(\"[model-id=\" + pathlink.id + \"]\")[0]; //定义的link\n                cell.linkDomBox = cell.linkDom.getBoundingClientRect();\n              }\n              var movetox = -1;\n              var movetoy = -1;\n              if (type == \"number:1\") {\n                //X轴正方向\n                if (cell.offsetx == undefined) {\n                  cell.offsetx = cell.get(\"position\").x;\n                }\n                movetox = cell.offsetx + (cell.linkDomBox.width * p) / scale;\n              } else if (type == \"number:2\") {\n                //x轴负方向\n                if (cell.offsetx == undefined) {\n                  cell.offsetx = cell.get(\"position\").x;\n                }\n                movetox = cell.offsetx - (cell.linkDomBox.width * p) / scale;\n              } else if (type == \"number:3\") {\n                //y轴正方向\n                if (cell.offsety == undefined) {\n                  cell.offsety = cell.get(\"position\").y;\n                }\n                movetoy = cell.offsety + (cell.linkDomBox.height * p) / scale;\n              } else if (type == \"number:4\") {\n                //y轴负方向\n                if (cell.offsety == undefined) {\n                  cell.offsety = cell.get(\"position\").y;\n                }\n                movetoy = cell.offsety - (cell.linkDomBox.height * p) / scale;\n              } else if (type == \"number:5\") {\n                var connection = cell.linkDom.firstChild;\n                var cellDom = jQuery(\"[model-id=\" + cell.id + \"]\")[0];\n                var attrs = {\n                  \"xlink:href\": \"#\" + cellDom.firstChild.attributes[\"id\"].value,\n                  path: connection.attributes[\"d\"].value,\n                  dur: \"5s\",\n                  begin: \"1s\",\n                  rotate: \"auto\"\n                };\n                var animateMotion = joint.V(\"animateMotion\", attrs);\n                cellDom.firstChild.append(animateMotion.node);\n              }\n              if (movetox > -1) {\n                cell.transition(\"position/x\", movetox, {\n                  delay: 100,\n                  duration: 1000,\n                  timingFunction: joint.util.timing.inout,\n                  valueFunction: function(a, b) {\n                    return function(t) {\n                      return a + (b - a) * t;\n                    };\n                  }\n                });\n              }\n              if (movetoy > -1) {\n                cell.transition(\"position/y\", movetoy, {\n                  delay: 100,\n                  duration: 1000,\n                  timingFunction: joint.util.timing.inout,\n                  valueFunction: function(a, b) {\n                    return function(t) {\n                      return a + (b - a) * t;\n                    };\n                  }\n                });\n              }\n            }\n            function fill(cell, color) {\n              var type = getType(getAttributes(cell, \"type\"));\n              cell.transition(\"attrs/\" + type + \"/fill\", color, {\n                delay: 300,\n                duration: 500,\n                valueFunction: joint.util.interpolate.hexColor\n              });\n            }\n            function fillColor(cell, type, color, state, color2) {\n              var stateId = cell.get(\"stateId\");\n              if (stateId) {\n                if (state < 1) state = 0;\n                cell.state = state;\n                var colorAry = [\n                  color,\n                  \"#25bce7\",\n                  \"#e1cd0a\",\n                  \"#ed9700\",\n                  \"#e7675d\"\n                ];\n                var colorAry2 = [\n                  color2,\n                  \"#25bce7\",\n                  \"#e1cd0a\",\n                  \"#ed9700\",\n                  \"#e7675d\"\n                ];\n                if (stateId == \"number:1\" || stateId == \"number:3\") {\n                  if (type && colorAry[state]) {\n                    cell.transition(\n                      \"attrs/\" + type + \"/fill\",\n                      colorAry[state],\n                      {\n                        delay: 300,\n                        duration: 500,\n                        valueFunction: joint.util.interpolate.hexColor\n                      }\n                    );\n                  }\n                }\n                if (\n                  (stateId == \"number:2\" || stateId == \"number:3\") &&\n                  colorAry2[state]\n                ) {\n                  cell.transition(\"attrs/text/fill\", colorAry2[state], {\n                    delay: 300,\n                    duration: 500,\n                    valueFunction: joint.util.interpolate.hexColor\n                  });\n                }\n              }\n            }\n            function breathFlash(cell, type, color, state, opacityState) {\n              var stateId = cell.get(\"stateId\");\n              var flash = function(el) {\n                var defaultOpacity = opacityState ? 1 : el.opacity;\n                el.transition(\"attrs/\" + type + \"/opacity\", defaultOpacity, {\n                  delay: 0,\n                  duration: 3000,\n                  timingFunction: joint.util.timing.inout,\n                  valueFunction: function(a, b) {\n                    return function(t) {\n                      var o =\n                        a +\n                        b *\n                          (defaultOpacity -\n                            Math.abs(defaultOpacity - 2 * defaultOpacity * t));\n                      return Number(o.toFixed(2));\n                    };\n                  }\n                });\n              };\n\n              if (stateId) {\n                if (state < 0) state = 0;\n                var colorAry = [\n                  color,\n                  \"#25bce7\",\n                  \"#e1cd0a\",\n                  \"#ed9700\",\n                  \"#e7675d\"\n                ];\n                if (stateId == \"number:2\") {\n                  type = \"text\";\n                }\n                if (type) {\n                  if (!cell.opacity) {\n                    cell.opacity = jQuery.isNumeric(\n                      cell.prop(\"attrs/\" + type + \"/opacity\")\n                    )\n                      ? cell.prop(\"attrs/\" + type + \"/opacity\")\n                      : 1;\n                  }\n                  cell.state = state;\n                  cell.prop(\"attrs/\" + type + \"/opacity\", 0.1);\n                  cell.prop(\"attrs/\" + type + \"/fill\", colorAry[state]);\n                  if (cell.state > 0) {\n                    if (\n                      _.contains(\n                        cell.getTransitions(),\n                        \"attrs/\" + type + \"/opacity\"\n                      )\n                    )\n                      return;\n                    cell.on(\"transition:end\", function(el, path) {\n                      if (el.state > 0) {\n                        flash(el);\n                      } else {\n                        el.off(\"transition:end\");\n                        el.prop(\"attrs/\" + type + \"/opacity\", el.opacity);\n                      }\n                    });\n                    flash(cell);\n                  } else {\n                    cell.prop(\"attrs/\" + type + \"/opacity\", cell.opacity);\n                  }\n                }\n              }\n            }\n            function bubbleFlash(cell, type, color, state, opacityState) {\n              var stateId = cell.get(\"stateId\");\n              var flash = function() {\n                cell.prop(\"attrs/\" + type + \"/r\", 0);\n                cell.prop(\n                  \"attrs/\" + type + \"/opacity\",\n                  opacityState ? 1 : cell.opacity\n                );\n                cell.transition(\n                  \"attrs/\" + type,\n                  {\n                    r: cell.r,\n                    opacity: 0\n                  },\n                  {\n                    delay: 0,\n                    duration: 1500,\n                    valueFunction: function(start, end) {\n                      return function(time) {\n                        return {\n                          r: start[\"r\"] + (end[\"r\"] - start[\"r\"]) * time,\n                          opacity: start[\"opacity\"] - start[\"opacity\"] * time\n                        };\n                      };\n                    }\n                  }\n                );\n              };\n              if (stateId) {\n                if (state < 0) state = 0;\n                var colorAry = [\n                  color,\n                  \"#25bce7\",\n                  \"#e1cd0a\",\n                  \"#ed9700\",\n                  \"#e7675d\"\n                ];\n                if (stateId == \"number:2\") {\n                  type = \"text\";\n                }\n                if (type) {\n                  if (!cell.opacity) {\n                    cell.opacity = jQuery.isNumeric(\n                      cell.prop(\"attrs/\" + type + \"/opacity\")\n                    )\n                      ? cell.prop(\"attrs/\" + type + \"/opacity\")\n                      : 1;\n                    cell.r = cell.prop(\"attrs/\" + type + \"/r\");\n                    cell.prop(\n                      \"attrs/\" + type + \"/opacity\",\n                      opacityState ? 1 : cell.opacity\n                    );\n                  }\n                  cell.state = state;\n                  cell.prop(\"attrs/\" + type + \"/fill\", colorAry[state]);\n                  if (cell.state > 0) {\n                    if (_.contains(cell.getTransitions(), \"attrs/\" + type))\n                      return;\n                    cell.on(\"transition:end\", function(el) {\n                      if (el.state > 0) {\n                        flash();\n                      } else {\n                        cell.prop(\"attrs/\" + type + \"/opacity\", cell.opacity);\n                        cell.prop(\"attrs/\" + type + \"/r\", cell.r);\n                      }\n                    });\n                    flash();\n                  } else {\n                    cell.prop(\"attrs/\" + type + \"/opacity\", cell.opacity);\n                    cell.prop(\"attrs/\" + type + \"/r\", cell.r);\n                  }\n                }\n              }\n            }\n            function changeIconAndText(cell, state, type) {\n              if (!type) type = \"alertConfig\";\n              if (type == \"alertConfig\") {\n                var alertIcon = cell.get(\"alertConfig\");\n                if (alertIcon) {\n                  if (state < 1) state = 0;\n                  var alertConfig = cell.get(type);\n                  alertConfig.forEach(function(item) {\n                    if (item.id == state) {\n                      cell.prop(\"attrs/text/text\", item.alertText || \"\");\n                      if (item.alertIcon)\n                        cell.prop(\"attrs/image/xlink:href\", item.alertIcon);\n                    }\n                  });\n                }\n              } else if (type == \"valueConfig\") {\n                var valueConfig = cell.get(type);\n                valueConfig.forEach(function(item) {\n                  item.stateDisplay = false;\n                  if (item.valueText == state) {\n                    item.stateDisplay = true;\n                    if (item.valueText)\n                      cell.prop(\"attrs/text/text\", item.valueText);\n                    if (item.valueIcon)\n                      cell.prop(\"attrs/image/xlink:href\", item.valueIcon);\n                  }\n                });\n              }\n            }\n            function makeConfig(json) {\n              var width = topo.width(),\n                w = json.width,\n                h = json.height,\n                portion = h / w,\n                height = width * portion;\n              /** keep consequence with old version **/\n              persentage = w / width;\n              /** keep consequence with old version **/\n              return {\n                width: width,\n                height: height,\n                model: graph,\n                interactive: false,\n                scale: width / w,\n                perpendicularLinks: true,\n                gridSize: 0,\n                markAvailable: true,\n                linkConnectionPoint: joint.util.shapePerimeterConnectionPoint,\n                defaultLink: new joint.dia.Link({\n                  attrs: {\n                    \".marker-source\": {\n                      d: \"M 10 0 L 0 5 L 10 10 z\",\n                      transform: \"scale(0.001)\"\n                    },\n                    \".marker-target\": {\n                      d: \"M 10 0 L 0 5 L 10 10 z\"\n                    },\n                    \".connection\": {\n                      stroke: \"black\"\n                    }\n                  }\n                }),\n                linkView: joint.dia.LinkView.extend(PatternLinkView)\n              };\n            }\n            function removeSame(a, b) {\n              a.indexOf(b) == -1 ? a.push(b) : null;\n              return a;\n            }\n            function makeValueEval(rangeObj) {\n              var json = parse(rangeObj);\n              if (isArray(json) || typeof json !== \"object\" || json === null) {\n                return function removeSingnal(val) {\n                  if (typeof val === \"undefined\" || val === null) {\n                    return;\n                  }\n                  if (isArray(val)) {\n                    val = val.reduce(collapse, []);\n                    return val[0];\n                  }\n                  if (val[0] == \"[\" && val[val.length - 1] == \"]\") {\n                    val = parse(val);\n                    if (isArray(val)) {\n                      val = val.reduce(collapse, []);\n                      return val[0];\n                    } else {\n                      return \"-\";\n                    }\n                  }\n                  return val;\n                };\n              }\n              return function(val) {\n                return json[val];\n              };\n            }\n            paperScroller.scroll(0, 0);\n            paperScroller.$el.css(\"padding-left\", \"0\");\n            paperScroller.$el.css(\"padding-top\", \"0\");\n            paperScroller.$el.css(\"overflow\", \"hidden\");\n            paper.on(\"element:pointerup\", function(cellView) {\n              if (cellView.model instanceof joint.dia.Element) {\n                openCellTools(cellView);\n              }\n            });\n            paper.on(\"cell:pointerup\", function(cellView, evt) {\n              if (cellView.model instanceof joint.dia.Link) {\n                openCellTools(cellView);\n              }\n              if (cellView.model.attributes.extend == \"directive\") {\n                directive(cellView.model.attributes);\n              }\n              if (cellView.model.attributes.extend == \"tip\") {\n                tip(cellView.model.attributes);\n              }\n            });\n            if ($$.isString(json.bgimage)) {\n              paper.$el.css(\"background-image\", 'url(\"' + json.bgimage + '\")');\n              paper.$el.css(\"background-size\", \"contain\");\n              paper.$el.css(\"background-repeat\", \"no-repeat\");\n              paper.$el.css(\"background-position\", \"center\");\n            }\n            paper.el.oncontextmenu = function(evt) {\n              evt.preventDefault();\n            };\n            //paper.$el.css(\"background-color\", json.bgcolor);\n            graph.fromJSON(json);\n            svgId = wrap.find(\"svg\")[0];\n            topo\n              .find(\".viewport\")\n              .attr(\"transform\", \"scale(\" + config.scale + \")\");\n            function hiddenMarkers() {\n              $(\"g.marker-vertices\").attr(\"display\", \"none\");\n              $(\"g.marker-arrowheads\").attr(\"display\", \"none\");\n              $(\"g.link-tools\").attr(\"display\", \"none\");\n            }\n            hiddenMarkers();\n\n            /** --------------- keep consequence with old version ------------------- **/\n            if (events[\"$renderGraphComplete\"]) {\n              events[\"$renderGraphComplete\"](graph.getCells());\n            }\n            self.trigger(\"$renderGraphComplete\", graph.getCells());\n            if (events[\"$loadCiKpiComplete\"]) {\n              events[\"$loadCiKpiComplete\"](graph.getCells());\n            }\n            self.trigger(\"$loadCiKpiComplete\", graph.getCells());\n            /** --------------- keep consequence with old version ------------------- **/\n\n            graph.getCells().forEach(function(cell) {\n              var modelId = cell.get(\"id\");\n              var cursorStr = cell.get(\"cursor\");\n              var cursor = \"\";\n              if (cursorStr) {\n                var cursorAry = cursorStr.split(\":\");\n                if (\n                  cursorAry.length > 0 &&\n                  cursorAry[cursorAry.length - 1] != \"?\"\n                ) {\n                  cursor = cursorAry[cursorAry.length - 1];\n                }\n              }\n              var $_cell_el = paper.$el.find('g[model-id=\"' + modelId + '\"]');\n              if (cursor) {\n                $_cell_el.get(0).style = \"cursor: \" + cursor + \"!important\";\n              }\n            });\n            self.getDomainAreaLineTree_alertStatus(function(res) {\n              res\n                .getChildren(function() {\n                  return true;\n                })\n                .then(function(children) {\n                  getAllUnits().then(function(u) {\n                    units = u;\n                    var explainer = {\n                      \" \": {\n                        getNodeId: function(cell) {\n                          return getNumber(cell.attributes.nodeId);\n                        },\n                        getKpiId: function(cell) {\n                          return getNumber(cell.attr(\"kpiId\"));\n                        },\n                        getInstance: function(cell) {\n                          return undefined;\n                        },\n                        filter: function(cell) {\n                          return function(value) {\n                            var nodeId = getNumber(cell.attr(\"nodeId\")),\n                              kpiId = getNumber(cell.attr(\"kpiId\"));\n                            return (\n                              nodeId == value.nodeId && kpiId == value.kpiCode\n                            );\n                          };\n                        },\n                        handler: function(cell, valuelist) {}\n                      },\n                      value: {\n                        before: function(cell) {\n                          let ins = cell.attributes.attrs.text.text;\n                          cell.prop(\"_instance\", ins);\n                        },\n                        getNodeId: function(cell) {\n                          return getNumber(cell.attributes.nodeId);\n                        },\n                        getKpiId: function(cell) {\n                          return getNumber(cell.attributes.kpiId);\n                        },\n                        getInstance: function(cell) {\n                          return cell.attributes.attrs.text.text;\n                        },\n                        filter: function(cell) {\n                          return function(value) {\n                            var nodeId = getNumber(cell.attributes.nodeId),\n                              kpiId = getNumber(cell.attributes.kpiId),\n                              instance = cell.prop(\"_instance\");\n                            return (\n                              nodeId == value.nodeId &&\n                              kpiId == value.kpiCode &&\n                              instance == value.instance\n                            );\n                          };\n                        },\n                        handler: function(cell, valuelist) {\n                          let val = valuelist[0];\n                          changeIconAndText(\n                            cell,\n                            val ? val.value : 0,\n                            \"valueConfig\"\n                          );\n                        }\n                      },\n                      alarm: {\n                        before: function(cell) {\n                          cell.prop(\"attrs/text/text\", \" \");\n                        },\n                        getNodeId: function(cell) {\n                          return getNumber(cell.attributes.nodeId);\n                        },\n                        getKpiId: function(cell) {\n                          return undefined;\n                        },\n                        getInstance: function(cell) {\n                          return undefined;\n                        },\n                        filter: function(cell) {\n                          return function(value) {\n                            var nodeId = getNumber(cell.attr(\"nodeId\")),\n                              kpiId = getNumber(cell.attr(\"kpiId\"));\n                            return (\n                              nodeId == value.nodeId && kpiId == value.kpiCode\n                            );\n                          };\n                        },\n                        handler: function(cell, valuelist) {\n                          var nodeId = getNumber(cell.attributes.nodeId),\n                            node = children.find(function(child) {\n                              return child.id == nodeId;\n                            }),\n                            val =\n                              valuelist.find(function(value) {\n                                return (\n                                  value.nodeId == nodeId &&\n                                  value.kpiCode == 999999\n                                );\n                              }) || {},\n                            state = val.value || 0;\n                          changeIconAndText(cell, state);\n                        }\n                      },\n                      instance: {\n                        before: function(cell) {\n                          cell.prop(\"attrs/text/text\", \" \");\n                        },\n                        getNodeId: function(cell) {\n                          return getNumber(cell.attributes.nodeId);\n                        },\n                        getKpiId: function(cell) {\n                          return getNumber(cell.attributes.kpiId);\n                        },\n                        getInstance: function(cell) {\n                          return undefined;\n                        },\n                        filter: function(cell) {\n                          return function(value) {\n                            var nodeId = getNumber(cell.attributes[\"nodeId\"]),\n                              kpiId = getNumber(cell.attributes[\"kpiId\"]);\n                            return (\n                              nodeId == value.nodeId && kpiId == value.kpiCode\n                            );\n                          };\n                        },\n                        handler: function(cell, valuelist) {\n                          var nodeId = getNumber(cell.attributes.nodeId),\n                            dataItemId = getNumber(cell.attributes.kpiId),\n                            node = children.find(function(child) {\n                              return child.id == nodeId;\n                            }),\n                            val =\n                              valuelist.find(function(value) {\n                                return (\n                                  value.nodeId == nodeId &&\n                                  value.kpiCode == dataItemId\n                                );\n                              }) || {};\n                          //cell.prop( \"attrs/text/text\", \"-\" );\n                          getResourceById(nodeId).then(function(resource) {\n                            var allaccessConfigs = resource.$attr(\n                              \"physicalConfig/accessConfigs\"\n                            );\n                            getKpisByModelId(resource.modelId).then(function(\n                              kpiMap\n                            ) {\n                              var currentModelKpiMap = kpiMap[resource.modelId],\n                                kpiData =\n                                  kpisMap[resource.modelId][dataItemId] || {},\n                                range = makeValueEval(kpiData.range),\n                                unit = getUnit(units[kpiData.unit]);\n                              cell.prop(\"attrs/text/fill\", \"white\");\n                              cell.prop(\"attrs/text/visibility\", \"visible\");\n                              cell.prop(\n                                \"attrs/text/text\",\n                                formatVal(range(val.value)) + unit\n                              );\n                            });\n                          });\n                        }\n                      },\n                      alert: {\n                        getNodeId: function(cell) {\n                          return getNumber(cell.attr(\"nodeId\"));\n                        },\n                        getKpiId: function(cell) {\n                          return;\n                        },\n                        getInstance: function(cell) {\n                          return;\n                        },\n                        filter: function(cell) {\n                          return function(value) {\n                            var nodeId = getNumber(cell.attr(\"nodeId\"));\n                            return nodeId == value.nodeId && kpiId == 999999;\n                          };\n                        },\n                        handler: function(cell, valuelist) {\n                          var nodeId = getNumber(cell.attributes.nodeId),\n                            node = children.find(function(child) {\n                              return child.id == nodeId;\n                            });\n                          function run(ins) {\n                            ins.setPos(cell.attributes.position);\n                            ins.setAlarmStatus(node.state);\n                            ins.on(\"textClick\", function(event) {});\n                            ins.on(\"click\", function(event) {\n                              self.refresh({\n                                id: node.id\n                              });\n                            });\n                          }\n                          if (cell.$ins == null) {\n                            self.createAlarm(node.label, function(ins) {\n                              cell.$ins = ins;\n                              run(cell.$ins);\n                            });\n                          } else {\n                            run(cell.$ins);\n                          }\n                        }\n                      },\n                      baowualarm: {\n                        getNodeId: function(cell) {\n                          return getNumber(cell.attributes[\"nodeId\"]);\n                        },\n                        getKpiId: function(cell) {\n                          return;\n                        },\n                        getInstance: function(cell) {\n                          return;\n                        },\n                        filter: function(cell) {\n                          return function(value) {\n                            var nodeId = getNumber(cell.attributes.nodeId);\n                            return (\n                              nodeId == value.nodeId && value.kpiCode == 999999\n                            );\n                          };\n                        },\n                        handler: function(cell, valuelist) {\n                          var nodeId = getNumber(cell.attributes.nodeId),\n                            value = valuelist.find(function(v) {\n                              return v.nodeId == nodeId;\n                            });\n                          if (typeof value === \"undefined\") {\n                            return;\n                          }\n                          breathFlash(\n                            cell,\n                            \"rect\",\n                            \"#ff0000\",\n                            value.value,\n                            false\n                          );\n                        }\n                      },\n                      dataItem: {\n                        getNodeId: function(cell) {\n                          var currentdevice =\n                              cell.attributes.currentdevice || 0,\n                            nodeId = getNumber(cell.attributes.nodeId);\n                          return currentdevice ? res.id : nodeId;\n                        },\n                        getKpiId: function(cell) {\n                          return cell.attributes.dataItem;\n                        },\n                        getInstance: function(cell) {\n                          return getString(cell.attributes.sensor);\n                        },\n                        filter: function(cell) {\n                          var dataItem = cell.attributes.dataItem,\n                            sensor = cell.attributes.sensor;\n                          return function(value) {\n                            var kpiCode = value.kpiCode,\n                              instance = value.instance;\n                            if (kpiCode == 999997) {\n                              instance = instance.split(\"_\");\n                              kpiCode = instance[0];\n                              instance = instance[1];\n                            }\n                            return (\n                              sensor == instance &&\n                              dataItem.indexOf(kpiCode - 0) != -1\n                            );\n                          };\n                        },\n                        handler: function(cell, valuelist) {\n                          var currentdevice =\n                              cell.attributes.currentdevice || 0,\n                            dataItem = cell.attributes.dataItem,\n                            nodeId = currentdevice\n                              ? res.id\n                              : getNumber(cell.attributes.nodeId),\n                            sensor = getString(cell.attributes.sensor);\n                          getResourceById(nodeId).then(function(resource) {\n                            var allaccessConfigs = resource.$attr(\n                              \"physicalConfig/accessConfigs\"\n                            );\n                            getKpisByModelId(resource.modelId).then(function(\n                              kpiMap\n                            ) {\n                              var currentModelKpiMap = kpiMap[resource.modelId];\n                              return success(\n                                getMeasurePointData(\n                                  parse(resource.values.MeasurePointLocate)\n                                )\n                              ).then(function(sensors) {\n                                var sen = sensors.find(function(s) {\n                                    return s.name === sensor;\n                                  }),\n                                  kpis = allaccessConfigs\n                                    .filter(function(d) {\n                                      return (\n                                        d.instance == sensor &&\n                                        currentModelKpiMap[d.dataItemId] &&\n                                        !currentModelKpiMap[d.dataItemId][\n                                          \"needTransform\"\n                                        ]\n                                      );\n                                    })\n                                    .map(kpi => {\n                                      let obj = valuelist.find(val => {\n                                        return val.kpiCode == kpi.dataItemId;\n                                      });\n                                      obj\n                                        ? (kpi.arisingTime = obj.arisingTime)\n                                        : null;\n                                      return kpi;\n                                    }),\n                                  kpiFilter = kpis.filter(function(kpi) {\n                                    return (\n                                      dataItem.indexOf(kpi.dataItemId) != -1\n                                    );\n                                  }),\n                                  dt;\n                                kpis.sort(function(a, b) {\n                                  return (\n                                    currentModelKpiMap[a.dataItemId].serial -\n                                    currentModelKpiMap[b.dataItemId].serial\n                                  );\n                                });\n                                if (!sen) {\n                                  return;\n                                }\n                                if (kpiFilter.length > 0) {\n                                  (cell.$attrDisp =\n                                    cell.$attrDisp ||\n                                    self.createAttrDisp(\n                                      kpiFilter[0].kpiName,\n                                      kpiFilter.map(mapDataItem(nodeId)),\n                                      self.getPersentageSite(\n                                        cell.attributes.position\n                                      )\n                                    )),\n                                    function() {};\n                                  dt = remapAttrDist(cell.$attrDisp.getData());\n                                  valuelist.forEach(function(v) {\n                                    var dataItemId = v.kpiCode,\n                                      instance = v.instance;\n                                    if (dataItemId === 999997) {\n                                      instance = instance.split(\"_\");\n                                      dataItemId = instance[0];\n                                      instance = instance[1];\n                                    }\n                                    var rs = dt[instance + \"/\" + dataItemId],\n                                      kpiData =\n                                        kpisMap[resource.modelId][dataItemId],\n                                      range = makeValueEval(kpiData.range),\n                                      unit = getUnit(units[kpiData.unit]);\n                                    if (v.kpiCode == 999997) {\n                                      rs.updateStatus(v.value);\n                                    } else {\n                                      rs\n                                        ? rs.updateValue(\n                                            formatVal(range(v.value)) + unit\n                                          )\n                                        : null;\n                                      rs ? rs.updateTime(v.arisingTime) : null;\n                                    }\n                                  });\n                                }\n                              });\n                            });\n                          });\n                        }\n                      },\n                      kpis: {\n                        getNodeId: function(cell) {\n                          var currentdevice =\n                              cell.attributes.currentdevice || 0,\n                            nodeId = getNumber(cell.attributes.nodeId);\n                          return currentdevice ? res.id : nodeId;\n                        },\n                        getKpiId: function(cell) {\n                          return cell.attributes.dataItem;\n                        },\n                        getInstance: function(cell) {\n                          return getString(cell.attributes.sensor);\n                        },\n                        filter: function(cell) {\n                          var dataItem = cell.attributes.dataItem,\n                            sensor = getString(cell.attributes.sensor);\n                          return function(value) {\n                            var kpiCode = value.kpiCode,\n                              instance = value.instance;\n                            if (kpiCode == 999997) {\n                              instance = instance.split(\"_\");\n                              kpiCode = instance[0];\n                              instance = instance[1];\n                            }\n                            return (\n                              sensor == instance &&\n                              dataItem.indexOf(kpiCode - 0) != -1\n                            );\n                          };\n                        },\n                        handler: function(cell, valuelist) {\n                          var currentdevice =\n                              cell.attributes.currentdevice || 0,\n                            dataItem = cell.attributes.dataItem,\n                            dataItems,\n                            valuelistMap = valuelist.reduce(function(a, b) {\n                              a[b.kpiCode] = b;\n                              return a;\n                            }, {}),\n                            nodeId = currentdevice\n                              ? res.id\n                              : getNumber(cell.attributes.nodeId),\n                            sensor = getString(cell.attributes.sensor);\n                          if (valuelist && valuelist.length > 0) {\n                          }\n                          getResourceById(nodeId).then(function(resource) {\n                            var allaccessConfigs = resource.$attr(\n                              \"physicalConfig/accessConfigs\"\n                            );\n                            getKpisByModelId(resource.modelId).then(function(\n                              kpiMap\n                            ) {\n                              var currentModelKpiMap = kpiMap[resource.modelId];\n                              return success(\n                                getMeasurePointData(\n                                  parse(resource.values.MeasurePointLocate)\n                                )\n                              ).then(function(sensors) {\n                                var sen = sensors.find(function(s) {\n                                    return s.name === sensor;\n                                  }),\n                                  kpis = allaccessConfigs.filter(function(d) {\n                                    return (\n                                      d.instance == sensor &&\n                                      currentModelKpiMap[d.dataItemId] &&\n                                      !currentModelKpiMap[d.dataItemId][\n                                        \"needTransform\"\n                                      ]\n                                    );\n                                  }),\n                                  dt;\n                                kpis.sort(function(a, b) {\n                                  return (\n                                    currentModelKpiMap[a.dataItemId].serial -\n                                    currentModelKpiMap[b.dataItemId].serial\n                                  );\n                                });\n                                if (!sen) {\n                                  return;\n                                }\n                                dataItems = kpis\n                                  .filter(function(kpi) {\n                                    valuelistMap[kpi.dataItemId]\n                                      ? (kpi.arisingTime =\n                                          valuelistMap[\n                                            kpi.dataItemId\n                                          ].arisingTime)\n                                      : null;\n                                    return (\n                                      dataItem.indexOf(kpi.dataItemId) != -1\n                                    );\n                                  })\n                                  .map(mapKpi);\n                                //\n                                cell.$attrDisp =\n                                  cell.$attrDisp ||\n                                  self.createAttrDisp(\n                                    sen.label,\n                                    dataItems.map(d => {\n                                      d.nodeId = nodeId;\n                                      return d;\n                                    }),\n                                    self.getPersentageSite(\n                                      cell.attributes.position\n                                    ),\n                                    undefined,\n                                    undefined,\n                                    cell.get(\"absheight\")\n                                  );\n                                dt = remapAttrDist(cell.$attrDisp.getData());\n                                valuelist.forEach(function(v) {\n                                  if (nodeId != v.nodeId) {\n                                    return;\n                                  }\n                                  var dataItemId = v.kpiCode,\n                                    instance = v.instance;\n                                  if (dataItemId == 999997) {\n                                    instance = instance.split(\"_\");\n                                    dataItemId = instance[0];\n                                    instance = instance[1];\n                                  }\n                                  var rs = dt[instance + \"/\" + dataItemId],\n                                    kpiData =\n                                      kpisMap[resource.modelId][dataItemId] ||\n                                      {},\n                                    range = makeValueEval(kpiData.range),\n                                    unit = getUnit(units[kpiData.unit]);\n                                  if (typeof range(v.value) === \"undefined\") {\n                                  }\n                                  if (\n                                    typeof (formatVal(range(v.value)) + unit) ==\n                                    \"undefined\"\n                                  ) {\n                                  }\n                                  if (v.kpiCode == 999997) {\n                                    rs.updateStatus(v.value);\n                                  } else {\n                                    rs\n                                      ? rs.updateValue(\n                                          formatVal(range(v.value)) + unit\n                                        )\n                                      : null;\n                                    rs ? rs.updateTime(v.arisingTime) : null;\n                                  }\n                                });\n                              });\n                            });\n                          });\n                        }\n                      }\n                    };\n\n                    function toFix(n) {\n                      var num = n - 0;\n                      if (num !== num) {\n                        return n;\n                      }\n                      return num.toFixed(2);\n                    }\n\n                    function formatVal(val) {\n                      if (typeof val == \"undefined\" || val === null) {\n                        return \"-\";\n                      }\n                      if (typeof val === \"object\") {\n                        return toFix(val[0]);\n                      }\n                      return toFix(val);\n                    }\n\n                    function remapAttrDist(arr) {\n                      var obj = {};\n                      for (var i = 0; i < arr.length; i++) {\n                        obj[arr[i].instance + \"/\" + arr[i].id] = arr[i];\n                        obj[arr[i].instance + \"/999998\"] = arr[i];\n                        obj[arr[i].instance + \"/999997\"] = arr[i];\n                      }\n                      return obj;\n                    }\n                    function isNotUndefined(d) {\n                      return typeof d !== \"undefined\";\n                    }\n                    function attribute(cell, attr, val) {\n                      var attrs = attr.split(\"/\").filter(isNotUndefined),\n                        item;\n                      if (typeof val === \"undefined\") {\n                        rs = cell;\n                        while ((item = attrs.shift()) && rs) {\n                          rs = rs[item];\n                        }\n                        return rs;\n                      }\n                      var last = attrs.pop(),\n                        rs = cell;\n                      while ((item = attrs.shift()) && rs) {\n                        rs = rs[item];\n                      }\n                      if (typeof rs === \"object\") {\n                        rs[last] = val;\n                      }\n                    }\n                    function getNodeId(cell) {\n                      var ext = cell.attributes.extend || \" \",\n                        fn = attribute(explainer, [ext, \"getNodeId\"].join(\"/\"));\n                      return typeof fn === \"function\" ? fn(cell) : null;\n                    }\n\n                    function getKpiId(cell) {\n                      var ext = cell.attributes.extend || \" \",\n                        fn = attribute(explainer, [ext, \"getKpiId\"].join(\"/\"));\n                      return typeof fn === \"function\" ? fn(cell) : null;\n                    }\n                    function getInstance(cell) {\n                      var ext = cell.attributes.extend || \" \",\n                        fn = attribute(\n                          explainer,\n                          [ext, \"getInstance\"].join(\"/\")\n                        );\n                      return typeof fn === \"function\" ? fn(cell) : null;\n                    }\n                    function eachProp(obj, callback) {\n                      for (var i in obj) {\n                        callback(obj[i], i, obj);\n                      }\n                    }\n                    return success(graph).then(function(graph) {\n                      completeEvent &&\n                        completeEvent({\n                          target: self,\n                          self: self,\n                          global: global,\n                          tools: elemData\n                        });\n                      var cells = graph.getCells(),\n                        nodeIds = cells\n                          .map(function(cell) {\n                            return getNodeId(cell);\n                          })\n                          .filter(noEmpty)\n                          .reduce(removeSame, []),\n                        kpiIds = cells\n                          .map(function(cell) {\n                            return getKpiId(cell);\n                          })\n                          .filter(noEmpty)\n                          .concat([999997, 999998, 999999])\n                          .reduce(collapse, [])\n                          .reduce(removeSame, []),\n                        instances = cells\n                          .map(function(cell) {\n                            return getInstance(cell);\n                          })\n                          .filter(noEmpty)\n                          .reduce(removeSame, []);\n                      function startSocket(callback) {\n                        var paramSocket = {\n                            ciid: nodeIds.toString(),\n                            kpi: kpiIds.toString()\n                          },\n                          operation = \"register\";\n                        uuid = Math.uuid();\n                        function toArr(obj) {\n                          let rs = [];\n                          for (let i in obj) {\n                            for (let j in obj[i]) {\n                              for (let k in obj[i][j]) {\n                                rs.push(obj[i][j][k]);\n                              }\n                            }\n                          }\n                          return rs;\n                        }\n                        function throttle(fn, time) {\n                          let timer,\n                            obj = {};\n                          return function(event) {\n                            let nodeId = event.data.nodeId,\n                              kpiCode = event.data.nodeId,\n                              instance = event.data.instance || \"_\";\n                            if (timer == null) {\n                              timer = setTimeout(() => {\n                                fn.call(this, toArr(obj));\n                                timer = null;\n                                obj = {};\n                              }, time);\n                            } else {\n                              obj[nodeId] = obj[nodeId] || {};\n                              obj[nodeId][kpiCode] = obj[nodeId][kpiCode] || {};\n                              obj[nodeId][kpiCode][instance] = event.data;\n                            }\n                          };\n                        }\n                        ws.send(nodeIds, kpiIds);\n                        ws.on(\n                          throttle(function(events) {\n                            let dis = $(topo[0].parentNode).css(\"display\");\n                            if (dis != \"none\") {\n                              callback(events);\n                            }\n                          }, 3000)\n                        );\n                      }\n                      function inputValue(condition) {\n                        return function(valueList) {\n                          cells.forEach(function(cell) {\n                            var ext = cell.attributes.extend,\n                              config = explainer[ext || \" \"];\n                            if (typeof config == \"undefined\") {\n                              return;\n                            }\n                            var fitered = config.filter,\n                              handler = config[\"handler\"],\n                              data = valueList.filter(fitered(cell));\n                            if (condition(data)) {\n                              handler(cell, data);\n                            }\n                          });\n                        };\n                      }\n                      cells.forEach(function(cell) {\n                        var ext = cell.attributes.extend,\n                          config = explainer[ext || \" \"];\n                        if (typeof config == \"undefined\") {\n                          return;\n                        }\n                        config.before ? config.before(cell) : null;\n                      });\n\n                      function getData() {\n                        timer = null;\n                        timerCallback = valuelist => {\n                          inputValue(function(data) {\n                            return true;\n                          })(valuelist);\n                          timer = setTimeout(getData, 6000);\n                          /* startSocket(function(valuelist) {\n                              inputValue(function(data) {\n                                return data.length > 0;\n                              })(valuelist);\n                            }); */\n                        };\n                        if (\n                          nodeIds &&\n                          nodeIds.length > 0 &&\n                          kpiIds &&\n                          kpiIds.length > 0\n                        ) {\n                          getKpiValueList(\n                            nodeIds,\n                            kpiIds,\n                            instances,\n                            false\n                          ).then(function(d) {\n                            /* let last = d[d.length - 1];\n                            last.instance = last.kpiCode + \"_\" + last.instance;\n                            last.kpiCode = 999997;\n                            last.value = 4; */\n                            timerCallback && timerCallback(d);\n                          });\n                        } else {\n                          inputValue(function(data) {\n                            return true;\n                          })([]);\n                        }\n                      }\n                      getResourceByIds(nodeIds)\n                        .then(function(resources) {\n                          var rs = {},\n                            modelIds = resources.reduce(function(a, b) {\n                              if (a.indexOf(b.modelId) == -1) {\n                                a.push(b.modelId);\n                              }\n                              return a;\n                            }, []);\n                          return getKpisByModelIds(modelIds);\n                        })\n                        .then(function(d) {\n                          extend(kpisMap, d);\n                          getData();\n                        });\n                    });\n                  });\n                });\n            });\n          });\n        });\n      };\n      if (typeof initEvent == \"function\") {\n        try {\n          initEvent({\n            target: self,\n            self: self,\n            global: global,\n            tools: elemData\n          });\n        } catch (e) {\n          console.error(e);\n        }\n      } else {\n        self.render();\n      }\n    });\n    topo.css(style);\n    topo.css(\"position\", \"relative\");\n    topo.append(wrap);\n    self.on(\"$destroy\", function() {\n      clearTimeout(timer);\n      timer = undefined;\n      timerCallback = undefined;\n      SwSocket.unregister(uuid);\n    });\n    return topo;\n  };\n}\n","\n/** mainCtrlRm\" **/\nexport default function(\n  rootScope,\n  q,\n  $state,\n  psTreeData,\n  ajax,\n  resourceUIService,\n  kpiDataService,\n  psWebsocket,\n  SwSocket,\n  unitService,\n  cms2\n) {\n  return function(data) {\n    var elemData = data,\n      uuid,\n      timer,\n      timerCallback,\n      ws = psWebsocket(\"ps_topo\"),\n      /** keep consequence with old version **/\n      persentage = 0,\n      /** keep consequence with old version **/\n      events = {},\n      kpisMap = {},\n      units = {},\n      resourceMap = {},\n      scope = elemData.scope,\n      timeout = elemData.timeout,\n      topo = $(\"<div></div>\"),\n      wrap = $(\"<div></div>\"),\n      svgId,\n      isArray = isType(\"Array\"),\n      previewMode = elemData.previewMode,\n      element = elemData.element,\n      self = elemData.element,\n      viewId = self.viewId,\n      global = elemData.global,\n      style = element.style || {},\n      linkAnHandler = function(cell) {\n        var dr = cell.get(\"attrs\")[\".connection\"][\"stroke-dasharray\"],\n          linkAn = cell.get(\"linkAn\"),\n          cellDom = jQuery(\"[model-id=\" + cell.id + \"]\").find(\".connection\")[0],\n          oldClass = cellDom.getAttribute(\"class\");\n        oldClass = oldClass.replace(\" runslow\", \"\");\n        oldClass = oldClass.replace(\" runnormal\", \"\");\n        oldClass = oldClass.replace(\" runfast\", \"\");\n        if (dr && dr != \"0\") {\n          if (linkAn == \"慢速\") {\n            oldClass = oldClass + \" runslow\";\n          } else if (linkAn == \"普通\") {\n            oldClass = oldClass + \" runnormal\";\n          } else if (linkAn == \"快速\") {\n            oldClass = oldClass + \" runfast\";\n          }\n        }\n        cellDom.setAttribute(\"class\", oldClass);\n      };\n    function isType(type) {\n      return function(target) {\n        return {}.toString.call(target) === \"[object \" + type + \"]\";\n      };\n    }\n    function collapse(a, b) {\n      var item,\n        queue = isArray(b) ? b.slice() : [b];\n      while ((item = queue.shift())) {\n        if (isArray(item)) {\n          [].push.apply(queue, item);\n        } else {\n          a.push(item);\n        }\n      }\n      return a;\n    }\n    function extend() {\n      var args = [].slice.call(arguments),\n        first = args.shift();\n      args.forEach(function(d) {\n        for (var i in d) {\n          first[i] = d[i];\n        }\n      });\n      return first;\n    }\n    function random(length) {\n      length = length || 16;\n      var chars =\n          \"abcdedfghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890\",\n        rs = \"\",\n        rnd,\n        len = chars.length;\n      for (var i = 0; i < length; i++) {\n        rnd = parseInt(Math.random() * len);\n        rs += chars[rnd];\n      }\n      return rs;\n    }\n    function directive(cell) {\n      var context = {};\n      var position = cell.position,\n        div;\n      var directiveIds = cell.directiveIds.map(function(e) {\n        return (typeof e == \"number\" && e) || parseInt(e.split(\"number:\")[1]);\n      });\n      var modelId = cell.modelId && cell.modelId.split(\"number:\")[1];\n      var nodeId = cell.modelId && cell.nodeId.split(\"number:\")[1];\n      if (modelId) {\n        var getDirectivesByModelId = function() {\n          return new Promise(function(resolve) {\n            resourceUIService.getDirectivesByModelId(modelId, function(d) {\n              resolve(d.data);\n            });\n          });\n        };\n        var getKpisByModelId = function() {\n          return new Promise(function(resolve) {\n            resourceUIService.getKpisByModelId(modelId, function(d) {\n              resolve(d.data);\n            });\n          });\n        };\n        Promise.all([getDirectivesByModelId(), getKpisByModelId()]).then(\n          function(ret) {\n            var directives = ret[0];\n            var kpis = ret[1];\n            directives = directives.filter(function(d) {\n              return directiveIds.indexOf(d.id) != -1;\n            });\n            directives.forEach(function(directive) {\n              kpis.forEach(function(kpi) {\n                if (kpi.id == directive.kpiDefinitionIds[0]) {\n                  directive.kpiLabel = kpi.name;\n                }\n              });\n              var wrap = $(\"<div></div>\");\n              var label = $(\"<label></label>\");\n              var input = $(\"<input />\");\n              var btn = $(\"<button></button>\");\n              var timesInput = $(\"<input />\");\n              var timesLabel = $(\"<label></label>\");\n              label.css(\"margin\", \"5px\");\n              input.css(\"margin\", \"5px\");\n              timesInput.css(\"margin\", \"5px\");\n              timesInput.css(\"width\", \"30px\");\n              timesInput.val(1);\n              btn.text(\"发送\");\n              timesLabel.text(\"次\");\n              label.text(directive.name);\n              wrap.append(label);\n              wrap.append(input);\n              wrap.append(btn);\n              wrap.append(timesInput);\n              wrap.append(timesLabel);\n              div.append(wrap);\n              btn.on(\"click\", function(e) {\n                var times = timesInput.val();\n                times = Number(times);\n                var params = {};\n                params[directive.kpiLabel] = input.val();\n                close();\n                for (var j = 0; j < times; j++) {\n                  element.sendDirective(\n                    parseInt(nodeId),\n                    directive.id,\n                    params,\n                    function(e) {}\n                  );\n                }\n              });\n            });\n          }\n        );\n      }\n      var p = persentage || 1;\n      div = $(\"<div></div>\");\n      div.css(\"position\", \"absolute\");\n      div.css(\"top\", cell.position.y / p + \"px\");\n      div.css(\n        \"left\",\n        (cell.position.x < 300\n          ? 100 + cell.position.x\n          : cell.position.x - 280) /\n          p +\n          \"px\"\n      );\n      div.css(\"border\", \"1px solid #ddd\");\n      div.css(\"z-index\", 199);\n      div.css(\"padding\", \"10px\");\n      div.css(\"background-color\", \"#eee\");\n      setTimeout(function() {\n        div.on(\"click\", function(e) {\n          e.stopPropagation();\n        });\n        $(\"body\").on(\"click.directive\", close);\n      });\n      topo.append(div);\n\n      function close(e) {\n        div.children().remove();\n        div.remove();\n        $(\"body\").off(\"click.directive\");\n      }\n      return context;\n    }\n    function tip(cell) {\n      var context = {};\n      var position = cell.position,\n        div;\n      var kpiId = cell.kpiId && cell.kpiId.split(\"number:\")[1];\n      var nodeId = cell.nodeId && cell.nodeId.split(\"number:\")[1];\n      var modelId = cell.modelId && cell.modelId.split(\"number:\")[1];\n      if (kpiId && nodeId) {\n        kpiDataService.getRealTimeKpiData([nodeId * 1], [kpiId * 1], function(\n          ret\n        ) {\n          if (ret.code == 0 && ret.data.length) {\n            var wrap = $(\"<div></div>\");\n            var label = $(\"<label></label>\");\n            label.css(\"margin\", \"5px\");\n            label.css(\"color\", \"#fff\");\n            label.css(\"font-size\", \"18px\");\n            var unitLabel =\n              scope.$root.rootModelsDic[modelId][kpiId].unitLabel || \"\";\n            label.text(ret.data[0].value + unitLabel);\n            wrap.append(label);\n            div.append(wrap);\n            var p = persentage || 1;\n            div = $(\"<div></div>\");\n            div.css(\"position\", \"absolute\");\n            div.css(\"left\", cell.position.x / p + \"px\");\n            div.css(\"top\", (cell.size.height + cell.position.y) / p + \"px\");\n            div.css(\"border\", \"1px solid #fff\");\n            div.css(\"z-index\", 199);\n            div.css(\"padding\", \"5px\");\n            div.css(\"border-radius\", \"5px\");\n            div.css(\"background-color\", \"rgba(0,0,0,0.5\");\n            setTimeout(function() {\n              div.on(\"click\", function(e) {\n                e.stopPropagation();\n              });\n              $(\"body\").on(\"click.tip\", close);\n            });\n            topo.append(div);\n          }\n        });\n      }\n\n      function close(e) {\n        div.children().remove();\n        div.remove();\n        $(\"body\").off(\"click.tip\");\n      }\n      return context;\n    }\n    function promise(fn) {\n      var defer = q.defer();\n      fn(defer.resolve, defer.reject);\n      return defer.promise;\n    }\n    function success(d) {\n      var defer = q.defer();\n      defer.resolve(d);\n      return defer.promise;\n    }\n    function getExpression() {\n      return promise(function(res, rej) {\n        var exp = element.$attr(\"advance/expression\");\n        if (typeof exp == \"object\") {\n          res(exp);\n          return;\n        }\n        $$.runExpression(exp, function(funRes) {\n          if (funRes.code == \"0\") {\n            var fnResult = funRes.data;\n            res(fnResult);\n          } else {\n            rej(funRes.message);\n          }\n        });\n      });\n    }\n    function renderJSON(json) {\n      return promise(function(res, rej) {\n        self.hooks.call(\"viewloaded\", json.cells, function(d) {\n          res(json);\n        });\n      });\n    }\n    function parse(str) {\n      var a;\n      try {\n        a = JSON.parse(str);\n      } catch (e) {\n        return;\n      }\n      return a;\n    }\n    function getViewById(viewId) {\n      return promise(function(res, rej) {\n        self.getViewById(viewId, function(view) {\n          if (view == null) {\n            return res();\n          }\n          res(parse(view.content));\n        });\n      });\n    }\n    function getRapppid() {\n      return promise(function(res, rej) {\n        $$.loadExternalJs([\"rappid-joint\", \"lodash\", \"backbone\"], function(\n          joint\n        ) {\n          res(joint);\n        });\n      });\n    }\n    function noEmpty(d) {\n      return d;\n    }\n    function getKpiValueList(ci, kpi, instancs, mock) {\n      var params = [\n        \"kpi\",\n        {\n          category: \"ci\",\n          isRealTimeData: true,\n          timePeriod: 0,\n          nodeIds: ci,\n          kpiCodes: kpi,\n          startTime: null,\n          endTime: null,\n          timeRange: \"\",\n          statisticType: \"psiot\",\n          condList: [],\n          includeInstance: true\n          //queryInstances: instancs.join(\",\")\n        }\n      ];\n      return mock === true\n        ? ajax.$mock().post(\"kpiDataFlexService.getKpiValueList\", params)\n        : ajax.post(\"kpiDataFlexService.getKpiValueList\", params);\n    }\n    function getNumber(str) {\n      var match = /(?:.*\\:)*([^\\:]*)/.exec(str);\n      if (typeof str == \"string\" || typeof str == \"number\") {\n        return match ? match[1] - 0 : str;\n      }\n    }\n    function getString(str) {\n      var match = /(?:.*\\:)*([^\\:]*)/.exec(str);\n      if (typeof str == \"string\" || typeof str == \"number\") {\n        return match ? match[1] : str;\n      }\n    }\n    function getFill(obj) {\n      var rs = {};\n      for (var i in obj) {\n        rs = obj[i];\n        break;\n      }\n      return rs.fill;\n    }\n    function getType(type) {\n      if (type == \"basic.Rect\") {\n        return \"rect\";\n      } else if (type == \"basic.Circle\") {\n        return \"circle\";\n      }\n    }\n    function removeSpace(str) {\n      var match = /^\\s*([^\\s]+)\\s*$/g.exec(str);\n      return match ? match[1] : \"\";\n    }\n    function equalStr(target, st) {\n      return new RegExp(\"^\\\\s*\" + st + \"\\\\s*$\").test(target);\n    }\n    function getUnit(unit) {\n      if (equalStr(unit, \"NA\") || equalStr(unit, \"wave\")) {\n        return \"\";\n      }\n      if (typeof unit !== \"string\") {\n        return \"\";\n      }\n      return \" \" + removeSpace(unit);\n    }\n    function getTextFill(obj) {\n      return obj[\"text\"] && obj[\"text\"][\"fill\"];\n    }\n    self.$on = function(eventName, callback) {\n      events[eventName] = callback;\n    };\n    self.setResources = function(resources) {\n      self.hooks.tap(\"viewloaded\", function(cells, next) {\n        cells.forEach(function(cell) {\n          var modelId = cell.modelId;\n          modelId =\n            typeof modelId === \"string\"\n              ? /^number\\:(\\d+)$/g.exec(modelId)\n              : null;\n          modelId = modelId ? modelId[1] : null;\n          if (modelId) {\n            cell.nodeId = \"number:\" + resources.id;\n          }\n        });\n        next();\n      });\n    };\n    self.hooks = self.Synchook();\n    self.createDeviceDropList = function(data, pos, config) {\n      var p = persentage || 1;\n      var hitArea = $(\"<div></div>\");\n      var titleArea = $(\"<div></div>\");\n      var popup = $(\"<div></div>\");\n      var config = config || {};\n      var clickFn = config.$attr(\"click\");\n      var titleClickFn = config.$attr(\"titleClick\");\n      $(\"#devicelistscroll\").remove();\n      hitArea.attr(\"id\", \"devicelistscroll\");\n      titleArea.css(\"width\", \"100%\");\n      titleArea.css(\"height\", \"50px\");\n      hitArea.css(\"position\", \"absolute\");\n      hitArea.css(\"z-index\", 199);\n      popup.css(\"padding\", \"2px\");\n      popup.css(\"background-color\", \"#1e415d\");\n      popup.css(\"border\", \"1px solid #000\");\n      popup.css(\"box-shadow\", \"1px 1px 10px 1px rgba(0,0,0,.5)\");\n      popup.css(\"max-height\", \"150px\");\n      popup.css(\"overflow-x\", \"hidden\");\n      popup.css(\"overflow-y\", \"auto\");\n      hitArea.css(\"cursor\", \"pointer\");\n      hitArea.css(\"top\", pos.y / p - (config.y || 30) + \"px\");\n      hitArea.css(\"left\", pos.x / p - (config.x || 50) + \"px\");\n      hitArea.css(\"background-color\", \"rgba(0,0,0,0)\");\n      hitArea.on(\"mouseleave\", function(event) {\n        $(\"#devicelistscroll\").remove();\n      });\n      titleArea.on(\"click\", function(event) {\n        titleClickFn();\n      });\n      var createDom = function(item) {\n        var wrap = $(\"<div></div>\"),\n          label = $(\"<span></span>\"),\n          status = $(\"<div></div>\");\n        wrap.attr(\"id\", \"wrap\");\n        status.css(\"margin-right\", \"5px\");\n        status.css(\"width\", \"10px\");\n        status.css(\"height\", \"10px\");\n        status.css(\"border-radius\", \"50%\");\n        status.css(\"background-color\", self.getAlertColor(item.status));\n        status.css(\"display\", \"inline-block\");\n        wrap.css(\"padding\", \"5px 15px\");\n        label.text(item.label);\n        label.css(\"padding-right\", \"10px\");\n        wrap.append(status);\n        wrap.append(label);\n        wrap.on(\"mouseenter\", function(event) {\n          hitArea.find(\"#wrap\").css(\"background-color\", \"rgba(0,0,0,0)\");\n          wrap.css(\"background-color\", \"rgba(0,0,0,.3)\");\n        });\n        wrap.on(\"mouseleave\", function(event) {\n          wrap.css(\"background-color\", \"rgba(0,0,0,0)\");\n        });\n        wrap.on(\"click\", function(event) {\n          clickFn(item);\n        });\n        /**\n           item.$on(\"statusChanged\", function (node) {\n          status.css(\"background-color\", self.getAlertColor(item.status));\n        });**/\n        return wrap;\n      };\n      for (var i in data) {\n        popup.append(createDom(data[i]));\n      }\n      hitArea.append(titleArea);\n      hitArea.append(popup);\n      topo.prepend(hitArea);\n    };\n    //150 - 235\n    self.createAttrDisp = function(t, data, pos, callback, planeMode, height) {\n      var popup, body, title, wrap;\n      var orderKey = [\n        \"速度有效值\",\n        \"冲击平均值\",\n        \"震动\",\n        \"冲击\",\n        \"速度\",\n        \"温度\",\n        \"电压\",\n        \"电流\"\n      ];\n      height = height || 50;\n      function findIndex(arr, callback) {\n        var i, find;\n        for (i = 0; i < arr.length; i++) {\n          find = callback(arr[i], i);\n          if (find) {\n            return i;\n          }\n        }\n      }\n      function AttrDisp() {\n        popup = $(\"<div></div>\");\n        body = $(\"<div></div>\");\n        title = $(\"<div></div>\");\n        wrap = $(\"<table></table>\");\n        popup.css(\"position\", \"absolute\");\n        popup.css(\"padding\", \"2px\");\n        popup.css(\"background-color\", \"rgba(30,65,93,.9)\");\n        popup.css(\"border\", \"1px solid #000\");\n        popup.css(\"box-shadow\", \"1px 1px 10px 1px rgba(0,0,0,.5)\");\n        popup.css(\"z-index\", 99);\n        if (planeMode) {\n          body.css(\"max-height\", \"300px\");\n          body.css(\"min-width\", \"380px\");\n        } else {\n          data.sort(function(a, b) {\n            var ka =\n              findIndex(orderKey, function(d) {\n                return (a.kpiName || a.label).indexOf(d) != -1;\n              }) || a.label;\n            var kb =\n              findIndex(orderKey, function(d) {\n                return (b.kpiName || b.label).indexOf(d) != -1;\n              }) || b.label;\n            return ka < kb ? -1 : 1;\n          });\n          body.css(\"max-height\", height + \"px\");\n        }\n        body.css(\"overflow-y\", \"auto\");\n        body.css(\"overflow\", \"auto\");\n        title.css(\"text-align\", \"center\");\n        title.css(\"font-weight\", \"bold\");\n        title.css(\"padding\", \"3px\");\n        title.css(\"color\", \"#fff\");\n        title.css(\"background-color\", \"#295375\");\n        title.text(t);\n        popup.css(\"top\", pos.y + \"px\");\n        popup.css(\"left\", pos.x + \"px\");\n        popup.append(title);\n        var createDom = function(item) {\n          var tr = $(\"<tr></tr>\");\n          var td1 = $(\"<td></td>\");\n          var td2 = $(\"<td></td>\");\n          var td3 = $(\"<td></td>\");\n          var td4 = $(\"<td></td>\");\n          var time = item.arisingTime\n            ? useMomentFormat(item.arisingTime, \"yyyy-MM-dd hh:mm:ss\")\n            : \"-\";\n          td1.css(\"padding\", \"5px 6px 1px 6px\");\n          td2.css(\"padding\", \"5px 6px 1px 6px\");\n          td3.css(\"padding\", \"5px 6px 1px 6px\");\n          td4.css(\"padding\", \"5px 6px 1px 6px\");\n          td1.css(\"vertical-align\", \"middle\");\n          td2.css(\"vertical-align\", \"middle\");\n          td3.css(\"vertical-align\", \"middle\");\n          td4.css(\"vertical-align\", \"middle\");\n          var label = $(\"<span></span>\");\n          var button = $('<button id=\"button\" rel=\"popover\" ></button>');\n          if (!planeMode) {\n            button\n              .popover({\n                placement: \"right\",\n                trigger: \"manual\",\n                title: \"上报时间\",\n                container: \"body\",\n                content: function() {\n                  return time;\n                }\n              })\n              .on(\"mouseenter\", mouseenter)\n              .on(\"mouseleave\", mouseleave);\n            label.text(item.label);\n            td1.append(label);\n          } else {\n            var span1 = $(\"<span>\" + item.devName + \"</span>\");\n            var span2 = $(\"<span>\" + item.message + \"</span>\");\n            var span3 = $(\n              \"<span>\" +\n                useMomentFormat(item.arisingTime, \"yyyy-MM-dd hh:mm:ss\") +\n                \"</span>\"\n            );\n            span1.css(\"white-space\", \"normal\");\n            span2.css(\"white-space\", \"normal\");\n            span3.css(\"white-space\", \"normal\");\n            span1.css(\"display\", \"inline-block\");\n            span2.css(\"display\", \"inline-block\");\n            span3.css(\"display\", \"inline-block\");\n            span1.css(\"max-width\", \"100px\");\n            span2.css(\"max-width\", \"220px\");\n            td1.append(span1);\n            td3.append(span2);\n            td4.append(span3);\n          }\n          if (item.valueStr) {\n            button.text(item.valueStr);\n          } else if (item.value != \"-\") {\n            button.text(self.toFix(item.value, 2));\n          } else {\n            button.text(\"-\");\n          }\n          function mouseenter() {\n            if (t) {\n              $(this).popover(\"show\");\n            }\n          }\n          function mouseleave() {\n            $(this).popover(\"hide\");\n          }\n          label.css(\"color\", \"#aaa\");\n          label.css(\"padding-right\", \"10px\");\n          item.updateValue = function(value, unit) {\n            var val =\n              typeof value !== \"undefined\" && value !== null ? value : \"-\";\n            val = typeof val == \"number\" ? self.toFix(val, 2) : val;\n            if (unit != \"NA\" && unit) {\n              val += unit;\n            }\n            button.text(val);\n            this.value = value;\n          };\n          item.updateStatus = function(value) {\n            this.status = value;\n            button.css(\"background-color\", self.getAlertColor(value));\n          };\n          item.updateTime = function(t) {\n            if (t) {\n              time = useMomentFormat(t, \"yyyy-MM-dd hh:mm:ss\");\n            } else {\n              time = \"-\";\n            }\n          };\n          button.css(\"min-width\", \"50px\");\n          button.css(\"text-align\", \"center\");\n          button.css(\"line-height\", \"12px\");\n          button.css(\"border\", 0);\n          button.css(\"color\", \"#fff\");\n          button.css(\"border-radius\", \"10px\");\n          button.css(\"background-color\", self.getAlertColor(item.status));\n          button.on(\"click\", function(event) {\n            $(this).popover(\"destroy\");\n            var param = {\n              id: item.nodeId,\n              sensor: item.instance,\n              dataItems: item.id || item.kpiCode\n            };\n            if (item.arisingTime) {\n              param.enddate = new Date(item.arisingTime).getTime();\n              param.startdate = param.enddate - 2 * 60 * 60 * 1000;\n            }\n            self.navigateTo(\"index\", \"专业分析\", param);\n          });\n          if (item.label) {\n            tr.append(td1);\n          }\n          if (planeMode) {\n            tr.append(td3);\n            tr.append(td4);\n          }\n          tr.append(td2);\n          td2.append(button);\n          return tr;\n        };\n        for (var i in data) {\n          wrap.append(createDom(data[i]));\n        }\n        body.append(wrap);\n        popup.append(body);\n        topo.append(popup);\n      }\n      AttrDisp.prototype.destroy = function() {\n        popup.remove();\n      };\n      AttrDisp.prototype.getData = function() {\n        return data;\n      };\n      return new AttrDisp();\n    };\n    var itemins;\n\n    const CamraDic = {\n      A101: 1021,\n      A201: 1022,\n      A301: 1023,\n      A401: 1024,\n      A102: 1025,\n      A202: 1026,\n      A302: 1027,\n      A402: 1028,\n      A103: 1029,\n      A203: 1030,\n      A303: 1031,\n      A403: 1032,\n      A731: 1033,\n      A831: 1034,\n      A732: 1035,\n      A832: 1036,\n      A833: 1037,\n      A835: 1038\n    };\n    function bind(target, fn) {\n      return function() {\n        return fn.apply(target, arguments);\n      };\n    }\n    class Camera {\n      constructor(ip, path, protocol) {\n        this.ip = ip;\n        this.path = path;\n        this.protocol = protocol;\n      }\n      isValid() {\n        return this.valid;\n      }\n      getURLs() {\n        return this.ports.map(port => {\n          return this.protocol + this.ip + \":\" + port + this.path;\n        });\n      }\n    }\n    class CoalSiloCamera extends Camera {\n      constructor(ip, path, protocol, label) {\n        super(ip, path, protocol);\n        this.valid = new RegExp(\"^煤筒仓$\").test(label);\n        this.ports = [1039, 1040];\n      }\n    }\n    class RobotCamera extends Camera {\n      constructor(ip, path, protocol, label) {\n        super(ip, path, protocol);\n        let match = new RegExp(\"^(A\\\\d+)\\\\D.*$\").exec(label);\n        this.index = match ? match[1] : null;\n        this.valid = !!match;\n        if (!this.valid) {\n          return;\n        }\n        this.ports = [CamraDic[this.index]];\n      }\n    }\n    class SetCamera {\n      constructor(wrap, ip, path) {\n        this.ip = ip;\n        this.path = path;\n        this.wrap = wrap;\n        this.protocol = \"http://\";\n        this.init();\n      }\n      init() {\n        this.getResource().then(resource => {\n          this.cam = new CoalSiloCamera(\n            this.ip,\n            this.path,\n            this.protocol,\n            resource.label\n          );\n          if (this.cam.isValid()) {\n            this.createDom();\n            return;\n          }\n          this.cam = new RobotCamera(\n            this.ip,\n            this.path,\n            this.protocol,\n            resource.label\n          );\n          if (this.cam.isValid()) {\n            this.createDom();\n            return;\n          }\n          this.cam = null;\n        });\n      }\n      getResource() {\n        return psTreeData($state.params.id).getState();\n      }\n      createDom() {\n        let div = document.createElement(\"button\");\n        div.innerText = \"视频\";\n        div.style.position = \"absolute\";\n        div.style.top = \"20px\";\n        div.style.right = \"20px\";\n        div.style.zIndex = 999;\n        div.setAttribute(\"class\", \"btn btn-primary\");\n        div.onclick = bind(this, this.onclick);\n        this.wrap.prepend(div);\n      }\n      onclick() {\n        cms2.modal({\n          title: \"视频监控\",\n          directive: \"dialog-video-cam\",\n          width: \"60%\",\n          scope: scope,\n          params: {\n            mode: \"videoCam\",\n            url: this.cam.getURLs()\n          }\n        });\n      }\n    }\n\n    self.addCam = function() {\n      let ip = \"10.3.150.39\",\n        path = \"/test\",\n        camera = new SetCamera(topo, ip, path);\n    };\n    self.createCurrentStatus = function(txt, pos, status, abs) {\n      var wrap = topo.find(\"div#cStatus\");\n      var title = $(\"<div></div>\");\n      var addOn = $(\"<div></div>\");\n      var circle = $(\"<div></div>\");\n      var ins;\n      wrap = wrap.size() ? wrap : $('<div id=\"cStatus\"></div>');\n      wrap.children().remove();\n      function wholeClick() {\n        $(\"body\").off(\"click\");\n        ins.destroy();\n        if (itemins) {\n          itemins.destroy();\n        }\n      }\n\n      function clickFn(event) {\n        var p = persentage || 1;\n        var data = self.getValue(\"device/alerts\");\n        if (ins) {\n          ins.destroy();\n        }\n        $(\"body\").off(\"click\");\n        if (data) {\n          if (data.length > 0) {\n            ins = self.createAttrDisp(\n              \"告警信息\",\n              data,\n              {\n                x: pos.x / p - 200,\n                y: pos.y / p + 15\n              },\n              function(item) {\n                var nodeId = item.nodeId;\n                var resource;\n                var ROLE = self.getValue(\"global/ROLE\");\n                self.getDomainAreaLineTree_alertStatus(function(domaintree) {\n                  domaintree.traverse(function(node) {\n                    if (node.id == nodeId) {\n                      getResourceById(node.id).then(function(resource) {\n                        return ajax\n                          .post(getAttrsByModelId, resource.modelId)\n                          .then(function(attrs) {\n                            extend(node, resource);\n                            var sub,\n                              accessConfigs =\n                                node.physicalConfig.accessConfigs || {},\n                              sensor =\n                                accessConfigs.find(function(n) {\n                                  return n.instance === item.instance;\n                                }) || null;\n                            self.setParameter(\"id\", node.id);\n                            self.setValue(\"global/alertTime\", item.arisingTime);\n                            self.setValue(\"global/resource\", node);\n                            self.setValue(\"global/sensor\", sensor);\n                            self.setValue(\"global/instance\", item.instance);\n                            self.setParameter(\"sensorId\", sensor.dataItemId);\n                            if (item.specialty == \"Z\") {\n                              sub = 0;\n                            } else if (item.specialty == \"D\") {\n                              sub = 1;\n                            } else {\n                              sub = 7;\n                            }\n                            self.navigateToTab(\"analysis\", sub, 1);\n                          });\n                      });\n                    }\n                  });\n                });\n              },\n              true\n            );\n            setTimeout(function() {\n              $(\"body\").on(\"click\", wholeClick);\n            });\n          } else {\n            self.growl(\"暂无未处理的告警信息！\");\n          }\n        }\n      }\n      function currentStatus() {\n        wrap.css(\"position\", \"absolute\");\n        var p = abs ? 1 : persentage || 1;\n        wrap.css(\"cursor\", \"pointer\");\n        wrap.css(\"top\", pos.y + \"px\");\n        wrap.css(\"left\", pos.x + \"px\");\n        title.text(txt);\n        title.css(\"padding-right\", \"6px\");\n        title.css(\"font-weight\", \"bold\");\n        title.css(\"line-height\", \"14px\");\n        title.css(\"display\", \"inline-block\");\n        title.css(\"color\", \"#fff\");\n        addOn.css(\"display\", \"inline-block\");\n        circle.css(\"display\", \"block\");\n        circle.css(\"position\", \"absolute\");\n        circle.css(\"top\", \"1px\");\n        circle.css(\"width\", \"14px\");\n        circle.css(\"height\", \"14px\");\n        circle.css(\"border-radius\", \"50%\");\n        circle.css(\"background-color\", self.getAlertColor(status));\n        circle.css(\"box-shadow\", \"1px 1px 10px 1px rgba(0,0,0,1)\");\n        if (status > 0) {\n          title.css(\"text-decoration\", \"underline\");\n          wrap.off(\"click\");\n          wrap.on(\"click\", clickFn);\n        }\n        addOn.append(circle);\n        wrap.append(title);\n        wrap.append(addOn);\n        topo.append(wrap);\n        wrap.css(\"marginLeft\", -(14 + wrap.width()) / 2);\n      }\n      currentStatus.prototype.setAlarmStatus = function(status) {\n        circle.css(\"background-color\", self.getAlertColor(status));\n        if (status > 0) {\n          title.css(\"text-decoration\", \"underline\");\n          wrap.off(\"click\");\n          wrap.on(\"click\", clickFn);\n        }\n      };\n      return new currentStatus();\n    };\n\n    self.createCurrentStatusByItem = function(id, pos) {\n      function wholeClick() {\n        $(\"body\").off(\"click\");\n        if (itemins) itemins.destroy();\n      }\n\n      function clickFn(event) {\n        var p = persentage || 1;\n        var data = self.getValue(\"device/alerts\");\n        if (itemins) {\n          itemins.destroy();\n        }\n        data = data.filter(function(elm) {\n          return elm.nodeId == id;\n        });\n        $(\"body\").off(\"click\");\n        if (data.length > 0) {\n          itemins = self.createAttrDisp(\n            \"告警信息\",\n            data,\n            {\n              x: pos.x / p,\n              y: pos.y / p\n            },\n            function(item) {\n              var nodeId = item.nodeId;\n              var resource;\n              var ROLE = self.getValue(\"global/ROLE\");\n              self.getDomainAreaLineTree_alertStatus(function(domaintree) {\n                domaintree.traverse(function(node) {\n                  var sub;\n                  if (node.id == nodeId) {\n                    self.setValue(\"global/resource\", node);\n                    self.setValue(\"global/instance\", item.instance);\n                    self.setValue(\"global/sensor\", item);\n                    self.setValue(\"global/alertTime\", item.arisingTime);\n                    self.setParameter(\"sensorId\", item.id);\n                    if (node.specialty == \"Z\") {\n                      sub = 0;\n                    } else if (node.specialty == \"D\") {\n                      sub = 1;\n                    } else {\n                      sub = 7;\n                    }\n                    if (ROLE == 1) {\n                      self.navigateTo(\n                        \"index\",\n                        {\n                          main: 2,\n                          sub: sub,\n                          backHistory: 1\n                        },\n                        \"self\"\n                      );\n                    } else if (ROLE == 2) {\n                      self.navigateTo(\n                        \"index\",\n                        {\n                          main: 2,\n                          sub: sub,\n                          backHistory: 1\n                        },\n                        \"self\"\n                      );\n                    } else if (ROLE == 3) {\n                      self.navigateTo(\n                        \"index\",\n                        {\n                          main: 2,\n                          sub: sub,\n                          backHistory: 1\n                        },\n                        \"self\"\n                      );\n                    } else {\n                      self.growl(\"此角色无法显示特征曲线\");\n                    }\n                  }\n                });\n              });\n            },\n            true\n          );\n          setTimeout(function() {\n            $(\"body\").on(\"click\", wholeClick);\n          });\n        } else {\n          self.growl(\"此设备暂无未处理的告警信息！\");\n        }\n      }\n      clickFn();\n    };\n    self.createMarker = function(title, callback) {\n      $$.loadExternalJs([\"toolkit/configure/marker\"], function(threeDbar) {\n        var ins = threeDbar.init(svgId, {\n          title: title\n        });\n        callback(ins);\n      });\n    };\n    self.createAlarm = function(title, callback) {\n      $$.loadExternalJs([\"toolkit/configure/alarm\"], function(threeDbar) {\n        var ins = threeDbar.init(svgId, {\n          title: title\n        });\n        callback(ins);\n      });\n    };\n    self.createAlarmSmall = function(title, callback) {\n      $$.loadExternalJs([\"toolkit/configure/alarm\"], function(threeDbar) {\n        var ins = threeDbar.init(svgId, {\n          title: title,\n          smallMode: true\n        });\n        callback(ins);\n      });\n    };\n    self.create3Dbar = function(title, callback) {\n      $$.loadExternalJs([\"toolkit/configure/3dbarchart\"], function(threeDbar) {\n        var ins = threeDbar.init(svgId, {\n          title: title\n        });\n        //ins.setPos(cell.position());\n        //ins.setValue(0);\n        callback(ins);\n      });\n    };\n\n    //获得缩放的点位\n    self.getPersentageSite = function(position) {\n      var p = persentage || 1;\n      var tempPosition = { x: 0, y: 0 };\n      tempPosition.x = position.x / p;\n      tempPosition.y = position.y / p;\n      return tempPosition;\n    };\n    getExpression().then(function(expression) {\n      var clickEvent = expression.$attr(\"on/click\"),\n        initEvent = expression.$attr(\"on/init\"),\n        emptyEvent = expression.$attr(\"on/empty\"),\n        completeEvent = expression.$attr(\"on/complete\");\n      function openCellTools(cellView) {\n        if (previewMode) {\n          var cell = cellView.model || cellView,\n            modelId = getNumber(cell.get(\"modelId\")),\n            nodeId = getNumber(cell.get(\"nodeId\")),\n            kpiId = getNumber(cell.get(\"kpiId\")),\n            subViewId = getNumber(cell.get(\"subViewId\")),\n            text = cell.attr(\"text\");\n          if (cell.get(\"valueConfig\")) {\n            var isSend = false; //是否发送过\n            var dirModel = resourceUIService.rootModelsDic[modelId];\n            if (cell.get(\"valueConfig\") && dirModel) {\n              cell.get(\"valueConfig\").forEach(function(valueLvevel) {\n                if (\n                  valueLvevel.stateDisplay &&\n                  valueLvevel.valueDirective &&\n                  valueLvevel.valueDirectiveAttr\n                ) {\n                  isSend = true;\n                  dirModel.directives.forEach(function(dirObj) {\n                    if (valueLvevel.valueDirective == dirObj.id) {\n                      dirObj.value = valueLvevel.valueDirectiveAttr;\n                      self.sendItemDir(dirObj, nodeId);\n                    }\n                  });\n                }\n              });\n              if (\n                !isSend &&\n                cell.get(\"valueConfig\")[0].valueDirective &&\n                cell.get(\"valueConfig\")[0].valueDirectiveAttr\n              ) {\n                dirModel.directives.forEach(function(dirObj) {\n                  if (cell.get(\"valueConfig\")[0].valueDirective == dirObj.id) {\n                    dirObj.value = cell.get(\n                      \"valueConfig\"\n                    )[0].valueDirectiveAttr;\n                    self.sendItemDir(dirObj, nodeId);\n                  }\n                });\n              }\n            }\n            return;\n          }\n          if (typeof clickEvent == \"function\") {\n            clickEvent({\n              cellView: cell,\n              ui: {\n                modelId: modelId,\n                resourceId: nodeId,\n                kpiId: kpiId,\n                subViewId: subViewId\n              },\n              target: self,\n              self: self,\n              global: global,\n              tools: elemData\n            });\n          }\n        }\n      }\n      function getCellsMap(cells) {\n        var rs = {};\n        cells.forEach(function(cell) {\n          var nodeId = getNumber(getAttributes(cell, \"nodeId\")) || 0,\n            kpiId = getNumber(getAttributes(cell, \"kpiId\")) || 0;\n          rs[nodeId + \"_\" + kpiId] = rs[nodeId + \"_\" + kpiId] || [];\n          rs[nodeId + \"_\" + kpiId].push(cell);\n          rs[nodeId + \"_\" + 999999] = rs[nodeId + \"_\" + 999999] || [];\n          rs[nodeId + \"_\" + 999999].push(cell);\n          rs[nodeId + \"_\" + 999998] = rs[nodeId + \"_\" + 999998] || [];\n          rs[nodeId + \"_\" + 999998].push(cell);\n        });\n        return rs;\n      }\n      function getAttributes(obj, attr) {\n        return obj ? obj.attributes[attr] : null;\n      }\n      function getKpi(cell) {\n        return scope.$root.allDataItemsLoaded.then(function() {\n          var cellModelId = getNumber(getAttributes(cell, \"modelId\")),\n            cellKpiId = getNumber(getAttributes(cell, \"kpiId\"));\n          return success(\n            resourceUIService.rootModelsDic[cellModelId].kpiDic[cellKpiId]\n          );\n        });\n      }\n      function makeFunction(str) {\n        return function(value) {\n          if (typeof str !== \"string\") {\n            return;\n          }\n          try {\n            var fn = new Function(\"color\", \"(\" + str + \")( color )\"),\n              rs = fn(value);\n          } catch (e) {\n            console.error(e);\n            return;\n          }\n          return rs;\n        };\n      }\n\n      function sortBySeries(kpisMap) {\n        kpisMap = kpisMap || {};\n        return function(a, b) {\n          var item1 = kpisMap[a.dataItemId] || {},\n            item2 = kpisMap[b.dataItemId] || {},\n            s1 = item1.serial || 0,\n            s2 = item2.serial || 0;\n          return s1 - s2;\n        };\n      }\n\n      function getMeasurePointData(queue) {\n        var item,\n          rs = [];\n        queue = isArray(queue) ? queue : [queue];\n        function allObj(obj) {\n          var arr = [],\n            i;\n          for (i in obj) {\n            if (typeof obj[i] !== \"object\") {\n              return false;\n            }\n            arr.push(obj[i]);\n          }\n          return arr;\n        }\n        while ((item = queue.shift())) {\n          if (isArray(item)) {\n            [].push.apply(queue, item);\n          } else {\n            var arr = allObj(item);\n            if (arr) {\n              [].push.apply(queue, arr);\n            } else {\n              rs.push(item);\n            }\n          }\n        }\n        return rs;\n      }\n\n      function mapKpi(kpi) {\n        return {\n          id: kpi.dataItemId,\n          instance: kpi.instance,\n          label: kpi.kpiName,\n          value: \"-\",\n          status: 0,\n          arisingTime: kpi.arisingTime\n        };\n      }\n      function mapDataItem(nodeId) {\n        return function(kpi) {\n          return {\n            nodeId: nodeId,\n            id: kpi.dataItemId,\n            instance: kpi.instance,\n            value: \"-\",\n            status: 0,\n            arisingTime: kpi.arisingTime\n          };\n        };\n      }\n      function getAllUnits() {\n        return resourceUIService.unitLoader();\n      }\n      function getResourceById(id) {\n        resourceMap[id] =\n          resourceMap[id] ||\n          (function(defer) {\n            self.getResourceById(id, function(res) {\n              defer.resolve(res);\n            });\n            return defer.promise;\n          })(q.defer());\n        return resourceMap[id];\n      }\n      function getResourceByIds(ids) {\n        var proms,\n          rs = [];\n        function recursive(ids) {\n          var id = ids.shift();\n          if (id) {\n            return getResourceById(id).then(function(n) {\n              rs.push(n);\n              return recursive(ids);\n            });\n          } else {\n            return success(rs);\n          }\n        }\n        return recursive(ids.slice());\n      }\n      function getKpisByModelIds(ids) {\n        return resourceUIService.modelLoader().then(function(rootModelsDic) {\n          ids.forEach(function(d) {\n            kpisMap[d] = rootModelsDic[d] && rootModelsDic[d][\"kpiDic\"];\n          });\n          return success(kpisMap);\n        });\n      }\n      function getKpisByModelId(id) {\n        return resourceUIService.modelLoader().then(function(rootModelsDic) {\n          kpisMap[id] = rootModelsDic[id] && rootModelsDic[id][\"kpiDic\"];\n          return success(kpisMap);\n        });\n      }\n\n      self.render = function(inputJson) {\n        if (!inputJson && !viewId) {\n          return emptyEvent();\n        }\n        (inputJson\n          ? renderJSON(inputJson)\n          : getViewById(viewId).then(function(json) {\n              return renderJSON(json);\n            })\n        ).then(function(json) {\n          return getRapppid().then(function(joint) {\n            var graph = new joint.dia.Graph(),\n              config = makeConfig(json),\n              paper = new joint.dia.Paper(config),\n              paperScroller = new joint.ui.PaperScroller({\n                el: wrap,\n                paper: paper,\n                autoResizePaper: false,\n                padding: 0\n              }),\n              PatternLinkView = {\n                //渲染的模板\n                patternMarkup: [\n                  '<pattern id=\"pattern-<%= id %>\" patternUnits=\"userSpaceOnUse\">',\n                  '<image xlink:href=\"\"/>',\n                  \"</pattern>\"\n                ].join(\"\"),\n                initialize: function() {\n                  joint.dia.LinkView.prototype.initialize.apply(\n                    this,\n                    arguments\n                  );\n                  _.bindAll(this, \"fillWithPattern\");\n                },\n                render: function() {\n                  // 调用父节点的render方法\n                  joint.dia.LinkView.prototype.render.apply(this, arguments);\n                  // 建立监听\n                  this.listenTo(\n                    this.model,\n                    \"change:pattern change:patternColor\",\n                    this.update\n                  );\n                  return this;\n                },\n                remove: function() {\n                  // 确保我们停止了正在进行的模式更新。\n                  joint.util.cancelFrame(this.frameId);\n                  joint.dia.LinkView.prototype.remove.apply(this, arguments);\n                  this.clearPattern();\n                },\n                clearPattern: function() {\n                  if (this.pattern) {\n                    // 从DOM中删除模式。\n                    this.pattern.remove();\n                    this.pattern = null;\n                  }\n                },\n                update: function() {\n                  joint.dia.LinkView.prototype.update.apply(this, arguments);\n\n                  if (this.model && !this.model.get(\"pattern\")) {\n                    return this;\n                  }\n\n                  this.clearPattern();\n                  // 确保pattern不存在\n                  if (!this.pattern) {\n                    // 创建模式和图像元素。\n                    this.pattern = joint.V(\n                      _.template(this.patternMarkup)({\n                        id: this.id\n                      })\n                    );\n                    // 缓存图像元素以便更快地访问。\n                    this.patternImage = this.pattern.findOne(\"image\");\n\n                    // 将模式附加到pager的defs中。\n                    joint\n                      .V(this.paper.svg)\n                      .defs()\n                      .append(this.pattern);\n\n                    // 通知 '.connection' 路径使用pattern渲染\n                    var connection = joint\n                      .V(this.el)\n                      .findOne(\".connection\")\n                      .attr({\n                        stroke: \"url(#pattern-\" + this.id + \")\"\n                      });\n\n                    // 缓存原来的stroke-width\n                    this.strokeWidth = connection.attr(\"stroke-width\") || 1;\n                  }\n\n                  // 确保我们停止了正在进行的模式更新。\n                  joint.util.cancelFrame(this.frameId);\n\n                  this.frameId = joint.util.nextFrame(this.fillWithPattern);\n\n                  return this;\n                },\n                fillWithPattern: function() {\n                  var strokeWidth = this.strokeWidth;\n                  var bbox = joint.g\n                    .rect(joint.V(this.el).bbox(true))\n                    .moveAndExpand({\n                      x: -strokeWidth,\n                      y: -strokeWidth,\n                      width: 2 * strokeWidth,\n                      height: 2 * strokeWidth\n                    });\n                  var points = [].concat(\n                    this.sourcePoint,\n                    this.route,\n                    this.targetPoint\n                  );\n                  points = _.map(points, function(point) {\n                    return joint.g.point(point.x - bbox.x, point.y - bbox.y);\n                  });\n                  var canvas = document.createElement(\"canvas\");\n                  canvas.width = bbox.width;\n                  canvas.height = bbox.height;\n                  var ctx = canvas.getContext(\"2d\");\n                  ctx.lineWidth = strokeWidth;\n                  ctx.lineJoin = \"round\"; //lineJoin 属性设置或返回所创建边角的类型，当两条线交汇时。bevel/round/miter。\n                  ctx.lineCap = \"round\"; //lineCap 属性设置或返回线条末端线帽的样式。butt/round/square\n                  for (\n                    var i = 0, pointsCount = points.length - 1;\n                    i < pointsCount;\n                    i++\n                  ) {\n                    ctx.save();\n                    var gradientPoints = this.gradientPoints(\n                      points[i],\n                      points[i + 1],\n                      strokeWidth\n                    );\n                    var gradient = ctx.createLinearGradient.apply(\n                      ctx,\n                      gradientPoints\n                    );\n\n                    this.drawPattern.call(\n                      this,\n                      ctx,\n                      points[i],\n                      points[i + 1],\n                      strokeWidth,\n                      gradient\n                    );\n\n                    ctx.restore();\n                  }\n\n                  // generate data URI from the canvas\n                  var dataUri = canvas.toDataURL(\"image/png\");\n\n                  // update the pattern image and the dimensions\n                  this.pattern.attr(bbox);\n                  this.patternImage.attr({\n                    width: bbox.width,\n                    height: bbox.height,\n                    \"xlink:href\": dataUri\n                  });\n                },\n                // finds a gradient with perpendicular direction to a link segment\n                gradientPoints: function(from, to, width) {\n                  var angle = joint.g.toRad(from.theta(to) - 90);\n                  var center = joint.g.line(from, to).midpoint();\n                  var start = joint.g.point.fromPolar(width / 2, angle, center);\n                  var end = joint.g.point.fromPolar(\n                    width / 2,\n                    Math.PI + angle,\n                    center\n                  );\n                  return [start.x, start.y, end.x, end.y];\n                },\n                // A drawing function executed for all links segments.\n                drawPattern: function(ctx, from, to, width, gradient) {\n                  var innerWidth = width - 4;\n                  var outerWidth = width;\n                  var buttFrom = joint.g.point(from).move(to, -outerWidth / 2);\n                  var buttTo = joint.g.point(to).move(from, -outerWidth / 2);\n                  var lineColor = \"blue\";\n                  if (\n                    this.model.get(\"attrs\") &&\n                    this.model.get(\"attrs\")[\".connection\"]\n                  ) {\n                    lineColor = this.model.get(\"attrs\")[\".connection\"][\"stroke\"]\n                      ? this.model.get(\"attrs\")[\".connection\"][\"stroke\"]\n                      : lineColor;\n                  }\n                  var patternColor = \"#ffffff\";\n                  if (this.model.get(\"patternColor\")) {\n                    patternColor = this.model.get(\"patternColor\");\n                  }\n                  gradient.addColorStop(0.0, lineColor);\n                  gradient.addColorStop(0.5, patternColor);\n                  gradient.addColorStop(1.0, lineColor);\n\n                  ctx.beginPath();\n                  ctx.lineWidth = innerWidth;\n                  ctx.strokeStyle = gradient;\n                  ctx.moveTo(from.x, from.y);\n\n                  ctx.lineTo(to.x, to.y);\n                  ctx.stroke();\n                  ctx.closePath();\n                }\n              };\n            function setLevel(cell, value) {\n              var range = cell.attributes.range;\n              if (range) {\n                range = eval(range);\n              }\n              var persent = (value - range[0]) / (range[1] - range[0]);\n              cell.prop(\"attrs/text/text\", \"\");\n              cell.transition(\n                \"attrs/rect\",\n                {\n                  transform: \"translate(0,0)\",\n                  height: 60 * persent\n                },\n                {\n                  delay: 0,\n                  duration: 1000,\n                  valueFunction: function(start, end) {\n                    return function(time) {\n                      var height =\n                        start[\"height\"] +\n                        (end[\"height\"] - start[\"height\"]) * time;\n                      var all = 0;\n                      return {\n                        transform: \"translate(0,\" + (60 - height) + \")\",\n                        height: height\n                      };\n                    };\n                  }\n                }\n              );\n            }\n            function setOpenAngle(cell, value, element) {\n              var range = cell.attributes.range;\n              var id = cell.id;\n              openAngles[id].setValue(value);\n            }\n            function pathAnimate(cell, value, type, kpiRange) {\n              if (!kpiRange) kpiRange = [0, 1];\n              var p = (value - kpiRange[0]) / (kpiRange[1] - kpiRange[0]);\n              if (p < 0) p = -p;\n              if (p > 1) p = 1;\n              if (!cell.linkDomBox) {\n                var pathlink = linksDic[\"source:\" + cell.id]; //渲染的link\n                if (!pathlink) pathlink = linksDic[\"target:\" + cell.id];\n                if (!pathlink) return;\n                cell.linkDom = jQuery(\"[model-id=\" + pathlink.id + \"]\")[0]; //定义的link\n                cell.linkDomBox = cell.linkDom.getBoundingClientRect();\n              }\n              var movetox = -1;\n              var movetoy = -1;\n              if (type == \"number:1\") {\n                //X轴正方向\n                if (cell.offsetx == undefined) {\n                  cell.offsetx = cell.get(\"position\").x;\n                }\n                movetox = cell.offsetx + (cell.linkDomBox.width * p) / scale;\n              } else if (type == \"number:2\") {\n                //x轴负方向\n                if (cell.offsetx == undefined) {\n                  cell.offsetx = cell.get(\"position\").x;\n                }\n                movetox = cell.offsetx - (cell.linkDomBox.width * p) / scale;\n              } else if (type == \"number:3\") {\n                //y轴正方向\n                if (cell.offsety == undefined) {\n                  cell.offsety = cell.get(\"position\").y;\n                }\n                movetoy = cell.offsety + (cell.linkDomBox.height * p) / scale;\n              } else if (type == \"number:4\") {\n                //y轴负方向\n                if (cell.offsety == undefined) {\n                  cell.offsety = cell.get(\"position\").y;\n                }\n                movetoy = cell.offsety - (cell.linkDomBox.height * p) / scale;\n              } else if (type == \"number:5\") {\n                var connection = cell.linkDom.firstChild;\n                var cellDom = jQuery(\"[model-id=\" + cell.id + \"]\")[0];\n                var attrs = {\n                  \"xlink:href\": \"#\" + cellDom.firstChild.attributes[\"id\"].value,\n                  path: connection.attributes[\"d\"].value,\n                  dur: \"5s\",\n                  begin: \"1s\",\n                  rotate: \"auto\"\n                };\n                var animateMotion = joint.V(\"animateMotion\", attrs);\n                cellDom.firstChild.append(animateMotion.node);\n              }\n              if (movetox > -1) {\n                cell.transition(\"position/x\", movetox, {\n                  delay: 100,\n                  duration: 1000,\n                  timingFunction: joint.util.timing.inout,\n                  valueFunction: function(a, b) {\n                    return function(t) {\n                      return a + (b - a) * t;\n                    };\n                  }\n                });\n              }\n              if (movetoy > -1) {\n                cell.transition(\"position/y\", movetoy, {\n                  delay: 100,\n                  duration: 1000,\n                  timingFunction: joint.util.timing.inout,\n                  valueFunction: function(a, b) {\n                    return function(t) {\n                      return a + (b - a) * t;\n                    };\n                  }\n                });\n              }\n            }\n            function fill(cell, color) {\n              var type = getType(getAttributes(cell, \"type\"));\n              cell.transition(\"attrs/\" + type + \"/fill\", color, {\n                delay: 300,\n                duration: 500,\n                valueFunction: joint.util.interpolate.hexColor\n              });\n            }\n            function fillColor(cell, type, color, state, color2) {\n              var stateId = cell.get(\"stateId\");\n              if (stateId) {\n                if (state < 1) state = 0;\n                cell.state = state;\n                var colorAry = [\n                  color,\n                  \"#25bce7\",\n                  \"#e1cd0a\",\n                  \"#ed9700\",\n                  \"#e7675d\"\n                ];\n                var colorAry2 = [\n                  color2,\n                  \"#25bce7\",\n                  \"#e1cd0a\",\n                  \"#ed9700\",\n                  \"#e7675d\"\n                ];\n                if (stateId == \"number:1\" || stateId == \"number:3\") {\n                  if (type && colorAry[state]) {\n                    cell.transition(\n                      \"attrs/\" + type + \"/fill\",\n                      colorAry[state],\n                      {\n                        delay: 300,\n                        duration: 500,\n                        valueFunction: joint.util.interpolate.hexColor\n                      }\n                    );\n                  }\n                }\n                if (\n                  (stateId == \"number:2\" || stateId == \"number:3\") &&\n                  colorAry2[state]\n                ) {\n                  cell.transition(\"attrs/text/fill\", colorAry2[state], {\n                    delay: 300,\n                    duration: 500,\n                    valueFunction: joint.util.interpolate.hexColor\n                  });\n                }\n              }\n            }\n            function breathFlash(cell, type, color, state, opacityState) {\n              var stateId = cell.get(\"stateId\");\n              var flash = function(el) {\n                var defaultOpacity = opacityState ? 1 : el.opacity;\n                el.transition(\"attrs/\" + type + \"/opacity\", defaultOpacity, {\n                  delay: 0,\n                  duration: 3000,\n                  timingFunction: joint.util.timing.inout,\n                  valueFunction: function(a, b) {\n                    return function(t) {\n                      var o =\n                        a +\n                        b *\n                          (defaultOpacity -\n                            Math.abs(defaultOpacity - 2 * defaultOpacity * t));\n                      return Number(o.toFixed(2));\n                    };\n                  }\n                });\n              };\n\n              if (stateId) {\n                if (state < 0) state = 0;\n                var colorAry = [\n                  color,\n                  \"#25bce7\",\n                  \"#e1cd0a\",\n                  \"#ed9700\",\n                  \"#e7675d\"\n                ];\n                if (stateId == \"number:2\") {\n                  type = \"text\";\n                }\n                if (type) {\n                  if (!cell.opacity) {\n                    cell.opacity = jQuery.isNumeric(\n                      cell.prop(\"attrs/\" + type + \"/opacity\")\n                    )\n                      ? cell.prop(\"attrs/\" + type + \"/opacity\")\n                      : 1;\n                  }\n                  cell.state = state;\n                  cell.prop(\"attrs/\" + type + \"/opacity\", 0.1);\n                  cell.prop(\"attrs/\" + type + \"/fill\", colorAry[state]);\n                  if (cell.state > 0) {\n                    if (\n                      _.contains(\n                        cell.getTransitions(),\n                        \"attrs/\" + type + \"/opacity\"\n                      )\n                    )\n                      return;\n                    cell.on(\"transition:end\", function(el, path) {\n                      if (el.state > 0) {\n                        flash(el);\n                      } else {\n                        el.off(\"transition:end\");\n                        el.prop(\"attrs/\" + type + \"/opacity\", el.opacity);\n                      }\n                    });\n                    flash(cell);\n                  } else {\n                    cell.prop(\"attrs/\" + type + \"/opacity\", cell.opacity);\n                  }\n                }\n              }\n            }\n            function bubbleFlash(cell, type, color, state, opacityState) {\n              var stateId = cell.get(\"stateId\");\n              var flash = function() {\n                cell.prop(\"attrs/\" + type + \"/r\", 0);\n                cell.prop(\n                  \"attrs/\" + type + \"/opacity\",\n                  opacityState ? 1 : cell.opacity\n                );\n                cell.transition(\n                  \"attrs/\" + type,\n                  {\n                    r: cell.r,\n                    opacity: 0\n                  },\n                  {\n                    delay: 0,\n                    duration: 1500,\n                    valueFunction: function(start, end) {\n                      return function(time) {\n                        return {\n                          r: start[\"r\"] + (end[\"r\"] - start[\"r\"]) * time,\n                          opacity: start[\"opacity\"] - start[\"opacity\"] * time\n                        };\n                      };\n                    }\n                  }\n                );\n              };\n              if (stateId) {\n                if (state < 0) state = 0;\n                var colorAry = [\n                  color,\n                  \"#25bce7\",\n                  \"#e1cd0a\",\n                  \"#ed9700\",\n                  \"#e7675d\"\n                ];\n                if (stateId == \"number:2\") {\n                  type = \"text\";\n                }\n                if (type) {\n                  if (!cell.opacity) {\n                    cell.opacity = jQuery.isNumeric(\n                      cell.prop(\"attrs/\" + type + \"/opacity\")\n                    )\n                      ? cell.prop(\"attrs/\" + type + \"/opacity\")\n                      : 1;\n                    cell.r = cell.prop(\"attrs/\" + type + \"/r\");\n                    cell.prop(\n                      \"attrs/\" + type + \"/opacity\",\n                      opacityState ? 1 : cell.opacity\n                    );\n                  }\n                  cell.state = state;\n                  cell.prop(\"attrs/\" + type + \"/fill\", colorAry[state]);\n                  if (cell.state > 0) {\n                    if (_.contains(cell.getTransitions(), \"attrs/\" + type))\n                      return;\n                    cell.on(\"transition:end\", function(el) {\n                      if (el.state > 0) {\n                        flash();\n                      } else {\n                        cell.prop(\"attrs/\" + type + \"/opacity\", cell.opacity);\n                        cell.prop(\"attrs/\" + type + \"/r\", cell.r);\n                      }\n                    });\n                    flash();\n                  } else {\n                    cell.prop(\"attrs/\" + type + \"/opacity\", cell.opacity);\n                    cell.prop(\"attrs/\" + type + \"/r\", cell.r);\n                  }\n                }\n              }\n            }\n            function changeIconAndText(cell, state, type) {\n              if (!type) type = \"alertConfig\";\n              if (type == \"alertConfig\") {\n                var alertIcon = cell.get(\"alertConfig\");\n                if (alertIcon) {\n                  if (state < 1) state = 0;\n                  var alertConfig = cell.get(type);\n                  alertConfig.forEach(function(item) {\n                    if (item.id == state) {\n                      cell.prop(\"attrs/text/text\", item.alertText || \"\");\n                      if (item.alertIcon)\n                        cell.prop(\"attrs/image/xlink:href\", item.alertIcon);\n                    }\n                  });\n                }\n              } else if (type == \"valueConfig\") {\n                var valueConfig = cell.get(type);\n                valueConfig.forEach(function(item) {\n                  item.stateDisplay = false;\n                  if (item.valueText == state) {\n                    item.stateDisplay = true;\n                    if (item.valueText)\n                      cell.prop(\"attrs/text/text\", item.valueText);\n                    if (item.valueIcon)\n                      cell.prop(\"attrs/image/xlink:href\", item.valueIcon);\n                  }\n                });\n              }\n            }\n            function makeConfig(json) {\n              var width = topo.width(),\n                w = json.width,\n                h = json.height,\n                portion = h / w,\n                height = width * portion;\n              /** keep consequence with old version **/\n              persentage = w / width;\n              /** keep consequence with old version **/\n              return {\n                width: width,\n                height: height,\n                model: graph,\n                interactive: false,\n                scale: width / w,\n                perpendicularLinks: true,\n                gridSize: 0,\n                markAvailable: true,\n                linkConnectionPoint: joint.util.shapePerimeterConnectionPoint,\n                defaultLink: new joint.dia.Link({\n                  attrs: {\n                    \".marker-source\": {\n                      d: \"M 10 0 L 0 5 L 10 10 z\",\n                      transform: \"scale(0.001)\"\n                    },\n                    \".marker-target\": {\n                      d: \"M 10 0 L 0 5 L 10 10 z\"\n                    },\n                    \".connection\": {\n                      stroke: \"black\"\n                    }\n                  }\n                }),\n                linkView: joint.dia.LinkView.extend(PatternLinkView)\n              };\n            }\n            function removeSame(a, b) {\n              a.indexOf(b) == -1 ? a.push(b) : null;\n              return a;\n            }\n            function makeValueEval(rangeObj) {\n              var json = parse(rangeObj);\n              if (isArray(json) || typeof json !== \"object\" || json === null) {\n                return function removeSingnal(val) {\n                  if (typeof val === \"undefined\" || val === null) {\n                    return;\n                  }\n                  if (isArray(val)) {\n                    val = val.reduce(collapse, []);\n                    return val[0];\n                  }\n                  if (val[0] == \"[\" && val[val.length - 1] == \"]\") {\n                    val = parse(val);\n                    if (isArray(val)) {\n                      val = val.reduce(collapse, []);\n                      return val[0];\n                    } else {\n                      return \"-\";\n                    }\n                  }\n                  return val;\n                };\n              }\n              return function(val) {\n                return json[val];\n              };\n            }\n            paperScroller.scroll(0, 0);\n            paperScroller.$el.css(\"padding-left\", \"0\");\n            paperScroller.$el.css(\"padding-top\", \"0\");\n            paperScroller.$el.css(\"overflow\", \"hidden\");\n            paper.on(\"element:pointerup\", function(cellView) {\n              if (cellView.model instanceof joint.dia.Element) {\n                openCellTools(cellView);\n              }\n            });\n            paper.on(\"cell:pointerup\", function(cellView, evt) {\n              if (cellView.model instanceof joint.dia.Link) {\n                openCellTools(cellView);\n              }\n              if (cellView.model.attributes.extend == \"directive\") {\n                directive(cellView.model.attributes);\n              }\n              if (cellView.model.attributes.extend == \"tip\") {\n                tip(cellView.model.attributes);\n              }\n            });\n            if ($$.isString(json.bgimage)) {\n              paper.$el.css(\"background-image\", 'url(\"' + json.bgimage + '\")');\n              paper.$el.css(\"background-size\", \"contain\");\n              paper.$el.css(\"background-repeat\", \"no-repeat\");\n              paper.$el.css(\"background-position\", \"center\");\n            }\n            paper.el.oncontextmenu = function(evt) {\n              evt.preventDefault();\n            };\n            //paper.$el.css(\"background-color\", json.bgcolor);\n            graph.fromJSON(json);\n            svgId = wrap.find(\"svg\")[0];\n            topo\n              .find(\".viewport\")\n              .attr(\"transform\", \"scale(\" + config.scale + \")\");\n            function hiddenMarkers() {\n              $(\"g.marker-vertices\").attr(\"display\", \"none\");\n              $(\"g.marker-arrowheads\").attr(\"display\", \"none\");\n              $(\"g.link-tools\").attr(\"display\", \"none\");\n            }\n            hiddenMarkers();\n\n            /** --------------- keep consequence with old version ------------------- **/\n            if (events[\"$renderGraphComplete\"]) {\n              events[\"$renderGraphComplete\"](graph.getCells());\n            }\n            self.trigger(\"$renderGraphComplete\", graph.getCells());\n            if (events[\"$loadCiKpiComplete\"]) {\n              events[\"$loadCiKpiComplete\"](graph.getCells());\n            }\n            self.trigger(\"$loadCiKpiComplete\", graph.getCells());\n            /** --------------- keep consequence with old version ------------------- **/\n\n            graph.getCells().forEach(function(cell) {\n              var modelId = cell.get(\"id\");\n              var cursorStr = cell.get(\"cursor\");\n              var cursor = \"\";\n              if (cursorStr) {\n                var cursorAry = cursorStr.split(\":\");\n                if (\n                  cursorAry.length > 0 &&\n                  cursorAry[cursorAry.length - 1] != \"?\"\n                ) {\n                  cursor = cursorAry[cursorAry.length - 1];\n                }\n              }\n              var $_cell_el = paper.$el.find('g[model-id=\"' + modelId + '\"]');\n              if (cursor) {\n                $_cell_el.get(0).style = \"cursor: \" + cursor + \"!important\";\n              }\n            });\n            self.getDomainAreaLineTree_alertStatus(function(res) {\n              res\n                .getChildren(function() {\n                  return true;\n                })\n                .then(function(children) {\n                  getAllUnits().then(function(u) {\n                    units = u;\n                    var explainer = {\n                      \" \": {\n                        getNodeId: function(cell) {\n                          return getNumber(cell.attributes.nodeId);\n                        },\n                        getKpiId: function(cell) {\n                          return getNumber(cell.attr(\"kpiId\"));\n                        },\n                        getInstance: function(cell) {\n                          return undefined;\n                        },\n                        filter: function(cell) {\n                          return function(value) {\n                            var nodeId = getNumber(cell.attr(\"nodeId\")),\n                              kpiId = getNumber(cell.attr(\"kpiId\"));\n                            return (\n                              nodeId == value.nodeId && kpiId == value.kpiCode\n                            );\n                          };\n                        },\n                        handler: function(cell, valuelist) {}\n                      },\n                      value: {\n                        before: function(cell) {\n                          let ins = cell.attributes.attrs.text.text;\n                          cell.prop(\"_instance\", ins);\n                        },\n                        getNodeId: function(cell) {\n                          return getNumber(cell.attributes.nodeId);\n                        },\n                        getKpiId: function(cell) {\n                          return getNumber(cell.attributes.kpiId);\n                        },\n                        getInstance: function(cell) {\n                          return cell.attributes.attrs.text.text;\n                        },\n                        filter: function(cell) {\n                          return function(value) {\n                            var nodeId = getNumber(cell.attributes.nodeId),\n                              kpiId = getNumber(cell.attributes.kpiId),\n                              instance = cell.prop(\"_instance\");\n                            return (\n                              nodeId == value.nodeId &&\n                              kpiId == value.kpiCode &&\n                              instance == value.instance\n                            );\n                          };\n                        },\n                        handler: function(cell, valuelist) {\n                          let val = valuelist[0];\n                          changeIconAndText(\n                            cell,\n                            val ? val.value : 0,\n                            \"valueConfig\"\n                          );\n                        }\n                      },\n                      alarm: {\n                        before: function(cell) {\n                          cell.prop(\"attrs/text/text\", \" \");\n                        },\n                        getNodeId: function(cell) {\n                          return getNumber(cell.attributes.nodeId);\n                        },\n                        getKpiId: function(cell) {\n                          return undefined;\n                        },\n                        getInstance: function(cell) {\n                          return undefined;\n                        },\n                        filter: function(cell) {\n                          return function(value) {\n                            var nodeId = getNumber(cell.attr(\"nodeId\")),\n                              kpiId = getNumber(cell.attr(\"kpiId\"));\n                            return (\n                              nodeId == value.nodeId && kpiId == value.kpiCode\n                            );\n                          };\n                        },\n                        handler: function(cell, valuelist) {\n                          var nodeId = getNumber(cell.attributes.nodeId),\n                            node = children.find(function(child) {\n                              return child.id == nodeId;\n                            }),\n                            val =\n                              valuelist.find(function(value) {\n                                return (\n                                  value.nodeId == nodeId &&\n                                  value.kpiCode == 999999\n                                );\n                              }) || {},\n                            state = val.value || 0;\n                          changeIconAndText(cell, state);\n                        }\n                      },\n                      instance: {\n                        before: function(cell) {\n                          cell.prop(\"attrs/text/text\", \" \");\n                        },\n                        getNodeId: function(cell) {\n                          return getNumber(cell.attributes.nodeId);\n                        },\n                        getKpiId: function(cell) {\n                          return getNumber(cell.attributes.kpiId);\n                        },\n                        getInstance: function(cell) {\n                          return undefined;\n                        },\n                        filter: function(cell) {\n                          return function(value) {\n                            var nodeId = getNumber(cell.attributes[\"nodeId\"]),\n                              kpiId = getNumber(cell.attributes[\"kpiId\"]);\n                            return (\n                              nodeId == value.nodeId && kpiId == value.kpiCode\n                            );\n                          };\n                        },\n                        handler: function(cell, valuelist) {\n                          var nodeId = getNumber(cell.attributes.nodeId),\n                            dataItemId = getNumber(cell.attributes.kpiId),\n                            node = children.find(function(child) {\n                              return child.id == nodeId;\n                            }),\n                            val =\n                              valuelist.find(function(value) {\n                                return (\n                                  value.nodeId == nodeId &&\n                                  value.kpiCode == dataItemId\n                                );\n                              }) || {};\n                          //cell.prop( \"attrs/text/text\", \"-\" );\n                          getResourceById(nodeId).then(function(resource) {\n                            var allaccessConfigs = resource.$attr(\n                              \"physicalConfig/accessConfigs\"\n                            );\n                            getKpisByModelId(resource.modelId).then(function(\n                              kpiMap\n                            ) {\n                              var currentModelKpiMap = kpiMap[resource.modelId],\n                                kpiData =\n                                  kpisMap[resource.modelId][dataItemId] || {},\n                                range = makeValueEval(kpiData.range),\n                                unit = getUnit(units[kpiData.unit]);\n                              cell.prop(\"attrs/text/fill\", \"white\");\n                              cell.prop(\"attrs/text/visibility\", \"visible\");\n                              cell.prop(\n                                \"attrs/text/text\",\n                                formatVal(range(val.value)) + unit\n                              );\n                            });\n                          });\n                        }\n                      },\n                      alert: {\n                        getNodeId: function(cell) {\n                          return getNumber(cell.attr(\"nodeId\"));\n                        },\n                        getKpiId: function(cell) {\n                          return;\n                        },\n                        getInstance: function(cell) {\n                          return;\n                        },\n                        filter: function(cell) {\n                          return function(value) {\n                            var nodeId = getNumber(cell.attr(\"nodeId\"));\n                            return nodeId == value.nodeId && kpiId == 999999;\n                          };\n                        },\n                        handler: function(cell, valuelist) {\n                          var nodeId = getNumber(cell.attributes.nodeId),\n                            node = children.find(function(child) {\n                              return child.id == nodeId;\n                            });\n                          function run(ins) {\n                            ins.setPos(cell.attributes.position);\n                            ins.setAlarmStatus(node.state);\n                            ins.on(\"textClick\", function(event) {});\n                            ins.on(\"click\", function(event) {\n                              self.refresh({\n                                id: node.id\n                              });\n                            });\n                          }\n                          if (cell.$ins == null) {\n                            self.createAlarm(node.label, function(ins) {\n                              cell.$ins = ins;\n                              run(cell.$ins);\n                            });\n                          } else {\n                            run(cell.$ins);\n                          }\n                        }\n                      },\n                      baowualarm: {\n                        getNodeId: function(cell) {\n                          return getNumber(cell.attributes[\"nodeId\"]);\n                        },\n                        getKpiId: function(cell) {\n                          return;\n                        },\n                        getInstance: function(cell) {\n                          return;\n                        },\n                        filter: function(cell) {\n                          return function(value) {\n                            var nodeId = getNumber(cell.attributes.nodeId);\n                            return (\n                              nodeId == value.nodeId && value.kpiCode == 999999\n                            );\n                          };\n                        },\n                        handler: function(cell, valuelist) {\n                          var nodeId = getNumber(cell.attributes.nodeId),\n                            value = valuelist.find(function(v) {\n                              return v.nodeId == nodeId;\n                            });\n                          if (typeof value === \"undefined\") {\n                            return;\n                          }\n                          breathFlash(\n                            cell,\n                            \"rect\",\n                            \"#ff0000\",\n                            value.value,\n                            false\n                          );\n                        }\n                      },\n                      dataItem: {\n                        getNodeId: function(cell) {\n                          var currentdevice =\n                              cell.attributes.currentdevice || 0,\n                            nodeId = getNumber(cell.attributes.nodeId);\n                          return currentdevice ? res.id : nodeId;\n                        },\n                        getKpiId: function(cell) {\n                          return cell.attributes.dataItem;\n                        },\n                        getInstance: function(cell) {\n                          return getString(cell.attributes.sensor);\n                        },\n                        filter: function(cell) {\n                          var dataItem = cell.attributes.dataItem,\n                            sensor = cell.attributes.sensor;\n                          return function(value) {\n                            var kpiCode = value.kpiCode,\n                              instance = value.instance;\n                            if (kpiCode == 999997) {\n                              instance = instance.split(\"_\");\n                              kpiCode = instance[0];\n                              instance = instance[1];\n                            }\n                            return (\n                              sensor == instance &&\n                              dataItem.indexOf(kpiCode - 0) != -1\n                            );\n                          };\n                        },\n                        handler: function(cell, valuelist) {\n                          var currentdevice =\n                              cell.attributes.currentdevice || 0,\n                            dataItem = cell.attributes.dataItem,\n                            nodeId = currentdevice\n                              ? res.id\n                              : getNumber(cell.attributes.nodeId),\n                            sensor = getString(cell.attributes.sensor);\n                          getResourceById(nodeId).then(function(resource) {\n                            var allaccessConfigs = resource.$attr(\n                              \"physicalConfig/accessConfigs\"\n                            );\n                            getKpisByModelId(resource.modelId).then(function(\n                              kpiMap\n                            ) {\n                              var currentModelKpiMap = kpiMap[resource.modelId];\n                              return success(\n                                getMeasurePointData(\n                                  parse(resource.values.MeasurePointLocate)\n                                )\n                              ).then(function(sensors) {\n                                var sen = sensors.find(function(s) {\n                                    return s.name === sensor;\n                                  }),\n                                  kpis = allaccessConfigs\n                                    .filter(function(d) {\n                                      return (\n                                        d.instance == sensor &&\n                                        currentModelKpiMap[d.dataItemId] &&\n                                        !currentModelKpiMap[d.dataItemId][\n                                          \"needTransform\"\n                                        ]\n                                      );\n                                    })\n                                    .map(kpi => {\n                                      let obj = valuelist.find(val => {\n                                        return val.kpiCode == kpi.dataItemId;\n                                      });\n                                      obj\n                                        ? (kpi.arisingTime = obj.arisingTime)\n                                        : null;\n                                      return kpi;\n                                    }),\n                                  kpiFilter = kpis.filter(function(kpi) {\n                                    return (\n                                      dataItem.indexOf(kpi.dataItemId) != -1\n                                    );\n                                  }),\n                                  dt;\n                                kpis.sort(function(a, b) {\n                                  return (\n                                    currentModelKpiMap[a.dataItemId].serial -\n                                    currentModelKpiMap[b.dataItemId].serial\n                                  );\n                                });\n                                if (!sen) {\n                                  return;\n                                }\n                                if (kpiFilter.length > 0) {\n                                  (cell.$attrDisp =\n                                    cell.$attrDisp ||\n                                    self.createAttrDisp(\n                                      kpiFilter[0].kpiName,\n                                      kpiFilter.map(mapDataItem(nodeId)),\n                                      self.getPersentageSite(\n                                        cell.attributes.position\n                                      )\n                                    )),\n                                    function() {};\n                                  dt = remapAttrDist(cell.$attrDisp.getData());\n                                  valuelist.forEach(function(v) {\n                                    var dataItemId = v.kpiCode,\n                                      instance = v.instance;\n                                    if (dataItemId === 999997) {\n                                      instance = instance.split(\"_\");\n                                      dataItemId = instance[0];\n                                      instance = instance[1];\n                                    }\n                                    var rs = dt[instance + \"/\" + dataItemId],\n                                      kpiData =\n                                        kpisMap[resource.modelId][dataItemId],\n                                      range = makeValueEval(kpiData.range),\n                                      unit = getUnit(units[kpiData.unit]);\n                                    if (v.kpiCode == 999997) {\n                                      rs.updateStatus(v.value);\n                                    } else {\n                                      rs\n                                        ? rs.updateValue(\n                                            formatVal(range(v.value)) + unit\n                                          )\n                                        : null;\n                                      rs ? rs.updateTime(v.arisingTime) : null;\n                                    }\n                                  });\n                                }\n                              });\n                            });\n                          });\n                        }\n                      },\n                      kpis: {\n                        getNodeId: function(cell) {\n                          var currentdevice =\n                              cell.attributes.currentdevice || 0,\n                            nodeId = getNumber(cell.attributes.nodeId);\n                          return currentdevice ? res.id : nodeId;\n                        },\n                        getKpiId: function(cell) {\n                          return cell.attributes.dataItem;\n                        },\n                        getInstance: function(cell) {\n                          return getString(cell.attributes.sensor);\n                        },\n                        filter: function(cell) {\n                          var dataItem = cell.attributes.dataItem,\n                            sensor = getString(cell.attributes.sensor);\n                          return function(value) {\n                            var kpiCode = value.kpiCode,\n                              instance = value.instance;\n                            if (kpiCode == 999997) {\n                              instance = instance.split(\"_\");\n                              kpiCode = instance[0];\n                              instance = instance[1];\n                            }\n                            return (\n                              sensor == instance &&\n                              dataItem.indexOf(kpiCode - 0) != -1\n                            );\n                          };\n                        },\n                        handler: function(cell, valuelist) {\n                          var currentdevice =\n                              cell.attributes.currentdevice || 0,\n                            dataItem = cell.attributes.dataItem,\n                            dataItems,\n                            valuelistMap = valuelist.reduce(function(a, b) {\n                              a[b.kpiCode] = b;\n                              return a;\n                            }, {}),\n                            nodeId = currentdevice\n                              ? res.id\n                              : getNumber(cell.attributes.nodeId),\n                            sensor = getString(cell.attributes.sensor);\n                          if (valuelist && valuelist.length > 0) {\n                          }\n                          getResourceById(nodeId).then(function(resource) {\n                            var allaccessConfigs = resource.$attr(\n                              \"physicalConfig/accessConfigs\"\n                            );\n                            getKpisByModelId(resource.modelId).then(function(\n                              kpiMap\n                            ) {\n                              var currentModelKpiMap = kpiMap[resource.modelId];\n                              return success(\n                                getMeasurePointData(\n                                  parse(resource.values.MeasurePointLocate)\n                                )\n                              ).then(function(sensors) {\n                                var sen = sensors.find(function(s) {\n                                    return s.name === sensor;\n                                  }),\n                                  kpis = allaccessConfigs.filter(function(d) {\n                                    return (\n                                      d.instance == sensor &&\n                                      currentModelKpiMap[d.dataItemId] &&\n                                      !currentModelKpiMap[d.dataItemId][\n                                        \"needTransform\"\n                                      ]\n                                    );\n                                  }),\n                                  dt;\n                                kpis.sort(function(a, b) {\n                                  return (\n                                    currentModelKpiMap[a.dataItemId].serial -\n                                    currentModelKpiMap[b.dataItemId].serial\n                                  );\n                                });\n                                if (!sen) {\n                                  return;\n                                }\n                                dataItems = kpis\n                                  .filter(function(kpi) {\n                                    valuelistMap[kpi.dataItemId]\n                                      ? (kpi.arisingTime =\n                                          valuelistMap[\n                                            kpi.dataItemId\n                                          ].arisingTime)\n                                      : null;\n                                    return (\n                                      dataItem.indexOf(kpi.dataItemId) != -1\n                                    );\n                                  })\n                                  .map(mapKpi);\n                                //\n                                cell.$attrDisp =\n                                  cell.$attrDisp ||\n                                  self.createAttrDisp(\n                                    sen.label,\n                                    dataItems.map(d => {\n                                      d.nodeId = nodeId;\n                                      return d;\n                                    }),\n                                    self.getPersentageSite(\n                                      cell.attributes.position\n                                    ),\n                                    undefined,\n                                    undefined,\n                                    cell.get(\"absheight\")\n                                  );\n                                dt = remapAttrDist(cell.$attrDisp.getData());\n                                valuelist.forEach(function(v) {\n                                  if (nodeId != v.nodeId) {\n                                    return;\n                                  }\n                                  var dataItemId = v.kpiCode,\n                                    instance = v.instance;\n                                  if (dataItemId == 999997) {\n                                    instance = instance.split(\"_\");\n                                    dataItemId = instance[0];\n                                    instance = instance[1];\n                                  }\n                                  var rs = dt[instance + \"/\" + dataItemId],\n                                    kpiData =\n                                      kpisMap[resource.modelId][dataItemId] ||\n                                      {},\n                                    range = makeValueEval(kpiData.range),\n                                    unit = getUnit(units[kpiData.unit]);\n                                  if (typeof range(v.value) === \"undefined\") {\n                                  }\n                                  if (\n                                    typeof (formatVal(range(v.value)) + unit) ==\n                                    \"undefined\"\n                                  ) {\n                                  }\n                                  if (v.kpiCode == 999997) {\n                                    rs.updateStatus(v.value);\n                                  } else {\n                                    rs\n                                      ? rs.updateValue(\n                                          formatVal(range(v.value)) + unit\n                                        )\n                                      : null;\n                                    rs ? rs.updateTime(v.arisingTime) : null;\n                                  }\n                                });\n                              });\n                            });\n                          });\n                        }\n                      }\n                    };\n\n                    function toFix(n) {\n                      var num = n - 0;\n                      if (num !== num) {\n                        return n;\n                      }\n                      return num.toFixed(2);\n                    }\n\n                    function formatVal(val) {\n                      if (typeof val == \"undefined\" || val === null) {\n                        return \"-\";\n                      }\n                      if (typeof val === \"object\") {\n                        return toFix(val[0]);\n                      }\n                      return toFix(val);\n                    }\n\n                    function remapAttrDist(arr) {\n                      var obj = {};\n                      for (var i = 0; i < arr.length; i++) {\n                        obj[arr[i].instance + \"/\" + arr[i].id] = arr[i];\n                        obj[arr[i].instance + \"/999998\"] = arr[i];\n                        obj[arr[i].instance + \"/999997\"] = arr[i];\n                      }\n                      return obj;\n                    }\n                    function isNotUndefined(d) {\n                      return typeof d !== \"undefined\";\n                    }\n                    function attribute(cell, attr, val) {\n                      var attrs = attr.split(\"/\").filter(isNotUndefined),\n                        item;\n                      if (typeof val === \"undefined\") {\n                        rs = cell;\n                        while ((item = attrs.shift()) && rs) {\n                          rs = rs[item];\n                        }\n                        return rs;\n                      }\n                      var last = attrs.pop(),\n                        rs = cell;\n                      while ((item = attrs.shift()) && rs) {\n                        rs = rs[item];\n                      }\n                      if (typeof rs === \"object\") {\n                        rs[last] = val;\n                      }\n                    }\n                    function getNodeId(cell) {\n                      var ext = cell.attributes.extend || \" \",\n                        fn = attribute(explainer, [ext, \"getNodeId\"].join(\"/\"));\n                      return typeof fn === \"function\" ? fn(cell) : null;\n                    }\n\n                    function getKpiId(cell) {\n                      var ext = cell.attributes.extend || \" \",\n                        fn = attribute(explainer, [ext, \"getKpiId\"].join(\"/\"));\n                      return typeof fn === \"function\" ? fn(cell) : null;\n                    }\n                    function getInstance(cell) {\n                      var ext = cell.attributes.extend || \" \",\n                        fn = attribute(\n                          explainer,\n                          [ext, \"getInstance\"].join(\"/\")\n                        );\n                      return typeof fn === \"function\" ? fn(cell) : null;\n                    }\n                    function eachProp(obj, callback) {\n                      for (var i in obj) {\n                        callback(obj[i], i, obj);\n                      }\n                    }\n                    return success(graph).then(function(graph) {\n                      completeEvent &&\n                        completeEvent({\n                          target: self,\n                          self: self,\n                          global: global,\n                          tools: elemData\n                        });\n                      var cells = graph.getCells(),\n                        nodeIds = cells\n                          .map(function(cell) {\n                            return getNodeId(cell);\n                          })\n                          .filter(noEmpty)\n                          .reduce(removeSame, []),\n                        kpiIds = cells\n                          .map(function(cell) {\n                            return getKpiId(cell);\n                          })\n                          .filter(noEmpty)\n                          .concat([999997, 999998, 999999])\n                          .reduce(collapse, [])\n                          .reduce(removeSame, []),\n                        instances = cells\n                          .map(function(cell) {\n                            return getInstance(cell);\n                          })\n                          .filter(noEmpty)\n                          .reduce(removeSame, []);\n                      function startSocket(callback) {\n                        var paramSocket = {\n                            ciid: nodeIds.toString(),\n                            kpi: kpiIds.toString()\n                          },\n                          operation = \"register\";\n                        uuid = Math.uuid();\n                        function toArr(obj) {\n                          let rs = [];\n                          for (let i in obj) {\n                            for (let j in obj[i]) {\n                              for (let k in obj[i][j]) {\n                                rs.push(obj[i][j][k]);\n                              }\n                            }\n                          }\n                          return rs;\n                        }\n                        function throttle(fn, time) {\n                          let timer,\n                            obj = {};\n                          return function(event) {\n                            let nodeId = event.data.nodeId,\n                              kpiCode = event.data.nodeId,\n                              instance = event.data.instance || \"_\";\n                            if (timer == null) {\n                              timer = setTimeout(() => {\n                                fn.call(this, toArr(obj));\n                                timer = null;\n                                obj = {};\n                              }, time);\n                            } else {\n                              obj[nodeId] = obj[nodeId] || {};\n                              obj[nodeId][kpiCode] = obj[nodeId][kpiCode] || {};\n                              obj[nodeId][kpiCode][instance] = event.data;\n                            }\n                          };\n                        }\n                        ws.send(nodeIds, kpiIds);\n                        ws.on(\n                          throttle(function(events) {\n                            let dis = $(topo[0].parentNode).css(\"display\");\n                            if (dis != \"none\") {\n                              callback(events);\n                            }\n                          }, 3000)\n                        );\n                      }\n                      function inputValue(condition) {\n                        return function(valueList) {\n                          cells.forEach(function(cell) {\n                            var ext = cell.attributes.extend,\n                              config = explainer[ext || \" \"];\n                            if (typeof config == \"undefined\") {\n                              return;\n                            }\n                            var fitered = config.filter,\n                              handler = config[\"handler\"],\n                              data = valueList.filter(fitered(cell));\n                            if (condition(data)) {\n                              handler(cell, data);\n                            }\n                          });\n                        };\n                      }\n                      cells.forEach(function(cell) {\n                        var ext = cell.attributes.extend,\n                          config = explainer[ext || \" \"];\n                        if (typeof config == \"undefined\") {\n                          return;\n                        }\n                        config.before ? config.before(cell) : null;\n                      });\n\n                      function getData() {\n                        timer = null;\n                        timerCallback = valuelist => {\n                          inputValue(function(data) {\n                            return true;\n                          })(valuelist);\n                          timer = setTimeout(getData, 6000);\n                          /* startSocket(function(valuelist) {\n                              inputValue(function(data) {\n                                return data.length > 0;\n                              })(valuelist);\n                            }); */\n                        };\n                        if (\n                          nodeIds &&\n                          nodeIds.length > 0 &&\n                          kpiIds &&\n                          kpiIds.length > 0\n                        ) {\n                          getKpiValueList(\n                            nodeIds,\n                            kpiIds,\n                            instances,\n                            false\n                          ).then(function(d) {\n                            /* let last = d[d.length - 1];\n                            last.instance = last.kpiCode + \"_\" + last.instance;\n                            last.kpiCode = 999997;\n                            last.value = 4; */\n                            timerCallback && timerCallback(d);\n                          });\n                        } else {\n                          inputValue(function(data) {\n                            return true;\n                          })([]);\n                        }\n                      }\n                      getResourceByIds(nodeIds)\n                        .then(function(resources) {\n                          var rs = {},\n                            modelIds = resources.reduce(function(a, b) {\n                              if (a.indexOf(b.modelId) == -1) {\n                                a.push(b.modelId);\n                              }\n                              return a;\n                            }, []);\n                          return getKpisByModelIds(modelIds);\n                        })\n                        .then(function(d) {\n                          extend(kpisMap, d);\n                          getData();\n                        });\n                    });\n                  });\n                });\n            });\n          });\n        });\n      };\n      if (typeof initEvent == \"function\") {\n        try {\n          initEvent({\n            target: self,\n            self: self,\n            global: global,\n            tools: elemData\n          });\n        } catch (e) {\n          console.error(e);\n        }\n      } else {\n        self.render();\n      }\n    });\n    topo.css(style);\n    topo.css(\"position\", \"relative\");\n    topo.append(wrap);\n    self.on(\"$destroy\", function() {\n      clearTimeout(timer);\n      timer = undefined;\n      timerCallback = undefined;\n      SwSocket.unregister(uuid);\n    });\n    return topo;\n  };\n}\n","\n  export default function (q, timeout) {\n    function dealAttributeDefinitions(item, index) {\n      let ret = {},obj = {};\n      let key = Object.keys(item)[0];\n      ret.__key = key;\n      if(key === 'detailDialog' || key === 'directive'){\n        obj = item;\n      }else {\n        obj = item[key]\n      }\n      return Object.assign({}, ret, obj);\n    }\n\n    function generateTaskJobProcess(task) {\n      if (typeof task !== 'object' || JSON.stringify(task) === '{}' || task === null) {\n        return {};\n      }\n      if (!task[\"ticketTask\"] || !task[\"ticketTask\"][\"attributeDefinitions\"]) {\n        return {};\n      }\n      let taskValues = task[\"ticketTask\"]['values'];\n      return task[\"ticketTask\"][\"attributeDefinitions\"].map(dealAttributeDefinitions).reduce((prev, curr) => {\n        if(curr.__key == 'detailDialog'){\n          prev[\"detailDialog\"] = curr[\"detailDialog\"];\n        }\n        if(curr.__key == 'directive' ){\n          prev[\"directive\"] = curr[\"directive\"];\n        }\n        if (!curr.showInTracker) {\n          return prev;\n        }\n        prev[curr.__key] = {\n          key: curr.label,\n          value: taskValues[curr.__key]\n        };\n        return prev;\n\n      }, {});\n    }\n\n    return {\n      generateTaskJobProcess\n    }\n  }\n","\n/** mock **/\nimport { dateparser, extend, isArray, isObject } from \"ps-ultility\";\nexport default function(\n  rootScope,\n  q,\n  $state,\n  ajax,\n  growl,\n  psStore,\n  cms,\n  cms2,\n  psRouter,\n  psBtnClick\n) {\n  let DicMap = {};\n  function _findValue(data, attr, debug) {\n    let obj = cms2.findValue(data, attr) || {},\n      { value, path } = obj;\n    let val = changeValue(attr, value);\n    if (path && debug == true) {\n      console.warn(`Debug find value from path = \"${path}\"`);\n    }\n    return val;\n  }\n  function attr(data, atrs) {\n    let arr = atrs.split(/\\/|\\./g),\n      item;\n    while ((item = arr.shift())) {\n      if (data) {\n        data = data[item];\n      } else {\n        return;\n      }\n    }\n    return data;\n  }\n  function _createText(name) {\n    if (!isArray(name)) {\n      throw new Error(`name has to be a array`);\n    }\n    return {\n      key: name[0],\n      value: name[1]\n    };\n  }\n  function _createDicAttr(name) {\n    if (!isArray(name)) {\n      throw new Error(`name has to be a array`);\n    }\n    name[2] = _findValue(this, name[2]);\n    return _createDic(name);\n  }\n  function _createDic(name) {\n    if (!isArray(name)) {\n      throw new Error(`name has to be a array`);\n    }\n    let obj = attr(DicMap, name[1]);\n    if (obj == null) {\n      return {\n        key: name[0],\n        value: \"-\"\n      };\n    }\n    let map = obj.reduce((a, b) => {\n      a[b.valueCode] = b;\n      return a;\n    }, {});\n    return {\n      key: name[0],\n      value: map[name[2]] ? map[name[2]].label : \"-\"\n    };\n  }\n  function _createAttr(name) {\n    if (!isArray(name)) {\n      throw new Error(`name has to be a array`);\n    }\n    return {\n      key: name[0],\n      value: attr(this, name[1]) || \"-\"\n    };\n  }\n  function _findAttr(name, debug) {\n    if (!isArray(name)) {\n      throw new Error(`name has to be a array`);\n    }\n    let value = _findValue(this, name[1], debug);\n    return {\n      key: name[0],\n      value: value == null ? \"-\" : changeValue(name[0], value)\n    };\n  }\n  function isTimeLike(str) {\n    return new RegExp(\n      \"\\\\d{4}-\\\\d{2}-\\\\d{2}T\\\\d{2}:\\\\d{2}:\\\\d{2}\\\\.\\\\d{3}\\\\+\\\\d{4}\",\n      \"g\"\n    ).test(str);\n  }\n  function changeValue(name, val) {\n    if (isTimeLike(val)) {\n      return dateparser(val).getDateString(\"yyyy-MM-dd,hh:mm:ss\");\n    }\n    return cms2.getExplainerFromDiction(name)(val);\n  }\n  function _createTitle(title) {\n    return {\n      type: \"title\",\n      value: title,\n      style: {\n        color: \"#2997bb\"\n      }\n    };\n  }\n  function _createButton(arr, target) {\n    let name = arr[0],\n      handler = arr[1],\n      title = arr[2],\n      fn = psBtnClick[handler];\n\n    return {\n      type: \"button\",\n      cls: \"btn btn-primary btn-sm\",\n      label: name,\n      click: () => {\n        if (fn) {\n          fn.call(target || this, name, title);\n        } else {\n        }\n      }\n    };\n  }\n  class TrackerNode {\n    constructor(d, p, n) {\n      extend(this, d);\n      this._data = d;\n      this.prev = p;\n      this.next = n;\n    }\n    createAttr() {\n      return _createAttr.apply(this, arguments);\n    }\n    getAlertSeverity(n) {\n      return [\"正常\", \"正常\", \"注意\", \"警告\", \"告警\"][n] || \"空\";\n    }\n    findAttr() {\n      return _findAttr.apply(this, arguments);\n    }\n    createTitle() {\n      return _createTitle.apply(this, arguments);\n    }\n    createGroup(title, attr, callback) {\n      let arr = this.findValue(attr) || [];\n      return arr.map((d, i) => {\n        let n = arr[i + 1] || null,\n          p = arr[i - 1] || null,\n          nd = new TrackerNode(d, p, n);\n        return {\n          title: i == 0 ? title : \"\",\n          icon: i == 0 ? true : false,\n          time: nd.findValue(\"arisingTime\"),\n          data: (callback && callback.call(nd, nd)) || []\n        };\n      });\n    }\n    createButton() {\n      return _createButton.apply(this, arguments);\n    }\n    findValue() {\n      return _findValue.apply(this, [this, ...arguments]);\n    }\n    createText() {\n      return _createText.apply(this, arguments);\n    }\n    createDic() {\n      return _createDic.apply(this, arguments);\n    }\n    createDicAttr() {\n      return _createDicAttr.apply(this, arguments);\n    }\n    hasAttr(attr) {\n      return typeof this.findValue(attr) != \"undefined\";\n    }\n    isFirstTimeGenerated() {\n      return !this.hasRepeat;\n    }\n    getEvaluate() {\n      let alertEvaluateInfoList = this.findValue(\"alertEvaluateInfoList\") || [];\n      alertEvaluateInfoList = alertEvaluateInfoList[0] || {};\n      let evaluateCheckboxlist = alertEvaluateInfoList.evaluateCheckboxlist;\n      return [\"空\", \"正确\", \"不正确\"][evaluateCheckboxlist] || \"空\";\n    }\n    getDealReason() {\n      let complexDealType = _findValue(this, \"dealType\"),\n        tallyCheckboxlist = _findValue(this, \"tallyCheckboxlist\"),\n        fd = tallyCheckboxlist.find(d => d.id == complexDealType);\n      return fd ? fd.label : \"-\";\n    }\n    getHandlerType() {\n      let dealType = _findValue(this, \"dealType\");\n      return [\"暂不处理\", \"自行处理\", \"发起委托\"][dealType - 1];\n    }\n    getAlertState() {}\n    getTaskJob() {\n      /*  任务分类; */\n      return cms2.getTaskJob(this.getAppSource());\n    }\n    getAppSource() {\n      /*  任务来源; */\n      let variables = this.ticketTask.variables || {};\n      return cms2.getAppSource(variables);\n    }\n    createArtificalAlertHead(planName) {\n      let alertItemList = this.findValue(\"alertItemList\"),\n        onlineRuleId = this.findValue(\"onlineRuleId\");\n      if (alertItemList == null || !alertItemList.length > 0) {\n        return [];\n      }\n      let rs = [];\n      [].push.apply(\n        rs,\n        this.createGroup(\"告警信息\", \"alertItemList\", function(n) {\n          return [\n            //n.createAttr([\"告警类型\", \"alertTitle\"]),\n            n.createDic([\"报警级别\", \"alertSeverity\", n.severity]),\n            n.createDic([\"报警来源\", \"appName\", n.appName]),\n            n.createAttr([\"告警描述\", \"alertTitle\"])\n          ];\n        })\n      );\n      [].push.call(\n        rs,\n        {\n          title: \"智能决策\",\n          icon: \"fa fa-user fa-fw fa-circle-o bg-green\",\n          time: this.findValue(\"executeTime\"),\n          data: [this.findAttr([\"异常名称\", \"taskMessage\"])]\n        },\n        {\n          title: \"智能方案\",\n          icon: \"fa fa-user fa-fw fa-circle-o bg-green\",\n          time: this.findValue(\"executeTime\"),\n          data: [\n            this.createText([\"解决方案\", planName || \"状态维护\"]),\n            this.findAttr([\"标准项目编号\", \"standardProjectId\"]),\n            this.findAttr([\"标准项目名称\", \"standardProjectName\"]),\n            this.createButton([\n              \"查看规则\",\n              onlineRuleId ? \"checkOnlineRule\" : \"checkOnlineRule\",\n              \"查看规则\"\n            ])\n          ]\n        }\n      );\n      return rs;\n    }\n    createAlertAhead() {\n      let rs = [],\n        alertItemList = this.findValue(\"alertItemList\"),\n        onlineRuleId = this.findValue(\"onlineRuleId\");\n      if (alertItemList) {\n        rs.push({\n          title: \"报警产生\",\n          icon: \"fa fa-user fa-fw fa-circle-o bg-green\",\n          time: this.findValue(\"alertArisingTime\"),\n          data: alertItemList\n            .map(d => {\n              return [\n                this.createDic([\"报警级别\", \"alertSeverity\", d.severity]),\n                this.createDic([\"报警来源\", \"appName\", d.appName]),\n                this.createText([\"报警描述\", d.alertTitle])\n              ];\n            })\n            .reduce(function(a, b) {\n              return a.concat(b);\n            }, [])\n        });\n      } else if (onlineRuleId) {\n        let { onlineRule } = this;\n        let itemList = onlineRule ? onlineRule[\"itemList\"] : [];\n        itemList = itemList.map(({ kpiThreshold }) => kpiThreshold);\n        if (itemList.length > 0) {\n          rs.push({\n            title: \"报警产生\",\n            icon: \"fa fa-user fa-fw fa-circle-o bg-green\",\n            time: this.findValue(\"alertArisingTime\"),\n            data: itemList\n              .map(d => {\n                return [\n                  this.createText([\"报警类型\", d.title]),\n                  this.createDic([\"报警级别\", \"alertSeverity\", d.severity]),\n                  this.createText([\"报警来源\", d.instanceName]),\n                  this.createText([\"报警描述\", d.desc])\n                ];\n              })\n              .reduce(function(a, b) {\n                return a.concat(b);\n              }, [])\n          });\n        }\n      }\n      return rs;\n    }\n  }\n  function psTrackerChart(trackerList) {\n    class PsTrackerChart {\n      constructor(trackerList) {\n        this._loaded = psStore.get(\"getAllDicts\").then(d => {\n          let len = trackerList.length;\n          (DicMap = d.reduce((a, b) => {\n            a[b.dictCode] = a[b.dictCode] || [];\n            a[b.dictCode].push(b);\n            return a;\n          }, {})),\n            (trackerList = trackerList\n              .filter(({ render }) => render)\n              .map(({ render, data, prev, next }, i) => {\n                let dt = new TrackerNode(data, prev, next);\n                dt.hasRepeat = trackerList.slice(0, i).some(tracker => {\n                  return (\n                    tracker.data.ticketTask.taskConfigName ==\n                    data.ticketTask.taskConfigName\n                  );\n                });\n                return {\n                  render: render,\n                  node: dt\n                };\n              }));\n          this.list = trackerList\n            .map(({ node, render }, i) => {\n              node.first = trackerList[0];\n              node.next = trackerList[i + 1] || null;\n              node.prev = trackerList[i - 1] || null;\n              node.last = trackerList[trackerList.length - 1];\n              node.$data = render\n                .apply(node, [\n                  function createAttr() {\n                    return _createAttr.apply(node, arguments);\n                  },\n                  function findAttr() {\n                    return _findAttr.apply(node, arguments);\n                  },\n                  function createTitle() {\n                    return _createTitle.apply(node, arguments);\n                  },\n                  function createButton() {\n                    return _createButton.apply(node, arguments);\n                  },\n                  function findValue() {\n                    return _findValue.apply(node, [node, ...arguments]);\n                  },\n                  function createText() {\n                    return _createText.apply(node, arguments);\n                  },\n                  function createDic() {\n                    return _createDic.apply(node, arguments);\n                  },\n                  function createDicAttr() {\n                    return _createDicAttr.apply(node, arguments);\n                  }\n                ])\n                .map(d => {\n                  d._data = node;\n                  return d;\n                });\n              return node.$data;\n            })\n            .reduce((a, b) => {\n              b = !isArray(b) ? [b] : b;\n              return a.concat(b);\n            }, []);\n        });\n      }\n    }\n    return new PsTrackerChart(trackerList);\n  }\n  return psTrackerChart;\n}\n","\n/** mock **/\nexport default function(rootScope, q) {\n  function psTrackerCreator(factory) {\n    class PsTrackerCreator {\n      intelligenceFixing() {\n        function expression(\n          createAttr,\n          findAttr,\n          createTitle,\n          createButton,\n          findValue\n        ) {\n          /** 智能检修 **/\n          return [\n            {\n              title: \"智能检修\",\n              icon: \"fa fa-user fa-fw fa-circle-o bg-green\",\n              time: findValue(\"executeTime\"),\n              data: [\n                findAttr([\"工单号\", \"ticketNo\"]),\n                findAttr([\"任务分类\", \"taskCategory\"]),\n                findAttr([\"任务来源\", \"appName\"]),\n                findAttr([\"处理人\", \"handlerName\"]),\n                createButton([\"检修方案\", \"fixingPlan\"]),\n                createButton([\"检修实绩\", \"fixingResult\"])\n              ]\n            }\n          ];\n        }\n      }\n      statusKeeping() {\n        function expression(\n          createAttr,\n          findAttr,\n          createTitle,\n          createButton,\n          findValue\n        ) {\n          /** 节点模版 **/\n          return [\n            {\n              title: \"状态维护\",\n              icon: \"fa fa-user bg-aqua\",\n              time: findValue(\"executeTime\"),\n              data: [\n                findAttr([\"工单号\", \"ticketNo\"]),\n                findAttr([\"任务分类\", \"message\"]),\n                findAttr([\"任务来源\", \"appName\"]),\n                findAttr([\"维护项目编号\", \"standardNo\"]),\n                findAttr([\"维护项目名称\", \"standardName\"]),\n                findAttr([\"实施依据\", \"maintainBasis\"]),\n                findAttr([\"处理人\", \"ticket.handlerName\"]),\n                createButton([\"维护实绩\", \"keepResult\"])\n              ]\n            },\n            {\n              title: \"智能决策\",\n              icon: \"fa fa-user bg-aqua\",\n              time: findValue(\"executeTime\"),\n              data: [findAttr([\"异常名称\", \"maintainBasis\"])]\n            },\n            {\n              title: \"智能方案\",\n              icon: \"fa fa-user bg-aqua\",\n              time: findValue(\"executeTime\"),\n              data: [\n                findAttr([\"解决方案\", \"maintainBasis\"]),\n                findAttr([\"维护项目编号\", \"standardNo\"]),\n                findAttr([\"维护项目名称\", \"standardName\"]),\n                createButton([\"规则详情\", \"keepResult\"])\n              ]\n            }\n          ];\n        }\n      }\n    }\n  }\n  return psTrackerCreator;\n}\n","\n/** mock **/\nimport { dateparser, extend, isArray, isObject } from \"ps-ultility\";\nexport default function(\n  rootScope,\n  q,\n  $state,\n  ajax,\n  growl,\n  psStore,\n  cms,\n  psRouter,\n  psBtnClick\n) {\n  function isNotEmpty(d) {\n    if (typeof d == \"number\") {\n      return true;\n    }\n    return !!d;\n  }\n  function isEmpty(d) {\n    return typeof d == \"undefined\" || d === null || d === \"\";\n  }\n  function resolve(d) {\n    let defer = q.defer();\n    defer.resolve(d);\n    return defer.promise;\n  }\n  function attr(cell, attr, val) {\n    let attrs = attr.split(\"/\").filter(isNotEmpty),\n      item;\n    if (typeof val === \"undefined\") {\n      rs = cell;\n      while ((item = attrs.shift()) && rs) {\n        rs = rs[item];\n      }\n      return rs;\n    }\n    let last = attrs.pop(),\n      rs = cell;\n    while ((item = attrs.shift()) && rs) {\n      rs = rs[item];\n    }\n    if (typeof rs === \"object\") {\n      rs[last] = val;\n    }\n  }\n  function findValue(data, attr) {\n    class LoopItem {\n      constructor(data, parents, path) {\n         \n        this.data = data;\n        this.parents = parents || [];\n        this.path = path || [];\n      }\n      hasParent(parent) {\n        return this.parents.some(p => p == parent);\n      }\n    }\n    let queue = [new LoopItem(data)],\n      item;\n    while ((item = queue.shift())) {\n      let { data, parents, path } = item;\n      if (data.hasOwnProperty(attr)) {\n        return {\n          value: data[attr],\n          path: path.concat([attr]).join(\"/\")\n        };\n      }\n      for (let i in data) {\n        if (\n          data.hasOwnProperty(i) &&\n          isObject(data[i]) &&\n          !item.hasParent(data[i])\n        ) {\n          queue.push(\n            new LoopItem(data[i], parents.concat([data]), path.concat([i]))\n          );\n        }\n      }\n    }\n  }\n  function tracker(trackersListData) {\n    const _attrsMap = new Map(),\n      target = cms(undefined, rootScope);\n    class TrackersList {\n      constructor(trackersList, createTrust) {\n        trackersList[1].createTrust = createTrust;\n        this._normalTrackersMap = new Map();\n        this._firstTracker = new AlertTracker(trackersList[1]);\n        let checkName = name => {\n          let i = \"\";\n          while (this._normalTrackersMap.has(name + \"\" + i)) {\n            i = i - 0 + 1;\n          }\n          return name + \"\" + i;\n        };\n        this._normalTrackers = trackersList\n          .filter(({ logType }) => logType === \"userTask\")\n          .map((tracker, i) => {\n            tracker.createTrust = createTrust;\n            let d = new NormalTracker(tracker, i);\n            this._normalTrackersMap.set(checkName(d.__taskConfigName), d);\n            return d;\n          });\n      }\n    }\n    class NormalTracker {\n      constructor(data, i) {\n        this._data = data;\n        this._index = i;\n        this.createTrust = data.createTrust;\n        this._directive = this.getDirective();\n        this._attrsMap = _attrsMap;\n        this.setTicketTask();\n        this.setTicketTaskVariables();\n        this.setTicketTaskValues();\n        this.setTicketValues();\n\n        /** 拼接组合一些基本属性 **/\n\n        this.setTaskConfigName();\n        this.setTicketNo();\n        this.setTime();\n        this.setSpecailName();\n        this.setAlertTitle();\n        this.setTaskCategory();\n        this.setHandlerName();\n        this.setMultipleConclusion();\n        this.setCessingScheme();\n        this.setStandardProjectId();\n        this.setStandardProjectName();\n        this.setRecallExplain();\n        this.setTheCreateUserName();\n        this.setTicketTitle();\n        this.setDealType();\n        this.setTallyCheck();\n        this.setKeyAttrs();\n        this.__dicsloaded__ = psStore\n          .get(\"getAllDicts\")\n          .then(dics => {\n            this.setAppName(dics);\n            this.setStatusGrades(dics);\n            this.setSeverity(dics);\n            return resolve(dics);\n          })\n          .catch(e => {\n            let dics = {};\n            console.warn(e);\n            this.setAppName(dics);\n            this.setStatusGrades(dics);\n            this.setSeverity(dics);\n            return resolve(dics);\n          });\n      }\n      getDirective() {\n        let data = this._data;\n        let category = attr(data, \"/ticketTask/variables/ticket/category\");\n        let tickeTaskStatus = attr(\n          data,\n          \"/ticketTask/variables/ticket/values/tickeTaskStatus\"\n        );\n        if (category == 200) {\n          this.setIcon(\"fa fa-user bg-aqua\");\n        } else {\n          this.setIcon(\"fa fa-user bg-aqua bg-orange\");\n        }\n        this.__category = category;\n        this.__tickeTaskStatus = tickeTaskStatus;\n        return `process-${tickeTaskStatus}`;\n      }\n      setTaskConfigName() {\n        let taskConfigName = attr(this._data, \"ticketTask/taskConfigName\");\n        this.__taskConfigName = taskConfigName;\n      }\n      setTicketTask() {\n        let ticketTask = attr(this._data, \"ticketTask\");\n        this._ticketTask = ticketTask;\n      }\n      setTicketTaskValues() {\n        let ticketTaskValues = attr(this._data, \"ticketTask/values\");\n        this._ticketTaskValues = ticketTaskValues || {};\n      }\n      setTicketTaskVariables() {\n        let ticketTaskVariables = attr(this._data, \"ticketTask/variables\");\n        this._ticketTaskVariables = ticketTaskVariables || {};\n      }\n      setTicketValues() {\n        let ticketValues = attr(\n          this._data,\n          \"ticketTask/variables/ticket/values\"\n        );\n        this._ticketValues = ticketValues;\n      }\n      setKeyAttrs() {\n        let creatorName = attr(\n          this._data,\n          \"ticketTask/variables/ticket/creatorName\"\n        );\n        let category = attr(this._data, \"ticketTask/variables/ticket/category\");\n        this._creatorName = creatorName;\n        this._category = category;\n      }\n      setAlertTitle() {\n        /** 报警描述 [ ticketTitle ] **/\n        let alertTitle = attr(\n          this._data,\n          \"ticketTask/variables/ticket/values/alertTitle\"\n        );\n        this._attrsMap.set(\"报警描述\", alertTitle);\n        this._alertTitle = alertTitle;\n      }\n\n      setTallyEvaluateCheckboxlist() {\n        /** 评价等级 [ tallyEvaluateCheckboxlist ] **/\n        let tallyEvaluateCheckboxlist = attr(\n          this._data,\n          \"ticketTask/values/tallyEvaluateCheckboxlist\"\n        );\n        tallyEvaluateCheckboxlist =\n          tallyEvaluateCheckboxlist == 0\n            ? \"通过\"\n            : tallyEvaluateCheckboxlist == 0\n            ? \"基本通过\"\n            : \"不通过\";\n        this._attrsMap.set(\"评价等级\", tallyEvaluateCheckboxlist);\n        this._tallyEvaluateCheckboxlist = tallyEvaluateCheckboxlist;\n      }\n\n      setTallyCheck() {\n        /** 验收结果 [ _tallyCheck ] **/\n        let tallyCheck =\n          attr(this._data, \"ticketTask/variables/tallyCheck\") == \"0\"\n            ? \"通过\"\n            : \"不通过\";\n        let isAccord =\n          attr(this._data, \"ticketTask/variables/isAccord\") == \"1\"\n            ? \"按时完工\"\n            : \"没按时完工\";\n        let isQuality =\n          attr(this._data, \"ticketTask/variables/isQuality\") == \"1\"\n            ? \"符合质量标准\"\n            : \"不符合质量标准\";\n        this._attrsMap.set(\n          \"验收结果\",\n          `${tallyCheck}(${isAccord},${isQuality})`\n        );\n        this._tallyCheck = `${tallyCheck}(${isAccord},${isQuality})`;\n      }\n\n      setTicketTitle() {\n        /** 异常描述 [ _ticketTitle ] **/\n        let ticketTitle = attr(this._data, \"ticketTask/ticketTitle\");\n        this._attrsMap.set(\"异常描述\", ticketTitle);\n        this._ticketTitle = ticketTitle;\n      }\n\n      setTaskCategory() {\n        /** 任务分类 [ _taskCategory ] **/\n        let taskCategory = \"综合处理\";\n        this._attrsMap.set(\"任务分类\", taskCategory);\n        this._taskCategory = taskCategory;\n      }\n\n      setTheCreateUserName() {\n        /** 任务来源 [ _theCreateUserName ] **/\n        let theCreateUserName = attr(\n          this._data,\n          \"ticketTask/variables/theCreateUserName\"\n        );\n        this._attrsMap.set(\"任务来源\", theCreateUserName);\n        this._theCreateUserName = theCreateUserName;\n      }\n\n      setRecallExplain() {\n        /** 退回说明 [ recallExplain ] **/\n        let recallExplain = attr(this._data, \"ticketTask/values/recallExplain\");\n        this._attrsMap.set(\"退回说明\", recallExplain);\n        this._recallExplain = recallExplain;\n      }\n\n      setTicketNo() {\n        /** 工单号 [ ticketNo ] **/\n        let ticketNo = attr(this._data, \"ticketNo\");\n        this._attrsMap.set(\"工单号\", ticketNo);\n        this._ticketNo = ticketNo;\n      }\n\n      setRecallExplain() {\n        /** 退回说明 [_recallExplain] **/\n        let recallExplain = attr(this._data, \"ticketTask/values/recallExplain\");\n        this._attrsMap.set(\"退回说明\", recallExplain);\n        this._recallExplain = recallExplain;\n      }\n\n      setHandlerName() {\n        /** 委托人 [ _handlerName ] **/\n        let senderName = attr(this._data, \"ticketTask/senderName\");\n        this._attrsMap.set(\"委托人\", senderName);\n        this._senderName = senderName;\n      }\n\n      setHandlerName() {\n        /** 处理人 [ _handlerName ] **/\n        let handlerName = attr(this._data, \"ticketTask/handlerName\");\n        this._attrsMap.set(\"处理人\", handlerName);\n        this._attrsMap.set(\"检修人\", handlerName);\n        this._attrsMap.set(\"诊断人\", handlerName);\n        this._handlerName = handlerName;\n      }\n\n      setMultipleConclusion() {\n        /** 综合判断结论 [ _multipleConclusion ] **/\n        let multipleConclusion = attr(\n          this._data,\n          \"ticketTask/variables/multipleConclusion\"\n        );\n        this._attrsMap.set(\"综合判断结论\", multipleConclusion);\n        this._multipleConclusion = multipleConclusion;\n      }\n\n      setCessingScheme() {\n        /** 处理方案建议 [ _cessingScheme ] **/\n        let cessingScheme = attr(\n          this._data,\n          \"ticketTask/variables/cessingScheme\"\n        );\n        this._attrsMap.set(\"处理方案建议\", cessingScheme);\n        this._cessingScheme = cessingScheme;\n      }\n\n      setStandardProjectId() {\n        /** 标准项目编号 [ _standardProjectId ] **/\n        let standardProjectId = attr(\n          this._data,\n          \"ticketTask/variables/ticket/values/standardProjectId\"\n        );\n        this._attrsMap.set(\"标准项目编号\", standardProjectId);\n        this._standardProjectId = standardProjectId;\n      }\n\n      setStandardProjectName() {\n        /** 工程项目名称 [ _standardProjectName ] **/\n        let standardProjectName = attr(\n          this._data,\n          \"ticketTask/variables/ticket/values/standardProjectName\"\n        );\n        this._attrsMap.set(\"工程项目名称\", standardProjectName);\n        this._standardProjectName = standardProjectName;\n      }\n\n      setDealType() {\n        /** 处理方式 [ _dealType ] **/\n        function getDealType(dealType) {\n          let obj = {\n            \"1\": \"暂不处理\",\n            \"2\": \"自行处理\",\n            \"3\": \"发起委托\"\n          };\n          return obj[dealType];\n        }\n        let dealType = attr(this._data, \"ticketTask/variables/dealType\");\n        this._attrsMap.set(\"工程项目名称\", getDealType(dealType));\n        this.__dealType = this._dealType = dealType;\n      }\n\n      setStatusGrades(dics) {\n        /** 综合状态等级 [ _statusGrade ] **/\n        let statusGradesList = dics[\"statusGrade\"] || [];\n        let statusGradesMap = statusGradesList.reduce((a, b) => {\n          a.set(b.valueCode, b.label);\n          return a;\n        }, new Map());\n        let statusGrade = attr(this._data, \"ticketTask/variables/statusGrade\");\n        this.statusGrade = statusGrade;\n        this._attrsMap.set(\"综合状态等级\", statusGrade);\n        this._statusGrade = statusGradesMap.get(statusGrade + \"\");\n      }\n\n      setSeverity(dics) {\n        let alertSeverityList = dics[\"alertSeverity\"] || [];\n        let alertSeverity = alertSeverityList.reduce((a, b) => {\n          a.set(b.valueCode, b.label);\n          return a;\n        }, new Map());\n        let severity = attr(\n          this._data,\n          \"ticketTask/variables/ticket/values/severity\"\n        );\n        this.severity = severity;\n        this._severity = alertSeverity.get(severity + \"\");\n      }\n\n      setTime() {\n        let alertArisingTime = attr(\n          this._data,\n          \"ticketTask/variables/ticket/values/alertArisingTime\"\n        );\n        let sendTime = attr(this._data, \"ticketTask/sendTime\");\n        alertArisingTime = dateparser(alertArisingTime);\n        sendTime = dateparser(sendTime);\n        this._alertArisingTime = alertArisingTime.getDateString(\n          \"yyyy-MM-dd,hh:mm:ss\"\n        );\n        this._sendTime = sendTime.getDateString(\"yyyy-MM-dd,hh:mm:ss\");\n      }\n\n      setSpecailName() {\n        /** 报警类型 [ _specialtyName ] **/\n        let specialtyName = attr(\n          this._data,\n          \"ticketTask/variables/alertItemList/0/specialtyName\"\n        );\n        this._attrsMap.set(\"报警类型\", specialtyName);\n        this._specialtyName = specialtyName || \"无\";\n      }\n\n      setAppName(dics) {\n        /** 告警来源/任务来源 [ _appName ] **/\n        let appNameList = dics[\"appName\"] || [];\n        let appName = attr(\n          this._data,\n          \"ticketTask/variables/ticket/values/appName\"\n        );\n        let appNameMap = appNameList.reduce((a, b) => {\n          a.set(b.valueCode, b.label);\n          return a;\n        }, new Map());\n        this._attrsMap.set(\"告警来源\", appNameMap.get(appName + \"\"));\n        this._attrsMap.set(\"任务来源\", appNameMap.get(appName + \"\"));\n        this._appName = appNameMap.get(appName + \"\");\n      }\n      setIcon(icon) {\n        this._icon = icon;\n      }\n      mergetValues() {\n        let { devName, deviceCode } = this._ticketTaskVariables;\n        let { id, ticketNo } = this._data;\n        let values = [devName, deviceCode, id, ticketNo].join(\",\");\n        return values;\n      }\n      createButton(text, handler) {\n        let fn = psBtnClick[handler];\n        return {\n          type: \"button\",\n          cls: \"btn btn-primary btn-sm\",\n          label: text,\n          click: () => {\n            if (fn) {\n              fn.call(this, text);\n            } else {\n               \n            }\n          }\n        };\n      }\n      createTitle(title) {\n        return {\n          type: \"title\",\n          value: title,\n          style: {\n            color: \"#2997bb\"\n          }\n        };\n      }\n      createAttr(name) {\n        if (typeof name == \"string\") {\n          return {\n            key: name,\n            value: _attrsMap.get(name)\n          };\n        }\n        if (isArray(name)) {\n          return {\n            key: name[0],\n            value: name[1]\n          };\n        }\n      }\n    }\n    class AlertTracker extends NormalTracker {\n      constructor(data) {\n        super(data, 1);\n      }\n      getDirective() {\n        let data = this._data;\n        let category = attr(data, \"/ticketTask/variables/ticket/category\");\n        if (isEmpty(category)) {\n          console.warn(`category[ ${category} ] this is not a valid process.`);\n        }\n        return \"process-category-dir\";\n      }\n    }\n\n    return new TrackersList(trackersListData);\n  }\n  extend(tracker, {\n    getDealType(dealType) {\n      const dealTypeObj = {\n        \"1\": \"暂不处理\",\n        \"2\": \"自行处理\",\n        \"3\": \"发起委托\"\n      };\n      return dealTypeObj[dealType];\n    },\n    noNodeFound(tracker) {\n      let { _ticketNo } = tracker;\n      let data = tracker._data;\n      let category = attr(data, \"/ticketTask/variables/ticket/category\");\n      let tickeTaskStatus = attr(\n        data,\n        \"/ticketTask/variables/ticket/values/tickeTaskStatus\"\n      );\n      return [\n        {\n          time: \"-\",\n          icon: \"glyphicon glyphicon-remove bg-red\",\n          title: `Error : 任务节点 [ ${_ticketNo} ] 没找到对应的处理信息`,\n          data: [\n            {\n              key: \"ticketNo\",\n              value: _ticketNo\n            },\n            {\n              key: \"category\",\n              value: category\n            },\n            {\n              key: \"tickeTaskStatus\",\n              value: tickeTaskStatus\n            },\n            {\n              key: \"解决方法\",\n              value: `打开ps-baogang/directives/tracker/process-${tickeTaskStatus}.directive调试对应信息。`\n            }\n          ]\n        }\n      ];\n    },\n    renderGenerateAlert(tracker) {\n      let {\n        _specialtyName,\n        _appName,\n        _alertArisingTime,\n        _severity,\n        _alertTitle\n      } = tracker;\n      return {\n        time: _alertArisingTime,\n        icon: \"fa fa-user fa-fw fa-circle-o bg-green\",\n        title: \"报警产生\",\n        data: [\n          {\n            key: \"报警类型\",\n            value: _specialtyName ? _specialtyName : \"无\"\n          },\n          {\n            key: \"报警级别\",\n            value: _severity\n          },\n          {\n            key: \"报警描述\",\n            value: _alertTitle\n          },\n          {\n            key: \"报警来源\",\n            value: _appName,\n            style: {\n              color: \"red\"\n            }\n          }\n        ]\n      };\n    }\n  });\n  return tracker;\n}\n","\n/** mainCtrlRm\" **/\nexport default function(\n  rootScope,\n  q,\n  $state,\n  ajax,\n  resourceUIService,\n  kpiDataService,\n  psWebsocket,\n  psConfig\n) {\n  let map,\n    deviceMap,\n    root,\n    timer,\n    observer,\n    time = new Date(),\n    isArray = isType(\"Array\"),\n    userdefer = q.defer(),\n    getId = d => d.id,\n    webSocket,\n    alertStatusPromise,\n    inclosedMap,\n    measureLocationCached = createCached(),\n    alertsMap = createCached(),\n    structrureDone = resourceUIService.deviceLoader().then(devices => {\n      return incloseDeviceLoader().then(inclosed => {\n        inclosedMap = inclosed.reduce((a, b) => {\n          a[b.id] = true;\n          return a;\n        }, {});\n        //\n        return getResByModelIds([300, 301, 302]).then(d => {\n          let remapedDevice = remap(devices),\n            resources = d.reduce(collapse, remapedDevice);\n          map = getMap(resources);\n          deviceMap = getDeviceMap(remapedDevice);\n          root = resources\n            .filter(r => {\n              if (r.modelId < 1000 || inclosedMap[r.id]) {\n                return true;\n              }\n            })\n            .reduce((a, b) => {\n              let fd = findParentDevice(b);\n              fd\n                ? insertNode((fd.children = fd.children || []), b, insertMethod)\n                : a.push(b);\n              return a;\n            }, []);\n          return success(root);\n        });\n      });\n    }),\n    loopGetState,\n    startLoop = () => {\n      let recursive = callback => {\n        loopGetState = () => {\n          getAlerts(keys(map)).then(alerts => {\n            alerts.forEach(alert => {\n              callback && callback.call(this, alert);\n            });\n            timer = setTimeout(() => {\n              loopGetState && loopGetState.call(this);\n            }, 6000);\n          });\n        };\n        loopGetState && loopGetState.call(this);\n      };\n      recursive(({ nodeId, value }) => {\n        observer.emit(nodeId, value);\n      });\n    },\n    endLoop = () => {\n      loopGetState = null;\n      clearTimeout(timer);\n      timer = null;\n    },\n    webSocketStarted = structrureDone.then(root => {\n      let nodeIds = keys(map);\n      webSocket = psWebsocket(\"treenavigate\");\n      webSocket.send(nodeIds, [999999]);\n      return success(webSocket);\n    });\n  function incloseDeviceLoader() {\n    return userdefer.promise.then(user => {\n      let params = {},\n        currentRoleID = user.currentRoleID || 0,\n        roleFunctionCodeMap = user.roleFunctionCodeMap || {},\n        menuitems = roleFunctionCodeMap[currentRoleID] || [],\n        vals = (function(menuitems) {\n          if (menuitems.indexOf(\"F08_01\") !== -1) return {};\n          if (menuitems.indexOf(\"F08_03\") !== -1)\n            return { diagnosticType: \"90\" };\n          if (menuitems.indexOf(\"F08_06\") !== -1)\n            return { diagnosticType: \"280\" };\n          if (menuitems.indexOf(\"F08_02\") !== -1)\n            return { diagnosticType: { NOT_IN: [\"90\", \"280\"] } };\n        })(menuitems);\n      params.values = vals;\n      return ajax.post(\n        \"resourceUIService.getDevicesByCondition?includeFields=id\",\n        params\n      );\n    });\n  }\n  function isType(type) {\n    return function(target) {\n      return {}.toString.call(target) === `[object ${type}]`;\n    };\n  }\n  function str2json(str) {\n    let rs = null;\n    try {\n      rs = JSON.parse(str);\n    } catch (e) {\n      console.warn(e);\n      return rs;\n    }\n    return rs;\n  }\n  function success(d) {\n    let defer = q.defer();\n    defer.resolve(d);\n    return defer.promise;\n  }\n  function failure(d) {\n    let defer = q.defer();\n    defer.reject(d);\n    return defer.promise;\n  }\n  function eachProp(d, callback) {\n    for (let i in d) {\n      callback(d[i], i);\n    }\n  }\n  function getAlerts(nids) {\n    let defer = q.defer(),\n      time = new Date(),\n      param = {\n        nodeIds: nids.map(d => d - 0),\n        kpiCodes: [999999]\n      };\n    kpiDataService.getKpiValList(\n      param,\n      d => {\n        if (d.code + \"\" === \"0\") {\n          d.data.forEach(({ nodeId, value }) => {\n            alertsMap(nodeId, value);\n          });\n          defer.resolve(d.data);\n        } else {\n          defer.reject(d);\n        }\n      },\n      \"includeFields=nodeId,value\"\n    );\n    return defer.promise;\n  }\n  function createCached() {\n    let keys = [];\n    let cached = function(key, value) {\n      if (typeof value === \"undefined\") {\n        return cached[\"_\" + key];\n      } else {\n        keys.push(key);\n        cached[\"_\" + key] = value;\n      }\n    };\n    cached.keys = d => keys;\n    return cached;\n  }\n  function findParentDevice(resource) {\n    if (typeof resource == \"undefined\" || resource === null) {\n      console.warn(\"cannot find parent node for null or undefined\");\n      return;\n    }\n    let item,\n      extId = resource.extId,\n      parentID = resource.parentID;\n    extId = extId ? extId.split(\"/\") : [];\n    while (extId.pop()) {\n      item = deviceMap[\"/\" + extId.join(\"/\")];\n      if (item && item.parentID == parentID) {\n        return item;\n      }\n    }\n    return map[resource.parentID];\n  }\n  function getResourceByModelId(modelId) {\n    let defer = q.defer(),\n      time = new Date(),\n      query =\n        \"includeFields=\" +\n        [\"parentID\", \"label\", \"id\", \"values.number\", \"domainPath\"].join(\",\");\n    //\n    resourceUIService.getResourceByModelId(\n      modelId,\n      d => {\n        if (d.code + \"\" === \"0\") {\n          //\n          defer.resolve(\n            d.data.map(d => {\n              d.modelId = modelId;\n              return d;\n            }) || []\n          );\n        } else {\n          defer.reject(d);\n        }\n      },\n      query\n    );\n    return defer.promise;\n  }\n  function getAttrsByModelId(modelId, callback) {\n    let defer = q.defer();\n    rootScope.cacheAllData.on(\"getAllAttrs\", () => {\n      resourceUIService.modelLoader().then(models => {\n        let attrs = models[modelId].attrs;\n        defer.resolve(attrs);\n      });\n    });\n    return defer.promise;\n  }\n  function getResourceByIds(ids) {\n    return structrureDone.then(root => {\n      let getMapData = id => map[id] && map[id].getPromise(),\n        cached = ids.filter(getMapData).map(getMapData),\n        restIds = ids.filter(id => !(map[id] && map[id].getPromise())),\n        prms = createPromise(restIds);\n      return Promise.all(\n        cached.concat(\n          restIds.map(id => {\n            map[id]\n              ? map[id].setPromise(\n                  prms.then(ids => {\n                    return success(map[id].getData());\n                  })\n                )\n              : null;\n            return map[id] && map[id].getPromise();\n          })\n        )\n      );\n      function createPromise(ids) {\n        let defer = q.defer();\n        resourceUIService.getResourceByIds(ids, d => {\n          let rs = [];\n          eachProp(d, (elem, attr) => {\n            if (map[attr] == null) {\n              console.warn(`${attr} is not set!!`);\n            } else {\n              map[attr].setData(elem);\n            }\n            rs.push(elem);\n          });\n          defer.resolve(rs);\n        });\n        return defer.promise;\n      }\n    });\n  }\n  function createCacheData(obj) {\n    let data, promise;\n    class cacheData {\n      constructor(obj) {\n        extend(this, obj);\n      }\n      getData() {\n        return data;\n      }\n      setPromise(p) {\n        promise = p;\n      }\n      getPromise() {\n        return promise;\n      }\n      setData(d) {\n        data = d;\n      }\n    }\n    return new cacheData(obj);\n  }\n  function getMap(arr) {\n    let obj = {};\n    arr.forEach(n => {\n      obj[n.id] = n;\n    });\n    return obj;\n  }\n  function getDeviceMap(arr) {\n    let obj = {};\n    arr.forEach(n => {\n      let extId = n.extId;\n      extId ? (obj[\"/\" + extId] = n) : null;\n    });\n    return obj;\n  }\n  function remap(arr) {\n    function toPath(str) {\n      let arr = [str.substring(0, 6)],\n        item;\n      str = str.substring(6);\n      while ((item = str.substring(0, 3))) {\n        arr.push(item);\n        str = str.substring(3);\n      }\n      return arr;\n    }\n    return arr.map(d => {\n      let match = /\\/(\\d+)\\/$/.exec(d.domains),\n        extId = toPath(d.externalDevId),\n        pid = match[1];\n      d.extId = extId.join(\"/\");\n      d.parentID = pid;\n      return createCacheData(d);\n    });\n  }\n  function insertNode(arr, elem, rule) {\n    let item,\n      stacks = [],\n      len = arr.length;\n    while ((item = arr.pop())) {\n      let order = rule(item, elem);\n      if (order > 0) {\n        stacks.unshift(item);\n      } else {\n        arr.push(item);\n        break;\n      }\n    }\n    [].push.apply(arr, [elem, ...stacks]);\n    if (len !== arr.length - 1) {\n      throw new Error(\"wrong\" + len + \",\" + arr.length);\n    }\n  }\n  function insertMethod(a, b) {\n    let externalDevId1 = a.externalDevId,\n      externalDevId2 = b.externalDevId,\n      num1 = (a.values && a.values.number) + \"\" - 0,\n      num2 = (b.values && b.values.number) + \"\" - 0,\n      title1 = format(a.label),\n      title2 = format(b.label);\n    function addZero(num) {\n      let rs = \"\";\n      for (let i = 0; i < 9 - num.length; i++) {\n        rs += \"0\";\n      }\n      return rs + num;\n    }\n    function format(str) {\n      let rs = \"\",\n        match;\n      while ((match = /\\d+/.exec(str))) {\n        rs += str.slice(0, match.index) + addZero(match[0]);\n        str = str.slice(match.index + match[0].length);\n      }\n      return rs + str;\n    }\n    if (externalDevId1 && externalDevId2) {\n      return externalDevId1 < externalDevId2 ? -1 : 1;\n    }\n    if (num1 === num1 || num2 === num2) {\n      num1 = num1 === num1 ? num1 : 1 / 0;\n      num2 = num2 === num2 ? num2 : 1 / 0;\n      return num1 < num2 ? -1 : 1;\n    }\n    return title1 < title2 ? -1 : 1;\n  }\n  function loadQueue(queue, callback, rs) {\n    let item;\n    rs = rs || [];\n    if ((item = queue.shift())) {\n      return callback(item).then(d => {\n        rs.push(d);\n        return loadQueue(queue, callback, rs);\n      });\n    } else {\n      return success(rs);\n    }\n  }\n  function recursive(arr, callback) {\n    let createItem = (node, index, level, parent, parentlist) => {\n        return {\n          node,\n          index,\n          level,\n          parent,\n          parentlist\n        };\n      },\n      queue = arr.map((d, i) => {\n        return createItem(d, i, 0, null, arr);\n      }),\n      item;\n    stop = stop || (d => true);\n    while ((item = queue.shift())) {\n      let { node, index, level, parent, parentlist } = item,\n        children = node.children || [],\n        stop = callback(node, index, level, parent, parentlist);\n      if (stop === true) {\n        return;\n      }\n      [].push.apply(\n        queue,\n        children.map((d, i) => {\n          return createItem(d, i, item.level + 1, node, children);\n        })\n      );\n    }\n  }\n  function collapse(a, b) {\n    let item,\n      queue = isArray(b) ? b : [];\n    while ((item = queue.shift())) {\n      if (isArray(item)) {\n        [].push.apply(queue, item);\n      } else {\n        a.push(createCacheData(item));\n      }\n    }\n    return a;\n  }\n  function extend(a, b) {\n    for (let i in b) {\n      a[i] = b[i];\n    }\n    return a;\n  }\n  function keys(obj) {\n    let rs = [];\n    for (let i in obj) {\n      obj.hasOwnProperty(i) ? rs.push(i) : null;\n    }\n    return rs;\n  }\n  function getResByModelIds(modeIds) {\n    return loadQueue(modeIds, function(modelId) {\n      return getResourceByModelId(modelId);\n    });\n  }\n  function getValidId(id, type) {\n    id = id || 0;\n    return structrureDone.then(d => {\n      if (type === \"device\") {\n        if (map[id].modelId < 1000) {\n          return getFirstDevice(id);\n        }\n      }\n      return getResourceByIds([id]).then(res => {\n        return success(new treeData(res[0]));\n      });\n    });\n  }\n  function getFirstDevice() {\n    return structrureDone.then(d => {\n      let rs = root[0];\n      while (rs.children && rs.children[0]) {\n        rs = rs.children[0];\n      }\n      return getResourceByIds([rs.id]).then(res => {\n        return success(new treeData(res[0]));\n      });\n    });\n  }\n  function getAlertState() {\n    return (\n      alertStatusPromise ||\n      (alertStatusPromise = structrureDone\n        .then(d => {\n          return getAlerts(keys(map));\n        })\n        .then(alerts => {\n          alerts.forEach(({ nodeId, value }) => {\n            let item = map[nodeId],\n              state;\n            item.status = item.state = value;\n            while ((item = findParentDevice(item))) {\n              if (item.modelId < 1000) {\n                return;\n              }\n              state = item.state || item.status || 0;\n              item.status = item.state = state < value ? value : state;\n            }\n          });\n          return success(root.map(n => new treeData(n)));\n        }))\n    );\n  }\n  function treeDataService(id) {\n    return new treeData((map && map[id]) || id);\n  }\n  function getCurrentRes() {\n    let id = $state.params.id;\n    return structrureDone.then(d => {\n      return new treeData(id).getState();\n    });\n  }\n  function getMeasurePointData(queue) {\n    let item,\n      rs = [];\n    queue = isArray(queue) ? queue : [queue];\n    function allObj(obj) {\n      let arr = [],\n        i;\n      for (i in obj) {\n        if (typeof obj[i] !== \"object\") {\n          return false;\n        }\n        arr.push(obj[i]);\n      }\n      return arr;\n    }\n    while ((item = queue.shift())) {\n      if (isArray(item)) {\n        [].push.apply(queue, item);\n      } else {\n        let arr = allObj(item);\n        if (arr) {\n          [].push.apply(queue, arr);\n        } else {\n          rs.push(item);\n        }\n      }\n    }\n    return rs;\n  }\n  function getMeasureLocate(res) {\n    let kpis = res.physicalConfig && res.physicalConfig.accessConfigs,\n      MeasurePointLocate =\n        str2json(res.values && res.values.MeasurePointLocate) || [];\n    MeasurePointLocate = getMeasurePointData(MeasurePointLocate).map(point => {\n      point.kpis = kpis.filter(({ instance }) => instance == point.name);\n      return point;\n    });\n    measureLocationCached(res.id, MeasurePointLocate);\n    return success(MeasurePointLocate);\n  }\n  function getMeasurePointLocate() {\n    return getCurrentRes().then(res => {\n      if (measureLocationCached(res.id)) {\n        return success(measureLocationCached(res.id));\n      }\n      let kpis = res.physicalConfig && res.physicalConfig.accessConfigs,\n        MeasurePointLocate =\n          str2json(res.values && res.values.MeasurePointLocate) || [];\n      MeasurePointLocate = getMeasurePointData(MeasurePointLocate).map(\n        point => {\n          point.kpis = kpis.filter(\n            ({ instance, dataItemId }) =>\n              instance == point.name &&\n              dataItemId != 212000 &&\n              dataItemId != 213000 &&\n              dataItemId != 214000 &&\n              dataItemId != 211000\n          );\n          return point;\n        }\n      );\n      measureLocationCached(res.id, MeasurePointLocate);\n      return success(MeasurePointLocate);\n    });\n  }\n  function getGeneral() {\n    return getMeasurePointLocate().then(MeasurePointLocate => {\n      return success(MeasurePointLocate.find(({ name }) => name === \"00\"));\n    });\n  }\n  function getSensors() {\n    return getMeasurePointLocate().then(MeasurePointLocate => {\n      return success(\n        MeasurePointLocate.filter(({ name }) => {\n          if (name == \"00\") {\n            return false;\n          }\n          if (name - 0 !== name - 0) {\n            return true;\n          }\n          return name < 1000;\n        })\n      );\n    });\n  }\n  function getResourceById(id) {\n    return structrureDone.then(() => {\n      let promise = map[id] && map[id].getPromise();\n      if (!promise) {\n        map[id].setPromise(\n          (function() {\n            let defer = q.defer();\n            resourceUIService.getResourceById(id, e => {\n              e.code == 0 ? defer.resolve(e.data) : defer.reject(e);\n            });\n            return defer.promise;\n          })()\n        );\n      }\n      return map[id].getPromise();\n    });\n  }\n  function getPath(domainPath) {\n    let length = domainPath.split(\"/\").length - 4,\n      dics = [\"index\", \"navigate\", \"factory\", \"production\", \"devicegroup\"];\n    return dics[length] || \"devicegroup\";\n  }\n  function showTree(modelId, domainPath) {\n    if (modelId > 1000) {\n      return 1;\n    }\n    let length = domainPath.split(\"/\").length - 4;\n    return (length > 3) - 0;\n  }\n  class Observer {\n    constructor() {\n      this.events = {};\n    }\n    on(name, callback) {\n      let arr = (this.events[name] = this.events[name] || []);\n      arr.push(callback);\n      return () => {\n        this.events[name] = arr.filter(d => d !== callback);\n      };\n    }\n    emit(name, data) {\n      let fns = this.events[name] || [];\n      fns.forEach(fn => {\n        fn && fn.call(this, data);\n      });\n    }\n  }\n  observer = new Observer();\n  class treeData {\n    constructor(id) {\n      if (typeof id === \"object\") {\n        extend(this, id);\n      } else {\n        this.id = id;\n      }\n    }\n    showTree() {\n      if (this.modelId > 1000) {\n        return 1;\n      }\n      let length = this.domainPath.split(\"/\").length - 4;\n      return (length > 3) - 0;\n    }\n    find(callback) {\n      let node;\n      recursive([map[this.id]], (n, i, l, p, pl) => {\n        if (callback(n, i, l, p, pl)) {\n          node = n;\n          return true;\n        }\n      });\n      return node ? new treeData(node).getState() : success(null);\n    }\n    getPathLocation() {\n      return this.getPathAndShowTreeLocation().then(\n        ({ showTree, location }) => {\n          return success(location);\n        }\n      );\n    }\n    getMeasureLocate() {\n      return this.getState().then(res => {\n        return getMeasureLocate(res);\n      });\n    }\n    getPathAndShowTreeLocation(mainTab) {\n      const nameDic = {\n          motor: \"motor\",\n          electric: \"electri\"\n        },\n        ctrlNameDic = {\n          mainCtrlRm: \"mainCtrlRm\",\n          convoyer: \"convoyer\",\n          wind1: \"battery\",\n          reality: \"reality\",\n          screen: \"electrical_cabinet\",\n          rollerGroup: \"rollerGroup\",\n          steel_dedust: \"steel_dedust\",\n          wind: \"wind\",\n          steel_machine: \"steel_machine\",\n          robot: \"robot\",\n          UPS: \"ups\",\n          ups: \"ups\",\n          zhiliuping: \"ups\"\n        };\n      return psConfig.getRoleValues().then(configValues => {\n        let tabs = configValues.children,\n          tab = mainTab || tabs[rootScope.main_active_index || 0] || {};\n        return getResourceById(this.id).then(\n          ({ modelId, domainPath, values }) => {\n            return (modelId > 1000\n              ? getAttrsByModelId([modelId]).then(attrs => {\n                  let viewType = attrs.find(({ name }) => name == \"viewType\");\n                  return success(viewType || {});\n                })\n              : success({})\n            ).then(viewType => {\n              let vt = values[\"viewType\"] || (viewType && viewType.sourceValue);\n              if (tab.viewId == \"177280852260000\") {\n                let path = ctrlNameDic[vt];\n                if (path) {\n                  return success({\n                    showTree: 1,\n                    controller: path,\n                    defaultNav: false\n                  });\n                }\n\n                path = nameDic[vt];\n                if (modelId > 1000) {\n                  if (path == null) {\n                    return success({\n                      showTree: 1,\n                      controller: \"device\",\n                      defaultNav: false\n                    });\n                  } else {\n                    return success({\n                      showTree: 1,\n                      location: path,\n                      defaultNav: false\n                    });\n                  }\n                } else {\n                  if (getPath(domainPath) == \"devicegroup\") {\n                    return success({\n                      showTree: 1,\n                      controller: \"devicegroup\",\n                      defaultNav: false\n                    });\n                  }\n                  return success({\n                    showTree: showTree(modelId, domainPath),\n                    location: getPath(domainPath),\n                    defaultNav: false\n                  });\n                }\n                /*  */\n              } else {\n                return success({\n                  showTree: showTree(modelId, domainPath),\n                  location: \"index\",\n                  defaultNav: tab.name == \"专业分析\" && values.analiticalType\n                });\n              }\n            });\n          }\n        );\n      });\n    }\n    getPath() {\n      let length = this.domainPath.split(\"/\").length - 4,\n        dics = [\n          \"index\",\n          \"navigate\",\n          \"factory\",\n          \"production\",\n          \"devicegroup\",\n          \"virtual\"\n        ];\n      return dics[length] || \"devicegroup\";\n    }\n    getChildren(callback, showDetail) {\n      return structrureDone.then(d => {\n        let rs = [];\n        recursive([map[this.id]], (n, i, l, p, pl) => {\n          if (callback(n, i, l, p, pl)) {\n            if (this.id !== n.id) {\n              rs.push(new treeData(n));\n            }\n          }\n        });\n        return showDetail\n          ? getResourceByIds(rs.map(getId)).then(d => {\n              return success(d.map(n => new treeData(n)));\n            })\n          : success(rs);\n      });\n    }\n    getParent() {\n      let parent = findParentDevice(map[this.id]);\n      return parent ? new treeData(parent) : undefined;\n    }\n    getBrothers() {\n      return this.getParent()\n        ? this.getParent().getChildren(\n            (n, i, l) => n !== map[this.id] && l < 2,\n            true\n          )\n        : success(root.filter(d => d !== map[this.id]));\n    }\n    getParents(showDetail) {\n      return structrureDone.then(d => {\n        let rs = [],\n          item = this,\n          checks = [];\n        while ((item = item.getParent())) {\n          if (checks.indexOf(item) !== -1) {\n            throw new Error(`circular function`);\n          } else {\n            checks.push(item);\n            rs.push(new treeData(item));\n          }\n        }\n        rs.reverse();\n        return showDetail\n          ? getResourceByIds(rs.map(getId)).then(d => {\n              return success(d.map(n => new treeData(n)));\n            })\n          : success(rs);\n      });\n    }\n    getAlertState() {\n      return alertsMap(this.id);\n    }\n    getState() {\n      return structrureDone.then(root => {\n        return getResourceByIds([this.id]).then(res => {\n          return success(new treeData(res[0]));\n        });\n      });\n    }\n    /** keep consequency with old framework **/\n    getRoot() {\n      return structrureDone.then(root => {\n        recursive(root, (node, i, l, p) => {\n          node.parent = p;\n        });\n        return success(root);\n      });\n    }\n    $on(name, callback) {\n      //return observer.on(this.id, callback);\n      let clear;\n      webSocketStarted.then(websocket => {\n        clear = websocket.on(this.id, 999999, (v, d) => {\n          let { nodeId, value } = d;\n          alertsMap(nodeId, value);\n          callback(v, d);\n        });\n      });\n      return function() {\n        clear && clear();\n      };\n    }\n    $emit(name, data) {\n      this.events[name].forEach(fn => {\n        fn(data);\n      });\n    }\n    /** keep consequency with old framework **/\n  }\n  extend(treeDataService, {\n    getValidId: getValidId,\n    getFirstDevice: getFirstDevice,\n    getAlertState: getAlertState,\n    getSensors: getSensors,\n    getGeneral: getGeneral,\n    startLoop: startLoop,\n    endLoop: endLoop,\n    getCurrentUser(d) {\n      return userdefer.resolve(d);\n    },\n    getRoot() {\n      return structrureDone;\n    }\n  });\n  return treeDataService;\n}\n","\nimport { tree, extend } from \"ps-ultility\";\nexport default function(\n  rootScope,\n  q,\n  ajax,\n  $state,\n  psTreeData,\n  registerService,\n  psConfig\n) {\n  const getResourceById = \"resourceUIService.getResourceById\",\n    getAttrsByModelId = \"resourceUIService.getAttrsByModelId\";\n  let analiticalType = createAnaliticalType();\n  function factory(params) {\n    let paramsArr;\n    return psConfig.getRoleValues().then(values => {\n      let parents,\n        node = tree().find(values, (n, i, p) => {\n          if (n.id === params.id) {\n            parents = p.slice(1);\n            return true;\n          }\n        }),\n        children = getEachFirstChild(node);\n      if (node.viewPriority) {\n        paramsArr = [...parents, node];\n      } else {\n        paramsArr = [...parents, node, ...children];\n      }\n      return createParams(paramsArr);\n    });\n  }\n  function createParams(paramsArr, url, ext = {}) {\n    url = url || \"index\";\n    let complete = createPromise(),\n      obj,\n      dics = {\n        1: {\n          name: \"prod_dashboard\",\n          handler: function(arr) {\n            let main = arr.pop(),\n              name = this.name,\n              id = ext.id || $state.params.id,\n              viewId = main.viewId;\n            (function(viewId, callback) {\n              (id\n                ? success(id)\n                : psTreeData.getRoot().then(root => {\n                    return success(root[0].id);\n                  })\n              ).then(id => {\n                viewId == \"177280852260000\"\n                  ? psTreeData(id)\n                      .getPathAndShowTreeLocation(main)\n                      .then(({ location, showTree, controller }) => {\n                        callback(location, showTree, controller);\n                      })\n                  : callback(url, main.showTree);\n              });\n            })(viewId, (location, showTree, controller) => {\n              let routers = registerService.getRouters(),\n                extra = {},\n                router = routers.find(router => router.ctrlname === viewId),\n                ctrlname = controller\n                  ? `prod_${controller}`\n                  : router && router.ctrlname,\n                baseParam = {\n                  count: ($state.params.count || 0) - 0 + 1,\n                  id: $state.params.id || 0,\n                  deviceOnly: !!main.deviceOnly - 0,\n                  showTree: !!showTree - 0,\n                  main_active_index: main.index\n                },\n                extParams = router\n                  ? createParamByRouter(router)\n                  : {\n                      viewId: main.viewId,\n                      index: location\n                    },\n                cname = ctrlname ? `prod_controller.${ctrlname}` : name;\n              delete $state.params.sub_active_index;\n              delete $state.params.minor_active_index;\n              ext = ext || {};\n              extra.main_active_hide = main.hideNavi;\n              ext[\"#\"] = JSON.stringify(extra);\n              if (main.deviceOnly) {\n                psTreeData.getValidId($state.params.id, \"device\").then(res => {\n                  baseParam.id = res.id;\n                  complete([cname, extend(baseParam, extParams, ext)]);\n                });\n              } else {\n                complete([cname, extend(baseParam, extParams, ext)]);\n              }\n            });\n          }\n        },\n        2: {\n          name: \"prod_sub_dashboard\",\n          handler: function(arr) {\n            let sub = arr.pop(),\n              basename = this.name,\n              main = arr.pop(),\n              viewId = sub.viewId,\n              extra = {},\n              routers = registerService.getRouters(),\n              router = routers.find(router => router.ctrlname === viewId),\n              baseParam = {\n                count: ($state.params.count || 0) - 0 + 1,\n                id: $state.params.id,\n                deviceOnly: !!main.deviceOnly - 0,\n                showTree: sub.showTree,\n                main_active_index: main.index,\n                sub_active_index: sub.index,\n                dataItems: ext ? ext.dataItems : null\n              },\n              extName = router ? \".sub_\" + router.ctrlname : \".subview\",\n              name = this.name + extName,\n              extParams = router\n                ? createParamByRouter(router)\n                : {\n                    viewId: sub.viewId,\n                    index: url\n                  };\n            delete $state.params.minor_active_index;\n            ext = ext || {};\n            extra.main_active_hide = main.hideNavi;\n            extra.sub_active_hide = sub.hideNavi;\n            ext[\"#\"] = JSON.stringify(extra);\n            if (main.deviceOnly) {\n              psTreeData.getValidId($state.params.id, \"device\").then(res => {\n                baseParam.id = res.id;\n                complete([name, extend(baseParam, extParams, ext)]);\n              });\n            } else {\n              complete([name, extend(baseParam, extParams, ext)]);\n            }\n          }\n        },\n        3: {\n          name: \"prod_sub_dashboard.minor_dashboard\",\n          handler: function(arr) {\n            let minor = arr.pop(),\n              sub = arr.pop(),\n              main = arr.pop(),\n              extra = {},\n              basename = this.name,\n              viewId = minor.viewId,\n              routers = registerService.getRouters(),\n              router = routers.find(router => router.ctrlname === viewId),\n              baseParam = {\n                count: ($state.params.count || 0) - 0 + 1,\n                id: $state.params.id,\n                showTree: main.showTree,\n                deviceOnly: !!main.deviceOnly - 0,\n                main_active_index: main.index,\n                sub_active_index: sub.index,\n                minor_active_index: minor.index\n              },\n              extName = router ? \".minor_\" + router.ctrlname : \".minor_view\",\n              name = basename + extName,\n              extParams = router\n                ? createParamByRouter(router)\n                : {\n                    viewId: minor.viewId,\n                    index: url\n                  };\n            ext = ext || {};\n            ext[\"#\"] = {};\n            extra.main_active_hide = main.hideNavi;\n            extra.sub_active_hide = sub.hideNavi;\n            extra.minor_active_hide = minor.hideNavi;\n            ext[\"#\"] = JSON.stringify(extra);\n            if (main.deviceOnly) {\n              psTreeData.getValidId($state.params.id, \"device\").then(res => {\n                baseParam.id = res.id;\n                complete([name, extend(baseParam, extParams, ext)]);\n              });\n            } else {\n              complete([name, extend(baseParam, extParams, ext)]);\n            }\n          }\n        }\n      };\n    obj = dics[paramsArr.length];\n    obj[\"handler\"].call(obj, paramsArr);\n    return complete();\n  }\n  function createAnaliticalType() {\n    let keys = [],\n      rs = [],\n      analiticalTypeFn = function(key, value) {\n        if (typeof value === \"undefined\") {\n          if (typeof key === \"string\") {\n            let inx = keys.indexOf(key);\n            return rs[inx];\n          } else {\n            return undefined;\n          }\n        } else {\n          keys.push(key);\n          rs.push(value);\n        }\n      };\n    return analiticalTypeFn;\n  }\n  function createPromise() {\n    let defer = q.defer();\n    return function(obj) {\n      if (typeof obj === \"undefined\") {\n        return defer.promise;\n      } else {\n        defer.resolve(obj);\n      }\n    };\n  }\n  function success(d) {\n    let defer = q.defer();\n    defer.resolve(d);\n    return defer.promise;\n  }\n  function createParamByRouter(d) {\n    let obj = {},\n      match,\n      str = d.router;\n    while ((match = /\\/\\:([^:?/]+)\\??/.exec(str))) {\n      obj[match[1]] = \"null\";\n      str = str.slice(match.index + match[0].length);\n    }\n    return obj;\n  }\n  function getEachFirstChild(item) {\n    let rs = [];\n    while ((item = item.children && item.children[0])) {\n      rs.push(item);\n    }\n    return rs;\n  }\n  function getChildrenByIndex(target, queue) {\n    function mapId(a, b) {\n      a[b.index] = b;\n      return a;\n    }\n    let inx,\n      targeMap = target.reduce(mapId, {});\n    while (typeof (inx = queue.shift()) !== \"undefined\") {\n      targeMap =\n        targeMap &&\n        targeMap[inx] &&\n        targeMap[inx].children &&\n        targeMap[inx].children.reduce(mapId, {});\n    }\n\n    if (!targeMap) {\n      console.error(\"targeMap is not defined\");\n    }\n    return Object.values(targeMap) || [];\n  }\n  analiticalType(\"电气分析\", function(analiticalType) {\n    if (typeof analiticalType != \"string\") {\n      return false;\n    }\n    return analiticalType.split(\",\").indexOf(\"ELEC\") != -1;\n  });\n  analiticalType(\"振动分析\", function(analiticalType) {\n    if (typeof analiticalType != \"string\") {\n      return false;\n    }\n    return analiticalType.split(\",\").indexOf(\"VIBE\") != -1;\n  });\n  analiticalType(\"模型分析\", function(analiticalType) {\n    if (typeof analiticalType != \"string\") {\n      return false;\n    }\n    return analiticalType.split(\",\").indexOf(\"VIBE\") != -1;\n  });\n  extend(factory, {\n    getDefaultParamByName(routername) {\n      let routers = registerService.getRouters(),\n        router = routers.find(router => router.ctrlname === routername);\n      if (typeof routers === \"undefined\") {\n        console.error(`router named ${routename} cannot be found`);\n        throw new Error(`router named ${routename} cannot be found`);\n      }\n      return createParamByRouter(router);\n    },\n    getCurrentRouterType() {\n      let routers = registerService.getRouters();\n      return factory.getCurrentTab().then(tab => {\n        let fd = routers.find(router => {\n          return router.ctrlname == tab.viewId;\n        });\n        return success(fd ? fd.ctrlname : \"dashboard\");\n      });\n    },\n    getCurrentTab() {\n      return psConfig.getRoleValues().then(values => {\n        let main = $state.params.main_active_index,\n          rs,\n          fd,\n          sub = $state.params.sub_active_index,\n          minor = $state.params.minor_active_index;\n        if (main != null) {\n          rs = values.children.find(c => c.index == main);\n        }\n        if (sub != null) {\n          fd = rs.children.find(c => c.index == sub);\n          if (fd == null) {\n            return success(rs);\n          }\n          rs = fd;\n        }\n        if (minor != null) {\n          fd = rs.children.find(c => c.index == minor);\n          if (fd == null) {\n            return success(rs);\n          }\n        }\n        return success(rs);\n      });\n    },\n    getCurrentMainTab() {\n      return psConfig.getRoleValues().then(values => {\n        let inx = $state.params.main_active_index;\n        return success(values.children.find(({ index }) => index == inx));\n      });\n    },\n    getSubTabs() {\n      return ajax\n        .post(getResourceById, $state.params.id)\n        .then(({ modelId, values }) => {\n          return ajax.post(getAttrsByModelId, modelId).then(attrs => {\n            let at = attrs.find(d => d.name == \"analiticalType\") || {};\n            return psConfig.getRoleValues().then(vals => {\n              let mainInx = $state.params.main_active_index,\n                specialDeviceType = ({ label }) => {\n                  let checker = analiticalType(label);\n                  if (typeof checker !== \"function\") {\n                    return true;\n                  }\n                  return checker(\n                    (values ? values.analiticalType : null) || at.sourceValue\n                  );\n                },\n                children = getChildrenByIndex(vals.children, [mainInx]);\n              return success(children.filter(specialDeviceType));\n            });\n          });\n        });\n    },\n    getMinorTabs() {\n      return ajax\n        .post(getResourceById, $state.params.id)\n        .then(({ modelId }) => {\n          return ajax.post(getAttrsByModelId, modelId).then(attrs => {\n            let at = attrs.find(d => d.name == \"analiticalType\") || {};\n            return psConfig.getRoleValues().then(values => {\n              let mainInx = $state.params.main_active_index,\n                subInx = $state.params.sub_active_index,\n                specialDeviceType = ({ label }) => {\n                  let checker = analiticalType(label);\n                  if (typeof checker === \"undefined\") {\n                    return true;\n                  }\n                  checker = analiticalType(at.sourceValue);\n                  return checker && checker(label);\n                },\n                children = getChildrenByIndex(values.children, [\n                  mainInx,\n                  subInx\n                ]);\n              return success(children.filter(specialDeviceType));\n            });\n          });\n        });\n    },\n    moveToNodeByCondition(fn, ext) {\n      return psConfig\n        .getRoleValues()\n        .then(values => {\n          let parents,\n            paramsArr,\n            node = tree().find(values, (n, i, p) => {\n              if (fn(n, i, p)) {\n                parents = p.slice(1);\n                return true;\n              }\n            }),\n            children;\n          if (typeof node === \"undefined\") {\n            throw new Error(\"error : 没找到符合条件的跳转路径\");\n            return;\n          }\n          children = getEachFirstChild(node);\n          paramsArr = [...parents, node, ...children];\n          return createParams(paramsArr, undefined, ext);\n        })\n        .then(n => {\n          $state.go.apply($state, n);\n        });\n    },\n    moveToNodeByIndex(url, arr, ext) {\n      return psConfig\n        .getRoleValues()\n        .then(values => {\n          let paramsArr = [],\n            inx = 0,\n            item,\n            target = values.children;\n          while (inx < 3) {\n            let num = arr[inx],\n              item = target[num || 0];\n\n            if (item == null) {\n              break;\n            }\n            let { hideNavi } = item;\n            if (num == null && hideNavi == 1) {\n              break;\n            }\n            paramsArr.push(item);\n            target = item.children;\n            inx++;\n          }\n          return createParams(paramsArr, url, ext);\n        })\n        .then(n => {\n          $state.go.apply($state, n);\n        });\n    },\n    getRoleValues() {\n      return psConfig.getRoleValues();\n    }\n  });\n  return factory;\n}\n","\nimport factory from \"./../../js/services/service_factory.js\";\nimport { random } from \"ps-ultility\";\nexport default function(q, rootScope) {\n  const DEBUG = false,\n    protocol = factory.protocol || \"ws\",\n    host = factory.host,\n    websockets = {},\n    websocketOpened = q.defer(),\n    url =\n      location.hostname == \"localhost\"\n        ? `${protocol}//${host}/websocket/message`\n        : `${protocol}//${location.host}/websocket/message`,\n    getId = d => (typeof d === \"object\" ? d.id : d);\n  console.log(url);\n  function stringify(obj) {\n    return JSON.stringify(obj);\n  }\n  function parse(str) {\n    let a;\n    try {\n      a = JSON.parse(str);\n    } catch (e) {\n      console.error(e);\n      return;\n    }\n    return a;\n  }\n  function createWs(name) {\n    let ws = new WebSocket(url),\n      listeners = {},\n      onDataEvent = [];\n    class WebsocketCls {\n      constructor() {\n        this.name = name;\n        this.uuid = random();\n      }\n      send(ci, kpi) {\n        websocketOpened.promise\n          .then(d => {\n            d.send(\n              stringify({\n                uuid: this.uuid,\n                operation: \"register\",\n                type: \"kpi\",\n                param: {\n                  ciid: ci.map(getId).join(\",\"),\n                  kpi: kpi.map(getId).join(\",\")\n                }\n              })\n            );\n          })\n          .catch(e => {\n            console.error(e);\n          });\n      }\n      data(handler) {\n        onDataEvent.push(handler);\n      }\n      destroy() {\n        onDataEvent.forEach((d, i) => {\n          onDataEvent[i] = null;\n        });\n        onDataEvent = [];\n        websocketOpened.promise\n          .then(d => {\n            d.send(\n              stringify({\n                uuid: this.uuid,\n                operation: \"unregister\"\n              })\n            );\n          })\n          .catch(e => {\n            console.error(e);\n          });\n      }\n      on(ci, kpi, callback) {\n        listeners[`${ci}_${kpi}`] = listeners[`${ci}_${kpi}`] || [];\n        listeners[`${ci}_${kpi}`].push(callback);\n        return function() {\n          listeners[`${ci}_${kpi}`] = listeners[`${ci}_${kpi}`].filter(\n            d => d !== callback\n          );\n        };\n      }\n    }\n    ws.onopen = function() {\n      websocketOpened.resolve(ws);\n    };\n    ws.onerror = function(e) {\n      websocketOpened.reject(`websocket was on error, please try to re-link`);\n    };\n    ws.onclose = function(e) {\n      websocketOpened.reject(`websocket was closed, please try to re-link`);\n    };\n    ws.onmessage = function(e) {\n      let { nodeId, kpiCode, value } = parse(e.data),\n        fn = listeners[`${nodeId}_${kpiCode}`];\n      onDataEvent.forEach(handler => {\n        handler(e.data);\n      });\n      fn\n        ? fn.forEach(f => {\n            f(value);\n          })\n        : null;\n    };\n\n    /** local test utils only **/\n    if (DEBUG) {\n      setInterval(() => {\n        let ks = keys(listeners);\n        ks.forEach(d => {\n          let state = Math.round(Math.random() * 4),\n            fns = listeners[`${d}`];\n          fns && fns.forEach(fn => fn(state));\n        });\n        /* let state = Math.round( Math.random() * 4 ),\n            fn = listeners[\"557055315256066_999999\"];\n          for(var i in fn){\n            fn[i](state)\n          } */\n      }, 500);\n    }\n    /** local test utils only **/\n\n    return new WebsocketCls();\n  }\n  function keys(obj) {\n    let rs = [],\n      i;\n    for (i in obj) {\n      rs.push(i);\n    }\n    return rs;\n  }\n  return function(name) {\n    websockets[name] = websockets[name] || createWs(name);\n    return websockets[name];\n  };\n}\n","\nimport factory from \"./../../js/services/service_factory.js\";\nimport { random } from \"ps-ultility\";\nexport default function(q, rootScope) {\n  let getId = obj => (typeof obj == \"object\" ? obj.id : obj);\n  function toArr(obj) {\n    let rs = [];\n    for (let i in obj) {\n      for (let j in obj[i]) {\n        for (let k in obj[i][j]) {\n          rs.push(obj[i][j][k]);\n        }\n      }\n    }\n    return rs;\n  }\n  function stringify(str) {\n    let a;\n    try {\n      a = JSON.stringify(str);\n    } catch (e) {\n      throw new Error(e);\n      return;\n    }\n    return a;\n  }\n  function parse(str) {\n    let rs;\n    try {\n      rs = JSON.parse(str);\n    } catch (e) {\n      return;\n    }\n    return rs;\n  }\n  class Service {\n    constructor(obj) {\n      this.protocol = obj.protocol;\n      this.host = obj.host;\n      this.origin = this.origin;\n    }\n    getURL() {\n      if (location == null) {\n        return `${this.protocol}//${this.host}/websocket/message`;\n      }\n      return location.hostname == \"localhost\" ||\n        location.hostname == \"127.0.0.1\"\n        ? `${this.protocol}//${this.host}/websocket/message`\n        : `${this.protocol}//${location.host}/websocket/message`;\n    }\n  }\n  class Observer {\n    constructor() {\n      this.events = {};\n    }\n    on(name, callback) {\n      this.events[name] = this.events[name] || [];\n      this.events[name].push(callback);\n    }\n    emit(name, data) {\n      let functionLIst = this.events[name] || [];\n      functionLIst.forEach(fn => {\n        fn && fn.call(this, data);\n      });\n    }\n  }\n  class Params {\n    constructor(str) {\n      let d = parse(str);\n      if (d == null) {\n        return;\n      }\n      for (let i in d) {\n        this[i] = d[i];\n      }\n    }\n    getData() {\n      return this.data;\n    }\n  }\n  class WebSocketCls {\n    constructor(url, time) {\n      this.ws = null;\n      this.time = time; /** time为截流时间，单位ms,默认值为undefined,表示不进行截流，收到推送立即发送，当ms设置为数字时，会对收集的数据进行截流处理，以一个数组形式返回给回掉函数 */\n      this._state = null;\n      this.url = url;\n      this.uuid = random();\n      this.observer = new Observer();\n      this.connect();\n    }\n    throttle(callback, time) {\n      let timer,\n        obj = {};\n      return function(val, data) {\n        let { nodeId, kpiCode, instance } = data;\n        instance = instance || \"_\";\n        if (timer == null) {\n          console.log(time);\n          timer = setTimeout(() => {\n            callback.call(this, toArr(obj));\n            timer = null;\n            obj = {};\n          }, time);\n        } else {\n          obj[nodeId] = obj[nodeId] || {};\n          obj[nodeId][kpiCode] = obj[nodeId][kpiCode] || {};\n          obj[nodeId][kpiCode][instance] = data;\n        }\n      };\n    }\n    connect() {\n      this._state = null;\n      this.ws = new WebSocket(this.url);\n      this.ws.onopen = () => {\n        this._state = \"onopen\";\n        this.observer.emit(\"onopen\");\n      };\n      this.ws.onmessage = ({ data }) => {\n        let param = new Params(data);\n        this.observer.emit(\"onmessage\", param.getData());\n      };\n      this.ws.onclose = e => {\n        this._state = \"onclose\";\n        this.observer.emit(\"onclose\");\n        this.reconnect();\n      };\n      this.ws.onerror = e => {\n        this._state = \"onerror\";\n        this.observer.emit(\"onerror\");\n        //this.reconnect();\n      };\n    }\n    reconnect() {\n      setTimeout(() => {\n        console.warn(`链接 [ ${this.url} ] 不成功重试链接`);\n        this.connect();\n      }, 5000);\n    }\n    on(ci, kpi, instance, callback) {\n      if (ci == null) {\n        throw new Error(\"nodeId is a must\");\n      }\n      if (\n        typeof ci == \"function\" &&\n        kpi == null &&\n        instance == null &&\n        callback == null\n      ) {\n        callback = ci;\n        ci = null;\n      }\n      if (typeof instance == \"function\" && callback == null) {\n        callback = instance;\n        instance = null;\n      }\n      if (typeof kpi == \"function\" && instance == null && callback == null) {\n        callback = kpi;\n        kpi = null;\n      }\n      callback = this.time ? this.throttle(callback, this.time) : callback;\n      this.onmessage(d => {\n        if (instance != null && instance != d.instance) {\n          return;\n        }\n        if (kpi != null && kpi != d.kpiCode) {\n          return;\n        }\n        if (ci != null && ci != d.nodeId) {\n          return;\n        }\n        callback && callback.call(this, d.value, d);\n      });\n      return () => this.destroy();\n    }\n    doSthWhileOpen(callback) {\n      this._state == \"onopen\"\n        ? callback()\n        : this.addEventListener(\"onopen\", callback);\n    }\n    send(ci, kpi, instances) {\n      this.doSthWhileOpen(() => {\n        let param = {\n          ciid: ci.map(getId).join(\",\"),\n          kpi: kpi.map(getId).join(\",\")\n        };\n        if (instances != null) {\n          param[\"instances\"] = instances.join(\",\");\n        }\n        this.sendData({\n          uuid: this.uuid,\n          operation: \"register\",\n          type: \"kpi\",\n          param: param\n        });\n      });\n    }\n    unregister() {\n      this.doSthWhileOpen(() => {\n        this.sendData({\n          uuid: this.uuid,\n          operation: \"unregister\"\n        });\n      });\n    }\n    destroy() {\n      this.unregister();\n      this.ws.close();\n    }\n    sendData(obj) {\n      this.ws.send(stringify(obj));\n    }\n    addEventListener(name, callback) {\n      this.observer.on(name, callback);\n    }\n    onmessage(callback) {\n      this.addEventListener(\"onmessage\", callback);\n    }\n  }\n  function createInstance(service) {\n    let wsMap = new Map(),\n      ser = new Service(service);\n    return function(name, time, isDebug = false) {\n      if (wsMap.get(name)) {\n        return wsMap.get(name);\n      } else {\n        let url = isDebug\n          ? \"ws://localhost:8081/websocket/message\"\n          : ser.getURL();\n        wsMap.set(name, new WebSocketCls(url, time));\n        return wsMap.get(name);\n      }\n    };\n  }\n  return createInstance(factory);\n}\n","\n  export default function( rootScope ){\n    return {\n      a : 10\n    }\n  }  \n","class explainer {\n  constructor(){}\n  add(name, handler){\n    this.handlers = this.handlers || {};\n    this.handlers[name] = handler;\n  }\n  get(name, data) {\n    return typeof this.handlers === \"object\"\n      && typeof this.handlers[name] === \"function\"\n      && this.handlers[name](data);\n  }\n  each(callback){\n    for(var i in this.handlers){\n      typeof callback === \"function\" && callback(this.handlers[i], i);\n    }\n  }\n  keys(){\n    let keys = []\n    this.each( ( elem, key ) => {\n      keys.push(key)\n    })\n    return keys;\n  }\n};\nconst newExplainer = new explainer(),\n  removespace = str => {\n    let match = /^\\s*([^\\s].*[^\\s])\\s*$/.exec(str);\n    return match ? match[1] : str;\n  },\n  toArray = str => {\n    return typeof str === \"string\"\n      ? str.split(\",\").map(removespace) : [];\n  };\nfunction each(arr,callback){\n  if(arr){\n    for(var i = 0; i < arr.length; i++){\n      callback( arr[i], i, arr);\n    }\n  };\n}\nfunction hasRegistered( service, name ){\n  return function( angularModule ){\n    return angularModule._invokeQueue.some( item => {\n      return item[1] === service\n        && item[2][0] === name\n    })\n  }\n}\nfunction camelhill( str ){\n  let rs = \"\",\n    arr = [].slice.call(str),\n    char;\n  while( char = arr.shift()){\n    if( char === \"-\"){\n      char = arr.shift();\n      char = typeof char === \"undefined\" ? \"\" : char.toUpperCase();\n    }\n    rs += char;\n  }\n  return rs;\n}\nfunction map(arr,callback){\n  let rs = [];\n  if(arr){\n    for(var i = 0; i < arr.length; i++){\n      rs.push(callback( arr[i], i, arr));\n    }\n  };\n  return rs;\n}\nnewExplainer.add(\"controller\", module => {\n  let { template, script, config, name } = module,\n    { router, params, injector } = config,\n    args = [...toArray(injector),script];\n  return angularModule => {\n    let _name = camelhill(name);\n    if( !hasRegistered(\"controller\", _name)(angularModule)){\n      typeof angularModule.controller === \"function\"\n        ? angularModule.controller( _name , args)\n        : angularModule.register( _name, args);\n      return {\n        type : \"router\",\n        router : `/${name}${params || \"\"}`,\n        ctrlname : _name,\n        template : template.template\n      };\n    } else {\n      return {\n        template : template.template\n      }\n      console.warn(`controller, named ${_name} is already exist, so will not be registered`)\n    }\n  }\n});\nnewExplainer.add(\"service\", module => {\n  let { script, config, name } = module,\n    { injector, type } = config,\n    params = [...toArray(injector),script];\n  return angularModule => {\n    let _name = camelhill(name);\n    if( !hasRegistered(type || \"factory\", _name)(angularModule)){\n      angularModule[type || \"factory\"](_name, params);\n    } else {\n      console.warn(`${type || \"factory\"}, named ${_name} is already exist, so will not be registered`)\n    }\n  }\n});\nnewExplainer.add(\"directive\", module => {\n  let { script, config, template, name } = module,\n    { injector } = config,\n    fn = function(){\n      let args = [].slice.apply(arguments),\n        obj = script.apply(this, args);\n      obj.template = ( template ? template.template : null ) || obj.template;\n      obj.restrict = obj.restrict || \"E\";\n      obj.replace = typeof obj.replace == \"undefined\" ? true : obj.replace;\n      obj.compile = function(elem, attr){\n        return {\n          pre : function(scope, elem, attr){\n            /** remove the rest data-a-id before use **/\n            let arr = map(elem[0].attributes, attr => attr.name)\n              .filter( d => /data-a-[\\w\\d]+/.test(d));\n            arr.shift();\n            arr.forEach( d => { elem[0].removeAttribute(d); });\n            obj.before && obj.before.call( this, scope, elem, attr );\n          },\n          post : obj.link\n        }\n      }\n      return obj;\n    },\n    params = [...toArray(injector),fn];\n  return angularModule => {\n    let _name = camelhill(name);\n    if( !hasRegistered( \"directive\", _name)(angularModule)){\n      typeof angularModule.directive === \"function\"\n        ? angularModule.directive(_name, params)\n        : angularModule.register(_name, params);\n    } else {\n      console.warn(`directive, named ${_name} is already exist, so will not be registered`)\n    }\n  }\n});\nmodule.exports = newExplainer;","import config from \"./common-method-service2.service?angular=service&id=72366e3e&type=config&lang=config&scoped=false\";\nimport script from \"./common-method-service2.service?angular=service&id=72366e3e&type=script&lang=js&scoped=false\";\nvar path=\"/Users/leonlin/Linjingbin/ps_iot_web_replace/ps-baogang/services/common-method-service2.service\",type=\"service\",name=\"commonMethodService2\";;\nexport default { config:config,script:script,path:path,type:type,name:name }","import config from \"./ps-area-state.service?angular=service&id=511a424f&type=config&lang=config&scoped=false\";\nimport script from \"./ps-area-state.service?angular=service&id=511a424f&type=script&lang=js&scoped=false\";\nvar path=\"/Users/leonlin/Linjingbin/ps_iot_web_replace/ps-baogang/services/ps-area-state.service\",type=\"service\",name=\"psAreaState\";;\nexport default { config:config,script:script,path:path,type:type,name:name }","import config from \"./ps-btn-click.service?angular=service&id=2a19ae87&type=config&lang=config&scoped=false\";\nimport script from \"./ps-btn-click.service?angular=service&id=2a19ae87&type=script&lang=js&scoped=false\";\nvar path=\"/Users/leonlin/Linjingbin/ps_iot_web_replace/ps-baogang/services/ps-btn-click.service\",type=\"service\",name=\"psBtnClick\";;\nexport default { config:config,script:script,path:path,type:type,name:name }","import config from \"./ps-config.service?angular=service&id=0a112cc0&type=config&lang=config&scoped=false\";\nimport script from \"./ps-config.service?angular=service&id=0a112cc0&type=script&lang=js&scoped=false\";\nvar path=\"/Users/leonlin/Linjingbin/ps_iot_web_replace/ps-baogang/services/ps-config.service\",type=\"service\",name=\"psConfig\";;\nexport default { config:config,script:script,path:path,type:type,name:name }","import config from \"./ps-mock.service?angular=service&id=3cd1dcc8&type=config&lang=config&scoped=false\";\nimport script from \"./ps-mock.service?angular=service&id=3cd1dcc8&type=script&lang=js&scoped=false\";\nvar path=\"/Users/leonlin/Linjingbin/ps_iot_web_replace/ps-baogang/services/ps-mock.service\",type=\"service\",name=\"psMock\";;\nexport default { config:config,script:script,path:path,type:type,name:name }","import config from \"./ps-new-websocket.service?angular=service&id=65e847ec&type=config&lang=config&scoped=false\";\nimport script from \"./ps-new-websocket.service?angular=service&id=65e847ec&type=script&lang=js&scoped=false\";\nvar path=\"/Users/leonlin/Linjingbin/ps_iot_web_replace/ps-baogang/services/ps-new-websocket.service\",type=\"service\",name=\"psNewWebsocket\";;\nexport default { config:config,script:script,path:path,type:type,name:name }","import config from \"./ps-polling.service?angular=service&id=cdbf8c9a&type=config&lang=config&scoped=false\";\nimport script from \"./ps-polling.service?angular=service&id=cdbf8c9a&type=script&lang=js&scoped=false\";\nvar path=\"/Users/leonlin/Linjingbin/ps_iot_web_replace/ps-baogang/services/ps-polling.service\",type=\"service\",name=\"psPolling\";;\nexport default { config:config,script:script,path:path,type:type,name:name }","import config from \"./ps-topo.service?angular=service&id=2b79dcf8&type=config&lang=config&scoped=false\";\nimport script from \"./ps-topo.service?angular=service&id=2b79dcf8&type=script&lang=js&scoped=false\";\nvar path=\"/Users/leonlin/Linjingbin/ps_iot_web_replace/ps-baogang/services/ps-topo.service\",type=\"service\",name=\"psTopo\";;\nexport default { config:config,script:script,path:path,type:type,name:name }","import config from \"./ps-topo2.service?angular=service&id=635844e8&type=config&lang=config&scoped=false\";\nimport script from \"./ps-topo2.service?angular=service&id=635844e8&type=script&lang=js&scoped=false\";\nvar path=\"/Users/leonlin/Linjingbin/ps_iot_web_replace/ps-baogang/services/ps-topo2.service\",type=\"service\",name=\"psTopo2\";;\nexport default { config:config,script:script,path:path,type:type,name:name }","import config from \"./ps-track-data.service?angular=service&id=75d73a2c&type=config&lang=config&scoped=false\";\nimport script from \"./ps-track-data.service?angular=service&id=75d73a2c&type=script&lang=js&scoped=false\";\nvar path=\"/Users/leonlin/Linjingbin/ps_iot_web_replace/ps-baogang/services/ps-track-data.service\",type=\"service\",name=\"psTrackData\";;\nexport default { config:config,script:script,path:path,type:type,name:name }","import config from \"./ps-tracker-chart.service?angular=service&id=48359639&type=config&lang=config&scoped=false\";\nimport script from \"./ps-tracker-chart.service?angular=service&id=48359639&type=script&lang=js&scoped=false\";\nvar path=\"/Users/leonlin/Linjingbin/ps_iot_web_replace/ps-baogang/services/ps-tracker-chart.service\",type=\"service\",name=\"psTrackerChart\";;\nexport default { config:config,script:script,path:path,type:type,name:name }","import config from \"./ps-tracker-creator.service?angular=service&id=547efb87&type=config&lang=config&scoped=false\";\nimport script from \"./ps-tracker-creator.service?angular=service&id=547efb87&type=script&lang=js&scoped=false\";\nvar path=\"/Users/leonlin/Linjingbin/ps_iot_web_replace/ps-baogang/services/ps-tracker-creator.service\",type=\"service\",name=\"psTrackerCreator\";;\nexport default { config:config,script:script,path:path,type:type,name:name }","import config from \"./ps-tracker.service?angular=service&id=136c5828&type=config&lang=config&scoped=false\";\nimport script from \"./ps-tracker.service?angular=service&id=136c5828&type=script&lang=js&scoped=false\";\nvar path=\"/Users/leonlin/Linjingbin/ps_iot_web_replace/ps-baogang/services/ps-tracker.service\",type=\"service\",name=\"psTracker\";;\nexport default { config:config,script:script,path:path,type:type,name:name }","import config from \"./ps-tree-data.service?angular=service&id=e6da0bae&type=config&lang=config&scoped=false\";\nimport script from \"./ps-tree-data.service?angular=service&id=e6da0bae&type=script&lang=js&scoped=false\";\nvar path=\"/Users/leonlin/Linjingbin/ps_iot_web_replace/ps-baogang/services/ps-tree-data.service\",type=\"service\",name=\"psTreeData\";;\nexport default { config:config,script:script,path:path,type:type,name:name }","import config from \"./ps-ui-router-handler.service?angular=service&id=310567cf&type=config&lang=config&scoped=false\";\nimport script from \"./ps-ui-router-handler.service?angular=service&id=310567cf&type=script&lang=js&scoped=false\";\nvar path=\"/Users/leonlin/Linjingbin/ps_iot_web_replace/ps-baogang/services/ps-ui-router-handler.service\",type=\"service\",name=\"psUiRouterHandler\";;\nexport default { config:config,script:script,path:path,type:type,name:name }","import config from \"./ps-websocket.bak.service?angular=service&id=72a94695&type=config&lang=config&scoped=false\";\nimport script from \"./ps-websocket.bak.service?angular=service&id=72a94695&type=script&lang=js&scoped=false\";\nvar path=\"/Users/leonlin/Linjingbin/ps_iot_web_replace/ps-baogang/services/ps-websocket.bak.service\",type=\"service\",name=\"bak\";;\nexport default { config:config,script:script,path:path,type:type,name:name }","import config from \"./ps-websocket.service?angular=service&id=4e82b777&type=config&lang=config&scoped=false\";\nimport script from \"./ps-websocket.service?angular=service&id=4e82b777&type=script&lang=js&scoped=false\";\nvar path=\"/Users/leonlin/Linjingbin/ps_iot_web_replace/ps-baogang/services/ps-websocket.service\",type=\"service\",name=\"psWebsocket\";;\nexport default { config:config,script:script,path:path,type:type,name:name }","import config from \"./test.service?angular=service&id=1fdd54e8&type=config&lang=config&scoped=false\";\nimport script from \"./test.service?angular=service&id=1fdd54e8&type=script&lang=js&scoped=false\";\nvar path=\"/Users/leonlin/Linjingbin/ps_iot_web_replace/ps-baogang/services/test.service\",type=\"service\",name=\"test\";;\nexport default { config:config,script:script,path:path,type:type,name:name }","(function(global, factory){\n  if(typeof window === \"undefined\"){\n    if(typeof module !== \"undefined\"){\n      module.exports = factory();\n    }\n  } else {\n    if(typeof define === \"function\"){\n      define(factory);\n    } else {\n      window.psUltility = factory();\n    }\n  }\n})(this, function(){\n  var tostring = Object.prototype.toString,\n    pop = Array.prototype.pop,\n    push = Array.prototype.push,\n    slice = Array.prototype.slice,\n    shift = Array.prototype.shift,\n    unshift = Array.prototype.unshift,\n    isUndefined = isType(\"Undefined\"),\n    isNull = isType(\"Null\"),\n    isFunction = isType(\"Function\"),\n    isArray = isType(\"Array\"),\n    isString = isType(\"String\"),\n    isNumber = isType(\"Number\"),\n    isObject = isType(\"Object\"),\n    requireCached = createCache(),\n    cssCached = createCache();\n  function createCache(){\n    var keys = [];\n    var cached = function( key, value ){\n      if ( typeof value !== \"undefined\"){\n        keys.push( key );\n        cached[\"__\" + key] = value;\n      } else {\n        return cached[\"__\" + key];\n      }\n    };\n    cached.keys = function(){\n      return keys;\n    }\n    return cached\n  }\n  function urlparser( input ){\n    function splitByChar( str, char ){\n      var regex = \"^([^\" + char + \"]+)\\\\\" + char + \"(.*)\",\n        match = new RegExp( regex ).exec( str );\n      return match ? match.slice(1) : [ str ];\n    }\n    function slice( queue, target){\n      var obj = {}, item = queue.shift(), match;\n      if( item ){\n        match = new RegExp(item[1]).exec( target );\n        if( match ){\n          if( match[1] ){\n            obj[ item[0] ] = match[1];\n            extend( obj, slice( queue, match[2] ));\n          } else {\n            obj[ item[0] ] = match[0];\n          }\n        } else {\n          extend( obj, slice( queue, target ));\n        }\n      }\n      return obj;\n    }\n    function makeHost( url ){\n      var protocol = \"^(?:([^:\\\\/]+)\\\\:\\/\\/)?\",\n        address = \"([^:/?\\\\#]+)\",\n        port = \"(?::(\\\\d+))?\",\n        urlExp = protocol + address + port + \"(.*)\",\n        match = new RegExp( urlExp ).exec( url ),\n        u = match.shift(),\n        protocal = match.shift() || \"http\",\n        address = match.shift(),\n        port = ( match.shift() || 80 ) - 0,\n        path = match.shift() || \"/\";\n      return {\n        host :  protocal + \"://\" + address + \":\" + port + path,\n        protocol : protocal,\n        address : address,\n        port : port,\n        path : path,\n      }\n    }\n    function makeQUery( query ){\n      var queue = query.split(\"&\"), item, rs = {};\n      while(item = queue.shift()){\n        var dt = item.split(\"=\");\n        rs[dt[0]] = dt[1];\n      }\n      return rs;\n    }\n    var match1 = splitByChar( input, \"?\" ),\n      host = match1[0],\n      hostObj = makeHost( host ),\n      rest = match1[1],\n      match2 = rest ? splitByChar( rest, \"#\" ) : [],\n      query = match2[0],\n      queryObj = query ? makeQUery( query ) : {},\n      hash = match2[1] || undefined,\n      rs = {\n        hash : hash\n      };\n    return extend( rs, hostObj, {\n      query : queryObj\n    });\n  }\n  function remove$$hashKey(str){\n    var regex = /(?:,\\s*\\\"\\${2}hashKey\\\"\\s*:\\s*\\\"[^\"]*\\\"\\s*)|(?:\\\"\\${2}hashKey\\\"\\s*:\\s*\\\"[^\"]*\\\"\\s*,)/g;\n    while(regex.test(str)){\n      str = str.replace(regex, \"\");\n    };\n    return str;\n  };\n  function jsonparser(str){\n    let json;\n    try {\n      json = JSON.parse(str);\n    } catch(e) {\n      console.error(e);\n      json = null;\n    } finally {\n      return json\n    }\n  }\n\n  function requirejs( require, deps, callback ){\n    var rs = [];\n    function load( deps ){\n      var url = deps.shift(),\n        cache = requireCached(url)\n      if( !url ){\n        callback.apply( window, rs );\n        return;\n      }\n      if( cache ){\n        rs.push(cache);\n        load(deps);\n      } else {\n        require([url], function(n) {\n          rs.push(n);\n          load(deps);\n        })\n      }\n    }\n    load( deps );\n  }\n\n  function requireCss(css, callback){\n    function loadCss(url, callback){\n      if( typeof cssCached(url) !== \"undefined\" ){\n        cssCached(url).remove();\n      }\n      let link = document.createElement(\"link\");\n      link.setAttribute(\"rel\", \"stylesheet\");\n      link.setAttribute(\"type\", \"text/css\");\n      link.setAttribute(\"href\", url);\n      document.head.appendChild(link);\n      link.onload = function(e){\n        cssCached( url, link );\n        typeof callback === \"function\" ? callback(e) : null;\n      }\n    }\n    function load(css){\n      let url = css.shift();\n      url ? loadCss(url, function(e){\n        load(css);\n      }) : ( typeof callback == \"function\" ? callback() : null );\n    }\n    load(css)\n  }\n  function camelhill( str ){\n    var rs = \"\",\n      arr = [].slice.call(str),\n      char;\n    while( char = arr.shift()){\n      if( char === \"-\"){\n        char = arr.shift();\n        char = typeof char === \"undefined\" ? \"\" : char.toUpperCase();\n      }\n      rs += char;\n    }\n    return rs;\n  }\n  function unCamelhill( str ){\n    var rs = \"\",\n      arr = [].slice.call(str),\n      char;\n    while( char = arr.shift()){\n      if( /[A-Z]/.test(char) ){\n        char = char.toLowerCase();\n        rs += \"-\";\n      }\n      rs += char;\n    }\n    return rs;\n  }\n  function random(length){\n    length = length || 16;\n    var chars = `abcdedfghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890`,\n      rs = \"\", rnd, len = chars.length;\n    for(var i = 0; i < length; i++){\n      rnd = parseInt( Math.random() * len );\n      rs += chars[rnd];\n    }\n    return rs;\n  }\n  function clone(obj){\n    return JSON.parse(JSON.stringify(obj));\n  }\n  function list2Tree(list, fn, key){\n    let tree = null;\n    key = key || 'children';\n    each(list, ( n )=>{\n      var findParent = list.find((m, i)=>{\n        return fn(n, m);\n      });\n      if(!findParent){\n        tree = n;\n      } else {\n        findParent[key] = findParent[key] || [];\n        findParent[key].push(n);\n      }\n    });\n    return [tree];\n  }\n  function attribute(obj, attr, val){\n    if(!isObject(obj)){ return undefined; }\n    if(attr[0] !== \"[\" && attr[0] !== \".\"){\n      attr = \".\" + attr;\n    };\n    var attrRegex = \"(?:[\\\\w$@])\",\n      numRegex = \"(?:[\\\\d])\",\n      regex = \"\\\\[\\\\\\'(\" + attrRegex + \"+)\\\\\\'\\\\]|\\\\[\\\\\\\"(\" + attrRegex + \"+)\\\\\\\"\\\\]|\\\\[(\" + numRegex + \"+)\\\\]|\\\\.(\" + attrRegex + \"+)\";\n    let sofar = attr, match, key;\n    while(match = new RegExp(regex).exec(sofar)){\n      key = match[1] || match[2] || match[3] || match[4];\n      sofar = sofar.slice(match[0].length);\n      if(typeof val === \"undefined\"){\n        if(isObject(obj) && typeof obj[key] !== \"undefined\"){\n          obj = obj[key];\n        } else{\n          return undefined;\n        }\n      } else {\n        obj = obj[key] = new RegExp(regex).test(sofar) ? ( obj[key] || {} ) : val;\n      }\n    }\n    return obj;\n  }\n  function deepClone(obj){\n    let rs = recursive(obj);\n    function recursive(node){\n      let rs = node instanceof Array ? [] : {};\n      for(var i in node){\n        if(typeof node[i] === \"object\"){\n          rs[i] = recursive(node[i]);\n        } else {\n          rs[i] = node[i]\n        }\n      }\n      return rs;\n    }\n    return rs;\n  }\n  function extend(){\n    var args = [].slice.call( arguments ),\n      cur = args.shift(), target;\n    while(target = args.shift()){\n      for(var i in target){\n        cur[i] = target[i];\n      }\n    }\n    return cur;\n  };\n  function isType(type){\n    return function(obj){\n      return tostring.call(obj) == \"[object \" + type + \"]\" && obj === obj;\n    }\n  }\n  function find(arr, callback){\n    var i;\n    arr = arr || [];\n    for(var i = 0; i < arr.length; i++){\n      if(callback(arr[i], i)){\n        return arr[i];\n      }\n    }\n  }\n  function filter(arr, callback){\n    var i, rs = [];\n    arr = arr || [];\n    for(var i = 0; i < arr.length; i++){\n      if(callback(arr[i], i)){\n        rs.push(arr[i]);\n      }\n    }\n    return rs;\n  }\n  function each(arr, callback){\n    var i;\n    arr = arr || [];\n    for(i=0; i<arr.length; i++){\n      callback && callback(arr[i], i);\n    }\n  }\n  function eachProp(obj, callback){\n    var i;\n    obj = obj || {};\n    for(var i in obj){\n      callback && callback(obj[i], i);\n    }\n  }\n  function isEmpty(obj){\n    return isUndefined(obj) || isNull(obj)\n  }\n  function pushDiff(a, b){\n    a = a || [];\n    b = isEmpty(b) ? [] : ( isArray(b) ? b : [b] );\n    each(b, function(n){\n      a.indexOf(n) === -1 ? a.push(n) : null;\n    });\n    return a.length;\n  }\n  function addStyle(elem, style){\n    eachProp(style, function(n, i){\n      elem.style[i] = n;\n    })\n  }\n  function setStyle(dom, style){\n    style && eachProp(style, function(elem, attr){\n      dom.style[attr] = elem;\n    })\n  }\n  function tree(key){\n    key = key || \"children\";\n    function creatRecursive(config){\n      config = config || {};\n      var onMatch = config.match || function(){},\n        onEnd = config.end || function(){};\n      return function(node, callback){\n        var queue, item, node, list, condi, stop;\n        if(typeof node === \"object\" || node !== null){\n          queue = isArray(node) ? node.map(function(n, i){\n            return createItem(n, i, [], node);\n          }) : [ createItem(node, 0, [], [node]) ];\n        } else {\n          queue = [];\n        }\n        function createItem( node, index, parentNodes, parentlist ){\n          return {\n            node : node,\n            index : index,\n            parentNodes : parentNodes,\n            parentlist : parentlist\n          }\n        }\n        function values(obj){\n          var rs = [];\n          for(var i in obj){\n            rs.push(obj[i]);\n          }\n          return rs;\n        }\n        while( item = queue.shift()){\n          node = item.node;\n          list = isArray(node[key]) ? node[key] : [];\n          condi = typeof callback === \"function\"\n            ? callback.apply(null, values(item)) : null;\n          if(condi === true){\n            stop = onMatch( node )\n            if( typeof stop !== \"undefined\"){\n              return stop;\n            };\n          }\n          [].push.apply(queue, list.map(function(n, i){\n            return createItem(n, i, item.parentNodes.concat(node) ,list);\n          }));\n        }\n        stop = onEnd( node )\n        if( typeof stop !== \"undefined\"){\n          return stop;\n        };\n      }\n    }\n    function reverseCondition(callback){\n      return function(){\n        return !callback.apply(null, arguments);\n      }\n    }\n    function forEach(node, callback){\n      creatRecursive()(node, callback);\n    }\n    function find(node, callback){\n      return creatRecursive({\n        match : function(n){\n          return n;\n        }\n      })(node, callback)\n    }\n    function filter(node, callback){\n      var rs = [];\n      creatRecursive()(node, function() {\n        if(callback.apply(null, arguments)){\n          rs.push(arguments[0]);\n        };\n      });\n      return rs;\n    }\n    function every(node, callback){\n      return creatRecursive({\n        match : function(n){\n          return false;\n        },\n        end : function(){\n          return true;\n        }\n      })(node, reverseCondition(callback))\n    }\n    function some(node, callback){\n      return creatRecursive({\n        match : function(n){\n          return true;\n        },\n        end : function(){\n          return false;\n        }\n      })(node, callback)\n    }\n    return {\n      forEach : forEach,\n      find : find,\n      filter : filter,\n      every : every,\n      some :some\n    }\n  }\n  function addClass(elem, cls){\n    var oldcls = elem.getAttribute(\"class\"),\n      oldClsList = isString(oldcls) ? oldcls.split(\" \") : [],\n      clsList = cls.split(\" \");\n    pushDiff(oldClsList, clsList);\n    elem.setAttribute(\"class\", oldClsList.join(\" \"));\n  }\n  function setClass(elem, cs){\n    elem.setAttribute(\"class\", cs);\n  }\n  function hasClass(elem, cls){\n    if(elem && typeof elem.getAttribute === \"function\"){\n      var oldcls = elem.getAttribute(\"class\"),\n        oldClsList = isString(oldcls) ? oldcls.split(\" \") : [];\n      return oldClsList.indexOf(cls) != -1;\n    } else {\n      return false;\n    }\n  }\n  function removeClass(elem, cls){\n    if(!(elem && typeof elem.getAttribute === \"function\")){\n      return;\n    }\n    var oldcls = elem.getAttribute(\"class\"),\n      oldClsList = isString(oldcls) ? oldcls.split(\" \") : [],\n      i = oldClsList.indexOf(cls);\n    i != -1 && oldClsList.splice(i, 1);\n    elem.setAttribute(\"class\", oldClsList.join(\" \"));\n  }\n  function hasParent(elem, target){\n    var parent = elem;\n    while(parent){\n      if(parent === target){\n        return true;\n      }\n      parent = parent.parentElement;\n    }\n    return false;\n  }\n  function appendChildren(){\n    var self = this;\n    var arr = slice.call(arguments, 0);\n    each(arr, function(el){\n      self.append(el);\n    })\n  }\n  function getFilePath(path) {\n    var unit = \"[^.\\\\\\\\\\\\/]\",\n      regex = \"^(.*)(?:\\\\\\\\|\\\\/)\"+ unit + \"+\\\\.\" + unit + \"+$\",\n      match = new RegExp(regex, \"g\").exec(path);\n    return match ? match[1] : null;\n  }\n  function getFileName(path) {\n    var unit = \"[^.\\\\\\\\\\\\/]\",\n      regex = \"^.*(?:\\\\\\\\|\\\\/)(\"+ unit + \"+)\\\\.\" + unit + \"+$\",\n      match = new RegExp(regex, \"g\").exec(path);\n    return match ? match[1] : null;\n  }\n  function getFileExt(path) {\n    var unit = \"[^.\\\\\\\\\\\\/]\",\n      regex = \"\\\\.(\" + unit + \"+)$\",\n      match = new RegExp(regex, \"g\").exec(path);\n    return match ? match[1] : null;\n  }\n  function screenOffset(context){\n    var target = context,\n      x = target.offsetLeft,\n      y = target.offsetTop;\n    while(target = target.offsetParent){\n      x += target.offsetLeft + target.clientLeft;\n      y += target.offsetTop + target.clientTop;\n    }\n    target = context;\n    while(target = target.parentElement){\n      x -= target.scrollLeft;\n      y -= target.scrollTop;\n    }\n    return {\n      left : x,\n      top : y\n    }\n  }\n  function createElement(tag){\n    return document.createElement(tag);\n  }\n  function createDocumentFragment(){\n    return document.createDocumentFragment();\n  }\n  function topArray(obj){\n    return slice.call(obj);\n  }\n  function findElement(context, callback){\n    var stack = topArray(context.children),len, item;\n    while(item=stack.pop()){\n      if(callback(item)){ return item; }\n      item.children ? push.apply(stack,topArray(item.children)) : null;\n    }\n  }\n  function filterElement(context, callback){\n    var stack = topArray(context.children),len, item, rs = [];\n    while(item=stack.pop()){\n      callback(item) ? rs.push(item) : null;\n      item.children ? push.apply(stack,topArray(item.children)) : null;\n    }\n    return rs;\n  }\n  var pathResolver = {\n    join : function(){\n      var arr = [], minus = [], args = [].slice.call(arguments).map(function(d){\n        if(typeof d === \"string\"){\n          return d;\n        } else if( typeof d === \"number\" ){\n          return d + \"\";\n        }\n        return \".\"\n      }), item;\n      function join( arr, append ){\n        var item;\n        while( item = append.shift()){\n          if( item == \"..\"){\n            arr.length ? arr.pop() : minus.push(\"..\")\n          } else if( item == \".\"){\n\n          } else {\n            arr.push( item );\n          }\n        }\n      }\n      function toPathAry(str){\n        return str.split(\"/\").filter( function( d ){ return d });\n      }\n      while( item = args.shift()){\n        item = toPathAry( item );\n        join( arr, item );\n      }\n      return minus.length\n        ? minus.join(\"/\") + \"/\" + arr.join(\"/\")\n        : \"./\" + arr.join(\"/\")\n    }\n  }\n  var dh = (function(){\n    /**\n     * Date Handler Created by leonlin.\n     * e.g.\n     * 1) create a Date Object on Today\n     * var dh = datehandler();\n     * 2) create a Date on certain Date\n     * var dh = datehandler('2017/12/31,10:20')\n     * 3) Add several years on original Date Object\n     * dh.addYear(1); dh.addYear(-2);\n     * 3) Add several years on clone Date Object\n     * var clone = dh.addYear(1, true)\n     * 4)output date string\n     * var str = dh.getDateString();\n     * var str = dh.getDateString('yy/MM/dd,hh');\n     * 5)output utc date string\n     * var utcstr = dh.getUTCDateString();\n     * var utcstr = dh.getUTCDateString('yy/MM/dd,hh');\n     */\n    function DateHandler(dateStr){\n      return new DateHandler.fn.init(dateStr);\n    };\n    var VERSION = \"DateHandler v1.0.0\",\n      ISDATEHANDLER = \"isDateHandler\",\n      SECONDTIMESTAMP = 1000,\n      MINUTETIMESTAMP = 60 * SECONDTIMESTAMP,\n      HOURTIMESTAMP = 60 * MINUTETIMESTAMP,\n      DAYTIMESTAMP = 24 * HOURTIMESTAMP,\n      OFFSET = \"0800\",\n      events = {};\n    function extend(){\n      var args = [].slice.call( arguments ),\n        cur = args.shift(), target;\n      while(target = args.shift()){\n        for(var i in target){\n          cur[i] = target[i];\n        }\n      }\n      return cur;\n    };\n    function to2Char(num){\n      if(num < 10){\n        return \"0\" + num\n      } else {\n        return num;\n      }\n    };\n    function to3Char(num){\n      if(num < 10){\n        return \"00\" + num\n      } else if(num < 100){\n        return \"0\" + num\n      } else {\n        return num;\n      }\n    };\n    function dateObject(date){\n      function dObject(d){\n        var cur = this;\n        extend(cur, {\n          year : d.getFullYear(),\n          month : d.getMonth() + 1,\n          dat : d.getDate(),\n          hour : d.getHours(),\n          minute : d.getMinutes(),\n          second : d.getSeconds(),\n          milisecond : d.getMilliseconds(),\n          utcyear : d.getUTCFullYear(),\n          utcmonth : d.getUTCMonth() + 1,\n          utcdat : d.getUTCDate(),\n          utchour : d.getUTCHours(),\n          utcminute : d.getUTCMinutes(),\n          utcsecond : d.getUTCSeconds(),\n          utcmilisecond : d.getUTCMilliseconds()\n        })\n      };\n      dObject.prototype.toString = function(){\n        var cur = this, str;\n        str = cur.year + \"-\";\n        str += to2Char(cur.month) + \"-\";\n        str += to2Char(cur.dat) + \":\";\n        str += to2Char(cur.hour) + \":\";\n        str += to2Char(cur.minute) + \":\";\n        str += to2Char(cur.second) + \".\";\n        str += to2Char(cur.utcmilisecond) + \"+\" + OFFSET;\n        return str;\n      };\n      dObject.prototype.toUTCString = function(){\n        var cur = this, str;\n        str = cur.utcyear + \"-\";\n        str += to2Char(cur.utcmonth) + \"-\";\n        str += to2Char(cur.utcdat) + \":\";\n        str += to2Char(cur.utchour) + \":\";\n        str += to2Char(cur.utcminute) + \":\";\n        str += to2Char(cur.utcsecond) + \".\";\n        str += to2Char(cur.utcmilisecond) + \"+\" + OFFSET;\n        return str;\n      };\n      return new dObject(date);\n    }\n    DateHandler.fn = DateHandler.prototype;\n    DateHandler.fn.init = function(dateStr){\n      var cur = this;\n      cur.on(\"dateChange\", function(d){\n        cur.setDate(d);\n      });\n      if( typeof dateStr === \"undefined\" || dateStr === null){\n        cur.setDate(new Date());\n        return;\n      }\n      if( typeof dateStr === \"object\" && dateStr.isDateHandler === \"isDateHandler\" ){\n        cur.setDate( dateStr.date );\n        return;\n      }\n      cur.setDate(typeof dateStr === \"object\"\n        ? dateStr : new Date(dateStr))\n    };\n    DateHandler.fn.init.prototype = DateHandler.fn\n    extend(DateHandler.fn.init.prototype, {\n      version : VERSION,\n      isDateHandler : ISDATEHANDLER,\n      on : function(eventName, callback){\n        events[eventName] = events[eventName] || [];\n        events[eventName].push(callback);\n      },\n      clone : function(){\n        var cur = this;\n        return new DateHandler.fn.init(cur.getTimeStamp());\n      },\n      setDate : function(d){\n        var cur = this;\n        cur.date = d;\n        cur.dateObject = dateObject(d);\n        cur.dateString = cur.dateObject.toString();\n        cur.utcDateString = cur.dateObject.toUTCString();\n      },\n      update : function(){\n        var cur = this;\n        var str = cur.dateObject.toString();\n        cur.setDate(new Date(str));\n      },\n      addYear : function(num, clone){\n        var target = clone == true ? this.clone() : this;\n        target.dateObject.year += parseInt(num);\n        target.update();\n        return target;\n      },\n      addMonth : function(num, clone){\n        var target = clone == true ? this.clone() : this;\n        var madd = target.dateObject.month + parseInt(num);\n        var yadd = 0;\n        while(madd < 1){\n          madd += 12;\n          yadd--;\n        }\n        while(madd > 12){\n          madd -= 12;\n          yadd++;\n        }\n        target.dateObject.year += yadd;\n        target.dateObject.month = madd;\n        target.update();\n        return target;\n      },\n      addDay : function(num, clone){\n        var target = clone == true ? this.clone() : this;\n        var dateMinSecond = DAYTIMESTAMP * num;\n        target.addTimeStamp(dateMinSecond);\n        return target;\n      },\n      addHour : function(num, clone){\n        var target = clone == true ? this.clone() : this;\n        var dateMinSecond = HOURTIMESTAMP * num;\n        target.addTimeStamp(dateMinSecond);\n        return target;\n      },\n      addMinute : function(num, clone){\n        var target = clone == true ? this.clone() : this;\n        var dateMinSecond = MINUTETIMESTAMP * num;\n        target.addTimeStamp(dateMinSecond);\n        return target;\n      },\n      addSecond : function(num, clone){\n        var target = clone == true ? this.clone() : this;\n        var dateMinSecond = SECONDTIMESTAMP * num;\n        target.addTimeStamp(dateMinSecond);\n        return target;\n      },\n      addTimeStamp : function(timestamp, clone){\n        var target = clone == true ? this.clone() : this;\n        var minSecond = target.date.getTime() + timestamp;\n        target.setDate(new Date(minSecond));\n        return target;\n      },\n      trimmToYear : function(clone){\n        var target = clone == true ? this.clone() : this;\n        var dt = target.dateObject.year + \"-01-01,00:00:00.000+\" + OFFSET;\n        target.setDate(new Date(dt));\n        return target;\n      },\n      trimmToMonth : function(clone){\n        var target = clone == true ? this.clone() : this;\n        var dt = target.dateObject.year + \"-\" + to2Char(target.dateObject.month) + \"-01,00:00:00.000+\" + OFFSET;\n        target.setDate(new Date(dt));\n        return target;\n      },\n      trimmToWeek : function(clone){\n        var target = clone == true ? this.clone() : this;\n        var d = target.date.getDay() || 7;\n        return target.addDay(1 - d).trimmToDate();\n      },\n      trimmToDate : function(clone){\n        var target = clone == true ? this.clone() : this;\n        var dt = target.dateObject.year;\n        dt += \"-\" + to2Char(target.dateObject.month);\n        dt += \"-\" + to2Char(target.dateObject.dat) + \",00:00:00.000+\" + OFFSET;\n        target.setDate(new Date(dt));\n        return target;\n      },\n      trimmToHour : function(clone){\n        var target = clone == true ? this.clone() : this;\n        var dt = target.dateObject.year;\n        dt += \"-\" + to2Char(target.dateObject.month);\n        dt += \"-\" + to2Char(target.dateObject.dat);\n        dt += \",\" + to2Char(target.dateObject.hour) + \":00:00.000+\" + OFFSET;\n        target.setDate(new Date(dt));\n        return target;\n      },\n      trimmToMinute : function(clone){\n        var target = clone == true ? this.clone() : this;\n        var dt = target.dateObject.year;\n        dt += \"-\" + to2Char(target.dateObject.month);\n        dt += \"-\" + to2Char(target.dateObject.dat);\n        dt += \",\" + to2Char(target.dateObject.hour);\n        dt += \":\" + to2Char(target.dateObject.minute) + \":00.000+\" + OFFSET;\n        target.setDate(new Date(dt));\n        return target;\n      },\n      trimmToSecond : function(clone){\n        var target = clone == true ? this.clone() : this;\n        var dt = target.dateObject.year;\n        dt += \"-\" + to2Char(target.dateObject.month);\n        dt += \"-\" + to2Char(target.dateObject.dat);\n        dt += \",\" + to2Char(target.dateObject.hour);\n        dt += \":\" + to2Char(target.dateObject.minute);\n        dt += \":\" + to2Char(target.dateObject.second) + \".000+\" + OFFSET;\n        target.setDate(new Date(dt));\n        return target;\n      },\n      getDate : function(){\n        return this.date;\n      },\n      getTimeStamp : function(){\n        return this.date.getTime();\n      },\n      getYear : function(){\n        return this.dateObject.year;\n      },\n      getMonth : function(){\n        return this.dateObject.month;\n      },\n      getDateString : function(str){\n        var year = this.dateObject.year;\n        var month = this.dateObject.month;\n        var dat = this.dateObject.dat;\n        var hour = this.dateObject.hour;\n        var minute = this.dateObject.minute;\n        var second = this.dateObject.second;\n        var milisecond = this.dateObject.milisecond;\n        if(str){\n          str = str.replace(/y+/g, year);\n          str = str.replace(/M+/g, to2Char(month));\n          str = str.replace(/d+/g, to2Char(dat));\n          str = str.replace(/h+/g, to2Char(hour));\n          str = str.replace(/m+/g, to2Char(minute));\n          str = str.replace(/s+/g, to2Char(second));\n          return str.replace(/n+/g, to3Char(milisecond));\n        } else {\n          return year + \"-\" + to2Char(month) + \"-\" + to2Char(dat) + \",\" + to2Char(hour) + \":\" + to2Char(minute) + \":\" + to2Char(second) + \".\" + to3Char(milisecond) + \"+\" + OFFSET;\n        }\n      },\n      getUTCDateString : function(str){\n        var utcyear = this.dateObject.utcyear;\n        var utcmonth = this.dateObject.utcmonth;\n        var utcdat = this.dateObject.utcdat;\n        var utchour = this.dateObject.utchour;\n        var utcminute = this.dateObject.utcminute;\n        var utcsecond = this.dateObject.utcsecond;\n        var utcmilisecond = this.dateObject.utcmilisecond;\n        if(str){\n          str = str.replace(/y+/g, utcyear);\n          str = str.replace(/M+/g, to2Char(utcmonth));\n          str = str.replace(/d+/g, to2Char(utcdat));\n          str = str.replace(/h+/g, to2Char(utchour));\n          str = str.replace(/m+/g, to2Char(utcminute));\n          str = str.replace(/s+/g, to2Char(utcsecond));\n          return str.replace(/n+/g, to3Char(utcsecond));\n        } else {\n          return utcyear + \"-\" + to2Char(utcmonth) + \"-\" + to2Char(utcdat) + \"T\" + to2Char(utchour) + \":\" + to2Char(utcminute) + \":\" + to2Char(utcsecond) + \".\" + to3Char(utcmilisecond) +\"Z\";\n        }\n      }\n    })\n    return DateHandler;\n  })()\n  return {\n    random : random,\n    isUndefined : isUndefined,\n    isNull : isNull,\n    isFunction : isFunction,\n    isArray : isArray,\n    isString : isString,\n    isNumber : isNumber,\n    isObject : isObject,\n    addStyle : addStyle,\n    setStyle : setStyle,\n    addClass : addClass,\n    setClass : setClass,\n    hasClass : hasClass,\n    hasParent : hasParent,\n    removeClass : removeClass,\n    appendChildren : appendChildren,\n    createElement : createElement,\n    createDocumentFragment : createDocumentFragment,\n    findElement : findElement,\n    filterElement : filterElement,\n    screenOffset : screenOffset,\n    each : each,\n    tree : tree,\n    pathResolver : pathResolver,\n    requirejs : requirejs,\n    requireCss : requireCss,\n    pushDiff : pushDiff,\n    eachProp : eachProp,\n    list2tree : list2Tree,\n    list2Tree : list2Tree,\n    find : find,\n    getFilePath : getFilePath,\n    getFileName : getFileName,\n    getFileExt : getFileExt,\n    filter : filter,\n    isType : isType,\n    clone : clone,\n    camelhill : camelhill,\n    unCamelhill : unCamelhill,\n    deepClone : deepClone,\n    extend : extend,\n    jsonparser : jsonparser,\n    urlparser : urlparser,\n    dateparser : dh,\n    remove$$hashKey : remove$$hashKey,\n    attribute : attribute\n  }\n});","const render = function (handlers, inConfig) {\n  return function (angularModule, url, callback) {\n    if (typeof url === \"function\") {\n      callback = url;\n      url = undefined;\n    }\n    let configs = [],\n      baseurl = getloadpath(url);\n\n    function getloadpath(url) {\n      if (typeof url === \"undefined\") {\n        return \"./\";\n      }\n      //let match = /^(.*\\/ps-(\\w+)\\/build\\/)/.exec(url);\n      let match = /^(.*\\/build\\/)/.exec(url)\n      return match ? match[1] : \"./\";\n    }\n    handlers.forEach(setup => {\n      let config = setup(angularModule);\n      config && config.type === \"router\" ? configs.push(config) : null;\n    });\n    if (configs.length > 0 && inConfig) {\n      angularModule.config(['$stateProvider', '$locationProvider', '$controllerProvider', '$compileProvider', '$filterProvider', '$provide', ($stateProvider, $locationProvider, $controllerProvider, $compileProvider, $filterProvider, $provide) => {\n        $locationProvider.hashPrefix('');\n        let angularConfig = window.__smartAngular__ = window.__smartAngular__ || {};\n        angularConfig.routers = angularConfig.routers || [];\n        [].push.apply(angularConfig.routers, configs);\n        configs.forEach(({\n          router,\n          ctrlname,\n          loaderpath,\n          template\n        }) => {\n          function hasRegistered(service, name) {\n            return angularModule._invokeQueue.some(item => {\n              return item[1] === service &&\n                item[2][0] === name\n            })\n          }\n          if (!hasRegistered(\"factory\", \"$registerService\")) {\n            $provide.factory(\"$registerService\", function () {\n              return {\n                getRouters() {\n                  return window.__smartAngular__[\"routers\"];\n                },\n                controller() {\n                  $controllerProvider.register.apply($controllerProvider, arguments);\n                  this._invokeQueue.push([\"$controllerProvider\", \"controller\", [arguments[0]]]);\n                },\n                directive() {\n                  $compileProvider.directive.apply($compileProvider, arguments)\n                  this._invokeQueue.push([\"$compileProvider\", \"directive\", [arguments[0]]]);\n                },\n                filter() {\n                  $filterProvider.register.apply($filterProvider, arguments);\n                  this._invokeQueue.push([\"$filterProvider\", \"filter\", [arguments[0]]]);\n                },\n                factory() {\n                  $provide.factory.apply($provide, arguments);\n                  this._invokeQueue.push([\"$provide\", \"factory\", [arguments[0]]]);\n                },\n                service() {\n                  $provide.service.apply($provide, arguments);\n                  this._invokeQueue.push([\"$provide\", \"service\", [arguments[0]]]);\n                },\n                _invokeQueue: [].slice.call(angularModule._invokeQueue)\n              }\n            });\n          }\n          let names = [\n            [ctrlname, router],\n            [`prod_controller.${ctrlname}`, `/prod_dashboard/:id/:showTree/:main_active_index${router}`],\n            [`prod_sub_dashboard.sub_${ctrlname}`, `/subview/:sub_active_index${router}`],\n            [`prod_sub_dashboard.minor_dashboard.minor_${ctrlname}`, `/minor_view/:minor_active_index${router}`]\n          ];\n          names.forEach(name => {\n            let config = {\n              url: name[1],\n              name: name[0],\n              template: template,\n              controller: ctrlname,\n              resolve: {\n                loader: [\"$q\", \"$registerService\", function (q, registerService) {\n                  let defer = q.defer(),\n                    time = new Date();\n                  if (loaderpath == null || loaderpath.length == 0) {\n                    defer.resolve(\"success\");\n                    return defer.promise;\n                  }\n                  let deps = loaderpath.map(d => baseurl + d);\n                  psrequire(deps, function () {\n                    let args = [].slice.call(arguments),\n                      endTime = (new Date() - time) / 1000,\n                      first = args.shift();\n                    let {\n                      template\n                    } = first(registerService);\n                    console.log(endTime.toFixed(2) + \"s is spent on importing new controllers and dependencies.\")\n                    setTemplate(template);\n                    for (var i in args) {\n                      args[i](registerService);\n                    }\n                    defer.resolve(\"success\");\n                  });\n                  return defer.promise;\n                }]\n              }\n            };\n\n            function setTemplate(str) {\n              $stateProvider.stateRegistry.states[name[0]].views.$default.template = str;\n            }\n            $stateProvider.state(config);\n          });\n        });\n      }])\n    }\n    typeof callback === \"function\" ?\n      callback(angularModule) : null;\n  };\n}\nexport {\n  render\n}","import obj from \"-!../../node_modules/ps-angular-loader/lib/index.js!./common-method-service2.service\";\nimport angularExplainer from \"../../node_modules/ps-angular-loader/lib/angular-explainer.js\";\nexport default angularExplainer.get(obj.type, obj)","export default {\"injector\":\"$rootScope,$parse,$timeout,$q,$compile,ajax,$state,psUiRouterHandler,psTreeData,resourceUIService,psLoading\"}","import obj from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/ps-angular-loader/lib/loaders/angular-dispatcher.js!../../node_modules/ps-angular-loader/lib/index.js!./common-method-service2.service?angular=service&type=script\"\nexport default obj","import obj from \"-!../../node_modules/ps-angular-loader/lib/index.js!./ps-area-state.service\";\nimport angularExplainer from \"../../node_modules/ps-angular-loader/lib/angular-explainer.js\";\nexport default angularExplainer.get(obj.type, obj)","export default {\"injector\":\"$q\"}","import obj from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/ps-angular-loader/lib/loaders/angular-dispatcher.js!../../node_modules/ps-angular-loader/lib/index.js!./ps-area-state.service?angular=service&type=script\"\nexport default obj","import obj from \"-!../../node_modules/ps-angular-loader/lib/index.js!./ps-btn-click.service\";\nimport angularExplainer from \"../../node_modules/ps-angular-loader/lib/angular-explainer.js\";\nexport default angularExplainer.get(obj.type, obj)","export default {\"injector\":\"$rootScope,psTreeData,$state,$q,commonMethodService,commonMethodService2,ajax,growl,psRouter,psDialog\",\"deps\":\"troubleshootDialog\"}","import obj from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/ps-angular-loader/lib/loaders/angular-dispatcher.js!../../node_modules/ps-angular-loader/lib/index.js!./ps-btn-click.service?angular=service&type=script\"\nexport default obj","import obj from \"-!../../node_modules/ps-angular-loader/lib/index.js!./ps-config.service\";\nimport angularExplainer from \"../../node_modules/ps-angular-loader/lib/angular-explainer.js\";\nexport default angularExplainer.get(obj.type, obj)","export default {\"injector\":\"$rootScope,$q\"}","import obj from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/ps-angular-loader/lib/loaders/angular-dispatcher.js!../../node_modules/ps-angular-loader/lib/index.js!./ps-config.service?angular=service&type=script\"\nexport default obj","import obj from \"-!../../node_modules/ps-angular-loader/lib/index.js!./ps-mock.service\";\nimport angularExplainer from \"../../node_modules/ps-angular-loader/lib/angular-explainer.js\";\nexport default angularExplainer.get(obj.type, obj)","export default {\"injector\":\"$rootScope,$q\"}","import obj from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/ps-angular-loader/lib/loaders/angular-dispatcher.js!../../node_modules/ps-angular-loader/lib/index.js!./ps-mock.service?angular=service&type=script\"\nexport default obj","import obj from \"-!../../node_modules/ps-angular-loader/lib/index.js!./ps-new-websocket.service\";\nimport angularExplainer from \"../../node_modules/ps-angular-loader/lib/angular-explainer.js\";\nexport default angularExplainer.get(obj.type, obj)","export default {\"injector\":\"$q,$rootScope\"}","import obj from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/ps-angular-loader/lib/loaders/angular-dispatcher.js!../../node_modules/ps-angular-loader/lib/index.js!./ps-new-websocket.service?angular=service&type=script\"\nexport default obj","import obj from \"-!../../node_modules/ps-angular-loader/lib/index.js!./ps-polling.service\";\nimport angularExplainer from \"../../node_modules/ps-angular-loader/lib/angular-explainer.js\";\nexport default angularExplainer.get(obj.type, obj)","export default {\"injector\":\"$rootScope,$q,ajax,psWebsocket\"}","import obj from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/ps-angular-loader/lib/loaders/angular-dispatcher.js!../../node_modules/ps-angular-loader/lib/index.js!./ps-polling.service?angular=service&type=script\"\nexport default obj","import obj from \"-!../../node_modules/ps-angular-loader/lib/index.js!./ps-topo.service\";\nimport angularExplainer from \"../../node_modules/ps-angular-loader/lib/angular-explainer.js\";\nexport default angularExplainer.get(obj.type, obj)","export default {\"injector\":\"$rootScope,$q,$state,psTreeData,ajax,resourceUIService,kpiDataService,psWebsocket,SwSocket,unitService,commonMethodService2\"}","import obj from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/ps-angular-loader/lib/loaders/angular-dispatcher.js!../../node_modules/ps-angular-loader/lib/index.js!./ps-topo.service?angular=service&type=script\"\nexport default obj","import obj from \"-!../../node_modules/ps-angular-loader/lib/index.js!./ps-topo2.service\";\nimport angularExplainer from \"../../node_modules/ps-angular-loader/lib/angular-explainer.js\";\nexport default angularExplainer.get(obj.type, obj)","export default {\"injector\":\"$rootScope,$q,$state,psTreeData,ajax,resourceUIService,kpiDataService,psWebsocket,SwSocket,unitService,commonMethodService2\"}","import obj from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/ps-angular-loader/lib/loaders/angular-dispatcher.js!../../node_modules/ps-angular-loader/lib/index.js!./ps-topo2.service?angular=service&type=script\"\nexport default obj","import obj from \"-!../../node_modules/ps-angular-loader/lib/index.js!./ps-track-data.service\";\nimport angularExplainer from \"../../node_modules/ps-angular-loader/lib/angular-explainer.js\";\nexport default angularExplainer.get(obj.type, obj)","export default {\"injector\":\"$q, $timeout\"}","import obj from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/ps-angular-loader/lib/loaders/angular-dispatcher.js!../../node_modules/ps-angular-loader/lib/index.js!./ps-track-data.service?angular=service&type=script\"\nexport default obj","import obj from \"-!../../node_modules/ps-angular-loader/lib/index.js!./ps-tracker-chart.service\";\nimport angularExplainer from \"../../node_modules/ps-angular-loader/lib/angular-explainer.js\";\nexport default angularExplainer.get(obj.type, obj)","export default {\"injector\":\"$rootScope,$q,$state,ajax,growl,psStore,commonMethodService,commonMethodService2,psRouter,psBtnClick\"}","import obj from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/ps-angular-loader/lib/loaders/angular-dispatcher.js!../../node_modules/ps-angular-loader/lib/index.js!./ps-tracker-chart.service?angular=service&type=script\"\nexport default obj","import obj from \"-!../../node_modules/ps-angular-loader/lib/index.js!./ps-tracker-creator.service\";\nimport angularExplainer from \"../../node_modules/ps-angular-loader/lib/angular-explainer.js\";\nexport default angularExplainer.get(obj.type, obj)","export default {\"injector\":\"$rootScope,$q\"}","import obj from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/ps-angular-loader/lib/loaders/angular-dispatcher.js!../../node_modules/ps-angular-loader/lib/index.js!./ps-tracker-creator.service?angular=service&type=script\"\nexport default obj","import obj from \"-!../../node_modules/ps-angular-loader/lib/index.js!./ps-tracker.service\";\nimport angularExplainer from \"../../node_modules/ps-angular-loader/lib/angular-explainer.js\";\nexport default angularExplainer.get(obj.type, obj)","export default {\"injector\":\"$rootScope,$q,$state,ajax,growl,psStore,commonMethodService,psRouter,psBtnClick\"}","import obj from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/ps-angular-loader/lib/loaders/angular-dispatcher.js!../../node_modules/ps-angular-loader/lib/index.js!./ps-tracker.service?angular=service&type=script\"\nexport default obj","import obj from \"-!../../node_modules/ps-angular-loader/lib/index.js!./ps-tree-data.service\";\nimport angularExplainer from \"../../node_modules/ps-angular-loader/lib/angular-explainer.js\";\nexport default angularExplainer.get(obj.type, obj)","export default {\"injector\":\"$rootScope,$q,$state,ajax,resourceUIService,kpiDataService,psWebsocket,psConfig\"}","import obj from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/ps-angular-loader/lib/loaders/angular-dispatcher.js!../../node_modules/ps-angular-loader/lib/index.js!./ps-tree-data.service?angular=service&type=script\"\nexport default obj","import obj from \"-!../../node_modules/ps-angular-loader/lib/index.js!./ps-ui-router-handler.service\";\nimport angularExplainer from \"../../node_modules/ps-angular-loader/lib/angular-explainer.js\";\nexport default angularExplainer.get(obj.type, obj)","export default {\"injector\":\"$rootScope,$q,ajax,$state,psTreeData,$registerService,psConfig\"}","import obj from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/ps-angular-loader/lib/loaders/angular-dispatcher.js!../../node_modules/ps-angular-loader/lib/index.js!./ps-ui-router-handler.service?angular=service&type=script\"\nexport default obj","import obj from \"-!../../node_modules/ps-angular-loader/lib/index.js!./ps-websocket.bak.service\";\nimport angularExplainer from \"../../node_modules/ps-angular-loader/lib/angular-explainer.js\";\nexport default angularExplainer.get(obj.type, obj)","export default {\"injector\":\"$q,$rootScope\"}","import obj from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/ps-angular-loader/lib/loaders/angular-dispatcher.js!../../node_modules/ps-angular-loader/lib/index.js!./ps-websocket.bak.service?angular=service&type=script\"\nexport default obj","import obj from \"-!../../node_modules/ps-angular-loader/lib/index.js!./ps-websocket.service\";\nimport angularExplainer from \"../../node_modules/ps-angular-loader/lib/angular-explainer.js\";\nexport default angularExplainer.get(obj.type, obj)","export default {\"injector\":\"$q,$rootScope\"}","import obj from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/ps-angular-loader/lib/loaders/angular-dispatcher.js!../../node_modules/ps-angular-loader/lib/index.js!./ps-websocket.service?angular=service&type=script\"\nexport default obj","import obj from \"-!../../node_modules/ps-angular-loader/lib/index.js!./test.service\";\nimport angularExplainer from \"../../node_modules/ps-angular-loader/lib/angular-explainer.js\";\nexport default angularExplainer.get(obj.type, obj)","export default {\"injector\":\"$rootScope\"}","import obj from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/ps-angular-loader/lib/loaders/angular-dispatcher.js!../../node_modules/ps-angular-loader/lib/index.js!./test.service?angular=service&type=script\"\nexport default obj"],"sourceRoot":""}